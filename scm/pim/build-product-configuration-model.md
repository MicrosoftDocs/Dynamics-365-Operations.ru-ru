---
title: "Построение модели конфигурации продукта"
description: "Потребность в конфигурировании продуктов в соответствии с особыми требованиями становится скорее правилом, чем исключением, как в B2B-, так и в B2C-отношениях."
author: YuyuScheller
manager: AnnBe
ms.date: 04/04/2017
ms.topic: article
ms.prod: 
ms.service: Dynamics365Operations
ms.technology: 
ms.search.form: PCProductConfigurationModelDetails
audience: Application User
ms.search.scope: AX 7.0.0, Operations, Core
ms.custom: 75083
ms.assetid: f08072b8-cb0b-43aa-9509-f5ec32caecd9
ms.search.region: Global
ms.search.industry: Manufacturing
ms.author: yuyus
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
translationtype: Human Translation
ms.sourcegitcommit: 9ccbe5815ebb54e00265e130be9c82491aebabce
ms.openlocfilehash: 8353b0bc6601aa38ca3e93d89e33a1f2f4205a60
ms.lasthandoff: 03/31/2017


---

# <a name="build-a-product-configuration-model"></a>Построение модели конфигурации продукта

Потребность в конфигурировании продуктов в соответствии с особыми требованиями становится скорее правилом, чем исключением, как в B2B-, так и в B2C-отношениях.

Изготовитель, который поддерживает сценарии конфигурирования под заказ, имеет возможность более гибко реагировать на потребности клиентов. Кроме того, путем создания запасов полуфабрикатов в виде универсальных компонентов, а не готовой продукции, производитель может уменьшить капитал, замороженный в запасах.  

Успешный переход от схемы производства в запас к схеме конфигурирования под заказ требует тщательного анализа структур продуктов, выявления семейств продуктов и компонентизации. Чтобы уменьшить количество деталей и свести к минимуму количество незавершенных товаров, очень важно понимать интерфейсы продуктов и проектировать детали с учетом пригодности к многократному применению.  

Существует несколько принципов моделирования конфигурации продукта, например основанное на правилах, основанное на аналитиках и основанное на ограничениях моделирование. Исследования показывают, что основанная на ограничениях методология может уменьшить количество строк кода в моделях примерно на 50 процентов по сравнению с другими принципами моделирования. Следовательно, эта методология может уменьшить общую стоимость владения (TCO). Перемещая из модели, основанные на правилах, на основе кода X ++ в модель на основе ограничений, больше не требуются лицензии разработчика с целью сохранения моделей продукции.

## <a name="product-configuration"></a>Конфигурация продукта
Период индустриализации привел к огромным достижениям в производстве высококачественных, функциональных изделий по доступным ценам. Эффект масштаба позволил большинству людей в промышленно развитых странах приобрести автомобили, телевизоры, бытовую технику и другие товары, которые большинство из нас считают необходимой составляющей повседневной жизни.  

Поскольку многие изделия стали массовыми, возникла потребность в их дифференциации. Первой реакцией производителей было создание вариантов каждого изделия, чтобы у покупателей было больше альтернатив. Эта стратегия привела к проблемам с прогнозированием, а также к повышению стоимости запасов и появлению непроданных изделий, которые становились устаревшими.  

Принимая на вооружение философию конфигурирования на заказ, производители имеют возможность удовлетворить потребительский спрос на уникальные изделия и сократить количество устаревших номенклатур запасах либо ликвидировать их вовсе. По перехода от философии производства в запасы к философии конфигурирования на заказ сразу же возникает одна проблема: необходимость обеспечить короткие сроки выполнения заказов при низких уровнях запасов.  

Ключом к успеху здесь является тщательный анализ портфеля продукции и поиск паттернов как в характеристиках продуктов, так и в технологических процессах. Задача состоит в том, чтобы выявить универсальные компоненты, которые могут быть изготовлены на одном и том же оборудовании и использоваться во всех вариантах.  

Новый набор функций "Конфигурация продукта" включает в себя пользовательский интерфейс, который обеспечивает визуальный обзор структуры модели конфигурации продукта, а также декларативный синтаксис ограничений, который не требует компиляции. Следовательно, компаниям, которые хотят перейти к практике конфигурирования, будет легче приступить к работе. Как будет пояснено в следующих разделах, проектировщику продукта больше не требуется помощь разработчика для построения модели конфигурации продукта, ее тестирования и передачи торговой организации.

## <a name="building-a-product-configuration-model"></a>Построение модели конфигурации продукта
Существует несколько подходов к построению модели конфигурации продукта, которыми может воспользоваться пользователь. Один из вариантов — двигаться последовательно, т. е. сначала создать все ссылочные данные, такие как шаблоны продукта, уникально идентифицируемые продукты и операционные ресурсы, а затем включать их в качестве компонентов, строк спецификаций, операций маршрута и других элементов модели конфигурации продукта. Другой вариант — двигаться итеративно, т. е сначала создать модель, а затем по мере необходимости добавлять ссылочные данные.

### <a name="components"></a>Компоненты

Модель конфигурации продукта состоит из одного или нескольких компонентов, увязанных воедино посредством подкомпонентных отношений. Компоненты определяются один раз, а затем могут использоваться многократно в одной или нескольких моделях конфигурации продуктов. Компоненты — это главные "кирпичики" модели конфигурации продукта, и практически вся информация о модели связана именно с ними.

### <a name="attributes"></a>Атрибуты

У каждого компонента есть один или несколько атрибутов для определения его свойств. Атрибуты — это то, что пользователи будут выбирать в процессе конфигурирования. Атрибуты управляют отношениями и между компонентами, и внутри компонентами путем их включения в ограничения или вычисления. Посредством условий, применяемых к строкам спецификации, атрибуты можно использовать для определения того, из каких физических деталей будет состоять сконфигурированный продукт. Кроме того, атрибут может управлять свойством строки спецификации посредством механизма сопоставления. Подобная функциональность существует и для операций маршрута (и включение, и задание свойств).

### <a name="expression-constraints"></a>Ограничение выражений

Использование основанной на ограничениях модели конфигурации продукта подразумевает, что при выборе пользователем значений для различных атрибутов существуют некоторые ограничения. Такие ограничения могут быть реализованы как выражения с использованием языка оптимизации моделирования (Optimization Modeling Language, OML). Другой вариант — реализовать ограничение в виде табличного ограничения.

### <a name="table-constraints"></a>Ограничения таблицы

Ограничения таблицы могут быть пользовательские или системные.  

Определенное пользователем табличное ограничение создается пользователем. Пользователь выбирает сочетание типов атрибутов, представляющее столбцы таблицы, а затем вводить значения из доменов, соответствующих выбранным типам атрибутов, чтобы образовать строки в табличном ограничении.  

Выбрав какой Microsoft Dynamics 365 для таблицы операций для использования в качестве ссылки, а затем выбрав поля этой таблицы из столбцов в ограничении определяется ограничение системные таблицы. Строки ограничения таблицы находятся Dynamics 365 для таблицы операций, которые присутствуют во время настройки.  

Табличное ограничение включается в модель конфигурации продукта путем ссылки на определение табличного ограничения и сопоставления соответствующих атрибутов в модели со столбцами в табличном ограничении.

### <a name="calculations"></a>Вычисления

Вычисления представляют собой механизм для выполнения арифметических операций в модели конфигурации. Например, вычисление может определять длину конкретной заготовки или длительность операции полировки. Вычисления являются императивными и задают значение целевого атрибута после того, как станут доступны все значения атрибутов, входящих в выражение вычисления.

### <a name="subcomponents"></a>Подкомпоненты

Подкомпоненты представляют собой узлы в структуре модели конфигурации продукта. Для каждого отношения подкомпонентов должна быть указана ссылка на шаблон продукта, у которого в качестве метода конфигурации вариантов установлена конфигурация на основе ограничений.

### <a name="user-requirements"></a>Потребности пользователя

Требование пользователя содержит все те же составные части, что и подкомпонент. Единственное различие состоит в том, что требование пользователя не связано с шаблоном продукта. На практике это различие проявляется в том, что все строки спецификации или операции маршрута, определяемые в контексте требования пользователя, сворачиваются в структуру спецификации или маршрут родительского компонента. Это поведение похоже на поведение виртуальной спецификации.

### <a name="bom-lines"></a>Строки спецификации

Строки спецификации включаются для определения производственной спецификации для каждого компонента. Строка спецификации должна ссылаться на номенклатуру, и все свойства номенклатуры могут быть установлены равными фиксированному значению или сопоставлены атрибутам.

### <a name="route-operations"></a>Операции маршрута

Операции маршрута включаются для определения маршрута производства. Операция маршрута должна ссылаться на определенную операцию, и все свойства могут быть установлены равными фиксированному значению. Все свойства, за исключением потребностей в ресурсах, можно составить атрибуту вместо задания значения.

## <a name="validating-and-testing-a-product-configuration-model"></a>Валидация и тестирование модели конфигурации продукта
Валидация модели конфигурации продукта может происходить на нескольких уровнях в модели и, следовательно, охватывать различные области. Самый низкий уровень — валидация одного ограничения-выражению. В этом случае валидация обычно выполняется конструктором продукта и предполагает проверку правильности синтаксиса выражения.  

Аналогичным образом можно изолированно валидировать условие для строки спецификации или операции маршрута.  

Валидировать также можно определенное пользователем определение табличного ограничения. В этом случае пользователь может проверить, что значения, введенные для каждого поля, находятся внутри домена соответствующих типов атрибутов.  

И наконец, валидировать можно всю модель конфигурации продукта, чтобы убедиться в правильности всего синтаксиса, а также в том, что все соглашения по именованию и моделированию соблюдены.

### <a name="testing"></a>Тестирование

Тестирование модели аналогичен работе сеанса фактической конфигурации. Пользователь может приходят по страницам конфигурации и убедитесь, что к структуре модели поддерживает процесс настройки. Потребитель может проверить что значения атрибутов верны, и что описания к атрибутам позволяют пользователю выбрать правильные значения. В конце концов, после того как тестовая сессия завершена, система пытается создать спецификацию и маршрут, соответствующие выбранным значениям атрибутов, и выводит сообщение об ошибке, есть что-то пошло не так.

### <a name="the-configuration-page"></a>Страница конфигурации

Для перехода между компонентами нажимайте **Далее** или щелкните компонент в дереве модели конфигурации продукта, чтобы установить на него фокус.

## <a name="finalizing-a-model-for-configuration"></a>Окончательное оформление модели для конфигурирования
Когда модель конфигурации продукта готова к использованию в сценариях конфигурирования под заказ, необходимо создать ее версию. Однако есть ряд вариантов, которые могут сделать моделирование более комфортным.

### <a name="user-interface"></a>Пользовательский интерфейс

Можно видоизменить пользовательский интерфейс конфигурирвоания путем использования групп атрибутов в одном или нескольких компонентах. Такое группирование может подчеркнуть отношения между определенными атрибутами и помочь пользователю конфигурирования определить область продукта, над которой в данный момент идет работа.

### <a name="templates"></a>Шаблоны

Для ускорения процесса конфигурирования можно создать один или несколько процессов конфигурирования. Другой вариант — создать шаблоны для продвижения определенных сочетаний атрибутов, например при проведении рекламной акции, сосредоточенной на конкретном наборе характеристик продукта.

### <a name="translations"></a>Переводы

Если продукт будет продаваться в различных странах/регионах, можно создать переводы для всего текста, присутствующего в пользовательском интерфейсе конфигурирования. Этот текст включает не только поля имен и описаний, но и текстовые значения атрибутов.

### <a name="versions"></a>Версии

Последний и самый важный шаг в процессе окончательного оформления — это создание версии для модели конфигурации продукта. Версия представляет собой отношение между шаблоном продукта, который может быть выбран для конфигурации в строке заказа или предложения, и моделью конфигурации продукта. Прежде чем версию можно будет использовать в сессиях конфигурирования, ее необходимо утвердить и активировать.

## <a name="extending-a-product-configuration-model-through-the-api"></a>Расширение модели конфигурации продукта посредством API
Реализован специальный интерфейс прикладного программирования (API), чтобы партнеры и другие пользователи, у которых есть лицензия разработчика, могли расширять возможности модели конфигурации продукта. Основной целью было установить механизм, приступим перенести код, включаемый в моделях конфигуратора продукции для API партнеров и клиентов, использующих существующие конфигуратора продукции. Таким образом они смогут перенести свои модели из Конфигуратора продукции в конфигурацию продукта. Тем не менее, новые партнеры и клиенты также могут извлечь пользу из API — использовать его для расширения новых моделей конфигурации продуктов.

### <a name="pcadaptor-class"></a>Класс PCAdaptor

API реализован путем использования набора классов **PCAdaptor**, которые предоставляют структуру данных моделей конфигурации продуктов. Экземпляр **PCAdaptor** класса должны быть созданы для каждой модели, расширяется. После завершения сеанса конфигурации, система проверяет наличие экземпляра этого класса и запускает ее, если она найдена.  

На следующей блок-схеме показаны основные этапы процесса.  

[![Блок-схема](./media/product_configuration_2.png)](./media/product_configuration_2.png)  

Блок-схема API конфигурации продукта

## <a name="product-configuration"></a>Конфигурация продукта
Конфигурирование продукта можно выполнять из следующих мест:

-   Строка заказа на продажу
-   Строка предложения по продаже
-   Строка заказа на покупку
-   Строка производственного заказа
-   Строка потребности в номенклатуре (проект)

Цель конфигурирования — создать особый вариант продукта, соответствующий требованиям клиента. Для каждой новой конфигурации создается уникальный код конфигурации. Этот код обеспечивает возможность ее отслеживания в запасах.

### <a name="multiple-sites-and-intercompany"></a>Многоузловые и внутрихолдинговые сценарии

Если конфигурирование будет производиться в узле или даже в компании, отличных от узла или компании, где будет происходить производство, будут созданы спецификация и маршрут для узла поставщика в поставляющей компании и помещены в этот узел. Вариант продукта будет выпущен во всех компаниях, которые участвуют в цепочке поставок.


