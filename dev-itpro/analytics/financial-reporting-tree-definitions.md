---
title: "Определения дерева отчетности в финансовых отчетах"
description: "Эта статья содержит сведения об определениях дерева отчетности. Определение дерева отчетности — компонент отчета или строительный блок, который помогает определить структуру и иерархию организации."
author: RobinARH
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-platform
ms.technology: 
ms.search.form: FinancialReports
audience: Application User
ms.reviewer: RobinARH
ms.search.scope: AX 7.0.0, Operations
ms.custom: 57592
ms.assetid: 747faa47-9a23-4277-bc11-8d0a1267c3a4
ms.search.region: Global
ms.author: aolson
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1
ms.translationtype: Human Translation
ms.sourcegitcommit: d421b161216d700f7819f1da8c0ca8ad089b5670
ms.openlocfilehash: 331f3480b8454dac7da12be169ba017f36cefa06
ms.contentlocale: ru-ru
ms.lasthandoff: 05/25/2017


---

# <a name="reporting-tree-definitions-in-financial-reports"></a>Определения дерева отчетности в финансовых отчетах

[!include[banner](../includes/banner.md)]


Эта статья содержит сведения об определениях дерева отчетности. Определение дерева отчетности — компонент отчета или строительный блок, который помогает определить структуру и иерархию организации.

Финансовая отчетность поддерживает гибкую отчетность, чтобы можно было легко вносить изменения по мере изменения структуры бизнеса. Отчеты создаются из различных компонентов или строительных блоков. Одним из этих строительных блоков является определение дерева отчетности. Определение дерева отчетности помогает определить структуру и иерархию организации. Это перекрестная аналитическая иерархическая структура, основанная на отношениях аналитик в финансовых данных. Она предоставляет информацию на уровне единицы отчетности и общем уровне для всех единиц в дереве. Определения дерева отчетности можно объединить с определениями столбцов и определениями отчетов, чтобы создать группу строительных блоков, которую могут использовать несколько компаний. Единица отчетности используется для каждой рамки в организационной диаграмме. Единица отчетности может быть индивидуальным подразделением из финансовых данных, или может быть более высокого уровня общей единицей, которая совмещает информацию от других единиц отчетности. Для определения отчета, которое включает дерево отчетности, один отчет произведен для каждого единицы отчетности для общего уровня. Все эти отчеты используют определения строк и столбцов, которые указаны в определении отчетов, если определение отчетов не указывает использовать дерево отчетности из определения строк. Определения строки и столбца — важные компоненты в дизайне и функциональности финансовых отчетов. Деревья отчетности увеличивают силу компонентов и поддерживают гибкую отчетность, по мере того как изменяется структура бизнеса. Финансовые отчеты, которые не основаны на дереве отчетности, используют только некоторые возможности финансовой отчетности. Вы можете использовать несколько определений дерева отчетности с одинаковыми определениями строк и столбцов для просмотра данных организации различными способами.

## <a name="reporting-tree-best-practices"></a>Передовые практики по дереву отчетности
Перед созданием дерева отчетности необходимо учитывать следующие рекомендации:

-   Во-первых, определите, которые аналитики отчетности требуются вашему юридическому лицу или компании.
-   Рассмотрите, как вы настроили структуру, и после этого нарисуйте организационную диаграмму компании. Организационная диаграмма поможет вам визуализировать, как группировать единицы отчетности в одно или несколько деревьев отчетности.
-   Начните с самого низкого доступного уровня детализации, такой как отделы и проекты, которые определены в финансовых данных. Добавьте так много рамок к уровню детализации, сколько нужно, чтобы показать подразделения или регионы на более высоком уровне. Каждое поле представляет потенциальную единицу отчетности в любом дереве отчетности, которое вы создаете.
-   Вы должны также рассматривать самый лучший путь построить ваши деревья. Можно использовать автоматизированный процесс создания для создания дерева отчетности или создать дерево отчетности вручную. Важно понимать оба метода, прежде чем создавать деревья.
-   Вы можете использовать единицы отчетности, которые определены в вашей системе финансовых данных для того, чтобы добавить единицы отчетности к определению дерева отчетности.

## <a name="create-multiple-reporting-trees"></a>Создание нескольких деревьев отчетности
Вы можете создать неограниченное количество деревьев отчетности для того, чтобы посмотреть данные по вашей организации различными способами. Каждое дерево отчетности может содержать все сочетания Подразделений и общих единиц. Определение отчета может единовременно содержать ссылку только на одно дерево отчетности. Путем переставления структуры единиц отчетности, вы можете создать различные деревья отчетности. Затем можно использовать одну и ту же строку и определения столбцов для каждого дерева отчетности. Таким образом, можно быстро создать различные макеты финансовых отчетов. Если вы создаете несколько деревьев отчетности, вы можете каждый месяц печатать серию финансовых отчетов, которые анализируют и представляют операции компании различными способами. Для получения дополнительных сведений см. примеры структур единиц отчетности в конце этой статьи.

## <a name="create-a-reporting-tree-definition"></a>Создание определения дерева отчетности
Определение дерева отчетности содержит столбцы, описанные в следующей таблице.

| Столбец дерева отчетности | описание|
|---|---|
| Организация               | Название компании для единицы отчетности. Значение **@ANY**, которое типично задается только к общему уровню, позволяет дереву отчетности быть использованным для всех компаний. Все дочерние ветви имеют компанию, заданную к ним.|
| Наименование единицы             | Код который определяет эту единицу отчетности в графическом дереве отчетности. Создайте согласованную уникальную систему кодирования, которую будет легко понять пользователям. |
| Описание единицы      | Название единицы отчетности появляется в заголовке или нижнем колонтитуле отчета, если вы вводите **UnitDesc** как код на вкладке **Заголовки и нижние колонтитулы** определения отчета. Заголовок появляется в описание строки отчета, если вы вводите **UnitDesc** в ячейке **Описание** определения строки.|
| Аналитики            | Единица отчетности, которая берет информацию прямо от финансовых данных. Она определяет логическое размещение и длины для счета и связанных сегментов. Каждая строка единицы отчетности должна иметь аналитику в этом столбце. Аналитику также можно поместить в строку общей единицы (например, расходы, которые непосредственно связаны с этой единицей). Если вы вводите аналитику в строку общей единицы, то счета, которые используются в родительских единицах, не должны использоваться в дочерних единицах. В противном случае суммы могут дублироваться.|
| Определения строк       | Имя определения строки для единицы отчетности. Такое же определение строки используется для каждой единицы дерева отчетности. При создании отчета это определение строки используется для каждой единицы отчетности. Определение строки может включать несколько ссылок финансовых аналитик. Если определение строки указано в дереве отчетности, установите флажок **Использовать определение строки из дерева отчетности** на вкладке **Отчет** определения отчета.|
| Ссылка на строку              | Ссылка на строку, которую нужно использовать для единицы отчетности. Ссылки на строки определены для определения строки для того, чтобы определить финансовые аналитики, на которые нужны ссылки.|
| Внешняя ссылка         | Ссылка на строку, которую нужно использовать для этой единицы отчетности. Ссылки на строки определяются для определения строки для указания соответствующего отчета.|
| Внешний файл         | Путь к файлу листа финансовой отчетности, из которого требуется извлечь данные.|
| Параметры страницы          | Этот столбец определяет, будут ли подавляться сведения о единице отчетности при просмотре или печати отчета.|
| % свертки              | Процент единицы отчетности, который должен быть выделен для родительской единицы. Процент который вы вписываете в этот столбец, применяется к каждой строке определения строки, прежде чем значение в строке добавляется к родительскому отчету. Например, если дочерняя единица должна быть разделена равномерно между двумя подразделениями, то суммы в каждой строке умножаются на 50 процентов, прежде чем значение добавляется к отчету по подразделению. Одна единица отчетности не может иметь две родительские единицы. Чтобы распределить суммы из единицы отчетности в две родительские единицы, создайте еще одну единицу отчетности с такой же аналитикой, чтобы свернуть дополнительные 50 процентов. Введите целые проценты без десятичной запятой. Например, **25** представляет 25 процентов распределения в родительский объект. При включении десятичной запятой (**,25**) 0,25 % распределяется в родительский объект. Для использования процента меньше, чем 1 процент, используйте параметр **Разрешить свертку &lt;1%** в определении отчета. Этот вариант — на вкладке **Дополнительные параметры** в диалоговом окне **Настройки отчета**. Откройте это диалоговое окно, нажав кнопку **Прочие** на вкладке **Настройки** определения отчета. |
| Безопасность единицы         | Ограничения того, какие пользователи и группы могут получать доступ к информации для единицы отчетности.|
| Дополнительный текст       | Текст, включенный в отчет.|

Чтобы создать определение дерева отчетности, выполните следующие действия.

1.  Откройте конструктор отчетов.
2.  Щелкните **Файл** &gt; **Создать** &gt; **Определение дерева отчетности**.
3.  Щелкните **Правка** &gt; **Вставить единицы отчетности из аналитик**.
4.  В диалоговом окне **Вставить единицы отчетности из аналитик** выберите флажок для каждой аналитики, которую включить в дерево отчетности. диалоговое окно **Вставить единицы отчетности из аналитик** содержит следующие разделы.

    | Раздел                          | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
    |----------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
    | Сегментация аналитик отчетности | Используйте кнопки **Расщепление сегментов** и **Совмещение сегментов**, чтобы изменить количество и длину сегментов. **Примечание.** Можно совместить только сегменты, которые были расщеплены. Для того, чтобы совместить множественные аналитики, используйте подстановочные знаки в ваших значениях аналитик.                                                                                                                                                                                                          |
    | Включить/расположение знаков       | В этом разделе перечислены аналитики, определенные в финансовых данных, и отображается число символов в самом длинном значении, определенном для каждой аналитики. Установите флажок для аналитики, чтобы включить эту аналитику в иерархию дерева отчетности.                                                                                                                                                                                           |
    | Иерархия и диапазоны сегментов     | В этом разделе представлена иерархия аналитик. Вы можете двигать аналитики в списке для того, чтобы изменить их порядок отчетности. В полях **От аналитики** и **До аналитики** укажите диапазон значений для каждой аналитики. Если диапазон не указан, все значения аналитик будут вставляться в дерево отчетности. **Примечание.** Если используется несколько аналитик, в результатах возвращаются только комбинации аналитик, которые были учтены. |

    Снимок экрана с примером диалогового окна **Вставить единицы отчетности из аналитик** см. раздел "Пример вставки единиц отчетности из диалогового окна аналитик" далее в этой статье.
5.  Чтобы создать дополнительные сегменты (например, расщепив один сегмент на два более коротких сегмента), щелкните правильное расположение в поле **Положение символа** и щелкните **Расщепление сегментов**.
6.  Чтобы объединить два сегмента в один сегмент, щелкните в любом поле сегментов, чтобы объединить сегменты, и щелкните **Совмещение сегментов**.
7.  Иерархия определяет, как аналитики формируют отчетность друг другу и диапазон для каждой аналитики. Чтобы изменить иерархию аналитик в области **Иерархия и диапазоны сегментов**, выберите аналитику для перемещения и щелкните **Переместить вверх** или **Переместить вниз**.
8.  Чтобы определить диапазон значений аналитик для добавление в новое дерево отчетности, в области **Иерархия и диапазоны сегментов** выполните следующие действия:
    1.  В поле **От аналитики** для этой аналитики введите первое значение в диапазоне.
    2.  В поле **До аналитики** введите последнее значение в диапазоне.

9.  Повторите шаги 7–8 для каждой аналитики в области **Иерархия и диапазоны сегментов**.
10. После того как вы закончите определение того, как единицы отчетности будут переносится в новое дерево отчетности, нажмите кнопку **ОК**.
11. Щелкните **Файл** &gt; **Сохранить**, чтобы сохранить дерево отчетности. Введите уникальное имя и описание для дерева отчетности, и после этого щелкните **ОК**.

### <a name="open-an-existing-reporting-tree-definition"></a>Откройте существующее определение дерева отчетности

1.  В конструкторе отчетов, в Области перехода, щелкните **Определения дерева отчетности**.
2.  Выполните двойной клик имени в списке дерева отчетности для того, чтобы раскрыть его.
3.  Для того, чтобы осмотреть все строительные блоки, которые связаны с деревом отчетности, выполните правый клик определения дерева отчетности, и после этого выберите **Ассоциации**.

### <a name="roll-up-data-in-a-reporting-tree"></a>Свертка данных в дереве отчетности

При использовании дерева отчетности можно агрегировать суммы из дочерних единиц отчетности на уровне родительской единицы отчетности. Это агрегирование называется сверткой данных. Следующие правила используются для того, чтобы свернуть суммы к родительским единицам в дереве отчетности:

-   В дереве отчетности дочерние единицы должны содержать аналитики, если дерево отчетности не является одноуровневым деревом. Родительские единицы обычно не содержат аналитики в дереве отчетности. **Примечание.** Определение аналитик как для дочерних, так и для родительских единиц может привести к дублированию данных в отчете.
-   Единицы отчетности, которые содержат аналитики в дереве отчетности, соответствуют аналитикам, которые используются в определениях строки и столбца. Комбинация аналитик определяет суммы, возвращаемые для этой единицы. Например, в примере 2 далее в этой статье строки 6 и 7 возвращают значения только для подразделений 00 и 01 соответственно.
-   Суммы для родительских единиц отчетности, которые не содержат аналитики в дереве отчетности, определяются из дочерней единицы отчетности и сворачивают суммы к определенной родительской единице. Например, если родительская единица (см. Contoso — США в примере свертки данных 2) имеет две дочерние единицы (022 и 023) и не содержит аналитики, отчет создается для каждой дочерней и родительской единицы. Родительский итог — сумма двух дочерних сумм.

### <a name="manage-reporting-units"></a>Управление единицами отчетности

Каждое определение дерева отчетности отображается в уникальных представлениях. Есть графическое представление, в котором отображается иерархия родительских и дочерних элементов, и представление листа, в котором отображается определенная информация для каждой единицы отчетности. Графическое представление и представление листа соединены. Когда вы выбираете единицу отчетности в одном представлении, она также выбирается в другом представлении. Вы можете создать перекрестные аналитические иерархии, основанные на отношениях аналитик в финансовых данных. Когда вы создаете определение дерева отчетности, вы можете использовать одни и те же определения строк несколько раз независимо от того, создаете ли вы отчет о доходах подразделения или консолидированный общий отчет о доходах. Аналитики, которые определены в определении строки, можно объединить с аналитиками в определении дерева отчетности, чтобы обеспечить различные представления производительности организации.

### <a name="reporting-unit-structure"></a>Структура единиц отчетности

В финансовой отчетности используются следующие типы единиц отчетности:

-   Подробная единица получает информацию непосредственно из финансовых данных, из листа Excel или из другого листа финансовой отчетности.
-   Общая единица суммирует данные от единиц более низкого уровня.

Родительская единица отчетности — общая единица, которая агрегирует сводную информацию от подробной единицы. Общая единица может быть и подобной единицей, и общей единицей. Таким образом, общая единица может получать сведения от единицы более низкого уровня, финансовых данных или листа Excel. Родительская единица может быть дочерней единицей родительской единицы более высокого уровня. Дочерняя единица отчетности может быть подробной единицей, которая получает информацию непосредственно из финансовых данных или листа Excel. Дочерняя единица отчетности также может быть промежуточной общей единицей. Другими словами, она может быть родительской единицей единицы более низкого уровня и дочерней единицей единицы более высокого уровня. В самом распространенном сценарии для единиц отчетности родительские единицы имеют пустую ячейку в столбце **Аналитики** и дочерние единицы со ссылками на определенные или подстановочные комбинации аналитик.

### <a name="organize-reporting-units"></a>Организация единиц отчетности

Вы можете реорганизовать организационную структуру определения дерева отчетности путем перемещения единиц отчетности в графическом представлении. Вы также можете перенести единицы отчетности на более высокий или на более низкий уровень в дереве отчетности.

1.  В конструкторе отчетов, раскройте определение дерева отчетности, которое изменить.
2.  В графическом представлении определения дерева отчетности, выберите единицу отчетности.
3.  Перетащите единицу в новое расположение. Либо щелкните правой кнопкой мыши и выберите **Перенести единицу отчетности на более высокий уровень** или **Перенести единицу отчетности на более низкий уровень**.
4.  Щелкните **Файл** &gt; **Сохранить**, чтобы сохранить изменения.

### <a name="add-text-about-a-reporting-unit"></a>Добавление текста о единице отчетности

Ввод дополнительного текста — статическая текстовая строка длиной до 255 символов, которая добавляет информацию к определению дерева отчетности. Например, дополнительный текст может быть кратким описанием компании. Вы можете создать до десяти дополнительных записей текста для каждой единицы отчетности в определении дерева отчетности. Дополнительный текст отображается в отчете для единицы отчетности, которой назначен текст. Вы можете добавить записи текста из столбца **Описание** определения строки и с вкладки **Заголовки и нижние колонтитулы** в определении отчета.

1.  В конструкторе отчетов, раскройте определение дерева отчетности, которое изменить.
2.  Дважды щелкните ячейку **Дополнительный текст** для строки единицы отчетности.
3.  В диалоговом окне **Дополнительный текст** в первой пустой строке введите текст. На первую строку, которая содержит текст, создается ссылка как UnitText1, независимо от ее положения в диалоговом окне **Дополнительный текст**.
4.  Чтобы добавить больше текстовых записей для этой единицы отчетности, введите текст в пустой строке.
5.  Нажмите кнопку **OК**.

### <a name="remove-additional-text-from-a-reporting-unit"></a>Извлеките дополнительный текст из единицы отчетности

1.  В конструкторе отчетов, раскройте определение дерева отчетности, которое изменить.
2.  Дважды щелкните ячейку **Дополнительный текст** для строки единицы отчетности.
3.  В диалоговом окне **Дополнительный текст** выберите запись для удаления, а затем щелкните **Очистить**. Либо щелкните правой кнопкой мыши запись и нажмите кнопку **Вырезать**.
4.  Нажмите кнопку **OК**.

### <a name="restrict-access-to-a-reporting-unit"></a>Ограничьте доступ к единице отчетности

Вы можете не дать некоторым пользователям и группам получать доступ к единице отчетности. Можно также определить ограничения, чтобы они применялись к дочерним единицам отчетности данной единицы отчетности.

1.  В конструкторе отчетов, раскройте определение дерева отчетности, которое изменить.
2.  Выполните двойной клик ячейки **Безопасность единицы** строки единицы отчетности, к которой ограничить доступ.
3.  В диалоговом окне **Безопасность единицы** щелкните **Пользователи и группы**.
4.  Выберите пользователей или группы, которые будут иметь доступ к единице отчетности, и нажмите кнопку **ОК**.
5.  Чтобы ограничить доступ к дочерним единицам отчетности, установите флажок **Добавить безопасность к дочерним единицам отчетности**.
6.  Нажмите кнопку **OК**.

### <a name="remove-access-to-a-reporting-unit"></a>Удалить доступ к единице отчетности

1.  В конструкторе отчетов, раскройте определение дерева отчетности, которое изменить.
2.  Дважды щелкните ячейку **Безопасность единицы** для строки единицы отчетности, к которой требуется удалить доступ.
3.  В диалоговом окне **Безопасность единицы** выберите имя и нажмите кнопку **Удалить**.
4.  Нажмите кнопку **OК**.

### <a name="link-to-reports"></a>Ссылка на отчеты

После создания столбца **Отчет** в определении строки и указания отчета для включения в отчет необходимо обновить дерево отчетности для отображения связанного столбца и информации об отчете. Отчет можно импортировать в любую единицу в дереве отчетности.

### <a name="identify-the-report-in-a-reporting-tree"></a>Определение отчеты в дереве отчетности

1.  В конструкторе отчетов, раскройте определение дерева отчетности, которое изменить.
2.  В столбце **Определения строк** информация в ячейках основывается на информации для выбранной строки, поскольку одно и то же определение строки необходимо использовать во всех единицах дерева отчетности. Дважды щелкните ячейку **Определения строк** и выберите определение строки, которое содержит информацию об отчете.
3.  В ячейке **Ссылка на лист** для единицы отчетности выберите имя ссылки, которое соответствует отчету.
4.  В ячейке **Лист или путь отчета** для единицы отчетности введите имя отчета или перейдите к отчету.
5.  Чтобы указать лист в отчете, введите имя листа в ячейке **Имя листа**.
6.  Повторите шаги 3–5 для каждой единицы отчетности, которая должна получать данные из отчета. Чтобы предотвратить отображение неправильных данных в отчете, убедитесь, что правильные имена отчета отображаются в соответствующей единице дерева отчетности.

## <a name="examples"></a>Примеры
### <a name="reporting-unit-structure--example-1"></a>Структура единиц отчетности — пример 1

Ниже приводится структура единиц отчетности в следующем дереве отчетности:

-   Единица отчетности Contoso Japan является родительской единицей дочерних единиц отдела продаж Contoso Japan и отдела консультирования Contoso Japan.
-   Единица отдела продаж Contoso Japan является дочерней единицей единицы Contoso Japan и родительской единицей единиц "Внутренние продажи" и "Автоматические продажи".
-   Единицы отчетности с самым низким уровнем детализации ("Внутренние продажи", "Автоматические продажи", "Обслуживание клиентов" и "Операции") представляют подразделения в финансовых данных. Эти единицы отчетности — в заштрихованной области диаграммы.
-   Общие единицы более высокого уровня суммируют информацию от подробных единиц.

[![ContosoEntertainmentSummaryReportStructure](./media/contosoentertainmentsummaryreportstructure.png)](./media/contosoentertainmentsummaryreportstructure.png)

### <a name="reporting-unit-structure--example-2"></a>Структура единиц отчетности — пример 2

На следующей схеме представлено дерево отчетности, которое имеет организационную структуру, разделенную на бизнес-функции. [![summaryofallunitscontoso](./media/summaryofallunitscontoso.png)](./media/summaryofallunitscontoso.png)

### <a name="example-of-the-insert-reporting-units-from-dimensions-dialog-box"></a>Пример вставки единиц отчетности из диалогового окна аналитик

На следующем рисунке показан пример диалогового окна **Вставить единицы отчетности из аналитик**. Например, в результате будет возвращена комбинация бизнес-единиц, центров затрат и подразделений. [![InsertReportingUnits](./media/insertreportingunits.png)](./media/insertreportingunits.png) Полученное определение дерева отчетности сортируется по подразделению, затем — по центру затрат, а затем — по подразделению. Аналитикой для пятой единицы отчетности является **Бизнес-единица = \[001\], центр затрат =\[\], подразделение = \[022\]**. Она определяет единицу отчетности для счетов, которые относятся к бизнес-единице 001 и подразделению 022. [![ReportingTree](./media/reportingtree-1024x646.png)](./media/reportingtree.png)

### <a name="examples-of-data-roll-up"></a>Примеры свертки данных

Следующие примеры показывают возможную информацию, которая используется в определении дерева отчетности для свертываемых данных.

#### <a name="example-1"></a>Пример 1

[![MutliCompanyRollUp](./media/mutlicompanyrollup.png)](./media/mutlicompanyrollup.png)

#### <a name="example-2"></a>Пример 2

[![CrossCompanyDepartmentRollUp](./media/crosscompanydepartmentrollup.png)](./media/crosscompanydepartmentrollup.png)

# <a name="see-also"></a>См. также

[Финансовая отчетность](financial-reporting-intro.md)




