--- 
title: "Разработка конфигурации для создания отчетов в формате OpenXML для электронной отчетности (ER)"
description: "В следующих шагах поясняется, как пользователь с ролью \"Системный администратор\" или \"Разработчик электронной отчетности\" может создать новую конфигурацию электронной отчетности, содержащую шаблон для создания электронных документов в формате OPENXML."
author: NickSelin
manager: AnnBe
ms.date: 01/16/2017
ms.topic: business-process
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
audience: Application User
ms.reviewer: kfend
ms.search.scope: Operations
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: AX 7.0.0
ms.translationtype: HT
ms.sourcegitcommit: f01d88149074b37517d00f03d8f55e1199a5198f
ms.openlocfilehash: d552dbcf932813de4d060b4f2190cf388eddb1bf
ms.contentlocale: ru-ru
ms.lasthandoff: 07/27/2017

---
# <a name="design-a-configuration-for-generating-reports-in-openxml-format-for-electronic-reporting-er"></a>Разработка конфигурации для создания отчетов в формате OpenXML для электронной отчетности (ER)

[!include[task guide banner](../../includes/task-guide-banner.md)]

В следующих шагах поясняется, как пользователь с ролью "Системный администратор" или "Разработчик электронной отчетности" может создать новую конфигурацию электронной отчетности, содержащую шаблон для создания электронных документов в формате OPENXML. Эта конфигурация будет использоваться для обработки платежей поставщикам.



В этом примере вам предстоит создать поставщика конфигурации для примера компании Litware, Inc. Эти шаги можно выполнить в компании GBSI.



Для выполнения этих шагов необходимо сначала выполнить шаги в процедуре "Создание поставщика конфигурации и установка его в качестве активного". Также необходимо иметь файл Excel, который будет импортирован при создании шаблона. Доступ к этой файлу можно получить на странице https://msdynamics.blob.core.windows.net/media/2016/04/SampleVendPaymWsReport.xlsx


## <a name="upload-the-payments-data-model-configuration"></a>Отправка конфигурации модели данных платежей
1. Перейдите в раздел "Управление организацией" > "Рабочие области" > "Электронная отчетность".
2. В списке пометьте выбранную строку.
    * Выберите поставщика конфигурации для демонстрационной компании Litware, Inc. Если вы не видите этого поставщика конфигурации, необходимо сначала выполнить шаги в процедуре "Создание поставщика конфигурации и пометка его как активного".  
3. Щелкните "Установить как активное".
4. Щелкните "Репозитории".
    * Выберите репозиторий для типа "Операционные ресурсы", если он имеется. Если он доступен, пропустите следующие шаги по созданию нового репозитория.  
5. Щелкните "Добавить", чтобы открыть раскрывающееся диалоговое окно.
6. В поле "Тип репозитория конфигурации" введите "Операционные ресурсы".
7. Щелкните "Создать репозиторий".
8. Нажмите кнопку "OК".
9. Щелкните Открыть.
10. В дереве выберите "Модель платежа".
11. Нажмите кнопку Импорт.
    * Импортируйте эту модель данных. Она будет использоваться в качестве источника данных в новой конфигурации формата. Пропустите этот шаг, если эта конфигурация уже была импортирована.  
12. Щелкните Да.
13. Закройте страницу.
14. Закройте страницу.

## <a name="create-a-new-format-configuration"></a>Создание новой конфигурации формата
1. Щелкните "Конфигурации отчетности".
2. В дереве выберите "Модель платежа".
3. Щелкните "Создать конфигурацию", чтобы открыть ниспадающее диалоговое окно.
4. В поле "Создать" введите "Формат, основанный на модели данных PaymentModel".
    * Создайте формат, основанный на модели данных PaymentModel.  
5. В поле "Имя" введите "Пример отчета о листе".
    * Пример отчета о листе  
6. В поле "Описание" введите "Пример отчета о листе для платежей поставщиков".
    * Пример отчета о листе для платежей поставщиков.  
7. В поле "Определение модели данных" введите или выберите значение.
    * Выберите определение "CustomerCreditTransferInitiation".  
8. Нажмите Создать конфигурацию.

## <a name="design-a-new-document-in-openxml-worksheet-format"></a>Разработка нового документа в формате листа OPENXML
1. В дереве выберите "Модель платежа\Пример отчета о листе".
2. Выберите Конструктор.
3. В области действий щелкните "Импорт".
4. Щелкните "Импорт из Excel".
5. Нажмите кнопку Вложения.
    * Вложите существующий документ Excel как шаблон.  
6. Щелкните "Создать".
7. Щелкните "Файл".
    * Укажите на существующий файл Excel.  
8. Закройте страницу.
9. В поле "Шаблон" введите или выберите значение.
    * Выберите вложенный файл Excel для использования в качестве шаблона.  
10. Нажмите кнопку "OК".
    * Обратите внимание, что компоненты формата электронной отчетности были созданы в формате создания, основанном на структуре ссылочного документа MS Excel (с именем "диапазоны").  

## <a name="create-a-new-data-source-to-calculate-totals-by-currency-codes"></a>Создание нового источника данных для расчета итогов по кодам валюты
1. Перейдите на вкладку "Сопоставление".
2. Щелкните "Добавить корень", чтобы открыть раскрывающееся диалоговое окно.
3. В дереве выберите "Функции\Группировка по".
4. В поле "Имя" введите "PaymentByCurrency".
    * PaymentByCurrency  
5. Щелкните "Изменить группу по".
6. В дереве разверните узел "model".
7. В дереве выберите "модель\Платежи".
8. Щелкните "Добавить поле в".
9. Щелкните "Элементы для группировки".
10. В дереве разверните узел "model\Payments".
11. В дереве выберите "модель\Платежи\Валюта".
12. Щелкните "Добавить поле в".
13. Щелкните "Сгруппированные поля".
14. В дереве выберите "модель\Платежи\Начальная сумма платежного поручения(InstructedAmount)".
15. Щелкните "Добавить поле в".
16. Щелкните "Поля агрегирования".
17. В поле "Метод" выберите вариант.
    * Выберите функцию агрегирования SUM.  
18. В поле "Имя" введите "TotalInstructuredAmount".
    * TotalInstructuredAmount  
19. Нажмите кнопку "Сохранить".
20. Закройте страницу.
21. Нажмите кнопку "OК".

## <a name="map-format-components-to-data-sources"></a>Сопоставление компонентов формата с источниками данных
1. В дереве разверните узел "model".
2. В дереве разверните узел "model\Payments".
3. В дереве разверните узел "модель\Платежи\Инициирующий субъект(InitiatingParty)".
4. В дереве выберите "модель\Платежи\Инициирующий субъект(InitiatingParty)\Имя".
5. В дереве разверните "Excel\ReportHeader".
6. В дереве выберите "Excel\ReportHeader\CompanyName".
7. Щелкните "Связать".
8. В дереве разверните узел "модель\Платежи\Кредитор".
9. В дереве разверните узел "модель\Платежи\Кредитор\Идентификация".
10. В дереве выберите "модель\Платежи\Кредитор\Идентификация\Код источника(SourceID)".
11. В дереве разверните "Excel\PaymLines".
12. В дереве выберите "Excel\PaymLines\VendAccountName".
13. Щелкните "Связать".
14. В дереве выберите "модель\Платежи\Кредитор\Имя".
15. В дереве выберите "Excel\PaymLines\VendName".
16. Щелкните "Связать".
17. В дереве разверните узел "модель\Платежи\Счет кредитора(CreditorAccount)".
18. В дереве выберите "модель\Платежи\Счет кредитора(CreditorAccount)\Имя".
19. В дереве выберите "Excel\PaymLines\Банк".
20. Щелкните "Связать".
21. В дереве выберите "модель\Платежи\Агент кредитора(CreditorAgent)\Внутренний номер(RoutingNumber)".
22. В дереве выберите "Excel\PaymLines\RoutingNumber".
23. Щелкните "Связать".
24. В дереве разверните узел "model\Payments\Creditor Account(CreditorAccount)".
25. В дереве разверните узел "model\Payments\Creditor Account(CreditorAccount)\Identification".
26. В дереве выберите "модель\Платежи\Счет кредитора(CreditorAccount)\Идентификация\Номер".
27. В дереве выберите "Excel\PaymLines\AccountNumber".
28. Щелкните "Связать".
29. В дереве выберите "модель\Платежи\Начальная сумма платежного поручения(InstructedAmount)".
30. В дереве выберите "Excel\PaymLines\Дебет".
31. Щелкните "Связать".
32. В дереве разверните узел "модель\Платежи\Кредитор".
33. В дереве разверните узел "model\Payments\Creditor Account(CreditorAccount)".
34. В дереве разверните узел "модель\Платежи\Счет кредитора(CreditorAccount)".
35. В дереве выберите "модель\Платежи\Валюта".
36. В дереве выберите "Excel\PaymLines\Валюта".
37. Щелкните "Связать".
38. В дереве разверните узел "PaymentByCurrency".
39. В дереве разверните узел "PaymentByCurrency\сгруппировано".
40. В дереве выберите "PaymentByCurrency\сгруппировано\Валюта".
41. В дереве разверните "Excel\SummaryLines".
42. В дереве выберите "Excel\SummaryLines\SummaryCurrency".
43. Щелкните "Связать".
44. В дереве разверните узел "PaymentByCurrency\агрегировано".
45. В дереве выберите "PaymentByCurrency\агрегировано\TotalInstructuredAmount".
46. В дереве выберите "Excel\SummaryLines\SummaryAmount".
47. Щелкните "Связать".
48. В дереве выберите "PaymentByCurrency".
49. В дереве выберите "Excel\SummaryLines".
50. Щелкните "Связать".
51. В дереве выберите "модель\Платежи".
52. В дереве выберите "Excel\PaymLines".
53. Щелкните "Связать".
54. Нажмите кнопку "Сохранить".
55. Закройте страницу.

## <a name="use-the-created-configuration-for-payments-processing"></a>Использование созданной конфигурации для обработки платежей
1. Щелкните "Изменить статус".
2. Щелкните "Завершить".
3. Нажмите кнопку "OК".
4. Закройте страницу.
5. Закройте страницу.
6. Перейдите в раздел "Расчеты с поставщиками" > "Настройка платежей" > "Способы оплаты".
7. Используйте экспресс-фильтр для фильтрации поля "Способ оплаты" со значением ''Электронно".
    * Электронно  
8. Щелкните "Изменить".
9. Разверните раздел "Форматы файлов".
10. В поле "Общая электронная отчетность" выберите значение "Да".
11. В поле "Экспорт конфигурации формата" введите или выберите значение.
    * Выберите конфигурацию "Пример отчета о листе".  
12. Нажмите кнопку "Сохранить".
13. Закройте страницу.

## <a name="use-the-created-configuration-for-testing-of-payment-journals-processing"></a>Использование созданной конфигурации для тестирования обработки журналов платежей
1. Перейдите в раздел "Расчеты с поставщиками" > "Платежи" > "Журнал платежей".
2. Щелкните "Создать".
    * Создайте новый журнал платежей.  
3. В поле "Имя" введите "VendPay".
    * VendPay  
4. Щелкните "Строки".
5. В поле "Счет" укажите значения "GB_SI_000001".
    * GB_SI_000001  
6. Установите для параметра "Дебет" значение "1000".
7. Щелкните "Создать".
8. В поле "Счет" укажите значения "GB_SI_000005".
    * GB_SI_000005  
9. Установите для параметра "Дебет" значение "2000".
10. В поле "Валюта" введите значение "Евро".
    * Евро  
11. В поле "Корр.счет" укажите требуемые значения "GBSI OPER".
    * GBSI OPER  
12. В поле "Способ оплаты" введите "Электронно".
    * Электронно  
13. Нажмите кнопку "Сохранить".
14. Щелкните "Создать платежи".
15. В поле "Способ оплаты" введите "Электронно".
    * Электронно  
16. В поле "Имя файла" введите "Платежи".
    * Например, введите "Платежи".  
17. В поле "Банковский счет" введите "GBSI OPER".
    * GBSI OPER  
18. Нажмите кнопку "OК".
19. Нажмите кнопку "OК".
    * Просмотрите созданный лист, включая сведения строк платежа, а так же итоги для каждого кода валюты, используемого в этом сообщении платежа.  


