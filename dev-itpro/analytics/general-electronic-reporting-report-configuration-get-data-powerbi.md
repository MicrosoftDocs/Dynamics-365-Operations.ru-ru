---
title: "Настройка электронной отчетности для обеспечения питания бизнес-Аналитики с данными из Dynamics 365 операций"
description: "В этом разделе описывается, как можно использовать конфигурацию электронной отчетности (ER), чтобы настроить перенос данных из вашего экземпляра Dynamics 365 for Operations в службы Power BI. В качестве примера в этом разделе используются проводки Интрастат как бизнес-данные, которые необходимо перенести. Визуализация карты Power BI использует эти данные о проводках Интрастат для представления анализа мероприятий импорта или экспорта компании в отчете Power BI."
author: kfend
manager: AnnBe
ms.date: 2016-10-31 13 - 22 - 29
ms.topic: article
ms.prod: 
ms.service: Dynamics365Operations
ms.technology: 
audience: Application User, Developer, IT Pro
ms.search.scope: Operations, Core
ms.custom: 220314
ms.assetid: 2685df16-5ec8-4fd7-9495-c0f653e82567
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-11-30
ms.dyn365.ops.version: Version 1611
translationtype: Human Translation
ms.sourcegitcommit: 388b6398488e6f316c1ec07a00182e81c1dc8d08
ms.openlocfilehash: ed0192c44b6d7e88120c64e539ebb0ac3b379831
ms.lasthandoff: 03/31/2017


---

# <a name="set-up-electronic-reporting-to-provide-power-bi-with-data-from-dynamics-365-for-operations"></a>Настройка электронной отчетности для обеспечения питания бизнес-Аналитики с данными из Dynamics 365 операций

В этом разделе описывается, как можно использовать конфигурацию электронной отчетности (ER), чтобы настроить перенос данных из вашего экземпляра Dynamics 365 for Operations в службы Power BI. В качестве примера в этом разделе используются проводки Интрастат как бизнес-данные, которые необходимо перенести. Визуализация карты Power BI использует эти данные о проводках Интрастат для представления анализа мероприятий импорта или экспорта компании в отчете Power BI.

<a name="overview"></a>Обзор
--------

Microsoft Power BI представляет собой набор программных служб, приложений и соединителей, работающих вместе для превращения внешних источников данных в когерентные интерактивные знания с визуальным эффектом присутствия. Электронная отчетность (ER) позволяет пользователям Microsoft Dynamics 365 for Operations легко настраивать источники данных и организовывать перенос данных из Dynamics 365 for Operations в Power BI. Данные переносятся как файлы в формате листа OpenXML (файл книги Microsoft Excel). Перенесенные файлы хранятся на сервере Microsoft SharePoint Server, заданного для этой цели. Сохраненные файлов используются в Power BI для создания отчетов, которые включают визуализации (таблицы, диаграммы, карты и т. д.). Отчеты Power BI совместно используются пользователями Power BI, а доступ к ним возможен с панелей мониторинга Power BI и со страниц Dynamics 365 for Operations. В этом раздел рассматриваются следующие задачи:

-   Настройка Dynamics 365 for Operations.
-   Подготовка конфигурации формата ER для получения данных из Dynamics 365 for Operations.
-   Настройка среды ER для переноса данных в Power BI.
-   Использование перенесенных данных для создания отчета Power BI.
-   Обеспечение доступа к отчету Power BI из Dynamics 365 for Operations.

## <a name="prerequisites"></a>Необходимые условия
Для выполнения примера из этого раздела необходимы следующие возможности доступа:

-   Доступ к Dynamics 365 for Operations для одной из следующих ролей:
    -   Разработчик электронной отчетности
    -   Консультант по функциональным возможностям электронной отчетности
    -   Системный администратор
-   Доступ к SharePoint Server, который настроен для использования с Dynamics 365 for Operations
-   Доступ к платформе Power BI

## <a name="configure-document-management-parameters"></a>Настройка параметров управления документооборотом
1.  На странице **Параметры управления документами** настройте доступ к SharePoint Server, который будет использоваться в компании, в которую вы выполнили вход (компания DEMF в этом примере).
2.  Протестируйте подключение к SharePoint Server, чтобы убедиться, что вы получили доступ. [![Страница Параметры управления документами](./media/ger-power-bi-sharepoint-server-setting-1024x369.png)](./media/ger-power-bi-sharepoint-server-setting.png)
3.  Откройте настроенный сайт SharePoint. Создайте новую папку, в которой ER будет хранить файлы Excel с бизнес-данными, которые требуются отчетам Power BI как наборы данных Power BI.
4.  В Dynamics 365 for Operations на странице **Типы документов** создайте новый тип документа, который будет использоваться для получения доступа к папке SharePoint, только что созданной. Введите **Файл** в поле **Группа** и **SharePoint** в поле **Местоположение**, затем введите адрес папки SharePoint. [![Страница типа документа](./media/ger-power-bi-sharepoint-document-type-1024x485.png)](./media/ger-power-bi-sharepoint-document-type.png)

## <a name="configure-er-parameters"></a>Настройка параметров ER
1.  В рабочей области **Электронная отчетность** нажмите ссылку **Параметры электронной отчетности**.
2.  На вкладке **Вложения** выберите тип документа **Файл** для всех полей.
3.  В рабочей области **Электронная отчетность** сделайте необходимого поставщика активным, нажав **Установить как активное**. Для получения дополнительных сведений просмотрите руководство по задаче **ER Выбор поставщика услуг**.

## <a name="use-an-er-data-model-as-the-source-of-data"></a>Использование модели данных ER в качестве источника данных
Необходимо иметь модель данных ER в качестве источника бизнес-данных, которые будут использоваться в отчетах Power BI. Эта модель данных загружается из репозитория конфигураций ER. Дополнительные сведения см. в разделе [Загрузка конфигураций электронной отчетности из Lifecycle Services](download-electronic-reporting-configuration-lcs.md) или просмотрите руководство по задаче **ER Импорт конфигурации из Lifecycle Services** . Выбор **Интрастат **как модель данных, которая будет загружена из выбранного репозитория конфигураций ER. (В этом примере 1 модели используется версия.) Может получить доступ к **"Интрастат"** конфигурация модели ER на **конфигурации** страницы. [![Страница конфигурации](./media/ger-power-bi-data-model-1024x371.png)](./media/ger-power-bi-data-model.png)

## <a name="design-an-er-format-configuration"></a>Создание конфигурации формата ER
Необходимо создать новую конфигурацию формата ER, которая использует модель данных **Интрастат** в качестве источника бизнес-данных. Эта конфигурация формата должна создавать выходные результаты в виде электронных документов в формате OpenXML (файл Excel). Для получения дополнительных сведений просмотрите руководство по задаче **ER Создание конфигурации для отчетов в формате OPENXML**. Назовите новую конфигурацию **Мероприятия импорта или экспорта**, как показано на следующем рисунке. Используйте Excel-файл [Данные ER — сведения импорта и экспорта](https://go.microsoft.com/fwlink/?linkid=845208) в качестве шаблона при проектировании формат ER. (Для получения сведений о том, как импортировать шаблон формата, играют в руководстве по задаче.) [![Импорт / экспорт конфигурации мероприятия](media/ger-power-bi-format-configuration.png)](media/ger-power-bi-format-configuration.png) для изменения **импорта / export мероприятий** формат конфигурации, выполните следующие действия.

1.  Выберите **Конструктор**.
2.  На вкладке **Формат** задайте имя элемента файла для данного формата **Выходной файл Excel**. [![Элемент файла выходных данных Excel](./media/ger-power-bi-format-configuration-file-element-name-1024x395.png)](./media/ger-power-bi-format-configuration-file-element-name.png)
3.  На вкладке **Сопоставление** укажите имя файла Excel, который будет создавать каждый раз при выполнении этого формата. Настройте связанное выражение для возврата значения **Данные импорта и экспорта** (расширения имени файла XLSX будет добавлено автоматически). [![Format designer](./media/ger-power-bi-format-configuration-output-file-name-1024x396.png)](./media/ger-power-bi-format-configuration-output-file-name.png)
4.  Добавьте новый элемент источника данных для данного формата. (Это перечисление необходимо для дальнейшего связывания данных.)
    1.  Имя источника данных **направление\_перечисления**.
    2.  Выберите **Перечисление модели данных** как тип источника данных.
    3.  Задайте ссылку на перечисление модели данных **Направление**.

    [![Направление\_перечисления](./media/ger-power-bi-format-configuration-mapping-added-enum-1024x454.png)](./media/ger-power-bi-format-configuration-mapping-added-enum.png)
5.  Завершите привязку элементов модели данных **Интрастат** и элементов созданного формата, как показано на следующем рисунке. [![Выполнив привязку](./media/ger-power-bi-format-configuration-mapping-details-1024x454.png)](./media/ger-power-bi-format-configuration-mapping-details.png)

После выполнения формат ER создает выходной результат в формате Excel. Он отправляет сведения проводок Интрастат в выходной результат и делит их как проводки, которые описывают мероприятия импорта или мероприятия экспорта. Щелкните **выполнения** для тестирования нового формата ER списка проводок Интрастат в **"Интрастат"** страница (**налога**&gt;**объявления**&gt;**Внешняя Торговля**&gt;**"Интрастат"**). [![Страница "Интрастат"](./media/ger-power-bi-format-test-run-transactions-1024x322.png)](./media/ger-power-bi-format-test-run-transactions.png) генерируется следующий выходной результат. Файла называется **Сведения об импорте и экспорте.xlsx**, как указано в настройках формата. [![Импорт и экспорт details.xlsx](./media/ger-power-bi-format-test-run-output-1024x472.png)](./media/ger-power-bi-format-test-run-output.png)

## <a name="configure-the-er-destination"></a>Настройка места назначения ER
Необходимо настроить платформу ER для отправки выходного результата новой конфигурации формата ER особенным способом.

-   Выходной результат необходимо отправить в папку выбранного SharePoint Server.
-   Каждое выполнение конфигурации формата должно создавать новую версию того же файла Excel.

На **электронной отчетности** страница (**управления организацией**&gt;**электронной отчетности**), нажмите кнопку **электронной отчетности назначения** номенклатуры, а затем добавить новое место назначения. В поле **Ссылка** выберите конфигурацию формата **Мероприятия импорта или экспорта**, созданную ранее. Выполните следующие шаги для добавления записи назначения нового файла для ссылки.

1.  В поле **Имя** введите заголовок места назначения файла.
2.  В поле **Имя файла** выберите имя **Выходной файл Excel** для компонента формата файла Excel.

Нажмите кнопку **Настройки** для новой записи назначения. Затем в диалоговом окне **Параметры места назначения** выполните следующие действия.

1.  На вкладке **Power BI** задайте для параметра **Включено** значение **Да**.
2.  В поле **SharePoint** выберите тип документов **Общие**, созданный ранее.

## <a name="schedule-execution-of-the-configured-er-format"></a>Планирование выполнения настроенного формата ER
На **конфигурации** страница (**управления организацией**&gt;**электронной отчетности**&gt;**конфигурации**), в дереве конфигурации выберите **импорта / export мероприятия** конфигурации, которая была создана раньше. Измените статус версии 1.1 с **Черновик** на **Завершено**, чтобы этот формат стал доступным для использования. [![Страница конфигурации](./media/ger-power-bi-format-configuration-complete-1024x401.png)](./media/ger-power-bi-format-configuration-complete.png) выберите готовую версию **импорта / export мероприятия** конфигурации, а затем щелкните **выполнения**. Обратите внимание, что настроенное место назначения применяется к выходному результату, создаваемому в формате Excel. Задайте для параметра **Пакетная обработка** значение **Да**, чтобы выполнить этот отчет в режиме, не требующем участия пользователя. Нажмите **Повторение** для планирования необходимого повторения этого пакетного выполнения. Повторение определяет, как часто обновленные данные будут перемещаться из Dynamics 365 for Operations в Power BI. [![Диалоговое окно Параметры электронной отчета](./media/ger-power-bi-format-configuration-run-to-schedule-1024x413.png)](./media/ger-power-bi-format-configuration-run-to-schedule.png) после настройки, выполнения задания ER отчета можно найти на **пакетных заданий** страница (**администрирование системы &gt;запросы &gt;пакетных заданий**). [![Страница пакетного задания](./media/ger-power-bi-format-configuration-running-job-1024x410.png)](./media/ger-power-bi-format-configuration-running-job.png) при это задание выполняется в первый раз, назначение создает новый файл Excel, содержащую указанное имя в выбранной папки SharePoint. При каждом последующем выполнении этой задачи место назначения создает новую версию этого файла Excel. [![Новая версия файла Excel](./media/ger-power-bi-output-file-in-sharepoint-server-folder-2-1024x412.png)](./media/ger-power-bi-output-file-in-sharepoint-server-folder-2.png)

## <a name="create-a-power-bi-dataset-by-using-the-output-result-of-the-er-format"></a>Создание набора данных Power BI с помощью выходного результата формата ER
Выполните вход в Power BI и откройте существующую группу Power BI (рабочую область) или создайте новую группу. Либо щелкните **добавить** в разделе **файлы** в **импорта или подключение к данным** раздела, либо щелкните знак "плюс" (**+**) рядом с **наборов данных** в левой области. [![Создание набора данных](./media/ger-power-bi-add-dataset-1024x524.png)](./media/ger-power-bi-add-dataset.png) выберите **SharePoint – узлы группы** параметр, а затем введите путь к файлу SharePoint Server, который используется (**https://ax7partner.spoppe.com** в данном примере). Затем перейдите к папке **/Shared Documents/GER data/PowerBI** и выберите файл Excel, созданный в качестве источника данных для нового набора данных Power BI. [![Выбор файла Excel](./media/ger-power-bi-add-dataset-select-excel-file-1024x522.png)](./media/ger-power-bi-add-dataset-select-excel-file.png) щелкните **подключение**и нажмите кнопку **импорта**. Новый набор данных создается, основанный на выбранном файле Excel. Набор данных можно также добавить автоматически к вновь созданной панели мониторинга. [![Набор данных на панели мониторинга](./media/ger-power-bi-added-dataset-1024x489.png)](./media/ger-power-bi-added-dataset.png) Настройка расписания обновления для этого набора данных в принудительном порядке периодическое обновление. Периодические обновления обеспечивает потребление новых бизнес-данных, поступающих из Dynamics 365 for Operations, путем периодического выполнения отчета с новыми версиями файла Excel, созданных в SharePoint Server.

## <a name="create-a-power-bi-report-by-using-the-new-dataset"></a>Создание отчета Power BI. используя новый набор данных
Для создания нового отчета Power BI нажмите созданный вами набор данных Power BI **Сведения об импорте и экспорте**. Затем настройте визуализацию. Например, выберите визуализацию **Картограмма** и настройте ее следующим образом:

-   Назначьте поле **CountryOrigin** набора данных полю **Местоположение** визуализации карты.
-   Назначьте поле **Amount** набора данных полю **Насыщенность цвета** визуализации карты.
-   Добавьте поля **Мероприятие** и **Год** набора данных в коллекцию полей **Фильтры** визуализации карты.

Сохраните отчет Power BI как **Отчет со сведениями об импорте и экспорте**. [![Импорт и экспорт отчета о](./media/ger-power-bi-added-report-1024x498.png)](./media/ger-power-bi-added-report.png) Обратите внимание, что свидетельствует о сопоставлении стран/регионов, указанных в файле Excel (Австрии и Швейцарии в этом примере). Эти страны или регионы покрашены, чтобы показать пропорции сумм по накладным для каждого. Обновите список проводок Интрастат. Проводки экспорта из Италии добавляются. [![Список проводок Интрастат](./media/ger-power-bi-new-run-new-transaction-1024x321.png)](./media/ger-power-bi-new-run-new-transaction.png) дождаться следующего запланированного выполнения отчета ER и следующего обновления по расписанию Power BI набора данных. Затем просмотрите отчет Power BI (выберите отображение только проводок импорта). На обновленной карте теперь отображается Италия. [![Обновленные сопоставления](./media/ger-power-bi-new-run-new-map-1024x511.png)](./media/ger-power-bi-new-run-new-map.png)

## <a name="access-power-bi-report-in-dynamics-365-for-operations"></a>Доступ к отчету Power BI из Dynamics 365 for Operations
Настройте интеграцию между Dynamics 365 for Operations и Power BI. Для получения дополнительных сведений см. раздел [Настройка интеграции Power BI для рабочих областей](configure-power-bi-integration.md). На **электронной отчетности** странице рабочей области, которая поддерживает Power BI интеграции (**управления организацией**&gt;**рабочих областей**&gt;**электронной отчетности рабочей области**), нажмите кнопку **параметры**&gt;**открыть отчет в каталоге**. Выберите созданный вами отчет Power BI **Сведения об импорте и экспорте**, чтобы показать этот отчет как пункт действий на выбранной странице. Нажмите на пункт действия, чтобы открыть страницу Dynamics 365 for Operations, на которой отображается отчет, созданный в Power BI. [![Подробный отчет о импорта и экспорта](./media/ger-power-bi-review-bi-report-in-ax-form-1024x586.png)](./media/ger-power-bi-review-bi-report-in-ax-form.png)

<a name="see-also"></a>См. также
--------

[Места назначения электронной отчетности](electronic-reporting-destinations.md)

[Обзор электронной отчетности](general-electronic-reporting.md)


