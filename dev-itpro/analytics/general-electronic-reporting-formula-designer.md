---
title: "Конструктор формул в электронной отчетности"
description: "В этом разделе описывается, как использовать конструктор формул в электронной отчетности (ER). При проектировании формата для определенного электронного документа в ER можно использовать формулы, сходные с Microsoft Excel, для преобразования данных, чтобы выполнить требования для выполнения и форматирования этого документа. Поддерживаются различные типы функций - текст, даты и времени, математические логические, сведения, преобразование типов данных и другие (сотрудники заданной для определенного домена предприятия)."
author: kfend
manager: AnnBe
ms.date: 04/04/2017
ms.topic: article
ms.prod: 
ms.service: Dynamics365Operations
ms.technology: 
ms.search.form: ERDataModelDesigner, ERExpressionDesignerFormula, ERMappedFormatDesigner, ERModelMappingDesigner
audience: Application User, IT Pro
ms.search.scope: AX 7.0.0, Operations, Core
ms.custom: 58771
ms.assetid: 24223e13-727a-4be6-a22d-4d427f504ac9
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
translationtype: Human Translation
ms.sourcegitcommit: 388b6398488e6f316c1ec07a00182e81c1dc8d08
ms.openlocfilehash: ac8d6c064ca826cc1c2fed07578ca9ce0c66ef66
ms.lasthandoff: 03/31/2017


---

# <a name="formula-designer-in-electronic-reporting"></a>Конструктор формул в электронной отчетности

В этом разделе описывается, как использовать конструктор формул в электронной отчетности (ER). При проектировании формата для определенного электронного документа в ER можно использовать формулы, сходные с Microsoft Excel, для преобразования данных, чтобы выполнить требования для выполнения и форматирования этого документа. Поддерживаются различные типы функций - текст, даты и времени, математические логические, сведения, преобразование типов данных и другие (сотрудники заданной для определенного домена предприятия).

<a name="formula-designer-overview"></a>Обзор конструктора формул
-------------------------

Электронная отчетность (ER) поддерживает конструктор формул. Поэтому во время разработки имеется возможность задать выражения, которые можно использовать для выполнения следующих задач во время выполнения:

-   преобразования данных, полученных из базы данных Microsoft Dynamics 365 for Operations, которые будут заноситься в модель данных ER, играющую роль источника данных для форматов ER (фильтрация, группирование, преобразование типов данных и т. п.);
-   форматирования данных, которые должны выводиться в сформированный электронный документ в соответствии с макетом и условиями определенного формата ER (в соответствии с запрошенным языком или культурой, кодировкой и т. п.);
-   управления процессом формирования электронного документа (включение/выключение вывода определенных элементов формата в зависимости от обрабатываемых данных, прерывание создания документа, вывод сообщений для конечных пользователей и т. п.).

Страницу конструктора формул можно открыть при выполнении любого из следующих действий:

-   Связывание элементов источника данных с компонентами модели данных.
-   Связывание элементов источника данных с компонентами формата.
-   Завершение обслуживания вычисляемых полей как части источников данных.
-   Определение условий видимости для параметров пользовательского ввода.
-   Разработка преобразований формата.
-   Определение условий включения для компонентов формата.
-   Определение имен файлов для компонентов FILE формата.
-   Определение условий для проверок управления процессом.
-   Определение текста сообщения для проверок управления процессом.

## <a name="designing-er-formulas"></a>Конструирование формул ER
### <a name="data-binding"></a>Привязка данных

Конструктор формул ER можно использовать для определения выражения, которое конвертирует данные, полученные от источников данных, таким образом, чтобы эти данные можно было заполнить в потребителе данных во время выполнения:

-   из источников данных Dynamics 365 for Operations и параметров времени выполнения в модель данных ER;
-   из модели данных ER в формат ER;
-   из источников данных Dynamics 365 for Operations и параметров времени выполнения в формат ER.

На следующем рисунке показана разработка выражения этого типа. В этом примере выражение возвращает значение поля **Intrastat.AmountMST** таблицы **Интрастат** Dynamics 365 for Operations, после того как значение округлено до двух десятичных знаков. [![Рисунок привязки выражения](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg) на следующем рисунке показано, как можно использовать выражение этого типа. В этом примере результат выражения спроектированных заполняется в **Transaction.InvoicedAmount** компонент **налоговой модели отчетов** модель данных. [![Рисунок выражение binding2](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg) во время выполнения, разработанные формулы, **ОКРУГЛЕНИЯ (Intrastat.AmountMST, 2)**, будут округляться значение **AmountMST** для каждой записи из **"Интрастат"** таблицу до двух десятичных разрядов и заполнения округленные значения для **Transaction.InvoicedAmount** компонент **налоговой отчетности** модели данных.

### <a name="data-formatting"></a>Формат данных

Конструктор формул ER можно использовать для определения выражения, которое форматирует данные, полученные от источников данных, таким образом, чтобы эти данные можно было отправить как часть создания электронного документа. Если вы имеете форматирование, которое необходимо использовать как стандартное правило, которое должно быть повторно использовать для формата, можно ввести это форматирование один раз в конфигурации формата как именованное преобразование, которое имеет выражение форматирования. Позднее это именованное преобразование можно связывать с многими компонентами формата, выходные данные которых должны форматироваться в соответствии с созданным выражением. На следующем рисунке показана разработка преобразования этого типа. В этом примере преобразование **TrimmedString** принимает входящие данные типа данных **String** и усекает ведущий и конечный пробелы, когда оно возвращает значение строки. [![Рисунок преобразования конструктора](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg) на следующем рисунке показано, как можно использовать преобразования этого типа. В этом примере несколько компонентов формата, которые отправляют текст как вывод в создаваемый электронный документ во время выполнения, ссылается на преобразование **TrimmedString** по имени. [![Рисунок преобразования об использовании](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg) при форматировать компонентов см. в ** TrimmedString ** преобразования (например, **partyName** компонент на приведенном выше рисунке) это отправляет текст в качестве выходных данных для создания документа. Текст не включает начальные и конечные пробелы. Если у вас есть форматирование, которое должно применяться индивидуально, его можно внедрить как отдельное выражение привязки определенного компонента "формат". На следующем рисунке показано выражение этого типа. В этом примере компонент формата **partyType** привязан к источнику данных через выражение, преобразующее входящие данные из поля **Model.Company.RegistrationType** в источнике данных в текст в верхнем регистре и отправляющее этот текст как вывод в электронный документ. [![Рисунок привязки с формулой](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)

### <a name="process-flow-control"></a>Управление процессом

Конструктор формул ER может использоваться для определения выражений для управления процессом формирования документов. Вы можете:

-   определения условий, определяющий, когда процесс создания документа должен быть остановлен.
-   задания выражений, которые либо будут создавать сообщения для конечного пользователя об остановленных процессах, либо записывать сообщения в журнал выполнения о продолжении процесса формирования отчетности;
-   Определение имен файлов генерируемых документов и управление условиями их создания.

Каждое из правил управления процессом конструируется в виде отдельной валидации. На следующем рисунке показана проверка этого типа. Здесь объяснение конфигурации в этом примере:

-   Проверка производится, когда узел **INSTAT** создан в создаваемом xml-файле.
-   Если список транзакций пуст, проверка останавливает процесс выполнения и возвращает значение **FALSE**.
-   Проверка возвращает сообщение об ошибке, которое включает текст метки SYS70894 на языке, предпочитаемом пользователем.

[![Рисунок проверки](./media/picture-validation.jpg)](./media/picture-validation.jpg) Конструктор формул аварийного восстановления можно также указать имя файла для создания электронного документа и контролировать процесс создания файла. На следующем рисунке показана разработка управления процессом этого типа. Здесь объяснение конфигурации в этом примере:

-   список записей из источника данных **model.Intrastat** делится на пакеты, содержащие не более 1000 записей;
-   Выпуск создает ZIP-файл, который содержит один файл в формате XML для каждой партии, который была создана.
-   Выражение возвращает имя файла для генерации электронных документов путем объединения имени файла и расширения файла. Для второй партии и всех последующих партий имя файла содержит код партии в качестве суффикса.
-   выражение включает (возвратом значения **TRUE**) процесс создания файла для тех пакетов, которые содержат хотя бы одну запись.

[![файл рисунка](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)

### <a name="basic-syntax"></a>Базовый синтаксис

Выражения ER могут содержать любые или все из следующих элементов:

-   Константы
-   Операторы
-   Ссылки
-   Пути
-   Функции

#### <a name="constants"></a>Константы

При конструировании выражений можно использовать текстовые и числовые константы (значения, которые не вычисляются). Например, выражение ** значение («100») + 20 ** использует цифровой постоянных 20 и строка константы «100» и возвращает числовое значение, **120**. В конструкторе формул GER поддерживаются escape-последовательности, то есть можно задавать части строки выражения, которую следует обрабатывать иным образом: Например, выражение **"Лев Толстой ""Война и мир"" Том 1"** возвращает следующую текстовую строку: **Лев Толстой "Война и мир" Том 1**.

#### <a name="operators"></a>Операторы

В следующей таблице показаны арифметические операторы, которые можно использовать для выполнения основных математические операции, например сложение, вычитания, деление и умножение.

| Оператор | Значение              | Пример |
|----------|----------------------|---------|
| +        | Сложение             | 1+2     |
| -        | Вычитание Отрицание | 5-2 -1  |
| \*       | Умножение       | 7\*8    |
| /        | Подразделение             | 9/3     |

В следующей таблице показаны операторы сравнения, которые поддерживаются и которые можно использовать для сравнения двух значений.

| Оператор | Значение                  | Пример    |
|----------|--------------------------|------------|
| =        | Одинаковые                    | X=Y        |
| &gt;     | Больше             | X&gt;Y     |
| &lt;     | Меньше                | X&lt;Y     |
| &gt;=    | Больше или равен | X&gt;=Y    |
| &lt;=    | Меньше или равен    | X&lt;=Y    |
| &lt;&gt; | Не равно             | X&lt;&gt;Y |

Кроме того, можно использовать амперсанд (&) в качестве оператора объединения текста для присоединения или сцепить один или несколько текстовых строк в одну единицу текста.

| Оператор | Значение     | Пример                                        |
|----------|-------------|------------------------------------------------|
| &        | Объединить | "Нет данных для печати" & ": " & "записи не найдены" |

#### <a name="operator-precedence"></a>Приоритет операторов

Порядок, в котором оценены части составного выражения, важен. Например, результат выражения ** 1 + 4 / 2 **, различаются в зависимости от того, было ли операция сложения или операции деления сначала выполняется. Можно использовать скобки для точного определения, как выражение рассчитывается. Например, чтобы указать, что операция сложения должна быть выполнена первой, вы можете изменить предшествующее выражение на **(1 + 4) / 2**. Если порядок операций, которые необходимо выполнить в выражении, явно не указан, порядок основан на приоритете по умолчанию, назначенный поддерживаемым операторам. В следующих таблицах показаны операторы и приоритет, который назначен каждому. Операторы, которые имеют более высокий приоритет (например, 7) вычисляются перед операторами с более низким приоритетом (например, 1).

| Приоритет | Операторы      | Синтаксис                                                   |
|------------|----------------|----------------------------------------------------------|
| 7          | Группировка       | ( … )                                                    |
| 6          | Доступ к членам  | … . …                                                    |
| 5          | Вызов функции  | … ( … )                                                  |
| 4          | Умножение | … \* … … / …                                             |
| 3          | Аддитивный       | … + … … - …                                              |
| 2          | Сравнение     | … &lt; … … &lt;= … … =&gt; … … &gt; … … = … … &lt;&gt; … |
| 1          | Разделение     | … , …                                                    |

Операторы в одной строке имеют равный приоритет. Если выражение включает несколько из этих операторов, выражение оценивается слева направо. Например, выражение **1 + 6 / 2 \*3 &gt;5** возвращает **значение true,**. Рекомендуется использовать скобки для явного указания необходимого порядка оценки выражений, чтобы выражения было проще читать и обслуживать.

#### <a name="references"></a>Ссылки

Все источники данных текущего компонента ER (модель или формат), доступные в ходе разработки выражения, можно использовать как именованные ссылки. Например, текущая модель данных ER содержит источник данных **ReportingDate**, который возвращает значение типа данных **DATETIME**. Для правильного форматирования это значение в создании документа, можно ссылаться на источник данных в выражении следующим образом: **DATETIMEFORMAT (ReportingDate, «мм дд гггг»)** все символов имени источника данных ссылок, которые не представляют букву алфавита должен предшествовать знак кавычки ('). Если имя источника данных ссылок содержит хотя бы один символ, который не представляет букву алфавита (например, пунктуации или других письменных символов), имени должны быть заключены в одинарные кавычки. Далее приводятся некоторые примеры.

-   На источник данных **Today’s date & time** в выражении ER необходимо ссылаться следующим образом: **'Today''s date & time’**
-   на метод **name()** источника данных **Customers** в выражении ER необходимо ссылаться следующим образом: **Customers.'name()'**

#### <a name="path"></a>Путь

Когда выражение ссылается на структурированный источник данных, можно использовать определение пути для выбора конкретного примитивного элемента этого источника данных. Символ точки (.) используется для разделения отдельных элементов структурированного источника данных. Например, текущая модель данных ER содержит источник данных **InvoiceTransactions**, который возвращает список записей. Структура записи** InvoiceTransactions** содержит поля **AmountDebit** и **AmountCredit**, которые возвращают числовые значения. Поэтому Выражение для вычисления суммы по накладной может быть построено следующим образом: **InvoiceTransactions.AmountDebit - InvoiceTransactions.AmountCredit**

#### <a name="functions"></a>Функции

В следующих разделах описаны функции, которые можно использовать в выражениях ER. Все источники данных контекста выражения (текущие модель данных ER или формат ER), а также константы могут использоваться в качестве параметров вызывающих функций в соответствии со списком аргументов вызывающей функции. Например, текущая модель данных ER содержит источник данных **InvoiceTransactions**, который возвращает список записей. Структура записи** InvoiceTransactions** содержит поля **AmountDebit** и **AmountCredit**, которые возвращают числовые значения. Поэтому Выражение для вычисления суммы по накладной может быть построено с использованием встроенной функции округления ER: **ROUND (InvoiceTransactions.AmountDebit - InvoiceTransactions.AmountCredit, 2)**

## <a name="supported-functions"></a>Поддерживаемые функции
В следующей таблице описаны функции обработки данных, которые можно использовать для создания моделей данных ER и отчетов о ER. Этот перечень функций не является фиксированным, и разработчики могут его расширять. Для просмотра списка функций, которые вы используете, откройте область функций в конструкторе формул ER.

### <a name="date-and-time-functions"></a>Функции даты и времени

| Функция                                   | Описание                                                                                                                                                                                                                                                                                                                                                      | Пример                                                                                                                                                                                                                                                                                               |
|--------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ADDDAYS (дата и время, дни)                   | Добавление определенного количества дней к указанному значению даты и времени.                                                                                                                                                                                                                                                                                                | **ADDDAYS (NOW(), 7)** возвращает дату и время на 7 дней в будущем.                                                                                                                                                                                                                            |
| DATETODATETIME (дата)                      | Преобразование указанного значения даты в значение даты и времени.                                                                                                                                                                                                                                                                                                            | **DATETODATETIME (CompInfo. "getCurrentDate()')** возвращает текущий Dynamics 365 для операций Дата сеанса, 12/24/2015 как **12/24/2015 г. 00:00:00: 00**. В этом примере **CompInfo** — источник данных ER типа **Dynamics 365 for Operations/Table**, который ссылается на таблицу CompanyInfo. |
| NOW ()                                     | Возврат текущих даты и времени сервера приложений Dynamics 365 for Operations в качестве значения даты и времени.                                                                                                                                                                                                                                                             |                                                                                                                                                                                                                                                                                                       |
| TODAY ()                                   | Возврат текущей даты сервера приложений Dynamics 365 for Operations в качестве значения даты.                                                                                                                                                                                                                                                                          |                                                                                                                                                                                                                                                                                                       |
| NULLDATE ()                                | Возврат значения даты **null**.                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                       |
| NULLDATETIME ()                            | Возврат значение даты и времени **null**.                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                                                                                                                                       |
| DATETIMEFORMAT (дата и время, формат)          | Преобразование указанного значения даты и времени в строку в указанном формате. (Сведения о поддерживаемых форматах см. разделы [стандартный](https://msdn.microsoft.com/en-us/library/az4se3k1(v=vs.110).aspx) и [настраиваемый](https://msdn.microsoft.com/en-us/library/8kb3ddd4(v=vs.110).aspx).)                                                                        | **DATETIMEFORMAT (NOW(), "dd-MM-yyyy")** возвращает текущую дату сервера приложений Dynamics 365 for Operations (24.12.2015) как **"24-12-2015"**, в соответствии с указанным настраиваемым форматом.                                                                                                          |
| DATETIMEFORMAT (дата и время, формат, культура) | Преобразование указанного значения даты и времени в строку в указанном формате и [культуре](https://msdn.microsoft.com/en-us/goglobal/bb896001.aspx). (Сведения о поддерживаемых форматах см. в разделах [стандартный](https://msdn.microsoft.com/en-us/library/az4se3k1(v=vs.110).aspx) и [настраиваемый](https://msdn.microsoft.com/en-us/library/8kb3ddd4(v=vs.110).aspx).) | **DATETIMEFORMAT (NOW(), "d", "de")** возвращает текущую дату сервера приложений Dynamics 365 for Operations (24.12.2015) как **"24.12.2015"**, в соответствии с выбранным немецким языковым стандартом.                                                                                                             |
| SESSIONTODAY ()                            | Возвращает текущую дату сеанса Dynamics 365 for Operations в качестве значения даты.                                                                                                                                                                                                                                                                                      |                                                                                                                                                                                                                                                                                                       |
| SESSIONNOW ()                              | Возвращает текущие дату и время сеанса Dynamics 365 for Operations в качестве значения даты и времени.                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                                                                                       |
| DATEFORMAT (дата, формат)                  | Возвращает строковое представление даты с использованием указанного формата.                                                                                                                                                                                                                                                                                                    | **DATEFORMAT (SESSIONTODAY (), "dd-MM-yyyy")** возвращает текущую дату сеанса Dynamics 365 for Operations (24.12.2015) как “**24-12-2015**” в соответствии с указанным настраиваемым форматом.                                                                                                                      |
| DATEFORMAT (дата, формат, культура)         | Преобразование указанного значения даты в строку в указанном формате и [культуре](https://msdn.microsoft.com/en-us/goglobal/bb896001.aspx). (Сведения о поддерживаемых форматах см. в разделах [стандартный](https://msdn.microsoft.com/en-us/library/az4se3k1(v=vs.110).aspx) и [настраиваемый](https://msdn.microsoft.com/en-us/library/8kb3ddd4(v=vs.110).aspx).)     | **DATETIMEFORMAT (SESSIONNOW (), "d", "de")** возвращает текущую дату сеанса Dynamics 365 for Operations (24.12.2015) как **“24.12.2015”**, в соответствии с выбранным немецким языком и региональными параметрами.                                                                                                                       |

### <a name="list-functions"></a>Функции для работы со списками

<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>Функция</th>
<th>описание</th>
<th>Пример</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SPLIT (ввод, длина)</td>
<td>Разделение указанной строки ввода на подстроки, каждая из которых имеет заданную длину. Возврат результата как новый список.</td>
<td><strong>РАЗДЕЛЕНИЕ (&quot;abcd&quot;, 3)</strong> возвращает новый список, состоящий из двух записей, которые имеют <strong>строка</strong> поле. Поле первой записи содержит текст <strong>&quot;abc&quot;</strong>, и поля во второй записи с текстом <strong>&quot;d&quot;</strong>.</td>
</tr>
<tr class="even">
<td>SPLITLIST (список, номер)</td>
<td>Разделение указанного списка на партии, каждый из содержит заданный количество записей. Возврат результата как новый список партий, который содержит следующие элементы:
<ul>
<li>Партии как регулярные списки (компонент <strong>Значение</strong>)</li>
<li>Номер текущего пакета (компонент <strong>BatchNumber</strong>)</li>
</ul></td>
<td>В следующем примере источник данных <strong>Строки</strong> создан как список записей из 3 записей, который делится на партии, каждая из которых содержит до 2 записей. <a href="./media/picture-splitlist-datasource.jpg"><img src="./media/picture-splitlist-datasource.jpg" alt="Data source that is divided into batches" class="alignnone wp-image-290681 size-full" width="397" height="136" /></a>Он показывает макет формат, где привязки к <strong>строки</strong> источника данных создаются для создания выходных данных в формате XML, который представляет отдельные узлы для каждого пакета и записи. <a href="./media/picture-splitlist-format.jpg"><img src="./media/picture-splitlist-format.jpg" alt="Format layout that has bindings to a data source" class="alignnone wp-image-290691 size-full" width="374" height="161" /></a>Ниже приведен результат работы формат. <a href="./media/picture-splitlist-result.jpg"><img src="./media/picture-splitlist-result.jpg" alt="Result of running the format" class="alignnone wp-image-290701 size-full" width="358" height="191" /></a></td>
</tr>
<tr class="odd">
<td>LIST (запись 1 [, запись 2, ...])</td>
<td>Возвращает новый список, который создан из определенных аргументов.</td>
<td><strong>LIST (model.MainData, model.OtherData)</strong> возвращает пустую запись, где список полей содержит все поля списков записей <strong>MainData</strong> и <strong>OtherData</strong>.</td>
</tr>
<tr class="even">
<td>LISTJOIN (список 1, список 2,…)</td>
<td>Возвращает соединенный список, который создан из списков определенных аргументов.</td>
<td><strong>LISTJOIN (РАЗБИЕНИЕ (&quot;abc&quot;, 1), РАЗДЕЛЕННЫХ (&quot;def&quot;, 1))</strong> возвращает список шести записей, где 1 поле <strong>строка</strong> тип данных содержит отдельные буквы.</td>
</tr>
<tr class="odd">
<td>ISEMPTY (список)</td>
<td>Возврат <strong>TRUE</strong>, если указанный список не содержит элементы. В противном случае возврат <strong>FALSE</strong>.</td>
<td></td>
</tr>
<tr class="even">
<td>EMPTYLIST (список)</td>
<td>Возврат пустого списка с использованием указанного списка в качестве источника для структуры списка.</td>
<td><strong>EMPTYLIST (РАЗБИЕНИЕ (&quot;abc&quot;, 1))</strong> возвращает новый пустой список, имеет такую же структуру, как список, в который возвращается <strong>РАЗБИЕНИЕ</strong> функции.</td>
</tr>
<tr class="odd">
<td>FIRST (список)</td>
<td>Возврат первой записи определенного списка, если эта запись не пуста. В противном случае создается исключение.</td>
<td></td>
</tr>
<tr class="even">
<td>FIRSTORNULL (список)</td>
<td>Возврат первой записи определенного списка, если эта запись не пуста. В противном случае возврат записи <strong>NULL</strong>.</td>
<td></td>
</tr>
<tr class="odd">
<td>LISTOFFIRSTITEM (список)</td>
<td>Возврат списка, содержащий только первый элемент указанного списка.</td>
<td></td>
</tr>
<tr class="even">
<td>ALLITEMS (путь)</td>
<td>Возврат нового плоского список, представляющий все элементы, соответствующие указанному пути. Путь должен быть определен как действительный путь источника данных к элементу источника данных с типом данных списка записей. Путь к строке, дате и т. д. элементов данных должен вызывать ошибку во время разработки в конфигураторе выражения ER.</td>
<td>При вводе <strong>РАЗБИЕНИЕ (&quot;abcdef&quot;, 2)</strong> качестве источника данных (DS), <strong>число (ALLITEMS (службы Каталогов. Значение))</strong> возвращает <strong>3</strong>.</td>
</tr>
<tr class="odd">
<td>ORDERBY (список [,выражение 1, выражение 2, …])</td>
<td>Возврат указанного списка, который отсортирован по определенным аргументам, которые можно определить как выражения.</td>
<td>Когда <strong>Поставщик</strong> настраивается в качестве источника данных ER, который ссылается на таблицу VendTable,<strong> ORDERBY (Vendors, Vendors.'name()')</strong> возвращает список поставщиков, который отсортирован по имени в восходящем порядке.</td>
</tr>
<tr class="even">
<td>REVERSE (список)</td>
<td>Возврат указанного списка в обращенном порядке сортировки.</td>
<td>Когда <strong>Поставщик</strong> настраивается в качестве источника данных ER, который ссылается на таблицу VendTable, <strong>REVERSE (ORDERBY (Vendors, Vendors.'name()')) )</strong> возвращает список поставщиков, который отсортирован по имени в нисходящем порядке.</td>
</tr>
<tr class="odd">
<td>WHERE (список, условие)</td>
<td>Возвращает указанный список, который отфильтрован в соответствии с указанным состоянием. В отличие от функции <strong>FILTER</strong>, указанное условие применяется к списку в памяти.</td>
<td>При <strong>поставщика</strong> настроен как источник данных аварийного восстановления, который относится к таблице VendTable <strong>ГДЕ (поставщики, Vendors.VendGroup = &quot;40&quot;)</strong> возвращает список поставщиков, которые принадлежат группе поставщиков 40.</td>
</tr>
<tr class="even">
<td>ENUMERATE (список)</td>
<td>Возврат нового списка, состоящей из перечисленных записей определенного списка, и с использованием следующие элементов:
<ul>
<li>Определенные записи списка как регулярные списки (компонент <strong>Значение</strong>)</li>
<li>Индекс текущей записи (<strong>Номер</strong> компонента)</li>
</ul></td>
<td>В следующем примере источник данных <strong>Enumerated</strong> создается как нумерованный список записей поставщика из источника данных <strong>Vendors</strong>, который ссылается на таблицу <strong>VendTable</strong>. <a href="./media/picture-enumerate-datasource.jpg"><img src="./media/picture-enumerate-datasource.jpg" alt="Enumerated data source" class="alignnone wp-image-290711 size-full" width="387" height="136" /></a>Ниже приведен формат, где привязки данных создаются для создания выходных данных в формате XML, представленных в отдельных поставщиков как перечислимый узлы. <a href="./media/picture-enumerate-format.jpg"><img src="./media/picture-enumerate-format.jpg" alt="Format that has data bindings" class="alignnone wp-image-290721 size-full" width="414" height="138" /></a>Это является результатом работы формат. <a href="./media/picture-enumerate-result.jpg"><img src="./media/picture-enumerate-result.jpg" alt="Result of running the format" class="alignnone wp-image-290731 size-full" width="567" height="176" /></a></td>
</tr>
<tr class="odd">
<td>COUNT (список)</td>
<td>Возврат количества записей определенного списка, если список не пуст. В противном случае возврат <strong>0</strong> (ноль).</td>
<td><strong>COUNT (РАЗБИЕНИЕ (&quot;abcd&quot;, 3))</strong> возвращает <strong>2</strong>, так как <strong>РАЗБИЕНИЕ</strong> функция создает список, состоящий из двух записей.</td>
</tr>
<tr class="even">
<td>LISTOFFIELDS (путь)</td>
<td>Возвращает список записей, созданный из аргумента одного из следующих типов:
<ul>
<li>Перечисление модели</li>
<li>Перечисление форматов</li>
<li>Контейнер</li>
</ul>
Созданный список будет состоять из записей со следующими полями:
<ul>
<li>Наименование</li>
<li>Этикетка</li>
<li>описание</li>
</ul>
Поля "Этикетка" и "Описание" будут возвращаться значения времени выполнения на основе настроек языка в формате.</td>
<td>Следующий пример показывает перечисление, введенное в модели данных. <a href="./media/ger-listoffields-function-model-enumeration.png"><img src="./media/ger-listoffields-function-model-enumeration-e1474545790761.png" alt="GER LISTOFFIELDS function - model enumeration" class="alignnone wp-image-1203943 size-full" width="514" height="155" /></a>В следующем примере:
<ul>
<li>Перечисление модели, вставленное в отчет в качестве источника данных.</li>
<li>Выражение ER, разработанное для использования перечисления модели в качестве параметра этой функции.</li>
<li>Источник данных типа списка записей, вставленный в отчет с помощью созданного выражения ER.</li>
</ul><ph id="t1">
< href="./media/ger-listoffields-function-in-format-expression.png" ></ph><img src="./media/ger-listoffields-function-in-format-expression-e1474546110395.png" alt="GER LISTOFFIELDS function - in format expression" class="alignnone wp-image-1204033 size-full" width="549" height="318" /></a> в следующем примере показаны элементы формата ER, привязанных к источнику данных списка записей типа, который был создан с помощью функции LISTOFFIELDS. <a href="./media/ger-listoffields-function-format-design.png"><img src="./media/ger-listoffields-function-format-design.png" alt="GER LISTOFFIELDS function - format design" class="alignnone size-full wp-image-1204043" width="466" height="221" /></a>Это результат выполнения формат. <a href="./media/ger-listoffields-function-format-output.png"><img src="./media/ger-listoffields-function-format-output.png" alt="GER LISTOFFIELDS function - format output" class="alignnone size-full wp-image-1204053" width="585" height="158" /></a><strong>Примечание:</strong> переведенное текста для метки и описания заполняется выходной формат аварийного восстановления в соответствии с параметрами языка, настроенные для родительского файла и папки элементов форматирования.</td>
</tr>
<tr class="odd">
<td>STRINGJOIN (список, имя поля, разделитель)</td>
<td>Возвращает строку сцепленных значений поля из списка, разделенного выбранным разделителем.</td>
<td>Если ввести SPLIT(“abc” , 1) в качестве источника данных DS, выражение STRINGJOIN (DS, DS.Value, “:”) возвращает “a:b:c”</td>
</tr>
<tr class="even">
<td>SPLITLISTBYLIMIT (список, значение предела, источник предела)</td>
<td>Разделяет указанный список на новый список подсписков и возвращает результаты в содержимом списка записей. Параметр предельного значения определяет значение предела для разделения исходного списка. Параметр предела источника указывает шаг, на котором увеличивается общая сумма. Предел не применяется к одному элементу заданного списка, когда источник предела превышает заданный предел.</td>
<td>Следующий пример показывает образец формата с использованием источников данных. <a href="./media/ger-splitlistbylimit-format.png"><img src="./media/ger-splitlistbylimit-format.png" alt="GER SPLITLISTBYLIMIT - format" class="alignnone size-full wp-image-1204063" width="396" height="195" /></a><a href="./media/ger-splitlistbylimit-datasources.png"><img src="./media/ger-splitlistbylimit-datasources.png" alt="GER SPLITLISTBYLIMIT - datasources" class="alignnone size-full wp-image-1204073" width="320" height="208" /></a>Это результат выполнения формата, представленных в плоский список номенклатур для товара. <a href="./media/ger-splitlistbylimit-output.png"><img src="./media/ger-splitlistbylimit-output.png" alt="GER SPLITLISTBYLIMIT - output" class="alignnone size-full wp-image-1204083" width="462" height="204" /></a>В следующем примере показан тот же формат, которая была скорректирована для представления списка элементов товара в пакетах при одной партии должен включать товаров с использованием полного веса, не должна превышать максимальное число 9. <a href="./media/ger-splitlistbylimit-format-1.png"><img src="./media/ger-splitlistbylimit-format-1.png" alt="GER SPLITLISTBYLIMIT - format 1" class="alignnone size-full wp-image-1204103" width="466" height="438" /></a><a href="./media/ger-splitlistbylimit-datasources-1.png"><img src="./media/ger-splitlistbylimit-datasources-1.png" alt="GER SPLITLISTBYLIMIT - datasources 1" class="alignnone size-full wp-image-1204093" width="645" height="507" /></a>Это результат выполнения скорректированного формата. <a href="./media/ger-splitlistbylimit-output-1.png"><img src="./media/ger-splitlistbylimit-output-1.png" alt="GER SPLITLISTBYLIMIT - output 1" class="alignnone size-full wp-image-1204113" width="676" height="611" /></a><strong>Примечание:</strong> ограничение не применяется к последнему элементу в списке источник как значение (11) его лимита источника (масса) превышает определенный предел (9). Используйте функцию <strong>WHERE</strong> или выражение <strong>Включено</strong> соответствующего элемента формата, чтобы игнорировать (пропустить) подсписки во время создания отчета (при необходимости).</td>
</tr>
<tr class="odd">
<td>FILTER (список, условие)</td>
<td>Возвращает заданный список, отфильтрованный по указанному условию путем изменения запроса. В отличие от функции <strong>WHERE</strong>, указанное условие применяется на уровне базы данных к любому источнику данных ER с типом записи "Таблица".</td>
<td>Фильтр (поставщики, Vendors.VendGroup = &quot;40&quot;) возвращает список только поставщиков, относящихся к группе поставщиков «40» при <strong>поставщика</strong> ER источником данных, обращающееся к <strong>VendTable</strong> таблицы</td>
</tr>
</tbody>
</table>

### <a name="logical-functions"></a>Логические функции

| Функция                                                                                | описание                                                                                                                                                                                                                                                                     | Пример                                                                                                                                                                                                                                                      |
|-----------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ЯЩИК (1 результатом выражения, вариант 1, \[, вариант 2, в результате 2\] ... \[, по умолчанию результатов\]) | Оценка указанного значения выражения относительно указанных альтернативных вариантов. Возврат результата параметра, который равен значению выражения. В противном случае возврат необязательно введенного результата по умолчанию (последний параметр, который не предваряется параметром). | **CASE( DATETIMEFORMAT( NOW(), "MM"), "10", "WINTER", "11", "WINTER", "12", "WINTER", "")** возвращает строку **"WINTER"**, когда текущая дата сеанса Dynamics 365 for Operations — между октябрем и декабрем. В противном случае она возвращает пустую строку. |
| ЕСЛИ (условие, значение 1, значение 2)                                                        | Возврат указанного значения 1, когда выполняется данное состояние. В противном случае возвращаемое значение 2. Если значение 1, а значение 2 записи или записи списков, результат будет иметь только поля, которые существуют в обоих списках.                                                                     | **IF (1=2, "condition is met", "condition is not met")** возвращает строку **"condition is not met"**.                                                                                                                                                      |
| NOT (условие)                                                                         | Возврат обратного логического значения указанного состояния.                                                                                                                                                                                                                   | **NOT (TRUE)** возвращает **FALSE**.                                                                                                                                                                                                                            |
| И (условие 1\[, условие 2... \])                                                 | Возврат **TRUE**, если *все* определенные условия верны. В противном случае возврат **FALSE**.                                                                                                                                                                                            | **AND (1=1, "a"="a")** возвращает **TRUE**. **AND (1=2, "a"="a")** возвращает **FALSE**.                                                                                                                                                                           |
| ИЛИ (условие 1\[, условие 2... \])                                                  | Возврат **FALSE**, если *все* определенные условия неверны. Возврат **TRUE**, если *какое-либо* из определенных условий верно.                                                                                                                                                                 | **OR (1=2, "a"="a")** возвращает **TRUE**.                                                                                                                                                                                                                      |

### <a name="mathematical-functions"></a>Математические функции

<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>Функция</th>
<th>Описание</th>
<th>Пример</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ABS (число)</td>
<td>Возврат абсолютное значение указанного числа (число без знака).</td>
<td><strong>ABS (-1)</strong> возвращает <strong>1</strong>.</td>
</tr>
<tr class="even">
<td>POWER (число, степень)</td>
<td>Возврат результата возведения указанного положительного значения в определенную степень.</td>
<td><strong>POWER (10, 2)</strong> возвращает <strong>100</strong>.</td>
</tr>
<tr class="odd">
<td>NUMBERVALUE (строка, десятичный разделитель, разделитель групп цифр)</td>
<td>Преобразование указанной строки в число. Указанный символ используется для разделения целой и нецелой частей десятичного числа, и определенный разделитель тысяч также используется.</td>
<td><strong>NUMBERVALUE (&quot;1 234,56&quot;, &quot;,&quot;, &quot;&quot;)</strong> возвращает значение <strong>1234.56</strong>.</td>
</tr>
<tr class="even">
<td>VALUE (строка)</td>
<td>Преобразование указанной строки в число. Символы запятой и точки (.) считаются десятичными разделителями, и ведущий дефис (-) используются в качестве отрицательного знака. Создается исключение, если другие не числовые символы возникают в определенной строке.</td>
<td><strong>ЗНАЧЕНИЕ (&quot;1 234,56&quot;)</strong> приводит к созданию исключения.</td>
</tr>
<tr class="odd">
<td>ROUND (число, десятичных знаков)</td>
<td>Возвращает указанное число, которое округляется до указанного числа десятичных знаков:
<ul>
<li>Если указанное значение десятичных знаков больше 0 (нуля), указанное число округляется до указанного числа десятичных знаков.</li>
<li>Если указанное значение десятичных знаков 0 (ноль), указанное число округляется до ближайшего целого.</li>
<li>Если указанное значение десятичных знаков меньше 0 (нуля), указанное число округляется слева от десятичного разделителя.</li>
</ul></td>
<td><strong>ROUND (1200.767, 2)</strong> округляет до двух десятичных знаков и возвращает <strong>1200.77</strong>. <strong>ROUND (1200.767, -3)</strong> округляет до ближайшего числа, кратного тысяче, и возвращает <strong>1000</strong>.</td>
</tr>
<tr class="even">
<td>ROUNDDOWN (число, десятичных знаков)</td>
<td>Возвращает указанное число, которое округляется вниз (к нулю) до указанного числа десятичных знаков. <strong>Примечание:</strong> Эта функция поступает как <strong>ROUND</strong>, но она всегда округляет указанное число вниз.</td>
<td><strong>ROUNDDOWN (1200.767, 2)</strong> округляет вниз до двух десятичных знаков и возвращает <strong>1200.76</strong>. <strong>ROUNDDOWN (1700.767, -3)</strong> округляет вниз до ближайшего числа, кратного тысяче, и возвращает <strong>1000</strong>.</td>
</tr>
<tr class="odd">
<td>ROUNDUP (число, десятичных знаков)</td>
<td>Возвращает указанное число, которое округляется вверх (от нуля) до указанного числа десятичных знаков. <strong>Примечание:</strong> Эта функция поступает как <strong>ROUND</strong>, но она всегда округляет указанное число вверх.</td>
<td><strong>ROUNDUP (1200.763, 2)</strong> округляет вверх до двух десятичных знаков и возвращает <strong>1200.77</strong>. <strong>ROUNDUP (1200.767, -3)</strong> округляет вверх до ближайшего числа, кратного тысяче, и возвращает <strong>1,000</strong>.</td>
</tr>
</tbody>
</table>

### <a name="record-functions"></a>Функции для работы с записями

| Функция             | Описание                                                                                                                                                                                                                                     | Пример                                                                                                                                             |
|----------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
| NULLCONTAINER (список) | Возвращает запись **NULL** с той же структурой, как указанный список записей или запись. **Примечание: **Эта функция является устаревшей. Используйте вместо **EMPTYRECORD**.                                                                                  | **NULLCONTAINER (SPLIT ("abc", 1))** возвращает новый пустой запись, который имеет такую же структуру, как список, который возвращен функцией **SPLIT**. |
| EMPTYRECORD (запись) | Возвращает запись **NULL** с той же структурой, как указанный список записей или запись. **Примечание:** A **null** запись является записью, в которой все поля имеют пустое значение (**0**\[ноль\] для чисел, пустой строки для строки и т. д.). | **EMPTYRECORD (SPLIT ("abc", 1))** возвращает новый пустой запись, который имеет такую же структуру, как список, который возвращен функцией **SPLIT**.   |

### <a name="text-functions"></a>Текстовые функции

<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>Функция</th>
<th>Описание</th>
<th>Пример</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>UPPER (строка)</td>
<td>Возврат конкретной строки, которая преобразуется в верхний регистр.</td>
<td><strong>Верхний (&quot;пример&quot;)</strong> возвращает <strong>&quot;пример&quot;</strong>.</td>
</tr>
<tr class="even">
<td>LOWER (строка)</td>
<td>Возврат конкретной строки, которая преобразуется в нижний регистр.</td>
<td><strong>НИЖНЯЯ (&quot;пример&quot;)</strong> возвращает <strong>&quot;пример&quot;</strong>.</td>
</tr>
<tr class="odd">
<td>LEFT (строка, количество символов)</td>
<td>Возвращает указанное число символов с начала указанной строки.</td>
<td><strong>СЛЕВА (&quot;пример&quot;, 3)</strong> возвращает <strong>&quot;Sam&quot;</strong>.</td>
</tr>
<tr class="even">
<td>RIGHT (строка, количество символов)</td>
<td>Возвращает указанное число символов с конца указанной строки.</td>
<td><strong>СПРАВА (&quot;пример&quot;, 3)</strong> возвращает <strong>&quot;образец&quot;</strong>.</td>
</tr>
<tr class="odd">
<td>MID (строка, исходная позиция, количество символов)</td>
<td>Возвращает указанное число символов из указанной строки, начиная с указанного положения.</td>
<td><strong>СРЕДНЯЯ (&quot;пример&quot;, 2, 3)</strong> возвращает <strong>&quot;amp&quot;</strong>.</td>
</tr>
<tr class="even">
<td>LEN (строка)</td>
<td>Возвращает число символов в указанной строке.</td>
<td><strong>Длина (&quot;пример&quot;)</strong> возвращает <strong>6</strong>.</td>
</tr>
<tr class="odd">
<td>CHAR (число)</td>
<td>Возврат строки символов, на которые имеются ссылки по указанному номеру юникод.</td>
<td><strong>СИМВОЛ (255)</strong> возвращает <strong>&quot;ÿ&quot;</strong>. <strong>Примечание.</strong> Возвращенная строка зависит от кодировки, выбранной в родительском элементе формата FILE. Список поддерживаемых кодировок можно найти в разделе <a href="https://msdn.microsoft.com/en-us/library/system.text.encoding(v=vs.110).aspx">Класс кодировки</a>.</td>
</tr>
<tr class="even">
<td>CONCATENATE (строка 1 [, строка 2, …])</td>
<td>Возврат все указанные текстовые строки, которые соединены в одну строку.</td>
<td><strong>ОБЪЕДИНИТЬ (&quot;abc&quot;, &quot;def&quot;)</strong> возвращает <strong>&quot;abcdef&quot;</strong>. <strong>Примечание:</strong> выражение <strong>&quot;abc&quot;&amp;&quot;def&quot;</strong> также возвращает <strong>&quot;abcdef&quot;</strong>.</td>
</tr>
<tr class="odd">
<td>TRANSLATE (строка, шаблон, замена)</td>
<td>Возврат указанной строки, в которой все вхождения символов в определенной строке шаблона заменены символами на соответствующей позиции указанной строки-замены.</td>
<td><strong>ПЕРЕВОД (&quot;abcdef&quot;, &quot;компакт-диска&quot;, &quot;GH&quot;)</strong> заменяет шаблон <strong>&quot;компакт-диска&quot;</strong> со строкой <strong>&quot;GH&quot;</strong> и возвращает <strong>&quot;abGHef&quot;</strong>.</td>
</tr>
<tr class="even">
<td>REPLACE (строка, шаблон, замена, флаг регулярного выражения)</td>
<td>Когда определенный флаг регулярного выражения — <strong>true</strong>, вернуть указанную строку, которая изменяется, применяя регулярного выражения, которое определяется как аргумент шаблона для этой функции. Это выражение используется для обнаружения символов, которые необходимо заменить. Символы определенного аргумента замены используются для замены найденных символов. Когда определенный флаг регулярного выражения — <strong>false</strong>, эта функция ведет как <strong>TRANSLATE</strong>.</td>
<td>  <strong>Заменить (&quot;+1 923 456 4971&quot;, &quot;[^ 0-9]&quot;, &quot;&quot;, ИСТИНА)</strong> применяется регулярное выражение, которое удаляет все нечисловые символы и возвращает <strong>&quot;19234564971&quot;</strong>. <strong>Заменить (&quot;abcdef&quot;, &quot;компакт-диска&quot;, &quot;GH&quot;, и false)</strong> заменяет шаблон <strong>&quot;компакт-диска&quot;</strong> со строкой <strong>&quot;GH&quot;</strong> и возвращает <strong>&quot;abGHef&quot;</strong>.</td>
</tr>
<tr class="odd">
<td>TEXT (ввод)</td>
<td>Возврат указанного ввода, который преобразовывается в текстовую строке, которая отформатирована в соответствии с параметрами языкового стандарта сервера текущего экземпляра Dynamics 365 for Operations. Для значений типа <strong>real</strong> преобразование строки ограничено до 2 десятичных знаков.</td>
<td>Если определено как Dynamics 365 для языкового стандарта сервера экземпляр операции <strong>EN-US</strong>, <strong>текст (ТЕПЕРЬ ())</strong> возвращает текущий Dynamics 365 для операций Дата сеанса, 12/17/2015 строку текста <strong>&quot;12/17/2015 г. 07:59:23 по&quot;</strong>. <strong>ТЕКСТ (1/3)</strong> возвращает <strong>&quot;0,33&quot;</strong>.</td>
</tr>
<tr class="even">
<td>FORMAT (строка 1, строка 2[, строка 3, ...])</td>
<td>Возврат указанной строки, которая отформатирована путем замены любых вхождений <strong>%N</strong> <em>n</em>-ным аргументом. Аргументы — строки. Если аргумент не указан для параметра, этот параметр возвращается как <strong>&quot;%N&quot;</strong> в строке. Для значений типа <strong>real</strong> преобразование строки ограничено до 2 десятичных знаков.</td>
<td>В этом примере источник данных <strong>PaymentModel</strong> возвращает список записей клиентов через компонент <strong>Customer</strong> и значение даты обработки в поле <strong>ProcessingDate</strong>. <a href="./media/picture-format-datasource.jpg"><img src="./media/picture-format-datasource.jpg" alt="PaymentModel data source" class="alignnone wp-image-290751 size-full" width="293" height="143" /></a>В формате ER, предназначенный для создания электронного файла для выбранных клиентов <strong>PaymentModel</strong> выбран в качестве источника данных и управляет потоком процесса. Исключение создается для конечных пользователей, если выбранный клиент остановлен на дату обработки отчета. Формула, которая предназначена для этого типа управления обработкой, может использовать следующие ресурсы:
<ul>
<li>Метка SYS70894 Dynamics 365 for Operations, которая имеет следующий текст:
<ul>
<li><strong>Для языка EN-US:</strong>&quot;нет данных для печати&quot;</li>
<li><strong>Для языка DE:</strong>&quot;Nichts zu drucken&quot;</li>
</ul></li>
<li>Метка SYS18389 Dynamics 365 for Operations, которая имеет следующий текст:
<ul>
<li><strong>Для языка EN-US:</strong>&quot;клиент %1 заблокирован для %2.&quot;</li>
<li><strong>Для языка DE:</strong>&quot;gesperrt für %2 wird Debitor '%1'.&quot;</li>
</ul></li>
</ul>
Вот формулы, которая может быть создан: ФОРМАТ (СЦЕПИТЬ (@&quot;SYS70894&quot;,&quot;. &quot;@&quot;SYS18389&quot;), model.Customer.Name, DATETIMEFORMAT (модель. ProcessingDate, &quot;d&quot;)), если отчет обрабатывается для <strong>Litware Розничная торговля</strong> на 17 декабря 2015 г., в <strong>EN-US</strong> язык и региональные параметры и <strong>EN-US</strong> языка, данная формула возвращает следующий текст, может быть представлено в виде сообщение об исключении для конечного пользователя: &quot;нет данных для печати. Для 12/17/2015 остановлена розничной торговли Litware клиента.&quot; Если отчет обрабатывается для<strong> Litware Розничная торговля</strong> на 17 декабря 2015 г., в <strong>DE</strong> язык и региональные параметры и <strong>DE</strong> языка, данная формула возвращает следующий текст, который использует формат другую дату: &quot;Nichts zu drucken. Gesperrt für 17.12.2015 wird debitor «Litware Retail».&quot; <strong>Примечание: </strong> Следующий синтаксис применяется в формулах ER для меток:
<ul>
<li><strong>Для подписи из Dynamics 365 операционных ресурсов:</strong> <strong>@&quot;X&quot;</strong>, где X — код метки в репозитории прикладных объектов (AOT)</li>
<li><strong>Для меток, находящимися в конфигурациях ER:</strong> <strong>@&quot;ER_LABEL:X&quot;</strong>, где X — код метки в конфигурации аварийного восстановления</li>
</ul></td>
</tr>
<tr class="odd">
<td>NUMBERFORMAT (число, формат)</td>
<td>Возвращает строковое представление указанного числа в указанном формате. (Сведения о поддерживаемых форматах см. в разделе <a href="https://msdn.microsoft.com/en-us/library/dwhawy9k(v=vs.110).aspx">стандартной</a> и <a href="https://msdn.microsoft.com/en-us/library/0c899ak8(v=vs.110).aspx">пользовательские</a>.) Контекст выполнения этой функции определяет язык и региональные параметры, которые используются для форматирования чисел.</td>
<td>Для региональных параметров EN-US <strong>формат ЧИСЛА (0,45, &quot;р&quot;)</strong> возвращает <strong>&quot;45,00%&quot;</strong>. <strong>Формат ЧИСЛА (10,45, &quot;#&quot;)</strong> возвращает <strong>&quot;10&quot;</strong>.</td>
</tr>
<tr class="even">
<td>NUMERALSTOTEXT (номер, язык, валюта, флаг печати названия валюты, десятичные знаки)</td>
<td>Возвращает номер, преобразованный в текстовые строки на заданном языке. Код языка необязателен: когда он определен как пустая строка, код языка контекста выполнения (определяется для создающей папки или файла) будет использоваться. Код валюты указывать необязательно. Когда он определен как пустая строка, берется валюта компании. Обратите внимание, что параметр <strong>Название валюты для печати</strong> и параметр <strong>Десятичные знаки</strong> анализируются только для следующих кодов языков: <strong>CS</strong>, <strong>ET</strong>, <strong>HU</strong>, <strong>LT</strong>, <strong>LV</strong>, <strong>PL</strong>, <strong>RU</strong>. Обратите внимание, что параметр <strong>Название валюты для печати</strong> анализируется только для компаний Dynamics 365 for Operations с контекстом страны, который поддерживает склонение валюты.</td>
<td>NUMERALSTOTEXT (1234.56, &quot;EN&quot;, &quot;&quot;, и false, 2) возвращает «Одна тысяча двести тридцать четыре и 56» NUMERALSTOTEXT (120, &quot;PL&quot;, &quot;&quot;, и false, 0) возвращает «Прекратить dwadzieścia» NUMERALSTOTEXT (120.21, &quot;RU&quot;, &quot;EUR&quot;, ИСТИНА, 2) возвращает «Сто двадцать евро 21 евроцент»</td>
</tr>
<tr class="odd">
<td>PADLEFT (строка, длина, дополняющие символы)</td>
<td>Возвращает строку указанной длины, в которой в начало текущей строки добавлены указанные символы.</td>
<td>PADLEFT (“1234”, 10, “ “) возвращает текстовую строку «      1234»</td>
</tr>
</tbody>
</table>

### <a name="data-collection-functions"></a>Функции сбора данных

Функция

описание

Пример

FORMATELEMENTNAME ()

Возвращает имя элемента текущего формата. Возвращает пустую строку, когда флаг **Сбор сведений о результате** для текущих файлов выключен.

См. руководство по задаче **ER Использование выходных данных формата для инвентаризации и агрегирования** ( часть бизнес-процесса **Приобретение/разработка компонентов ИТ-услуг и решений**) для получения дополнительных сведений об использовании этих функций.

СУММЕСЛИМН (ключа строки для суммирования, range1 строка условий, строка условий значение1 \[, range2 строка условий, строка value2 условия,... \])

Возвращает сумму значений узлов (с именем, определенным как ключ) кода XML, который был собран во время выполнения этого формата и удовлетворяет введенным условиям (пары "диапазон-значение"). Возвращает нулевое значение, когда флаг **Сбор сведений о результате **для текущих файлов выключен.

SUMIF (ключевая строка для суммирования, строка диапазона критериев, строка значения критериев)

Возвращает сумму значений узлов (с именем, определенным как ключ) кода XML, который был собран во время выполнения этого формата и удовлетворяет введенному условию ("диапазон-значение"). Возвращает нулевое значение, когда флаг **Сбор сведений о результате** для текущих файлов выключен.

COUNTIFS (строка range1 условия, строка условий значение1 \[, range2 строка условий, строка value2 условия,... \])

Возвращает количество узлов (с именем, определенным как ключ) кода XML, который был собран во время выполнения этого формата и удовлетворяет введенным условиям (пары "диапазон-значение"). Возвращает нулевое значение, когда флаг **Сбор сведений о результате** для текущих файлов выключен.

COUNTIF (строка диапазона критериев, строка значения критериев)

Возвращает количество узлов (с именем, определенным как ключ) кода XML, который был собран во время выполнения этого формата и удовлетворяет введенному условию ("диапазон-значение"). Возвращает нулевое значение, когда флаг **Сбор сведений о результате** для текущих файлов выключен.

COLLECTEDLIST (строка range1 условия, строка условий значение1 \[, range2 строка условий, строка value2 условия,... \])

Возвращает список значений узлов кода XML, который был собран во время выполнения этого формата и удовлетворяет введенным условиям ("диапазон-значение"). Возвращает пустой список, когда флаг **Сбор сведений о результате **для текущих файлов выключен.

### <a name="other-business-domainspecific-functions"></a>Другие функции (характерные для конкретных бизнес-доменов)

| Функция                                                                         | описание                                                                                                                                                                                                                                                        | Пример                                                                                                                                                                                                                                                                                                       |
|----------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| CONVERTCURRENCY (сумма, валюта источника, валюта целевая, дата, компания)        | Преобразование указанной денежной суммы от валюты источника в валюту целевую, используя настройки определенной компании Dynamics 365 for Operations на указанную дату.                                                                            | **CONVERTCURRENCY (1, "EUR", "USD", TODAY(), "DEMF")** возвращает эквивалент одного евро в долларах США на текущую дату сеанса на основе настроек для компании DEMF.                                                                                                                                  |
| ROUNDAMOUNT (число, десятичные знаки, правило округления)                                       | Округление указанной суммы в соответствии с указанным правилом округления и определенным количеством десятичных знаков. **Примечание.** Правило округления необходимо определить как значение перечисления **RoundOffType** Dynamics 365 for Operations.                          | Если **модель. Округление** устанавливает *** Downward *** **ROUNDAMOUNT (1000.787, 2, модели. Округление)** возвращает значение **1000.78**. Если параметр **model.RoundOff** задан как **Normal** или **Rounding-up**, **ROUNDAMOUNT (1000.787, 2, model.RoundOff)** возвращает значение **1000.79**. |
| CURCredRef (цифры)                                                              | Возврат ссылки кредитора на основе цифр определенного номера накладной.                                                                                                                                                                                  | **CURCredRef ("VEND-200002")** возвращает **"2200002"**.                                                                                                                                                                                                                                                         |
| MOD\_97 (цифры)                                                                 | Возврат ссылки кредитора как выражение MOD97 на основе цифр определенного номера накладной.                                                                                                                                                            | **MOD\_97 («VEND-200002»)** возвращает **«20000285»**.                                                                                                                                                                                                                                                           |
| ISOCredRef (цифры)                                                              | Возврат ссылки кредитора ISO на основе цифр и алфавитных символов определенного номера накладной. **Примечание: ** Чтобы исключить символы из алфавитов, не совместимых с ISO, входной параметр необходимо перевести до передачи к этой функции. | **ISOCredRef ("VEND-200002")** возвращает **"RF23VEND-200002"**.                                                                                                                                                                                                                                                 |
| CN\_GBT\_AdditionalDimensionID (строка, число)                                  | Получить код дополнительной финансовой аналитики. Аналитики представлены в этой строке как коды, отделенные запятыми. Номера определяют код серии запрошенной аналитики в этой строке.                                                                            | CN\_GBT\_AdditionalDimensionID («AA BB, по кредитной Карте, дд, EE, FF, GG, чч», 3) возврата «Копия»                                                                                                                                                                                                                                      |
| GetCurrentCompany ()                                                             | Возвращает код текущей компании, которая выполнила вход в систему.                                                                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                               |
| CH\_БАНКА\_MOD\_10 (цифры)                                                       | Возвращает ссылку кредитора как выражение MOD10 на основе цифр указанного номера накладной.                                                                                                                                                                      | CH\_БАНКА\_MOD\_10 («VEND-200002») возвращает 3                                                                                                                                                                                                                                                                   |
| ОС\_сумма (фиксированной кода для основных средств, код модели стоимости, Начальная дата, конечная дата)               | Возвращает подготовленный контейнер данных сумм основных средств за период.                                                                                                                                                                                         | ОС\_сумма («АДМИНИСТРАЦИИ 000001», «Текущий», дата1, дата2) возвращает подготовленных данных контейнера основного средства «АДМИНИСТРАЦИИ 000001» с моделью стоимости «Текущий» за период с дата1 до Date2.                                                                                                                        |
| ОС\_САЛЬДО (основных средств код, код модели стоимости, отчетный год, дата отчета) | Возвращает подготовленный контейнер данных сальдо основных средств. Год отчета необходимо определить как значение перечисления **AssetYear** Dynamics 365 for Operations.                                                                                           | ОС\_сумма («АДМИНИСТРАЦИИ 000001», «Текущий», AxEnumAssetYear.ThisYear, SESSIONTODAY ()) возвращает подготовленных данных контейнер сальдо для основных средств «АДМИНИСТРАЦИИ-000001» с моделью стоимости «Текущий» на текущей 365 для операций даты сеанса.                                                                |

### <a name="functions-list-extension"></a>Расширение перечня функций

ER позволяет расширение перечня функций, используемых в выражениях ER. Для этого требуются некоторые усилия со стороны разработчика. Дополнительные сведения см. в разделе [Расширение списка функций электронной отчетности](general-electronic-reporting-formulas-list-extension.md).

<a name="see-also"></a>См. также
--------

[Обзор электронной отчетности](general-electronic-reporting.md)

[Расширение списка функций электронной отчетности (ER)](general-electronic-reporting-formulas-list-extension.md)


