---
title: Настройка купонов для розничных продаж
description: В этой теме приводятся обзорные сведения о купонах и описывается порядок их настройки.
author: scott-tucker
manager: AnnBe
ms.date: 06/04/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailCoupon, RetailParameters, RetailSharedParameters
audience: Application User
ms.reviewer: josaw
ms.custom: ''
ms.search.region: Global
ms.search.industry: retail
ms.author: scotttuc
ms.search.validFrom: 2017-06-30
ms.dyn365.ops.version: July 2017 update
ms.openlocfilehash: eb3b505af826b1881aa8245fff66e6f05ad7486a
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/15/2021
ms.locfileid: "4979683"
---
# <a name="set-up-coupons-for-retail-sales"></a>Настройка купонов для розничных продаж

[!include [banner](includes/banner.md)]

## <a name="overview-of-coupons"></a>О купонах

Купоны — это коды и штрих-коды, используемые для добавления скидок к проводкам. У каждого купона может быть несколько кодов, и у каждого кода может быть своя собственная дата вступления в силу.

Каждый купон связан с одной скидкой. Ценовые группы, которые связаны со скидкой, определяют, какие клиенты могут использовать купон, или в каких каналах купон действителен.

По сути купоны представляют собой дополнительную проверку поверх скидок. Купон предоставляет необходимые коды и штрих-коды купона вместе с диапазонами дат для этих кодов. Купон также предоставляет необязательные лимиты использования и свойства, необходимые клиенту. Скидка предоставляет набор продуктов, для которых действителен купон. Ценовые группы для скидки предоставляют набор клиентов, каналов или каталогов, для которых действителен купон.

Для создания купона необходимо отдельно создать скидку и купон. Затем их необходимо связать путем выбора скидки на странице купона в Commerce.

> [!NOTE]
> После связывания купона со скидкой несколько полей на странице скидки в Commerce становятся доступными только для чтения, поскольку их значения определяются настройками купона. К этим полям относятся поля для статуса и стандартных диапазонов дат.

### <a name="limited-use-coupons"></a>Купоны с лимитом использования

Купоны можно настроить как купоны с лимитом использования. Лимит использования можно задать по клиенту или по каналу, а также как глобальный лимит. Этот лимит применяется, когда код или штрих-код вводится или сканируется на POS или во время ввода заказа на продажу.

Лимит применяется к коду купона на купоне. Например, купон однократного использования, имеющий два кода купона, можно использовать два раза, по одному разу для каждого кода купона. Каждый код на купоне можно перевести в активное состояние независимо от второго кода.

Купоны могут использоваться через любой канал продаж, однако для заказов центра обработки вызовов использование купонов ограничено только для тех заказов центра обработки вызовов, для которых включен параметр **Завершение заказа** в центре обработки вызовов. Если он не включен, в заказах центра обработки вызовов могут использоваться только некоторые типы купонов.

> [!NOTE]
> Как только код купона достиг своего предела использования, система *не* выполняет автоматически изменение статуса кода купона на "Использовано". Однако для этого кода купона достигнут предел использования и он не может быть использован. Если для статуса кода купона вручную задано любое другое значение, кроме **Активно**, то этот код купона не может использоваться ни в одном из каналов.  

## <a name="managing-coupons"></a>Работа с купонами

Создавать скидку и купон необходимо отдельно. Затем их необходимо связать путем выбора скидки на странице купона. После связывания купона со скидкой несколько полей на странице скидки становятся доступными только для чтения, поскольку их значения определяются настройками купона. К этим полям относятся поля для статуса и стандартных диапазонов дат.

По сути купоны теперь представляют собой дополнительную проверку поверх скидок. Купон предоставляет коды и штрих-коды купона вместе с диапазонами дат, лимитами использования, а также свойством, необходимым клиенту. Скидка предоставляет набор продуктов, для которых действителен купон. Ценовые группы скидки предоставляют набор клиентов, каналов или каталогов, для которых действителен купон.

## <a name="system-setup-for-coupons"></a>Настройка системы для работы с купонами

Прежде чем настраивать купоны, необходимо настроить штрих-код купона и две номерные серии купонов.

1. На странице **Символы маски** создайте новый символ маски для кода купона. Можно выбрать любой неиспользуемый символ.
2. На странице **Настройка маски штрих-кода** создайте новую маску штрих-кода. Задайте в поле **Тип** значение **Купон**.
3. На странице **Настройка штрих-кода** создайте новый штрих-код с использованием только что созданной маски штрих-кода.
4. На странице **Номерные серии** создайте две новые номерные серии. Одна последовательность необходима для идентификатора кода купона, а вторая — для номера купона. Идентификатор кода купона — это уникальный идентификатор для каждого кода купона на купоне. Номер купона — это уникальный идентификатор купона. Каждый купон может иметь несколько кодов и штрих-кодов, которые инициируют срабатывание купона.

    > [!NOTE]
    > Для обеих номерных серий необходимо установить в поле **Область действия** значение **Компания**. В большинстве случаев оба порядковых номера следует генерировать автоматически.

5. На странице **Параметры Commerce** на вкладке **Штрих-коды** выберите ранее созданный штрих-код.
6. На странице **Общие параметры Commerce** на вкладке **Номерная серия** выберите номерные серии, созданные для номера купона и идентификатора кода купона.
7. Теперь можно открыть страницу **Купоны** и создать новый купоны.

## <a name="the-effect-of-partial-updates-on-coupons"></a>Влияние частичных обновления на купоны

Функциональность купонов основывается на нескольких отдельных элементах. Commerce Headquarters (HQ) и канал могут быть частично обновлены в различных компонентах. Таким образом, важно понимать, как частичное обновление влияет на функциональность купонов в целом.

- **Центральный офис частично обновлен, но Commerce Scale Unit и POS не обновлены.** При обновлении центрального офиса страницы купонов и скидок обновляются, а также обновляется подсистема коммерческого ценообразования. Если обновлен только один из этих двух компонентов, некоторые страницы в Commerce не будут соответствовать данным расчета цен. Таким образом, при расчете скидок могут возникать неожиданные значения скидок или ошибки.
- **HQ обновлен, но Commerce Scale Unit и POS не обновлены (N-1).** Поскольку не все магазины могут быть обновлены в одно и то же время, рекомендуется обновить центральный офис, прежде чем обновлять магазины. В сценарии N-1 новая функциональность, связанная с купонами, не будет доступна в магазинах, которые еще не были обновлены. Например, в функциональности купонов предусмотрены строки "исключения". Если использовать строки исключения в скидке, они не будет применены в магазине, где используется более ранняя версия.
- **HQ не обновлен, но Commerce Scale Unit и POS обновлены (N+1).** Поскольку подсистема ценообразования в Commerce Scale Unit способна обрабатывать старые коды скидок при расчете цен, в этом сценарии обновление не должно никак сказаться на функциональности.


[!INCLUDE[footer-include](../includes/footer-banner.md)]