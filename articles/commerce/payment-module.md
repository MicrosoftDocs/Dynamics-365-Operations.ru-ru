---
title: Модуль платежа
description: В этом разделе описываются модуль платежа, а также описывается, как настраивать его в Microsoft Dynamics 365 Commerce.
author: anupamar-ms
manager: annbe
ms.date: 10/20/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application user
ms.reviewer: v-chgri
ms.search.scope: Operations, Retail, Core
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: anupamar
ms.search.validFrom: 2019-10-31
ms.dyn365.ops.version: Release 10.0.13
ms.openlocfilehash: 894ac35973927c193d6e9c54e326daefb8a3f4a5
ms.sourcegitcommit: 765056b5dc1d0a8c27e56ff2cbd310ad3349ff09
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/20/2020
ms.locfileid: "4055389"
---
# <a name="payment-module"></a>Модуль платежа

[!include [banner](includes/banner.md)]

В этом разделе описываются модуль платежа, а также описывается, как настраивать его в Microsoft Dynamics 365 Commerce.

## <a name="overview"></a>Обзор

Модуль платежа позволяет клиентам оплачивать заказы, используя кредитные или дебетовые карты. Интеграция оплаты для этого модуля осуществляется с помощью соединителя платежей Dynamics 365 для Adyen. Дополнительные сведения о настройке соединителя платежей см. в разделе [Соединитель платежей Dynamics 365 для Adyen](dev-itpro/adyen-connector.md).

В модуле платежа размещается информация о платеже, которая обрабатывается через Adyen в встраиваемый кадре HTML (iFrame). Модуль платежа взаимодействует с Commerce Scale Unit для получения информации об Adyen платеже. В рамках взаимодействий в Commerce Scale Unit модуль платежа позволяет обслуживать данные адреса для выставления счетов либо в iframe, либо в отдельном модуле. В теме Fabrikam адрес для выставления счетов отображается в отдельном модуле. Такой подход позволяет увеличить гибкость форматирования, так как строки адреса могут быть отображены таким образом, чтобы они соответствовали строкам адреса доставки.

Модуль платежа позволяет также пользователям, вошедшим в систему, сохранять их сведения о платежах. Сведения о платеже и адрес для выставления счета сохраняются и управляются через соединитель платежа Adyen.

Модуль платежа охватывает все расходы по заказу, которые еще не покрыты баллами программы лояльности или подарочным сертификатом. Если итог по заказу охватывается полностью в соответствии с баллами программы лояльности или подарочным сертификатом, то модуль платежа будет скрытым, и клиент сможет разместить заказ без него.

Соединитель платежей Adyen также поддерживает строгая проверка подлинности клиентов (SCA). В составе Директивы о платежных услугах Европейского союза (ЕС) 2/0 (PSD 2.0) требуется, чтобы в интернет покупатели проходили проверку подлинности за пределами интерактивного процесса покупки, если они используют электронный способ оплаты. Во время потока оформления заказа клиенты перенаправляются на узел банковских услуг банка. Затем после проверки подлинности они перенаправлены обратно в поток оформления заказа Commerce. Во время этого перенаправления сведения, введенные клиентом в потоке оформления заказа (например, адрес доставки, параметры поставки, сведения о подарочном сертификате и сведения о программе лояльности) будут сохранены. Прежде чем можно будет включить эту функцию, необходимо настроить соединитель платежей для SCA в Commerce Headquarters. Дополнительные сведения см. в [Строгая проверка подлинности клиентов с помощью Adyen](adyen_redirect.md).

> [!NOTE]
> Для соединителя платежей Adyen модуль IFRAME в модуле платежа может быть визуализирован только в том случае, если добавить URL-адрес Adyen в список разрешенных веб-сайтов. Чтобы выполнить этот шаг, добавьте **\*.adyen.com** в директивы **child-src** , **connect-src** , **img-src** , **script-src** и **style-src** в политике безопасности содержимого вашего сайта. Дополнительные сведения см. в разделе [Управление политикой безопасности содержимого](manage-csp.md). 

На следующем рисунке показан пример модулей подарочных сертификатов, лояльности и платежей на странице оформления заказа.

![Пример модулей подарочных сертификатов, лояльности и платежей на странице оформления заказа](./media/ecommerce-payments.PNG)

## <a name="payment-module-properties"></a>Свойства модуля платежа

| Имя свойства | Значения | описание |
|---------------|--------|-------------|
| Заголовок | Текст заголовка | Необязательный заголовок для модуля платежа. |
| Высота iframe | Пиксели | Высота iframe в пикселах. При необходимости высоту можно скорректировать. |
| Показать адрес выставления счетов | **True** или **False** | Если это свойство имеет значение **Истина** , адрес для выставления счетов будет обслуживаться Adyen в iframe модуля платежа. Если для этого поля установлено значение **ложь** , адрес для выставления счетов не будет обслуживаться системой Adyen, и пользователь Commerce будет должен настроить модуль для отображения адреса для выставления счетов на странице оформления заказа. |
| Переопределение стиля платежей | Код каскадных таблиц стилей (CSS) | Так как модуль платежа размещен в iframe, имеется ограничение возможностей стилизации. С помощью этого свойства можно добиться определенного стиля. Чтобы переопределить стили сайта, необходимо вставить код CSS в качестве значения этого свойства. Переопределения и стили конструктора сайтов CSS не применяются к этому модулю. |

## <a name="billing-address"></a>Адрес выставления счета

В модуле платежа клиенты получают адрес для выставления счетов по сведениям о платежах. Он также позволяет использовать в качестве адреса для выставления счетов свой адрес доставки, чтобы упростить и ускорить выполнение потока оформления заказа. Если свойство **Показать адрес для выставления счетов** имеет значение **ложь** , на странице оформления заказа должен быть настроен модуль платежа.

## <a name="add-a-payment-module-to-a-checkout-page-and-set-the-required-properties"></a>Добавление модуля платежа на страницу оформления заказа и задание необходимых свойств

Модуль платежа может быть добавлен только в модуль оформления заказа. Дополнительные сведения о настройке модуля платежа для страницы оформления заказа см. в разделе [Модуль оформления заказа](add-checkout-module.md).

## <a name="additional-resources"></a>Дополнительные ресурсы

[Модуль корзины](add-cart-module.md)

[Модуль значка корзины](cart-icon-module.md)

[Модуль оформления заказа](add-checkout-module.md)

[Модуль адреса доставки](ship-address-module.md)

[Модуль параметров доставки](delivery-options-module.md)

[Модуль сведений о заказе](order-confirmation-module.md)

[Модуль подарочных сертификатов](add-giftcard.md)

[Соединитель платежей Dynamics 365 для Adyen](dev-itpro/adyen-connector.md)

[Строгая проверка подлинности клиентов с помощью Adyen](adyen_redirect.md)
