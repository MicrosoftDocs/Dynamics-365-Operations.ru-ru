---
title: Модуль платежа
description: В этом разделе описываются модуль платежа, а также описывается, как настраивать его в Microsoft Dynamics 365 Commerce.
author: anupamar-ms
manager: annbe
ms.date: 10/20/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application user
ms.reviewer: v-chgri
ms.search.scope: Operations, Retail, Core
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: anupamar
ms.search.validFrom: 2019-10-31
ms.dyn365.ops.version: Release 10.0.13
ms.openlocfilehash: 894ac35973927c193d6e9c54e326daefb8a3f4a5
ms.sourcegitcommit: 765056b5dc1d0a8c27e56ff2cbd310ad3349ff09
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/20/2020
ms.locfileid: "4055389"
---
# <a name="payment-module"></a><span data-ttu-id="16145-103">Модуль платежа</span><span class="sxs-lookup"><span data-stu-id="16145-103">Payment module</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="16145-104">В этом разделе описываются модуль платежа, а также описывается, как настраивать его в Microsoft Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="16145-104">This topic covers the payment module and explains how to configure it in Microsoft Dynamics 365 Commerce.</span></span>

## <a name="overview"></a><span data-ttu-id="16145-105">Обзор</span><span class="sxs-lookup"><span data-stu-id="16145-105">Overview</span></span>

<span data-ttu-id="16145-106">Модуль платежа позволяет клиентам оплачивать заказы, используя кредитные или дебетовые карты.</span><span class="sxs-lookup"><span data-stu-id="16145-106">The payment module lets customers pay for orders by using credit or debit cards.</span></span> <span data-ttu-id="16145-107">Интеграция оплаты для этого модуля осуществляется с помощью соединителя платежей Dynamics 365 для Adyen.</span><span class="sxs-lookup"><span data-stu-id="16145-107">Payment integration for this module is provided by the Dynamics 365 Payment Connector for Adyen.</span></span> <span data-ttu-id="16145-108">Дополнительные сведения о настройке соединителя платежей см. в разделе [Соединитель платежей Dynamics 365 для Adyen](dev-itpro/adyen-connector.md).</span><span class="sxs-lookup"><span data-stu-id="16145-108">For more information about how to set up and configure the payment connector, see [Dynamics 365 Payment Connector for Adyen](dev-itpro/adyen-connector.md).</span></span>

<span data-ttu-id="16145-109">В модуле платежа размещается информация о платеже, которая обрабатывается через Adyen в встраиваемый кадре HTML (iFrame).</span><span class="sxs-lookup"><span data-stu-id="16145-109">The payment module hosts the payment information that is served via Adyen in an HTML inline frame (iframe).</span></span> <span data-ttu-id="16145-110">Модуль платежа взаимодействует с Commerce Scale Unit для получения информации об Adyen платеже.</span><span class="sxs-lookup"><span data-stu-id="16145-110">The payment module interacts with the Commerce Scale Unit to retrieve the Adyen payment information.</span></span> <span data-ttu-id="16145-111">В рамках взаимодействий в Commerce Scale Unit модуль платежа позволяет обслуживать данные адреса для выставления счетов либо в iframe, либо в отдельном модуле.</span><span class="sxs-lookup"><span data-stu-id="16145-111">As part of the Commerce Scale Unit interaction, the payment module can allow billing address information to be served either in the iframe or as a separate module.</span></span> <span data-ttu-id="16145-112">В теме Fabrikam адрес для выставления счетов отображается в отдельном модуле.</span><span class="sxs-lookup"><span data-stu-id="16145-112">In the Fabrikam theme, the billing address is shown in a separate module.</span></span> <span data-ttu-id="16145-113">Такой подход позволяет увеличить гибкость форматирования, так как строки адреса могут быть отображены таким образом, чтобы они соответствовали строкам адреса доставки.</span><span class="sxs-lookup"><span data-stu-id="16145-113">This approach allows for more formatting flexibility, because the address lines can be rendered so that they resemble the lines of the shipping address.</span></span>

<span data-ttu-id="16145-114">Модуль платежа позволяет также пользователям, вошедшим в систему, сохранять их сведения о платежах.</span><span class="sxs-lookup"><span data-stu-id="16145-114">The payment module also lets signed-in customers save their payment information.</span></span> <span data-ttu-id="16145-115">Сведения о платеже и адрес для выставления счета сохраняются и управляются через соединитель платежа Adyen.</span><span class="sxs-lookup"><span data-stu-id="16145-115">The payment information and billing address are saved and managed via the Adyen payment connector.</span></span>

<span data-ttu-id="16145-116">Модуль платежа охватывает все расходы по заказу, которые еще не покрыты баллами программы лояльности или подарочным сертификатом.</span><span class="sxs-lookup"><span data-stu-id="16145-116">The payment module covers any order charges that aren't already covered by loyalty points or a gift card.</span></span> <span data-ttu-id="16145-117">Если итог по заказу охватывается полностью в соответствии с баллами программы лояльности или подарочным сертификатом, то модуль платежа будет скрытым, и клиент сможет разместить заказ без него.</span><span class="sxs-lookup"><span data-stu-id="16145-117">If the total for an order is fully covered by loyalty points or gift card credits, the payment module will be hidden, and the customer will be able to place the order without it.</span></span>

<span data-ttu-id="16145-118">Соединитель платежей Adyen также поддерживает строгая проверка подлинности клиентов (SCA).</span><span class="sxs-lookup"><span data-stu-id="16145-118">The Adyen payment connector also supports strong customer authentication (SCA).</span></span> <span data-ttu-id="16145-119">В составе Директивы о платежных услугах Европейского союза (ЕС) 2/0 (PSD 2.0) требуется, чтобы в интернет покупатели проходили проверку подлинности за пределами интерактивного процесса покупки, если они используют электронный способ оплаты.</span><span class="sxs-lookup"><span data-stu-id="16145-119">Part of the European Union (EU) Payment Services Directive 2.0 (PSD2.0) requires that online shoppers be authenticated outside their online shopping experience when they use an electronic payment method.</span></span> <span data-ttu-id="16145-120">Во время потока оформления заказа клиенты перенаправляются на узел банковских услуг банка.</span><span class="sxs-lookup"><span data-stu-id="16145-120">During the checkout flow,  customers are redirected to their banking site.</span></span> <span data-ttu-id="16145-121">Затем после проверки подлинности они перенаправлены обратно в поток оформления заказа Commerce.</span><span class="sxs-lookup"><span data-stu-id="16145-121">Then, after authentication, they are redirected back to the Commerce checkout flow.</span></span> <span data-ttu-id="16145-122">Во время этого перенаправления сведения, введенные клиентом в потоке оформления заказа (например, адрес доставки, параметры поставки, сведения о подарочном сертификате и сведения о программе лояльности) будут сохранены.</span><span class="sxs-lookup"><span data-stu-id="16145-122">During this redirection, the information that a customer entered in the checkout flow (for example, the shipping address, delivery options, gift card information, and loyalty information) will persist.</span></span> <span data-ttu-id="16145-123">Прежде чем можно будет включить эту функцию, необходимо настроить соединитель платежей для SCA в Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="16145-123">Before you can turn on this feature, the payment connector must be configured for SCA in Commerce headquarters.</span></span> <span data-ttu-id="16145-124">Дополнительные сведения см. в [Строгая проверка подлинности клиентов с помощью Adyen](adyen_redirect.md).</span><span class="sxs-lookup"><span data-stu-id="16145-124">For more information, see [Strong Customer Authentication using Adyen](adyen_redirect.md).</span></span>

> [!NOTE]
> <span data-ttu-id="16145-125">Для соединителя платежей Adyen модуль IFRAME в модуле платежа может быть визуализирован только в том случае, если добавить URL-адрес Adyen в список разрешенных веб-сайтов.</span><span class="sxs-lookup"><span data-stu-id="16145-125">For the Adyen payment connector, the iframe module in the payment module can be rendered only if you add the Adyen URL to your site's allow list.</span></span> <span data-ttu-id="16145-126">Чтобы выполнить этот шаг, добавьте **\*.adyen.com** в директивы **child-src** , **connect-src** , **img-src** , **script-src** и **style-src** в политике безопасности содержимого вашего сайта.</span><span class="sxs-lookup"><span data-stu-id="16145-126">To complete this step, add **\*.adyen.com** to the **child-src** , **connect-src** , **img-src** , **script-src** , and **style-src** directives of your site's content security policy.</span></span> <span data-ttu-id="16145-127">Дополнительные сведения см. в разделе [Управление политикой безопасности содержимого](manage-csp.md).</span><span class="sxs-lookup"><span data-stu-id="16145-127">For more information, see [Manage Content Security Policy](manage-csp.md).</span></span> 

<span data-ttu-id="16145-128">На следующем рисунке показан пример модулей подарочных сертификатов, лояльности и платежей на странице оформления заказа.</span><span class="sxs-lookup"><span data-stu-id="16145-128">The following illustration shows an example of gift card, loyalty, and payment modules on a checkout page.</span></span>

![Пример модулей подарочных сертификатов, лояльности и платежей на странице оформления заказа](./media/ecommerce-payments.PNG)

## <a name="payment-module-properties"></a><span data-ttu-id="16145-130">Свойства модуля платежа</span><span class="sxs-lookup"><span data-stu-id="16145-130">Payment module properties</span></span>

| <span data-ttu-id="16145-131">Имя свойства</span><span class="sxs-lookup"><span data-stu-id="16145-131">Property name</span></span> | <span data-ttu-id="16145-132">Значения</span><span class="sxs-lookup"><span data-stu-id="16145-132">Values</span></span> | <span data-ttu-id="16145-133">описание</span><span class="sxs-lookup"><span data-stu-id="16145-133">Description</span></span> |
|---------------|--------|-------------|
| <span data-ttu-id="16145-134">Заголовок</span><span class="sxs-lookup"><span data-stu-id="16145-134">Heading</span></span> | <span data-ttu-id="16145-135">Текст заголовка</span><span class="sxs-lookup"><span data-stu-id="16145-135">Heading text</span></span> | <span data-ttu-id="16145-136">Необязательный заголовок для модуля платежа.</span><span class="sxs-lookup"><span data-stu-id="16145-136">An optional heading for the payment module.</span></span> |
| <span data-ttu-id="16145-137">Высота iframe</span><span class="sxs-lookup"><span data-stu-id="16145-137">Height of the iframe</span></span> | <span data-ttu-id="16145-138">Пиксели</span><span class="sxs-lookup"><span data-stu-id="16145-138">Pixels</span></span> | <span data-ttu-id="16145-139">Высота iframe в пикселах.</span><span class="sxs-lookup"><span data-stu-id="16145-139">The iframe height, in pixels.</span></span> <span data-ttu-id="16145-140">При необходимости высоту можно скорректировать.</span><span class="sxs-lookup"><span data-stu-id="16145-140">The height can be adjusted as required.</span></span> |
| <span data-ttu-id="16145-141">Показать адрес выставления счетов</span><span class="sxs-lookup"><span data-stu-id="16145-141">Show billing address</span></span> | <span data-ttu-id="16145-142">**True** или **False**</span><span class="sxs-lookup"><span data-stu-id="16145-142">**True** or **False**</span></span> | <span data-ttu-id="16145-143">Если это свойство имеет значение **Истина** , адрес для выставления счетов будет обслуживаться Adyen в iframe модуля платежа.</span><span class="sxs-lookup"><span data-stu-id="16145-143">If this property is set to **True** , the billing address will be served by Adyen inside the payment module iframe.</span></span> <span data-ttu-id="16145-144">Если для этого поля установлено значение **ложь** , адрес для выставления счетов не будет обслуживаться системой Adyen, и пользователь Commerce будет должен настроить модуль для отображения адреса для выставления счетов на странице оформления заказа.</span><span class="sxs-lookup"><span data-stu-id="16145-144">If it's set to **False** , the billing address won't be served by Adyen, and a Commerce user will have to configure a module to show the billing address on the checkout page.</span></span> |
| <span data-ttu-id="16145-145">Переопределение стиля платежей</span><span class="sxs-lookup"><span data-stu-id="16145-145">Payment style override</span></span> | <span data-ttu-id="16145-146">Код каскадных таблиц стилей (CSS)</span><span class="sxs-lookup"><span data-stu-id="16145-146">Cascading Style Sheets (CSS) code</span></span> | <span data-ttu-id="16145-147">Так как модуль платежа размещен в iframe, имеется ограничение возможностей стилизации.</span><span class="sxs-lookup"><span data-stu-id="16145-147">Because the payment module is hosted in an iframe, there is limited styling capability.</span></span> <span data-ttu-id="16145-148">С помощью этого свойства можно добиться определенного стиля.</span><span class="sxs-lookup"><span data-stu-id="16145-148">You can achieve some styling by using this property.</span></span> <span data-ttu-id="16145-149">Чтобы переопределить стили сайта, необходимо вставить код CSS в качестве значения этого свойства.</span><span class="sxs-lookup"><span data-stu-id="16145-149">To override site styles, you must paste the CSS code as the value of this property.</span></span> <span data-ttu-id="16145-150">Переопределения и стили конструктора сайтов CSS не применяются к этому модулю.</span><span class="sxs-lookup"><span data-stu-id="16145-150">Site builder CSS overrides and styles don't apply to this module.</span></span> |

## <a name="billing-address"></a><span data-ttu-id="16145-151">Адрес выставления счета</span><span class="sxs-lookup"><span data-stu-id="16145-151">Billing address</span></span>

<span data-ttu-id="16145-152">В модуле платежа клиенты получают адрес для выставления счетов по сведениям о платежах.</span><span class="sxs-lookup"><span data-stu-id="16145-152">The payment module lets customers provide a billing address for their payment information.</span></span> <span data-ttu-id="16145-153">Он также позволяет использовать в качестве адреса для выставления счетов свой адрес доставки, чтобы упростить и ускорить выполнение потока оформления заказа.</span><span class="sxs-lookup"><span data-stu-id="16145-153">It also lets them  use their shipping address as the billing address, to make the checkout flow easier and faster.</span></span> <span data-ttu-id="16145-154">Если свойство **Показать адрес для выставления счетов** имеет значение **ложь** , на странице оформления заказа должен быть настроен модуль платежа.</span><span class="sxs-lookup"><span data-stu-id="16145-154">If the **Show billing address** property is set to **False** , the payment module should be configured on the checkout page.</span></span>

## <a name="add-a-payment-module-to-a-checkout-page-and-set-the-required-properties"></a><span data-ttu-id="16145-155">Добавление модуля платежа на страницу оформления заказа и задание необходимых свойств</span><span class="sxs-lookup"><span data-stu-id="16145-155">Add a payment module to a checkout page and set the required properties</span></span>

<span data-ttu-id="16145-156">Модуль платежа может быть добавлен только в модуль оформления заказа.</span><span class="sxs-lookup"><span data-stu-id="16145-156">A payment module can be added only to a checkout module.</span></span> <span data-ttu-id="16145-157">Дополнительные сведения о настройке модуля платежа для страницы оформления заказа см. в разделе [Модуль оформления заказа](add-checkout-module.md).</span><span class="sxs-lookup"><span data-stu-id="16145-157">For more information about how to configure a payment module for a checkout page, see [Checkout module](add-checkout-module.md).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="16145-158">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="16145-158">Additional resources</span></span>

[<span data-ttu-id="16145-159">Модуль корзины</span><span class="sxs-lookup"><span data-stu-id="16145-159">Cart module</span></span>](add-cart-module.md)

[<span data-ttu-id="16145-160">Модуль значка корзины</span><span class="sxs-lookup"><span data-stu-id="16145-160">Cart icon module</span></span>](cart-icon-module.md)

[<span data-ttu-id="16145-161">Модуль оформления заказа</span><span class="sxs-lookup"><span data-stu-id="16145-161">Checkout module</span></span>](add-checkout-module.md)

[<span data-ttu-id="16145-162">Модуль адреса доставки</span><span class="sxs-lookup"><span data-stu-id="16145-162">Shipping address module</span></span>](ship-address-module.md)

[<span data-ttu-id="16145-163">Модуль параметров доставки</span><span class="sxs-lookup"><span data-stu-id="16145-163">Delivery options module</span></span>](delivery-options-module.md)

[<span data-ttu-id="16145-164">Модуль сведений о заказе</span><span class="sxs-lookup"><span data-stu-id="16145-164">Order details module</span></span>](order-confirmation-module.md)

[<span data-ttu-id="16145-165">Модуль подарочных сертификатов</span><span class="sxs-lookup"><span data-stu-id="16145-165">Gift card module</span></span>](add-giftcard.md)

[<span data-ttu-id="16145-166">Соединитель платежей Dynamics 365 для Adyen</span><span class="sxs-lookup"><span data-stu-id="16145-166">Dynamics 365 Payment Connector for Adyen</span></span>](dev-itpro/adyen-connector.md)

[<span data-ttu-id="16145-167">Строгая проверка подлинности клиентов с помощью Adyen</span><span class="sxs-lookup"><span data-stu-id="16145-167">Strong Customer Authentication using Adyen</span></span>](adyen_redirect.md)
