---
title: Обзор отношений с клиентами
description: В этом разделе представлен обзор новых возможностей отношений с клиентами, доступных в приложении магазина.
author: bebeale
manager: AnnBe
ms.date: 11/01/19
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.custom: 260624
ms.assetid: a4f9d315-9951-451c-8ee6-37f9b3b15ef0
ms.search.region: global
ms.search.industry: Retail
ms.author: shajain
ms.search.validFrom: 2018-10-01
ms.dyn365.ops.version: Version 10.0.7
ms.openlocfilehash: 4f045f8509a6b5027fd3cf8e5ca9e382457a5e83
ms.sourcegitcommit: 81a647904dd305c4be2e4b683689f128548a872d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/01/2020
ms.locfileid: "3023769"
---
# <a name="clienteling-overview"></a>Обзор отношений с клиентами

[!include [banner](includes/banner.md)]


Многие розничные предприятия, особенно высококачественные розничные продавцы, хотят, чтобы консультанты обеспечивали долгосрочные торговые отношения с ключевыми клиентами. Предполагается, что консультанты должны знать о предпочтениях и отрицательном отношении своих клиентов, знать об истории покупок, предпочитаемых продуктах и важных датах, таких как годовщины и дни рождения. Консультантам требуется место, где они могут получить эту информацию и при необходимости легко ее найти. Если эти сведения доступны в едином представлении, консультанты могут легко ориентироваться на клиентов, соответствующих определенным критериям. Например, они могут найти всех клиентов, которые предпочитают покупать сумки или клиентов с важным событием, например, днем рождения или годовщиной.

## <a name="client-book"></a>Книга клиентов

В Microsoft Dynamics 365 Commerce розничные предприятия могут использовать функцию клиентской книги, чтобы консультанты смогли сформировать долгосрочные отношения с основными клиентами.

Клиентская книга включает карты клиентов с контактной информацией по каждому клиенту, вместе с тремя дополнительными свойствами, которые определены розничным продавцом и настроены в Headquarters. Розничные продавцы могут определить три наиболее важные вещи, которые должны быть известны продавцам-консультантам о клиентах. Например, розничному продавцу ювелирных изделий может потребоваться включить важные даты, такие как годовщины или дни рождения, так как в эти даты люди покупают больше товаров. Аналогичным образом розничный продавец может попытаться включить предпочитаемые интересы и торговые марки клиента.

Кроме того, в клиентской книге можно отфильтровать список, чтобы отображались только клиенты, соответствующие определенным критериям. Например, в магазин поступила новая коллекция мужской обуви, и продавец-консультант хочет сообщить клиентам, которые захотят купить мужскую обувь. В этом случае продавец-консультант может отфильтровать клиентскую книгу, чтобы найти соответствующих клиентов, а затем предпринять дальнейшие действия.

Если клиенты больше не считаются ключевыми клиентами по какой-либо причине и поэтому не нуждаются в тесном управлении, они могут быть удалены из клиентской книги.

Некоторые розничные предприятия не хотят управлять клиентами на уровне продавца-консультанта. Вместо этого они хотят управлять списком ключевых клиентов на уровне магазина. Эти розничные продавцы могут просматривать клиентов из книг клиентов магазина. Используя этот параметр, розничные продавцы могут просматривать клиентов из книг клиентов всех торговых партнеров, адресная книга которых совпадает с адресной книгой текущего магазина. Таким образом, если продавец-консультант работает в нескольких магазинах юридического лица, в клиентской книге отображаются клиенты из всех этих магазинов. Эта функция поддерживает дополнительные возможности. Например, клиенты могут быть переназначены от одного продавца-консультанта другому. Эта возможность полезна, когда продавец-консультант переходит на другое место в организации или покидает организацию.

У каждого продавца-консультанта может быть одна клиентскую книгу для одного юридического лица, и продавец-консультант может добавить одного или нескольких клиентов в свою клиентскую книгу. В Commerce в настоящее время каждый клиент может быть добавлен только в одну клиентскую книгу. Однако корпорация Майкрософт планирует добавить функции, позволяющие добавлять одного клиента в несколько клиентских книг.

> [!NOTE]
> В отличие от поиска клиентов клиентская книга не фильтрует записи клиентов на основе адресных книг магазина

## <a name="activities-and-notes"></a>Мероприятия и заметки

Интерактивные каналы предоставляют розничным компаниям способы изучения предпочтений клиента без необходимости их явного указания пользователями. Наоборот, когда клиенты взаимодействуют с продавцами-консультантами в магазине, они явно передают информацию о своих предпочтениях. К сожалению, эту информацию можно потерять после завершения продажи. Однако если эти сведения записаны, они могут помочь предприятиям розничной торговли лучше понимать клиентов и, таким образом, помочь им в обеспечении лучших рекомендаций и улучшению общего опыта покупок.

Чтобы получить важную информацию, которой делятся клиенты, продавцы-консультанты могут использовать не только атрибуты клиентской книги, но также и функциональные возможности мероприятий и заметок. Розничные продавцы могут настраивать типы мероприятий, такие как сведения о посещении магазина, адрес электронной почты, номер телефона и встречи. Мероприятия, которые создают продавцы-консультанты, можно просматривать в виде временной шкалы в POS-терминале. Их можно также просмотреть на вкладке **Мероприятия** на странице **Все клиенты \> Общее** в Headquarters.

Продавцы-консультанты могут также использовать заметки для записи общих сведений о клиенте, которые можно просмотреть перед каждым взаимодействием. Эти заметки сохраняются в Headquarters, и их можно просмотреть в профиле клиента или на странице сведений о клиенте в центре обработки вызовов.

> [!NOTE]
> В настоящее время все заметки и мероприятия можно просматривать по любому продавцу-консультанту, работающему для юридического лица, и можно просматривать страницы сведений о клиенте. Заметки и мероприятия не ограничиваются продавцом-консультантом, который добавил клиента в клиентскую книгу.

## <a name="integration-with-dynamics-365-customer-insights"></a>Интеграция с Dynamics 365 Customer Insights

С помощью приложения Dynamics 365 Customer Insights розничные предприятия могут агрегировать данные из различных систем, которые клиенты используют для взаимодействия с торговой маркой розничной торговли. Затем они могут использовать эти данные для создания единого представления клиента и получения аналитической информации. Интеграция Customer Insights с модулем Commerce позволяет розничным продавцам выбирать один или несколько способов, которые должны отображаться в карточке клиента в клиентской книге. Например, розничные предприятия могут использовать данные в Customer Insights для расчета "вероятности оттока клиентов" для клиента и определить "следующее наилучшее действие". Если эти значения определены как меры, они могут отображаться в карточке клиента и могут предоставлять важную информацию для торговых партнеров. Дополнительные сведения о Customer Insights см. в разделе Документация по [Dynamics 365 Customer Insights](https://docs.microsoft.com/dynamics365/ai/customer-insights/overview). Дополнительные сведения о мерах см. в разделе [Меры](https://docs.microsoft.com/dynamics365/ai/customer-insights/pm-measures).

## <a name="set-up-clienteling"></a>Настройка отношений с клиентом

Чтобы включить функцию отношений с клиентами в своей среде, выполните следующие действия.

1. В рабочей области **Управление функциями** отфильтруйте функции модуля **Розничная торговля и коммерция**.

    ![Отношения с клиентам в списке функций модуля Commerce](./media/Enable_clienteling.png "Отношения с клиентам в списке функций модуля "Розничная торговля и коммерция"")

2. Включите функцию **Отношения с клиентами**, выбрав **Включить**.
3. На странице **Параметры Commerce** на вкладке **Номерная серия** выберите строку **Идентификатор клиентской книги**. Затем в поле **Код номерной серии** выберите номерную серию. Система будет использовать эту номерную серию для присвоения кода клиентским книгам.
4. Нажмите **Сохранить**.
5. Создайте новую группу атрибутов, которая содержит атрибуты, которые необходимо получить для клиентов, управляемых в клиентских книгах. Инструкции см. в разделе [Атрибуты и группы атрибутов](https://docs.microsoft.com/dynamics365/retail/attribute-attributegroups-lifecycle).

    - Определите необходимые атрибуты как **Возможно уточнение**. Затем продавцы-консультанты смогут использовать эти атрибуты для фильтрования своей клиентской книги.
    - Настройка порядка отображения этих атрибутов. Этот порядок отображения определяет, какие атрибуты должны отображаться в карточке клиента в клиентской книге. Порядок отображения 1 считается выше порядка отображения 2. Поэтому атрибут с порядком отображения 1 будет показан перед атрибутом с порядком отображения 2.

    > [!NOTE]
    > Можно сделать Customer Insights доступной с той же страницы. Однако для аутентификации необходимо создать идентификатор приложения Azure и секрет. (Дополнительные сведения о требованиях см. в разделе [Включение интеграции Customer Insights с Commerce](#turn-on-the-integration-of-customer-insights-with-commerce) далее в этом разделе.) Если Customer Insights включено, то при выборе одной или нескольких мер, которые должны отображаться в карточке клиента, эти меры будут показаны первыми. Затем на основании порядка отображения будут показаны группы атрибутов клиентской книги. Например, если выбрать две меры в Customer Insights, эти две меры и один атрибут клиентской книги будут показаны в карточке клиента. (Отображаемый атрибут клиентской книги будет атрибутом, имеющим самый высокий порядок отображения.)

6. На странице **Параметры Commerce** на вкладке **Отношения с клиентами** в поле **Группа атрибутов клиентской книги** выберите только что созданную группу атрибутов.

    ![Выбрана группа атрибутов клиентской книги](./media/Client%20book%20attributes.png "Выбрана группа атрибутов клиентской книги")

7. Чтобы получить мероприятия, происходящие на POS-терминале, определите типы мероприятий на странице **Типы мероприятий** (**Retail и Commerce \> Клиенты \> Типы мероприятий**).

    > [!NOTE]
    > Типы мероприятий извлекаются Commerce Scale Unit при первом вызове в реальном времени. После извлечения мероприятий они кэшируются в течение нескольких часов. При изменении типов действий дождитесь, пока кэш станет недействительным. В качестве альтернативы, для непроизводственной среды перезапустите службу Commerce Scale Unit.

8. Добавьте две кнопки на соответствующий макет экрана POS, чтобы продавцы могли просматривать собственную клиентскую книгу и клиентскую книгу магазина. (Храните клиентские книги с клиентами из всех клиентских книг всех продавцов-консультантов с общей адресной книгой с магазином.) Соответствующие операции именуются **Просмотр клиентов в клиентской книге** и **Просмотр клиентов из клиентские книги магазина** соответственно. Доступны три дополнительные операции, которые относятся к клиентской книге. Эти операции определяют, какие консультанты могут добавлять, удалять и перераспределять клиентов из клиентской книги. Они называются **Добавить клиента в клиентскую книгу**, **Удалить клиентов из клиентской книги** и **Переназначить клиентов в клиентскую книгу** соответственно.
9. Выполните следующие задания планирования распределения: 1040, 1150, 1110 и 1090.

После выполнения этой процедуры с помощью продавцы-консультанты могут открыть страницу сведений о клиенте в POS-терминале и добавить клиентов в клиентскую книгу, просмотреть и записать мероприятия и заметки для клиентов и обратиться к клиентам, используя атрибуты клиента и клиентской книги, чтобы отфильтровать клиентскую книгу. Следующая иллюстрация показывает пример клиентской книги.

![Пример клиентской книги](./media/client_book.png "Пример клиентской книги")

## <a name="turn-on-the-integration-of-customer-insights-with-commerce"></a>Включите интеграцию Customer Insights с Commerce

Чтобы включить интеграцию Customer Insights с Commerce, необходимо убедиться, что у вас есть активный экземпляр Customer Insights в клиенте, на котором подготовлена Commerce. Кроме того, необходимо иметь учетную запись пользователя Azure Active Directory (Azure AD) с подпиской Azure.

Чтобы настроить интеграцию, сделайте следующее.

1. На портале Azure зарегистрируйте приложение. Это приложение будет использоваться для аутентификации Customer Insights. Инструкции см. в разделе [Краткое описание: регистрация приложения на платформе Microsoft Identity](https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app).
2. Создание секрета для приложения Запишите секретный ключ и храните его в безопасном месте, поскольку это потребуется позже. Также выберите срок действия секрета.

    > [!IMPORTANT]
    > Примите меры, чтобы не забыть изменить секрет до того, как истечет срок его действия. В противном случае интеграция будет внезапно остановлена.

3. Создайте хранилище ключей Azure и сохраните секретный ключ приложения. Инструкции см. в разделе [Краткое описание: настройка и получение секрета в Azure Key Vault с помощью портала Azure](https://docs.microsoft.com/azure/key-vault/quick-create-portal).
4. Включите доступ к Azure Key Vault из Commerce. Для выполнения этого шага необходимо иметь идентификатор приложения и секретный ключ. Приложение может быть тем же приложением, которое было создано на шаге 1, либо новым приложением. (Иными словами, вы можете использовать приложение, созданное на шаге 1, для доступа к хранилищу ключей и Customer Insights, либо можно создать уникальное приложение для каждого типа доступа.) Инструкции см. в разделе [Хранение учетных данных участника службы в Azure Stack Key Vault](https://docs.microsoft.com/azure-stack/user/azure-stack-key-vault-store-credentials?view=azs-1908#create-a-service-principal).
5. В Headquarters перейдите **Администрирование системы \> Настройка \> Параметры хранилища ключей** и введите необходимые сведения для данного хранилища ключей. Затем в поле **Клиент хранилища ключей** введите код приложения, который был использован на шаге 4, чтобы Commerce смог получить доступ к секретам в хранилище ключей.
6. Чтобы добавить приложение, созданное на шаге 1, в список безопасных приложений (которые иногда называют белым списком), перейдите к Customer Insights и предоставьте доступ к **Вид** для приложения. Инструкции см. в разделе [Разрешения](https://docs.microsoft.com/dynamics365/ai/customer-insights/pm-permissions).
7. В модуле Commerce на странице **Параметры Commerce** на вкладке **Отношения с клиентами** на экспресс-вкладке **Dynamics 365 Customer Insights** выполните следующие действия:

    1. В поле **Код приложения** введите код приложения, который был использован на шаге 1.
    2. В поле **Имя секрета** введите имя секрета хранилища ключей, созданного на шаге 5.
    3. Для параметра **Включить Customer Insights** выберите значение **Да**. Если по какой-либо причине настройка не удалась, будет выведено сообщение об ошибке, и этот параметр будет задан как **Нет**.
    4. В Customer Insights могут быть несколько сред, таких как тестовая и производственная среда. В поле **Код экземпляра среды** введите соответствующую среду.
    5. В поле **Альтернативный код клиента** введите свойство в Customer Insights, которое сопоставляется с номером счета клиента. (В Commerce номер счета клиента — это код клиента.)
    6. Остальные три свойства являются мерами, которые будут отображаться в карточке клиента в клиентской книге. Можно выбрать до трех мер для отображения в карточке клиента. (Однако нет необходимости выбирать меры.) Как упоминалось ранее, в системе сначала отображаются эти значения, а затем отображаются значения для группы атрибутов клиентской книги.
