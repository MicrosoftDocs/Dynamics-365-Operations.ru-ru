---
title: Обзор отношений с клиентами
description: В этом разделе представлен обзор новых возможностей отношений с клиентами, доступных в приложении магазина.
author: bebeale
ms.date: 02/01/2021
ms.topic: overview
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: josaw
ms.custom:
- "260624"
- intro-internal
ms.assetid: a4f9d315-9951-451c-8ee6-37f9b3b15ef0
ms.search.region: global
ms.search.industry: Retail
ms.author: shajain
ms.search.validFrom: 2018-10-01
ms.dyn365.ops.version: Version 10.0.7
ms.openlocfilehash: b1e1b7a67141ffec01d926b7f917ebd4e1f24741
ms.sourcegitcommit: 3754d916799595eb611ceabe45a52c6280a98992
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/15/2022
ms.locfileid: "7984604"
---
# <a name="clienteling-overview"></a>Обзор отношений с клиентами

[!include [banner](includes/banner.md)]


Многие розничные предприятия, особенно высококачественные розничные продавцы, хотят, чтобы консультанты обеспечивали долгосрочные торговые отношения с ключевыми клиентами. Предполагается, что консультанты должны знать о предпочтениях и отрицательном отношении своих клиентов, знать об истории покупок, предпочитаемых продуктах и важных датах, таких как годовщины и дни рождения. Консультантам требуется место, где они могут получить эту информацию и при необходимости легко ее найти. Если эти сведения доступны в едином представлении, консультанты могут легко ориентироваться на клиентов, соответствующих определенным критериям. Например, они могут найти всех клиентов, которые предпочитают покупать сумки или клиентов с важным событием, например, днем рождения или годовщиной.

## <a name="client-book"></a>Книга клиентов

В Microsoft Dynamics 365 Commerce розничные предприятия могут использовать функцию клиентской книги, чтобы консультанты смогли сформировать долгосрочные отношения с основными клиентами.

Клиентская книга включает карты клиентов с контактной информацией по каждому клиенту, вместе с тремя дополнительными свойствами, которые определены розничным продавцом и настроены в Headquarters. Розничные продавцы могут определить три наиболее важные вещи, которые должны быть известны продавцам-консультантам о клиентах. Например, розничному продавцу ювелирных изделий может потребоваться включить важные даты, такие как годовщины или дни рождения, так как в эти даты люди покупают больше товаров. Аналогичным образом розничный продавец может попытаться включить предпочитаемые интересы и торговые марки клиента.

Кроме того, в клиентской книге можно отфильтровать список, чтобы отображались только клиенты, соответствующие определенным критериям. Например, в магазин поступила новая коллекция мужской обуви, и продавец-консультант хочет сообщить клиентам, которые захотят купить мужскую обувь. В этом случае продавец-консультант может отфильтровать клиентскую книгу, чтобы найти соответствующих клиентов, а затем предпринять дальнейшие действия.

Если клиенты больше не считаются ключевыми клиентами по какой-либо причине и поэтому не нуждаются в тесном управлении, они могут быть удалены из клиентской книги.

Некоторые розничные предприятия не хотят управлять клиентами на уровне продавца-консультанта. Вместо этого они хотят управлять списком ключевых клиентов на уровне магазина. Эти розничные продавцы могут просматривать клиентов из книг клиентов магазина. Используя этот параметр, розничные продавцы могут просматривать клиентов из книг клиентов всех торговых партнеров, адресная книга которых совпадает с адресной книгой текущего магазина. Таким образом, если продавец-консультант работает в нескольких магазинах юридического лица, в клиентской книге отображаются клиенты из всех этих магазинов. Эта функция поддерживает дополнительные возможности. Например, клиенты могут быть переназначены от одного продавца-консультанта другому. Эта возможность полезна, когда продавец-консультант переходит на другое место в организации или покидает организацию.

У каждого продавца-консультанта может быть одна клиентскую книгу для одного юридического лица, и продавец-консультант может добавить одного или нескольких клиентов в свою клиентскую книгу. В Commerce в настоящее время каждый клиент может быть добавлен только в одну клиентскую книгу. Однако корпорация Майкрософт планирует добавить функции, позволяющие добавлять одного клиента в несколько клиентских книг.

> [!NOTE]
> В отличие от поиска клиентов клиентская книга не фильтрует записи клиентов на основе адресных книг магазина

## <a name="activities-and-notes"></a>Мероприятия и заметки

Интерактивные каналы предоставляют розничным компаниям способы изучения предпочтений клиента без необходимости их явного указания пользователями. Наоборот, когда клиенты взаимодействуют с продавцами-консультантами в магазине, они явно передают информацию о своих предпочтениях. К сожалению, эту информацию можно потерять после завершения продажи. Однако если эти сведения записаны, они могут помочь предприятиям розничной торговли лучше понимать клиентов и, таким образом, помочь им в обеспечении лучших рекомендаций и улучшению общего опыта покупок.

Чтобы получить важную информацию, которой делятся клиенты, продавцы-консультанты могут использовать не только атрибуты клиентской книги, но также и функциональные возможности мероприятий и заметок. Розничные продавцы могут настраивать типы мероприятий, такие как сведения о посещении магазина, адрес электронной почты, номер телефона и встречи. Мероприятия, которые создают продавцы-консультанты, можно просматривать в виде временной шкалы в POS-терминале. Их можно также просмотреть на вкладке **Мероприятия** на странице **Все клиенты \> Общее** в Headquarters.

Продавцы-консультанты могут также использовать заметки для записи общих сведений о клиенте, которые можно просмотреть перед каждым взаимодействием. Эти заметки сохраняются в Headquarters, и их можно просмотреть в профиле клиента или на странице сведений о клиенте в центре обработки вызовов.

> [!NOTE]
> В настоящее время все заметки и мероприятия можно просматривать по любому продавцу-консультанту, работающему для юридического лица, и можно просматривать страницы сведений о клиенте. Заметки и мероприятия не ограничиваются продавцом-консультантом, который добавил клиента в клиентскую книгу.

## <a name="integration-with-dynamics-365-customer-insights"></a>Интеграция с Dynamics 365 Customer Insights

С помощью приложения Dynamics 365 Customer Insights розничные предприятия могут агрегировать данные из различных систем, которые клиенты используют для взаимодействия с торговой маркой розничной торговли. Затем они могут использовать эти данные для создания единого представления клиента и получения аналитической информации. Интеграция Customer Insights с модулем Commerce позволяет розничным продавцам выбирать один или несколько способов, которые должны отображаться в карточке клиента в клиентской книге. Например, розничные предприятия могут использовать данные в Customer Insights для расчета "вероятности оттока клиентов" для клиента и определить "следующее наилучшее действие". Если эти значения определены как меры, они могут отображаться в карточке клиента и могут предоставлять важную информацию для торговых партнеров. Дополнительные сведения о Customer Insights см. в разделе Документация по [Dynamics 365 Customer Insights](/dynamics365/ai/customer-insights/overview). Дополнительные сведения о мерах см. в разделе [Меры](/dynamics365/ai/customer-insights/pm-measures).

## <a name="set-up-clienteling"></a>Настройка отношений с клиентом

Чтобы включить функцию отношений с клиентами в своей среде, выполните следующие действия.

1. В рабочей области **Управление функциями** отфильтруйте функции модуля **Розничная торговля и коммерция**.

    ![Отношения с клиентам в списке функций модуля Commerce.](./media/Enable_clienteling.png "Отношения с клиентам в списке функций модуля &quot;Розничная торговля и коммерция&quot;")

2. Включите функцию **Отношения с клиентами**, выбрав **Включить**.
3. На странице **Параметры Commerce** на вкладке **Номерная серия** выберите строку **Идентификатор клиентской книги**. Затем в поле **Код номерной серии** выберите номерную серию. Система будет использовать эту номерную серию для присвоения кода клиентским книгам.
4. Нажмите **Сохранить**.
5. Создайте новую группу атрибутов, которая содержит атрибуты, которые необходимо получить для клиентов, управляемых в клиентских книгах. Инструкции см. в разделе [Атрибуты и группы атрибутов](./attribute-attributegroups-lifecycle.md).

    - Определите необходимые атрибуты как **Возможно уточнение**. Затем продавцы-консультанты смогут использовать эти атрибуты для фильтрования своей клиентской книги.
    - Настройка порядка отображения этих атрибутов. Этот порядок отображения определяет, какие атрибуты должны отображаться в карточке клиента в клиентской книге. Порядок отображения 1 считается выше порядка отображения 2. Поэтому атрибут с порядком отображения 1 будет показан перед атрибутом с порядком отображения 2.

    > [!NOTE]
    > Можно сделать Customer Insights доступной с той же страницы. Однако для аутентификации необходимо создать идентификатор приложения Azure и секрет. (Дополнительные сведения о требованиях см. в разделе [Включение интеграции Customer Insights с Commerce](#turn-on-the-integration-of-customer-insights-with-commerce) далее в этом разделе.) Если Customer Insights включено, то при выборе одной или нескольких мер, которые должны отображаться в карточке клиента, эти меры будут показаны первыми. Затем на основании порядка отображения будут показаны группы атрибутов клиентской книги. Например, если выбрать две меры в Customer Insights, эти две меры и один атрибут клиентской книги будут показаны в карточке клиента. (Отображаемый атрибут клиентской книги будет атрибутом, имеющим самый высокий порядок отображения.)

6. На странице **Параметры Commerce** на вкладке **Отношения с клиентами** в поле **Группа атрибутов клиентской книги** выберите только что созданную группу атрибутов.

    ![Выбрана группа атрибутов клиентской книги.](./media/Client%20book%20attributes.png "Выбрана группа атрибутов клиентской книги")

7. Чтобы получить мероприятия, происходящие на POS-терминале, определите типы мероприятий на странице **Типы мероприятий** (**Retail и Commerce \> Клиенты \> Типы мероприятий**).

    > [!NOTE]
    > Типы мероприятий извлекаются Commerce Scale Unit при первом вызове в реальном времени. После извлечения мероприятий они кэшируются в течение нескольких часов. При изменении типов действий дождитесь, пока кэш станет недействительным. В качестве альтернативы, для непроизводственной среды перезапустите службу Commerce Scale Unit.

8. Добавьте две кнопки на соответствующий макет экрана POS, чтобы продавцы могли просматривать собственную клиентскую книгу и клиентскую книгу магазина. (Храните клиентские книги с клиентами из всех клиентских книг всех продавцов-консультантов с общей адресной книгой с магазином.) Соответствующие операции именуются **Просмотр клиентов в клиентской книге** и **Просмотр клиентов из клиентские книги магазина** соответственно. Доступны три дополнительные операции, которые относятся к клиентской книге. Эти операции определяют, какие консультанты могут добавлять, удалять и перераспределять клиентов из клиентской книги. Они называются **Добавить клиента в клиентскую книгу**, **Удалить клиентов из клиентской книги** и **Переназначить клиентов в клиентскую книгу** соответственно.
9. Выполните следующие задания планирования распределения: 1040, 1150, 1110 и 1090.

После выполнения этой процедуры с помощью продавцы-консультанты могут открыть страницу сведений о клиенте в POS-терминале и добавить клиентов в клиентскую книгу, просмотреть и записать мероприятия и заметки для клиентов и обратиться к клиентам, используя атрибуты клиента и клиентской книги, чтобы отфильтровать клиентскую книгу. Следующая иллюстрация показывает пример клиентской книги.

![Пример клиентской книги.](./media/client_book.png "Пример клиентской книги")

## <a name="turn-on-the-integration-of-customer-insights-with-commerce"></a>Включите интеграцию Customer Insights с Commerce

Чтобы включить интеграцию Customer Insights с Commerce, необходимо убедиться, что у вас есть активный экземпляр Customer Insights в клиенте, на котором подготовлена Commerce. Кроме того, необходимо иметь учетную запись пользователя Azure Active Directory (Azure AD) с подпиской Azure.

Чтобы настроить интеграцию, сделайте следующее.

1. На портале Azure выполните регистрацию нового приложения и запишите имя приложения, идентификатор приложения и секрет. Эти сведения будут использоваться для проверки подлинности между службами между Commerce и Customer Insights. Храните секрет безопасно, поскольку потребуется сохранить его в Key Vault. В следующем примере используйте CI_Access_name, CI_Access_AppID, CI_Access_Secret для имени приложения, идентификатора приложения и секрета соответственно. Дополнительные сведения см. в разделе [Краткое описание: регистрация приложения на платформе Microsoft Identity](/azure/active-directory/develop/quickstart-register-app).

    > [!IMPORTANT]
    > Примите меры, чтобы не забыть изменить секрет до того, как истечет срок его действия. В противном случае интеграция будет внезапно остановлена.

2. Перейдите к вашему экземпляру Customer Insights и выполните поиск имени приложения, созданного выше (в данном примере "CI_Access_name").
3. Создайте Azure Key Vault и запишите имя и URL-адрес (в данном примере — "KeyVaultName", "KeyVaultURL"). Инструкции см. в разделе [Краткое описание: настройка и получение секрета в Azure Key Vault с помощью портала Azure](/azure/key-vault/quick-create-portal).
4. Сохраните секрет (в данном примере это "CI_Access_Secret") в хранилище. Когда этот секрет хранится в хранилище, секрет получает имя. Запишите имя секрета (в данном примере — "SecretName").
5. Для получения доступа к секрету из хранилища Azure Key Vault необходимо создать другое приложение с ИД приложения и секретом (в данном примере — "KeyVault_Access_AppID" и "KeyVault_Access_Secret"). Надежно запишите секрет, поскольку он не будет отображаться снова.
6. Затем необходимо предоставить разрешения приложению для доступа к Key Vault из Commerce с помощью интерфейсов API. Перейдите на страницу приложения на портале Azure. В разделе **Управление** выберите **Разрешения API**. Добавьте разрешение для доступа к **Azure Key Vault**. Для этого разрешения выберите **Политика доступа**. Выберите шаблон как **Управление секретами** и выберите параметры **Получить**, **Список**, **Расшифровать** и **Зашифровать**. 
5. В Commerce Headquarters перейдите в раздел **Администрирование системы \> Настройка \> Параметры Key Vault** и введите необходимые сведения для данного хранилища Key Vault. Затем в поле **Клиент хранилища ключей** введите код приложения, который был использован на шаге 4, чтобы Commerce смог получить доступ к секретам в хранилище ключей.
6. Чтобы добавить приложение, созданное на шаге 1, в список безопасных приложений (которые иногда называют списком безопасности), перейдите к Customer Insights и выберите доступ **Просмотр** для приложения. Инструкции см. в разделе [Разрешения](/dynamics365/ai/customer-insights/pm-permissions).
7. В разделе **Администрирование системы > Настройка > Параметры Key Vault** в Commerce HQ, обновите поля, как описано ниже: 

- **URL-адрес Key Vault**: "KeyVaultURL" (из шага 3 выше).
- **Клиент Key Vault**: "KeyVault_Access_AppID" (из шага 5 выше).
- **Секретный ключ Key Vault**: "KeyVault_Access_Secret" (из шага 5 выше).
- В разделе **Секреты**:
    - **Имя**: любое имя, например "CISecret".
    - **Описание**: любое значение.
    - **Секрет** : **хранилище**:`//<Name of key vault>/<name of secret>>` В этом примере он будет иметь значение `vault://KeyVaultName/SecretName`.

После обновления полей выберите **Проверить**, чтобы обеспечить возможность доступа к секрету для приложения Commerce.

8. В Commerce на странице **Параметры Commerce** на вкладке **Отношения с клиентами** на экспресс-вкладке **Dynamics 365 Customer Insights** задайте для параметра **ИД приложения** значение "CI_Access_AppID" (из шага 1). Для параметра **Имя секрета** выберите имя секрета, введенное на шаге 7 выше ("CISecret"). Для параметра **Включить Customer Insights** выберите значение **Да**. Если по какой-либо причине настройка не удалась, отображается сообщение об ошибке, и этот параметр будет задан как **Нет**. 

В Customer Insights могут быть несколько сред, таких как тестовая и производственная среда. В поле **Код экземпляра среды** введите соответствующую среду. В поле **Альтернативный код клиента** введите свойство в Customer Insights, которое сопоставляется с номером счета клиента. (В модуле Commerce номер счета клиента является кодом клиента.) Остальные три свойства являются мерами, которые будут отображаться в карточке клиента в книге клиентов. Можно выбрать до трех мер для отображения в карточке клиента. Однако нет необходимости в выборе каких-либо показателей. Как упоминалось ранее, в системе сначала отображаются эти значения, а затем отображаются значения для группы атрибутов книги клиентов.


[!INCLUDE[footer-include](../includes/footer-banner.md)]