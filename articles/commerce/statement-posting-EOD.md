---
title: Усовершенствования функции разноски журнала операций
description: В этом разделе описываются усовершенствования, которые были внесены в функцию разноски журналов операций.
author: josaw1
manager: AnnBe
ms.date: 05/14/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: Global
ms.search.industry: retail
ms.author: anpurush
ms.search.validFrom: 2018-04-30
ms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update
ms.openlocfilehash: 68abef8f28c04a4f6f88e638c8abf944d06a32c4
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/13/2020
ms.locfileid: "4415309"
---
# <a name="improvements-to-statement-posting-functionality"></a><span data-ttu-id="71075-103">Усовершенствования функции разноски журнала операций</span><span class="sxs-lookup"><span data-stu-id="71075-103">Improvements to statement posting functionality</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="71075-104">В этом разделе описывается первый набор усовершенствований, которые были внесены в функцию разноски журналов операций.</span><span class="sxs-lookup"><span data-stu-id="71075-104">This topic describes the first set of improvements that have been made to the statement posting feature.</span></span> <span data-ttu-id="71075-105">Эти усовершенствования доступны в Microsoft Dynamics 365 for Finance and Operations 7.3.2.</span><span class="sxs-lookup"><span data-stu-id="71075-105">These improvements are available in Microsoft Dynamics 365 for Finance and Operations 7.3.2.</span></span>

## <a name="activation"></a><span data-ttu-id="71075-106">Активация</span><span class="sxs-lookup"><span data-stu-id="71075-106">Activation</span></span>

<span data-ttu-id="71075-107">По умолчанию во время развертывания Finance and Operations 7.3.2 программа настроена для использования устаревшей функции разноски журналов операций.</span><span class="sxs-lookup"><span data-stu-id="71075-107">By default, during deployment of Finance and Operations 7.3.2, the program is set up to use the legacy feature for statement postings.</span></span> <span data-ttu-id="71075-108">Чтобы включить усовершенствованную функцию разноски журналов операций, необходимо включить конфигурационный ключ для нее.</span><span class="sxs-lookup"><span data-stu-id="71075-108">To enable the improved statement posting feature, you must turn on the configuration key for it.</span></span>

- <span data-ttu-id="71075-109">Перейдите в раздел **Администрирование системы** \> **Настройка** \> **Конфигурация лицензии**, затем в узле **Retail и Commerce** снимите флажок **Журналы операций (устар.)** и установите флажок **Журналы операций розничной торговли**.</span><span class="sxs-lookup"><span data-stu-id="71075-109">Go to **System administration** \> **Setup** \> **License configuration**, and then, under the **Retail and Commerce** node, clear the **Statements (legacy)** check box, and select the **Statements** check box.</span></span>

<span data-ttu-id="71075-110">После включения нового конфигурационного ключа **Журналы операций** станет доступен новый пункт меню с именем **Журналы операций**.</span><span class="sxs-lookup"><span data-stu-id="71075-110">When the new **Statements** configuration key is turned on, a new menu item that is named **Statements** is available.</span></span> <span data-ttu-id="71075-111">Этот пункт меню позволяет вручную создать, рассчитать и разнести журналы операций.</span><span class="sxs-lookup"><span data-stu-id="71075-111">This menu item lets you manually create, calculate, and post statements.</span></span> <span data-ttu-id="71075-112">Любой журнал операций, который приводит к ошибке в процессе пакетной обработки, также будет доступен в этом пункте меню.</span><span class="sxs-lookup"><span data-stu-id="71075-112">Any statement that causes an error when the batch posting process is used will also be available through this menu item.</span></span> <span data-ttu-id="71075-113">(Если включен конфигурационный ключ **Журналы операций (устар.)**, пункт меню называется **Открытые журналы операций**.)</span><span class="sxs-lookup"><span data-stu-id="71075-113">(When the **Statements (legacy)** configuration key is turned on, the menu item is named **Open statements**.)</span></span>

<span data-ttu-id="71075-114">Commerce включает следующие проверки, связанные с этими конфигурационными ключами:</span><span class="sxs-lookup"><span data-stu-id="71075-114">Commerce includes the following validations that are related to these configuration keys:</span></span>

- <span data-ttu-id="71075-115">Оба конфигурационных ключа не могут быть включены одновременно.</span><span class="sxs-lookup"><span data-stu-id="71075-115">Both configuration keys can't be turned on at the same time.</span></span>
- <span data-ttu-id="71075-116">Необходимо использовать одинаковые конфигурационные ключи для всех операций, которые выполняются в данном журнале операций во время его жизненного цикла (создание, расчет, очистка, разноска и так далее).</span><span class="sxs-lookup"><span data-stu-id="71075-116">The same configuration keys must be used for all the operations that are performed on a given statement during its lifecycle (Create, Calculate, Clear, Post, and so on).</span></span> <span data-ttu-id="71075-117">Например, невозможно создать и рассчитать журнал операций, если включен конфигурационный ключ **Журналы операций (устар.)**, а затем разнести тот же журнал операций, если включен конфигурационный ключ **Журнал операций**.</span><span class="sxs-lookup"><span data-stu-id="71075-117">For example, you can't create and calculate a statement while the **Statement (legacy)** configuration key is turned on, and then try to post the same statement while the **Statement** configuration key is turned on.</span></span>

> [!NOTE]
> <span data-ttu-id="71075-118">Рекомендуется использовать конфигурационный ключ **Журналы операций** для усовершенствованной функции разноски журналов операций, если нет особой причины использовать конфигурационный ключ **Журналы операций (устар.)**.</span><span class="sxs-lookup"><span data-stu-id="71075-118">We recommend that you use the **Statements** configuration key for the improved statement posting feature, unless you have compelling reasons to use the **Statements (legacy)** configuration key instead.</span></span> <span data-ttu-id="71075-119">Корпорация Майкрософт будет продолжать развивать новую и усовершенствованную функцию разноски журналов операций, и важно, чтобы вы перешли на нее при первой возможности для повышения эффективности работы.</span><span class="sxs-lookup"><span data-stu-id="71075-119">Microsoft will continue to invest in the new and improved statement posting feature, and it's important that you switch to it at the earliest opportunity to benefit from it.</span></span> <span data-ttu-id="71075-120">Устаревшая функция разноски журналов операций будет объявлена устаревшей в выпуске 8.0.</span><span class="sxs-lookup"><span data-stu-id="71075-120">The legacy statement posting feature is deprecated starting in 8.0 release.</span></span>

## <a name="setup"></a><span data-ttu-id="71075-121">Настройка</span><span class="sxs-lookup"><span data-stu-id="71075-121">Setup</span></span>

<span data-ttu-id="71075-122">В рамках улучшения функции разноски журналов операций введены три новых параметра на экспресс-вкладке **Журнал операций** вкладки **Разноска** на странице **Параметры Commerce**:</span><span class="sxs-lookup"><span data-stu-id="71075-122">As part of the improvements to the statement posting feature, three new parameters have been introduced on the **Statement** FastTab on the **Posting** tab of the **Commerce parameters** page:</span></span>

- <span data-ttu-id="71075-123">**Отключить удаление строк журнала операций** — данный параметр применяется только для устаревшей функции разноски журналов операций.</span><span class="sxs-lookup"><span data-stu-id="71075-123">**Disable clear statement** – This option is applicable only for the legacy statement posting feature.</span></span> <span data-ttu-id="71075-124">Рекомендуется установить для этого параметра значение **Нет**, чтобы пользователи не могли очистить журналы операций, имеющие состояние частичной разноски.</span><span class="sxs-lookup"><span data-stu-id="71075-124">We recommend that you set this option to **No** to prevent users from clearing statements that are in a semi-posted state.</span></span> <span data-ttu-id="71075-125">Если очистить журналы операций, которые находятся в состоянии частичной разноски, данные будут повреждены.</span><span class="sxs-lookup"><span data-stu-id="71075-125">If statements that are in a semi-posted state are cleared, data becomes corrupted.</span></span> <span data-ttu-id="71075-126">Задавать для этого параметра значение **Да** следует только в исключительных случаях.</span><span class="sxs-lookup"><span data-stu-id="71075-126">You should set this option to **Yes** only in exceptional circumstances.</span></span>
- <span data-ttu-id="71075-127">**Резервировать запасы во время расчета** — рекомендуется использовать пакетное задание **Разнести запасы** для резервирования запасов и установить для этого параметра значение **Нет**.</span><span class="sxs-lookup"><span data-stu-id="71075-127">**Reserve inventory during calculation** – We recommend that you use the **Post inventory** batch job for inventory reservation, and that you set this option to **No**.</span></span> <span data-ttu-id="71075-128">Если для этого параметра задать значение **Нет**, улучшенная функция разноски журналов операций не пытается создать записи резервирования запасов во время расчета (если записи еще не были созданы с помощью пакетного задания **Разнести запасы**).</span><span class="sxs-lookup"><span data-stu-id="71075-128">When this option is set to **No**, the improved statement posting feature doesn't try to create inventory reservation entries at the time of calculation (if entries weren't already created through the **Post inventory** batch job).</span></span> <span data-ttu-id="71075-129">Вместо этого функция создает записи резервирования запасов только во время разноски.</span><span class="sxs-lookup"><span data-stu-id="71075-129">Instead, the feature creates inventory reservation entries only at the time of posting.</span></span> <span data-ttu-id="71075-130">Эта реализация была проектным решением и основана на том факте, что интервал времени между процессом расчета и процессом разноски обычно небольшой.</span><span class="sxs-lookup"><span data-stu-id="71075-130">This implementation was a design choice and was based on the fact that the time window between the calculation process and the posting process is typically small.</span></span> <span data-ttu-id="71075-131">Тем не менее, если требуется зарезервировать запасы во время расчета, можно установить для этого параметра значение **Да**.</span><span class="sxs-lookup"><span data-stu-id="71075-131">However, if you want to reserve inventory at the time of calculation, you can set this option to **Yes**.</span></span>

    <span data-ttu-id="71075-132">Устаревшая функция разноски журналов операций всегда резервирует запасы во время процесса расчета журнала операций (если резервирование уже не было сделано с помощью пакетного задания **Разнести запасы**), независимо от значения данного параметра.</span><span class="sxs-lookup"><span data-stu-id="71075-132">The legacy statement posting feature always reserves inventory during the statement calculation process (if reservation wasn't already done through the **Post inventory** batch job), regardless of the setting of this option.</span></span>

- <span data-ttu-id="71075-133">**Отключить требование пересчета** — если для этого параметра задать значение **Да**, процесс разноски журнала операций продолжается, даже если расхождение между подсчитанной суммой и суммой проводки в журнале операций выходит за пределы порогового значения, определенного на экспресс-вкладке **Журнал операций** для магазинов.</span><span class="sxs-lookup"><span data-stu-id="71075-133">**Disable counting required** – When this option is set to **Yes**, the posting process for a statement continues, even if the difference between the counted amount and the transaction amount on the statement is outside the threshold that is defined on the **Statement** FastTab for stores.</span></span>

<span data-ttu-id="71075-134">Кроме того, на экспресс-вкладке **Пакетная обработка** на вкладке **Разноска** на странице **Параметры Commerce** были введены следующие параметры:</span><span class="sxs-lookup"><span data-stu-id="71075-134">Additionally, the following parameters have been introduced on the **Batch processing** FastTab on the **Posting** tab of the **Commerce parameters** page:</span></span> 

- <span data-ttu-id="71075-135">**Максимальное количество параллельных операций разноски журналов операций** — это поле определяет количество пакетных задач, которые будут использоваться для разноски нескольких журналов.</span><span class="sxs-lookup"><span data-stu-id="71075-135">**Maximum number of parallel statement posting** – This field defines the number of batch tasks that will be used to post multiple statements.</span></span> 
- <span data-ttu-id="71075-136">**Макс. поток для обработки заказа на каждый журнал** — это поле представляет максимальное число потоков, используемых пакетным заданием разноски журналов для создания и выставления накладных для заказов на продажу для одного журнала операций.</span><span class="sxs-lookup"><span data-stu-id="71075-136">**Max thread for order processing per statement** – This field represents the maximum number of threads used by the statement posting batch job to create and invoice sales orders for a single statement.</span></span> <span data-ttu-id="71075-137">Общее число потоков, которые будут использоваться процессом разноски журнала операций, будет вычисляться на основе значения этого параметра, умноженного на значение в параметре **Максимальное количество параллельных операций разноски журналов операций**.</span><span class="sxs-lookup"><span data-stu-id="71075-137">The total number of threads that will be used by the statement posting process will be computed based on the value in this parameter multiplied by the value in the **Maximum number of parallel statement posting** parameter.</span></span> <span data-ttu-id="71075-138">Установка слишком высокого значения этого параметра может негативно повлиять на производительность процесса разноски журнала операций.</span><span class="sxs-lookup"><span data-stu-id="71075-138">Setting the value of this parameter too high can negatively impact the performance of the statement posting process.</span></span>
- <span data-ttu-id="71075-139">**Макс. число строк проводок, включенных в агрегирование** — это поле определяет количество строк проводки, которые будут включены в одну объединенную проводку перед созданием новой.</span><span class="sxs-lookup"><span data-stu-id="71075-139">**Max transaction lines included in aggregation** – This field defines the number of transaction lines that will be included in a single aggregated transaction before a new one is created.</span></span> <span data-ttu-id="71075-140">Агрегированные проводки создаются на основе других критериев агрегирования, таких как клиент, рабочая дата или финансовая аналитика.</span><span class="sxs-lookup"><span data-stu-id="71075-140">Aggregated transactions are created based on different aggregation criteria such as customer, business date, or financial dimensions.</span></span> <span data-ttu-id="71075-141">Важно отметить, что строки из одной проводки не будут разбиты по разным агрегированным проводкам.</span><span class="sxs-lookup"><span data-stu-id="71075-141">It is important to note that the lines from a single transaction will not be split across different aggregated transactions.</span></span> <span data-ttu-id="71075-142">Это означает, что число строк в агрегированной проводке может быть несколько больше или меньше, в зависимости от факторов, таких как число различных продуктов.</span><span class="sxs-lookup"><span data-stu-id="71075-142">This means that there is a possibility that the number of lines in a aggregated transaction is slightly higher or lower based on factors such as number of distinct products.</span></span>
- <span data-ttu-id="71075-143">**Максимальное число потоков для проверки проводок магазина** — в этом поле определяется число потоков, которые будут использоваться для проверки проводок.</span><span class="sxs-lookup"><span data-stu-id="71075-143">**Maximum number of threads to validate store transactions** – This field defines the number of threads that will be used to validate transactions.</span></span> <span data-ttu-id="71075-144">Проверка проводок является обязательным шагом, который должен быть выполнен до того, как проводки могут быть вставлены в журналы операций.</span><span class="sxs-lookup"><span data-stu-id="71075-144">Validating transactions is a required step that needs to occur before the transactions can be pulled into the statements.</span></span> <span data-ttu-id="71075-145">Также необходимо определить **Продукт подарочного сертификата** на экспресс-вкладке **Подарочный сертификат** на вкладке **Разноска** на странице **Параметры Commerce**.</span><span class="sxs-lookup"><span data-stu-id="71075-145">You also need to define a **Gift card product** on the **Gift card** FastTab on the **Posting** tab of the **Commerce parameters** page.</span></span> <span data-ttu-id="71075-146">Это должно быть определено, даже если подарочные сертификаты не используются организацией.</span><span class="sxs-lookup"><span data-stu-id="71075-146">This needs to defined even if gift cards are not used by the organization.</span></span>

> [!NOTE]
> <span data-ttu-id="71075-147">Все настройки и параметры, которые относятся к разноске журналов операций и которые определяются в магазинах и на странице **Параметры Commerce**, применимы к улучшенной функции разноски журналов операций.</span><span class="sxs-lookup"><span data-stu-id="71075-147">All settings and parameters that are related to statement postings, and that are defined on stores and on the **Commerce parameters** page, are applicable to the improved statement posting feature.</span></span>

## <a name="processing"></a><span data-ttu-id="71075-148">Обработка</span><span class="sxs-lookup"><span data-stu-id="71075-148">Processing</span></span>

<span data-ttu-id="71075-149">Журналы операций можно рассчитать и разнести в пакетном режиме с помощью пунктов меню **Пакетный расчет журналов операций** и **Пакетная разноска журналов операций**.</span><span class="sxs-lookup"><span data-stu-id="71075-149">Statements can be calculated and posted in batch using the menu items **Calculate statements in batch** and **Post statements in batch**.</span></span> <span data-ttu-id="71075-150">Кроме того, журналы операций можно рассчитать и разнести вручную с помощью пункта меню **Журналы операций**, который предоставляет улучшенная функция разноски журналов операций.</span><span class="sxs-lookup"><span data-stu-id="71075-150">Alternatively, statements can be manually calculated and posted by using the **Statements** menu item that the improved statement posting feature provides.</span></span>

<span data-ttu-id="71075-151">Процесс и шаги расчета и разноски журналов операций в пакетном режиме аналогичны тем, что были в устаревшей функции разноски журналов операций.</span><span class="sxs-lookup"><span data-stu-id="71075-151">The process and steps for calculating and posting statements in a batch are the same as they were in the legacy statement posting feature.</span></span> <span data-ttu-id="71075-152">Тем не менее, значительные улучшения были внесены в базовую внутреннюю обработку журналов операций.</span><span class="sxs-lookup"><span data-stu-id="71075-152">However, significant improvements have been made in the core back-end processing of the statements.</span></span> <span data-ttu-id="71075-153">Эти улучшения делают процесс более устойчивым и обеспечивают улучшенную видимость состояний и сведений об ошибках.</span><span class="sxs-lookup"><span data-stu-id="71075-153">These improvements make the process more resilient, and provide for better visibility into the states and error information.</span></span> <span data-ttu-id="71075-154">Таким образом, пользователи могут устранить корневую причину ошибок и продолжить процесс разноски без повреждения данных, и не требуя исправлений данных.</span><span class="sxs-lookup"><span data-stu-id="71075-154">Therefore, users can address the root cause of errors and then continue the posting process without causing data corruption and without causing data fixes to be required.</span></span>

<span data-ttu-id="71075-155">В следующих разделах описаны некоторые основные улучшения функции разноски журналов операций, отображаемые в пользовательском интерфейсе для журналов операций и разнесенных журналов операций.</span><span class="sxs-lookup"><span data-stu-id="71075-155">The following sections describe some of the major improvements for the statement posting feature that appear in the user interface for statements and posted statements.</span></span>

### <a name="status-details"></a><span data-ttu-id="71075-156">Сведения о статусе</span><span class="sxs-lookup"><span data-stu-id="71075-156">Status details</span></span>

<span data-ttu-id="71075-157">Новая модель состояния введена в процесс разноски журналов операций для расчета и разноски.</span><span class="sxs-lookup"><span data-stu-id="71075-157">A new state model has been introduced in the statement posting routine across the calculation and posting processes.</span></span>

<span data-ttu-id="71075-158">В следующей таблице описаны различные состояния и их порядок в процессе расчета.</span><span class="sxs-lookup"><span data-stu-id="71075-158">The following table describes the various states and their order during the calculation process.</span></span>

| <span data-ttu-id="71075-159">Порядок состояния</span><span class="sxs-lookup"><span data-stu-id="71075-159">State order</span></span> | <span data-ttu-id="71075-160">Область, край</span><span class="sxs-lookup"><span data-stu-id="71075-160">State</span></span>      | <span data-ttu-id="71075-161">описание</span><span class="sxs-lookup"><span data-stu-id="71075-161">Description</span></span> |
|-------------|------------|-------------|
| <span data-ttu-id="71075-162">1</span><span class="sxs-lookup"><span data-stu-id="71075-162">1</span></span>           | <span data-ttu-id="71075-163">Начато</span><span class="sxs-lookup"><span data-stu-id="71075-163">Started</span></span>    | <span data-ttu-id="71075-164">Журнал операций создан и готов к расчету.</span><span class="sxs-lookup"><span data-stu-id="71075-164">The statement was created and is ready to be calculated.</span></span> |
| <span data-ttu-id="71075-165">2</span><span class="sxs-lookup"><span data-stu-id="71075-165">2</span></span>           | <span data-ttu-id="71075-166">Отмечено</span><span class="sxs-lookup"><span data-stu-id="71075-166">Marked</span></span>     | <span data-ttu-id="71075-167">Проводки, которые входят в журнал операций, определяются на основе параметров журнала операций и помечены идентификатором журнала операций.</span><span class="sxs-lookup"><span data-stu-id="71075-167">The transactions that are in scope for the statement are identified based on the statement parameters, and they are marked with the statement ID.</span></span> |
| <span data-ttu-id="71075-168">3</span><span class="sxs-lookup"><span data-stu-id="71075-168">3</span></span>           | <span data-ttu-id="71075-169">Расcчитана</span><span class="sxs-lookup"><span data-stu-id="71075-169">Calculated</span></span> | <span data-ttu-id="71075-170">Строки журнала операций рассчитываются и отображаются.</span><span class="sxs-lookup"><span data-stu-id="71075-170">The statement lines are computed and shown.</span></span> |

<span data-ttu-id="71075-171">В следующей таблице описаны различные состояния и их порядок в процессе разноски.</span><span class="sxs-lookup"><span data-stu-id="71075-171">The following table describes the various states and their order during the posting process.</span></span>

| <span data-ttu-id="71075-172">Порядок состояния</span><span class="sxs-lookup"><span data-stu-id="71075-172">State order</span></span> | <span data-ttu-id="71075-173">Область, край</span><span class="sxs-lookup"><span data-stu-id="71075-173">State</span></span>                   | <span data-ttu-id="71075-174">описание</span><span class="sxs-lookup"><span data-stu-id="71075-174">Description</span></span> |
|-------------|-------------------------|-------------|
| <span data-ttu-id="71075-175">1</span><span class="sxs-lookup"><span data-stu-id="71075-175">1</span></span>           | <span data-ttu-id="71075-176">Проверено</span><span class="sxs-lookup"><span data-stu-id="71075-176">Checked</span></span>                 | <span data-ttu-id="71075-177">Выполняется несколько проверок, которые относятся к параметрам (например, накладные расходы расстановки) и к журналу операций и строкам журнала операций (например, расхождение между рассчитанной суммой и суммой проводки).</span><span class="sxs-lookup"><span data-stu-id="71075-177">Multiple validations are done that are related to parameters (for example, the disposition charge), and to the statement and statement lines (for example, the difference between the counted amount and the transaction amount).</span></span> |
| <span data-ttu-id="71075-178">2</span><span class="sxs-lookup"><span data-stu-id="71075-178">2</span></span>           | <span data-ttu-id="71075-179">Агрегированн.</span><span class="sxs-lookup"><span data-stu-id="71075-179">Aggregated</span></span>              | <span data-ttu-id="71075-180">Проводки по продажам для именованных и неименованных клиентов агрегируются на основании конфигурации.</span><span class="sxs-lookup"><span data-stu-id="71075-180">Sales transactions for named and unnamed customers are aggregated based on the configuration.</span></span> <span data-ttu-id="71075-181">Каждая агрегированная проводка в конечном итоге преобразуется в заказ на продажу.</span><span class="sxs-lookup"><span data-stu-id="71075-181">Every aggregated transaction is eventually converted to a sales order.</span></span> |
| <span data-ttu-id="71075-182">3</span><span class="sxs-lookup"><span data-stu-id="71075-182">3</span></span>           | <span data-ttu-id="71075-183">Заказ клиента создан</span><span class="sxs-lookup"><span data-stu-id="71075-183">Customer order created</span></span>  | <span data-ttu-id="71075-184">На основании агрегированной проводки в системе создаются заказы на продажу.</span><span class="sxs-lookup"><span data-stu-id="71075-184">Based on the aggregated transaction, sales orders are created in the system.</span></span> |
| <span data-ttu-id="71075-185">4</span><span class="sxs-lookup"><span data-stu-id="71075-185">4</span></span>           | <span data-ttu-id="71075-186">По заказу клиента выставлена накладная</span><span class="sxs-lookup"><span data-stu-id="71075-186">Customer order invoiced</span></span> | <span data-ttu-id="71075-187">По заказам на продажу выставлены накладные.</span><span class="sxs-lookup"><span data-stu-id="71075-187">Sales orders are invoiced.</span></span> |
| <span data-ttu-id="71075-188">5</span><span class="sxs-lookup"><span data-stu-id="71075-188">5</span></span>           | <span data-ttu-id="71075-189">Разнесенные скидки</span><span class="sxs-lookup"><span data-stu-id="71075-189">Discounts posted</span></span>        | <span data-ttu-id="71075-190">Журналы розничной скидки разносятся на основании конфигурации.</span><span class="sxs-lookup"><span data-stu-id="71075-190">Periodic discount journals are posted based on the configuration.</span></span> |
| <span data-ttu-id="71075-191">6</span><span class="sxs-lookup"><span data-stu-id="71075-191">6</span></span>           | <span data-ttu-id="71075-192">Разнесенный доход/расход</span><span class="sxs-lookup"><span data-stu-id="71075-192">Income/expense posted</span></span>   | <span data-ttu-id="71075-193">Проводки по доходам/расходам разносятся как ваучеры.</span><span class="sxs-lookup"><span data-stu-id="71075-193">Income/expense transactions are posted as vouchers.</span></span> |
| <span data-ttu-id="71075-194">7</span><span class="sxs-lookup"><span data-stu-id="71075-194">7</span></span>           | <span data-ttu-id="71075-195">Связанные ваучеры</span><span class="sxs-lookup"><span data-stu-id="71075-195">Vouchers linked</span></span>         | <span data-ttu-id="71075-196">Журналы платежей создаются и связываются с соответствующей накладной.</span><span class="sxs-lookup"><span data-stu-id="71075-196">Payment journals are created and linked to the corresponding invoice.</span></span> |
| <span data-ttu-id="71075-197">8</span><span class="sxs-lookup"><span data-stu-id="71075-197">8</span></span>           | <span data-ttu-id="71075-198">Разнесенные платежи</span><span class="sxs-lookup"><span data-stu-id="71075-198">Payments posted</span></span>         | <span data-ttu-id="71075-199">Журналы платежей разносятся.</span><span class="sxs-lookup"><span data-stu-id="71075-199">Payment journals are posted.</span></span> |
| <span data-ttu-id="71075-200">9</span><span class="sxs-lookup"><span data-stu-id="71075-200">9</span></span>           | <span data-ttu-id="71075-201">Разнесенные подарочные сертификаты</span><span class="sxs-lookup"><span data-stu-id="71075-201">Gift cards posted</span></span>       | <span data-ttu-id="71075-202">Проводки по подарочным сертификатам разносятся как ваучеры.</span><span class="sxs-lookup"><span data-stu-id="71075-202">Gift card transactions are posted as vouchers.</span></span> |
| <span data-ttu-id="71075-203">10</span><span class="sxs-lookup"><span data-stu-id="71075-203">10</span></span>          | <span data-ttu-id="71075-204">Опубликовано</span><span class="sxs-lookup"><span data-stu-id="71075-204">Posted</span></span>                  | <span data-ttu-id="71075-205">Журнал операций помечается как разнесенный.</span><span class="sxs-lookup"><span data-stu-id="71075-205">The statement is marked as posted.</span></span> |

<span data-ttu-id="71075-206">Каждое состояние в таблицах выше по существу независимо, и между состояниям создается иерархическая зависимость.</span><span class="sxs-lookup"><span data-stu-id="71075-206">Every state in the preceding tables is independent in nature, and a hierarchical dependency is built between the states.</span></span> <span data-ttu-id="71075-207">Эта зависимость направлена сверху вниз.</span><span class="sxs-lookup"><span data-stu-id="71075-207">This dependency flows from top to bottom.</span></span> <span data-ttu-id="71075-208">Если в системе возникают ошибки при обработке состояния, статус журнала операций возвращается в предыдущее состояние.</span><span class="sxs-lookup"><span data-stu-id="71075-208">If the system encounters any errors while it's processing a state, the status of the statement is reverted to the previous state.</span></span> <span data-ttu-id="71075-209">Все последующие повторные попытки выполнить процесс начинаются с состояния, в котором возникла ошибка, и продолжаются вперед.</span><span class="sxs-lookup"><span data-stu-id="71075-209">Any subsequent reattempt of the process resumes from the state that failed and continues to move forward.</span></span> <span data-ttu-id="71075-210">Этот подход имеет следующие преимущества:</span><span class="sxs-lookup"><span data-stu-id="71075-210">This approach has the following benefits:</span></span>

- <span data-ttu-id="71075-211">Пользователь имеет полную видимость состояния, в котором возникла ошибка.</span><span class="sxs-lookup"><span data-stu-id="71075-211">The user has complete visibility into the state where the error occurred.</span></span>
- <span data-ttu-id="71075-212">Можно избежать повреждения данных.</span><span class="sxs-lookup"><span data-stu-id="71075-212">Data corruption is avoided.</span></span> <span data-ttu-id="71075-213">Например, в устаревшей функции разноски журналов операций были случаи, когда по некоторым заказам на продажу выставлялись накладные, а другие оставались открытыми.</span><span class="sxs-lookup"><span data-stu-id="71075-213">For example, in the legacy statement posting feature, there were instances where some sales orders were invoiced but others were left open.</span></span> <span data-ttu-id="71075-214">Также были случаи, когда некоторые журналы платежей не имели соответствующей накладной для сопоставления из-за ошибки разноски накладной.</span><span class="sxs-lookup"><span data-stu-id="71075-214">There were also instances where some payment journals didn't have a corresponding invoice to settle, because the invoice posting had an error.</span></span>
- <span data-ttu-id="71075-215">Пользователи могут просмотреть текущее состояние журнала операций с помощью кнопки **Сведения о статусе** в группе **Сведения о выполнении** журнала операций.</span><span class="sxs-lookup"><span data-stu-id="71075-215">Users can see the current state of a statement by using the **Status details** button in the **Execution details** group of the statement.</span></span> <span data-ttu-id="71075-216">Страница сведений о состоянии имеет три раздела:</span><span class="sxs-lookup"><span data-stu-id="71075-216">The status details page has three sections:</span></span>

    - <span data-ttu-id="71075-217">В первом разделе показано текущее состояние журнала операций вместе с кодом ошибки и подробным сообщением об ошибке, если произошла ошибка.</span><span class="sxs-lookup"><span data-stu-id="71075-217">The first section shows the current status of the statement, together with the error code and a detailed error message, if an error occurred.</span></span>
    - <span data-ttu-id="71075-218">Во втором разделе показаны различные состояния процесса расчета.</span><span class="sxs-lookup"><span data-stu-id="71075-218">The second section shows the various states of the calculation process.</span></span> <span data-ttu-id="71075-219">Визуальные подсказки указывают состояния, которые были успешно выполнены, состояния, которые не удалось выполнить из-за ошибок, и состояния, которые еще не выполнялись.</span><span class="sxs-lookup"><span data-stu-id="71075-219">Visual cues indicate states that have been successfully run, states that could not be run because of errors, and states that haven't yet been run.</span></span>
    - <span data-ttu-id="71075-220">В третьем разделе показаны различные состояния процесса разноски.</span><span class="sxs-lookup"><span data-stu-id="71075-220">The third section shows the various states of the posting process.</span></span> <span data-ttu-id="71075-221">Визуальные подсказки указывают состояния, которые были успешно выполнены, состояния, которые не удалось выполнить из-за ошибок, и состояния, которые еще не выполнялись.</span><span class="sxs-lookup"><span data-stu-id="71075-221">Visual cues indicate states that have been successfully run, states that could not be run because of errors, and states that haven't yet been run.</span></span>

<span data-ttu-id="71075-222">Кроме того, заголовок второго и третьего разделов показывает общее состояние соответствующего процесса.</span><span class="sxs-lookup"><span data-stu-id="71075-222">Additionally, the header of the second and third sections shows the overall status of the relevant process.</span></span>

### <a name="event-logs"></a><span data-ttu-id="71075-223">Журналы событий</span><span class="sxs-lookup"><span data-stu-id="71075-223">Event logs</span></span>

<span data-ttu-id="71075-224">Журнал операций проходит через различные операции (например, "Создать", "Рассчитать", "Очистить" и "Разнести"), и во время жизненного цикла журнала операций могут вызываться несколько экземпляров одной операции.</span><span class="sxs-lookup"><span data-stu-id="71075-224">A statement goes through various operations (for example, Create, Calculate, Clear, and Post), and multiple instances of the same operation might be called during the statement's lifecycle.</span></span> <span data-ttu-id="71075-225">Например, после создания и расчета журнала операций пользователь может очистить журнал операций и снова рассчитать его.</span><span class="sxs-lookup"><span data-stu-id="71075-225">For example, after a statement is created and calculated, a user can clear the statement and calculate it again.</span></span> <span data-ttu-id="71075-226">Кнопка **Журналы событий** в группе **Сведения о выполнении** журнала операций позволяет выполнить аудиторский след различных операций, которые были вызваны в журнале операций, а также сведения о том, когда были вызваны эти операции.</span><span class="sxs-lookup"><span data-stu-id="71075-226">The **Event logs** button in the **Execution details** group of the statement provides a complete audit trail of the various operations that were called on a statement, together with information about when those operations were called.</span></span>

### <a name="aggregated-transactions"></a><span data-ttu-id="71075-227">Агрегированные проводки</span><span class="sxs-lookup"><span data-stu-id="71075-227">Aggregated transactions</span></span>

<span data-ttu-id="71075-228">В процессе разноски проводки по продажам агрегируются на основе конфигурации.</span><span class="sxs-lookup"><span data-stu-id="71075-228">During the posting process, the sales transactions are aggregated based on the configuration.</span></span> <span data-ttu-id="71075-229">Эти агрегированные проводки хранятся в системе и используются для создания заказов на продажу.</span><span class="sxs-lookup"><span data-stu-id="71075-229">These aggregated transactions are stored in the system and used to create sales orders.</span></span> <span data-ttu-id="71075-230">Каждая агрегированная проводка создает один соответствующий заказ на продажу в системе.</span><span class="sxs-lookup"><span data-stu-id="71075-230">Every aggregated transaction creates one corresponding sales order in the system.</span></span> <span data-ttu-id="71075-231">Агрегированные проводки можно просмотреть с помощью кнопки **Агрегированные проводки** в группе **Сведения о выполнении** журнала операций.</span><span class="sxs-lookup"><span data-stu-id="71075-231">You can view the aggregated transactions by using the **Aggregated transactions** button in the **Execution details** group of the statement.</span></span>

<span data-ttu-id="71075-232">На вкладке **Сведения о заказе на продажу** агрегированной проводки отображаются следующие сведения:</span><span class="sxs-lookup"><span data-stu-id="71075-232">The **Sales order detail** tab of an aggregated transaction shows the following information:</span></span>

- <span data-ttu-id="71075-233">**Код записи** — код агрегированной проводки.</span><span class="sxs-lookup"><span data-stu-id="71075-233">**Record ID** – The ID of the aggregated transaction.</span></span>
- <span data-ttu-id="71075-234">**Номер журнала операций** — журнал операций, к которому принадлежит агрегированная проводка.</span><span class="sxs-lookup"><span data-stu-id="71075-234">**Statement number** – The statement that the aggregated transaction belongs to.</span></span>
- <span data-ttu-id="71075-235">**Дата** — дата создания агрегированной проводки.</span><span class="sxs-lookup"><span data-stu-id="71075-235">**Date** – The date when the aggregated transaction was created.</span></span>
- <span data-ttu-id="71075-236">**Код продаж** — код заказа на продажу при создании заказа на продажу из агрегированной проводки.</span><span class="sxs-lookup"><span data-stu-id="71075-236">**Sales ID** – When a sales order is created from the aggregated transaction, the sales order ID.</span></span> <span data-ttu-id="71075-237">Если это поле не заполнено, соответствующий заказ на продажу не создан.</span><span class="sxs-lookup"><span data-stu-id="71075-237">If this field is blank, the corresponding sales order hasn't been created.</span></span>
- <span data-ttu-id="71075-238">**Число агрегированных строк** — общее число строк для агрегированной проводки и заказа на продажу.</span><span class="sxs-lookup"><span data-stu-id="71075-238">**Number of aggregated lines** – The total number of lines for the aggregated transaction and sales order.</span></span>
- <span data-ttu-id="71075-239">**Статус** — последний статус агрегированной проводки.</span><span class="sxs-lookup"><span data-stu-id="71075-239">**Status** – The last status of the aggregated transaction.</span></span>
- <span data-ttu-id="71075-240">**Код накладной** — код заказа на продажу, когда по заказу на продажу для агрегированной проводки выставляется накладная.</span><span class="sxs-lookup"><span data-stu-id="71075-240">**Invoice ID** – When the sales order for the aggregated transaction is invoiced, the sales invoice ID.</span></span> <span data-ttu-id="71075-241">Если это поле не заполнено, накладная для заказа на продажу не создана.</span><span class="sxs-lookup"><span data-stu-id="71075-241">If this field is blank, the invoice for the sales order hasn't been posted.</span></span>

<span data-ttu-id="71075-242">На вкладке **Сведения о проводках** агрегированной проводки отображаются все проводки, которые были включены в агрегированную проводку.</span><span class="sxs-lookup"><span data-stu-id="71075-242">The **Transaction details** tab of an aggregated transaction shows all the transactions that have been pulled into the aggregated transaction.</span></span> <span data-ttu-id="71075-243">В агрегированных строках агрегированной проводки отображают все агрегированные записи из проводок.</span><span class="sxs-lookup"><span data-stu-id="71075-243">The aggregated lines on the aggregated transaction show all the aggregated records from the transactions.</span></span> <span data-ttu-id="71075-244">В агрегированных строках также отображаются такие сведения, как номенклатура, вариант, количество, цена, чистая сумма, единица измерения и склад.</span><span class="sxs-lookup"><span data-stu-id="71075-244">The aggregated lines also show details such as the item, variant, quantity, price, net amount, unit, and warehouse.</span></span> <span data-ttu-id="71075-245">По существу, каждая агрегированная строка соответствует одной строке заказа на продажу.</span><span class="sxs-lookup"><span data-stu-id="71075-245">Basically, each aggregated line corresponds to one sales order line.</span></span>

<span data-ttu-id="71075-246">На странице **Агрегированные проводки** можно загрузить XML для конкретной агрегированной проводки с помощью кнопки **Экспорт XML-кода заказа на продажу**.</span><span class="sxs-lookup"><span data-stu-id="71075-246">From the **Aggregated transactions** page, you can download the XML for a specific aggregated transaction by using the **Export sales order XML** button.</span></span> <span data-ttu-id="71075-247">XML можно использовать для отладки неполадок, связанных с созданием и разноской заказа на продажу.</span><span class="sxs-lookup"><span data-stu-id="71075-247">You can use the XML to debug issues that involve sales order creation and posting.</span></span> <span data-ttu-id="71075-248">Просто загрузите XML, отправьте его в тестовую среду и выполните отладку ошибки в тестовой среде.</span><span class="sxs-lookup"><span data-stu-id="71075-248">Just download the XML, upload it to a test environment, and debug the issue in the test environment.</span></span> <span data-ttu-id="71075-249">Функциональные возможности загрузки XML для агрегированных проводок недоступны для журналов операций, которые были разнесены.</span><span class="sxs-lookup"><span data-stu-id="71075-249">The functionality for downloading the XML for aggregated transactions isn't available for statements that have been posted.</span></span>

<span data-ttu-id="71075-250">Представление агрегированных проводок предоставляет следующие преимущества:</span><span class="sxs-lookup"><span data-stu-id="71075-250">The aggregated transaction view provides the following benefits:</span></span>

- <span data-ttu-id="71075-251">Пользователь имеет видимость агрегированных проводок, которые завершились с ошибкой во время создания заказа на продажу, и заказов на продажу, которые завершились с ошибкой во время выставления накладных.</span><span class="sxs-lookup"><span data-stu-id="71075-251">The user has visibility into the aggregated transactions that failed during sales order creation and the sales orders that failed during invoicing.</span></span>
- <span data-ttu-id="71075-252">Пользователь имеет видимость способа агрегирования проводок.</span><span class="sxs-lookup"><span data-stu-id="71075-252">The user has visibility into how transactions are aggregated.</span></span>
- <span data-ttu-id="71075-253">Пользователь имеет полный аудиторский след от проводок до заказов на продажу и накладных по продаже.</span><span class="sxs-lookup"><span data-stu-id="71075-253">The user has a complete audit trail, from transactions, to sales orders, to sales invoices.</span></span> <span data-ttu-id="71075-254">Этот аудиторский след не был доступен в устаревшей функции разноски журналов операций.</span><span class="sxs-lookup"><span data-stu-id="71075-254">This audit trail wasn't available in the legacy statement posting feature.</span></span>
- <span data-ttu-id="71075-255">С помощью агрегированного XML-файла легче выявить проблемы во время создания заказа на продажу и выставления накладных по нему.</span><span class="sxs-lookup"><span data-stu-id="71075-255">Aggregated XML file make it easier to identify issues during sales order creation and invoicing.</span></span>

### <a name="journal-vouchers"></a><span data-ttu-id="71075-256">Операции журнала</span><span class="sxs-lookup"><span data-stu-id="71075-256">Journal vouchers</span></span>

<span data-ttu-id="71075-257">Кнопка **Ваучеры журнала** в группе **Сведения о выполнении** журнала операций показывает все различные проводки по ваучеру, созданные для журнала операций и связанные со скидками, приходным/расходным счетами, подарочными сертификатами и т. д.</span><span class="sxs-lookup"><span data-stu-id="71075-257">The **Journal vouchers** button in the **Execution details** group of the statement shows all the various voucher transactions that are created for a statement, and that are related to discounts, income/expense accounts, gift cards, and so on.</span></span>

<span data-ttu-id="71075-258">В настоящее время программа отображает эти данные только для разнесенных журналов операций.</span><span class="sxs-lookup"><span data-stu-id="71075-258">Currently, the program shows this data only for posted statements.</span></span>

### <a name="payment-journals"></a><span data-ttu-id="71075-259">Журналы платежей</span><span class="sxs-lookup"><span data-stu-id="71075-259">Payment journals</span></span>

<span data-ttu-id="71075-260">Кнопка **Журналы платежей** в группе **Сведения о выполнении** журнала операций показывает все различные журналы платежей, созданные для журнала операций.</span><span class="sxs-lookup"><span data-stu-id="71075-260">The **Payment journals** button in the **Execution details** group of the statement shows all the various payment journals that are created for a statement.</span></span>

<span data-ttu-id="71075-261">В настоящее время программа отображает эти данные только для разнесенных журналов операций.</span><span class="sxs-lookup"><span data-stu-id="71075-261">Currently, the program shows this data only for posted statements.</span></span>

## <a name="other-improvements"></a><span data-ttu-id="71075-262">Другие улучшения</span><span class="sxs-lookup"><span data-stu-id="71075-262">Other improvements</span></span>

<span data-ttu-id="71075-263">Другие внутренние усовершенствования, которые может видеть пользователь, были внесены в функцию разноски журналов операций.</span><span class="sxs-lookup"><span data-stu-id="71075-263">Other, back-end improvements that users can see have been made to the statement posting feature.</span></span> <span data-ttu-id="71075-264">Далее приводятся некоторые примеры.</span><span class="sxs-lookup"><span data-stu-id="71075-264">Here are some examples:</span></span>

- <span data-ttu-id="71075-265">При агрегировании не учитываются записи персонала, терминала и смен.</span><span class="sxs-lookup"><span data-stu-id="71075-265">The aggregation doesn't consider the staff, terminal, and shift entities.</span></span> <span data-ttu-id="71075-266">Поскольку имеется меньшее число параметров агрегирования, необходимо обрабатывать меньшее количество строк заказа на продажу.</span><span class="sxs-lookup"><span data-stu-id="71075-266">Because there are fewer aggregation parameters, fewer sales order lines must be processed.</span></span>
- <span data-ttu-id="71075-267">Случаи возникновения взаимоблокировки в таблицах проводок сокращены за счет дополнительных таблиц расширений и выполнения операций вставки вместо операций обновления в таблицах проводок.</span><span class="sxs-lookup"><span data-stu-id="71075-267">The occurrence of deadlock on transaction tables is reduced by introducing additional extension tables and by doing insert operations instead of update operations on the transaction tables.</span></span>
- <span data-ttu-id="71075-268">Количество выполняемых пакетных задач параметризировано и ограничено.</span><span class="sxs-lookup"><span data-stu-id="71075-268">The number of running batch tasks has been parameterized and limited.</span></span> <span data-ttu-id="71075-269">Таким образом, это число можно точно настроить специально для среды клиента.</span><span class="sxs-lookup"><span data-stu-id="71075-269">Therefore, this number can be fine-tuned specifically to a customer's environment.</span></span> <span data-ttu-id="71075-270">В устаревшей функции разноски журналов операций одновременно создавалось неограниченное количество пакетных задач.</span><span class="sxs-lookup"><span data-stu-id="71075-270">In the legacy statement posting feature, an unlimited number of batch tasks was created at the same time.</span></span> <span data-ttu-id="71075-271">Это приводило к неуправляемым нагрузкам, накладным расходам и узким местам на сервере обработки пакетных заданий.</span><span class="sxs-lookup"><span data-stu-id="71075-271">The results were unmanageable loads, overhead, and bottlenecks on the batch server.</span></span>
- <span data-ttu-id="71075-272">Журналы операций эффективно помещаются в очередь для обработки, отдавая приоритет журналам операций с максимальным количеством проводок.</span><span class="sxs-lookup"><span data-stu-id="71075-272">Statements are efficiently queued for processing by prioritizing the statements that have the maximum number of transactions.</span></span>
- <span data-ttu-id="71075-273">Процессы пакетной обработки, например **Пакетный расчет журналов операций** и **Пакетная разноска журналов операций**, выполняются только в пакетном режиме.</span><span class="sxs-lookup"><span data-stu-id="71075-273">Batch processes such as **Calculate statements in batch** and **Post statements in batch** are run only in batch mode.</span></span> <span data-ttu-id="71075-274">В устаревшей функции разноски журналов операций пользователи выбирали запуск этих процессов пакетной обработки в интерактивном режиме, который представляет собой однопоточную операцию в отличие от процессов пакетной обработки, которые являются многопоточными.</span><span class="sxs-lookup"><span data-stu-id="71075-274">In the legacy statement posting feature, users could choose to run these batch processes in an interactive mode which is s single threaded operation unlike batch processes which are multi-threaded.</span></span>
- <span data-ttu-id="71075-275">В устаревшей функции разноски журналов операций любой сбой пакетной задачи приводил к тому, что все пакетное задание переходило в состояние ошибки.</span><span class="sxs-lookup"><span data-stu-id="71075-275">In the legacy statement posting feature, any failure of a batch task put the whole batch job in an error state.</span></span> <span data-ttu-id="71075-276">В улучшенной функции сбои пакетных задач не помещают пакетное задание в состояние ошибки, если другие пакетные задачи успешно выполнены.</span><span class="sxs-lookup"><span data-stu-id="71075-276">In the improved feature, batch task failures don't put the batch job in an error state if other batch tasks are successfully completed.</span></span> <span data-ttu-id="71075-277">Следует оценить статус разноски для пакетного выполнения с помощью страницы **Журналы операций**, на которой можно просматривать любые журналы операций, которые не были разнесены из-за ошибки.</span><span class="sxs-lookup"><span data-stu-id="71075-277">You should assess the posting status for a batch execution run by using the **Statements** page, where you can see any statements that weren't posted because of errors.</span></span>
- <span data-ttu-id="71075-278">В устаревшей функции разноски журналов операций первый случай возникновения сбоя журнала операций приводит к сбою всего пакета.</span><span class="sxs-lookup"><span data-stu-id="71075-278">In the legacy statement posting feature, the first occurrence of a statement failure causes the whole batch to fail.</span></span> <span data-ttu-id="71075-279">Остальные журналы операций не обрабатываются.</span><span class="sxs-lookup"><span data-stu-id="71075-279">The remaining statements aren't processed.</span></span> <span data-ttu-id="71075-280">В улучшенной функции процесс пакетной обработки продолжается для обработки всех журналов операций даже в случае соя некоторых журналов операций.</span><span class="sxs-lookup"><span data-stu-id="71075-280">In the improved feature, the batch process continues to process all statements, even if some of the statements fail.</span></span> <span data-ttu-id="71075-281">Одним из преимуществ является то, что пользователи получают видимость точного количества журналов операций с ошибками.</span><span class="sxs-lookup"><span data-stu-id="71075-281">One benefit is that users gain visibility into the exact number of statements that have errors.</span></span> <span data-ttu-id="71075-282">Поэтому пользователям не нужно постоянно исправлять ошибки и выполнять процесс разноски журналов операций, пока не будут разнесены все журналы операций.</span><span class="sxs-lookup"><span data-stu-id="71075-282">Therefore, users don't have to be stuck in a continuous loop of fixing the errors and running the post statement process till all statements are posted.</span></span>

## <a name="general-guidance-about-the-statement-posting-process"></a><span data-ttu-id="71075-283">Общие рекомендации по процессу разноски журналов операций</span><span class="sxs-lookup"><span data-stu-id="71075-283">General guidance about the statement posting process</span></span>

- <span data-ttu-id="71075-284">Рекомендуется выполнять процесс разноски журналов операций в пакетном режиме, поскольку при этом используются преимущества структуры пакетной обработки в отношении многопоточности.</span><span class="sxs-lookup"><span data-stu-id="71075-284">We recommend that you run the statement posting process in a batch, because batch runs take advantage of the power of the batch framework in terms of multithreading.</span></span> <span data-ttu-id="71075-285">Многопоточность необходима для обработки больших объемов проводок, которые обычно имеются в разносках журналов операций.</span><span class="sxs-lookup"><span data-stu-id="71075-285">Multithreading is required in order to handle the huge volumes of transactions that are normally seen in statement postings.</span></span>
- <span data-ttu-id="71075-286">Рекомендуется включить отрицательные физические запасы в группе номенклатурных моделей, чтобы обеспечить плавную разноску.</span><span class="sxs-lookup"><span data-stu-id="71075-286">We recommend that you turn on negative physical inventory on the item model group, so that you have a seamless posting experience.</span></span> <span data-ttu-id="71075-287">В некоторых сценариях отрицательные журналы операций могут не разноситься при отсутствии отрицательных физических запасов.</span><span class="sxs-lookup"><span data-stu-id="71075-287">In some scenarios, negative statements might not be able to be posted unless there is negative physical inventory.</span></span> <span data-ttu-id="71075-288">Например, в теории, если существует только одна единица номенклатуры на складе и были проводка по продаже и проводка возврата для данной номенклатуры, проводку можно будет разнести, даже если отрицательный запас отключен.</span><span class="sxs-lookup"><span data-stu-id="71075-288">For example, in theory, if there is only one unit of an item in inventory, and there have been a sales transaction and a return transaction for the item, the transaction should be able to be posted even if negative inventory isn't turned on.</span></span> <span data-ttu-id="71075-289">Тем не менее, поскольку процесс разноски журналов операций объединяет проводку по продаже и проводку возврата в один заказ клиента, нет никакой гарантии, что строки продажи будут разноситься первыми, а затем строки возврата.</span><span class="sxs-lookup"><span data-stu-id="71075-289">However, because the statement posting process pulls both the sales transaction and the return transaction in a single customer order, there is no guarantee that the sales line will be posted first, followed by the return line.</span></span> <span data-ttu-id="71075-290">Таким образом, могут возникать ошибки.</span><span class="sxs-lookup"><span data-stu-id="71075-290">Therefore, errors can occur.</span></span> <span data-ttu-id="71075-291">Если отрицательный запас включен в этом сценарии, разноска проводок не затрагивается, и система будет правильно отражать запасов.</span><span class="sxs-lookup"><span data-stu-id="71075-291">If negative inventory is turned on in this scenario, the transaction posting isn't negatively affected, and the system will correctly reflect the inventory.</span></span>
- <span data-ttu-id="71075-292">Рекомендуется использовать агрегирование при расчете и разноске журналов операций.</span><span class="sxs-lookup"><span data-stu-id="71075-292">We recommend that you use aggregation while you calculate and post statements.</span></span> <span data-ttu-id="71075-293">Таким образом, для некоторых агрегированных параметров рекомендуются следующие настройки:</span><span class="sxs-lookup"><span data-stu-id="71075-293">Therefore, the following settings are recommended for some of the aggregation parameters:</span></span>

    - <span data-ttu-id="71075-294">Перейдите в раздел **Retail и Commerce** \> **Настройка Headquarters** \> **Параметры** \> **Параметры Commerce**.</span><span class="sxs-lookup"><span data-stu-id="71075-294">Go to **Retail and Commerce** \> **Headquarters setup** \> **Parameters** \> **Commerce parameters**.</span></span> <span data-ttu-id="71075-295">Затем на вкладке **Разноска** на экспресс-вкладке **Обновление запасов** в поле **Обновить запасы** выберите **Сводка**.</span><span class="sxs-lookup"><span data-stu-id="71075-295">Then, on the **Posting** tab, on the **Inventory update** FastTab, in the **Detail level** field, select **Summary**.</span></span>
    - <span data-ttu-id="71075-296">Перейдите в раздел **Retail и Commerce** \> **Настройка Headquarters** \> **Параметры** \> **Параметры Commerce**.</span><span class="sxs-lookup"><span data-stu-id="71075-296">Go to **Retail and Commerce** \> **Headquarters setup** \> **Parameters** \> **Commerce parameters**.</span></span> <span data-ttu-id="71075-297">Затем на вкладке **Разноска** на экспресс-вкладке **Агрегирование** задайте для параметра **Проводки по ваучеру** значение **Да**.</span><span class="sxs-lookup"><span data-stu-id="71075-297">Then, on the **Posting** tab, on the **Aggregation** FastTab, set the **Voucher transactions** option to **Yes**.</span></span>
