---
title: Настройка буферов запасов и уровней запасов
description: В этой теме объясняется, как настроить буферы запасов и уровни запасов, которые определяют сообщения о доступности запасов на сайта Microsoft Dynamics 365 Commerce.
author: boycezhu
manager: annbe
ms.date: 06/01/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.scope: Core, Operations, Retail
ms.search.region: global
ms.author: boycez
ms.search.validFrom: ''
ms.dyn365.ops.version: 10.0.12
ms.openlocfilehash: ef58dbb756c7bed3924010cb33eff27af66cd0bd
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/13/2020
ms.locfileid: "4415266"
---
# <a name="configure-inventory-buffers-and-inventory-levels"></a>Настройка буферов запасов и уровней запасов

[!include [banner](includes/banner.md)]

В этой теме объясняется, как настроить буферы запасов и уровни запасов, которые определяют сообщения о доступности запасов на сайта Microsoft Dynamics 365 Commerce.

## <a name="overview"></a>Обзор

Центральный офис Dynamics 365 Commerce хранит данные о запасах и различные каналы, такие как приложения POS, витрины магазина электронной коммерции и другие настраиваемые интегрированные приложения, которые извлекают и помещают запасы в асинхронном режиме. Таким образом, доступные значения запасов, полученные через страницу запасов в наличии в центральном офисе Commerce через интерфейс пользователя POS и через API доступности запасов для электронной коммерции, не всегда 100-процентно точны в реальном времени.

Вместо отображения фактических значений запасов на витринах магазина электронной коммерции многие розничные продавцы предпочитают показывать сообщения о статусе доступности запасов (например, "доступно" или "нет на складе"), чтобы информировать клиентов о доступности номенклатуры для покупки или потенциальном отсутствии на складе. Для такого подхода необходимо сделать создать и настроить буферы запасов и уровни запасов, определяющие доступность запасов.

## <a name="prerequisite-turn-on-the-inventory-buffers-and-inventory-levels-feature"></a>Необходимое условие: включите функцию буфера запасов и уровней запасов

Функция для буферов запасов и уровней запасов управляется с помощью управления функциями в центральном офисе Commerce. Чтобы включить функцию, выполните следующие действия.

1. Перейдите в раздел **Администрирование системы** \> **Рабочие области** \> **Управление функциями**.
1. Найдите функцию **Включить буферы запасов и уровни запасов**, выберите ее строку и нажмите кнопку **Включить**.

После включения функции можно найти уровни запасов в **Retail and Commerce \> Управление запасами**.

## <a name="create-and-configure-an-inventory-level-profile"></a>Создание и настройка профиля уровня запасов

*Профиль уровня запасов* определяет, будет ли данный статус количества продукта учитываться состоянии "в наличии", "нет на складе" или в каком-либо другом настраиваемом статусе. Можно создавать и настраивать несколько профилей уровней запасов для каждого юридического лица. Каждый профиль состоит из набора уровней запасов, и каждый уровень определяется *диапазоном*, *кодом* и *меткой*.

- **Диапазон** — каждый диапазон определяется *начальным количеством* и *конечным количеством*. Значение количества попадает в диапазон, если оно больше начального количества этого диапазона и не превышает конечное количество.
- **Код** — это внутренняя аббревиатура, представляющая уровень. Клиенты, непосредственно интегрированные с API запасов, могут использовать коды для создания дополнительной логики для данного уровня запасов. Например, они могут отключить возможность приобретения продукта, когда его код уровня запасов имеет значение **OOS** (нет на складе).
- **Метка** — это значимое сообщение для клиента, которое передает уровень запасов клиентам на сайте электронной коммерции.

### <a name="create-an-inventory-level-profile"></a>Создание профиля уровня запасов

Чтобы создать профиль уровня запасов, выполните следующие действия.

1. Перейдите **Retail and Commerce** \> **Управление запасами** \> **Уровня запасов**.
1. В области действий выберите **Создать**, а затем введите значения в поля **Код профиля** и **Описание**.
1. На экспресс-вкладке **Диапазоны** выберите **Добавить**, чтобы добавить новый уровень, а затем введите значения в столбцы **Начальное количество**, **Конечное количество**, **Код** и **Метка** для этого уровня. Повторите этот шаг для добавления дополнительных уровней. При необходимости можно изменить значения в сетке данных или выбрать **Удалить**, чтобы удалить уровень.
1. На панели операций выберите **Сохранить**.

При создании нового профиля автоматически инициализируются два уровня запасов:

- **OOS** — уровень "нет на складе", где нижняя граница диапазона — отрицательная бесконечность. Начальное количество и код невозможно изменить для этого уровня.
- **AVAIL** — уровень "доступно", где верхняя граница диапазона — бесконечность. Конечное количество и код невозможно изменить для этого уровня.

> [!NOTE]
> Между диапазонами в определении профиля не должно быть разрывов или перекрытий.

Можно использовать кнопку **Переводы** на панели операций для настройки локализованных строк для сообщения меток. Затем необходимо выполнить задание графика распределения **1110** (**Глобальная конфигурация**) для синхронизации локализованных строк с каналами.

### <a name="configure-an-inventory-level-profile"></a>Настройка профиля уровня запасов

Можно настроить профиль уровня запасов на уровне категории продукта или на уровне отдельного продукта. Если для продукта настроен профиль уровня запасов, уровень запасов определяется на основе диапазонов, определенных в связанном профиле. В противном случае уровень запасов "доступно" или "нет на складе" определяется в зависимости от того, имеется ли у продукта положительное количество в наличии.

Чтобы настроить профиль уровня запасов для категории, выполните следующие действия.

1. Перейдите в раздел **Retail and Commerce** \> **Продукты и категории** \> **Иерархия продукта Commerce**.
1. Выберите категорию, чтобы настроить профиль уровня запасов.
1. На экспресс-вкладке **Свойства продажи продукта** выберите юридическое лицо.
1. В разделе **Запасы Commerce** в поле **Профиль уровня запасов** выберите один из заранее определенных профилей уровня запасов.

Можно использовать кнопку **Обновить продукты** на панели действий для передачи значения профиля уровня категории в соответствующие продукты категории. Дополнительные сведения см. в разделе [Управление продуктами и категориями продуктов](category-management-product-creation.md).

Чтобы настроить профиль уровня запасов для выпущенного продукта, выполните следующие действия.

1. Перейдите в раздел **Retail and Commerce** \> **Продукты и категории** \> **Выпущенные продукты по категориям**.
1. Выберите продукт, а затем откройте страницу сведений о продукте.
1. На экспресс-вкладке **Продажа** в разделе **Запасы Commerce** в поле **Профиль уровня запасов** выберите один из заранее определенных профилей уровня запасов.

При создании нового продукта поле **Профиль уровня запасов**, как и во многих других атрибутах на уровня продукте, будет иметь значение, настроенное для категории, с которой связан продукт.

> [!NOTE]
> Профиль уровня запасов является атрибутом, относящимся к юридическому лицу. Для одной и той же категории или продукта значение профиля уровня запасов может различаться для разных юридических лиц.

Чтобы синхронизировать конфигурации профилей уровня запасов с каналами, выполните следующие действия.

1. Перейдите в раздел **Retail и Commerce** \> **ИТ Retail и Commerce** \> **График распределения**.
1. Запустите график распределения **1040** (**Продукт**).

## <a name="configure-an-inventory-buffer"></a>Настройка буфера запасов

*Буфер запасов* — это определяемое пользователем значение, которое вычитает дополнительное количество номенклатуры из исходного количества для расчета ожидаемого количества. Это ожидаемое количество дает розничным продавцам надежный буфер, что позволяет не перепродавать продукт (продавая его больше, чем есть в фактических запасах). Можно настроить буфер запасов на уровне категории продукта или на уровне отдельного продукта. Если буфер запасов не указан, используется значение по умолчанию **0** (ноль).

Чтобы настроить буфер запасов для категории, выполните следующие действия.

1. Перейдите в раздел **Retail and Commerce** \> **Продукты и категории** \> **Иерархия продукта Commerce**.
1. Выберите категорию, чтобы настроить буфер запасов.
1. На экспресс-вкладке **Свойства продажи продукта** выберите юридическое лицо.
1. В разделе **Запасы Commerce** в поле **Буфер запасов** введите положительное значение.

Можно использовать кнопку **Обновить продукты** на панели действий для передачи значения буфера уровня категории в соответствующие продукты категории. Дополнительные сведения см. в разделе [Управление продуктами и категориями продуктов](category-management-product-creation.md).

Чтобы настроить буфер запасов для выпущенного продукта, выполните следующие действия.

1. Перейдите в раздел **Retail and Commerce** \> **Продукты и категории** \> **Выпущенные продукты по категориям**.
1. Выберите продукт, а затем откройте страницу сведений о продукте.
1. На экспресс-вкладке **Продажа** в разделе **Запасы Commerce** в поле **Буфер запасов** введите положительное значение.

При создании нового продукта поле **Буфер запасов** будет иметь значение, настроенное для категории, с которой связан продукт.

> [!NOTE]
> Если для продукта настроены и буфер запасов, и профили уровня запасов, ожидаемое количество продукта (то есть, исходное количество минус значение буфера) будет использоваться для расчета диапазона, чтобы определить уровень запасов.

Чтобы синхронизировать конфигурации буферов запасов с каналами, выполните следующие действия.

1. Перейдите в раздел **Retail и Commerce** \> **ИТ Retail и Commerce** \> **График распределения**.
1. Запустите график распределения **1040** (**Продукт**).

## <a name="use-inventory-buffers-and-inventory-levels-in-e-commerce-scenario"></a>Использование буферов запасов и уровней запасов в сценарии электронной коммерции

Построитель сайтов Commerce использует функции буфера запасов и уровня запасов в центральном офисе Commerce для определения сообщений доступности запасов на сайтах электронной коммерции. Для получения дополнительной информации о см. раздел [Применение настроек запасов](inventory-settings.md).

Кроме того, при интеграции со сторонним решением электронной коммерции можно использовать API **GetEstimatedAvailability** и **GetEstimatedProductWarehouseAvailability** для отображения доступности запасов продукта в вашем сценарии электронной коммерции. Дополнительные сведения об этих API см. в разделе [Расчет наличия запасов для розничных каналов](calculated-inventory-retail-channels.md).

Появление буферов запасов и уровней запасов позволяет этим API возвращать коды уровня запасов и сообщения меток, которые определяются на основе общего доступного значения и доступного физического значения. Интерфейсы API можно дополнительно настроить, чтобы определить, будет ли количество запасов возвращено вместе с сообщением, и должно ли доступное количество уменьшаться на значение буфера запасов.

Чтобы настроить реакцию API на доступность продукта, выполните следующие действия.

1. Перейдите в раздел **Retail and Commerce** \> **Настройка центрального офиса** \> **Параметры** \> **Параметры Commerce**.
1. В разделе **Запасы магазина** на вкладке **Запасы** в поле **API доступности продукта для электронной коммерции** выберите значение.
1. Чтобы применить настройки к каналам, выполните задание графика распределения **1110** (**Глобальная конфигурация**).

## <a name="additional-resources"></a>Дополнительные ресурсы

[Управление продуктами и категориями продуктов](category-management-product-creation.md)

[Применение настроек запасов](inventory-settings.md)

[Расчет наличия запасов для розничных каналов](calculated-inventory-retail-channels.md)
