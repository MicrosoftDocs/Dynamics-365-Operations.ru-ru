---
title: Управление деловыми партнерами B2B с помощью иерархий клиентов
description: В этом разделе описывается, как использовать иерархии клиентов для управления деловыми партнерами для веб-сайтов электронной коммерции "бизнес-бизнес" (B2B) Microsoft Dynamics 365 Commerce.
author: josaw1
ms.date: 02/16/2022
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: RetailOperations
audience: Application User, IT Pro
ms.reviewer: v-chgriffin
ms.search.region: Global
ms.search.industry: retail
ms.author: josaw
ms.search.validFrom: 2021-01-31
ms.dyn365.ops.version: 10.0.14
ms.openlocfilehash: d6e594cbb824a8b823912118e99b819585adc45e
ms.sourcegitcommit: 8bcb9c13eccb14e61c39ca6578d135b64090fad2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2022
ms.locfileid: "8313836"
---
# <a name="manage-b2b-business-partners-using-customer-hierarchies"></a>Управление деловыми партнерами B2B с помощью иерархий клиентов

[!include [banner](../../includes/banner.md)]

В этом разделе описывается, как использовать иерархии клиентов для управления деловыми партнерами для веб-сайтов электронной коммерции "бизнес-бизнес" (B2B) Microsoft Dynamics 365 Commerce.

В Commerce Headquarters сущность *иерархия клиентов* используется для представления организаций деловых партнеров, которые будут использовать сайт электронной коммерции B2B. Перед тем как начать использовать иерархии клиентов для управления деловыми партнерами, необходимо включить возможности электронной коммерции B2B в Commerce Headquarters, а затем определить номерную серию для иерархии клиентов.

## <a name="enable-the-b2b-e-commerce-feature-in-commerce-headquarters"></a>Включение функции электронной коммерции B2B в Commerce Headquarters

Чтобы использовать возможности электронной коммерции B2B, необходимо сначала включить функцию **Включить использование возможностей электронной коммерции B2B** в Commerce Headquarters.

1. Перейдите в раздел **Рабочие области \> Управление функциями**.
1. На вкладке **Все** используйте поле фильтра для поиска пункта **Модуль: Retail и Commerce**.
1. Найдите функцию **Разрешить использование возможностей электронной коммерции B2B**, выберите ее, затем выберите **Включить сейчас** в правом нижнем углу.

## <a name="define-a-number-sequence-for-the-customer-hierarchy"></a>Определение номерной серии для иерархии клиентов

Номерные серии используются для создания четких уникальных кодов для записей справочника и записей проводок, для которых требуются коды. Необходимо определить номерную серию, которая будет использоваться для создания кода для иерархии клиентов. Дополнительные сведения о номерных сериях см. в разделе [Обзор номерных серий](/dynamics365/fin-ops-core/fin-ops/organization-administration/number-sequence-overview).

Чтобы определить номерную серию для иерархии клиентов в Commerce headquarters, выполните следующие действия.

1. Перейдите в раздел **Retail и Commerce \> Настройка центрального офиса \> Номерные серии \> Номерные серии**.
1. Создайте новую номерную серию или выберите существующую номерную серию, чтобы использовать ее повторно.
1. Перейдите в раздел **Retail и Commerce \> Настройка Headquarters \> Параметры \> Общие параметры Commerce**.
1. На вкладке **Номерные серии** добавьте номерную серию, созданную или выбранную ранее, в ссылку **Код иерархии клиента**.

![Номерная серия, добавленная к ссылке на код иерархии клиентов.](../media/NumberSequenceCustHierarchy.png)

## <a name="how-the-approval-process-works"></a>Как работает процесс утверждения

Когда деловой партнер запрашивает присоединение к сайту электронной коммерции B2B, система сохраняет запрос как *перспективный клиент*. Персонаж Commerce headquarters, такой как менеджер розничных операций, может утверждать или отклонять запросы партнеров. Дополнительные сведения об управлении запросами деловых партнеров и утверждением перспективных клиентов см. в разделе [Управление пользователями-деловыми партнерами на веб-сайтах электронной коммерции B2B](manage-b2b-users.md).

Когда перспективный клиент утверждается, система создает две новые записи клиента:

- Одна запись клиента типа **Организация** представляет организацию, которая хочет стать деловым партнером.
- Одна запись клиента типа **Физическое лицо** представляет человека, который отправил запрос.

Кроме того, новая запись иерархии клиентов создается в пункте **Retail и Commerce \> Клиенты \> Иерархии клиентов**. Эта запись иерархии клиентов имеет следующие свойства:

- **Код иерархии клиентов** — уникальный код иерархии клиентов. Этот код использует номерную серию, которая определена в общих параметрах Commerce.
- **Имя** — название организации делового партнера, как указано в запросе на подключение. Это поле может редактироваться.
- **Назначение** — для этого свойства устанавливается предопределенное значение **Организация B2B**.
- **Организация** — код клиента организации делового партнера.

Лицо, отправившего запрос на подключение, добавляется на экспресс-вкладке **Иерархия**, и ему назначается роль **Администратор**. По мере того как администратор добавляет больше пользователей к организации делового партнера на сайте B2B, создается новая запись клиента для каждого пользователя. Эта запись клиента также добавляется к соответствующей записи иерархии клиентов для делового партнера, и ей назначается роль **Пользователь**.

### <a name="examples"></a>Примеры

Лицо с именем SAM J. посылает запрос на подключение от имени компании Майкрософт. После утверждения запроса создаются две новых учетных записи клиентов: одна типа **Физическое лицо** для Sam J., и одна типа **Организация** для Microsoft.

Как показано в примере на следующем рисунке, также создается новая запись иерархии клиентов. Эта запись имеет то же имя, что и организация (**Microsoft**), а роль **Администратор** назначается пользователю SAM J. Как администратор, SAM J. добавляет в эту иерархию любых других пользователей сайта B2B в корпорации Майкрософт и назначает им роль **Пользователь**. В этом примере Sush R. был добавлен в качестве пользователя.

![Пример записи иерархии клиентов.](../media/CustomerHierarchy2.png)

Чтобы определить, связан ли клиент с иерархией клиентов, откройте запись клиента. Как показано на следующем рисунке, поле **Код иерархии клиентов** в разделе **B2B** на экспресс-вкладке **Розничная торговля** показывает, является ли клиент частью иерархии клиентов, а параметр **Администратор B2B** указывает, является ли данный клиент администратором этой иерархии.

![Пример раздела B2B на экспресс-вкладке "Розничная торговля" записи клиента, в которой клиент связан с иерархией и указан как администратор.](../media/CustomerHierarchyMapping2.png)

В большинстве случаев должны совпадать значения свойств всех записей клиентов в иерархии. Например, так как все пользователи делового партнера должны получить аналогичные цены для продуктов, их ценовая группа и соответствующие конфигурации должны совпадать. Однако система не обеспечивает принудительно такую согласованность. Таким образом, соответствующие пользователи Commerce headquarters несут ответственность за обеспечение соответствия значений и конфигураций свойств для всех клиентов в определенной иерархии.

Пользователи Commerce headquarters могут проверить значения свойств для всех записей клиентов в иерархии в параллельном режиме. Как показано в примере на следующем рисунке, можно использовать параметр **Общие** в раскрывающемся списке на экспресс-вкладке **Иерархия**, а затем выбрать любой раздел записи клиента, чтобы отобразить связанные свойства. Пользователи могут редактировать значения свойств напрямую в этом представлении. Чтобы скопировать все значения из записи клиента-администратора для всех пользователей, выберите **Переопределить** на экспресс-вкладке **Иерархия**.

![Пример записи иерархии клиентов, показывающий кнопку переопределения и параметр в раскрывающемся списке.](../media/HierarchyDetails2.png)

[!include [footer-include](../../includes/footer-banner.md)]
