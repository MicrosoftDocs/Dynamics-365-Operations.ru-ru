---
title: Выполнение заказов магазинами
description: В этом разделе представлен обзор исполнения заказов магазинами.
author: rubencdelgado
manager: AnnBe
ms.date: 10/30/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailStoreTable, RetailTillLayout
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: Global
ms.search.industry: retail
ms.author: rubencdelgado
ms.search.validFrom: 2017-10-30
ms.dyn365.ops.version: ''
ms.openlocfilehash: 74347e06dec8517145e79f77f553970324757128
ms.sourcegitcommit: 81a647904dd305c4be2e4b683689f128548a872d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/01/2020
ms.locfileid: "3023756"
---
# <a name="store-order-fulfillment"></a>Выполнение заказов магазинами

[!include [banner](includes/banner.md)]

Многим компании розничной торговли хотели бы оптимизировать выполнение заказов, разрешив магазинам выполнять заказы. Выполнение заказов на уровне магазинов может помочь упростить ослабить сценарии избыточных запасов для конкретного магазина или может требоваться с точки зрения логистики в случаях, когда магазин имеет дополнительную емкость или находится ближе к клиенту для доставки. Для удовлетворения этой потребности единая операция выполнения заказа доступна на POS-терминале.

Заказы для выполнения в конкретном магазине имеют склад магазина, указанный в заголовке или строках заказа.

Операция исполнения заказа в POS-терминале обеспечивает единую рабочую область в POS-терминале, которая может использоваться для обработки заказов. Это включает все, от приема заказа до пометки его как отгруженного или инициализации самовывоза из магазина.

## <a name="access-unified-order-fulfillment-in-the-point-of-sale"></a>Доступ к единому выполнению заказа в POS-терминале

Выполнение заказов, [код операции 928](https://docs.microsoft.com/dynamics365/unified-operations/retail/pos-operations), можно использовать для доступа к рабочей области выполнения заказа в магазине в POS-терминале.

Операция выполнения заказа не имеет собственного готового разрешения, но в будущем пользователи смогут использовать разрешение **Разрешить получение заказа** для вызова операции из POS-терминала.

На уровне магазина доступна настройка конфигурации для определения того, должна ли строка заказа быть принята вручную из POS-терминала. Если этот параметр конфигурации не задан, строки заказа будут приняты по умолчанию. Если этот параметр конфигурации включен, пользователи на POS-терминале должны будут выбрать разрешение **Разрешить принимать заказ** для приема заказов из POS-терминала.

Строки заказа также могут быть отклонены из POS-терминала. Отклонение строки заказа означает, что она не будет выполнена в этом магазине, и эта строка заказа отправляется обратно для назначения другому магазину или складу. Разрешение на отклонение строки заказа предоставляется с помощью разрешения **Разрешить отклонение заказа**.

## <a name="order-fulfillment-operation-parameters"></a>Параметры операции выполнения заказа

Выполнение заказов предоставляет готовые параметры, которые могут быть применены к операции, когда она вызывается в POS-терминале. Если настроен параметр **Все заказы**, при использовании операции отображаются все заказы. Параметр **Заказы для отгрузки** отображает только заказы, которые должны быть отгружены из магазина, а параметр **Заказы для самовывоза** отображает заказы, которые клиенты сами заберут в магазине.

## <a name="orders-for-fulfillment"></a>Заказы для выполнения

Операция выполнения заказов показывает только те заказы, которые клиенты заберут из текущего магазина или которые будут отгружены из него. Заказы для выполнения в других магазинах не отображаются при использовании операции выполнения заказов.

## <a name="line-selection"></a>Выбор строк

Строки могут быть выбраны с помощью функции **Выбрать** в области действий. Если функция **Выбрать** включена, можно выбрать несколько строк для обработки. Можно очистить выбранные строки, снова щелкнув в той же строке.

## <a name="line-details"></a>Сведения по строке

Сведения о строке могут отображаться с использованием всплывающего меню подробных сведений по строке. При использовании этого меню предусмотрены три вкладки для отображения дополнительных сведений для выбранной строки. Первая вкладка, **Сведения по строке**, отображает подробные сведения для самой строки, такие как заказанное и оставшееся количество. Представлены дополнительные сведения, включая количество скомплектованных, упакованных и имеющих выставленные накладные, а также способ доставки и адрес доставки. Вкладка **Сведения о заказе** содержит сведения заголовка заказа, включая клиента, код клиента, номер заказа, итоговая сумма по заказу и сальдо. На вкладке **Запасы** отображаются сведения для выбранной строки с точки зрения физических запасов, зарезервированных запасов и заказанных запасов.

Если выделено несколько строк, всплывающее меню подробных сведений по строке заказа только покажет, что выбрано несколько строк. Чтобы отобразить подробные сведения об одной строке, отмените выбор строк, пока не останется только одна строка.

## <a name="pending-order-lines"></a>Строки заказа, ожидающие обработки

Единое выполнение заказов включает возможность принятия заказов вручную. По умолчанию заказы для выполнения в магазине уже приняты. Однако если бизнес-процессы определяют, что работник на уровне магазина должен принять заказы, можно включить принятие вручную на уровне розничного магазина. Чтобы включить принятие заказов, перейдите к **Retail и Commerce** \> **Каналы** \> **Магазины** \> **Все магазины**. Откройте нужный магазин и на вкладке **Общие** найдите подзаголовок **Выполнение заказов**. Этот подзаголовок имеет параметр **Принять вручную**, который имеет значение **Нет** по умолчанию. Если установить для этого параметра значение **Да** и выполнить синхронизацию изменений в базе данных канала, строки заказа могут проходить через процесс принятия.

Работники с разрешением **Разрешить принимать заказы** могут открыть выполнения заказа и выбрать строки для принятия. После принятия строк их состояние изменится с **Ожидание** на **Принято**, и может быть выполнена остальная часть процесса выполнения заказа. Если параметр **Принять вручную** включен, заказы не будет обработаны, пока они не будут приняты.

Заказы для комплектации в магазине никогда не находятся в состоянии **Ожидание**. Это позволяет избежать сценария, в котором клиент пришел в магазин, а строка заказа не может быть обработана из-за отсутствия работника с должным уровнем привилегий.

## <a name="accepted-order-lines"></a>Принятые строки заказов

Заказы с состоянием строки **Принято** могут быть обработаны в остальной части процесса исполнения заказов на POS-терминале. После принятия заказа для строки заказа можно выполнять любые оставшиеся действия.

Например, строку принятого заказа можно выбрать, а затем скомплектовать непосредственно, минуя этапы комплектации и упаковки.

## <a name="line-actions"></a>Действия строки

### <a name="pick"></a>Комплектация

Категория действий **Укомплектовать** позволяет обеспечить поддержку процесса комплектации строк заказа с полок. Действие комплектации может выполняться только в строках заказа, которые были приняты ранее.

**Действие: Укомплектовать**

- **Итоговое состояние POS-терминала:** Комплектация
- **Итоговое состояние бэк-офиса:** без изменений

После принятия заказа строки можно выбирать и помечать как **Комплектация**. Пометка строки как **Комплектация** позволяет указать, что для строки уже выполняется работа по комплектации. Это исключает ситуацию, когда одновременно два работника будут пытаться скомплектовать строки заказа.

**Действие: Печать отгрузочной накладной**

- **Итоговое состояние:** Комплектация
- **Итоговое состояние бэк-офиса:** без изменений

Листы комплектации могут быть напечатаны на POS-терминале, чтобы помощь работникам, выполняющим процесс комплектации. Напечатанный лист комплектации должен иметь при себе работник, выполняющий комплектацию, и по мере комплектации продуктов этот работник вручную отмечает их как скомплектованные в листе комплектации.

Формат листа комплектации настраивается в Commerce и добавляется в профиль чеков. Дополнительные сведения о настройке профилей чеков см. в разделе [Шаблоны и печать чеков](https://docs.microsoft.com/dynamics365/unified-operations/retail/receipt-templates-printing).

Если выбраны строки и для этих строк напечатан лист комплектации, их статус автоматически изменяется на **Комплектация**.

**Действие: Пометить как скомплектованные**

- **Итоговый статус:** Скомплектовано или частично скомплектовано
- **Итоговый статус бэк-офиса:** Скомплектовано или частично скомплектовано

После выполнения процесса физической комплектации строки можно отметить как **Скомплектовано**. При выборе строки и пометке ее как **Скомплектовано** выполняется вызов в реальном времени для обновления строки заказа. После того как строка был помечена как **Скомплектовано** в POS-терминале, статус в бэк-офисе также обновляется на **Скомплектовано** и складские проводки отражают, что указанное количество было уменьшено.

При обработке заказов со временем частичные количества могут быть обработаны для конкретной строки. Если выбрана строка и выбрано действие **Пометить как скомплектованные**, а количество больше единицы, пользователю предлагается ввести количество. Оставшееся количество, которое необходимо скомплектовать, заполняется автоматически. Если указано количество, меньше оставшегося, статус строки становится **Частично скомплектовано**. При обновлении строки заказа в бэк-офисе она также будет отражать частичной скомплектованный статус, а количество, введенное пользователем, используется для обновления запасов.

Если по ошибке комплектуется строка заказа, процесс отмены комплектации должен быть выполнен для строки заказа в бэк-офисе. В настоящее время нет действия отмены комплектации, поддерживаемого на POS-терминале.

Строки заказов из разных заказов можно выбрать и пометить как **Комплектация**, напечатать в одном листе комплектации или пометить как **Скомплектовано**.

### <a name="pack"></a>Упаковка

Строки заказа могут быть упакованы в любой момент после принятия строки заказа.

**Действие: Печать отборочной накладной**

- **Итоговый статус:** Упаковано или частично упаковано
- **Итоговый статус бэк-офиса:** Доставлено или частично доставлено

Это действие помечает строки как упакованные или частично упакованные и печатает отборочную накладную. Отборочная накладная может печататься для проверки продуктов, которые упакованы вместе. Формат отборочной накладной настраивается в Commerce и добавляется в профиль чеков. Дополнительные сведения о настройке профилей чеков см. в разделе [Шаблоны и печать чеков](https://docs.microsoft.com/dynamics365/unified-operations/retail/receipt-templates-printing).

**Действие: Пометить как упакованные**

- **Итоговый статус:** Упаковано или частично упаковано
- **Итоговый статус бэк-офиса:** Доставлено или частично доставлено

Действие **Пометить как упакованные** может использоваться, чтобы указать, что строки упакованы без печати отборочной накладной. Оба действия **Печать отборочной накладной** и **Пометить как упакованные** приводят к выполнению складских проводок в бэк-офисе. Упаковка строк в POS-терминале приведет к созданию журналов отборочных накладных в бэк-офисе.

Если строка заказа упаковывается по ошибке, журнал отборочных накладных должен быть исправлен в бэк-офисе.

Только строки из одного заказа и с одинаковым способом доставки могут быть упакованы одновременно.

В настоящее время возможность пометить строки, скомплектованные в магазине, как **Упакованные**, отключена. Эта возможность будет добавлена в будущем выпуске. Процесс создания отборочной накладной будут улучшен для поддержки введения информации о доставке третьей стороной в процесс отборочной накладной.

### <a name="pick-up"></a>Вывоз

Заказы для самовывоза из магазина можно забрать сразу после их извлечения в POS-терминале. Заказы для самовывоза из магазина не подлежат приемке.

**Действие: Самовывоз**

- **Итоговый статус:** выставлены накладные или частично выставлены накладные
- **Итоговый статус бэк-офиса:** выставлены накладные или частично выставлены накладные

Если строка выбрана для самовывоза из единого выполнения заказов, весь заказ загружается в POS-терминал и помечается полное количество для выбранной строки. Другие строки в заказе также загружаются в представление транзакций POS-терминала, но с количеством, отмеченным как ноль.

После загрузки строк для самовывоза в представление проводок эту проводку можно оплатить обычным образом.

Строки, для которых были полностью выставлены счета с помощью самовывоза, больше не будет отображаться в единой обработке заказов. Строки, которые были частично скомплектованы, будет продолжать отображаться в едином выполнении заказов до их комплектации в полном объеме.

Если строка скомплектована по ошибке, для исправления ошибки необходимо выполнить возврат.

Только строки из одного заказа и с одинаковым способом доставки могут быть вывезены одновременно.

### <a name="shipping"></a>Отгрузка

Строки заказа для отгрузки из магазина могут обрабатываться через единое выполнение заказов с помощью действия **Отгрузить**. Если на уровне канала настроена приемка строки заказа вручную, заказы необходимо принять перед отгрузкой. После того как строка заказ была принята и имеет статус **Ожидание** или другой статус, строки могут быть отгружены.

**Действие: Отгрузить**

- **Итоговый статус:** выставлены накладные или частично выставлены накладные
- **Итоговый статус бэк-офиса:** выставлены накладные или частично выставлены накладные

Накладные за строки, отгруженные из единого выполнения заказов, выставляются из бэк-офиса аналогично тому, как если бы накладная за заказ выставлялась непосредственно из бэк-офиса. Строки, отгружаемые из единого выполнения заказов, не загружаются в представлении проводки, и их оплата не выполняется во время отгрузки строки.

Строки заказа, которые были полностью отгружены, больше не отображаются в едином выполнении заказов. Частично отгруженные строки будет продолжать отображаться в едином выполнении заказов до их отгрузки в полном объеме.

Только строки из одного заказа могут быть отгружены одновременно. Если строки из одного заказа имеют разные способы поставки, их все равно можно выбрать для отгрузки одновременно.

### <a name="reject"></a>Отклонить

Можно отклонить строки или частичные строки. Это позволит заново назначить их из бэк-офиса другому магазину или складу. Строки могут быть отклонены только в том случае, если они еще не были скомплектованы или упакованы. Чтобы отклонить строку, которая уже скомплектована или упакована, комплектацию или упаковку этой строки необходимо отменить из бэк-офиса.

**Действие: Отклонить**

- **Итоговый статус:** Отклонена
- **Итоговое состояние бэк-офиса:** без изменений

Можно просмотреть отклоненные строки заказа в рабочей области **Обработка и запрос заказов на продажу**. Очистите персональный фильтр в рабочей области для просмотра всех отклоненных строк заказов по всем магазинам. На вкладке **Отклоненные строки заказов** в разделе **Заказы и избранное** отображаются сведения о строках заказов. Кроме того, пользователь может щелкнуть кнопку **Отклоненные строки заказов** в разделе **Сводка**, чтобы перейти к представлению заказа на продажу. При этом отображаются все заказы, которые имеют одну или несколько отклоненных строк заказа. Если включено распределенное управление заказами (DOM), то эти отклоненные заказы будут автоматически переназначены на исполнение соответствующим магазинам, однако эти строки заказов можно также переназначить вручную. Чтобы сделать это, выберите строку, в которой **Статус выполнения** имеет значение **Отклонено** и требуемым образом измените сайт или склад. Щелкните раскрывающееся меню **Обновить строку** и щелкните **Сбросить статус выполнения** для изменения статуса выполнения с **Отклонено** на **Принято** или **Ожидает**, в зависимости от настройки выполнения заказа. После сброса статуса выполнения работники магазина смогут просмотреть строки заказа в POS-терминале.

## <a name="line-quantity-tracking"></a>Отслеживание количества по строке

Одна строка заказа с количеством, превышающим единицу, может быть обработана постепенно, что приведет к появлению нескольких промежуточных состояний для строк заказа. Например, если у строителя есть проект, для которого требуется 500 досок, но строитель забирает или ему доставляется по несколько досок за раз в течение всего проекта, то могут одновременно существовать количества, которые в процессе комплектации, упакованы и отгружены.

Каждый раз, когда выбрана строка, оставшаяся сумма для строки будут заполнена автоматически в предположении, что обрабатывается оставшееся количество. В приведенном выше примере, если 200 досок уже были скомплектованы, и строка для досок выбирается для комплектации, оставшееся количество 300 будет автоматически внесено в поле количества. Это же справедливо, если уже выставлены счета за 200 досок. В этом случае только оставшееся количество будет автоматически заполнено.

Продолжая с приведенным выше примером, если 200 досок помечены как упакованные и выбрана доставка, будет автоматически заполнена вся сумма в 500 штук. Если только 200 досок отгружены, система предполагает, что ранее упакованные доски отгружаются, и упакованное количество будет уменьшено. Если 201 доска отгружена, сначала уменьшается количество упакованных досок, а оставшаяся одна доска вычитается из оставшегося количества.

## <a name="line-statuses"></a>Статусы строки

Строки заказа в POS-терминале имеют несколько состояний для отражения состояния строки заказа. Статусы в POS-терминале и бэк-офисе совпадают не во всех случаях. Статус строки заказа можно просмотреть через POS-терминал с помощью операций выполнения заказа. В бэк-офисе можно просмотреть строки заказа из сведений о заказе. Сведения о заказе можно открыть с помощью **Retail и Commerce** \> **Клиенты** \> **Все заказы клиентов**. Выберите **Код заказа** для просмотра сведений о заказе. В сведениях о заказе выберите вкладку **Заказ на продажу**, затем выберите **Подробный статус** под подзаголовком **Показать**.

- **Ожидает** — строки заказа, которые были назначены магазину, но еще не приняты им, имеют статус **Ожидает** при просмотре на POS-терминале. Строки, ожидающие приема в POS-терминале, будут иметь статус **Обработка заказа** в бэк-офисе.
- **Принято** — строки заказа, которые были приняты вручную или автоматически, будут иметь статус **Принято** при просмотре на POS-терминале. Строки со статусом **Принято** будут отображаться как **Обработка заказа** в бэк-офисе.
- **Комплектация** — строки, которые в настоящее время в процессе комплектации на уровне магазина, имеют статус **Комплектация**. Эти же строки при просмотре из бэк-офиса будут показаны как **Обработка заказов**.
- **Скомплектовано** и **Частично скомплектовано** — строки, которые были скомплектованы или частично скомплектованы на POS-терминале, будут иметь статус **Скомплектовано** или **Частично скомплектовано**. Эти же строки в бэк-офисе будут показаны как **Скомплектовано** или **Частично скомплектовано**.
- **Упаковано** и **Частично упаковано** — строки, которые были упакованы или частично упакованы на POS-терминале, будут иметь статус **Упаковано** или **Частично упаковано**. Эти же строки в бэк-офисе будут показаны как **Доставлено** или **Частично доставлено**.
- **Частично выставлены накладные** — строки, которые были частично скомплектованы или частично отгружены, будут иметь статус **Частично выставлены накладные** на POS-терминале и в бэк-офисе.
- **Выставлен счет** — строки, за которые был полностью выставлен счет на POS-терминале, больше не будет отображаться для выполнения. В бэк-офисе эти строки имеют статус **Выставлен счет**.

## <a name="order-fulfillment-filtering"></a>Фильтрация выполнения заказов

Выполнение заказов на POS-терминале включает в себя фильтрацию, чтобы помочь пользователю быстро найти то, что им нужно. Фильтры можно изменить с помощью панели операций в нижней части экрана **POS**. По умолчанию применен фильтр **Тип доставки**, в зависимости от того, как настроена операция. Если операция настроена с параметром **Все заказы**, то этот фильтр применяется при доступе к выполнению заказов. Это справедливо и для параметров **Самовывоз из магазина** и **Доставка из магазина**. Другие фильтры, которые могут быть применены к представлению выполнения заказов:

- Номер клиента
- Наименование Клиента
- Адрес электронной почты клиента
- Порядковый номер
- Способ поставки
- Номер прихода
- Код ссылки на канал
- Номер исходного магазина
- Статус строки
- Дата создания
- Дата поставки
- Дата прихода
