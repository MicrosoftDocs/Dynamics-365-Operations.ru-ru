---
title: Настройка дополнительных функций среды предварительной версии Dynamics 365 Commerce
description: В этой теме объясняется, как настроить дополнительные функции для среды предварительного просмотра Microsoft Dynamics 365 Commerce.
author: psimolin
manager: annbe
ms.date: 12/10/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application user
ms.reviewer: v-chgri
ms.search.scope: Operations, Retail, Core
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: psimolin
ms.search.validFrom: 2019-12-10
ms.dyn365.ops.version: Release 10.0.5
ms.openlocfilehash: 4b17f8e9b0d8a9a62714d0073561e66642b2eaf9
ms.sourcegitcommit: 12b9d6f2dd24e52e46487748c848864909af6967
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2020
ms.locfileid: "3057748"
---
# <a name="configure-optional-features-for-a-dynamics-365-commerce-preview-environment"></a>Настройка дополнительных функций среды предварительной версии Dynamics 365 Commerce


[!include [banner](includes/banner.md)]

В этой теме объясняется, как настроить дополнительные функции для среды предварительного просмотра Microsoft Dynamics 365 Commerce.

## <a name="prerequisites"></a>Необходимые условия

Если необходимо оценить возможности обработки электронной почты по проводкам, необходимо обеспечить соблюдение следующих условий:

- Имеется доступный сервер электронной почты (Simple Mail Transfer Protocol, \[SMTP\]-сервер), который может использоваться в подписке Microsoft Azure, в которой пользователь подготовил среду предварительной версии.
- Имеется полное доменное имя (FQDN)/IP-адрес сервера, номер порта SMTP и сведения об аутентификации.

Если вы хотите оценить функции управления цифровыми активами, получив новые изображения многоканального взаимодействия, у вас должно быть имя клиента своей системы управления контентом (CMS). Инструкции по поиску этого имени приведены позже в этой теме. >>>(В: где найти инструкции?)

## <a name="configure-the-image-back-end"></a>Настройка серверной части изображений

### <a name="find-your-media-base-url"></a>Поиск базового URL-адреса мультимедиа

> [!NOTE]
> Прежде чем вы сможете завершить эту процедуру, вы должны завершить шаги в разделе [Настройка сайта в Commerce](cpe-post-provisioning.md#set-up-your-site-in-commerce).

1. Войдите в инструмент управления сайтом Commerce, используя URL-адрес, который вы записали при инициализации электронной коммерции во время подготовки (см. [Инициализация электронной коммерции](provisioning-guide.md#initialize-e-commerce)).
1. Откройте сайт **Fabrikam**.
1. Выберите **Активы** в меню слева.
1. Выберите любой один актив изображения.
1. В инспекторе свойств справа найдите свойство **Общедоступный URL-адрес**. Значение — это URL-адрес. Рассмотрим пример:

    `https://images-us-sb.cms.commerce.dynamics.com/cms/api/fabrikam/imageFileData/MA1nQC`.

1. Замените последний идентификатор в URL-адресе (**MA1nQC** в предыдущем выше) следующей строкой: **search?fileName=**. Вот как выглядит URL-адрес примера после этого изменения:

    `https://images-us-sb.cms.commerce.dynamics.com/cms/api/fabrikam/imageFileData/search?fileName=`

    Этот URL-адрес является базовым URL-адресом мультимедиа. Запишите его.

### <a name="update-the-media-base-url"></a>Обновление базового URL-адреса мультимедиа

1. Войдите в Dynamics 365 Commerce.
1. Используя меню в левой части, перейдите к пункту **Модули \> Retail и commerce \> Настройка канала \> Профили канала**.
1. Выберите **Правка**.
1. В пункте **Свойства профиля** замените значение свойства для пункта **Базовый URL-адрес сервера мультимедиа** значением базового URL-адрес мультимедиа, созданным ранее.
1. Выберите другой канал из списка слева в области канала **По умолчанию**.
1. В разделе **Свойства профиля** выберите **Добавить**.
1. Для добавленного свойства выберите **Базовый URL-адрес сервера мультимедиа** в качестве ключа свойства. Как значение свойства введите базовый URL-адрес мультимедиа, созданный ранее.
1. Нажмите **Сохранить**.

## <a name="configure-the-email-server"></a>Настройка сервера электронной почты

> [!NOTE]
> Вводимый SMTP-сервер или служба электронной почты должны быть доступны в подписке Azure, используемой для среды.

1. Вход в Commerce.
1. Используя меню в левой части, перейдите к пункту **Модули \> Администрирование системы \> Настройка \> Эл. почта \> Параметры электронной почты**.
1. На вкладке **Параметры SMTP** в поле **Сервер исходящей почты** введите FQDN или IP-адрес вашего сервера SMTP или службы электронной почты.
1. В поле **Номер порта SMTP** введите номер порта. (Если вы не используете Secure Sockets Layer \[SSL\], номер порта по умолчанию **25**.)
1. Если требуется аутентификация, введите значения в полях **Имя пользователя** и **Пароль**.
1. Нажмите **Сохранить**.
1. Выберите **Обновить**.
1. На вкладке **Тестовое сообщение электронной почты** в поле **Поставщик электронной почты** выберите **SMTP**.
1. В поле **Кому отправить** введите адрес электронной почты, по которому необходимо доставить проверочное сообщение.
1. Выберите **Отправить тестовое сообщение электронной почты**.

## <a name="configure-email-templates"></a>Настройка шаблонов электронной почты

Для каждого события, по которому необходимо отправить электронную почту, необходимо обновить шаблон электронной почты с помощью действительного адреса электронной почты отправителя.

1. Вход в Commerce.
1. Используя меню в левой части, перейдите к пункту **Модули \> Администрирование организации \> Настройка \> Шаблоны сообщений электронной почты организации**.
1. Выберите **Показать список**.
1. Для каждого шаблона в списке выполните следующие действия.

    1. В поле **Электронная почта отправителя** введите адрес электронной почты отправителя.
    1. Дополнительно: в поле **Имя отправителя** введите имя, которое должно быть использовано в качестве имени отправителя.

1. Нажмите **Сохранить**.

## <a name="customize-email-templates"></a>Настройка шаблонов электронной почты

Возможно, вы захотите настроить шаблоны электронной почты таким образом, чтобы они использовали различные изображения. Или вы можете обновить ссылки в шаблонах, чтобы они переходили к вашей среде предварительного просмотра. В этой процедуре объясняется, как загрузить шаблоны по умолчанию, настроить их и обновить шаблоны в системе.

1. В веб-браузере загрузите [ZIP-файл шаблонов электронной почты по умолчанию для предварительной версии Microsoft Dynamics 365 Commerce](https://download.microsoft.com/download/d/7/b/d7b6c4d4-fe09-4922-9551-46bbb29d202d/Commerce.Preview.Default.Email.Templates.zip) на локальный компьютер. Этот файл содержит следующие HTML-документы:

    - Шаблон подтверждения заказа
    - Шаблон выдачи подарочной карты
    - Шаблон создания заказа
    - Шаблон заказа на упаковку
    - Шаблон заказа на комплектацию

1. Настройте шаблоны с помощью текстового редактора или текста HTML. См. список [поддерживаемых токенов](#supported-tokens-in-the-email-template) позже в этой теме.
1. Вход в Commerce.
1. Используя меню в левой части, перейдите к пункту **Модули \> Администрирование организации \> Настройка \> Шаблоны сообщений электронной почты организации**.
1. Разверните список слева, чтобы просмотреть все шаблоны.
1. Для каждого шаблона, который вы хотите настроить, выполните следующие действия:

    1. Выберите шаблон из списка.
    1. В разделе **Содержимое сообщения электронной почты** выберите нужную языковую версию из списка. (Язык по умолчанию — **en-us**.)
    1. В **Содержимое сообщения электронной почты**, выберите **Правка**. Отображается панель **Отправка шаблона сообщения электронной почты**.
    1. Выберите **Обзор** и найдите HTML-файл с настраиваемым контентом.
    1. Выберите **Отправить**. Шаблон отправляется в систему, и будет показан предварительный просмотр.
    1. Нажмите **ОК**.
    1. Необязательно: настройте свойство **Тема** шаблона.
    1. Нажмите **Сохранить**.

### <a name="supported-tokens-in-the-email-template"></a>Поддерживаемые маркеры в шаблоне электронной почты

Эти токены будут заменены во время обработки электронной почты фактическими значениями, которые применяются к клиенту и его заказу.

#### <a name="sales-order"></a>Заказ на продажу

Следующие маркеры применяются ко всему заказу на продажу.

| Наименование маркера | Маркер |
|-------------------|-------|
| Номер приказа      | %salesid% |
| Имя клиента   | %customername% |
| Адрес поставки  | %deliveryaddress% |
| Адрес выставления счета   | %customeraddress% |
| Дата заказа        | %shipdate% |
| Способ поставки     | %modeofdelivery% |
| Скидка          | %discount% |
| Налог         | %tax% |
| Итог по заказу       | %total% |

#### <a name="sales-line"></a>Строка продажи

Следующие маркеры заменяются значениями для каждого продукта в заказе.

> [!NOTE]
> Поместите токен **Список продуктов — начало** в начало HTML-блока, который повторяется для каждого продукта, и поместите токен **Список продуктов — конец** в конец блока.

| Наименование маркера      | Маркер |
|------------------------|-------|
| Список продуктов — начало   | \<!--%tablebegin.salesline% --\> |
| Список продуктов — конец     | \<!--%tableend.salesline%--\> |
| Наименование продукта           | %lineproductname% |
| Описание            | %lineproductdescription% |
| Количество               | %linequantity% |
| Цена за единицу в строке        | %lineprice% (verify) |
| Итого по номенклатуре строки        | %linenetamount% |
| скидка по строке          | %linediscount% |
| Дата отгрузки              | %lineshipdate% |
| Способ закупки     | %linedeliverymode% |
| адрес поставки       | %linedeliveryaddress% |
| Единица измерения продаж для строки | %lineunit% |

## <a name="additional-resources"></a>Дополнительные ресурсы

[Обзор среды предварительной версии Dynamics 365 Commerce](cpe-overview.md)

[Обеспечение среды предварительной версии Dynamics 365 Commerce](provisioning-guide.md)

[Настройка среды предварительной версии Dynamics 365 Commerce](cpe-post-provisioning.md)

[Вопросы и ответы по среде предварительной версии Dynamics 365 Commerce](cpe-faq.md)

[Microsoft Lifecycle Services (LCS)](https://docs.microsoft.com/dynamics365/unified-operations/dev-itpro/lifecycle-services/lcs-user-guide)

[Retail Cloud Scale Unit (RCSU)](https://docs.microsoft.com/business-applications-release-notes/october18/dynamics365-retail/retail-cloud-scale-unit)

[Портал Microsoft Azure](https://azure.microsoft.com/features/azure-portal)

[Веб-сайт Dynamics 365 Commerce](https://aka.ms/Dynamics365CommerceWebsite)
