---
title: Влияние расширяемости каталогов Commerce для настроек B2B
description: В этой статье описывается влияние расширяемости функции каталогов Commerce для B2B в Microsoft Dynamics 365 Commerce.
author: ashishmsft
ms.date: 04/28/2022
ms.topic: article
audience: Application User, Developer, IT Pro
ms.reviewer: v-chgriffin
ms.search.region: Global
ms.author: asharchw
ms.search.validFrom: 2022-02-28
ms.openlocfilehash: f21d3375db69dd412325d00261bfc18e26d0c257
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/03/2022
ms.locfileid: "8849023"
---
# <a name="extensibility-impact-of-commerce-catalogs-for-b2b-customizations"></a>Влияние расширяемости каталогов Commerce для настроек B2B

[!include [banner](includes/banner.md)]
[!include [banner](includes/preview-banner.md)]

В этой статье описывается влияние расширяемости функции **Каталоги Commerce для B2B** в Microsoft Dynamics 365 Commerce.

Если вы заинтересованы в расширении контекста каталога на пользовательские сценарии, ваши настройки, возможно, придется обновить. Это обновление соответствует стандартному процессу, которого должен придерживаться клиент, поскольку их настройки могут не поддерживать автоматически последние функции после завершения обновления. Если ваши настройки включают в себя какие-либо новые функции или исправления ошибок в их интерфейсам, рекомендуется обновить код настройки соответствующим образом. Это обновление напоминает изменения, которые могли быть сделаны корпорацией Майкрософт для основного кода.

Просмотрите варианты настройки, которые приведены ниже, чтобы определить, должны ли быть обновлены ваши настройки.

> [!NOTE]
> - Все интерфейсы прикладного программирования (API) по продажам должны учитывать каталог. Таким образом, важно передать параметр **CatalogID**.
> - Каталог по умолчанию (**CatalogID**=**0**) не является допустимым каталогом для выполнивших вход пользователей бизнес-бизнес (B2B). Таким образом, все вызовы API, которые передают "0" или используют значение по умолчанию, вызовут сбой, так как у пользователей сайта нет доступа к каталогу 0. Чтобы получить правильное взаимодействие, необходимо обновить вызовы API клиента так, чтобы они передавали код каталога, выбранный в средстве выбора каталогов. Если используется значение по умолчанию, и пользователь переключает каталоги, веб-сайт должен предоставить данные для выбранного каталога. Таким образом, чтобы соответствовать интерфейсам API, выполняемым из базового кода Commerce, настроенные интерфейсы API должны передавать выбранный каталог.

Для следующих вариантов настройки требуются обновления разработки:

- **Случай 1.** Клиент вводит собственное [действие с данными](e-commerce-extensibility/data-actions.md), вызывающее связанный с продуктом API-интерфейс или действие с данными. Требуются следующие шаги обновления:

    1. Если действие с данными использует прямой вызов API-интерфейса, обновите действие с данными таким образом, чтобы оно передавало код каталога, как показано в следующем примере.

        ![Обновленное действие с данными, которое передает код каталога.](./media/customization1_a.png)

    1. Если действие с данными вызывает другое связанное с продуктом действие с данными в рамках настройки, необходимо обновить этот код, чтобы он мог передавать некоторые новые параметры, такие как **requestContext**. Параметр **requestContext** используется для получения текущего кода каталога, как показано в следующем примере.

        ![Обновленное действие с данными, которое передает новый параметр.](./media/customization1_b.png)

- **Случай 2.** Клиент имеет [переопределенное действие с данными](e-commerce-extensibility/data-action-overrides.md). Требуются следующий шаг обновления:

    - Обновите действие с данными как для случая 1.

- **Случай 3.** Клиент имеет расширение представления, модуль инжектора сценария или [клонированный модуль](e-commerce-extensibility/modules-overview.md#clone-a-module-library-module), который включает вызовы API-интерфейсов или действия с данными. Требуются следующий шаг обновления:

    - Обновите код, как для случая 1, как показано в следующем примере.

       ![Обновленный код, который передает новый параметр.](./media/customization3.png)

- **Случай 4.** Клиент использует вызов API-интерфейса **getById**. Требуются следующий шаг обновления:

    - Переключитесь вместо этого на вызов API-интерфейса **getByIds**, так как вызов API-интерфейса **getById** имеет некоторые ограничения и не поддерживает распознавание каталогов.

- **Случай 5.** У клиента есть действие с данными, которое извлекает информацию для нескольких продуктов, которые могут быть из разных каталогов. Требуются следующий шаг обновления:

    - Разделите вызовы API по кодам каталогов. Например, для API-интерфейсов корзины корзина может содержать продукты из разных каталогов. Строки продуктов должны быть сгруппированы по кодам каталогов, и они должны вызывать API-интерфейс для каждого каталога отдельно, как показано в следующем примере.

        ![Обновленное действие с данными, которое группирует строки продуктов по кодам каталогов.](./media/customization5.png)

## <a name="additional-resources"></a>Дополнительные ресурсы

[Создание каталогов Commerce для сайтов B2B](catalogs-b2b-sites.md)

[Вопросы и ответы по каталогам Commerce для B2B](catalogs-b2b-sites-FAQ.md)
