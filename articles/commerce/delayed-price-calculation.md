---
title: Откладывание точного расчета цены и скидки для повышения эффективности
description: В этой теме описывается функция отложенного расчета цены, доступная в POS Microsoft Dynamics 365 Commerce и центре обработки вызовов.
author: boycezhu
ms.date: 09/09/2021
ms.topic: article
audience: Application User, Developer, IT Pro
ms.reviewer: v-chgri
ms.search.region: Global
ms.author: boycez
ms.search.validFrom: 2017-06-20
ms.openlocfilehash: 8c4264c3a4c71e6aab0e1ef8d7d8cfffad065a46
ms.sourcegitcommit: 7a2001e4d01b252f5231d94b50945fd31562b2bc
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/15/2021
ms.locfileid: "7488371"
---
# <a name="delay-exact-price-and-discount-calculation-for-improved-performance"></a>Откладывание точного расчета цены и скидки для повышения эффективности

[!include [banner](includes/banner.md)]

В этой теме описывается функция отложенного расчета цены, доступная в POS Microsoft Dynamics 365 Commerce и центре обработки вызовов.

Dynamics 365 Commerce поддерживает создание многострочных скидок, которые применяются, когда объединяются несколько строк продаж в заказе на продажу или в предложении по продажам. К этим скидкам относятся скидки за комплект, пороговые скидки и скидки за количество.

Всякий раз, когда добавляется новая строка в заказ, механизм ценообразования Commerce оценивает всю корзину, чтобы определить, могут ли применяться какие-либо из этих многострочных скидок. Вследствие этого пересчета добавление новых строк может повлиять на производительность по мере роста заказа на продажу.

Однако компании типа бизнес-бизнес (B2B) и некоторые компании бизнес-потребитель (B2C) часто имеют большие размеры заказов. Таким образом, при добавлении каждой номенклатуры в корзину может затрачиваться много времени на ожидание, пока модуль ценообразования выполнит пересчет. Кроме того, для больших заказов обычно не очень важно, чтобы точная цена и скидка отображались каждый раз при добавлении номенклатуры в корзину. Более важно, чтобы пользователи могли быстро добавлять номенклатуры. Возможность отложить расчет цены и скидки до того момента, когда пользователь запросит его, или до завершения заказа может значительно повысить производительность. Это также позволяет уменьшить время, необходимое для завершения размещения заказа.

Возможность отложить точную калькуляцию цены и скидки в POS доступна уже давно. С выпуском Commerce версии 10.0.22 она также доступна для центра обработки вызовов.

## <a name="enable-delayed-price-and-discount-calculation-for-pos"></a>Включение отложенного расчета цен и скидок для POS

Чтобы включить отложенный расчет цен и скидок для POS, выполните следующие действия.

1. В Commerce Headquarters перейдите к профилю функциональности, связанному с физическим магазином.
1. На экспресс-вкладке **Сумма** включите конфигурацию **Вычислить вручную скидки по многим номенклатурам**.
1. Откройте конструктор макета экрана для ККМ, в которых должен быть включен отложенный расчет.
1. Добавьте кнопку для операции **Рассчитать итог** в нужную сетку кнопок.
1. Выполните задания **1070** и **1090**.

Сейчас при добавлении номенклатур в проводку не рассчитываются многострочные скидки, пока кассир не выберет кнопку **Рассчитать итог**. После выбора **Рассчитать итог** для проводки для нее всегда будут рассчитываться многострочные скидки. Кассиру не придется снова нажимать кнопку, даже если в корзину будут добавлены дополнительные номенклатуры. Система не позволит кассиру зафиксировать платеж до тех пор, пока не будет выбрана кнопка **Рассчитать итог**.

## <a name="enable-delayed-price-and-discount-calculation-for-call-center"></a>Включение отложенного расчета цен и скидок для центра обработки вызовов

Чтобы включить отложенный расчет цен и скидок для центра обработки вызовов, выполните следующие действия.

1. В Commerce Headquarters перейдите в раздел **Рабочие области \> Управление функциями**.
1. Включите функцию **Запретить непреднамеренное вычисление цен для коммерческих заказов**. Эта функция является необходимым условием для функции задержанного расчета цен и скидок.

    > [!NOTE]
    > Для новых развертываний функция **Запретить непреднамеренное вычисление цен для коммерческих заказов** по умолчанию включена.

1. Перейдите в раздел **Параметры Commerce \> Цены и скидки**.
1. В разделе **Разное** включите конфигурацию **Расчет многострочных цен и скидок вручную**.

Теперь после создания или изменения заказа на продажу или предложения по продажам в центре обработки вызовов расчет точной цены и скидки будет отложен. Модуль ценообразование будет учитывать только добавляемую или редактируемую строку продаж, и все остальные строки продаж будут игнорироваться. Чистая сумма для номенклатуры включает в себя расчет цены и простые скидки (процент скидки или суммы скидки для отдельной номенклатуры). Однако скидки за комплект, пороговое скидки и скидки за количество не будут применяться. Пользователи центра обработки вызовов, желающие просмотреть точную цену, включая все скидки, могут выбрать одну из трех кнопок: **Пересчитать**, **Итоговые суммы** или **Завершить**.

> [!NOTE]
> Для заказов через центр обработки вызовов в системе отображается предупреждающее сообщение, напоминающее пользователю о необходимости выбрать кнопку **Пересчитать**, **Итоговые значения** или **Завершить** для выполнения точного расчета цены и скидки. Для заказов, в которых доступна кнопка **Завершить**, нет способа пропуска точных расчетов цены и скидки у пользователя центра обработки вызовов, поскольку для завершения сбора заказа необходимо выбрать **Завершить**. Для заказов, в которых кнопка **Завершить** недоступна, нет действия, которое означает завершение сбора заказа. Таким образом, пользователь центра обработки вызовов несет ответственность за выбор кнопки **Пересчитать** или **Итоговые значения** перед завершением сборки заказа.

[!INCLUDE[footer-include](../includes/footer-banner.md)]
