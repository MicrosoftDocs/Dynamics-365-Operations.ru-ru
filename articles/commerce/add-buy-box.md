---
title: Модуль поля покупки
description: В этом разделе описываются модули поля покупки, а также описывается, как добавлять их к страницам сайта в Microsoft Dynamics 365 Commerce.
author: anupamar-ms
manager: annbe
ms.date: 09/15/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.scope: Retail, Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: anupamar
ms.search.validFrom: 2019-10-31
ms.dyn365.ops.version: Release 10.0.5
ms.openlocfilehash: fa9d42c20540f2ee2240cc4f2b180140c3f9a628
ms.sourcegitcommit: 4bf5ae2f2f144a28e431ed574c7e8438dc5935de
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/13/2020
ms.locfileid: "4517096"
---
# <a name="buy-box-module"></a>Модуль поля покупки

[!include [banner](includes/banner.md)]

В этом разделе описываются модули поля покупки, а также описывается, как добавлять их к страницам сайта в Microsoft Dynamics 365 Commerce.

## <a name="overview"></a>Обзор

Термин *поле покупки* обычно относится к области страницы сведений о продукте, которая расположена "выше сгиба" и содержит все наиболее важные сведения, необходимые для выполнения приобретения продукта. (Область, расположенная "над сгибом", видна при первой загрузке страницы, так что пользователям не придется прокручивать ее для просмотра.)

Модуль "поле покупки" — это специальный контейнер, который используется для размещения всех модулей, которые отображаются в области поля покупки на странице сведений о продукте.

URL-адрес страницы сведений о продукте содержит код продукта. Вся информация, необходимая для отображения модуля поля покупки, извлекается от этого кода продукта. Если код продукта не указан, модуль поля покупки не будет правильно отображен на странице. Поэтому модуль поля покупки может использоваться только на страницах с контекстом продукта. Чтобы использовать его на странице без контекста продукта (например, на домашней странице или на странице маркетинга), необходимо сделать дополнительные настройки.

На следующем рисунке показан пример модуля поля покупки на странице сведений о продукте.

![Пример модуля поля покупки](./media/ecommerce-pdp-buybox.PNG)

## <a name="buy-box-module-properties-and-slots"></a>Свойства и слоты модуля поля покупки 

На странице сведения о продукте поле покупки разделяется на две области: область мультимедиа слева и область содержимого справа. По умолчанию отношение ширины столбца области СМИ к ширине столбца области содержимого равно 2:1. На мобильных устройствах две эти области располагаются друг над другом, так что под одна область отображается под другой. Темы могут использоваться для настройки ширины столбцов и ранга стека.

Модуль поля покупки используется для отображения названия, описания, цены и оценок продукта. Он также позволяет клиентам выбирать варианты продуктов с другими атрибутами продукта, такими как размер, стиль и цвет. Когда выбран вариант продукта, остальные свойства в поле покупки (например, описание продукта и изображения) обновляются в соответствии со сведениями о варианте. 

Предоставляется выбор количества, чтобы клиенты могли указать количество элементов для покупки. Максимальное количество, которое может быть приобретено, можно определить в параметрах узла.

В поле покупки клиенты могут также выполнять такие действия, как добавление продукта в корзину, добавление продукта в их список желаемого и выбор места получения товара. Эти действия могут быть выполнены для продукта или варианта продукта. Чтобы добавить продукт в список желаемого, клиент должен войти в систему.

Темы можно использовать для удаления или изменения порядка свойств продукции в полях покупки и управления действиями. 

## <a name="module-properties"></a>Свойства модуля

- **Тег заголовка** — это свойство определяет тег заголовка для названия продукта. Если поле покупки находится вверху страницы, это свойство должно иметь значение **h1** для соответствия стандартам специальных возможностей. 

- **Включение рекомендаций «Выбрать похожие по виду»** — это свойство позволяет полю "Купить" отображать ссылки на продукты, которые выглядят аналогично просматриваемой в данный момент номенклатуре. Эта функция доступна в выпуске Commerce 10.0.13 и выше.

## <a name="modules-that-can-be-used-in-a-buy-box-module"></a>Модули, которые могут быть использованы в модуле поля покупки

- **Галерея мультимедиа** — этот модуль используется для демонстрации изображений продукта на странице сведений о продукте. Дополнительные сведения об этом модуле см. в разделе [Модуль галереи мультимедиа](media-gallery-module.md).
- **Выбор магазина** — этот модуль отображает список ближайших магазинов, в которых номенклатура доступна для получения. Он позволяет пользователям вводить местоположение для поиска ближайших магазинов. Дополнительные сведения об этом модуле см. в разделе [Модуль выбора магазина](store-selector.md).
- **Поделиться в социальных сетях** — этот модуль можно добавить в поле покупки, чтобы предоставить пользователям возможность поделиться информацией о продукте в социальных сетях. Дополнительные сведения см в разделе [Модуль "Поделиться в социальных сетях"](social-share-module.md).

## <a name="buy-box-module-settings"></a>Настройки модуля поля покупки

Следующие параметры модуля поля покупки можно настроить в **Параметры сайта \> Расширения**:

- **Лимит количества строки корзины** — это свойство используется для указания максимального количества каждой номенклатуры, которое может быть добавлено в корзину. Например, розничная сеть может решить, что в одну проводку можно продать только 10 шт. каждого продукта.
- **Запасы** — сведения о применении настроек запасов см. в разделе [Применение настроек запасов](inventory-settings.md).
- **Добавить продукт в корзину** — это свойство используется для определения поведения после добавления номенклатуры в корзину. Возможные значения: **Перейти к странице корзины**, **Не переходить на страницу корзины** и **Показать уведомление**. Когда значение задано как **Перейти к странице корзины**, после добавления номенклатуры пользователи направляются на страницу корзины. Когда значение задано как **Не переходить на страницу корзины**, после добавления номенклатуры пользователи не направляются на страницу корзины. Когда для этого параметра указано **Показать уведомление**, пользователям показывается уведомлением о подтверждении и они могут продолжать просматривать страницу сведений о продукте. 

> [!IMPORTANT]
> Параметры сайта **Добавить продукт в корзину** доступны в выпуске Dynamics 365 Commerce 10.0.11. Если выполняется обновление из более ранней версии Dynamics 365 Commerce, необходимо вручную обновить файл appsettings.json. Инструкции по обновлению файла appsettings.json см. в разделе [Обновления SDK и библиотеки модулей](e-commerce-extensibility/sdk-updates.md#update-the-appsettingsjson-file). 

На следующем рисунке показан пример уведомления о подтверждении "Добавлено в корзину" на сайте Fabrikam.

![Пример модуля уведомлений](./media/ecommerce-addtocart-notifications.PNG)

## <a name="commerce-scale-unit-interaction"></a>Взаимодействие Commerce Scale Unit

Модуль поля покупки извлекает информацию о продукции с помощью интерфейсов API Commerce Scale Unit. Для получения всей информации используется код продукта со страницы сведений о продукте.

## <a name="add-a-buy-box-module-to-a-page"></a>Добавление модуля поля покупки на страницу

Чтобы добавить модуль поля покупки на новую страницу и задать необходимые свойства, выполните следующие действия.

1. Перейдите к разделу **Фрагменты**, выберите **Создать**, чтобы создать фрагмент.
1. В диалоговом окне **Создать фрагмент** выберите модуль **Поле покупки**.
1. В области **Имя фрагмента** введите имя **Фрагмент поля покупки**, затем выберите **ОК**.
1. В ячейке **Галерея СМИ** модуля поля покупки нажмите многоточие (**…**), а затем выберите **Добавить модуль**.
1. В диалоговом окне **Добавить модуль** выберите модуль **Галерея СМИ**, затем выберите **ОК**.
1. В ячейке **Выбор магазина** модуля поля покупки нажмите многоточие (**…**), а затем выберите **Добавить модуль**.
1. В диалоговом окне **Добавить модуль** выберите модуль **Выбор магазина**, затем выберите **ОК**.
1. Выберите **Сохранить**, выберите **Завершить редактирование** для возврата фрагмента, затем нажмите кнопку **Опубликовать**, чтобы опубликовать его.
1. Перейдите к пункту **Шаблоны**, выберите **Создать**, чтобы создать шаблон.
1. В диалоговом окне **Создать шаблон** в разделе **Имя шаблона** введите **Шаблон PDP**, затем выберите **ОК**.
1. В ячейке **Содержание** выберите многоточие (**...**), затем выберите **Добавить модуль**.
1. В диалоговом окне **Добавить модуль** выберите модуль **Страница по умолчанию**, затем выберите **ОК**.
1. В слоте **Главный** страницы по умолчанию выберите кнопку с многоточием (**...**), затем выберите **Добавить фрагмент**.
1. В диалоговом окне **Выбор фрагмента** выберите созданный ранее фрагмент **Фрагмент поля покупки** и нажмите **ОК**.
1. Выберите **Сохранить**, выберите **Завершить редактирование** для возврата шаблона, затем нажмите кнопку **Опубликовать**, чтобы опубликовать его.
1. Перейдите к разделу **Страницы**, выберите **Создать**, чтобы создать страницу.
1. В диалоговом окне **Выбор шаблона** выберите **Шаблон PDP**. В поле **Имя страницы** введите **Страница PDP**, затем выберите **OK**.
1. В слоте **Главный** новой страницы выберите кнопку с многоточием (**...**), затем выберите **Добавить фрагмент**.
1. В диалоговом окне **Выбор фрагмента** выберите созданный ранее фрагмент **Фрагмент поля покупки** и нажмите **ОК**.
1. Сохраните и просмотрите страницу. Добавьте параметр строки запроса **?productid=&lt;код продукта&gt;** в URL-адрес страницы предварительного просмотра. Таким образом, контекст продукта используется для загрузки и отображения страницы предварительного просмотра.
1. Выберите **Сохранить**, выберите **Завершить редактирование** для возврата страницы, затем нажмите кнопку **Опубликовать**, чтобы опубликовать ее. На странице сведения о продукте появится поле покупки.

## <a name="additional-resources"></a>Дополнительные ресурсы

[Обзор библиотеки модулей](starter-kit-overview.md)

[Модуль выбора магазина](store-selector.md)

[Модуль коллекции мультимедиа](media-gallery-module.md)

[Модуль контейнера](add-container-module.md)

[Модуль корзины](add-cart-module.md)

[Модуль оформления заказа](add-checkout-module.md)

[Модуль подтверждения заказа](order-confirmation-module.md)

[Модуль верхнего колонтитула](author-header-module.md)

[Модуль нижнего колонтитула](author-footer-module.md)

[Модуль Social Share](social-share-module.md)

[Расчет наличия запасов для розничных каналов](calculated-inventory-retail-channels.md)

[Обновления SDK и библиотеки модулей](e-commerce-extensibility/sdk-updates.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]