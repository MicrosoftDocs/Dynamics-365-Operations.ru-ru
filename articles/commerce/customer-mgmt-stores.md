---
title: Управление клиентами в магазинах
description: В этом разделе описывается, как предприятия розничной торговли могут активировать возможности управления клиентом на POS-терминале в Microsoft Dynamics 365 Commerce.
author: josaw1
ms.date: 05/25/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: RetailOperations
audience: Application User, IT Pro
ms.reviewer: v-chgri
ms.search.region: Global
ms.search.industry: retail
ms.author: shajain
ms.search.validFrom: 2021-01-31
ms.dyn365.ops.version: 10.0.14
ms.openlocfilehash: dd17593d84a8bf262712a84b11829f8ec6c49049
ms.sourcegitcommit: c5c8f19a696ad4a3d68dffd63bfe7b484b999d2b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/25/2021
ms.locfileid: "6097216"
---
# <a name="customer-management-in-stores"></a><span data-ttu-id="a20d2-103">Управление клиентами в магазинах</span><span class="sxs-lookup"><span data-stu-id="a20d2-103">Customer management in stores</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="a20d2-104">В этом разделе описывается, как предприятия розничной торговли могут активировать возможности управления клиентом на POS-терминале в Microsoft Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="a20d2-104">This topic explains how retailers can enable customer management capabilities at the point of sale (POS) in Microsoft Dynamics 365 Commerce.</span></span>

<span data-ttu-id="a20d2-105">Важно, чтобы сотрудники магазина могли создавать и изменять записи клиентов в POS.</span><span class="sxs-lookup"><span data-stu-id="a20d2-105">It's important that store associates can create and edit customer records at the POS.</span></span> <span data-ttu-id="a20d2-106">Таким образом, они могут регистрировать обновления информации о клиенте, такие как адрес электронной почты, номер телефона и адрес.</span><span class="sxs-lookup"><span data-stu-id="a20d2-106">In that way, they can capture any updates to customer information such as the email address, phone number, and address.</span></span> <span data-ttu-id="a20d2-107">Эта информация полезна в таких нисходящих системах, как маркетинг, потому что эффективность этих систем зависит от точности данных их клиентов.</span><span class="sxs-lookup"><span data-stu-id="a20d2-107">This information is helpful in downstream systems such as marketing, because the effectiveness of those systems depends on the accuracy of their customer data.</span></span>

<span data-ttu-id="a20d2-108">С помощью продавцов-консультантов процесс создания клиентов может быть инициирован из двух точек входа POS.</span><span class="sxs-lookup"><span data-stu-id="a20d2-108">Sales associates can trigger the customer creation workflow from two POS entry points.</span></span> <span data-ttu-id="a20d2-109">Они могут выбрать кнопку, которая сопоставлена с операцией **Добавить клиента**, или же они могут выбрать **создать клиента** на панели приложений на странице результатов поиска.</span><span class="sxs-lookup"><span data-stu-id="a20d2-109">They can select a button that is mapped to the **Customer add** operation, or they can select **Create customer** on the app bar on the search results page.</span></span> <span data-ttu-id="a20d2-110">В обоих случаях появляется диалоговое окно **создать клиента**, в котором продавцы-консультанты могут ввести необходимые сведения о клиенте, такие как имя клиента, адрес электронной почты, номер телефона, адрес и любые дополнительные сведения, относящиеся к данному бизнесу.</span><span class="sxs-lookup"><span data-stu-id="a20d2-110">In both cases, the **New customer** dialog box appears, where sales associates can enter required customer details, such as the customer's name, email address, phone number, address, and any additional information that is relevant to the business.</span></span> <span data-ttu-id="a20d2-111">Для записи дополнительной информации можно использовать атрибуты клиента, связанные с данным клиентом.</span><span class="sxs-lookup"><span data-stu-id="a20d2-111">That additional information can be captured by using the customer attributes that are associated with the customer.</span></span> <span data-ttu-id="a20d2-112">Дополнительные сведения об атрибутах клиентов см. в разделе [атрибуты клиентов](dev-itpro/customer-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="a20d2-112">For more information about customer attributes, see [Customer attributes](dev-itpro/customer-attributes.md).</span></span>

<span data-ttu-id="a20d2-113">Продавцы могут также регистрировать дополнительные адреса электронной почты и телефонные номера.</span><span class="sxs-lookup"><span data-stu-id="a20d2-113">Sales associates can also capture secondary email addresses and phone numbers.</span></span> <span data-ttu-id="a20d2-114">Кроме того, они могут регистрировать параметры клиента по получению маркетинговой информации с помощью дополнительных адресов электронной почты или телефонных номеров.</span><span class="sxs-lookup"><span data-stu-id="a20d2-114">Additionally, they can capture the customer's preference about receiving marketing information via any of those secondary email addresses or phone numbers.</span></span> <span data-ttu-id="a20d2-115">Чтобы эта функция была доступна, необходимо включить функцию **Сбор нескольких адресов электронной почты и телефонных номеров и согласие на маркетинг для этих контактов** в рабочей области **Управление функциями** в Commerce headquarters (**Системное администрирование \> Рабочие области \> Управление функциями**).</span><span class="sxs-lookup"><span data-stu-id="a20d2-115">To enable this capability, retailers must turn on the **Capture multiple emails and phone numbers and consent for marketing on these contacts** feature in the **Feature management** workspace in Commerce headquarters (**Systems administration \> Workspaces \> Feature management**).</span></span>

## <a name="default-customer-properties"></a><span data-ttu-id="a20d2-116">Свойства клиента по умолчанию</span><span class="sxs-lookup"><span data-stu-id="a20d2-116">Default customer properties</span></span>

<span data-ttu-id="a20d2-117">Предприятия розничной торговли могут использовать страницу **Все магазины** в Commerce headquarters (**Retail и Commerce \> Каналы \> Магазины**), чтобы связать клиента по умолчанию с каждым магазином.</span><span class="sxs-lookup"><span data-stu-id="a20d2-117">Retailers can use the **All stores** page in Commerce headquarters (**Retail and Commerce \> Channels \> Stores**) to associate a default customer with each store.</span></span> <span data-ttu-id="a20d2-118">Затем Commerce копирует свойства, которые определены для клиента по умолчанию, во все создаваемые записи о клиентах.</span><span class="sxs-lookup"><span data-stu-id="a20d2-118">Commerce then copies the properties that are defined for the default customer to all new customer records that are created.</span></span> <span data-ttu-id="a20d2-119">Например, в диалоговом окне **Создание клиента** отображаются свойства, которые наследуются от клиента по умолчанию, связанного с магазином.</span><span class="sxs-lookup"><span data-stu-id="a20d2-119">For example, the **Create customer** dialog box shows properties that are inherited from the default customer that is associated with the store.</span></span> <span data-ttu-id="a20d2-120">Эти свойства включают **тип клиента**, **группу клиентов**, **параметр получения чеков**, **электронную почту для чеков**, **валюту** и **язык**.</span><span class="sxs-lookup"><span data-stu-id="a20d2-120">Those properties include the **customer type**, **customer group**, **receipt option**, **receipt email**, **currency**, and **language**.</span></span> <span data-ttu-id="a20d2-121">Любые **назначения** (группировка клиентов) также наследуются из клиента по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="a20d2-121">Any **affiliations** (groupings of customers) are also inherited from the default customer.</span></span> <span data-ttu-id="a20d2-122">Однако **финансовые аналитики** наследуются из группы клиентов, связанной с клиентом по умолчанию, а не с самого клиента по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="a20d2-122">However, **financial dimensions** are inherited from the customer group that is associated with the default customer, not from the default customer itself.</span></span>

> [!NOTE]
> <span data-ttu-id="a20d2-123">Значение **электронная почта для чеков** копируется из клиента по умолчанию только в том случае, если для вновь созданных клиентов не указан код электронной почты для чеков.</span><span class="sxs-lookup"><span data-stu-id="a20d2-123">The **receipt email** value gets copied from the default customer only if the receipt email ID is not provided for the newly created customers.</span></span> <span data-ttu-id="a20d2-124">Это означает, что если код электронной почты для чеков присутствует в клиенте по умолчанию, то все клиенты, созданные на веб-сайте электронной коммерции, получат такой же код электронной почты для чеков, так как нет пользовательского интерфейса для захват кода электронной почты для чеков из клиента.</span><span class="sxs-lookup"><span data-stu-id="a20d2-124">This means that if the receipt email ID is present on the default customer, then all the customers created from the e-commerce site will get the same receipt email ID as there is no user interface to capture the receipt email ID from the customer.</span></span> <span data-ttu-id="a20d2-125">Рекомендуется оставлять поле **электронная почта для чеков** пустым для клиента по умолчанию в магазине и использовать его только в том случае, если имеется бизнес-процесс, который зависит от адреса электронной почты для чеков.</span><span class="sxs-lookup"><span data-stu-id="a20d2-125">We recommend that you to keep the **receipt email** field empty for the default customer of the store and only use it if you have a business process that depends on a receipt email address being present.</span></span> 

<span data-ttu-id="a20d2-126">Продавцы-консультанты могут регистрировать несколько адресов для клиента.</span><span class="sxs-lookup"><span data-stu-id="a20d2-126">Sales associates can capture multiple addresses for a customer.</span></span> <span data-ttu-id="a20d2-127">Имя и номер телефона клиента наследуются из контактной информации, связанной с каждым адресом.</span><span class="sxs-lookup"><span data-stu-id="a20d2-127">The customer's name and phone number are inherited from the contact information that is associated with each address.</span></span> <span data-ttu-id="a20d2-128">Экспресс-вкладка **адреса** записи клиента включает поле **цели**, которое могут изменять продавцы-консультанты.</span><span class="sxs-lookup"><span data-stu-id="a20d2-128">The **Addresses** FastTab of a customer record includes a **Purpose** field that sales associates can edit.</span></span> <span data-ttu-id="a20d2-129">Если типом клиента является **Человек**, значением по умолчанию является **Домашний**.</span><span class="sxs-lookup"><span data-stu-id="a20d2-129">If the customer type is **Person**, the default value is **Home**.</span></span> <span data-ttu-id="a20d2-130">Если типом клиента является **Организация**, значением по умолчанию является **Бизнес**.</span><span class="sxs-lookup"><span data-stu-id="a20d2-130">If the customer type is **Organization**, the default value is **Business**.</span></span> <span data-ttu-id="a20d2-131">Другие значения, которые поддерживает данное поле, включают **домашний**, **офис** и **почтовый ящик**.</span><span class="sxs-lookup"><span data-stu-id="a20d2-131">Other values that this field supports include **Home**, **Office**, and **Post box**.</span></span> <span data-ttu-id="a20d2-132">Значение поля **страна** для адреса наследуется из основного адреса, который указан на странице **операционная единица** в Commerce headquarters в **Администрирование организации \> Организации \> Операционные единицы**.</span><span class="sxs-lookup"><span data-stu-id="a20d2-132">The value of the **Country** field for an address is inherited from the primary address that is specified on the **Operating unit** page in Commerce headquarters at **Organization administration \> Organizations \> Operating units**.</span></span>

## <a name="sync-customers-and-async-customers"></a><span data-ttu-id="a20d2-133">Синхронные клиенты и асинхронные клиенты</span><span class="sxs-lookup"><span data-stu-id="a20d2-133">Sync customers and Async customers</span></span>

<span data-ttu-id="a20d2-134">в Commerce имеется два режима создания клиентов: синхронные и асинхронные.</span><span class="sxs-lookup"><span data-stu-id="a20d2-134">In Commerce, there are two modes of customer creation: Synchronous (or Sync) and Asynchronous (or Async).</span></span> <span data-ttu-id="a20d2-135">По умолчанию клиенты создаются синхронно.</span><span class="sxs-lookup"><span data-stu-id="a20d2-135">By default, customers are created synchronously.</span></span> <span data-ttu-id="a20d2-136">Другими словами, они создаются в Commerce headquarters в реальном времени.</span><span class="sxs-lookup"><span data-stu-id="a20d2-136">In other words, they are created in Commerce headquarters in real time.</span></span> <span data-ttu-id="a20d2-137">Режим создания синхронных клиентов является полезным, поскольку новые клиенты сразу же могут осуществлять поиск по каналам.</span><span class="sxs-lookup"><span data-stu-id="a20d2-137">The Sync customer creation mode is beneficial because new customers are immediately searchable across channels.</span></span> <span data-ttu-id="a20d2-138">Однако у него также есть недостаток.</span><span class="sxs-lookup"><span data-stu-id="a20d2-138">However, it also has a drawback.</span></span> <span data-ttu-id="a20d2-139">Поскольку он генерирует вызовы [Commerce Data Exchange: служба реального времени](dev-itpro/define-retail-channel-communications-cdx.md#realtime-service) в Commerce headquarters, производительность может быть нарушена, если будет выполнено много звонков для создания клиентов одновременно.</span><span class="sxs-lookup"><span data-stu-id="a20d2-139">Because it generates [Commerce Data Exchange: Real-time Service](dev-itpro/define-retail-channel-communications-cdx.md#realtime-service) calls to Commerce headquarters, performance can be affected if many concurrent customer creation calls are made.</span></span>

<span data-ttu-id="a20d2-140">Если в параметре **Создание клиента в асинхронном режиме** установлено значение **Да** в профиле функциональности магазина (**Retail и Commerce \> Настройка канала \> Настройка интернет-магазина \> Профили функциональности**), вызовы службы реального времени не используются для создания записей клиентов в базе данных канала.</span><span class="sxs-lookup"><span data-stu-id="a20d2-140">If the **Create customer in async mode** option is set to **Yes** in the store's functionality profile (**Retail and Commerce \> Channel setup \> Online store setup \> Functionality profiles**), Real-time Service calls aren't used to create customer records in the channel database.</span></span> <span data-ttu-id="a20d2-141">Режим асинхронного создания клиентов не влияет на производительность Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="a20d2-141">The Async customer creation mode doesn't affect the performance of Commerce headquarters.</span></span> <span data-ttu-id="a20d2-142">Временный глобальный уникальный идентификатор (GUID) назначается каждой новой записи асинхронного клиента и используется в качестве идентификатора счета клиента.</span><span class="sxs-lookup"><span data-stu-id="a20d2-142">A temporary globally unique identifier (GUID) is assigned to every new Async customer record and used as the customer account ID.</span></span> <span data-ttu-id="a20d2-143">Этот GUID не отображается для пользователей POS.</span><span class="sxs-lookup"><span data-stu-id="a20d2-143">This GUID isn't shown to POS users.</span></span> <span data-ttu-id="a20d2-144">Вместо этого эти пользователи будут видеть **ожидающие синхронизации** в качестве кода счета клиента.</span><span class="sxs-lookup"><span data-stu-id="a20d2-144">Instead, those users will see **Pending sync** as the customer account ID.</span></span> <span data-ttu-id="a20d2-145">Хотя эта конфигурация вынуждает создавать клиентов асинхронно, обратите внимание, что изменения записей клиентов выполняются синхронно.</span><span class="sxs-lookup"><span data-stu-id="a20d2-145">Although this configuration forces customers to be created asynchronously, note that edits to customer records are always done synchronously.</span></span>

### <a name="convert-async-customers-to-sync-customers"></a><span data-ttu-id="a20d2-146">Преобразование асинхронных клиентов в синхронных</span><span class="sxs-lookup"><span data-stu-id="a20d2-146">Convert Async customers to Sync customers</span></span>

<span data-ttu-id="a20d2-147">Чтобы преобразовать асинхронных клиентов в синхронных, необходимо сначала выполнить P-задание, чтобы отправлять асинхронные клиенты в Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="a20d2-147">To convert Async customers to Sync customers, you must first run the P-job to send the Async customers to Commerce headquarters.</span></span> <span data-ttu-id="a20d2-148">Затем запустите задание **синхронизация клиентов и деловых партнеров из асинхронного режима**, чтобы создать коды счетов клиентов.</span><span class="sxs-lookup"><span data-stu-id="a20d2-148">Then run the **Synchronize customers and business partners from async mode** job to create customer account IDs.</span></span> <span data-ttu-id="a20d2-149">Наконец, выполните задание **1010**, чтобы синхронизировать коды счета нового клиента с каналами.</span><span class="sxs-lookup"><span data-stu-id="a20d2-149">Finally, run the **1010** job to sync the new customer account IDs to the channels.</span></span>

### <a name="async-customer-limitations"></a><span data-ttu-id="a20d2-150">Ограничения асинхронных клиентов</span><span class="sxs-lookup"><span data-stu-id="a20d2-150">Async customer limitations</span></span>

<span data-ttu-id="a20d2-151">Функциональность асинхронных клиентов в настоящее время имеет следующие ограничения:</span><span class="sxs-lookup"><span data-stu-id="a20d2-151">The Async customer functionality currently has the following limitations:</span></span>

- <span data-ttu-id="a20d2-152">Записи асинхронных клиентов нельзя изменить, пока клиент не будет создан в Commerce headquarters, а новый код счета клиента был синхронизирован с каналом обратно.</span><span class="sxs-lookup"><span data-stu-id="a20d2-152">Async customer records can't be edited unless the customer has been created in Commerce headquarters and the new customer account ID has been synced back to the channel.</span></span>
- <span data-ttu-id="a20d2-153">Назначения не могут быть связаны с асинхронными клиентами.</span><span class="sxs-lookup"><span data-stu-id="a20d2-153">Affiliations can't be associated with Async customers.</span></span> <span data-ttu-id="a20d2-154">Таким образом, новые асинхронные клиенты не наследуют назначения от клиента по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="a20d2-154">Therefore, new Async customers don't inherit affiliations from the default customer.</span></span>
- <span data-ttu-id="a20d2-155">Карты лояльности не могут быть выпущены для асинхронных клиентов, если только новый код счета клиента не был синхронизирован с каналом обратно.</span><span class="sxs-lookup"><span data-stu-id="a20d2-155">Loyalty cards can't be issued to Async customers unless the new customer account ID has been synced back to the channel.</span></span>
- <span data-ttu-id="a20d2-156">Дополнительные адреса электронной почты и номера телефонов не могут регистрироваться для асинхронных клиентов.</span><span class="sxs-lookup"><span data-stu-id="a20d2-156">Secondary email addresses and phone numbers can't be captured for Async customers.</span></span>

### <a name="customer-creation-in-pos-offline-mode"></a><span data-ttu-id="a20d2-157">Создание клиента в автономном режиме POS</span><span class="sxs-lookup"><span data-stu-id="a20d2-157">Customer creation in POS offline mode</span></span>

<span data-ttu-id="a20d2-158">Если POS переходит в автономный режим, и включен режим создания асинхронного клиента, новые записи клиентов создаются асинхронно.</span><span class="sxs-lookup"><span data-stu-id="a20d2-158">If the POS goes offline while the Async customer creation mode is enabled, new customer records are created asynchronously.</span></span> <span data-ttu-id="a20d2-159">Если POS переходит в автономный режим, и отключен режим создания асинхронного клиента, система автоматически переключается на режим создания асинхронного клиента.</span><span class="sxs-lookup"><span data-stu-id="a20d2-159">If the POS goes offline while the Async customer creation mode is disabled, the system automatically switches to the Async customer creation mode.</span></span> <span data-ttu-id="a20d2-160">Другими словами, записи клиентов могут создаваться асинхронно, даже если режим создания асинхронных клиентов отключен.</span><span class="sxs-lookup"><span data-stu-id="a20d2-160">In other words, customer records might be created asynchronously even if the Async customer creation mode is disabled.</span></span> <span data-ttu-id="a20d2-161">Поэтому администраторы Commerce headquarters должны создать и запланировать повторяющееся пакетное задание для P-задания, задание **Синхронизация клиентов и деловых партнеров из асинхронного режима** и задание **1010**, чтобы преобразовать всех асинхронных клиентов в синхронных клиентов в Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="a20d2-161">Therefore, Commerce headquarters administrators must create and schedule a recurring batch job for the P-job, the **Synchronize customers and business partners from async mode** job, and the **1010** job, so that any Async customers are converted to Sync customers in Commerce headquarters.</span></span>

> [!NOTE]
> <span data-ttu-id="a20d2-162">Если параметр **Фильтрация общих таблиц данных о клиентах** имеет значение **Да** на странице **схема канала Commerce** (**Retail и Commerce \> Настройка Headquarters \> планировщик Commerce \> Группа базы данных канала**), записи клиентов не создаются в автономном режиме POS.</span><span class="sxs-lookup"><span data-stu-id="a20d2-162">If the **Filter shared customer data tables** option is set to **Yes** on the **Commerce channel schema** page (**Retail and Commerce \> Headquarters setup \> Commerce scheduler \> Channel database group**), customer records aren't created in POS offline mode.</span></span> <span data-ttu-id="a20d2-163">Дополнительные сведения см. в разделе [Исключение автономных данных](dev-itpro/implementation-considerations-cdx.md#offline-data-exclusion).</span><span class="sxs-lookup"><span data-stu-id="a20d2-163">For more information, see [Offline data exclusion](dev-itpro/implementation-considerations-cdx.md#offline-data-exclusion).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="a20d2-164">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="a20d2-164">Additional resources</span></span>

[<span data-ttu-id="a20d2-165">Атрибуты заказчика</span><span class="sxs-lookup"><span data-stu-id="a20d2-165">Customer attributes</span></span>](dev-itpro/customer-attributes.md)

[<span data-ttu-id="a20d2-166">Исключение автономных данных</span><span class="sxs-lookup"><span data-stu-id="a20d2-166">Offline data exclusion</span></span>](dev-itpro/implementation-considerations-cdx.md#offline-data-exclusion)
