---
title: Добавление кода скрипта на страницы сайта для поддержки телеметрии
description: В этом разделе описывается добавление клиентского кода скрипта на страницы сайта для поддержки сбора телеметрии на стороне клиента.
author: bicyclingfool
ms.date: 09/29/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application user
ms.reviewer: v-chgri
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: StuHarg
ms.search.validFrom: 2019-10-31
ms.dyn365.ops.version: Release 10.0.5
ms.openlocfilehash: e3916b18c797222c300957fb25cabad78c4fcb9744a29d611a81b0bda3e9834d
ms.sourcegitcommit: 42fe9790ddf0bdad911544deaa82123a396712fb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/05/2021
ms.locfileid: "6724612"
---
# <a name="add-script-code-to-site-pages-to-support-telemetry"></a>Добавление кода скрипта на страницы сайта для поддержки телеметрии

[!include [banner](includes/banner.md)]

В этом разделе описывается добавление клиентского кода скрипта на страницы сайта для поддержки сбора телеметрии на стороне клиента.

Веб-аналитика является важным средством, когда необходимо понять, как клиенты взаимодействуют с вашим сайтом, и принимать решения, которые помогут оптимизировать работу по максимальной конверсии. Доступно множество пакетов веб-аналитики, которые помогут достичь этих целей, такие как Google Analytics, Click, Moz Analytics и KISSMetrics. Для большинства пакетов веб-аналитики требуется добавить клиентский код сценария в элемент **\<head\>** кода HTML для всех страниц сайта.

> [!NOTE]
> Инструкции, приведенные в этом разделе, применимы также к другим пользовательским функциям на стороне клиента, которые Microsoft Dynamics 365 Commerce изначально не предлагает.

## <a name="create-a-reusable-fragment-for-your-script-code"></a>Создание повторно используемого фрагмента кода сценария

Фрагмент позволяет повторно использовать код встроенного или внешнего сценария на всех страницах сайта, независимо от используемого шаблона.

### <a name="create-a-reusable-fragment-for-your-inline-script-code"></a>Создание повторно используемого фрагмента для кода встроенного сценария

Чтобы создать повторно используемый фрагмент для кода встроенного сценария в средстве построения сайтов, выполните следующие действия.

1. Перейдите к разделу **Фрагменты**, и затем выберите **Создать**.
1. В диалоговом окне **Создать фрагмент** выберите **Встроенный сценарий**.
1. В области **Имя фрагмента** введите имя фрагмента, затем выберите **ОК**.
1. Под созданным фрагментом выберите модуль **Встроенный сценарий по умолчанию**.
1. На панели свойств в правой части в разделе **Встроенный сценарий** введите клиентский сценарий. Затем настройте другие параметры нужным образом.
1. Выберите **Сохранить**, затем выберите **Завершить правку**.
1. Выберите **Опубликовать**.

### <a name="create-a-reusable-fragment-for-your-external-script-code"></a>Создание повторно используемого фрагмента для кода внешнего сценария

Чтобы создать повторно используемый фрагмент для кода внешнего сценария в средстве построения сайтов, выполните следующие действия.

1. Перейдите к разделу **Фрагменты**, и затем выберите **Создать**.
1. В диалоговом окне **Создать фрагмент** выберите **Внешний сценарий**.
1. В области **Имя фрагмента** введите имя фрагмента, затем выберите **ОК**.
1. Под созданным фрагментом выберите модуль **Внешний сценарий по умолчанию**.
1. На панели свойств в правой части в области **Источник сценария** добавьте внешний или относительный URL-адрес для источника внешнего сценария. Затем настройте другие параметры нужным образом.
1. Выберите **Сохранить**, затем выберите **Завершить правку**.
1. Выберите **Опубликовать**.

> [!NOTE]
> Если для сайта активирована политика безопасности содержимого (CSP), убедитесь, что все внешние URL-адреса добавлены в директиву CSP **script-src** в конструкторе сайтов Commerce. Дополнительные сведения см. в разделе [Управление политикой безопасности содержимого (CSP)](manage-csp.md).

## <a name="add-a-fragment-that-includes-script-code-to-a-template"></a>Добавление фрагмента, включающего код сценария, в шаблон

Чтобы добавить фрагмент, включающий код сценария, в шаблон в средстве построения сайтов, выполните следующие действия.

1. Перейдите к разделу **Шаблоны** и откройте шаблон для страниц, к которым необходимо добавить код сценария.
1. В левой области разверните иерархию шаблонов, чтобы отобразить слот **Заголовок HTML**.
1. В ячейке **Заголовок HTML** выберите кнопку с многоточием (**...**), затем выберите **Добавить фрагмент**.
1. Выберите фрагмент, который был создан для кода сценария.
1. Выберите **Сохранить**, затем выберите **Завершить правку**.
1. Выберите **Опубликовать**.

## <a name="add-an-external-script-or-inline-script-directly-to-a-template"></a>Добавление внешнего сценария или встроенного сценария непосредственно в шаблон

Если необходимо вставить встроенный или внешний сценарий непосредственно в набор страниц, управляемых одним шаблоном, не требуется сначала создавать фрагмент.

### <a name="add-an-inline-script-directly-to-a-template"></a>Добавление встроенного сценария непосредственно в шаблон

Чтобы добавить встроенный сценарий непосредственно в шаблон в средстве построения сайтов, выполните следующие действия.

1. Перейдите к разделу **Шаблоны** и откройте шаблон для страниц, к которым необходимо добавить код сценария.
1. В левой области разверните иерархию шаблонов, чтобы отобразить слот **Заголовок HTML**.
1. В ячейке **Заголовок HTML** выберите кнопку с многоточием (**...**), затем выберите **Добавить модуль**.
1. В диалоговом окне **Добавить модуль** выберите **Встроенный сценарий**.
1. На панели свойств в правой части в разделе **Встроенный сценарий** введите клиентский сценарий. Затем настройте другие параметры нужным образом.
1. Выберите **Сохранить**, затем выберите **Завершить правку**.
1. Выберите **Опубликовать**.

### <a name="add-an-external-script-directly-to-a-template"></a>Добавление внешнего сценария непосредственно в шаблон

Чтобы добавить внешний сценарий непосредственно в шаблон в средстве построения сайтов, выполните следующие действия.

1. Перейдите к разделу **Шаблоны** и откройте шаблон для страниц, к которым необходимо добавить код сценария.
1. В левой области разверните иерархию шаблонов, чтобы отобразить слот **Заголовок HTML**.
1. В ячейке **Заголовок HTML** выберите кнопку с многоточием (**...**), затем выберите **Добавить модуль**.
1. В диалоговом окне **Добавить модуль** выберите **Внешний сценарий**.
1. На панели свойств в правой части в области **Источник сценария** добавьте внешний или относительный URL-адрес для источника внешнего сценария. Затем настройте другие параметры нужным образом.
1. Выберите **Сохранить**, затем выберите **Завершить правку**.
1. Выберите **Опубликовать**.

## <a name="additional-resources"></a>Дополнительные ресурсы

[Добавление логотипа](add-logo.md)

[Выбор темы сайта](select-site-theme.md)

[Работа с переопределением файлов CSS](css-override-files.md)

[Добавление значка сайта](add-favicon.md)

[Добавление приветственного сообщения](add-welcome-message.md)

[Добавление уведомления об авторском праве](add-copyright-notice.md)

[Добавление языков на сайт](add-languages-to-site.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
