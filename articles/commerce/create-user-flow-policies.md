---
title: Создание политик потока пользователей
description: В этой статье описывается создание политик потока пользователей на портале Microsoft Azure.
author: BrianShook
ms.date: 11/15/2022
ms.topic: article
audience: Application User, Developer, IT Pro
ms.reviewer: v-chgriffin
ms.search.region: Global
ms.author: brshoo
ms.search.validFrom: 2020-02-13
ms.openlocfilehash: 91b9d99dfd8c3d100ca197aa499ca86799bbffc8
ms.sourcegitcommit: 774f8f97a0b14cf1199bd1802178ccf536a25ade
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/17/2022
ms.locfileid: "9785308"
---
# <a name="create-user-flow-policies"></a>Создание политик потока пользователей

[!include [banner](includes/banner.md)]

В этой статье описывается создание политик потока пользователей на портале Microsoft Azure.

Потоки пользователей — это политики, которые Azure Active Directory (Azure AD) "бизнес-клиент" (B2C) использует для обеспечения безопасности входа в систему, регистрации, редактирования профиля и функции забытого пароля пользователя. Dynamics 365 Commerce использует эти потоки для выполнения действий политики по взаимодействию с клиентом Azure AD B2C. Когда пользователь взаимодействует с этими политиками, он перенаправляется на клиент Azure AD B2C для выполнения этих действий.

Azure AD B2C предоставляет три основных типа потоков пользователей:
- Регистрация и вход
- Изменение профиля
- Сброс пароля

Можно использовать потоки пользователей по умолчанию, предоставляемые Azure AD, которые будут показывать страницу, размещенную в Azure AD B2C. Кроме того, можно создать HTML-страницу для управления внешним видом этих потоков пользователей. 

Чтобы настроить страницы политики пользователя со страницами, созданными для Dynamics 365 Commerce, см. раздел [Настройка пользовательских страниц для учетных записей пользователей](custom-pages-user-logins.md). Дополнительные сведения см. в разделе [Настройка интерфейса взаимодействия с пользователями в Azure Active Directory B2C](/azure/active-directory-b2c/tutorial-customize-ui).

### <a name="create-a-sign-up-and-sign-in-user-flow-policy"></a>Создание политики потока пользователей для регистрации и входа в систему

Чтобы создать регистрацию и вход в политике потока пользователя, выполните следующие действия.

1. На портале Azure выберите **Потоки пользователей (политики)** в левой области переходов.
1. На странице **Azure AD B2C – Потоки пользователей (политики)** выберите пункт **Создать поток пользователей**.
1. Выберите политику **Регистрация и вход**, затем выберите версию **Рекомендуемая**.
1. В поле **Имя** введите имя политики. Это имя впоследствии будет отображаться с префиксом, назначенным порталом (например, "B2C_1_").
1. В разделе **Поставщики удостоверений** в разделе **Локальные учетные записи** выберите **Регистрация по электронной почте**. Проверка подлинности по электронной почте используется в наиболее распространенных сценариях для Commerce. Если также используется проверка подлинности поставщика удостоверений в социальных сетях, вы можете выбрать их в данный момент.
1. В группе **Многофакторная проверка подлинности** выберите подходящий вариант для вашей компании. 
1. В разделе **Атрибуты и заявки пользователей** выберите параметры для сбора атрибутов или возврата заявок, если необходимо. Выберите **Показать больше...**, чтобы получить полный список атрибутов и параметров утверждений. Для Commerce требуются следующие параметры по умолчанию:

    | **Собрать атрибут** | **Заявка на возврат** |
    | ---------------------- | ----------------- |
    | Адрес электронной почты          | Адреса электронной почты   |
    | Данное имя             | Данное имя        |
    |                        | Поставщик удостоверений |
    | Фамилия                | Фамилия           |
    |                        | Код объекта пользователя  |

1. Выберите **Создать**.

На следующем рисунке показан пример потока пользователей Azure AD B2C для регистрации и входа.

![Настройки политики регистрации и входа.](./media/B2CImage_11.png)

   
### <a name="create-a-profile-editing-user-flow-policy"></a>Создание политики потока пользователей для редактирования профиля

Чтобы создать политику потока пользователя для редактирования профиля, выполните следующие действия.

1. На портале Azure выберите **Потоки пользователей (политики)** в левой области переходов.
1. На странице **Azure AD B2C – Потоки пользователей (политики)** выберите пункт **Создать поток пользователей**.
1. Выберите **Редактирование профиля**, затем выберите версию **Рекомендуемая**.
1. В поле **Имя** введите поток пользователя для редактирования профиля. Это имя впоследствии будет отображаться с префиксом, назначенным порталом (например, "B2C_1_").
1. В разделе **Поставщики удостоверений** в разделе **Локальные учетные записи** выберите **Вход по электронной почте**.
1. В разделе **Атрибуты пользователя** установите следующие флажки:
    
    | **Собрать атрибут** | **Заявка на возврат** |
    | ---------------------- | ----------------- |
    |                        | Адреса электронной почты   |
    | Данное имя             | Данное имя        |
    |                        | Поставщик удостоверений |
    | Фамилия                | Фамилия           |
    |                        | Код объекта пользователя  |
    
1. Выберите **Создать**.

На следующем рисунке показан пример потока пользователя Azure AD B2C для редактирования профиля.

![Пример потока пользователя для редактирования профиля Azure AD B2C](./media/B2CImage_12.png)

### <a name="create-a-password-reset-user-flow-policy"></a>Создание политики потока пользователей для сброса пароля

Чтобы создать политику потока пользователя для сброса пароля, выполните следующие действия.

1. На портале Azure выберите **Потоки пользователей (политики)** в левой области переходов.
1. На странице **Azure AD B2C – Потоки пользователей (политики)** выберите пункт **Создать поток пользователей**.
1. Выберите **Сброс пароля**, затем выберите версию **Рекомендуемая**.
1. В поле **Имя** введите имя потока пользователей для сброса пароля.
1. В разделе **Поставщики удостоверений** выберите **Сбросить пароль, используя адрес электронной почты**.
1. Выберите **Создать**.
1. В разделе **Заявки приложений** установите следующие флажки:
    - **Адреса электронной почты**
    - **Данное имя**
    - **Фамилия**
    - **Код объекта пользователя**
1. Выберите **Создать**.

На следующем рисунке показано, где можно установить **Сброс пароля с помощью адреса электронной почты** в потоке пользователя Azure AD B2C для сброса пароля.

![Установка значения "Сброс пароль с помощью адреса электронной почты" в политике сброса пароля](./media/B2CImage_13.png)

## <a name="next-steps"></a>Далее

Чтобы продолжить процесс настройки клиента B2C в Commerce, переходите к разделу [Добавление поставщиков удостоверений в социальных сетях](add-social-identity-providers.md).

## <a name="additional-resources"></a>Дополнительные ресурсы

[Настройка клиента B2C в Commerce](set-up-b2c-tenant.md)

[Создание или связывание существующего клиента Azure AD B2C с порталом Azure](create-link-aad-b2c-tenant.md)

[Создание приложения B2C](create-b2c-app.md)

[Добавление поставщиков удостоверений в социальных сетях (дополнительно)](add-social-identity-providers.md)

[Обновление Commerce headquarters с учетом новой информации Azure AD B2C](update-hq-aad-b2c-info.md)

[Настройка клиента B2C в конфигураторе сайта Commerce](config-b2c-tenant-site-builder.md)

[Дополнительные сведения B2C](additional-b2c-info.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
