---
title: Выделенные платежные терминалы и запросы на принтер и кассовый лоток
description: В этой теме представлены сведения о возможности использования выделенного платежного терминала и запроса пользователя о выборе кассового лотка и принтера чеков.
author: rubendel
manager: AnnBe
ms.date: 05/20/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.custom: 141393
ms.assetid: e23e944c-15de-459d-bcc5-ea03615ebf4c
ms.search.region: Global
ms.search.industry: Retail
ms.author: rubendel
ms.search.validFrom: 2019-03-31
ms.dyn365.ops.version: AX 7.0.1
ms.openlocfilehash: 72142a3e05092a2da7749fa01ec58e2c1d8fe25d
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/15/2021
ms.locfileid: "4972613"
---
# <a name="dedicated-payment-terminals-and-prompts-for-a-printer-and-cash-drawer"></a>Выделенные платежные терминалы и запросы на принтер и кассовый лоток

[!include [banner](includes/banner.md)]

В этой теме представлены сведения о возможности использования выделенного платежного терминала и запроса пользователя о выборе кассового лотка и принтера чеков.

## <a name="overview"></a>Обзор

Современные розничные предприятия ищут способы упрощения процесса оформления заказов в магазине. Последние тенденции в области безбумажного оформления заказов через электронные платежи не только упрощают покупки, но также снижают потребность в полном комплекте периферийных устройств для каждого продавца в магазине.

Microsoft Dynamics 365 Commerce поддерживает такие тенденции, реализуя сценарий, когда у POS-устройства есть постоянный специальный платежный терминал, но нет собственного принтера чеков или кассового лотка. Когда продавцы должны распечатать чек или принять оплату наличными, выводится приглашение выбрать станцию оборудования, где настроены эти устройства.

## <a name="key-terms"></a>Ключевые термины

| Срок | описание |
|---|---|
| Регистрация | Объект, который используется для настройки экземпляра POS-регистратора. |
| Устройство | Представление физического экземпляра POS-регистратора и назначенного ему приложения Modern POS. |
| Выделенная станция оборудования | Бизнес-логика станции оборудования встроена в приложения Modern POS для Windows и Modern POS для Android. |
| Порт открывания лотка (d/k) | Традиционный способ подключения кассового лотка к принтеру чеков. |
| Сетевые периферийные устройства | Встроенная поддержка для платежных терминалов с поддержкой сети, принтеров чеков и кассовых лотков. |

## <a name="supported-pos-clients-and-devices"></a>Поддерживаемые клиенты и устройства POS

Функциональные возможности, описанные в этой теме, поддерживаются Modern POS для Windows и Modern POS для Android для клиентов POS.

Эта функция поддерживает сетевые платежные терминалы и принтеры чеков. Можно обеспечить поддержку кассового лотка, подключив кассовый лоток к принтеру чеков с поддержкой сети через порт d/k.

Готовая поддержка этих функциональных возможностей обеспечивается [соединителем платежей Dynamics 365 для Adyen](https://docs.microsoft.com/dynamics365/commerce/dev-itpro/adyen-connector?tabs=8-1-3). Однако другие соединители платежей могут поддерживаться с помощью SDK Commerce для платежей. Поддерживаемые принтеры чеков включают в себя принтеры с поддержкой сети Star Micronics и Epson.

Для настройки принтеров чеков Star Micronics, используйте Star Micronics Printer Utility для настройки принтера, чтобы его можно было использовать в сети. Кроме того, служебная программа предоставляет IP-адрес устройства.

Для настройки принтеров чеков Epson используйте служебную программу Epson ePOS-Print, чтобы настроить устройство для использования сетевых протоколов.

Дополнительные сведения о настройке сетевых периферийных устройств см. в разделе [Обзор поддержки сетевых периферийных устройств](https://go.microsoft.com/fwlink/?linkid=2129965).

## <a name="set-up-a-dedicated-payment-terminal-and-a-prompt-for-a-printer-and-cash-drawer"></a>Настройка выделенного платежного терминала и запроса для принтера и кассового лотка

### <a name="set-up-hardware-profiles"></a>Настройка профилей оборудования

Необходимо наличие двух типов профилей оборудования. Первый назначается ККМ. Второй назначается станции оборудования на уровне магазина и используется для логической группировки сетевых принтеров чеков и кассовых лотков.

#### <a name="set-up-a-hardware-profile-for-the-register"></a>Настройка профиля оборудования для ККМ

Чтобы настроить профиль оборудования, назначенный ККМ, выполните следующие действия.

1. В Dynamics 365 Commerce найдите **Профиль оборудования**.
2. Выберите **Создать**.
3. Назначьте номер профиля оборудования, а затем введите описание. Этот профиль оборудования будет назначен для самой ККМ. Таким образом, достаточно описания, например, **Выделенная с возвратом**.
4. На экспресс-вкладках для различных типов устройств настройте следующие типы устройств:

    | Устройство | Вид | Наименование устройства | Дополнительные сведения |
    |---|---|---|---|
    | Принтер | Откат | *Любой* | Название устройства вводится с учетом регистра. **Код профиля чеков** должен совпадать с **кодом профиля чеков**, который сопоставлен с сетевым принтером, настроенным в профиле оборудования, который назначен станции оборудования на уровне канала. |
    | Кассовый лоток | Откат | *Любой* | Название устройства вводится с учетом регистра. Укажите для **Использование совместных смен** вариант **Да**. |
    | Услуга электронного платежа | Adyen | Неприменимо | Сведения о настройке готового соединителя Adyen см. в разделе [Соединитель платежей Dynamics 365 для Adyen](https://docs.microsoft.com/dynamics365/commerce/dev-itpro/adyen-connector?tabs=8-1-3). Другие соединители платежей могут поддерживаться с помощью [SDK Commerce для платежей](https://docs.microsoft.com/dynamics365/commerce/dev-itpro/end-to-end-payment-extension). |
    | Клавиатура для набора ПИН-кода | Сеть | **MicrosoftAdyenDeviceV001** | Нет. |

5. В Dynamics 365 Commerce найдите **ККМ**.
6. Выберите ККМ, выбрав номер ККМ, а затем нажмите **Правка**.
7. Назначьте только что созданный профиль оборудования для ККМ, которая должна использовать выделенный платежный терминал. Устройство, сопоставленное с этой ККМ, должно использовать либо Modern POS для Windows", либо Modern POS для приложения Android.
8. Нажмите **Сохранить**.
9. На вкладке **ККМ** в области действий выберите **Настроить IP-адреса**.
10. На экспресс-вкладке **Клавиатура для набора ПИН-кода** введите IP-адрес платежного терминала. Сведения о том, как получить IP-адрес платежного терминала с помощью соединителя Adyen, см. в разделе [Соединитель платежей Dynamics 365 для Adyen](https://docs.microsoft.com/dynamics365/commerce/dev-itpro/adyen-connector?tabs=8-1-3).
11. Нажмите **Сохранить**.

#### <a name="set-up-a-hardware-profile-for-the-receipt-printer-and-cash-drawer"></a>Настройка профиля оборудования для принтера чеков и кассового лотка

Чтобы настроить профиль оборудования, используемый для группировки принтера чеков с поддержкой сети и кассового лотка, выполните следующие действия.

1. В Dynamics 365 Commerce найдите **Профиль оборудования**.
2. Выберите **Создать**.
3. Назначьте номер профиля оборудования, а затем введите описание. Этот профиль оборудования будет использоваться для группировки принтера чеков и кассового лотка. Таким образом, достаточно описания **Сетевой принтер и кассовый лоток**.
4. На экспресс-вкладках для различных типов устройств настройте следующие типы устройств:

    | Устройство | Вид | описание | Дополнительные сведения |
    |---|---|---|---|
    | Принтер | Сеть | **Epson** или **Star** | Название устройства вводится с учетом регистра. **Код профиля чеков** должен совпадать с **кодом профиля чеков**, который сопоставлен с принтером, настроенным в профиле оборудования, который назначен для ККМ. |
    | Кассовый лоток | Сеть | **Epson** или **Star** | Название устройства вводится с учетом регистра. Укажите для **Использование совместных смен** вариант **Да**. |

5. Нажмите **Сохранить**.

### <a name="set-up-hardware-stations"></a>Настройка станций оборудования

Необходимо наличие двух станций оборудования. Первая будет сопоставлена с ККМ. Вторая будет выбрана при необходимости, когда потребуется печать чека или открытие кассового лотка.

#### <a name="register-a-hardware-station"></a>Регистрация станции оборудования

1. В Dynamics 365 Commerce найдите **Все магазины**.
2. Выберите магазин, выбрав его значения **Код канала розничной торговли**, а затем нажмите **Правка**.
3. На экспресс-вкладке **Станции оборудования** выберите **Добавить**.
4. Установите для поля **Тип станции оборудования** значение **Выделенный**.
5. Введите описание, но не задавайте никаких других значений для данной станции оборудования. Данная станция оборудования будет постоянно использоваться для ККМ. 

#### <a name="set-up-a-hardware-station-for-the-receipt-printer-and-cash-drawer"></a>Настройка станции оборудования для принтера чеков и кассового лотка

1. В Dynamics 365 Commerce найдите **Все магазины**.
2. Выберите магазин, выбрав его значения **Код канала розничной торговли**, а затем нажмите **Правка**.
3. На экспресс-вкладке **Станции оборудования** выберите **Добавить**.
4. Установите для поля **Тип станции оборудования** значение **Выделенный**.
5. Введите описание. Эта станция оборудования будет использоваться для принтера чеков и кассового лотка.
6. В поле **Профиль оборудования** выберите профиль оборудования, который ранее был создан для принтера чеков и кассового лотка.
7. Нажмите **Сохранить**.
8. В то время как станция оборудования для принтера чеков и кассового лотка остается выбранной, выберите **Настроить IP-адреса**.
9. Получите IP-адрес принтера и введите его в качестве IP-адреса как для принтера чеков, так и для кассового лотка.
10. Нажмите **Сохранить**.
11. Найдите **Графики распределения**.
12. Выберите график распределения **1090**, а затем выберите **Выполнить**.
13. Выберите график распределения **1070**, а затем выберите **Выполнить**.

### <a name="set-up-the-system-to-prompt-for-receipt-printer-and-cash-drawer-selection-as-its-required"></a>Настройка системы на запрос принтера чеков и выбор кассового лотка по мере необходимости

1. В поддерживаемом клиенте POS закройте текущую смену, если она открыта.
2. Выполните вход, а затем выберите **Операции, не связанные с кассовым лотком**.
3. Используйте операцию **Управление станциями оборудования**, чтобы включить станцию оборудования.
4. Выберите станцию оборудования, созданную для ККМ, чтобы сделать ее активной.
5. Выйдите из POS, затем снова войдите и откройте смену.

Платежный терминал, назначенный профилю оборудования, теперь всегда будет активным, и вам будет предложено указать, нужен ли принтер чеков или кассовый лоток.

Многие продавцы, которые запросили эту функцию, заинтересованы в уменьшении отходов, представляя чеки по электронной почте и поощряя электронные платежи. В зависимости от конфигурации POS, продавцам магазина предлагается выбрать принтер чеков или кассовый лоток только в том случае, когда клиент хочет получить физический чек или оплатить наличными.

Продавцам магазина предлагается выбрать станцию оборудования только один раз для каждой проводки, пока не потребуется распечатать чек и использовать наличные для оплаты, и при этом в выбранном изначально профиле оборудования не указаны оба устройства. В этом случае продавцу магазина снова будет предложено выбрать станцию оборудования, которую можно использовать для завершения проводки.

## <a name="related-articles"></a>Связанные статьи

- [Настройка приложения POS Hybrid в Android и iOS](https://docs.microsoft.com/dynamics365/commerce/dev-itpro/hybridApp)
- [Соединитель платежей Dynamics 365 для Adyen](https://docs.microsoft.com/dynamics365/commerce/dev-itpro/adyen-connector?tabs=8-1-3)
- [Обзор поддержки сетевых периферийных устройств](https://go.microsoft.com/fwlink/?linkid=2129965)
