---
title: Проблемы синхронизации асинхронных заказов
description: В этой статье описываются общие причины сбоев при создании асинхронных заказов в Microsoft Dynamics 365 Commerce, и описываются шаги по устранению неполадок, которые помогают пользователям системы и партнерам понять, что пошло не так.
author: Shajain
ms.date: 11/30/2022
ms.topic: Troubleshooting
audience: Application User, Developer, IT Pro
ms.reviewer: v-chgriffin
ms.search.region: Global
ms.author: rassadi
ms.search.validFrom: 2021-01-31
ms.openlocfilehash: 27bccced3c07149fe1842524660447a49f86f3fc
ms.sourcegitcommit: 2804b05214c87f76457608b5db072582ff339852
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/01/2022
ms.locfileid: "9815765"
---
# <a name="asynchronous-order-synchronization-issues"></a>Проблемы синхронизации асинхронных заказов

[!include [banner](../../includes/banner.md)]

В этой статье описываются общие причины сбоев при создании асинхронных заказов в Microsoft Dynamics 365 Commerce, и описываются шаги по устранению неполадок, которые помогают пользователям системы и партнерам понять, что пошло не так.

## <a name="symptom"></a>Проблема

Асинхронные заказы, создаваемые из Dynamics 365 Commerce для электронной коммерции или POS, не отражаются в Commerce Headquarters.

## <a name="troubleshooting"></a>Устранение неполадок

Создание заказа может заканчиваться неудачей в Headquarters по разным причинам, в зависимости от этапа, на котором процесс создания заказа заканчивается неудачей. В приведенных ниже действиях по устранению неполадок рассматриваются все возможные исходные причины.

### <a name="validate-that-the-transaction-related-to-the-asynchronous-order-has-reached-headquarters"></a>Проверьте, что проводка, связанная с асинхронным заказом, достигла Headquarters

Для заказов в электронной коммерции в Headquarters перейдите в **Retail и Commerce \> Запросы и отчеты \> Проводки интернет-магазина**. Если у вас есть номер подтверждения для заказа, отфильтруйте проводки путем ввода номера подтверждения в поле **Код ссылки на канал**. При отсутствии номера подтверждения отфильтруйте проводки путем ввода номера счета клиента.

Для POS-заказов откройте страницу **Проводки магазина** и отфильтруйте записи по номеру чека или номеру счета клиента. Если проводка не найдена, запустите задание по каналу **P-0001**, которое синхронизирует проводки из каналов в Headquarters. Если выполнить задание **P-0001** не удается, создайте запрос в службу поддержки для этого сбоя задания. Если задание **P-0001** выполняется успешно, но проводки по-прежнему не отображаются в Headquarters, создайте запрос в службу поддержки, указав соответствующую информацию.
 
### <a name="check-the-synchronization-status-if-the-transaction-is-present-in-headquarters-but-isnt-linked-with-a-sales-order"></a>Проверьте статус синхронизации, если проводка существует в Headquarters, но не связана ни с каким заказом на продажу

Если проводка представлена в Headquarters, но заказ на продажу не создан, откройте страницу **Проводки интернет-магазина** и выберите экспресс-вкладку **Статус синхронизации**. Если задание **Синхронизация заказов** пыталось синхронизировать эту проводку, в поле **Статус ожидающего заказа** должно отображаться значение **Выполнено** или **Неудача**. Если статус — **Выполнено**, поле заказа на продажу должно быть представлено в этой проводке Если статус — **Неудача**, можно просмотреть подробные сведения об ошибке в поле **Сведения об ошибке заказа** на экспресс-вкладке **Статус синхронизации**. Если ни один из этих статусов не указан, то для обработки проводки не было выполнено никаких попыток. В этом случае можно выбрать **Синхронизировать заказ** в верхней части страницы для запуска задания синхронизации.

Убедитесь, что задание **Синхронизация заказов** запланировано для периодического выполнения, чтобы асинхронные транзакции могли создаваться как заказы в Headquarters.

В следующих разделах приводятся сведения о некоторых распространенных ошибках и предлагаемых исправлениях.

#### <a name="the-order-error-details-field-shows-the-following-error-message-number-sequence-has-been-exceeded"></a>В поле Сведения об ошибке заказа отображается следующее сообщение об ошибке: "Номерная серия превышена"

Номерные серии используются для создания заказов на продажу в Headquarters. Если все номера, разрешенные для номерной серии, исчерпаны, система создает это сообщение об ошибке. Номерную серию, используемую для создания заказов на продажу, можно найти в модуле **Параметры расчетов с клиентами \> Номерные серии \> Заказ на продажу**. Чтобы устранить эту ошибку, исправьте существующую номерную серию или замените ее новой номерной серией.

#### <a name="the-order-error-details-field-shows-the-following-error-message-there-must-be-a-default-payment-service-to-process-credit-card-transactions"></a>В поле Сведения об ошибке заказа отображается следующее сообщение об ошибке: "Для обработки проводок кредитной карты должна использоваться служба платежей по умолчанию"

Чтобы устранить эту ошибку, убедитесь, что платеж по умолчанию определен в Headquarters. Если платеж по умолчанию не определен, необходимо определить его. Перейдите к модулю **Расчеты с клиентами \> Настройка платежей \> Платежные службы** и убедитесь, что для параметра **Процессор по умолчанию для новых кредитных карт** выбрано значение **Да** для одной платежной службы.
    
#### <a name="the-order-error-details-field-shows-an-account-structure-error-message"></a>В поле Сведения об ошибке заказа отображается сообщение об ошибке структуры счета

Текст сообщения об ошибке структуры счета может различаться, как показано в следующих примерах. Однако эти ошибки объединяет общая основная причина, которая связана с конфигурацией структуры счета.

- "Разноска результатов для номера пакета журнала 0009656328 ваучер ARP-000959899 1,00 для ваучера ARP-000959899 в компании usrt будет разнесена в виде переплаты или недоплаты"
- "Разноска результатов для номера пакета журнала 0009656328 ваучер ARP-000959899 ваучер ARP-000959901 структуры счетов для комбинации 618160 недействительна для общего счета ГК корпоративного счета"
- "Разноска результатов для номера пакета журнала 0009656328 ваучер ARP-000959899 ваучер ARP-000959901, учтенной из счетов компании usrt"
- "Разноска результатов для номера пакета журнала 0009656328 ваучер ARP-000959899 Разноска была отменена"
    
Для устранения этих ошибок проверьте точность структур счетов. Дополнительные сведения см. в разделе [Настройка структур счетов](/dynamics365/finance/general-ledger/configure-account-structures).
    
После исправления ошибки выберите неудачную транзакцию, а затем выберите **Синхронизировать заказ** в верхней части страницы для запуска задания синхронизации.
    
#### <a name="other-types-of-errors-that-might-require-the-transaction-data-to-be-fixed"></a>Другие типы ошибок, которые могут потребовать исправления данных проводок

Для устранения других типов ошибок, которые могут потребовать исправления данных проводок, можно использовать функцию "изменение и аудит проводок". Для получения дополнительной информации см. [Изменение и аудит проводок](../edit-order-trans.md).
