---
title: Редактирование и аудит кассовых проводок и проводок управления кассами
description: В этой статье описывается редактирование и аудит кассовых проводок и проводок управления кассами в Microsoft Dynamics 365 Commerce.
author: josaw1
ms.date: 11/04/2020
ms.topic: index-page
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.custom: ''
ms.assetid: ed0f77f7-3609-4330-bebd-ca3134575216
ms.search.region: global
ms.search.industry: Retail
ms.author: josaw
ms.search.validFrom: 2018-11-15
ms.dyn365.ops.version: ''
ms.openlocfilehash: cab28dee425110f47a4e2ec5a737778dd567d786
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/03/2022
ms.locfileid: "8873340"
---
# <a name="edit-and-audit-cash-and-carry-and-cash-management-transactions"></a>Редактирование и аудит кассовых проводок и проводок управления кассами

[!include [banner](../includes/banner.md)]

В этой статье описывается редактирование и аудит кассовых проводок и проводок управления кассами в Microsoft Dynamics 365 Commerce.

## <a name="overview"></a>Обзор

Клиенты Dynamics 365 Commerce используют и собственные, и сторонние POS-приложения. В случае собственного приложения проводки магазина переносятся в Commerce Headquarters из каналов в процессе пакетной обработки. В случае сторонних приложений проводки переносятся в Commerce Headquarters через интеграцию. В обоих случаях после переноса проводок в Commerce Headquarters необходимо выполнить процесс проверки целостности. В ходе этого процесса выполняется несколько проверок проводок, и в журнал операций переносятся только успешно проверенные проводки для разноски в Commerce Headquarters.

Проверка проводок Commerce может оказаться неудачной по разным причинам. Ошибка в коде интеграции или в POS-приложении может привести к несогласованности данных. Либо ошибка пользователя может привести к несогласованности данных. Например, пользователь удаляет продукт после его синхронизации с каналом или закрывает финансовый период без разноски проводок за этот период. Хотя эти проводки помечаются и исключаются из журналов операций, они могут повлиять на повседневные операции разноски операций. В Commerce можно редактировать проводки, которые не прошли проверку, и при этом сохранять историю всех изменений.

## <a name="edit-transactions"></a>Изменение проводок

В Commerce 10.0.5 можно редактировать только кассовые проводки, такие как продажи и возвраты. Заказы клиентов и интернет-заказы редактировать невозможно. В Commerce 10.0.6 и более поздних версиях также можно редактировать проводки управления кассами.

Чтобы изменить проводки в Commerce Headquarters, выполните следующие действия.

1. Установите [Microsoft Dynamics Office Add-in](https://appsource.microsoft.com/product/office/WA104379629?tab=Overview).
1. В Commerce Headquarters откройте рабочую область **Финансовая информация магазина**. Плитка **Ошибки проверки проводок** содержит предварительно отфильтрованное представление страницы проводки, для которой не соблюдается одно или несколько правил проверки.
1. Откройте страницу проводки, выберите запись, которая не прошла проверку, выберите **Office Add in** и нажмите **Изменить выбранную проводку**. Откроется файл Excel, содержащий сведения о выбранной проводке. Этот файл содержит следующие листы:

    - **Строки** — на этом листе имеются строки заголовка и продуктов для проводки, а также соответствующие данные по проводке.
    - **Платежи** — на этом листе содержатся сведения о строках платежей для проводки.
    - **Скидки** — на этом листе содержатся сведения о скидках для проводки.
    - **Налоги** — на этом листе содержатся сведения о налогах для проводки.
    - **Накладные расходы** — на этом листе содержатся сведения о накладных расходах для проводки.

1. В файле Excel измените соответствующие поля, а затем отправьте эти данные назад в Commerce Headquarters с помощью функции публикации в надстройке Dynamics Excel. После публикации данных изменения будут отражены в системе. Во время публикации вносимые пользователями изменения не проверяются.
1. Чтобы просмотреть полный журнал аудита, выберите **Просмотреть журнал аудита** в заголовке **Проводка розничной торговли** для изменений на уровне заголовка или откройте соответствующий раздел и запись на соответствующей странице проводки. Например, все изменения, связанные со строками продаж, будут отображаться на странице **Проводки по продажам**, а все изменения, связанные с платежами, будут отображаться на странице **Проводки по оплате**. Для изменений сохраняются следующие сведения аудита:

    - Дата и время изменения
    - Поле
    - Старое значение
    - Новое значение
    - Кем изменено

1. После внесения и публикации изменений выберите команду **Проверить проводки магазина**, чтобы убедиться в том, что эти изменения правильны и согласованы.

> [!NOTE]
> Редактировать можно только проводки, не прошедшие проверку. Если необходимо изменить проводку, которая прошла проверку, измените статус проверки такой проводки на **Ошибка** или **Нет**, затем опубликуйте изменение. После этого можно изменить данные в заголовке или любых других дочерних записях проводки и опубликовать заголовок или записи.

## <a name="bulk-edit-transactions-that-are-linked-to-a-statement"></a>Массовое изменение проводок, связанных с журналом операций

В Commerce 10.0.6 и более поздних версиях поддерживается массовое изменение проводок на уровне журнала операций.

Для массового изменения проводок, связанных с журналом операций, в Commerce Headquarters, выполните следующие действия.

1. Откройте страницу **Журналы операций** и выберите журнал операций, содержащий проводки, которые необходимо изменить.
1. Нажмите кнопку **Открыть в Microsoft Office**.
1. В зависимости от того, что необходимо изменить, выберите один из следующих параметров:

    - **Изменить кассовые проводки** — этот параметр позволяет изменять все кассовые проводки, включенные в журнал операций. Доступны следующие листы Excel:

        - **Проводка** — на этом листе приведена вся информация уровня заголовков по всем проводкам продаж.
        - **Проводка продаж** — на этом листе приведена вся информация уровня строк по всем проводкам продаж.
        - **Проводки по оплате** — на этом листе приведена вся информация строк оплаты по всем проводкам продаж.
        - **Проводки по скидкам** — на этом листе приведена вся информация строк скидок по всем проводкам продаж.
        - **Налоговые проводки** — на этом листе приведена вся информация строк налогов по всем проводкам продаж.
        - **Проводки накладных расходов** — на этом листе приведена вся информация строк накладных расходов по всем проводкам продаж.

    - **Изменить проводки управления кассами** — этот параметр позволяет изменять все проводки управления кассами, включенные в журнал операций. Доступны следующие листы Excel:

        - **Проводка** — на этом листе приведена вся информация уровня заголовков по всем проводкам управления кассами.
        - **Проводки по платежному средству для внесения в банк** — на этом листе приведена вся информация по проводкам внесения средств в банк.
        - **Проводки по платежному средству для внесения в сейф** — на этом листе приведена вся информация по проводкам внесения средств в сейф.
        - **Декларирование платежных средств** — на этом листе приведена вся информация по проводкам декларирования платежных средств.
        - **Проводки по доходам/расходам** — на этом листе приведена вся информация по строкам проводок по доходам и расходам.
        - **Проводки по оплате** — на этом листе приведена вся информация по платежам для операции **Оплата накладной**, а также по проводкам по доходам и расходам.

1. Измените требуемые проводки.

    > [!NOTE]
    > При публикации массово измененных проводок проверка не выполняется. Необходимо следить за точностью изменений и согласованностью данных на всех листах. Например, если вам нужно изменить дату проводки в ситуации, когда финансовый или учетный период для открытой проводки был закрыт, необходимо изменить эту дату на всех листах Excel, на которых есть столбец **Бизнес-дата**. Чтобы проверить проводки после их изменения, воспользуйтесь командой **Заново проверить проводки** на странице **Журналы операций**. Дождитесь завершения задания проверки, прежде чем публиковать журнал операций.

1. Если агрегирование уже создано, откройте страницу **Агрегированные проводки** и выберите **Повторно создать XML заказа на продажу**.

## <a name="bulk-edit-transactions-that-arent-linked-to-a-statement"></a>Массовое изменение проводок, не связанных с журналом операций

В Commerce 10.0.10 и более поздних версиях поддерживается возможность массового изменения проводок, которые не прошли проверку, но не связаны с журналом операций.

Для массового изменения проводок, не связанных с журналом операций, в Commerce Headquarters, выполните следующие действия.

1. Откройте страницу **Все магазины** и выберите магазин, для которого необходимо изменить проводки.
1. Нажмите кнопку **Открыть в Microsoft Office** и выберите **Изменить кассовые проводки**.
1. Измените необходимые проводки и опубликуйте их.

## <a name="additional-resources"></a>Дополнительные ресурсы

[Редактирование и аудит проводок интернет-заказов и асинхронных проводок заказов клиентов](edit-order-trans.md)

[Изменение финансовых аналитик для проводок розничной торговли](edit-financial-dim.md)

[Создание книги Excel для редактирования проводок розничной торговли](create-excel-edit.md)

[Добавление полей в книгу Excel для редактирования проводок розничной торговли](add-fields-excel.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]