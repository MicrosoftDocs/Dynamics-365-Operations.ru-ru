---
title: Настройка финансовой интеграции для каналов Commerce
description: В этом разделе приводятся инструкции по настройке функции финансовой интеграции для каналов Commerce.
author: josaw
ms.date: 02/01/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: RetailFunctionalityProfile, RetailFormLayout, RetailParameters
audience: Application User
ms.reviewer: josaw
ms.search.region: Global
ms.search.industry: Retail
ms.author: epopov
ms.search.validFrom: 2018-11-1
ms.dyn365.ops.version: 8.1.1
ms.openlocfilehash: 2ac8dc8787ab0bdb796ec849f9ede3f697b09680
ms.sourcegitcommit: 74e47075eab2b0b28f82b0d57f439719847ecb01
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/07/2021
ms.locfileid: "6193652"
---
# <a name="set-up-the-fiscal-integration-for-commerce-channels"></a><span data-ttu-id="03f82-103">Настройка финансовой интеграции для каналов Commerce</span><span class="sxs-lookup"><span data-stu-id="03f82-103">Set up the fiscal integration for Commerce channels</span></span>

[!include [banner](../includes/banner.md)]

## <a name="introduction"></a><span data-ttu-id="03f82-104">Введение</span><span class="sxs-lookup"><span data-stu-id="03f82-104">Introduction</span></span>

<span data-ttu-id="03f82-105">В этом разделе приводятся инструкции по настройке функции финансовой интеграции для каналов Commerce.</span><span class="sxs-lookup"><span data-stu-id="03f82-105">This topic provides guidelines for setting up the fiscal integration functionality for Commerce channels.</span></span> <span data-ttu-id="03f82-106">Дополнительные сведения о финансовой интеграции см. в разделе [Обзор финансовой интеграции для каналов Commerce](fiscal-integration-for-retail-channel.md).</span><span class="sxs-lookup"><span data-stu-id="03f82-106">For more information about the fiscal integration, see [Overview of fiscal integration for Commerce channels](fiscal-integration-for-retail-channel.md).</span></span>

<span data-ttu-id="03f82-107">Процесс настройки финансовой интеграции включает следующие задачи:</span><span class="sxs-lookup"><span data-stu-id="03f82-107">The process of setting up the fiscal integration includes the following tasks:</span></span>

1. <span data-ttu-id="03f82-108">Настройка финансовых соединителей, представляющих финансовые устройства или службы, которые используются для целей финансовой регистрации, например финансовые принтеры.</span><span class="sxs-lookup"><span data-stu-id="03f82-108">Configure fiscal connectors that represent fiscal devices or services that are used for fiscal registration purposes, such as fiscal printers.</span></span>
2. <span data-ttu-id="03f82-109">Настройка поставщиков документов, создающих финансовые документы, которые будут регистрироваться в финансовых устройствах или службах с помощью финансовых соединителей.</span><span class="sxs-lookup"><span data-stu-id="03f82-109">Configure document providers that generate fiscal documents that will be registered in fiscal devices or services by fiscal connectors.</span></span>
3. <span data-ttu-id="03f82-110">Настройка процесса финансовой регистрации, определяющего последовательность шагов финансовой регистрации, и финансовых соединителей и поставщиков финансовых документов, используются для каждого шага.</span><span class="sxs-lookup"><span data-stu-id="03f82-110">Configure the fiscal registration process that defines a sequence of fiscal registration steps and the fiscal connectors and fiscal document providers that are used for each step.</span></span>
4. <span data-ttu-id="03f82-111">Назначение процесса финансовой регистрации профилям функциональности POS.</span><span class="sxs-lookup"><span data-stu-id="03f82-111">Assign the fiscal registration process to point of sale (POS) functionality profiles.</span></span>
5. <span data-ttu-id="03f82-112">Назначение технических профилей соединителей профилям оборудования.</span><span class="sxs-lookup"><span data-stu-id="03f82-112">Assign connector technical profiles to hardware profiles.</span></span>

## <a name="set-up-a-fiscal-registration-process"></a><span data-ttu-id="03f82-113">Настройка процесса финансовой регистрации</span><span class="sxs-lookup"><span data-stu-id="03f82-113">Set up a fiscal registration process</span></span>

<span data-ttu-id="03f82-114">Прежде чем использовать функцию финансовой интеграции, следует настроить следующие параметры.</span><span class="sxs-lookup"><span data-stu-id="03f82-114">Before you use the fiscal integration functionality, you should configure the following settings.</span></span>

1. <span data-ttu-id="03f82-115">Обновление параметров Commerce.</span><span class="sxs-lookup"><span data-stu-id="03f82-115">Update Commerce parameters.</span></span>

    1. <span data-ttu-id="03f82-116">На странице **Общие параметры Commerce** на вкладке **Общие сведения** задайте для параметра **Включить финансовую интеграцию** значение **Да**.</span><span class="sxs-lookup"><span data-stu-id="03f82-116">On the **Commerce shared parameters** page, on the **General** tab, set the **Enable fiscal integration** option to **Yes**.</span></span> <span data-ttu-id="03f82-117">На вкладке **Номерные серии** определите номерные серии для следующих ссылок:</span><span class="sxs-lookup"><span data-stu-id="03f82-117">On the **Number sequences** tab, define the number sequences for the following references:</span></span>

        - <span data-ttu-id="03f82-118">Номер финансового технического профиля</span><span class="sxs-lookup"><span data-stu-id="03f82-118">Fiscal technical profile number</span></span>
        - <span data-ttu-id="03f82-119">Номер группы финансовых соединителей</span><span class="sxs-lookup"><span data-stu-id="03f82-119">Fiscal connector group number</span></span>
        - <span data-ttu-id="03f82-120">Номер процесса регистрации</span><span class="sxs-lookup"><span data-stu-id="03f82-120">Registration process number</span></span>

    2. <span data-ttu-id="03f82-121">На странице **Параметры Commerce** определите номерную серию для номера финансового функционального профиля.</span><span class="sxs-lookup"><span data-stu-id="03f82-121">On the **Commerce parameters** page, define the number sequence for the fiscal functional profile number.</span></span>

    > [!NOTE]
    > <span data-ttu-id="03f82-122">Номерные серии являются необязательными.</span><span class="sxs-lookup"><span data-stu-id="03f82-122">Number sequences are optional.</span></span> <span data-ttu-id="03f82-123">Номера для всех сущностей финансовой интеграции могут создаваться из номерных серий или вручную.</span><span class="sxs-lookup"><span data-stu-id="03f82-123">Numbers for all fiscal integration entities can be generated either from number sequences or manually.</span></span>

2. <span data-ttu-id="03f82-124">Отправьте конфигурации финансовых соединителей и поставщиков финансовых документов.</span><span class="sxs-lookup"><span data-stu-id="03f82-124">Upload configurations of fiscal connectors and fiscal document providers.</span></span>

    <span data-ttu-id="03f82-125">Поставщик фискальных документов отвечает за создание финансовых документов, представляющих проводки и события, которые зарегистрированы в POS, в формате, который также используется для взаимодействия с финансовым устройством или службой.</span><span class="sxs-lookup"><span data-stu-id="03f82-125">A fiscal document provider is responsible for generating fiscal documents that represent transactions and events that are registered on the POS in a format that is also used for the interaction with a fiscal device or service.</span></span> <span data-ttu-id="03f82-126">Например, поставщик финансовых документов может создать представление финансового чека в формате XML.</span><span class="sxs-lookup"><span data-stu-id="03f82-126">For example, a fiscal document provider might generate a representation of a fiscal receipt in an XML format.</span></span>

    <span data-ttu-id="03f82-127">Финансовый соединитель несет ответственность за связь с финансовым устройством или службой.</span><span class="sxs-lookup"><span data-stu-id="03f82-127">A fiscal connector is responsible for the communication with a fiscal device or service.</span></span> <span data-ttu-id="03f82-128">Например, финансовый соединитель может отправить финансовый чек, созданный поставщиком финансовых документов в формате XML, на финансовый принтер.</span><span class="sxs-lookup"><span data-stu-id="03f82-128">For example, a fiscal connector might send a fiscal receipt that a fiscal document provider created in an XML format to a fiscal printer.</span></span> <span data-ttu-id="03f82-129">Дополнительную информацию о компонентах финансовой интеграции см. в разделе [Примеры процесса финансовой регистрации и финансовой интеграции для финансовых устройств](fiscal-integration-for-retail-channel.md#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices).</span><span class="sxs-lookup"><span data-stu-id="03f82-129">For more details about fiscal integration components, see [Fiscal registration process and fiscal integration samples for fiscal devices](fiscal-integration-for-retail-channel.md#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices).</span></span>

    1. <span data-ttu-id="03f82-130">На странице **Финансовые соединители** (**Retail и Commerce \> Настройка канала \> Финансовая интеграция \> Финансовые соединители**) отправьте конфигурацию XML для каждого устройства или службы, которые планируется использовать в целях финансовой интеграции.</span><span class="sxs-lookup"><span data-stu-id="03f82-130">On the **Fiscal connectors** page (**Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal connectors**), upload an XML configuration for each device or service that you plan to use for fiscal integration purposes.</span></span>

        > [!TIP]
        > <span data-ttu-id="03f82-131">Выбрав **Просмотр**, можно просмотреть все функциональные и технические профили, относящиеся к текущему финансовому соединителю.</span><span class="sxs-lookup"><span data-stu-id="03f82-131">By selecting **View**, you can view all functional and technical profiles that are related to the current fiscal connector.</span></span>

    2. <span data-ttu-id="03f82-132">На странице **Поставщики финансовых документов** (**Retail и Commerce \> Настройка канала \> Финансовая интеграция \> Поставщики финансовых документов**) отправьте конфигурацию XML для каждого устройства или службы, которые планируется использовать.</span><span class="sxs-lookup"><span data-stu-id="03f82-132">On the **Fiscal document providers** page (**Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal document providers**), upload an XML configuration for each device or service that you plan to use.</span></span>

        > [!TIP]
        > <span data-ttu-id="03f82-133">Выбрав **Просмотр**, можно просмотреть все функциональные и технические профили, относящиеся к текущему поставщику финансовых документов.</span><span class="sxs-lookup"><span data-stu-id="03f82-133">By selecting **View**, you can view all functional profiles that are related to the current fiscal document provider.</span></span>

    <span data-ttu-id="03f82-134">Примеры конфигураций финансовых соединителей и поставщиков финансовых документов см. в разделе [Примеры финансовой интеграции в пакете SDK Retail](fiscal-integration-for-retail-channel.md#fiscal-integration-samples-in-the-retail-sdk).</span><span class="sxs-lookup"><span data-stu-id="03f82-134">For examples of configurations of fiscal connectors and fiscal document providers, see [Fiscal integration samples in the Retail SDK](fiscal-integration-for-retail-channel.md#fiscal-integration-samples-in-the-retail-sdk).</span></span>

    > [!NOTE]
    > <span data-ttu-id="03f82-135">Сопоставление данных считается частью поставщика финансовых документов.</span><span class="sxs-lookup"><span data-stu-id="03f82-135">Data mapping is considered part of a fiscal document provider.</span></span> <span data-ttu-id="03f82-136">Чтобы настроить сопоставления различных данных для одного соединителя (например, специфичных для государства правил), следует создать различных поставщиков финансовых документов.</span><span class="sxs-lookup"><span data-stu-id="03f82-136">To set up different data mappings for the same connector (for example, state-specific regulations), you should create different fiscal document providers.</span></span>

3. <span data-ttu-id="03f82-137">Создайте функциональные профили соединителей и технические профили соединителей.</span><span class="sxs-lookup"><span data-stu-id="03f82-137">Create connector functional profiles and connector technical profiles.</span></span>

    1. <span data-ttu-id="03f82-138">На странице **Функциональные профили соединителей** (**Retail и Commerce \> Настройка канала \> Финансовая интеграция \> Функциональные профили соединителей**) создайте функциональный профиль соединителей для каждой комбинации финансового соединителя и поставщика финансовых документов, относящихся к этому финансовому соединителю.</span><span class="sxs-lookup"><span data-stu-id="03f82-138">On the **Connector functional profiles** page (**Retail and Commerce \> Channel setup \> Fiscal integration \> Connector functional profiles**), create a connector functional profile for each combination of a fiscal connector and a fiscal document provider that is related to this fiscal connector.</span></span>

        1. <span data-ttu-id="03f82-139">Выберите название соединителя.</span><span class="sxs-lookup"><span data-stu-id="03f82-139">Select a connector name.</span></span>
        2. <span data-ttu-id="03f82-140">Выберите поставщика документов.</span><span class="sxs-lookup"><span data-stu-id="03f82-140">Select a document provider.</span></span>

        <span data-ttu-id="03f82-141">Можно изменить параметры сопоставления данных в функциональном профиле соединителя.</span><span class="sxs-lookup"><span data-stu-id="03f82-141">You can change the data mapping parameters in a connector functional profile.</span></span> <span data-ttu-id="03f82-142">Чтобы восстановить параметры по умолчанию, определенные в конфигурации поставщика финансовых документов, выберите **Обновить**.</span><span class="sxs-lookup"><span data-stu-id="03f82-142">To restore the default parameters that are defined in the fiscal document provider configuration, select **Update**.</span></span>

        <span data-ttu-id="03f82-143">**Примеры**</span><span class="sxs-lookup"><span data-stu-id="03f82-143">**Examples**</span></span>

        | <span data-ttu-id="03f82-144">Параметр</span><span class="sxs-lookup"><span data-stu-id="03f82-144">Parameter</span></span>  | <span data-ttu-id="03f82-145">Форматировать</span><span class="sxs-lookup"><span data-stu-id="03f82-145">Format</span></span> | <span data-ttu-id="03f82-146">Пример</span><span class="sxs-lookup"><span data-stu-id="03f82-146">Example</span></span> |
        |---|--------|---------|
        | <span data-ttu-id="03f82-147">**Настройки ставок НДС**</span><span class="sxs-lookup"><span data-stu-id="03f82-147">**VAT rates settings**</span></span> | <span data-ttu-id="03f82-148">значение : VATrate</span><span class="sxs-lookup"><span data-stu-id="03f82-148">value : VATrate</span></span> | <span data-ttu-id="03f82-149">1 : 2000, 2 : 1800</span><span class="sxs-lookup"><span data-stu-id="03f82-149">1 : 2000, 2 : 1800</span></span> |
        | <span data-ttu-id="03f82-150">**Сопоставление кодов НДС**</span><span class="sxs-lookup"><span data-stu-id="03f82-150">**VAT codes mapping**</span></span> | <span data-ttu-id="03f82-151">VATcode : значение</span><span class="sxs-lookup"><span data-stu-id="03f82-151">VATcode : value</span></span> | <span data-ttu-id="03f82-152">vat20 : 1, vat18 : 2</span><span class="sxs-lookup"><span data-stu-id="03f82-152">vat20 : 1, vat18 : 2</span></span> |
        | <span data-ttu-id="03f82-153">**Сопоставление типов платежных средств**</span><span class="sxs-lookup"><span data-stu-id="03f82-153">**Tender types mapping**</span></span> | <span data-ttu-id="03f82-154">TenderType : значение</span><span class="sxs-lookup"><span data-stu-id="03f82-154">TenderType : value</span></span> | <span data-ttu-id="03f82-155">Наличные : 1, Карта : 2</span><span class="sxs-lookup"><span data-stu-id="03f82-155">Cash : 1, Card : 2</span></span> |

        > [!NOTE]
        > <span data-ttu-id="03f82-156">Функциональные профили соединителя связаны с конкретной компанией.</span><span class="sxs-lookup"><span data-stu-id="03f82-156">Connector functional profiles are company-specific.</span></span> <span data-ttu-id="03f82-157">Если планируется использовать одно и то же сочетание финансового соединителя и поставщика финансовых документов в разных компаниях, вы должны создать функциональный профиль соединителя для каждой компании.</span><span class="sxs-lookup"><span data-stu-id="03f82-157">If you plan to use the same combination of a fiscal connector and a fiscal document provider in different companies, you should create a connector functional profile for each company.</span></span>

    2. <span data-ttu-id="03f82-158">На странице **Технические профили соединителя** (**Retail и Commerce \> Настройка канала \> Финансовая интеграция \> Технические профили соединителей**) создайте технический профиль соединителя для каждого финансового соединителя.</span><span class="sxs-lookup"><span data-stu-id="03f82-158">On the **Connector technical profiles** page (**Retail and Commerce \> Channel setup \> Fiscal integration \> Connector technical profiles**), create a connector technical profile for each fiscal connector.</span></span>

        1. <span data-ttu-id="03f82-159">Выберите название соединителя.</span><span class="sxs-lookup"><span data-stu-id="03f82-159">Select a connector name.</span></span>
        2. <span data-ttu-id="03f82-160">Выберите тип соединителя.</span><span class="sxs-lookup"><span data-stu-id="03f82-160">Select a connector type.</span></span> <span data-ttu-id="03f82-161">Для устройств, подключенных к станции оборудования Hardware Station, выберите **Локальный**.</span><span class="sxs-lookup"><span data-stu-id="03f82-161">For devices that are connected to a Hardware station, select **Local**.</span></span>

            > [!NOTE]
            > <span data-ttu-id="03f82-162">В настоящее время поддерживаются только локальные соединители.</span><span class="sxs-lookup"><span data-stu-id="03f82-162">Only local connectors are currently supported.</span></span>

        <span data-ttu-id="03f82-163">Параметры на вкладках **Устройство** и **Параметры** в техническом профиле соединителя можно изменить.</span><span class="sxs-lookup"><span data-stu-id="03f82-163">Parameters on the **Device** and **Settings** tabs in a connector technical profile can be changed.</span></span> <span data-ttu-id="03f82-164">Чтобы восстановить параметры по умолчанию, определенные в конфигурации финансового соединителя, выберите **Обновить**.</span><span class="sxs-lookup"><span data-stu-id="03f82-164">To restore the default parameters that are defined in the fiscal connector configuration, select **Update**.</span></span> <span data-ttu-id="03f82-165">Во время загрузки новой версии XML-конфигурации вы получите сообщение о том, что текущий финансовый соединитель или поставщик финансовых документов уже используется.</span><span class="sxs-lookup"><span data-stu-id="03f82-165">While a new version of an XML configuration is loaded, you receive a message that states that the current fiscal connector or fiscal document provider is already being used.</span></span> <span data-ttu-id="03f82-166">Эта процедура не переопределяет изменения, которые ранее были вручную внесены в функциональные профили соединителей и технические профили соединителей.</span><span class="sxs-lookup"><span data-stu-id="03f82-166">This procedure doesn't override manual changes that were previously made in connector functional profiles and connector technical profiles.</span></span> <span data-ttu-id="03f82-167">Чтобы применить набор параметров по умолчанию из новой конфигурации, на странице **Функциональные профили соединителей** или **Технические профили соединителей** выберите **Обновить**.</span><span class="sxs-lookup"><span data-stu-id="03f82-167">To apply the default set of parameters from a new configuration, on the **Connector functional profiles** page or the **Connector technical profiles** page, select **Update**.</span></span>

4. <span data-ttu-id="03f82-168">Создайте группы финансовых соединителей.</span><span class="sxs-lookup"><span data-stu-id="03f82-168">Create fiscal connector groups.</span></span>

    <span data-ttu-id="03f82-169">Группа финансовых соединителей объединяет функциональные профили финансовых соединителей, которые выполняют одинаковые функции и используются на одном шаге в процессе финансовой регистрации.</span><span class="sxs-lookup"><span data-stu-id="03f82-169">A fiscal connector group combines functional profiles of fiscal connectors that perform identical functions and are used at the same step of a fiscal registration process.</span></span> <span data-ttu-id="03f82-170">Например, если несколько моделей финансовых принтеров может использоваться в магазине, финансовые соединители для этих финансовых принтеров могут быть объединены в группу финансовых соединителей.</span><span class="sxs-lookup"><span data-stu-id="03f82-170">For example, if several fiscal printer models can be used in a store, fiscal connectors for those fiscal printers can be combined in a fiscal connector group.</span></span>

    1. <span data-ttu-id="03f82-171">На странице **Группа финансовых соединителей** (**Retail и Commerce \> Настройка канала \> Финансовая интеграция \> Группы финансовых соединителей**) создайте новую группу финансовых соединителей.</span><span class="sxs-lookup"><span data-stu-id="03f82-171">On the **Fiscal connector group** page (**Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal connector groups**), create a new fiscal connector group.</span></span>
    2. <span data-ttu-id="03f82-172">Добавление функциональных профилей в группу соединителей.</span><span class="sxs-lookup"><span data-stu-id="03f82-172">Add functional profiles to the connector group.</span></span> <span data-ttu-id="03f82-173">На вкладке **Функциональные профили** выберите **Добавить** и выберите номер профиля.</span><span class="sxs-lookup"><span data-stu-id="03f82-173">On the **Functional profiles** tab, select **Add**, and select a profile number.</span></span> <span data-ttu-id="03f82-174">Каждый финансовый соединитель в группе соединителей может иметь только один функциональный профиль.</span><span class="sxs-lookup"><span data-stu-id="03f82-174">Each fiscal connector in a connector group can only have one functional profile.</span></span>
    3. <span data-ttu-id="03f82-175">Чтобы приостановить использование функционального профиля, задайте для параметра **Отключить** значение **Да**.</span><span class="sxs-lookup"><span data-stu-id="03f82-175">To suspend use of the functional profile, set the **Disable** option to **Yes**.</span></span> <span data-ttu-id="03f82-176">Это изменение затрагивает только текущую группу соединителей.</span><span class="sxs-lookup"><span data-stu-id="03f82-176">This change affects only the current connector group.</span></span> <span data-ttu-id="03f82-177">Можно продолжить использовать этот же функциональный профиль в других группах соединителей.</span><span class="sxs-lookup"><span data-stu-id="03f82-177">You can continue to use the same functional profile in other connector groups.</span></span>

5. <span data-ttu-id="03f82-178">Создайте процесс финансовой регистрации.</span><span class="sxs-lookup"><span data-stu-id="03f82-178">Create a fiscal registration process.</span></span>

    <span data-ttu-id="03f82-179">Процесс финансовой регистрации определяется последовательностью шагов регистрации и группой соединителей, которые используются на каждом шаге.</span><span class="sxs-lookup"><span data-stu-id="03f82-179">A fiscal registration process is defined by the sequence of registration steps and the connector group that is used for each step.</span></span>

    1. <span data-ttu-id="03f82-180">На странице **Процесс финансовой регистрации** (**Retail и Commerce \> Настройка канала \> Финансовая интеграция \> Процессы финансовой регистрации**) создайте новую запись для каждого уникального процесса финансовой регистрации.</span><span class="sxs-lookup"><span data-stu-id="03f82-180">On the **Fiscal registration process** page (**Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal registration processes**), create a new record for each unique process of fiscal registration.</span></span>
    2. <span data-ttu-id="03f82-181">Добавьте шаги регистрации в процесс:</span><span class="sxs-lookup"><span data-stu-id="03f82-181">Add registration steps to the process:</span></span>

        1. <span data-ttu-id="03f82-182">Выберите **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="03f82-182">Select **Add**.</span></span>
        2. <span data-ttu-id="03f82-183">Выберите тип финансового соединителя.</span><span class="sxs-lookup"><span data-stu-id="03f82-183">Select a fiscal connector type.</span></span>
        3. <span data-ttu-id="03f82-184">В поле **Номер группы** выберите соответствующую группу финансовых соединителей.</span><span class="sxs-lookup"><span data-stu-id="03f82-184">In the **Group number** field, select an appropriate fiscal connector group.</span></span>

6. <span data-ttu-id="03f82-185">Назначьте сущности процесса финансовой регистрации профилям POS.</span><span class="sxs-lookup"><span data-stu-id="03f82-185">Assign entities of the fiscal registration process to POS profiles.</span></span>

    1. <span data-ttu-id="03f82-186">На странице **Профили функциональности POS** (**Retail и Commerce \> Настройка канала \> Настройка POS \> Профили POS \> Профили функциональности**) назначьте процесс финансовой регистрации профилю функциональности POS.</span><span class="sxs-lookup"><span data-stu-id="03f82-186">On the **POS functionality profiles** page (**Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Functionality profiles**), assign the fiscal registration process to a POS functionality profile.</span></span> <span data-ttu-id="03f82-187">Выберите **Изменить**, затем на вкладке **Процесс финансовой регистрации** в поле **Номер процесса** выберите процесс.</span><span class="sxs-lookup"><span data-stu-id="03f82-187">Select **Edit**, and then, on the **Fiscal registration process** tab, in the **Process number** field, select a process.</span></span>
    2. <span data-ttu-id="03f82-188">На странице **Профиль оборудования POS** (**Retail и Commerce \> Настройка канала \> Настройка POS \> Профили POS \> Профили оборудования**) назначьте технические профили соединителей профилю оборудования.</span><span class="sxs-lookup"><span data-stu-id="03f82-188">On the **POS hardware profile** page (**Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Hardware profiles**), assign connector technical profiles to a hardware profile.</span></span> <span data-ttu-id="03f82-189">Выберите **Изменить**, добавьте строку на вкладке **Фискальная периферия**, затем в поле **Номер профиля** выберите технический профиль соединителя.</span><span class="sxs-lookup"><span data-stu-id="03f82-189">Select **Edit**, add a line on the **Fiscal peripherals** tab, and then, in the **Profile number** field, select a connector technical profile.</span></span>

    > [!NOTE]
    > <span data-ttu-id="03f82-190">Можно добавить несколько технических профилей к одному профилю оборудования.</span><span class="sxs-lookup"><span data-stu-id="03f82-190">You can add several technical profiles to the same hardware profile.</span></span> <span data-ttu-id="03f82-191">Тем не менее профиль оборудования или профиль функциональности POS должен иметь только одно пересечение с любой из групп финансовых соединителей.</span><span class="sxs-lookup"><span data-stu-id="03f82-191">However, a hardware profile or POS functionality profile should have only one intersection with any fiscal connector group.</span></span>

    <span data-ttu-id="03f82-192">Поток финансовой регистрации определяется процессом финансовой регистрации, а также некоторыми параметрами компонентов финансовой интеграции: расширение среды выполнения Commerce Runtime для поставщика финансовых документов и расширение Hardware Station для финансового соединителя.</span><span class="sxs-lookup"><span data-stu-id="03f82-192">The fiscal registration flow is defined by the fiscal registration process and also by some parameters of fiscal integration components: the Commerce runtime extension for the fiscal document provider and the Hardware station extension for the fiscal connector.</span></span>

    - <span data-ttu-id="03f82-193">Подписка событий и проводок на финансовую регистрацию заранее определена в поставщике финансовых документов.</span><span class="sxs-lookup"><span data-stu-id="03f82-193">The subscription of events and transactions to fiscal registration is predefined in the fiscal document provider.</span></span>
    - <span data-ttu-id="03f82-194">Поставщик фискальных документов также отвечает за определение финансового соединителя, используемого для финансовой регистрации.</span><span class="sxs-lookup"><span data-stu-id="03f82-194">The fiscal document provider is also responsible for identifying the fiscal connector that is used for fiscal registration.</span></span> <span data-ttu-id="03f82-195">Он сопоставляет функциональные профили соединителей, которые включаются в группу финансовых соединителей, указанную для текущего этапа процесса финансовой регистрации с техническим профилем соединителя, назначенного профилю оборудования станции Hardware Station, с которой сопряжен POS-терминал.</span><span class="sxs-lookup"><span data-stu-id="03f82-195">It matches the connector functional profiles that are included in the fiscal connector group that is specified for the current step of the fiscal registration process with the connector technical profile that is assigned to the hardware profile of the Hardware station that the POS is paired to.</span></span>
    - <span data-ttu-id="03f82-196">Поставщик фискальных документов использует параметры сопоставления данных из конфигурации поставщика фискальных документов для преобразования данных проводок/событий, таких как налоги и платежи, во время создания финансового документа.</span><span class="sxs-lookup"><span data-stu-id="03f82-196">The fiscal document provider uses the data mapping settings from the fiscal document provider configuration to transform transaction/event data such as taxes and payments while a fiscal document is generated.</span></span>
    - <span data-ttu-id="03f82-197">Когда поставщик фискальных документов создает фискальный документ, финансовый соединитель может отправить его на финансовое устройство без изменений или проанализировать его и преобразовать в последовательность команд API-интерфейса устройства в зависимости от того, как обрабатывается связь.</span><span class="sxs-lookup"><span data-stu-id="03f82-197">When the fiscal document provider generates a fiscal document, the fiscal connector can either send it to the fiscal device as is, or parse it and transform it into a sequence of commands of the device application programming interface (API), depending on how the communication is handled.</span></span>

7. <span data-ttu-id="03f82-198">На странице **Процесс финансовой регистрации** (**Retail и Commerce \> Настройка канала \> Финансовая интеграция \> Процессы финансовой регистрации**) выберите **Проверить**, чтобы проверить процесс финансовой регистрации.</span><span class="sxs-lookup"><span data-stu-id="03f82-198">On the **Fiscal registration process** page (**Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal registration processes**), select **Validate** to validate the fiscal registration process.</span></span>

    <span data-ttu-id="03f82-199">Рекомендуется запускать этот тип проверки в следующих случаях:</span><span class="sxs-lookup"><span data-stu-id="03f82-199">We recommend that you run this type of validation in the following cases:</span></span>

    - <span data-ttu-id="03f82-200">После завершения всех настроек для нового процесса регистрации, включая назначение процессов регистрации профилям функциональности POS и профилям оборудования.</span><span class="sxs-lookup"><span data-stu-id="03f82-200">After you've completed all the settings for a new registration process, including when you assign registration processes to POS functionality profiles and hardware profiles.</span></span>
    - <span data-ttu-id="03f82-201">После внесения изменений в существующий процесс финансовой регистрации, если эти изменения могут привести к выбору другого финансового соединителя во время выполнения (например, при изменении группы соединителей для шага процесса финансовой регистрации, включения функционального профиля соединителей в группу соединителей или добавление нового функционального профиля соединителей в группу соединителей).</span><span class="sxs-lookup"><span data-stu-id="03f82-201">After you make changes to an existing fiscal registration process, and those changes might cause a different fiscal connector to be selected at runtime (for example, if you change the connector group for a fiscal registration process step, enable a connector functional profile in a connector group, or add a new connector functional profile to a connector group).</span></span>
    - <span data-ttu-id="03f82-202">После внесения изменений в назначение технических профилей соединителей профилям оборудования.</span><span class="sxs-lookup"><span data-stu-id="03f82-202">After you make changes in the assignment of connector technical profiles to hardware profiles.</span></span>

8. <span data-ttu-id="03f82-203">На странице **График распределения** запустите задания **1070** и **1090** для передачи данных в базу данных канала.</span><span class="sxs-lookup"><span data-stu-id="03f82-203">On the **Distribution schedule** page, run the **1070** and **1090** jobs to transfer data to the channel database.</span></span>

## <a name="set-up-fiscal-texts-for-discounts"></a><span data-ttu-id="03f82-204">Настройка финансовых текстов для скидок</span><span class="sxs-lookup"><span data-stu-id="03f82-204">Set up fiscal texts for discounts</span></span>

<span data-ttu-id="03f82-205">В некоторых случаях специальный текст необходимо печатать на финансовом чеке, если применяется скидка.</span><span class="sxs-lookup"><span data-stu-id="03f82-205">In some cases, a special text must be printed on a fiscal receipt if a discount is applied.</span></span> <span data-ttu-id="03f82-206">Финансовые тексты для скидок можно настроить на странице **Группа финансовых соединителей** (**Retail и Commerce \> Настройка канала \> Финансовая интеграция \> Группы финансовых соединителей**).</span><span class="sxs-lookup"><span data-stu-id="03f82-206">You can set up fiscal texts for discounts on the **Fiscal connector group** page (**Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal connector groups**).</span></span>

- <span data-ttu-id="03f82-207">Для ручных скидок, которые применяются на POS, следует настроить финансовый текст для информационного кода или группы информационных кодов, которая указана в качестве информационного кода **Скидка для продукта** в профиле функциональности POS.</span><span class="sxs-lookup"><span data-stu-id="03f82-207">For manual discounts that are applied at the POS, you should set a fiscal text for the info code or info code group that is specified as the **Product discount** info code in the POS functionality profile.</span></span>

    1. <span data-ttu-id="03f82-208">На странице **Группа финансовых соединителей** выберите **Текст для фискального чека**.</span><span class="sxs-lookup"><span data-stu-id="03f82-208">On the **Fiscal connector group** page, select **Text for fiscal receipt**.</span></span>
    2. <span data-ttu-id="03f82-209">На вкладке **Информационные коды** выберите **Добавить** и выберите информационный код или группу информационных кодов.</span><span class="sxs-lookup"><span data-stu-id="03f82-209">On the **Info codes** tab, select **Add**, and select an info code or info code group.</span></span>
    3. <span data-ttu-id="03f82-210">В поле **Номер инфокода** выберите значение.</span><span class="sxs-lookup"><span data-stu-id="03f82-210">In the **Info code number**, select a value.</span></span>
    4. <span data-ttu-id="03f82-211">В поле **Номер дополнительного кода** выберите значение, если дополнительный код необходим для выбранного информационного кода.</span><span class="sxs-lookup"><span data-stu-id="03f82-211">In the **Subcode number** field, select a value if a subcode is required for the selected info code.</span></span>
    5. <span data-ttu-id="03f82-212">В поле **Текст для фискального чека** укажите финансовый текст, который следует печатать на фискальном чеке.</span><span class="sxs-lookup"><span data-stu-id="03f82-212">In the **Text for fiscal receipt** field, specify a fiscal text that should be printed on a fiscal receipt.</span></span>
    6. <span data-ttu-id="03f82-213">Задайте для параметра **Печатать данные, введенные пользователем, на фискальном чеке** значение **Да**, чтобы заменить текст на фискальном чеке данными, которые пользователь вводит вручную в POS.</span><span class="sxs-lookup"><span data-stu-id="03f82-213">Set the **Print user input on fiscal receipt** option to **Yes** to override the text on a fiscal receipt with information that a user manually enters at the POS.</span></span> <span data-ttu-id="03f82-214">Этот параметр применяется только к информационным кодам с типом ввода **Текст**.</span><span class="sxs-lookup"><span data-stu-id="03f82-214">This option applies only to info codes that have an input type of **Text**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="03f82-215">Можно указать финансовый текст для нескольких информационных кодов для поддержки сценариев, где используются группы информационных кодов, связанные информационные коды и запущенные информационные коды.</span><span class="sxs-lookup"><span data-stu-id="03f82-215">You can specify a fiscal text for several info codes to support scenarios where info code groups, linked info codes, and triggered info codes are used.</span></span> <span data-ttu-id="03f82-216">В этих сценариях фискальный чек будет содержать финансовые тексты из всех информационных кодов, которые связаны со строкой проводки, в которой были применены скидки.</span><span class="sxs-lookup"><span data-stu-id="03f82-216">In these scenarios, the fiscal receipt will contain the fiscal texts from all info codes that are linked to the transaction line where the discount was applied.</span></span>

- <span data-ttu-id="03f82-217">Для скидок, относящихся к конкретному каналу, следует определить финансовый текст для кода скидки.</span><span class="sxs-lookup"><span data-stu-id="03f82-217">For channel-specific discounts, you should define a fiscal text for the discount ID.</span></span>

    1. <span data-ttu-id="03f82-218">На странице **Группа финансовых соединителей** выберите **Текст для фискального чека**.</span><span class="sxs-lookup"><span data-stu-id="03f82-218">On the **Fiscal connector group** page, select **Text for fiscal receipt**.</span></span>
    2. <span data-ttu-id="03f82-219">На вкладке **Скидки** выберите **Добавить** и выберите код скидки.</span><span class="sxs-lookup"><span data-stu-id="03f82-219">On the **Discounts** tab, select **Add**, and select a discount ID.</span></span>
    3. <span data-ttu-id="03f82-220">В поле **Текст для фискального чека** укажите финансовый текст, который следует печатать на фискальном чеке.</span><span class="sxs-lookup"><span data-stu-id="03f82-220">In the **Text for fiscal receipt** field, specify a fiscal text that should be printed on a fiscal receipt.</span></span>

    > [!NOTE]
    > <span data-ttu-id="03f82-221">Если несколько скидок применены к одной и той же строке проводки, финансовый чек будет содержать финансовые тексты из всех скидок, которые связаны с этой строкой проводки.</span><span class="sxs-lookup"><span data-stu-id="03f82-221">If several discounts are applied to the same transaction line, the fiscal receipt will contain fiscal texts from all discounts that are linked to those transaction line.</span></span>

## <a name="set-error-handling-settings"></a><span data-ttu-id="03f82-222">Задание параметров обработки ошибок</span><span class="sxs-lookup"><span data-stu-id="03f82-222">Set error handling settings</span></span>

<span data-ttu-id="03f82-223">Параметры обработки ошибок, доступные в финансовом интеграции, устанавливаются в процессе финансовой регистрации.</span><span class="sxs-lookup"><span data-stu-id="03f82-223">The error handling options that are available in the fiscal integration are set in the fiscal registration process.</span></span> <span data-ttu-id="03f82-224">Дополнительные сведения об обработке ошибок в финансовой интеграции см. в разделе [Обработка ошибок](fiscal-integration-for-retail-channel.md#error-handling).</span><span class="sxs-lookup"><span data-stu-id="03f82-224">For more information about error handling in the fiscal integration, see [Error handling](fiscal-integration-for-retail-channel.md#error-handling).</span></span>

1. <span data-ttu-id="03f82-225">На странице **Процесс финансовой регистрации** (**Retail и Commerce \> Настройка канала \> Финансовая интеграция \> Процессы финансовой регистрации**) можно настроить следующие параметры для каждого шага процесса финансовой регистрации.</span><span class="sxs-lookup"><span data-stu-id="03f82-225">On the **Fiscal registration process** page (**Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal registration processes**), you can set the following parameters for each step of the fiscal registration process:</span></span>

    - <span data-ttu-id="03f82-226">**Разрешить пропуск** — этот параметр включает параметр **Пропустить** в диалоговом окне обработки ошибок.</span><span class="sxs-lookup"><span data-stu-id="03f82-226">**Allow skip** – This parameter enables the **Skip** option in the error handling dialog box.</span></span>
    - <span data-ttu-id="03f82-227">**Разрешить помечать как зарегистрированное** — этот параметр включает параметр **Пометить как зарегистрированный** в диалоговом окне обработки ошибок.</span><span class="sxs-lookup"><span data-stu-id="03f82-227">**Allow mark as registered** – This parameter enables the **Mark as registered** option in the error handling dialog box.</span></span>
    - <span data-ttu-id="03f82-228">**Продолжать при ошибках** — если этот параметр включен, процесс финансовой регистрации может быть продолжен на ККМ POS в случае сбоя финансовой регистрации проводки или события.</span><span class="sxs-lookup"><span data-stu-id="03f82-228">**Continue on error** – If this parameter is enabled, the fiscal registration process can continue on the POS register if the fiscal registration of a transaction or event fails.</span></span> <span data-ttu-id="03f82-229">В противном случае для запуска финансовой регистрации следующей проводки или события оператор должен повторить сбойную финансовую регистрацию, пропустить ее или отметить проводку или событие как зарегистрированное.</span><span class="sxs-lookup"><span data-stu-id="03f82-229">Otherwise, to run the fiscal registration of the next transaction or event, the operator must retry the failed fiscal registration, skip it, or mark the transaction or event as registered.</span></span> <span data-ttu-id="03f82-230">Дополнительные сведения см. в разделе [Необязательная финансовая регистрация](fiscal-integration-for-retail-channel.md#optional-fiscal-registration).</span><span class="sxs-lookup"><span data-stu-id="03f82-230">For more information, see [Optional fiscal registration](fiscal-integration-for-retail-channel.md#optional-fiscal-registration).</span></span>

    > [!NOTE]
    > <span data-ttu-id="03f82-231">Если параметр **Продолжать при ошибках** включен, параметры **Разрешить пропуск** и **Разрешить помечать как зарегистрированное** автоматически отключаются.</span><span class="sxs-lookup"><span data-stu-id="03f82-231">If the **Continue on error** parameter is enabled, the **Allow skip** and **Allow mark as registered** parameters are automatically disabled.</span></span>

2. <span data-ttu-id="03f82-232">Параметры **Пропустить** и **Пометить как зарегистрированный** в диалоговом окне обработки ошибок требуют разрешения **Разрешить пропуск регистрации или пометку как зарегистрированный**.</span><span class="sxs-lookup"><span data-stu-id="03f82-232">The **Skip** and **Mark as registered** options in the error handling dialog box require the **Allow skip registration or mark as registered** permission.</span></span> <span data-ttu-id="03f82-233">Поэтому на странице **Группы разрешений** (**Retail и Commerce \> Сотрудники \> Группы разрешений**) включите разрешение **Разрешить пропуск регистрации или пометку как зарегистрированный**.</span><span class="sxs-lookup"><span data-stu-id="03f82-233">Therefore, on the **Permission groups** page (**Retail and Commerce \> Employees \> Permission groups**), enable the **Allow skip registration or mark as registered** permission.</span></span>
3. <span data-ttu-id="03f82-234">Параметры **Пропустить** и **Пометить как зарегистрированный** позволяют оператором вводить дополнительную информацию при сбое финансовой регистрации.</span><span class="sxs-lookup"><span data-stu-id="03f82-234">The **Skip** and **Mark as registered** options let operators enter additional information when fiscal registration fails.</span></span> <span data-ttu-id="03f82-235">Чтобы эта функциональная возможность стала доступна, следует указать информационные коды **Пропустить** и **Пометить как зарегистрированный** в группе финансовых соединителей.</span><span class="sxs-lookup"><span data-stu-id="03f82-235">To make this functionality available, you should specify the **Skip** and **Mark as registered** info codes on a fiscal connector group.</span></span> <span data-ttu-id="03f82-236">Вводимая операторами информация затем сохраняется как проводка информационного кода, которая связана с финансовой проводкой.</span><span class="sxs-lookup"><span data-stu-id="03f82-236">The information that operators enter is then saved as an info code transaction that is linked to the fiscal transaction.</span></span> <span data-ttu-id="03f82-237">Более подробные сведения об информационных кодах см. в разделе [Информационные коды и группы информационных кодов](../info-codes-retail.md).</span><span class="sxs-lookup"><span data-stu-id="03f82-237">For more details about info codes, see [Info codes and info code groups](../info-codes-retail.md).</span></span>

    > [!NOTE]
    > <span data-ttu-id="03f82-238">Функция запуска **Продукт** не поддерживается для информационных кодов, которые используются для кодов **Пропустить** и **Пометить как зарегистрированный** в группах финансовых соединителей.</span><span class="sxs-lookup"><span data-stu-id="03f82-238">The **Product** trigger function isn't supported for the info codes that are used for **Skip** and **Mark as registered** in fiscal connector groups.</span></span>

    - <span data-ttu-id="03f82-239">На странице **Группа финансовых соединителей** на вкладке **Инфокоды** выберите информационные коды или группы информационных кодов в полях **Пропустить** и **Пометить как зарегистрированный**.</span><span class="sxs-lookup"><span data-stu-id="03f82-239">On the **Fiscal connector group** page, on the **Info codes** tab, select info codes or info code groups in the **Skip** and **Mark as registered** fields.</span></span>

    > [!NOTE]
    > <span data-ttu-id="03f82-240">Один финансовый документ и один нефинансовый документ могут быть созданы на любом этапе процесса финансовой регистрации.</span><span class="sxs-lookup"><span data-stu-id="03f82-240">One fiscal document and one non-fiscal document can be generated on any step of a fiscal registration process.</span></span> <span data-ttu-id="03f82-241">Расширение поставщика фискального документа определяет каждый тип проводки или события как связанный с финансовыми или нефинансовыми документами.</span><span class="sxs-lookup"><span data-stu-id="03f82-241">A fiscal document provider extension identifies every type of transaction or event as related to fiscal or non-fiscal documents.</span></span> <span data-ttu-id="03f82-242">Функция обработки ошибок применяется только для финансовых документов.</span><span class="sxs-lookup"><span data-stu-id="03f82-242">The error handling feature applies only to fiscal documents.</span></span>
    >
    > - <span data-ttu-id="03f82-243">**Финансовый документ** — обязательный документ, который должен быть зарегистрирован успешно (например, фискальный чек).</span><span class="sxs-lookup"><span data-stu-id="03f82-243">**Fiscal document** – A mandatory document that should be registered successfully (for example, a fiscal receipt).</span></span>
    > - <span data-ttu-id="03f82-244">**Нефинансовый документ** — дополнительный документ для проводки или события (например, бланк подарочной карты).</span><span class="sxs-lookup"><span data-stu-id="03f82-244">**Non-fiscal document** – A supplementary document for the transaction or event (for example, a gift card slip).</span></span>

4. <span data-ttu-id="03f82-245">Если оператор должен быть способен продолжить обработку текущей операции (например, создание или завершение транзакции) после возникновения ошибки проверки состояния, следует включить разрешение **Разрешить пропускать ошибки проверки состояния** на странице **Группы разрешений** (**Retail и Commerce \> Сотрудники \> Группы разрешений**).</span><span class="sxs-lookup"><span data-stu-id="03f82-245">If the operator must be able to continue to process the current operation (for example, creation or finalization of a transaction) after a health check error occurs, you should enable the **Allow skip health check error** permission on the **Permission groups** page (**Retail and Commerce \> Employees \> Permission groups**).</span></span> <span data-ttu-id="03f82-246">Дополнительные сведения о процедуре проверки состояния см. в разделе [Проверка состояния финансовой регистрации](fiscal-integration-for-retail-channel.md#fiscal-registration-health-check).</span><span class="sxs-lookup"><span data-stu-id="03f82-246">For more information about the health check procedure, see [Fiscal registration health check](fiscal-integration-for-retail-channel.md#fiscal-registration-health-check).</span></span>

## <a name="set-up-fiscal-xz-reports-from-the-pos"></a><span data-ttu-id="03f82-247">Настройка финансовых отчетов X/Z на POS</span><span class="sxs-lookup"><span data-stu-id="03f82-247">Set up fiscal X/Z reports from the POS</span></span>

<span data-ttu-id="03f82-248">Чтобы включить финансовые отчеты X/Z для запуска с POS, следует добавить новые кнопки в макет POS.</span><span class="sxs-lookup"><span data-stu-id="03f82-248">To enable fiscal X/Z reports to be run from the POS, you should add new buttons to a POS layout.</span></span>

- <span data-ttu-id="03f82-249">На странице **Сетка кнопок** следуйте указаниям из раздела [Добавление операций POS в макеты POS с помощью конструктора сетки кнопок](../dev-itpro/add-pos-operations.md#add-a-custom-operation-button-to-the-pos-layout-in-retail-headquarters) для установки конструктора и обновления макета POS.</span><span class="sxs-lookup"><span data-stu-id="03f82-249">On the **Button grids** page, follow the instructions in [Add POS operations to POS layouts by using Button grid designer](../dev-itpro/add-pos-operations.md#add-a-custom-operation-button-to-the-pos-layout-in-retail-headquarters) to install the designer and update a POS layout.</span></span>

    1. <span data-ttu-id="03f82-250">Выберите макет для обновления.</span><span class="sxs-lookup"><span data-stu-id="03f82-250">Select the layout to update.</span></span> 
    2. <span data-ttu-id="03f82-251">Добавьте новую кнопку и установите свойство кнопки **Печать фискального X-отчета**.</span><span class="sxs-lookup"><span data-stu-id="03f82-251">Add a new button, and set the **Print fiscal X** button property.</span></span>
    3. <span data-ttu-id="03f82-252">Добавьте новую кнопку и установите свойство кнопки **Печать фискального Z-отчета**.</span><span class="sxs-lookup"><span data-stu-id="03f82-252">Add a new button, and set the **Print fiscal Z** button property.</span></span>
    4. <span data-ttu-id="03f82-253">На странице **График распределения** запустите задание **1090** для передачи изменений в базу данных канала.</span><span class="sxs-lookup"><span data-stu-id="03f82-253">On the **Distribution schedule** page, run the **1090** job to transfer changes to the channel database.</span></span>

## <a name="enable-manual-execution-of-postponed-fiscal-registration"></a><span data-ttu-id="03f82-254">Включение выполнения вручную отложенной финансовой регистрации</span><span class="sxs-lookup"><span data-stu-id="03f82-254">Enable manual execution of postponed fiscal registration</span></span>

<span data-ttu-id="03f82-255">Чтобы включить выполнение вручную отложенной финансовой регистрации, следует добавить новую кнопку в макет POS.</span><span class="sxs-lookup"><span data-stu-id="03f82-255">To enable manual execution of a postponed fiscal registration, you should add a new button to a POS layout.</span></span>

- <span data-ttu-id="03f82-256">На странице **Сетка кнопок** следуйте указаниям из раздела [Добавление операций POS в макеты POS с помощью конструктора сетки кнопок](../dev-itpro/add-pos-operations.md#add-a-custom-operation-button-to-the-pos-layout-in-retail-headquarters) для установки конструктора и обновления макета POS.</span><span class="sxs-lookup"><span data-stu-id="03f82-256">On the **Button grids** page, follow the instructions in [Add POS operations to POS layouts by using Button grid designer](../dev-itpro/add-pos-operations.md#add-a-custom-operation-button-to-the-pos-layout-in-retail-headquarters) to install the designer and update a POS layout.</span></span>

    1. <span data-ttu-id="03f82-257">Выберите макет для обновления.</span><span class="sxs-lookup"><span data-stu-id="03f82-257">Select the layout to update.</span></span>
    2. <span data-ttu-id="03f82-258">Добавьте новую кнопку и установите свойство кнопки **Завершить процесс финансовой регистрации**.</span><span class="sxs-lookup"><span data-stu-id="03f82-258">Add a new button, and set the **Complete fiscal registration process** button property.</span></span>
    3. <span data-ttu-id="03f82-259">На странице **График распределения** запустите задание **1090** для передачи ваших изменений в базу данных канала.</span><span class="sxs-lookup"><span data-stu-id="03f82-259">On the **Distribution schedule** page, run the **1090** job to transfer your changes to the channel database.</span></span>


[!INCLUDE[footer-include](../../includes/footer-banner.md)]