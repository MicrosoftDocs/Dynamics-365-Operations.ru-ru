---
title: Применение настроек запасов
description: В этой статье описываются настройки запасов и описывается порядок их применения в Microsoft Dynamics 365 Commerce.
author: anupamar-ms
ms.date: 10/15/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: ''
ms.author: anupamar
ms.search.validFrom: 2019-10-31
ms.dyn365.ops.version: ''
ms.openlocfilehash: df1d1283a7692336906550169bc77104a9118779
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/03/2022
ms.locfileid: "8909565"
---
# <a name="apply-inventory-settings"></a>Применение настроек запасов

[!include [banner](includes/banner.md)]

В этой статье описываются настройки запасов и описывается порядок их применения в Microsoft Dynamics 365 Commerce.

Параметры запасов определяют, следует ли проверять запасы перед добавлением продуктов в корзину. Они также определяют связанные с запасами рекламные сообщения, такие как "В наличии" и "Осталось несколько". Эти параметры гарантируют, что продукт невозможно купить, если его нет на складе.

Dynamics 365 Commerce предоставляет оценки доступности продуктов в наличии. Сведения о том, как рассчитываются оценки доступности в наличии, см. в разделе [Расчет наличия запасов для розничных каналов](calculated-inventory-retail-channels.md).

В построителе сайтов Commerce пороговые значения и диапазоны запасов могут быть определены для продукта или категории. Они определяют, могут ли запасы классифицироваться как "в наличии", "осталось мало" или "нет на складе". Подробности см. в разделе [Настройка буферов запасов и уровней запасов](inventory-buffers-levels.md).

> [!NOTE]
> Поддержка пороговых значений и диапазонов запасов доступна в выпуске Dynamics 365 Commerce 10.0.12.

## <a name="inventory-settings"></a>Параметры запасов

В Commerce параметры запасов определяются в **Параметры сайта \> Расширения \> Управление запасами** в построителе сайтов. Есть шесть параметров запасов, один из которых является устаревшим:

- **Включить проверку запасов в приложении** — этот параметр включает проверку запасов продукта. Модули поля покупки, корзины и получения в магазине затем проверяют запасы продукта и позволят добавить продукт в корзину только в том случае, если он доступен в запасах.
- **На основе уровня запасов** — этот параметр определяет, как будут рассчитываться уровни запасов. Доступны значения **Доступное общее количество**, **Физическая доступность** и **Пороговое значение "нет на складе"**. В Commerce пороговые значения и диапазоны запасов могут быть определены для каждого продукта и категории. API запасов возвращают сведения о запасах продуктов для обоих свойств **Доступное общее количество** и **Физическая доступность**. Розничный продавец определяет, должно ли значение **Доступное общее количество** или **Физическая доступность** использоваться для определения количества запасов и соответствующих диапазонов для статусов "на складе" и "нет на складе".

    Значение **Пороговое значение "нет на складе"** параметра **На основе уровня запасов** устарело и не используется. Когда оно установлено, количество запасов определяется на основе результатов **Общее доступное количество**, но пороговое значение определяется в соответствии с числовым параметром **Пороговое значение "нет на складе"**, которая описывается дальше. Это пороговое значение применяется ко всем продуктам на сайте электронной коммерции. Если запасы меньше порогового значения, продукт считается отсутствующим на складе. В противном случае считается "в наличии". Возможности значения **Пороговое значение "нет на складе"** ограничены, и поэтому не рекомендуется использовать его в версии 10.0.12 или более поздней.

- **Уровень запасов для нескольких складов** — эта настройка активирует возможность расчета уровня запасов по умолчанию для склада или для нескольких складов. Параметр **На основе отдельного склада** используется для расчета уровней складских запасов на основе склада по умолчанию. Кроме того, сайт электронной коммерции может указывать на несколько складов для облегчения выполнения работ. В этом случае для параметра **На основе агрегирования для складов отгрузки и отправки** используется для указания наличия запасов. Например, когда клиент приобретает номенклатуру и выбирает "отгрузка" в качестве способа доставки, номенклатуру можно отгрузить с любого склада в группе выполнения, имеющей доступные запасы. Страница сведения о продукте (PDP) будет показывать сообщение "в наличии" для отгрузки, если какой-либо доступный склад отгрузки в группе выполнения содержит запасы. 

    > [!IMPORTANT] 
    > Параметр **Уровень запасов для нескольких складов** доступен в Commerce версии 10.0.19. Если выполняется обновление с более ранней версии Commerce, необходимо вручную обновить файл appsettings.json. Дополнительные инструкции см. в разделе [Обновления пакета SDK и библиотеки модулей](e-commerce-extensibility/sdk-updates.md#update-the-appsettingsjson-file).

- **Параметры запасов для страниц списков продуктов** — эта настройка определяет, как отсутствующие на складе продукты отображаются в списках продуктов, которые отображаются в модулях "сбор продуктов" и "результаты поиска". Доступные значения — **Отображать в порядке с другими продуктами**, **Скрывать отсутствующие на складе продукты в списке** и **Отображать отсутствующие на складе продукты в конце списка**. Чтобы использовать эту настройку, необходимо сначала настроить некоторые необходимые параметры в центральном офисе Commerce. Дополнительные сведения см. в разделе [Включение распознавания запасов для модуля результатов поиска](search-result-module.md#enable-inventory-awareness-for-the-search-results-module).

    > [!IMPORTANT] 
    > Параметр **Параметры запасов для страниц списков продуктов** доступен в Commerce версии 10.0.20. Если выполняется обновление с более ранней версии Commerce, необходимо вручную обновить файл appsettings.json. Дополнительные инструкции см. в разделе [Обновления пакета SDK и библиотеки модулей](e-commerce-extensibility/sdk-updates.md#update-the-appsettingsjson-file).

- **Диапазоны запасов** — этот параметр определяет диапазоны запасов, для которых показывается сообщение для модулей на сайте. Оно применимо только в том случае, если значение **Общее доступное количество** или значение **Физическая доступность** выбрано для параметра **На основе уровня запасов**. Доступны значения **Все**, **Мало и нет на складе** и **Нет на складе**.

    - Когда выбрано значение **Все**, будут отображаться сообщения для всех диапазонов запасов, начиная с "в наличии" (сообщение "Доступно") до "нет на складе".
    - Когда выбрано значение **Мало и нет на складе**, будут отображаться сообщения для всех диапазонов запасов кроме "в наличии" (сообщение "Доступно").
    - Если выбрано значение **Нет на складе**, будет отображаться только сообщение "Нет на складе".

- **Пороговое значение "нет на складе"** — этот старый числовой параметр вступит в силу только в том случае, если значение **Пороговое значение "нет на складе"** выбрано для параметр **На основе уровня запасов**.

> [!IMPORTANT] 
> Эти параметры доступны в выпуске Dynamics 365 Commerce 10.0.12. Если выполняется обновление из более ранней версии Dynamics 365 Commerce, необходимо вручную обновить файл appsettings.json. Инструкции по обновлению файла appsettings.json см. в разделе [Обновления SDK и библиотеки модулей](e-commerce-extensibility/sdk-updates.md#update-the-appsettingsjson-file).

## <a name="modules-that-use-inventory-settings"></a>Модули, в которых используются параметры запасов

Модули поля покупки, списка желаемого, выбора магазина, корзины и значка корзины используют параметры запасов для отображения диапазонов и сообщений запасов.

В примере на следующем рисунке PDP показывает сообщение "в наличии" ("доступно").

![Пример модуля PDP с информационным сообщением "в наличии".](./media/pdp-InStock.png)

В примере на следующем рисунке PDP показывает сообщение "нет на складе".

![Пример модуля PDP с информационным сообщением "нет на складе".](./media/pdp-outofstock.png)

В примере на следующем рисунке PDP корзина показывает сообщение "в наличии" ("доступно").

![Пример модуля корзины с информационным сообщением "в наличии".](./media/cart-instock.png)

## <a name="additional-resources"></a>Дополнительные ресурсы

[Обзор библиотеки модулей](starter-kit-overview.md)

[Настройка буферов запасов и уровней запасов](inventory-buffers-levels.md)

[Модуль корзины](add-cart-module.md)

[Модуль поля покупки](add-buy-box.md)

[Страницы и модули управления учетной записью](account-management.md)

[Модуль выбора магазина](store-selector.md)

[Обновления SDK и библиотеки модулей](e-commerce-extensibility/sdk-updates.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
