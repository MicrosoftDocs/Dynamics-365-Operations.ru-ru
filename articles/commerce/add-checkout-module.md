---
title: Модуль оформления заказа
description: В этом разделе описывается, как добавить модуль оформления заказа к странице и задать необходимые свойства.
author: anupamar-ms
manager: annbe
ms.date: 10/31/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application user
ms.reviewer: v-chgri
ms.search.scope: Operations, Retail, Core
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: anupamar
ms.search.validFrom: 2019-10-31
ms.dyn365.ops.version: Release 10.0.5
ms.openlocfilehash: 4b810441fd25d41ee0893b119b4f7d91e7435d21
ms.sourcegitcommit: 295d940a345879b3dfc5991e387b91c7257019ea
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/01/2019
ms.locfileid: "2697091"
---
# <a name="checkout-module"></a><span data-ttu-id="93dfb-103">Модуль оформления заказа</span><span class="sxs-lookup"><span data-stu-id="93dfb-103">Checkout module</span></span>

[!include [banner](includes/preview-banner.md)]
[!include [banner](includes/banner.md)]

<span data-ttu-id="93dfb-104">В этом разделе описывается, как добавить модуль оформления заказа к странице и задать необходимые свойства.</span><span class="sxs-lookup"><span data-stu-id="93dfb-104">This topic describes how to add a checkout module to a page and set the required properties.</span></span>

## <a name="overview"></a><span data-ttu-id="93dfb-105">Обзор</span><span class="sxs-lookup"><span data-stu-id="93dfb-105">Overview</span></span>

<span data-ttu-id="93dfb-106">Модуль оформления заказа — это специальный контейнер, в котором размещены все модули, необходимые для создания заказа.</span><span class="sxs-lookup"><span data-stu-id="93dfb-106">A checkout module is a special container that hosts all the modules that are required to create an order.</span></span> <span data-ttu-id="93dfb-107">Модуль оформления заказа может включать модули, которые обрабатывают адрес доставки, методы отгрузки, сведения об оплате, сводку заказа и другие сведения, которые относятся к заказу клиента.</span><span class="sxs-lookup"><span data-stu-id="93dfb-107">A checkout module can include modules that handle the shipping address, shipping methods, billing information, order summary, and other information that is related to a customer order.</span></span> <span data-ttu-id="93dfb-108">В нем представлен пошаговый поток, который клиент использует для ввода всех необходимых сведений для проведения покупки.</span><span class="sxs-lookup"><span data-stu-id="93dfb-108">It presents a step-by-step flow that a customer uses to enter all the relevant information to make a purchase.</span></span>

<span data-ttu-id="93dfb-109">Модуль оформления заказа обрабатывает данные на основе идентификатора корзины.</span><span class="sxs-lookup"><span data-stu-id="93dfb-109">A checkout module renders data based on the cart ID.</span></span> <span data-ttu-id="93dfb-110">Этот идентификатор корзины сохраняется как cookie-файл браузера.</span><span class="sxs-lookup"><span data-stu-id="93dfb-110">This cart ID is saved as a browser cookie.</span></span> <span data-ttu-id="93dfb-111">Идентификатор корзины требуется для отображения информации в модуле оформления заказа, такой как номенклатуры в заказе, общая сумма и скидки.</span><span class="sxs-lookup"><span data-stu-id="93dfb-111">A cart ID is required to render information in the checkout module, such as the items in the order, the total amount, and discounts.</span></span>

## <a name="checkout-module-properties"></a><span data-ttu-id="93dfb-112">Свойства модуля оформления заказа</span><span class="sxs-lookup"><span data-stu-id="93dfb-112">Checkout module properties</span></span>

<span data-ttu-id="93dfb-113">В модуле оформления заказа размещается набор модулей.</span><span class="sxs-lookup"><span data-stu-id="93dfb-113">A checkout module hosts a set of modules inside it.</span></span> <span data-ttu-id="93dfb-114">Свойство ширины позволяет указать, должны ли номенклатуры в модуле оформления заказа быть вписаны в ширину или заполнять экран.</span><span class="sxs-lookup"><span data-stu-id="93dfb-114">A width property lets you specify whether the items in the checkout module should fit the width of it or fill the screen.</span></span>

<span data-ttu-id="93dfb-115">В модуле оформления заказа имеется несколько гнезд, таких как гнездо **Сведения об оформления заказа**, гнездо **Сводка заказа** и гнездо **Размещение заказа**.</span><span class="sxs-lookup"><span data-stu-id="93dfb-115">A checkout module has multiple slots, such as a **Checkout information** slot, an **Order summary** slot, and a **Place order** slot.</span></span> <span data-ttu-id="93dfb-116">Каждый слот поддерживает ряд модулей, которые будут отображаться в конкретном макете на странице.</span><span class="sxs-lookup"><span data-stu-id="93dfb-116">Each slot supports a set of modules that will appear in a specific layout on the page.</span></span> <span data-ttu-id="93dfb-117">Например, в ячейке **Сведения об оформлении заказа** содержатся все модули, необходимые для запуска оформления заказа, такие как модули для адреса отгрузки и способа оплаты.</span><span class="sxs-lookup"><span data-stu-id="93dfb-117">For example, the **Checkout information** slot contains all the modules that are required to trigger a checkout, such as modules for the shipping address and payment method.</span></span> <span data-ttu-id="93dfb-118">В ячейке **Сводка заказа** отображается сводка заказа и поддерживается действие для размещения заказа.</span><span class="sxs-lookup"><span data-stu-id="93dfb-118">The **Order summary** slot shows an order summary and supports the action for placing the order.</span></span> <span data-ttu-id="93dfb-119">Гнездо **Размещение заказа** также поддерживает действие для размещения заказа.</span><span class="sxs-lookup"><span data-stu-id="93dfb-119">The **Place order** slot also supports the action for placing the order.</span></span> <span data-ttu-id="93dfb-120">Чтобы оптимизировать процесс размещения заказов на различных платформах, можно определить модули размещения заказа в двух гнездах.</span><span class="sxs-lookup"><span data-stu-id="93dfb-120">Place order modules can be defined in two slots to optimize the process of placing orders from various platforms.</span></span>

### <a name="modules-that-can-be-used-in-the-checkout-module"></a><span data-ttu-id="93dfb-121">Модули, которые могут быть использованы в модуле оформления заказа</span><span class="sxs-lookup"><span data-stu-id="93dfb-121">Modules that can be used in the checkout module</span></span>

- <span data-ttu-id="93dfb-122">**Адрес отгрузки** — этот модуль позволяет клиенту добавлять или выбирать адрес доставки для заказа.</span><span class="sxs-lookup"><span data-stu-id="93dfb-122">**Shipping address** – This module lets a customer add or select the shipping address for an order.</span></span> <span data-ttu-id="93dfb-123">Если клиент вошел в систему, отображаются все адреса, ранее сохраненные для этого клиента.</span><span class="sxs-lookup"><span data-stu-id="93dfb-123">If the customer is signed in, any addresses that were previously saved for that customer are shown.</span></span> <span data-ttu-id="93dfb-124">После этого клиент может выбрать один из этих адресов.</span><span class="sxs-lookup"><span data-stu-id="93dfb-124">The customer can then select among those addresses.</span></span> <span data-ttu-id="93dfb-125">Клиент также может добавить новый адрес.</span><span class="sxs-lookup"><span data-stu-id="93dfb-125">The customer can also add a new address.</span></span> <span data-ttu-id="93dfb-126">Адрес доставки используется для всех номенклатур в заказе, для которых требуется доставка.</span><span class="sxs-lookup"><span data-stu-id="93dfb-126">The shipping address is used for all the items in the order that require shipping.</span></span> <span data-ttu-id="93dfb-127">Он не может быть настроен для отдельных номенклатур строки.</span><span class="sxs-lookup"><span data-stu-id="93dfb-127">It can't be customized for individual line items.</span></span> <span data-ttu-id="93dfb-128">Форматы адресов отгрузки определяются для каждой страны или региона, а правила, связанные со страной/регионом, применяются данным модулем.</span><span class="sxs-lookup"><span data-stu-id="93dfb-128">Shipping address formats are defined for each country or region, and the country/region-specific rules are enforced by this module.</span></span> <span data-ttu-id="93dfb-129">Хотя этот модуль не обеспечивает проверку адресов, проверка адреса может быть реализована посредством настройки.</span><span class="sxs-lookup"><span data-stu-id="93dfb-129">Although this module doesn't provide address validation, address validation can be implemented through customization.</span></span> <span data-ttu-id="93dfb-130">Если заказ включает только номенклатуры, которые клиент заберет из магазина, этот модуль автоматически скрывается.</span><span class="sxs-lookup"><span data-stu-id="93dfb-130">If the order includes only items that will be picked up in the store, this module is automatically hidden.</span></span>
- <span data-ttu-id="93dfb-131">**Параметры доставки** — этот модуль позволяет клиенту выбрать вариант доставки для заказа.</span><span class="sxs-lookup"><span data-stu-id="93dfb-131">**Delivery options** – This module lets a customer select a delivery option for an order.</span></span> <span data-ttu-id="93dfb-132">Варианты доставки основаны на адресе отгрузки.</span><span class="sxs-lookup"><span data-stu-id="93dfb-132">Delivery options are based on the shipping address.</span></span> <span data-ttu-id="93dfb-133">Если адрес доставки изменен, необходимо снова извлечь варианты доставки.</span><span class="sxs-lookup"><span data-stu-id="93dfb-133">If the shipping address is changed, the delivery options must be retrieved again.</span></span> <span data-ttu-id="93dfb-134">Если заказ включает только номенклатуры, которые клиент заберет из магазина, этот модуль автоматически скрывается.</span><span class="sxs-lookup"><span data-stu-id="93dfb-134">If the order includes only items that will be picked up in the store, this module is automatically hidden.</span></span>
- <span data-ttu-id="93dfb-135">**Контейнер раздела оформления заказа** — этот модуль представляет собой контейнер, в котором можно поместить несколько модулей для создания раздела в потоке оформления заказа.</span><span class="sxs-lookup"><span data-stu-id="93dfb-135">**Checkout section container** – This module is a container that you can put multiple modules inside to create a section within the checkout flow.</span></span> <span data-ttu-id="93dfb-136">Например, можно поместить в этот контейнер все модули, имеющие отношение к оплате, чтобы они отображались как один раздел.</span><span class="sxs-lookup"><span data-stu-id="93dfb-136">For example, you can put all payment-related modules inside this container to make them appear as one section.</span></span> <span data-ttu-id="93dfb-137">Этот модуль влияет только на макет потока.</span><span class="sxs-lookup"><span data-stu-id="93dfb-137">This module affects only the layout of the flow.</span></span>
- <span data-ttu-id="93dfb-138">**Подарочный сертификат** — этот модуль позволяет клиенту заплатить за заказ, используя подарочный сертификат.</span><span class="sxs-lookup"><span data-stu-id="93dfb-138">**Gift card** – This module lets a customer pay for an order by using a gift card.</span></span> <span data-ttu-id="93dfb-139">Он поддерживает только подарочные сертификаты Microsoft Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="93dfb-139">It supports only Microsoft Dynamics 365 Commerce gift cards.</span></span> <span data-ttu-id="93dfb-140">К заказу можно применить одну или несколько подарочных карт.</span><span class="sxs-lookup"><span data-stu-id="93dfb-140">One or more gift cards can be applied to an order.</span></span> <span data-ttu-id="93dfb-141">Если сальдо подарочного сертификата не покрывает сумму в корзине, подарочный сертификат может сочетаться с другим способом оплаты.</span><span class="sxs-lookup"><span data-stu-id="93dfb-141">If the balance of the gift card doesn't cover the amount in the cart, the gift card can be combined with another payment method.</span></span> <span data-ttu-id="93dfb-142">Погашение подарочных сертификатов возможно только в том случае, если клиент вошел в систему.</span><span class="sxs-lookup"><span data-stu-id="93dfb-142">Gift cards can be redeemed only if the customer is signed in.</span></span>
- <span data-ttu-id="93dfb-143">**Баллы по программе лояльности** — этот модуль позволяет клиенту отплатить заказ, используя баллы по программе лояльности.</span><span class="sxs-lookup"><span data-stu-id="93dfb-143">**Loyalty points** – This module lets a customer pay for an order by using loyalty points.</span></span> <span data-ttu-id="93dfb-144">Он предоставляет сводку доступных баллов и баллы, у которых скоро истекает срок действия, а также позволяет клиенту выбирать количество баллов для погашения.</span><span class="sxs-lookup"><span data-stu-id="93dfb-144">It provides a summary of available points and expiring points, and lets the customer select the number of points to redeem.</span></span> <span data-ttu-id="93dfb-145">Если клиент не вошел в систему или не является участником программы лояльности, или если общая сумма в корзине равна 0 (нулю), этот модуль автоматически скрывается.</span><span class="sxs-lookup"><span data-stu-id="93dfb-145">If the customer isn't signed in or isn't a loyalty member, or if the total amount in the cart is 0 (zero), this module is automatically hidden.</span></span>
- <span data-ttu-id="93dfb-146">**Кредитная карта** — этот модуль позволяет клиенту заплатить за заказ, используя кредитную карту.</span><span class="sxs-lookup"><span data-stu-id="93dfb-146">**Credit card** – This module lets a customer pay for an order by using a credit card.</span></span> <span data-ttu-id="93dfb-147">Если общая сумма в корзине покрывается баллами программы лояльности или подарочным сертификатом или эта сумма равна 0 (нулю), этот модуль автоматически скрывается.</span><span class="sxs-lookup"><span data-stu-id="93dfb-147">If the total amount in the cart is covered by loyalty points or a gift card, or if it's 0 (zero), this module is automatically hidden.</span></span> <span data-ttu-id="93dfb-148">Интеграция кредитных карт осуществляется с помощью соединителя платежа Adyen.</span><span class="sxs-lookup"><span data-stu-id="93dfb-148">Credit card integration is provided by the Adyen payment connector.</span></span> <span data-ttu-id="93dfb-149">Дополнительные сведения об использовании этого соединителя см. в разделе [Соединитель платежей Adyen](https://).</span><span class="sxs-lookup"><span data-stu-id="93dfb-149">For more information about how to use this connector, see [Adyen payment connector](https://).</span></span>
- <span data-ttu-id="93dfb-150">**Адрес выставления счета** — этот модуль позволяет клиенту предоставлять сведения о выставлении счета.</span><span class="sxs-lookup"><span data-stu-id="93dfb-150">**Billing address** – This module lets a customer provide billing information.</span></span> <span data-ttu-id="93dfb-151">Эта информация обрабатывается вместе с информацией о кредитной карте, в Adyen.</span><span class="sxs-lookup"><span data-stu-id="93dfb-151">This information is processed, together with the credit card information, by Adyen.</span></span> <span data-ttu-id="93dfb-152">В этом модуле имеется параметр, который позволяет клиентам использовать свой адрес для выставления счетов в качестве адреса доставки.</span><span class="sxs-lookup"><span data-stu-id="93dfb-152">This module includes an option that lets customers use their billing address as the shipping address.</span></span>
- <span data-ttu-id="93dfb-153">**Контактная информация** — этот модуль позволяет клиенту добавлять или изменять контактную информацию (адрес электронной почты) для заказа.</span><span class="sxs-lookup"><span data-stu-id="93dfb-153">**Contact information** – This module lets a customer add or change the contact information (email address) for an order.</span></span>
- <span data-ttu-id="93dfb-154">**Разместить заказ** — этот модуль позволяет клиенту разместить заказ.</span><span class="sxs-lookup"><span data-stu-id="93dfb-154">**Place order** – This module lets a customer place an order.</span></span>
- <span data-ttu-id="93dfb-155">**Блок насыщенного контента** — этот модуль содержит любые сообщения, управляемые системой управления контентом (CMS).</span><span class="sxs-lookup"><span data-stu-id="93dfb-155">**Content rich block** – This module contains any messaging that is driven by the content management system (CMS).</span></span> <span data-ttu-id="93dfb-156">Например, в нем может содержаться сообщение "По вопросам, связанным с заказом, обращайтесь по телефону 1-800-FABRIKAM".</span><span class="sxs-lookup"><span data-stu-id="93dfb-156">For example, it might contain a message that states, "For issues with your order, please contact 1-800-FABRIKAM."</span></span> 
- <span data-ttu-id="93dfb-157">**Сводка заказа** — в этом модуле отображается детализация затрат по заказу.</span><span class="sxs-lookup"><span data-stu-id="93dfb-157">**Order summary** – This module shows the cost breakdown of an order.</span></span>
- <span data-ttu-id="93dfb-158">**Номенклатуры строк заказов** — этот модуль показывает сводку по номенклатурам, которые будут включены в заказ.</span><span class="sxs-lookup"><span data-stu-id="93dfb-158">**Order line items** – This module shows a summary of the items that will be included in an order.</span></span>

## <a name="retail-server-interaction"></a><span data-ttu-id="93dfb-159">Взаимодействие с сервером Retail</span><span class="sxs-lookup"><span data-stu-id="93dfb-159">Retail server interaction</span></span>

<span data-ttu-id="93dfb-160">Большая часть информации об оформлении заказа , например адрес доставки и метод отгрузки, хранится в корзине и обрабатывается как часть заказа.</span><span class="sxs-lookup"><span data-stu-id="93dfb-160">Most of the checkout information, such as the shipping address and shipping method, is stored in the cart and processed as part of the order.</span></span> <span data-ttu-id="93dfb-161">Единственным исключением являются сведения о кредитной карте.</span><span class="sxs-lookup"><span data-stu-id="93dfb-161">The only exception is the credit card information.</span></span> <span data-ttu-id="93dfb-162">Эти сведения обрабатываются непосредственно с помощью соединителя платежей Adyen.</span><span class="sxs-lookup"><span data-stu-id="93dfb-162">This information is processed directly by using the Adyen payment connector.</span></span> <span data-ttu-id="93dfb-163">Платеж авторизуется, но не начисляется.</span><span class="sxs-lookup"><span data-stu-id="93dfb-163">The payment is authorized but isn't charged.</span></span>

## <a name="add-a-checkout-module-to-a-new-page-and-set-the-required-properties"></a><span data-ttu-id="93dfb-164">Добавление модуля оформления заказа на новую страницу и задание необходимых свойств</span><span class="sxs-lookup"><span data-stu-id="93dfb-164">Add a checkout module to a new page and set the required properties</span></span>

<span data-ttu-id="93dfb-165">Чтобы добавить модуль оформления заказа на новую страницу и задать необходимые свойства, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="93dfb-165">To add a checkout module to a new page and set the required properties, follow these steps.</span></span>

1. <span data-ttu-id="93dfb-166">Перейдите к пункту **Фрагмент \> Создать фрагмент** и назовите новый фрагмент **Фрагмента оформления заказа**.</span><span class="sxs-lookup"><span data-stu-id="93dfb-166">Go to **Fragment \> New Fragment**, and name the new fragment **Checkout fragment**.</span></span>
1. <span data-ttu-id="93dfb-167">Добавьте модуль оформления заказа к фрагменту.</span><span class="sxs-lookup"><span data-stu-id="93dfb-167">Add a checkout module to the fragment.</span></span>
1. <span data-ttu-id="93dfb-168">Добавьте заголовок к модулю оформления заказа.</span><span class="sxs-lookup"><span data-stu-id="93dfb-168">Add a heading to the checkout module.</span></span>
1. <span data-ttu-id="93dfb-169">В гнезде **Сведения об оформлении заказа** добавьте модули адреса доставки, вариантов доставки, контейнера раздела оформления заказа и контактных данных.</span><span class="sxs-lookup"><span data-stu-id="93dfb-169">In the **Checkout information** slot, add shipping address, delivery options, checkout section container, and contact information modules.</span></span> <span data-ttu-id="93dfb-170">В гнезде **Сведения об оформлении заказа** должно быть четыре раздела.</span><span class="sxs-lookup"><span data-stu-id="93dfb-170">There should now be four sections in the **Checkout information** slot.</span></span>
1. <span data-ttu-id="93dfb-171">В модуле контейнера раздела оформления заказа добавьте модули подарочного сертификата, баллов по программе лояльности и кредитных карт.</span><span class="sxs-lookup"><span data-stu-id="93dfb-171">In the checkout section container module, add gift card, loyalty points, and credit card modules.</span></span> <span data-ttu-id="93dfb-172">Таким образом вы обеспечите, что все способы оплаты включены в раздел.</span><span class="sxs-lookup"><span data-stu-id="93dfb-172">In this way, you make sure that all the payment methods appear together in a section.</span></span>
1. <span data-ttu-id="93dfb-173">В области **Сводка по заказу** добавьте модули сводки по заказам, размещения заказа и блок насыщенного содержимого.</span><span class="sxs-lookup"><span data-stu-id="93dfb-173">In the **Order summary** slot, add order summary, place order, and content rich block modules.</span></span>
1. <span data-ttu-id="93dfb-174">В модуле блока насыщенного содержимого добавьте следующий текст: **С вопросами о вашем заказе обращайтесь по телефону 1-800-Fabrikam.**</span><span class="sxs-lookup"><span data-stu-id="93dfb-174">In the content rich block module, add the following text: **For questions about your order, contact 1-800-FABRIKAM.**</span></span>
1. <span data-ttu-id="93dfb-175">В ячейке **Размещение заказа** добавьте модуль размещения заказа.</span><span class="sxs-lookup"><span data-stu-id="93dfb-175">In the **Place order** slot, add a place order module.</span></span>
1. <span data-ttu-id="93dfb-176">Нажмите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="93dfb-176">Select **Save**.</span></span> <span data-ttu-id="93dfb-177">Некоторые модули могут не отображаться в окне предварительного просмотра, так как у них нет контекста корзины.</span><span class="sxs-lookup"><span data-stu-id="93dfb-177">Some modules might not be rendered in the preview, because they don't have a cart context.</span></span>
1. <span data-ttu-id="93dfb-178">Верните фрагмент и опубликуйте его.</span><span class="sxs-lookup"><span data-stu-id="93dfb-178">Check the fragment in, and publish it.</span></span>
1. <span data-ttu-id="93dfb-179">Создайте шаблон, в котором используется новый фрагмент оформления заказа.</span><span class="sxs-lookup"><span data-stu-id="93dfb-179">Create a template that uses the new checkout fragment.</span></span>
1. <span data-ttu-id="93dfb-180">Создайте страницу оформления заказа, в которой используется новый шаблон.</span><span class="sxs-lookup"><span data-stu-id="93dfb-180">Create a checkout page that uses the new template.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="93dfb-181">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="93dfb-181">Additional resources</span></span>

[<span data-ttu-id="93dfb-182">Обзор начального набора</span><span class="sxs-lookup"><span data-stu-id="93dfb-182">Starter kit overview</span></span>](starter-kit-overview.md)

[<span data-ttu-id="93dfb-183">Модуль контейнера</span><span class="sxs-lookup"><span data-stu-id="93dfb-183">Container module</span></span>](add-container-module.md)

[<span data-ttu-id="93dfb-184">Модуль поля покупки</span><span class="sxs-lookup"><span data-stu-id="93dfb-184">Buy box module</span></span>](add-buy-box.md)

[<span data-ttu-id="93dfb-185">Модуль корзины</span><span class="sxs-lookup"><span data-stu-id="93dfb-185">Cart module</span></span>](add-cart-module.md)

[<span data-ttu-id="93dfb-186">Модуль подтверждения заказа</span><span class="sxs-lookup"><span data-stu-id="93dfb-186">Order confirmation module</span></span>](order-confirmation-module.md)

[<span data-ttu-id="93dfb-187">Модуль заголовка</span><span class="sxs-lookup"><span data-stu-id="93dfb-187">Header module</span></span>](author-header-module.md)

[<span data-ttu-id="93dfb-188">Модуль нижнего колонтитула</span><span class="sxs-lookup"><span data-stu-id="93dfb-188">Footer module</span></span>](author-footer-module.md)
