---
title: Модуль оформления заказа
description: В этом разделе описывается, как добавить модуль оформления заказа к странице и задать необходимые свойства.
author: anupamar-ms
manager: annbe
ms.date: 01/23/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application user
ms.reviewer: v-chgri
ms.search.scope: Operations, Retail, Core
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: anupamar
ms.search.validFrom: 2019-10-31
ms.dyn365.ops.version: Release 10.0.5
ms.openlocfilehash: 3805c0faabc8afc3decffb924b7f25332ff1ab16
ms.sourcegitcommit: 829329220475ed8cff5a5db92a59dd90c22b04fa
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/05/2020
ms.locfileid: "3025399"
---
# <a name="checkout-module"></a>Модуль оформления заказа


[!include [banner](includes/banner.md)]

В этом разделе описывается, как добавить модуль оформления заказа к странице и задать необходимые свойства.

## <a name="overview"></a>Обзор

Модуль оформления заказа — это специальный контейнер, в котором размещены все модули, необходимые для создания заказа. В нем представлен пошаговый поток, который клиент использует для ввода всех необходимых сведений для проведения покупки. Он получает адрес доставки, способ доставки и сведения о выставлении счетов. Он также предоставляет сводку по заказам и другие сведения, которые относятся к заказу клиента.

Модуль оформления заказа обрабатывает данные на основе идентификатора корзины. Этот идентификатор корзины сохраняется как cookie-файл браузера. Идентификатор корзины требуется для отображения информации в модуле оформления заказа, такой как номенклатуры в заказе, общая сумма и скидки.

## <a name="checkout-module-properties"></a>Свойства модуля оформления заказа

В модуле оформления заказа отображается сводка по заказам и реализованы функции для размещения заказа. Чтобы собрать все сведения о клиенте, которые необходимы, прежде чем заказ можно будет разместить, в модуль оформления заказа должны быть добавлены дополнительные модули. Таким образом, розничные продавцы имеют гибкие возможности добавления настраиваемых модулей в поток оформления заказа или исключения модулей на основе своих требований.

### <a name="modules-that-can-be-used-in-the-checkout-module"></a>Модули, которые могут быть использованы в модуле оформления заказа

- **Адрес отгрузки** — этот модуль позволяет клиенту добавлять или выбирать адрес доставки для заказа. Если клиент вошел в систему, отображаются все адреса, ранее сохраненные для этого клиента. После этого клиент может выбрать один из этих адресов. Клиент также может добавить новый адрес. Адрес доставки используется для всех номенклатур в заказе, для которых требуется доставка. Он не может быть настроен для отдельных номенклатур строки. Форматы адресов отгрузки определяются для каждой страны или региона, а правила, связанные со страной/регионом, применяются данным модулем. Хотя этот модуль не обеспечивает проверку адресов, проверка адреса может быть реализована посредством настройки. Если заказ включает только номенклатуры, которые клиент заберет из магазина, этот модуль автоматически скрывается.
- **Параметры доставки** — этот модуль позволяет клиенту выбрать вариант доставки для заказа. Варианты доставки основаны на адресе отгрузки. Если адрес доставки изменен, необходимо снова извлечь варианты доставки. Если заказ включает только номенклатуры, которые клиент заберет из магазина, этот модуль автоматически скрывается.
- **Контейнер раздела оформления заказа** — этот модуль представляет собой контейнер, в котором можно поместить несколько модулей для создания раздела в потоке оформления заказа. Например, можно поместить в этот контейнер все модули, имеющие отношение к оплате, чтобы они отображались как один раздел. Этот модуль влияет только на макет потока.
- **Подарочный сертификат** — этот модуль позволяет клиенту заплатить за заказ, используя подарочный сертификат. Он поддерживает только подарочные сертификаты Microsoft Dynamics 365 Commerce. К заказу можно применить одну или несколько подарочных карт. Если сальдо подарочного сертификата не покрывает сумму в корзине, подарочный сертификат может сочетаться с другим способом оплаты. Погашение подарочных сертификатов возможно только в том случае, если клиент вошел в систему.
- **Баллы по программе лояльности** — этот модуль позволяет клиенту отплатить заказ, используя баллы по программе лояльности. Он предоставляет сводку доступных баллов и баллы, у которых скоро истекает срок действия, а также позволяет клиенту выбирать количество баллов для погашения. Если клиент не вошел в систему или не является участником программы лояльности, или если общая сумма в корзине равна 0 (нулю), этот модуль автоматически скрывается.
- **Оплата** — этот модуль позволяет клиенту заплатить за заказ, используя кредитную карту. Если общая сумма в корзине покрывается баллами программы лояльности или подарочным сертификатом или эта сумма равна 0 (нулю), этот модуль автоматически скрывается. Интеграция кредитных карт осуществляется с помощью соединителя платежа Adyen для этого модуля. Дополнительные сведения об использовании этого соединителя см. в разделе [Соединитель платежей Dynamics 365 для Adyen](dev-itpro/adyen-connector.md).
- **Адрес выставления счета** — этот модуль позволяет клиенту предоставлять сведения о выставлении счета. Эта информация обрабатывается вместе с информацией о кредитной карте, в Adyen. В этом модуле имеется параметр, который позволяет клиентам использовать свой адрес для выставления счетов в качестве адреса доставки.
- **Контактная информация** — этот модуль позволяет клиенту добавлять или изменять контактную информацию (адрес электронной почты) для заказа.
- **Блок текста** — этот модуль содержит любые сообщения, управляемые системой управления контентом (CMS). Например, в нем может содержаться сообщение "По вопросам, связанным с заказом, обращайтесь по телефону 1-800-Fabrikam". 

## <a name="commerce-scale-unit-interaction"></a>Взаимодействие Commerce Scale Unit

Большая часть информации об оформлении заказа , например адрес доставки и метод отгрузки, хранится в корзине и обрабатывается как часть заказа. Единственным исключением являются сведения о кредитной карте. Эти сведения обрабатываются непосредственно с помощью соединителя платежей Adyen. Платеж авторизуется, но не начисляется.

## <a name="add-a-checkout-module-to-a-new-page-and-set-the-required-properties"></a>Добавление модуля оформления заказа на новую страницу и задание необходимых свойств

Чтобы добавить модуль оформления заказа на новую страницу и задать необходимые свойства, выполните следующие действия.

1. Перейдите к пункту **Фрагмент \> Создать фрагмент** и назовите новый фрагмент **Фрагмента оформления заказа**.
1. Добавьте модуль оформления заказа к фрагменту.
1. Добавьте заголовок к модулю оформления заказа.
1. Добавьте модули адреса доставки, вариантов доставки, контейнера раздела оформления заказа и контактных данных. 
1. В модуле контейнера раздела оформления заказа добавьте модули подарочного сертификата, баллов по программе лояльности и оплаты. Таким образом вы обеспечите, что все способы оплаты включены в раздел.
1. Сохраните и просмотрите фрагмент. Некоторые модули без контекста корзины могут не отображаться в окне предварительного просмотра.
1. Завершите редактирование фрагмента и опубликуйте его.
1. Создайте шаблон, в котором используется новый фрагмент оформления заказа.
1. Создайте страницу оформления заказа, в которой используется новый шаблон.

## <a name="additional-resources"></a>Дополнительные ресурсы

[Обзор начального набора](starter-kit-overview.md)

[Модуль контейнера](add-container-module.md)

[Модуль поля покупки](add-buy-box.md)

[Модуль корзины](add-cart-module.md)

[Модуль подтверждения заказа](order-confirmation-module.md)

[Модуль заголовка](author-header-module.md)

[Модуль нижнего колонтитула](author-footer-module.md)
