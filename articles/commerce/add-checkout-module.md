---
title: Модуль оформления заказа
description: В этом разделе описывается, как добавить модуль оформления заказа к странице и задать необходимые свойства.
author: anupamar-ms
manager: annbe
ms.date: 05/28/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application user
ms.reviewer: v-chgri
ms.search.scope: Operations, Retail, Core
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: anupamar
ms.search.validFrom: 2019-10-31
ms.dyn365.ops.version: Release 10.0.5
ms.openlocfilehash: bd1d66fc39872019fc38dbbfb56dc3015d57d0dd
ms.sourcegitcommit: b52477b7d0d52102a7ca2fb95f4ebfa30ecd9f54
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/29/2020
ms.locfileid: "3411224"
---
# <a name="checkout-module"></a><span data-ttu-id="47fc9-103">Модуль оформления заказа</span><span class="sxs-lookup"><span data-stu-id="47fc9-103">Checkout module</span></span>


[!include [banner](includes/banner.md)]

<span data-ttu-id="47fc9-104">В этом разделе описывается, как добавить модуль оформления заказа к странице и задать необходимые свойства.</span><span class="sxs-lookup"><span data-stu-id="47fc9-104">This topic describes how to add a checkout module to a page and set the required properties.</span></span>

## <a name="overview"></a><span data-ttu-id="47fc9-105">Обзор</span><span class="sxs-lookup"><span data-stu-id="47fc9-105">Overview</span></span>

<span data-ttu-id="47fc9-106">Модуль оформления заказа — это специальный контейнер, в котором размещены все модули, необходимые для создания заказа.</span><span class="sxs-lookup"><span data-stu-id="47fc9-106">A checkout module is a special container that hosts all modules that are required to create an order.</span></span> <span data-ttu-id="47fc9-107">В нем представлен пошаговый поток, который клиент использует для ввода всех необходимых сведений для проведения покупки.</span><span class="sxs-lookup"><span data-stu-id="47fc9-107">It presents a step-by-step flow that a customer uses to enter all the relevant information to make a purchase.</span></span> <span data-ttu-id="47fc9-108">Он получает адрес доставки, способ доставки и сведения о выставлении счетов.</span><span class="sxs-lookup"><span data-stu-id="47fc9-108">It captures the shipping address, shipping method, and billing information.</span></span> <span data-ttu-id="47fc9-109">Он также предоставляет сводку по заказам и другие сведения, которые относятся к заказу клиента.</span><span class="sxs-lookup"><span data-stu-id="47fc9-109">It also provides an order summary and other information that is related to a customer order.</span></span>

<span data-ttu-id="47fc9-110">Модуль оформления заказа обрабатывает данные на основе идентификатора корзины.</span><span class="sxs-lookup"><span data-stu-id="47fc9-110">A checkout module renders data based on the cart ID.</span></span> <span data-ttu-id="47fc9-111">Этот идентификатор корзины сохраняется как cookie-файл браузера.</span><span class="sxs-lookup"><span data-stu-id="47fc9-111">This cart ID is saved as a browser cookie.</span></span> <span data-ttu-id="47fc9-112">Идентификатор корзины требуется для отображения информации в модуле оформления заказа, такой как номенклатуры в заказе, общая сумма и скидки.</span><span class="sxs-lookup"><span data-stu-id="47fc9-112">A cart ID is required to render information in the checkout module, such as the items in the order, the total amount, and discounts.</span></span> 

<span data-ttu-id="47fc9-113">На следующем рисунке показан пример модуля оформления заказа Fabrikam на странице оформления заказа.</span><span class="sxs-lookup"><span data-stu-id="47fc9-113">The following image shows an example of a Fabrikam checkout module on a checkout page.</span></span>

![Пример модуля оформления заказа](./media/Checkout.PNG)

## <a name="checkout-module-properties"></a><span data-ttu-id="47fc9-115">Свойства модуля оформления заказа</span><span class="sxs-lookup"><span data-stu-id="47fc9-115">Checkout module properties</span></span>

<span data-ttu-id="47fc9-116">В модуле оформления заказа отображается сводка по заказам и реализованы функции для размещения заказа.</span><span class="sxs-lookup"><span data-stu-id="47fc9-116">A checkout module shows an order summary and provides the functionality for placing an order.</span></span> <span data-ttu-id="47fc9-117">Чтобы собрать все сведения о клиенте, которые необходимы, прежде чем заказ можно будет разместить, в модуль оформления заказа должны быть добавлены дополнительные модули.</span><span class="sxs-lookup"><span data-stu-id="47fc9-117">To gather all the customer information that is required before an order can be placed, additional modules must be added to the checkout module.</span></span> <span data-ttu-id="47fc9-118">Таким образом, розничные продавцы имеют гибкие возможности добавления настраиваемых модулей в поток оформления заказа или исключения модулей на основе своих требований.</span><span class="sxs-lookup"><span data-stu-id="47fc9-118">Therefore, retailers have the flexibility to add custom modules to the checkout flow, or to exclude modules, based on their requirements.</span></span>

### <a name="modules-that-can-be-used-in-the-checkout-module"></a><span data-ttu-id="47fc9-119">Модули, которые могут быть использованы в модуле оформления заказа</span><span class="sxs-lookup"><span data-stu-id="47fc9-119">Modules that can be used in the checkout module</span></span>

- <span data-ttu-id="47fc9-120">**Адрес отгрузки** — этот модуль позволяет клиенту добавлять или выбирать адрес доставки для заказа.</span><span class="sxs-lookup"><span data-stu-id="47fc9-120">**Shipping address** – This module lets a customer add or select the shipping address for an order.</span></span> <span data-ttu-id="47fc9-121">Если клиент вошел в систему, отображаются все адреса, ранее сохраненные для этого клиента.</span><span class="sxs-lookup"><span data-stu-id="47fc9-121">If the customer is signed in, any addresses that were previously saved for that customer are shown.</span></span> <span data-ttu-id="47fc9-122">После этого клиент может выбрать один из этих адресов.</span><span class="sxs-lookup"><span data-stu-id="47fc9-122">The customer can then select among those addresses.</span></span> <span data-ttu-id="47fc9-123">Клиент также может добавить новый адрес.</span><span class="sxs-lookup"><span data-stu-id="47fc9-123">The customer can also add a new address.</span></span> <span data-ttu-id="47fc9-124">Адрес доставки используется для всех номенклатур в заказе, для которых требуется доставка.</span><span class="sxs-lookup"><span data-stu-id="47fc9-124">The shipping address is used for all the items in the order that require shipping.</span></span> <span data-ttu-id="47fc9-125">Он не может быть настроен для отдельных номенклатур строки.</span><span class="sxs-lookup"><span data-stu-id="47fc9-125">It can't be customized for individual line items.</span></span> <span data-ttu-id="47fc9-126">Форматы адресов отгрузки определяются для каждой страны или региона, а правила, связанные со страной/регионом, применяются данным модулем.</span><span class="sxs-lookup"><span data-stu-id="47fc9-126">Shipping address formats are defined for each country or region, and the country/region-specific rules are enforced by this module.</span></span> <span data-ttu-id="47fc9-127">Хотя этот модуль не обеспечивает проверку адресов, проверка адреса может быть реализована посредством настройки.</span><span class="sxs-lookup"><span data-stu-id="47fc9-127">Although this module doesn't provide address validation, address validation can be implemented through customization.</span></span> <span data-ttu-id="47fc9-128">Если заказ включает только номенклатуры, которые клиент заберет из магазина, этот модуль автоматически скрывается.</span><span class="sxs-lookup"><span data-stu-id="47fc9-128">If the order includes only items that will be picked up in the store, this module is automatically hidden.</span></span>

    <span data-ttu-id="47fc9-129">На следующем рисунке показан пример модуля адреса доставки Fabrikam на странице оформления заказа.</span><span class="sxs-lookup"><span data-stu-id="47fc9-129">The following image shows an example of a shipping address module on a checkout page.</span></span>

    ![Пример модуля адреса доставки](./media/ecommerce-shippingaddress.PNG)

- <span data-ttu-id="47fc9-131">**Параметры доставки** — этот модуль позволяет клиенту выбрать вариант доставки для заказа.</span><span class="sxs-lookup"><span data-stu-id="47fc9-131">**Delivery options** – This module lets a customer select a delivery option for an order.</span></span> <span data-ttu-id="47fc9-132">Варианты доставки основаны на адресе отгрузки.</span><span class="sxs-lookup"><span data-stu-id="47fc9-132">Delivery options are based on the shipping address.</span></span> <span data-ttu-id="47fc9-133">Если адрес доставки изменен, необходимо снова извлечь варианты доставки.</span><span class="sxs-lookup"><span data-stu-id="47fc9-133">If the shipping address is changed, the delivery options must be retrieved again.</span></span> <span data-ttu-id="47fc9-134">Если заказ включает только номенклатуры, которые клиент заберет из магазина, этот модуль автоматически скрывается.</span><span class="sxs-lookup"><span data-stu-id="47fc9-134">If the order includes only items that will be picked up in the store, this module is automatically hidden.</span></span>

    <span data-ttu-id="47fc9-135">На следующем рисунке показан пример модуля параметров поставки на странице оформления заказа.</span><span class="sxs-lookup"><span data-stu-id="47fc9-135">The following image shows an example of a delivery options module on a checkout page.</span></span>

    ![Пример модуля параметров поставки](./media/ecommerce-deliveryoptions.PNG)

- <span data-ttu-id="47fc9-137">**Контейнер раздела оформления заказа** — этот модуль представляет собой контейнер, в котором можно поместить несколько модулей для создания раздела в потоке оформления заказа.</span><span class="sxs-lookup"><span data-stu-id="47fc9-137">**Checkout section container** – This module is a container that you can put multiple modules inside to create a section within the checkout flow.</span></span> <span data-ttu-id="47fc9-138">Например, можно поместить в этот контейнер все модули, имеющие отношение к оплате, чтобы они отображались как один раздел.</span><span class="sxs-lookup"><span data-stu-id="47fc9-138">For example, you can put all payment-related modules inside this container to make them appear as one section.</span></span> <span data-ttu-id="47fc9-139">Этот модуль влияет только на макет потока.</span><span class="sxs-lookup"><span data-stu-id="47fc9-139">This module affects only the layout of the flow.</span></span>
- <span data-ttu-id="47fc9-140">**Подарочный сертификат** — этот модуль позволяет клиенту заплатить за заказ, используя подарочный сертификат.</span><span class="sxs-lookup"><span data-stu-id="47fc9-140">**Gift card** – This module lets a customer pay for an order by using a gift card.</span></span> <span data-ttu-id="47fc9-141">Он поддерживает только подарочные сертификаты Microsoft Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="47fc9-141">It supports only Microsoft Dynamics 365 Commerce gift cards.</span></span> <span data-ttu-id="47fc9-142">К заказу можно применить одну или несколько подарочных карт.</span><span class="sxs-lookup"><span data-stu-id="47fc9-142">One or more gift cards can be applied to an order.</span></span> <span data-ttu-id="47fc9-143">Если сальдо подарочного сертификата не покрывает сумму в корзине, подарочный сертификат может сочетаться с другим способом оплаты.</span><span class="sxs-lookup"><span data-stu-id="47fc9-143">If the balance of the gift card doesn't cover the amount in the cart, the gift card can be combined with another payment method.</span></span> <span data-ttu-id="47fc9-144">Погашение подарочных сертификатов возможно только в том случае, если клиент вошел в систему.</span><span class="sxs-lookup"><span data-stu-id="47fc9-144">Gift cards can be redeemed only if the customer is signed in.</span></span>
- <span data-ttu-id="47fc9-145">**Баллы по программе лояльности** — этот модуль позволяет клиенту отплатить заказ, используя баллы по программе лояльности.</span><span class="sxs-lookup"><span data-stu-id="47fc9-145">**Loyalty points** – This module lets a customer pay for an order by using loyalty points.</span></span> <span data-ttu-id="47fc9-146">Он предоставляет сводку доступных баллов и баллы, у которых скоро истекает срок действия, а также позволяет клиенту выбирать количество баллов для погашения.</span><span class="sxs-lookup"><span data-stu-id="47fc9-146">It provides a summary of available points and expiring points, and lets the customer select the number of points to redeem.</span></span> <span data-ttu-id="47fc9-147">Если клиент не вошел в систему или не является участником программы лояльности, или если общая сумма в корзине равна 0 (нулю), этот модуль автоматически скрывается.</span><span class="sxs-lookup"><span data-stu-id="47fc9-147">If the customer isn't signed in or isn't a loyalty member, or if the total amount in the cart is 0 (zero), this module is automatically hidden.</span></span>
- <span data-ttu-id="47fc9-148">**Оплата** — этот модуль позволяет клиенту заплатить за заказ, используя кредитную карту.</span><span class="sxs-lookup"><span data-stu-id="47fc9-148">**Payment** – This module lets a customer pay for an order by using a credit card.</span></span> <span data-ttu-id="47fc9-149">Если общая сумма в корзине покрывается баллами программы лояльности или подарочным сертификатом или эта сумма равна 0 (нулю), этот модуль автоматически скрывается.</span><span class="sxs-lookup"><span data-stu-id="47fc9-149">If the total amount in the cart is covered by loyalty points or a gift card, or if it's 0 (zero), this module is automatically hidden.</span></span> <span data-ttu-id="47fc9-150">Интеграция кредитных карт осуществляется с помощью соединителя платежа Adyen для этого модуля.</span><span class="sxs-lookup"><span data-stu-id="47fc9-150">Credit card integration is provided by the Adyen payment connector for this module.</span></span> <span data-ttu-id="47fc9-151">Дополнительные сведения об использовании этого соединителя см. в разделе [Соединитель платежей Dynamics 365 для Adyen](dev-itpro/adyen-connector.md).</span><span class="sxs-lookup"><span data-stu-id="47fc9-151">For more information about how to use this connector, see [Dynamics 365 Payment Connector for Adyen](dev-itpro/adyen-connector.md).</span></span>
- <span data-ttu-id="47fc9-152">**Адрес выставления счета** — этот модуль позволяет клиенту предоставлять сведения о выставлении счета.</span><span class="sxs-lookup"><span data-stu-id="47fc9-152">**Billing address** – This module lets a customer provide billing information.</span></span> <span data-ttu-id="47fc9-153">Эта информация обрабатывается вместе с информацией о кредитной карте, в Adyen.</span><span class="sxs-lookup"><span data-stu-id="47fc9-153">This information is processed, together with the credit card information, by Adyen.</span></span> <span data-ttu-id="47fc9-154">В этом модуле имеется параметр, который позволяет клиентам использовать свой адрес для выставления счетов в качестве адреса доставки.</span><span class="sxs-lookup"><span data-stu-id="47fc9-154">This module includes an option that lets customers use their billing address as the shipping address.</span></span>

    <span data-ttu-id="47fc9-155">На следующем рисунке показан пример модулей подарочных сертификатов, баллов по программе лояльности, платежей и адресов выставления счетов на странице оформления заказа.</span><span class="sxs-lookup"><span data-stu-id="47fc9-155">The following image shows an example of gift card, loyalty points, payment, and billing address modules on a checkout page.</span></span>

    ![Пример модулей подарочных сертификатов, баллов по программе лояльности, платежей и модулей адресов выставления счетов](./media/ecommerce-payments.PNG)

- <span data-ttu-id="47fc9-157">**Контактная информация** — этот модуль позволяет клиенту добавлять или изменять контактную информацию (адрес электронной почты) для заказа.</span><span class="sxs-lookup"><span data-stu-id="47fc9-157">**Contact information** – This module lets a customer add or change the contact information (email address) for an order.</span></span>

- <span data-ttu-id="47fc9-158">**Блок текста** — этот модуль содержит любые сообщения, управляемые системой управления контентом (CMS).</span><span class="sxs-lookup"><span data-stu-id="47fc9-158">**Text block** – This module contains any messaging that is driven by the content management system (CMS).</span></span> <span data-ttu-id="47fc9-159">Например, в нем может содержаться сообщение "По вопросам, связанным с заказом, обращайтесь по телефону 1-800-Fabrikam".</span><span class="sxs-lookup"><span data-stu-id="47fc9-159">For example, it might contain a message that states, "For issues with your order, contact 1-800-Fabrikam."</span></span> 

## <a name="commerce-scale-unit-interaction"></a><span data-ttu-id="47fc9-160">Взаимодействие Commerce Scale Unit</span><span class="sxs-lookup"><span data-stu-id="47fc9-160">Commerce Scale Unit interaction</span></span>

<span data-ttu-id="47fc9-161">Большая часть информации об оформлении заказа , например адрес доставки и метод отгрузки, хранится в корзине и обрабатывается как часть заказа.</span><span class="sxs-lookup"><span data-stu-id="47fc9-161">Most of the checkout information, such as the shipping address and shipping method, is stored in the cart and processed as part of the order.</span></span> <span data-ttu-id="47fc9-162">Единственным исключением являются сведения о кредитной карте.</span><span class="sxs-lookup"><span data-stu-id="47fc9-162">The only exception is the credit card information.</span></span> <span data-ttu-id="47fc9-163">Эти сведения обрабатываются непосредственно с помощью соединителя платежей Adyen.</span><span class="sxs-lookup"><span data-stu-id="47fc9-163">This information is processed directly by using the Adyen payment connector.</span></span> <span data-ttu-id="47fc9-164">Платеж авторизуется, но не начисляется.</span><span class="sxs-lookup"><span data-stu-id="47fc9-164">The payment is authorized but isn't charged.</span></span>

## <a name="add-a-checkout-module-to-a-page-and-set-the-required-properties"></a><span data-ttu-id="47fc9-165">Добавление модуля оформления заказа на страницу и задание необходимых свойств</span><span class="sxs-lookup"><span data-stu-id="47fc9-165">Add a checkout module to a page and set the required properties</span></span>

<span data-ttu-id="47fc9-166">Чтобы добавить модуль оформления заказа на новую страницу и задать необходимые свойства, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="47fc9-166">To add a checkout module to a new page and set the required properties, follow these steps.</span></span>

1. <span data-ttu-id="47fc9-167">Перейдите к разделу **Фрагменты страниц**, выберите **Создать**, чтобы создать фрагмент.</span><span class="sxs-lookup"><span data-stu-id="47fc9-167">Go to **Page Fragments**, and select **New** to create a new fragment.</span></span>
1. <span data-ttu-id="47fc9-168">В диалоговом окне **Создать фрагмент страницы** выберите модуль **Оформление заказа**.</span><span class="sxs-lookup"><span data-stu-id="47fc9-168">In the **New Page Fragment** dialog box, select the **Checkout** module.</span></span>
1. <span data-ttu-id="47fc9-169">В области **Имя фрагмента страницы** введите имя **Фрагмент оформления заказа**, затем выберите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="47fc9-169">Under **Page Fragment Name**, enter the name **Checkout fragment**, and then select **OK**.</span></span>
1. <span data-ttu-id="47fc9-170">Выберите ячейку **Модуль оформления заказа**.</span><span class="sxs-lookup"><span data-stu-id="47fc9-170">Select the **Checkout module** slot.</span></span>
1. <span data-ttu-id="47fc9-171">В области свойств справа выберите символ карандаш, введите текст заголовка в поле, а затем выберите символ галочки.</span><span class="sxs-lookup"><span data-stu-id="47fc9-171">In the properties pane on the right, select the pencil symbol, enter heading text in the field, and then select the check mark symbol.</span></span>
1. <span data-ttu-id="47fc9-172">В ячейке **Информация об оформлении заказа** выберите многоточие (**...**), затем выберите **Добавить модуль**.</span><span class="sxs-lookup"><span data-stu-id="47fc9-172">In the **Checkout Information** slot, select the ellipsis (**...**), and then select **Add Module**.</span></span>
1. <span data-ttu-id="47fc9-173">В диалоговом окне **Добавление модуля** выберите **Адрес доставки**, **Параметры поставки**, **Контейнер раздела оформления заказа** и **Контактные данные**, а затем нажмите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="47fc9-173">In the **Add Module** dialog box, select the **Shipping address**, **Delivery options**, **Checkout section container**, and **Contact information** modules, and then select **OK**.</span></span>
1. <span data-ttu-id="47fc9-174">В модуле **Контейнер раздела оформления заказа** выберите многоточие (**...**), затем выберите **Добавить модуль**.</span><span class="sxs-lookup"><span data-stu-id="47fc9-174">In the **Checkout section container** module, select the ellipsis (**...**), and then select **Add Module**.</span></span>
1. <span data-ttu-id="47fc9-175">В диалоговом окне **Добавление модуля** выберите модули **Подарочный сертификат**, **Лояльность** и **Платеж**, затем выберите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="47fc9-175">In the **Add Module** dialog box, select the **Gift card**, **Loyalty**, and **Payment** modules, and then select **OK**.</span></span> <span data-ttu-id="47fc9-176">Таким образом вы обеспечите, что все способы оплаты включены в раздел.</span><span class="sxs-lookup"><span data-stu-id="47fc9-176">In this way, you make sure that all the payment methods appear together in a section.</span></span>
1. <span data-ttu-id="47fc9-177">Выберите **Сохранить**, затем выберите **Предварительный просмотр**, чтобы просмотреть фрагмент.</span><span class="sxs-lookup"><span data-stu-id="47fc9-177">Select **Save**, and then select **Preview** to preview the fragment.</span></span> <span data-ttu-id="47fc9-178">Некоторые модули без контекста корзины могут не отображаться в окне предварительного просмотра.</span><span class="sxs-lookup"><span data-stu-id="47fc9-178">Some modules that don't have a cart context might not be rendered in the preview.</span></span>
1. <span data-ttu-id="47fc9-179">Выберите **Завершить редактирование** для возврата фрагмента, затем нажмите кнопку **Опубликовать**, чтобы опубликовать ее.</span><span class="sxs-lookup"><span data-stu-id="47fc9-179">Select **Finish editing** to check in the fragment, and then select **Publish** to publish it.</span></span>
1. <span data-ttu-id="47fc9-180">Создайте шаблон, в котором используется новый фрагмент оформления заказа.</span><span class="sxs-lookup"><span data-stu-id="47fc9-180">Create a template that uses the new checkout fragment.</span></span>
1. <span data-ttu-id="47fc9-181">Создайте страницу оформления заказа, в которой используется новый шаблон.</span><span class="sxs-lookup"><span data-stu-id="47fc9-181">Create a checkout page that uses the new template.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="47fc9-182">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="47fc9-182">Additional resources</span></span>

[<span data-ttu-id="47fc9-183">Обзор начального набора</span><span class="sxs-lookup"><span data-stu-id="47fc9-183">Starter kit overview</span></span>](starter-kit-overview.md)

[<span data-ttu-id="47fc9-184">Модуль контейнера</span><span class="sxs-lookup"><span data-stu-id="47fc9-184">Container module</span></span>](add-container-module.md)

[<span data-ttu-id="47fc9-185">Модуль поля покупки</span><span class="sxs-lookup"><span data-stu-id="47fc9-185">Buy box module</span></span>](add-buy-box.md)

[<span data-ttu-id="47fc9-186">Модуль корзины</span><span class="sxs-lookup"><span data-stu-id="47fc9-186">Cart module</span></span>](add-cart-module.md)

[<span data-ttu-id="47fc9-187">Модуль подтверждения заказа</span><span class="sxs-lookup"><span data-stu-id="47fc9-187">Order confirmation module</span></span>](order-confirmation-module.md)

[<span data-ttu-id="47fc9-188">Модуль заголовка</span><span class="sxs-lookup"><span data-stu-id="47fc9-188">Header module</span></span>](author-header-module.md)

[<span data-ttu-id="47fc9-189">Модуль нижнего колонтитула</span><span class="sxs-lookup"><span data-stu-id="47fc9-189">Footer module</span></span>](author-footer-module.md)
