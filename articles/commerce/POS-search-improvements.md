---
title: Поиск продуктов и клиентов в POS
description: В этой теме приведен обзор усовершенствований, внесенных в функциональность поиска продукта и клиента в Dynamics 365 Commerce.
author: ShalabhjainMSFT
manager: AnnBe
ms.date: 07/28/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application user
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.custom: 141393
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Retail
ms.author: shajain
ms.search.validFrom: 2017-06-30
ms.dyn365.ops.version: Retail April 2017 update
ms.openlocfilehash: 10c843670a280c86790185c8a39cb2943e2838f9
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/13/2020
ms.locfileid: "4415161"
---
# <a name="product-search-and-customer-search-in-the-point-of-sale-pos"></a>Поиск продуктов и клиентов в POS

[!include [banner](includes/banner.md)]

В Modern Point of Sale (MPOS) и Cloud Point of Sale (CPOS) предусмотрена удобная функциональность поиска продуктов и клиентов. Поскольку панель поиска всегда присутствует в верхней части окон MPOS и CPOS, чтобы сотрудники могли быстро искать продукты и клиентов.

Сотрудники могут искать продукты в ассортиментах и каталогах, которые связаны с текущим магазином. Они также могут искать продукты в ассортиментах и каталогах, которые связаны с любым другим магазином в компании. Следовательно, кассиры могут продавать и принимать возвраты продуктов, не входящих в ассортимент магазина. Аналогичным образом, сотрудники могут выполнять поиск клиентов, которые связаны с текущим магазином или с любым другим магазином в компании. Кроме того, сотрудники выполнять поиск клиентов, которые связаны с другой компанией в родительской организации.

## <a name="product-search"></a>Поиск продукта

По умолчанию поиски продуктов выполняются в ассортименте магазина. Такой тип поиска называется *локальным поиском продукта*. Однако сотрудников легко могут переключаться на любой каталог, связанный с текущим магазина, либо выполнять поиск в другом магазине. Такой тип поиска называется *удаленным поиском продукта*. Чтобы сменить каталог, нажмите кнопку **Категории** в левой части страницы. Вверху появившейся области нажмите кнопку **Изменить каталог**, а затем выберите один из доступных каталогов. Система будет выполнит поиск продуктов в выбранном каталоге.

На странице **Изменить каталог** сотрудники легко могут выбрать любой магазин или выполнить поиск продуктов по всем магазинами.

![Изменение каталога](./media/Changecatalog.png "Изменение каталога")

При локальном поиске продукта поиск производится в следующих свойствах продуктов:

- Номер продукта
- Имя продукта
- описание
- Измерения
- Штрих-код
- Краткое наименование

### <a name="enhancements-to-local-product-searches"></a>Усовершенствования локального поиска продукта

Интерфейс локального поиска продукта теперь стал удобнее. Внесены следующие усовершенствования:

- На панель поиска добавлены раскрывающиеся меню , чтобы сотрудники могли выбрать **Продукт** или **Клиент**, прежде чем выполнять поиск. По умолчанию выбран вариант **Продукт**, как показано на приведенном ниже рисунке.
- Для поиска по нескольким ключевым словам предприятия розничной торговли могут настроить поиск так, чтобы результаты включали *любое* из введенных слов или *все* слова. Параметр для этой функциональности доступен в профиле функциональности POS в новой группе, которая называется **Поиск продукта**. Значение по умолчанию — **Сопоставить любые условия поиска**. Это значение также является рекомендуемым. При использовании параметра **Сопоставить любые условия поиска** все продукты, которые полностью или частично соответствуют одному или нескольким условиям поиска, возвращаются в виде результатов. Эти результаты автоматически сортируются в порядке возрастания продуктов, которые имеют совпадения большинства ключевых слов (полное или частичное).

    При использовании значения **Сопоставить все условия поиска** возвращаются только продукты, в которых присутствуют все введенные слова. Это значение удобно использовать в случае, когда наименования продуктов длинные и сотрудникам хотелось бы видеть в результатах поиска ограниченный набор продуктов. Однако такой тип поиска имеет два ограничения:

    - Поиск выполняется по отдельным свойствам продуктов. Например, возвращаются только те продукты, у которых все введенные ключевые слова присутствуют в одном (хотя бы в одном) свойстве продукта.
    - Поиск не производится в аналитиках.

- Предприятия розничной торговли теперь могут настроить поиск продуктов так, чтобы при вводе наименований продуктов пользователями отображались предложения (варианты поиска). Новый параметр для этой функциональности доступен в профиле функциональности POS в новой группе, которая называется **Поиск продукта**. Параметр называется **Показывать предложения при вводе**. Эта функциональность позволяет сотрудникам быстрее находить продукты, которые они ищут, потому что им не нужно вводить имя целиком вручную.
- Алгоритм поиска продукта теперь также выполняет поиск введенных слов в свойстве **Имя поиска** продукта.

![Предложения продуктов](./media/Productsuggestions.png "Предложения продуктов")

## <a name="customer-search"></a>Поиск клиента

Поиск клиентов позволяет находить клиентов для различных целей. Например, кассирам может потребоваться просмотреть список пожеланий клиента или историю его покупок либо добавить клиента в транзакцию. Алгоритм поиска соответствует условиям поиска для значений, которые присутствуют в следующих свойствах клиента:

- Название
- Адрес электронной почты
- Номер телефона
- Номер дисконтной карточки
- Адрес
- Расчетный счет

Среди этих свойств имя предоставляет наибольшую гибкость при поиске с несколькими ключевыми словами, так как алгоритм возвращает всех клиентов, которые соответствуют любому из искомых ключевых слов. Клиенты, в свойствах которых присутствует больше всего ключевых слов, выводятся вверху списка результатов. Это поведение помогает кассирам в ситуациях, когда они ищут путем ввода полного имени, но имя и фамилия были поменяны местами при начальном вводе данных. Однако по соображениям производительности все остальные свойства сохраняют порядок ключевых слов поиска. Таким образом, если порядок ключевых слов поиска не совпадает с порядком, в котором хранятся данные, результаты не будут возвращены.

По умолчанию поиск клиентов производится в адресных книгах клиентов, связанных с магазином. Такой тип поиска называется *локальным поиском клиента*. Однако сотрудники могут также выполнять поиск клиентов глобально. Иными словами, они могут искать клиентов по всем магазинам компании и по всем остальным юридическим лицам. Такой тип поиска называется *удаленным поиском клиента*.

Для глобального поиска сотрудники могут нажать кнопку **Результаты фильтра** внизу страницы, а затем выбрать вариант **Искать по всем магазинам**, как показано на приведенном ниже рисунке. В этом случае возвращаются не только клиенты. Возвращаются также все типы субъектов, присутствующих в адресной книге в главном офисе. К этим субъектам относятся сотрудники, поставщики, контакты и конкуренты.

> [!NOTE]
> Чтобы удаленный поиск клиента возвратил результаты, необходимо ввести не менее четырех символов.

При удаленном поиске клиента для клиентов из других юридических лиц не отображается код клиента, поскольку в текущей компании для этих субъектов код клиента не создан. Однако если сотрудник открывает страницу сведений о клиенте, система автоматически создает для субъекта код клиента, а также связывает адресные книги клиентов магазина с клиентом. Следовательно, клиент будет присутствовать в локальных поисках в магазине, которые производятся позднее.

![Глобальный поиск клиента](./media/Globalcustomersearch.png "Глобальный поиск клиента")

### <a name="enhancements-to-local-customer-search"></a>Усовершенствования локального поиска клиента

Поиски, которые основаны на номере телефона, были упрощены. Теперь эти поиски игнорируют специальные символы, такие как пробелы, дефисы и скобки, которые могли быть добавлены при создании клиента. Таким образом, кассирам не нужно беспокоиться о формате номера телефона при выполнении поиска. Например, если номер телефона клиента был введен как **123-456-7890**, кассир может искать клиента, вводя **1234567890** либо введя первые несколько цифр номера телефона.

> [!NOTE]
> У клиента может быть несколько телефонных номеров и несколько адресов электронной почты. Алгоритм поиска клиентов также выполняет поиск по дополнительным электронным адресам электронной почты и номерам телефонов, но на странице результатов поиска клиентов отображается только основное сообщение и номер телефона. Это может привести к путанице, поскольку результаты возвращенного клиента не будут показывать адрес электронной почты или номер телефона, по которому выполняется поиск. В следующем выпуске мы планируем улучшить экран результатов поиска клиентов, чтобы показать эту информацию.

Традиционной поиск клиента может требовать много времени, поскольку выполняется поиск по нескольким полям. Вместо этого кассиры могут теперь выполнять поиск в одном свойстве клиента, таком как имя, адрес электронной почты или номер телефона. Свойства, которые использует алгоритм поиска клиента, совокупно обозначаются термином *критерии поиска клиентов*. Администратор системы можно легко настроить один или несколько критериев как ярлыки, которые будут отображаться в POS. Поскольку поиск ограничен только одним критерием, отображаются только релевантные результаты поиска и производительность гораздо лучше, чем производительность стандартного поиска клиентов. На следующем рисунке показаны ярлыки поиска клиента в POS.

![Ярлыки поиска клиентов](./media/SearchShortcutsPOS.png "Ярлыки поиска клиентов")

Чтобы установить критерии поиска как ярлык, администратору необходимо открыть страницу **Параметры Commerce** в Commerce, а затем на вкладке **Критерии поиска POS** выбрать все условия, которые должны отображаться как ярлыки.

![Настройка ярлыков для поиска](./media/ConfigureShortcutsAX.png "Настройка ярлыков для поиска")

> [!NOTE]
> Если добавлено слишком много ярлыков, раскрывающееся меню на панели поиска в POS будет загромождено, что может повлиять негативно повлиять на эффективность поиска сотрудниками. Рекомендуется добавлять только действительно необходимые ярлыки.

Поле **Порядок отображения** определяет порядок, в котором ярлыки отображается в POS. Критерии, которые отображаются, — это готовые свойства, которые использует алгоритм поиска клиентов для поиска клиентов. Однако партнеры могут добавить пользовательские свойства как ярлыки поиска. Чтобы добавить настраиваемые свойства в качестве ярлыков поиска, администратор системы должен расширить расширяемое перечисление (enum), которое используется для критериев поиска клиентов, а затем пометить настраиваемые свойства партнера в качестве ярлыков. Партнеры несет ответственность за написание кода поиска результатов, когда их пользовательские ярлыки используются для поиска.

> [!NOTE]
> Пользовательское свойство, которое добавлено в перечисление, не влияет на стандартный алгоритм поиска клиентов. Другими словами, алгоритм поиска клиентов не будет выполнять поиск в пользовательском свойстве. Пользователи могут использовать пользовательское свойство для поиска только в том случае, если это пользовательское свойство добавлено как ярлык или если алгоритм поиска по умолчанию переопределен.

В предстоящем выпуске Commerce розничные магазины смогут настроить для режим поиска клиентов по умолчанию в POS-терминале режим **Поиск по всем магазинам**. Эта конфигурация может быть полезной в сценариях, где клиенты, созданные за пределами POS, должны быть немедленно просмотрены (например, даже перед выполнением задания распределения). Новый параметр **Режим поиска клиентов по умолчанию** будет доступен в профиле функциональности POS-терминала. Установите значение **Вкл.**, чтобы задать режим поиска по умолчанию **Поиск по всем магазинам**. При каждой попытке поиска клиента будет выполняться вызов головного офиса в реальном времени.

Чтобы помочь предотвратить непредвиденные проблемы производительности, эта конфигурация скрыта под флагом фокус-тестирования с именем **CUSTOMERSEARCH_ENABLE_DEFAULTSEARCH_FLIGHTING**. Таким образом, чтобы показать параметр **Режим поиска клиентов по умолчанию** в пользовательском интерфейсе, розничный магазин должен создать заявку в службе технической поддержки для своей среды приемочного тестирования пользователями (UAT) и производственных сред. После получения заявки группа инженеров будет работать во взаимодействии с розничным магазином, чтобы гарантировать, что продавец выполняет тестирование в непроизводственных средах, чтобы оценить производительность и реализовать все необходимые оптимизации.



[!INCLUDE[footer-include](../includes/footer-banner.md)]