---
title: Настройка среды песочницы Dynamics 365 Commerce
description: В этой статье объясняется, как настроить среду песочницы Microsoft Dynamics 365 Commerce после ее предоставления.
author: josaw1
ms.date: 06/14/2022
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application user
ms.reviewer: v-chgriffin
ms.search.region: Global
ms.author: josaw
ms.search.validFrom: 2019-12-10
ms.dyn365.ops.version: Release 10.0.5
ms.custom: ''
ms.assetid: ''
ms.openlocfilehash: ae6a8c63721ac32f525e1846a10c0b2caeb08f9f
ms.sourcegitcommit: 87e727005399c82cbb6509f5ce9fb33d18928d30
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/12/2022
ms.locfileid: "9270381"
---
# <a name="configure-a-dynamics-365-commerce-sandbox-environment"></a>Настройка среды песочницы Dynamics 365 Commerce

[!include [banner](includes/banner.md)]

В этой статье объясняется, как настроить среду песочницы Microsoft Dynamics 365 Commerce после ее предоставления.

Выполните процедуры в этой статье только после того, как ваша среда песочницы Commerce была создана. Для получения информации о том, как предоставить среду песочницы Commerce, см. в разделе [Подготовка среды песочницы Commerce](provisioning-guide.md).

После того как среда песочницы Commerce была полностью подготовлена, необходимо завершить дополнительные этапы конфигурации после подготовки, прежде чем вы сможете использовать эту среду. Для выполнения этих шагов необходимо использовать Microsoft Dynamics Lifecycle Services (LCS) и Dynamics 365 Commerce.

## <a name="before-you-start"></a>Перед началом

1. Выполните вход на [портал LCS](https://lcs.dynamics.com).
1. Перейдите к своему проекту.
1. Выберите среду из списка.
1. Щелкните **Войти в среду** в сведениях о среде с правой стороны. Вы будете отправлены в Commerce Headquarters.
1. Убедитесь, что выбрано юридическое лицо **USRT** (верхний правый угол). В демонстрационных данных заранее настроено юридическое лицо.
1. Перейдите в раздел **Параметры Commerce \> Параметры конфигурации** и убедитесь, что запись для **ProductSearch.UseAzureSearch** установлена в значение **true**. Если эта запись отсутствует, добавьте ее и задайте значение **true**.
1. Перейдите к **Розница и коммерция \> Настройка центрального офиса \> Планировщик коммерции \> Инициализация планировщика коммерции**. В сплывающем меню **Инициализация планировщика коммерции** убедитесь, что параметр **Удалить существующую конфигурацию** имеет значение **Да**, затем выберите **ОК**.
1. Чтобы каналы магазина и электронной коммерции работали правильно, они должны быть добавлены в Commerce Scale Unit. Перейдите в меню **Розница и коммерция \> Параметры главного офиса \> Планировщик коммерции \> База данных канала**, затем в левой области выберите Commerce Scale Unit. На Экспресс-вкладке **Канал розничной торговли** добавьте каналы **Интернет-магазин AW**, **Интернет-магазин АВ Business** и **Расширенный интернет-магазин Fabrikam**, если планируете использовать эти каналы электронной коммерции. Кроме того, можно добавить магазины розничной торговли, если вы будете использовать POS-терминал (например, **Сиэтл**, **Сан-Франциско** и/или **Сан-Хосе**).
1. Чтобы обеспечить, чтобы все изменения синхронизировались с базой данных канала, выберите **База данных канала \> Полная синхронизация данных** для Commerce Scale Unit.

Во время действий после подготовки в модуле Commerce Headquarters убедитесь, что всегда выбрано юридическое лицо **USRT**.

## <a name="configure-the-point-of-sale"></a>Настройка POS

### <a name="associate-a-worker-with-your-identity"></a>Связывание работника с вашим удостоверением

Чтобы связать работника с вашим удостоверением, выполните следующие действия в Commerce Headquarters.

1. Используя меню в левой части, перейдите к **Модули \> Retail и commerce \> Сотрудники \> Работники**.
1. В списке найдите и выберите следующую запись **000713 - Эндрю Колетт (Andrew Collette)**. Этот пример пользователя связан с магазином Сан-Франциско, который будет использоваться в следующем разделе.
1. На панели операций выберите **Commerce**.
1. Выберите **Ассоциировать существующее удостоверение**.
1. В поле **Адрес электронной почты**, справа от **Поиск по электронной почте**, введите свой адрес электронной почты.
1. Выберите **Поиск**.
1. Выберите запись с вашим именем.
1. Нажмите **ОК**.
1. Нажмите **Сохранить**.

### <a name="activate-cloud-pos"></a>Активация облачного POS

Чтобы активировать Cloud POS, выполните следующие действия в LCS.

1. В верхнем меню выберите **Размещенные в облаке среды**.
1. Выберите среду из списка.
1. Щелкните **Войти в Cloud POS** в сведениях о среде с правой стороны.
1. Выберите **Далее**, чтобы открыть диалоговое окно **Перед началом**.
1. Оставьте поле **URL-адрес сервера** без изменений. Выберите **Далее**.
1. Войдите в систему с учетной записью Microsoft Azure Active Directory (Azure AD).
1. В области **Имя магазина** выберите **Сан-Франциско**, затем выберите **Далее**.
1. В области **Регистрация и устройство** выберите **SANFRAN-1**.
1. Выберите **Активировать**. Вы вышли, открылась страница входа POS.
1. Теперь можно войти во взаимодействие Cloud POS, используя код оператора **000713** и пароль **123**.

## <a name="set-up-your-e-commerce-sites"></a>Настройка сайтов электронной коммерции

Имеется три доступных демонстрационных сайта электронной коммерции: Fabrikam, Adventure Works и Adventure Works Business. Выполните приведенные ниже шаги, чтобы настроить каждый из демонстрационных сайтов.

1. Войдите в конструктор сайтов, используя URL-адрес, который вы записали при инициализации электронной коммерции во время подготовки (см. [Инициализация электронной коммерции](provisioning-guide.md#initialize-e-commerce)).
1. Выберите узел (**Fabrikam**, **Adventure Works** или **Adventure Works Business**), чтобы открыть диалоговое окно настройки сайта.
1. Выберите домен, в который вы вошли при инициализации Commerce.
1. В головном офисе выберите предварительно настроенный канал интернет-магазина (**Расширенный интернет-магазин Fabrikam**, **Интернет-магазин АВ** или **Интернет-магазин AW Business**), который соответствует каналу по умолчанию.
1. В качестве языка по умолчанию выберите **en-us**.
1. Настройте поля пути. Его можно оставить пустым для одного сайта, но необходимо настроить его, если для нескольких сайтов будет использоваться одно и то же имя домена. Например, если доменное имя — `https://www.constoso.com`, можно использовать пустой путь для Fabrikam (`https://contoso.com`), а затем использовать "aw" для Adventure Works (`https://contoso.com/aw`) и "awbusiness" для сайта Adventure Works Business (`https://contoso.com/awbusiness`).
1. Нажмите **ОК**. Появляется список страниц на сайте.
1. При необходимости повторите шаги 2–7, чтобы настроить другие демонстрационные сайты.

## <a name="enable-jobs"></a>Включение заданий

Чтобы включить задания в Commerce, выполните следующие действия.

1. Выполните вход в среду Headquarters.
1. Используя меню, расположенное в левой части, перейдите в раздел **Retail и Commerce \> Запросы и отчеты \> Пакетные задания**.

    Остальные этапы этой процедуры должны быть завершены для каждого из следующих заданий:

    * Обработать уведомление по электронной почте о заказе розничной торговли
    * Доступность продукта
    * P-0001
    * Задание синхронизации заказов

1. Используйте быструю фильтрацию для поиска задания по его названию.
1. Если статус задания — **Выполняется**, выполните следующие шаги:

    1. Выберите запись.
    1. В области действий щелкните вкладку **Пакетное задание**, выберите **Изменить статус**.
    1. Выберите **Отменяется**, затем выберите **ОК**.

1. Если статус задания — **Отложено**, выполните следующие шаги:

    1. Выберите запись.
    1. В области действий щелкните вкладку **Пакетное задание**, выберите **Изменить статус**.
    1. Выберите **Ожидание**, затем выберите **ОК**.

Кроме того, можно установить интервал повторения равным одной (1) минуте для следующих заданий:

* Задание обработки уведомления по электронной почте о заказе розничной торговли
* Задание P-0001
* Задание синхронизации заказов

### <a name="run-full-data-synchronization"></a>Выполнение полной синхронизации данных

Чтобы запустить полную синхронизацию данных в Commerce, выполните следующие действия в Commerce Headquarters.

1. Используя меню в левой части, перейдите к пункту **Модули \> Retail и Commerce \> Настройка центрального офиса \> Планировщик Commerce \> База данных канала**.
1. Выберите канал с именем **scXXXXXXXXX**.
1. На панели операций выберите **Полная синхронизация данных**.
1. Введите график распределения **9999**.
1. Нажмите **ОК**.
1. Нажмите **ОК**.

### <a name="test-credit-card-information-to-do-test-purchases"></a>Проверьте сведения о кредитной карте для тестирования покупок

Для выполнения проверочных проводок на сайте можно использовать следующие данные пробной кредитной карты:

- **Номер карты:** 4111-1111-1111-1111
- **Дата окончания срока действия:** 10/30
- **Контрольный код карты (CVV):** 737

> [!IMPORTANT]
> Никогда не следует пытаться использовать фактические сведения кредитной карты на тестовых сайтах при любых обстоятельствах.

## <a name="next-steps"></a>Дальнейшие действия

После завершения этапов подготовки и конфигурации вы можете начать использовать среду песочницы. Используйте URL-адрес конструктора сайтов Commerce, чтобы перейти к взаимодействию разработки. Используйте URL-адрес сайта Commerce, чтобы перейти к взаимодействию с сайтом клиента Retail.

Чтобы настроить дополнительные функции для среды песочницы Commerce, см. [Настройка дополнительных функций для среды песочницы Commerce](cpe-optional-features.md).

Чтобы пользователи электронной коммерции могли входить в систему на сайте электронной коммерции, требуется дополнительная настройка для включения проверки подлинности сайта с помощью отношения Azure Active Directory "бизнес-потребитель" (B2C). Инструкции см. в разделе [Настройка клиента B2C в Commerce](set-up-b2c-tenant.md).

## <a name="troubleshooting"></a>Устранение неполадок

### <a name="site-builder-channel-list-is-empty-when-configuring-site"></a>Список каналов конфигуратора сайта пуст при настройке сайта

Если в конфигураторе сайта не отображаются каналы интернет-магазина, в главном офисе убедитесь, что каналы были добавлены в Commerce Scale Unit, как описано в разделе [Прежде чем начать](#before-you-start). Кроме того, выполните **Инициализацию планировщика коммерции**, используя для параметра **Удалить существующую конфигурацию** значение **Да**.  После завершения этих шагов на странице **База данных канала** (**Розница и коммерция \> настройки главного офиса \> Планировщик коммерции \> База данных канала**) запустите задание **9999** на Commerce Scale Unit.

### <a name="color-swatches-are-not-rendering-on-the-category-page-but-are-rendering-on-the-product-details-page-pdp-page"></a>Образцы цветов не отображаются на странице категорий, но отображаются на странице сведений о продукте (PDP)

Выполните следующие действия, чтобы гарантировать, что образцы цвета и размера будут настроены как уточнения.

1. В главном офисе перейдите в раздел **Розница и коммерция \> Настройка канала \> Категории каналов и атрибуты продуктов**.
1. В левой области выберите канал интернет-магазина, а затем выберите пункт **Установка метаданных атрибута**.
1. Установите для параметра **Показывать атрибут на канале** значение **Да**, для параметра **Можно уточнить** значение **Да** и затем нажмите **Сохранить**. 
1. Вернитесь на страницу канала интернет-магазина, а затем выберите **Опубликовать обновления канала**.
1. Перейдите в меню **Розница и коммерция \> Параметры главного офиса \> Планировщик коммерции \> База данных канала** и запустите задание **9999** на Commerce Scale Unit.

### <a name="business-features-dont-appear-to-be-turned-on-for-the-adventureworks-business-site"></a>Бизнес-возможности не будут отображаться на сайте компании AdventureWorks

В главном офисе убедитесь, что канал интернет-магазина настроен с **Типом клиента** со значением **B2B**. Если для параметра **Тип клиента** установить **B2C**, необходимо создать новый канал, так как существующий канал нельзя изменить. 

Демонстрационные данные, поставляющиеся в Commerce версии 10.0.26 и более ранних, имели ошибку, в которой канал **Интернет-магазин AW Business** был настроен неправильно. Чтобы устранить проблему, необходимо создать новый канал с теми же настройками и конфигурациями, за исключением **Типа клиента**, который должен быть установлен как **B2B**.

## <a name="additional-resources"></a>Дополнительные ресурсы

[Подготовка среды песочницы Dynamics 365 Commerce](provisioning-guide.md)

[Настройка дополнительных функций среды песочницы Dynamics 365 Commerce](cpe-optional-features.md)

[Настройка BOPIS в среде песочницы Dynamics 365 Commerce](cpe-bopis.md)

[Microsoft Lifecycle Services (LCS)](/dynamics365/unified-operations/dev-itpro/lifecycle-services/lcs-user-guide)

[Retail Cloud Scale Unit (RCSU)](/business-applications-release-notes/october18/dynamics365-retail/retail-cloud-scale-unit)

[Портал Microsoft Azure](https://azure.microsoft.com/features/azure-portal)

[Веб-сайт Dynamics 365 Commerce](https://aka.ms/Dynamics365CommerceWebsite)

[Настройка клиента B2C в модуле Commerce](set-up-B2C-tenant.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
