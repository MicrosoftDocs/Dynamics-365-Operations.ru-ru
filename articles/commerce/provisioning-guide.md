---
title: Обеспечение среды предварительной версии Commerce
description: В этой теме объясняется, как предоставить среду предварительного просмотра Microsoft Dynamics 365 Commerce.
author: psimolin
manager: annbe
ms.date: 01/06/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.scope: Retail, Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: ''
ms.author: psimolin
ms.search.validFrom: 2019-10-31
ms.dyn365.ops.version: ''
ms.openlocfilehash: b77d2cbbc100aeae5dcd53ddbe69ff2e4435da13
ms.sourcegitcommit: 4d77d06a07ec9e7a3fcbd508afdffaa406fd3dd8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2020
ms.locfileid: "2934756"
---
# <a name="provision-a-commerce-preview-environment"></a>Обеспечение среды предварительной версии Commerce

[!include [banner](includes/preview-banner.md)]
[!include [banner](includes/banner.md)]

В этой теме объясняется, как предоставить среду предварительного просмотра Microsoft Dynamics 365 Commerce.

Прежде чем приступать к работе, рекомендуется по крайней мере просмотреть всю тему, чтобы понять, что именно охватывается в этом процессе и что содержит тема.

> [!NOTE]
> Если вы еще не получили доступ к предварительной версии Dynamics 365 Commerce, вы можете запросить доступ к предварительной версии на [веб-сайте Commerce](https://aka.ms/Dynamics365CommerceWebsite).

## <a name="overview"></a>Обзор

Чтобы успешно предоставить среду предварительного просмотра Commerce, необходимо создать проект с определенным названием и типом продукта. У среды и Retail Cloud Scale Unit (RCSU) также есть некоторые специальные параметры, которые необходимо использовать для подготовки электронной коммерции. Инструкции в этой теме описывают все необходимые шаги, которые вы должны выполнить, и параметры, которые вы должны использовать.

После успешного предоставления среды предварительного просмотра Commerce необходимо выполнить несколько шагов после обеспечения для подготовки. Некоторые шаги являются необязательными, в зависимости от того, какие аспекты системы вы хотите оценить. Вы всегда можете выполнить дополнительные шаги позже.

Для получения информации о том, как настроить среду предварительного просмотра Commerce после подготовки, см. в [Настройка среды предварительной версии Commerce](cpe-post-provisioning.md). Для сведений о том, как настроить дополнительные функции для среды предварительного просмотра Commerce, см. [Настройка дополнительных функций для среды предварительного просмотра Commerce](cpe-optional-features.md).

Если имеются какие-либо вопросы о шагах подготовки или возникли какие-либо ошибки, сообщите Microsoft о них в [группе Yammer предварительной версии Microsoft Dynamics 365 Commerce](https://aka.ms/Dynamics365CommercePreviewYammer).

## <a name="prerequisites"></a>Необходимые условия

Для того, чтобы предоставить среду предварительного просмотра Commerce, необходимо предусмотреть следующие предварительные условия:

- У вас есть доступ к порталу Lifecycle Services Microsoft Dynamics (LCS)
- Вы приняли приглашение принять участие в программе предварительной версии Dynamics 365 Commerce.
- У вас имеются необходимые разрешения на создание проекта для **Перспективный клиент — предпродажная подготовка** или **Миграция, создание решений и знакомство**.
- Пользователь является членом роли **Менеджер среды** или **Владелец проекта** в проекте, в котором будет выполняться подготовка среды.
- У вас есть административный доступ к вашей подписке Microsoft Azure или вы можете обратиться к администратору подписки, который может выполнить два шага, требующих права администратора, от вашего имени
- В вас есть доступный код клиента Azure Active Directory (Azure AD).
- Вы создали группу безопасности Azure AD, которую можно использовать в качестве группы администраторов системы электронной коммерции, и у вас есть ее идентификатор.
- Вы создали группу безопасности Azure AD, которую можно использовать в качестве группы модератора оценок и рецензий, и у вас есть ее идентификатор. (Эта группа безопасности может быть такой же, как группа администрирования системы электронной коммерции.)

### <a name="find-your-azure-ad-tenant-id"></a>Поиск своего кода клиента Azure AD

Ваш код клиента Azure AD является глобально уникальным кодом (GUID), который похож на этот пример: **72f988bf-86f1-41af-91ab-2d7cd011db47**.

#### <a name="find-your-azure-ad-tenant-id-by-using-the-azure-portal"></a>Найдите свой код клиента Azure AD с помощью портала Azure

1. Выполните вход на [портал Azure](https://portal.azure.com/).
1. Убедитесь, что выбран правильный каталог.
1. В меню слева выберите **Azure Active Directory**.
1. В **Управление** выберите **Свойства**. Ваш код клиента Azure AD отображается в **Код каталога**.

#### <a name="find-your-azure-ad-tenant-id-by-using-openid-connect-metadata"></a>Поиск своего кода клиента Azure AD с помощью метаданных OpenID Connect

Создайте URL-адрес OpenID, заменив **\{ВАШ\_ДОМЕН\}** на свой домен, например `microsoft.com`. Например, `https://login.microsoftonline.com/{YOUR_DOMAIN}/.well-known/openid-configuration` станет `https://login.microsoftonline.com/microsoft.com/.well-known/openid-configuration`.

1. Перейдите по URL-адресу OpenID, содержащему ваш домен.

    Код клиента Azure AD может отображаться в нескольких значениях свойств.

1. Найдите **авторизация\_конечная точка** и извлеките GUID, который появляется сразу после `login.microsoftonline.com/`.

### <a name="find-your-azure-ad-security-group-id"></a>Поиск своего кода группы безопасности Azure AD

Код вашей группы безопасности Azure AD — это GUID, похожий на этот пример: **436ea7f5-ee6c-40c1-9f08-825c5811066a**.

Эта процедура предполагает, что вы являетесь участником группы, для которой вы пытаетесь найти код.

1. Откройте [песочницу Graph](https://developer.microsoft.com/graph/graph-explorer#).
1. Выберите **Войти с учетной записью Майкрософт** и выполните вход, используя свои учетные данные.
1. Слева выберите **показать другие образцы**.
1. В правой области включите **Группы**.
1. Закройте правую область.
1. Выберите **все группы, к которым я принадлежу**.
1. В поле **Просмотр ответа** найдите свою группу. Код группы безопасности отображается под свойством **id**.

## <a name="provision-your-commerce-preview-environment"></a>Обеспечение своей среды предварительной версии Commerce

Эти процедуры объясняют, как обеспечить среду предварительного просмотра Commerce. После их успешного завершения среда предварительного просмотра Commerce будет готова к настройке. Все действия, описанные здесь, выполняются на портале LCS.

> [!IMPORTANT]
> Предварительный доступ привязан к учетной записи LCS и организации, указанной в приложении предварительного просмотра. Вы должны использовать ту же учетную запись для предоставления среды предварительного просмотра Commerce. Если для среды предварительного просмотра Commerce необходимо использовать другую учетную запись LCS или клиента, вы должны предоставить в Microsoft. Для получения контактной информации см. раздел [Поддержка среды предварительного просмотра Commerce](#commerce-preview-environment-support) далее в этой теме.

### <a name="grant-access-to-e-commerce-applications"></a>Предоставление доступа к приложениям электронной коммерции

> [!IMPORTANT]
> Лицо, выполняющие вход, должны быть администратором клиента Azure AD, у которого есть код клиента Azure AD. Если этот шаг не будет успешно завершен, остальные этапы подготовки невозможны.

Чтобы разрешить приложениям электронной коммерции доступ к подписке Azure, выполните следующие действия.

1. Соберите URL-адрес в следующем формате:

    `https://login.windows.net/{AAD_TENANT_ID}/oauth2/authorize?client_id=fbcbf727-cd18-4422-a723-f8274075331a&response_type=code&redirect_uri=https://sb.manage.commerce.dynamics.com/_commerce/Consent&response_mode=query&prompt=admin_consent&state=12345`

1. Скопируйте и вставьте URL-адрес в браузер или текстовый редактор и замените **\{AAD\_TENANT\_ID\}** своим кодом клиента Azure AD. Затем откройте URL-адрес.
1. В диалоговом окне входа Azure AD выполните вход и подтвердите, что вы хотите предоставить для **Dynamics 365 Commerce (предварительная версия)** доступ к подписке. Вы будете перенаправлены на страницу, которая подтверждает, успешно ли выполнена данная операция.

### <a name="confirm-that-preview-features-are-available-and-turned-on-in-lcs"></a>Убедитесь, что функции предварительного просмотра доступны и включены в LCS

Чтобы подтвердить, что функции предварительного просмотра доступны и включены в LCS, выполните следующие действия.

1. Войдите на [портал LCS](https://lcs.dynamics.com), используя ту же учетную запись LCS, которую вы использовали для запроса доступа к предварительной версии.
1. На главной странице LCS выполните прокрутку до конца вправо, затем выберите плитку **Управление компонентами предварительной версии**.

    ![Плитка управления предварительной версией](./media/preview1.png)

1. Выполните прокрутку до **Компоненты частной предварительной версии** и убедитесь, что доступны и включены следующие функции:

    - Оценка электронной коммерции
    - Среды программы предварительной версии Commerce

    ![Компоненты частной предварительной версии](./media/preview2.png)

1. Если эти функции не отображаются в списке, свяжитесь с корпорацией Майкрософт и укажите свой рабочий адрес электронной почты, учетную запись LCS и сведения о клиенте. Для получения контактной информации см. раздел [Поддержка среды предварительного просмотра Commerce](#commerce-preview-environment-support).

### <a name="create-a-new-project"></a>Создать новый проект

Чтобы создать новый проект в LCS, выполните следующие действия.

1. На главной странице LCS выберите знак плюса (**+**) для создания проекта.
1. В правой области выполните один из следующих шагов:

    - Если вы являетесь партнером, выберите **Миграция, создание решений и знакомство**.
    - Если вы клиент, выберите **Перспективный клиент — предпродажная подготовка**.

1. Введите название, описание и отрасль.
1. В поле **Наименование продукта** выберите **Dynamics 365 Retail**.
1. В поле **Версия продукта** выберите **Dynamics 365 Retail**.
1. В поле **Методология** выберите **Методология реализации Dynamics Retail**.
1. Необязательно: можно импортировать роли и пользователей из существующего проекта.
1. Выберите **Создать**. Появится представление проекта.

### <a name="add-the-azure-connector"></a>Добавление соединителя Azure

Чтобы добавить соединитель Azure в проект LCS, выполните следующие действия.

1. Выполните одно из следующих действий.

    - Если вы являетесь партнером, выберите плитку **Параметры проекта** справа.
    - Если вы являетесь клиентом, выберите **Параметры проекта** в верхнем меню.

1. Выберите **Соединители Azure**.
1. Выберите **Добавить**, чтобы добавить соединитель Azure.
1. Введите имя.
1. Введите свой код подписки Azure.
1. Включите параметр **Настройка для использования Azure Resource Manager (ARM)**.
1. Убедитесь, что значение **Домен (или код) арендатора AAD подписки Azure** является правильным. При необходимости обратитесь к администратору подписки Azure.
1. Выберите **Далее**.
1. Следуйте инструкциям на странице, чтобы предоставить необходимым приложениям доступ к вашей подписке. При необходимости обратитесь к администратору подписки Azure.

    1. Выполните вход на [портал Azure](https://portal.azure.com/).
    1. Убедитесь, что выбран правильный каталог, а затем в меню слева выберите **Подписки**.
    1. Найдите правильную подписку из списка и выберите ее. При необходимости используйте функцию поиска.
    1. В меню выберите **Управление доступом (IAM)**.
    1. Справа в **Добавить назначение роли** выберите **Добавить**. Появится область **Добавление назначения ролей**.
    1. В поле **Роль** выберите **Участник**.
    1. В поле **Назначить доступ** оставьте значение по умолчанию, **пользователь Azure AD, группа или субъект-служба**.
    1. В области **Выбрать** введите **b96b7e94-b82e-4e71-99a0-cf7fb188acea**.
    1. Выберите **Службы развертывания Dynamics \[wsfed-enabled\]** из списка.
    1. Нажмите **Сохранить**.

1. Выберите **Далее**.
1. Следуйте инструкциям на странице, чтобы предоставить необходимым приложениям доступ к вашей подписке. При необходимости обратитесь к администратору подписки Azure.
1. Выберите **Далее**.
1. В поле **Регион Azure** выберите **Восточная часть США**, **Восточная часть США 2**, **Западная часть США** или **Западная часть США 2**.
1. Выберите **Подключить**. Ваш соединитель Azure должен появиться в списке.

### <a name="import-the-commerce-preview-demo-base-extension"></a>Импорт демонстрационного базового расширения предварительной версии Commerce

Чтобы импортировать демонстрационное базовое расширение предварительной версии в ваш проект, выполните следующие действия.

1. Откройте домашнюю страницу для проекта, выбрав название проекта в верхней части.
1. Выполните одно из следующих действий.

    - Если вы являетесь партнером, выберите плитку **Библиотека активов** справа.
    - Если вы являетесь клиентом, выберите **Библиотека активов** в верхнем меню.

1. В списке слева выберите **Готовый к развертыванию программный пакет**.
1. Выберите **Импорт**.
1. В **Общая библиотека активов** выберите **Демонстрационное базовое расширение предварительной версии Commerce** из списка активов.
1. Выберите **Комплектовать**. Вы будете возвращены в библиотеку активов, и вы увидите расширение в списке.

На следующей иллюстрации показаны действия, которые необходимо выполнить на странице LCS **Библиотека активов**.

![Импорт демонстрационного базового расширения предварительной версии Commerce](./media/import.png)

### <a name="deploy-the-environment"></a>Развернуть среду

Выполните следующие действия, чтобы развернуть среду.

> [!NOTE]
> Возможно, вам не придется выполнять шаги 6, 7 и/или 8, потому что страницы с одним вариантом пропускаются. Когда вы находитесь в представлении **Параметры среды**, подтвердите, что текст **Dynamics 365 Commerce (предварительная версия) — демонстрация (10.0.6 с обновлением платформы 30)** отображается непосредственно над полем **Имя среды**. См. изображение, которое появляется после шага 8.

1. В верхнем меню выберите **Размещенные в облаке среды**.
1. Выберите **Добавить**, чтобы добавить среду.
1. В поле **Версия приложения** выберите **10.0.6**.
1. В поле **Версия платформы** выберите **Обновление платформы 30**.

    ![Выбор приложения и версий платформы](./media/project1.png)

1. Выберите **Далее**.
1. Выберите **Демонстрация** в качестве топологии среды.

    ![Выбор топологии среды 1](./media/project2.png)

1. Выберите **Dynamics 365 Commerce (предварительная версия) — демонстрация** в качестве топологии среды. Если ранее был настроен один соединитель Azure, он будет использоваться для этой среды. Если вы настроили несколько соединителей Azure, вы можете выбрать, какой соединитель использовать: **Восточная часть США**, **Восточная часть США 2**, **Западная часть США** или **Западная часть США 2**. (Для лучшей сквозной производительности, мы рекомендуем выбрать **Западная часть США 2**.)

    ![Выбор топологии среды 2](./media/project3.png)

1. На странице **Развернуть среду** введите имя среды. Оставьте дополнительные настройки без изменений.

    ![Страница развертывания среды](./media/project4.png)

1. По мере необходимости настройте размер виртуальной машины. (Мы рекомендуем единицу складского хранения VM \[SKU\] **D13 v2**.)
1. Просмотрите условия ценообразования и лицензирования, а затем поставьте флажок, чтобы указать, что вы согласны с ними.
1. Выберите **Далее**.
1. На странице подтверждения развертывания убедитесь, что сведения правильные и затем выберите **Развернуть**. Будет возвращено представление **Размещенные в облаке среды**, и ваша среда появится в списке.

    Запрошенная среда отобразится в очереди, затем будет развернута. Для завершения рабочих процессов среды потребуется некоторое время. Поэтому проверьте примерно через шесть-девять часов.

1. Перед продолжением убедитесь, что состояние вашей среды — **Развернуто**.

### <a name="initialize-rcsu"></a>Инициализация RCSU

Чтобы инициализировать RCSU, выполните следующие действия.

1. В представлении **Размещенные в облаке среды** выберите свою среду из списка.
1. Выберите **Полные сведения** в представлении среды с правой стороны. Появится представление сведений о среде.
1. В **Компоненты среды** выберите **Управление**.
1. На вкладке **Retail** выберите **Инициализация**. Будет отображено представление параметров инициализации RCSU.
1. В поле **Регион** выберите **Восточная часть США**, **Восточная часть США 2**, **Западная часть США** или **Западная часть США 2**.
1. В поле **Версия** выберите **Укажите версию** в списке, а затем укажите **9.16.19262.5** в поле, которое появляется. Не забудьте указать точную версию, которая указана здесь. В противном случае вам придется обновить RCSU до правильной версии позже.
1. Включите параметр **Применить расширение**.
1. В списке расширений выберите **Демонстрационное базовое расширение предварительной версии Commerce**.
1. Выберите **Инициализация**.
1. На странице подтверждения развертывания убедитесь, что сведения правильные и затем выберите **Да**. Пользователь возвращается к представлению **Руководство розничного магазина** с выбранной вкладкой **Retail**. Ваш RCSU был поставлен в очередь для подготовки.
1. Перед продолжением убедитесь, что состояние RCSU — **Успех**. Инициализация занимает примерно два-пять часов.

### <a name="initialize-e-commerce"></a>Инициализация электронной коммерции

Чтобы инициализировать электронную коммерцию, выполните следующие действия.

1. На вкладке **Электронная коммерция (предварительная версия)** просмотрите согласие на предварительную версию, а затем выберите **Настройка**.
1. В поле **Имя клиента электронной коммерции** введите имя. Однако обратите внимание, что это имя появится в некоторых URL-адресах, указывающих на экземпляр электронной коммерции.
1. В поле **Имя Retail Cloud Scale Unit** выберите RCSU в списке. (В списке должен быть только один вариант.)

    Поле **География электронной коммерции** задается автоматически, и значение не может быть изменено.

1. Выберите **Далее** для продолжения.
1. В поле **Поддерживаемые имена узлов** введите любой допустимый домен, например `www.fabrikam.com`.
1.  В поле **Группа безопасности AAD для системного администратора** введите первые несколько букв названия группы безопасности, которую вы хотите использовать. Выберите значок увеличительного стекла для отображения результатов поиска. Выберите группу безопасности из списка.
2.  В поле **Группа безопасности AAD для модератора оценок и отзывов** введите первые несколько букв названия группы безопасности, которую вы хотите использовать. Выберите значок увеличительного стекла для отображения результатов поиска. Выберите группу безопасности из списка.
1. Оставьте параметр **Включить службу оценок и отзывов** включенным.
1. Если вы уже завершили этап согласия Microsoft Azure Active Directory (Azure AD), описанный разделе "Предоставление доступа к приложениям электронной коммерции", выберите флажок, чтобы подтвердить свое согласие. Если вы еще не завершили этот шаг, вам нужно сделать это, прежде чем приступить к инициализации. Выберите ссылку в тексте рядом с флажком, чтобы открыть диалоговое окно согласия и завершить шаг.
1. Выберите **Инициализация**. Пользователь возвращается к представлению **Руководство розничного магазина** где выбрана вкладка **Электронная коммерция (предварительная версия)**. Инициализация электронной коммерции начата.
1. Перед продолжением необходимо подождать, пока состояние инициализации электронной коммерции не станет **Успешная инициализация**.
1. В **Ссылки** в нижнем правом углу запишите URL-адреса для следующих ссылок:

    * **Сайт электронной коммерции** — ссылка на корневой узел вашего сайта электронной коммерции.
    * **Средство управления сайтом электронной коммерции** — ссылка на средство управления сайтом.

## <a name="commerce-preview-environment-support"></a>Поддержка среды предварительной версии Commerce

Если при выполнении шагов подготовки возникают проблемы, обратитесь за помощью в [группу Yammer предварительной версии Microsoft Dynamics 365 Commerce](https://aka.ms/Dynamics365CommercePreviewYammer).

Если у вас возникли проблемы с получением доступа к группе Yammer, вы можете связаться с Майкрософт по электронной почте <Dynamics365Commerce@microsoft.com>. Этот адрес электронной почты не контролируется постоянно. Поэтому ожидайте задержки в ответе.

## <a name="next-steps"></a>Дальнейшие действия

Для продолжения процесса предоставления и настройки вашей среды предварительной версии Commerce см. [Настройка среды предварительной версии Commerce](cpe-post-provisioning.md).

## <a name="additional-resources"></a>Дополнительные ресурсы

[Обзор среды предварительного просмотра Commerce](cpe-overview.md)

[Настройка среды предварительного просмотра Commerce](cpe-post-provisioning.md)

[Настройка дополнительных функций для среды предварительного просмотра Commerce](cpe-optional-features.md)

[Вопросы и ответы среды предварительного просмотра Commerce](cpe-faq.md)

[Microsoft Lifecycle Services (LCS)](https://docs.microsoft.com/dynamics365/unified-operations/dev-itpro/lifecycle-services/lcs-user-guide)

[Retail Cloud Scale Unit (RCSU)](https://docs.microsoft.com/business-applications-release-notes/october18/dynamics365-retail/retail-cloud-scale-unit)

[Портал Microsoft Azure](https://azure.microsoft.com/features/azure-portal)

[Веб-сайт Dynamics 365 Commerce](https://aka.ms/Dynamics365CommerceWebsite)

[Справочные ресурсы для Dynamics 365 Retail](../retail/index.md)
