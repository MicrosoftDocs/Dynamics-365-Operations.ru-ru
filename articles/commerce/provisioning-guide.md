---
title: Настройка среды аттестации для электронной коммерции
description: В этом руководстве содержатся пошаговые инструкции по подготовке и настройке среды предварительной версии Microsoft Dynamics 365 Commerce.
author: v-chgri
manager: annbe
ms.date: 10/15/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.scope: Retail, Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: ''
ms.author: anupamar
ms.search.validFrom: 2019-10-31
ms.dyn365.ops.version: ''
ms.openlocfilehash: b0dce2796e69cd8dee87cba176a521c26c81eb1a
ms.sourcegitcommit: fbc106af09bdadb860677f590464fb93223cbf65
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/06/2019
ms.locfileid: "2771688"
---
# <a name="configure-an-e-commerce-evaluation-environment"></a>Настройка среды аттестации для электронной коммерции

[!include [banner](includes/preview-banner.md)]
[!include [banner](includes/banner.md)]

В этом руководстве содержатся пошаговые инструкции по подготовке и настройке среды предварительной версии Microsoft Dynamics 365 Commerce. Прежде чем приступать к работе, рекомендуется по крайней мере просмотреть документацию, чтобы понять, что именно охватывается в этом процессе и что содержит руководство.

*Примечание. Если вы еще не получили доступ к предварительной версии Microsoft Dynamics 365 Commerce, вы можете запросить доступ к предварительной версии на [веб-сайте Commerce](https://aka.ms/Dynamics365CommerceWebsite).*

## <a name="summary"></a>Сводка
Для успешной подготовки среды проект необходимо создать с использованием определенного наименования и типа продукта. Среда и Retail Cloud Scale Unit также имеют некоторые специальные параметры, которые необходимо использовать для запуска подготовки электронной коммерции позже. Инструкции в этом руководстве содержат все необходимые шаги, которые необходимо выполнить, и параметры, необходимые для использования.

После успешного выполнения подготовки необходимо выполнить несколько шагов после подготовки для подготовки среды предварительной версии. Некоторые шаги являются необязательными, в зависимости от того, какие аспекты системы вы хотите оценить. Если позже вы передумаете, дополнительные шаги всегда можно выполнить позднее.

Если имеются какие-либо вопросы о шагах подготовки или возникли какие-либо ошибки, сообщите о них в [группе Yammer предварительной версии Microsoft Dynamics 365 Commerce](https://aka.ms/Dynamics365CommercePreviewYammer). 

## <a name="prerequisites"></a>Необходимые условия
Ниже перечислены необходимые условия для подготовки среды предварительной версии Dynamics 365:
* У вас есть доступ к **порталу Lifecycle Services (LCS)**
* Вы **приняли приглашение принять участие в программе предварительной версии Dynamics 365 Commerce**
* У вас имеются необходимые разрешения на создание проекта для **Перспективный клиент — предпродажная подготовка** или **Миграция, создание решений и знакомство**
* Пользователь является членом роли **Менеджер среды** или **Владелец проекта** в проекте, в котором будет выполняться подготовка среды
* У вас есть административный доступ к вашей подписке Azure или вы можете обратиться к администратору подписки, который может выполнить два шага, требующих права администратора, от вашего имени
* В вас есть доступный **Код владельца AAD**
* Вы создали **группу безопасности AAD** для использования в качестве **группы администраторов системы электронной коммерции**, и у вас есть ее идентификатор
* Вы создали **группу безопасности AAD** для использования в качестве **группы модераторов оценок и рецензий**, и вам доступен ее идентификатор (который может совпадать с идентификатором группы безопасности группы администраторов системы выше)
## <a name="provisioning-preview-environment"></a>Подготовка среда предварительной версии
Эти инструкции охватывают подготовку среды предварительной версии Microsoft Dynamics 365 Commerce. После успешного выполнения этих шагов будет создана среда предварительной версии, которая готова к настройке. Все действия, описанные здесь, выполняются на портале LCS.

*Обратите внимание, что доступ к предварительной версии связан с учетной записью LCS и организацией, указанными в заявлении для предварительной версии. Необходимо использовать эту же учетную запись для подготовки. Если необходимо использовать в качестве среды предварительной версии другую учетную запись LCS или клиента, необходимо предоставить нам эти сведения. Сведения о контактном лице см. в разделе "Дополнительные ресурсы" внизу.*
### <a name="before-starting"></a>Перед началом
##### <a name="grant-access-to-e-commerce-applications"></a>Предоставление доступа к приложениям электронной коммерции

*Примечание. **Человек, который входит в систему, должен быть администратором клиента AAD**. Без успешного выполнения этого шага остальные этапы подготовки будут завершаться с ошибкой.*

1. Для этого шага требуется **Код владельца AAD**. Необходимо авторизовать приложения электронной коммерции для доступа к вашей подписке Azure. Проще всего выполнить это с помощью сборки URL-адреса, например:

https://login.windows.net/{AAD_TENANT_ID}/oauth2/authorize?client_id=fbcbf727-cd18-4422-a723-f8274075331a&response_type=code&redirect_uri=https://sb.manage.commerce.dynamics.com/_commerce/Consent&response_mode=query&prompt=admin_consent&state=12345

2. **Не нажимайте непосредственно на этот URL-адрес**, а скопируйте и вставьте его в браузер или в текстовый редактор и замените **\{AAD_TENANT_ID\}** на **Код владельца AAD**, прежде чем перейти по этому URL-адресу.
3. Будет открыто диалоговое окно входа Microsoft AAD, в котором будет подтверждено, что вы хотите предоставить доступ "Dynamics 365 Commerce (предварительная версия)" к вашей подписке.
4. Вы будете отправлены на страницу, которая подтверждает, успешно ли выполнена данная операция.

##### <a name="log-in-to-the-lcs"></a>Вход в LCS
1. Выполните вход на портал LCS: https://lcs.dynamics.com
1. Убедитесь, что вы вошли с использованием той же учетной записи LCS, которую вы использовали для запроса доступа к предварительной версии.
##### <a name="confirm-that-preview-features-are-available-and-enabled"></a>Убедитесь, что функции предварительного просмотра доступны и включены
1. На передней странице LCS выполните прокрутку до конца вправо, затем щелкните плитку **Управление компонентами предварительной версии**.
1. Выполните прокрутку до "КОМПОНЕНТЫ ЧАСТНОЙ ПРЕДВАРИТЕЛЬНОЙ ВЕРСИИ" и убедитесь, что доступны и включены следующие функции:
    1. **Оценка электронной коммерции**
    1. **Среды программы предварительной версии Commerce**
1. Если вы не можете увидеть эти функции в списке, пожалуйста, свяжитесь с нами, указав рабочий адрес электронной почты, учетную запись LCS и сведения о клиенте. Сведения о том, как связаться с нами см. в разделе **Дополнительные ресурсы** ниже.

![Плитка управления предварительной версией](./media/preview1.png)

![Предварительные версии функций](./media/preview2.png)
### <a name="create-project"></a>Создать проект
##### <a name="creating-new-project"></a>Создание нового проекта
1. Щелкните **+** для создания нового проекта.
1. Если вы являетесь партнером, выберите **Миграция, создание решений и знакомство**.
1. Если вы клиент, выберите **Перспективный клиент — предпродажная подготовка**.
1. Введите имя, описание и отрасль, что вам кажется подходящей.
1. Для **Наименование продукта** выберите **Dynamics 365 Retail**.
1. Для **Версия продукта** выберите **Dynamics 365 Retail**.
1. Для **Методология** выберите **Методология реализации Dynamics Retail**.
1. Если требуется, можно импортировать роли и пользователей из существующего проекта.
1. Щелкните **Создать**.
1. Пользователь отправлен в представление проекта.
##### <a name="add-azure-connector"></a>Добавление соединителя Azure
1. Если вы являетесь партнером, щелкните **Параметры проекта** на плитках инструментов на правом крае.
1. Если вы являетесь клиентом, выберите **Параметры проекта** в верхнем меню.
1. Выберите **Соединители Azure**.
1. Щелкните **+ Добавить**, чтобы добавить соединитель Azure.
1. Введите имя.
1. Введите свой **Код подписки Azure**.
1. Включите **Настройка для использования Azure Resource Manager (ARM)**.
1. Убедитесь, что **Домен (или код) арендатора AAD подписки Azure** является правильным. При необходимости обратитесь к администратору подписки Azure.
1. Щелкните **Далее**.
1. Следуйте инструкциям на экране, чтобы предоставить необходимым приложениям доступ к вашей подписке. При необходимости обратитесь к администратору подписки Azure:
    1. Выполните вход на портал Azure: https://portal.azure.com/
    1. Убедитесь, что выбран правильный каталог.
    1. Щелкните **Подписки** в меню слева.
    1. Найдите правильную подписку из списка и выберите ее. Используйте поиск, если это необходимо.
    1. В меню выберите **Управление доступом (IAM)**.
    1. Щелкните **Добавить** в группе **Добавить назначение роли** на правой стороне. Откроется область **Добавление назначения ролей**.
    1. Для **Роль** выберите **Участник**.
    1. Для **Назначить доступ** оставьте **Пользователь, группа или субъект-служба Azure AD**
    1. В области **Выбрать** введите **b96b7e94-b82e-4e71-99a0-cf7fb188acea**.
    1. Выберите **Служба развертывания Dynamics [wsfed-enabled]** из списка.
    1. Нажмите кнопку **Сохранить**.
1. Щелкните **Далее**.
1. Следуйте инструкциям на экране, чтобы предоставить необходимым приложениям доступ к вашей подписке. При необходимости обратитесь к администратору подписки Azure.
1. Щелкните **Далее**.
1. Для **Регион Azure** выберите **Восточная часть США**, **Восточная часть США 2**, **Западная часть США** или **Западная часть США 2**.
1. Щелкните **Подключить**.
1. Ваш соединитель Azure должен появиться в списке.
### <a name="import-extension"></a>Импорт расширения
1. Перейдите назад на главную страницу проекта, щелкнув имя проекта в верхней части.
1. Если вы являетесь партнером, щелкните **Библиотека активов** на плитках инструментов на правом крае.
1. Если вы являетесь клиентом, выберите **Библиотека активов** в верхнем меню.
1. Выберите **Готовый к развертыванию программный пакет** из списка слева.
1. В области действий щелкните **ИМПОРТ**.
1. Выберите **Демонстрационное базовое расширение предварительной версии Commerce** из списка активов в разделе **ОБЩАЯ БИБЛИОТЕКА АКТИВОВ**.
1. Нажмите **Выбрать**.
1. Вы будете возвращены в библиотеку активов, и вы увидите расширение в списке.

![Создание проекта — версии](./media/import.png)
### <a name="deploy-environment"></a>Развернуть среду

*Примечание. Возможно, шаги 6, 7 и/или 8 не будут отображаться, поскольку экраны с одним параметром пропускаются. После перехода к представлению **Параметры среды** убедитесь в наличии текста "Dynamics 365 Commerce (Preview) — демонстрация (10.0.6 с обновлением платформы Platform update 30)" непосредственно над полем **Имя среды**. См. снимок экрана ниже.*

1. В верхнем меню выберите **Размещенные в облаке среды**.
1. Нажмите кнопку **+ Добавить**, чтобы добавить среду.
1. Для **Версия приложения** выберите **10.0.6**.
1. В качестве **Версия платформы** выберите **Platform Update 30**.
1. Щелкните **Далее**.
1. В качестве топологии среды выберите **ДЕМОНСТРАЦИЯ**.
1. В качестве топологии среды выберите **Dynamics 365 Commerce (Предварительная версия) — демонстрация**.
1. Если ранее был настроен один соединитель Azure, он будет использоваться для этой среды. Если настроено несколько соединителей Azure, имеется возможность выбрать нужный соединитель для использования: **Восточная часть США**, **Восточная часть США 2**, **Западная часть США** или **Западная часть США 2** (рекомендуется для наилучшей сквозной производительности)
1. Введите **Имя среды**.
1. Измените размер ВМ по вашему желанию. (Мы рекомендуем ВМ SKU **D13 v2**.)
1. Оставьте **Дополнительные настройки** без изменений.
1. После просмотра ценообразования и условий лицензионного соглашения на экране установите флажок для указания согласия.
1. Щелкните **Далее**.
1. На экране подтверждение развертывания после проверки правильности сведений нажмите кнопку **Развернуть**.
1. Будет возвращено представление **Размещенные в облаке среды**, и ваша среда появится в списке.
1. Запрошенная среда отобразится в очереди, затем будет развернута. Для завершения всех рабочих процессов среды потребуется некоторое время, поэтому проверьте через несколько часов (приблизительно от 6 до 9 часов).
1. Перед продолжением убедитесь, что ваше состояние среды **Развернуто**.

![Создание проекта — версии](./media/project1.png)

![Создание проекта — топология 1](./media/project2.png)

![Создание проекта — топология 2](./media/project3.png)

![Создание проекта — параметры среды](./media/project4.png)
### <a name="initialize-rcsu"></a>Инициализация RCSU
1. В представлении **Размещенные в облаке среды** выберите свою среду из списка.
1. В представлении среды в правой части экрана щелкните **Полные сведения**. Будет отображено представление сведений о среде.
1. В разделе **Компоненты среды** щелкните **Управление**.
1. На вкладке **Retail** нажмите кнопку **Инициализировать**. Будет отображено представление параметров инициализации RCSU.
1. Для **РЕГИОН** выберите **Восточная часть США**, **Восточная часть США 2**, **Западная часть США** или **Западная часть США 2**.
1. В качестве **ВЕРСИЯ** сначала выберите в раскрывающемся списке пункт **Указать версию**, затем укажите **9.16.19262.5** в текстовом поле, расположенном ниже. *Примечание. Обязательно **укажите точную версию**, указанную здесь, чтобы избежать необходимости обновления RCSU позже для корректировки версии.*
1. Включите **Применить расширение**.
1. Из списка расширений выберите **Демонстрационное базовое расширение предварительной версии Commerce**.
1. Щелкните **Инициализировать**.
1. На экране подтверждение развертывания после проверки правильности сведений нажмите кнопку **Да**.
1. Пользователь возвращается к представлению **Руководство розничного магазина** с активированной вкладкой **Retail**. Ваш RCSU был поставлен в очередь для подготовки.
1. Перед продолжением дождитесь, пока состояние RCSU будет **УСПЕШНО** (займет примерно 2–5 часов).
### <a name="initialize-e-commerce"></a>Инициализация электронной коммерции
1. Перейдите на вкладку **Электронная коммерция (предварительная версия)**.
1. После проверки согласия на предварительную версию щелкните **Настройка**.
1. Введите имя для **Имя клиента электронной коммерции**. Однако обратите внимание, что оно будет отображаться в некоторых URL-адресах, указывающих на экземпляр электронной коммерции.
1. Для **Имя Retail Cloud Scale Unit** выберите свой RCSU из списка (список должен иметь только один вариант).
1. **География электронной коммерции** заполняется автоматически и не может быть изменена.
1. Нажмите кнопку **Далее** для продолжения.
1. Для **Поддерживаемые имена узлов** введите любой допустимый домен (например, www.fabrikam.com).
1. В поле **Группа безопасности AAD для системного администратора** введите код группы безопасности AAD, который будет использоваться в качестве группы администраторов системы электронной коммерции.
1. В поле **Группа безопасности AAD для модератора оценок и отзывов** введите код группы безопасности AAD, который будет использоваться в качестве группы модератора оценок и рецензий.
1. Оставьте значения **B2C** пустыми (7 полей, которые начинаются с B2C).
1. Оставьте флажок **Включить службу оценок и отзывов** включенным.
1. Щелкните **Инициализировать**.
1. Пользователь возвращается к представлению **Руководство розничного магазина** с активированной вкладкой **Электронная коммерция (предварительная версия)**. Инициализация электронной коммерции начата.
1. Перед продолжением необходимо подождать, пока состояние инициализации электронной коммерции не станет **УСПЕШНАЯ ИНИЦИАЛИЗАЦИЯ**.
1. В пункте **ССЫЛКИ** в правом нижнем углу.
    * Запишите ссылку **Сайт электронной коммерции**. Это ссылка на корневой узел сайта C2.
    * Запишите ссылку **Средство управления сайтом электронной коммерции**. Это ссылка на инструмент управления сайтом (инструмент разработки C1).
## <a name="post-provisioning-steps"></a>Шаги после подготовки
На этом этапе среда была подготовлена от конца до конца, но по-прежнему есть шаги настройки, которые необходимо предпринять, чтобы приступить к оценке среды.
### <a name="before-starting"></a>Перед началом
1. В верхнем меню выберите **Размещенные в облаке среды**.
1. Выберите среду из списка.
1. Щелкните **Полные сведения** в сведениях о среде с правой стороны.
1. Щелкните **Вход**, чтобы открыть меню, выберите **Войти в среду**.

Убедитесь, что выбрано юридическое лицо **USRT** (верхний правый угол).

### <a name="configure-pos"></a>Настройка POS
##### <a name="associate-worker-with-your-identity"></a>Связывание работника с вашим удостоверением
1. Используя меню в левой части, перейдите к **Модули > Retail > Сотрудники> Работники**.
1. В списке найдите и выберите запись **000713 - Эндрю Колетт (Andrew Collette)**.
1. В области действий щелкните **Retail**.
1. Щелкните **Ассоциировать существующее удостоверение**.
1. В поле **Адрес электронной почты** (справа от **Поиск по электронной почте**) введите свой адрес электронной почты.
1. Нажмите кнопку **Поиск**.
1. Выберите запись с вашим именем.
1. Щелкните **OK**.
1. Нажмите кнопку **Сохранить**.
##### <a name="activate-cloud-pos"></a>Активация облачного POS
1. Выполните вход на портал LCS.
1. Перейдите к своему проекту.
1. В верхнем меню выберите **Размещенные в облаке среды**.
1. Выберите среду из списка.
1. Щелкните **Полные сведения** в сведениях о среде с правой стороны.
1. Щелкните **Войти** для открытия меню, выберите **Войти в Cloud POS**, должен загрузиться POS.
1. Щелкните **Далее**.
1. Войдите с учетной записью AAD.
1. В области **Имя магазина** выберите **Сан-Франциско**.
1. Щелкните **Далее**.
1. В области **Регистрация и устройство** выберите **SANFRAN-1**.
1. Нажмите кнопку **Активировать**.
1. Вы должны выйти и завершить работу на экране входа в систему POS.
1. Теперь можно войти во взаимодействие Cloud POS, используя код оператора **000713** и пароль **123**.
### <a name="site-setup"></a>Настройка сайта
1. Выполните вход в **средство управления узлом**, используя ранее записанный URL-адрес.
1. Щелкните сайт **Fabrikam**, чтобы открыть диалоговое окно настройки сайта.
1. В поле домена выберите ранее введенный домен при инициализации электронной коммерции.
1. Для канала по умолчанию выберите **Расширенный интернет-магазин Fabrikam**. *Примечание. Убедитесь, что выбран **расширенный** интернет-магазин*
1. Для языка по умолчанию выберите **en-us**.
1. Оставьте **Путь** как есть.
1. Щелкните **OK**.
1. Вы будете отправлены в список страниц сайта.
### <a name="enable-jobs"></a>Включение заданий
1. Выполните вход в среду (HQ).
1. Используя меню, расположенное в левой части , перейдите в раздел **Retail > Запросы и отчеты > Пакетные задания**.
1. Выполните следующие шаги для каждого из заданий в списке ниже:
    * **Обработать уведомление по электронной почте о заказе розничной торговли**.
    * **Доступность продукта**.
    * **P-0001**.
    * **Задание синхронизации заказов**.
1. Используйте быструю фильтрацию для поиска задания по его названию (см. выше).
1. Если статус задания — **Отложено**, выполните следующие шаги:
    1. Выберите запись.
    1. В области действий откройте ленту **Пакетное задание** и щелкните **Изменить статус**.
    1. Выберите **Ожидание**, затем щелкните **ОК**.
### <a name="run-full-data-sync"></a>Выполнение полной синхронизации данных
1. Используя меню в левой части, перейдите к пункту **Модули > Retail > Настройка центрального офиса > Розничная сеть - Планировщик > База данных канала**.
1. Канал **По умолчанию** выбирается из списка слева. *Выберите другой доступный канал (с именем **scXXXXXXXXX**)*.
1. Щелкните **Полная синхронизация данных** на панели операций.
1. Введите график распределения **9999**.
1. Щелкните **OK**.
1. Щелкните **OK**.
### <a name="after-these-steps-you-are-ready-to-start-evaluating-your-preview-environment"></a>После выполнения этих шагов можно приступить к оценке среды предварительной версии!
Используйте URL-адрес **средства управления сайтом электронной коммерции**, чтобы перейти на страницу взаимодействия разработки C1, и URL-адрес **сайта электронной коммерции**, чтобы перейти к взаимодействию сайта C2.

## <a name="additional-resources"></a>Дополнительные ресурсы
### <a name="how-to-find-your-aad-tenant-id"></a>Порядок поиска идентификатора клиента AAD
Идентификатор клиента AAD является идентификатором GUID и выглядит как в этом примере: **72f988bf-86f1-41af-91ab-2d7cd011db47**
##### <a name="from-azure-portal"></a>С портала Azure
1. Выполните вход на портал Azure: https://portal.azure.com/
1. Убедитесь, что выбран правильный каталог.
1. Щелкните **Azure Active Directory** в меню слева.
1. Выберите **Свойства** в разделе **Управление**.
1. Код клиента AAD отображается под заголовком **Код каталога**.
##### <a name="from-openid-connect-metadata"></a>Из метаданных подключения OpenID
Создайте **URL-адрес OpenID**, заменив **\{YOUR_DOMAIN\}** своим доменом, например, microsoft.com: https://login.microsoftonline.com/{YOUR_DOMAIN}/.well-known/openid-configuration стал бы https://login.microsoftonline.com/microsoft.com/.well-known/openid-configuration

1. Перейдите на **URL-адрес OpenID** с вашим доменом в нем.
1. Код клиента AAD может отображаться в нескольких значениях свойств.
1. Найдите **authorization_endpoint** и извлеките код GUID сразу после **login.microsoftonline.com/**.
### <a name="how-to-find-the-id-of-your-aad-security-group"></a>Порядок поиска идентификатора вашей группы безопасности AAD
Идентификатор группы безопасности AAD является идентификатором GUID и выглядит как в этом примере: **436ea7f5-ee6c-40c1-9f08-825c5811066a**

На этом шаге предполагается, что пользователь является членом группы, для которой он пытается найти код.
1. Перейдите в песочницу Graph: https://developer.microsoft.com/en-us/graph/graph-explorer#
1. Щелкните **Войти с учетной записью Майкрософт** и выполните вход, используя свои учетные данные.
1. После входа щелкните **показать другие образцы** слева.
1. Включите **Группы** из правой области.
1. Закройте правую область.
1. Щелкните **все группы, к которым я принадлежу**.
1. Найдите нужную группу в текстовом поле **Просмотр ответа**.
1. Код группы безопасности отмечается в свойстве **Код**.
### <a name="test-credit-card-information-to-perform-test-purchases"></a>Проверьте сведения о кредитной карте для выполнения тестирования покупок
Для выполнения проверочных проводок на сайте можно использовать следующие данные пробной кредитной карты:

Номер карты: 4111-1111-1111-1111, срок действия: 10/20, CVV-код: 737

*Примечание. Не следует пытаться использовать фактические сведения кредитной карты на тестовых сайтах при любых обстоятельствах!*
### <a name="useful-links"></a>Полезные ссылки
* [LCS (Lifecycle Services)](https://docs.microsoft.com/en-us/dynamics365/unified-operations/dev-itpro/lifecycle-services/lcs-user-guide)
* [RCSU (Retail Cloud Scale Unit)](https://docs.microsoft.com/en-us/business-applications-release-notes/october18/dynamics365-retail/retail-cloud-scale-unit)
* [Портал Microsoft Azure](https://azure.microsoft.com/en-us/features/azure-portal)
* [Веб-сайт Dynamics 365 Commerce](https://aka.ms/Dynamics365CommerceWebsite)
* [Справочные ресурсы для Dynamics 365 Retail](../retail/index.md)
### <a name="microsoft-dynamics-365-commerce-preview-support"></a>Поддержка предварительной версии Microsoft Dynamics 365 Commerce
Если при выполнении шагов подготовки возникают проблемы, обратитесь за помощью в [группу Yammer предварительной версии Microsoft Dynamics 365 Commerce](https://aka.ms/Dynamics365CommercePreviewYammer). 

Если у вас возникли трудности с доступом к группе Yammer, вы также можете связаться с нами по электронной почте по адресу **Dynamics365Commerce@microsoft.com**. Этот адрес электронной почты не отслеживается активно, поэтому ожидается задержка в отклике.
***
## <a name="prerequisites-for-optional-features"></a>Предварительные условия для дополнительных функций
Если необходимо оценить возможности обработки электронной почты по проводкам, необходимо обеспечить соблюдение следующих условий:
* Имеется доступный сервер электронной почты (SMTP-сервер), который может использоваться в подписке Azure, в которой пользователь подготовил среду предварительной версии.
* Имеется полное доменное имя/IP-адрес сервера, номер порта SMTP и сведения о проверке подлинности.

Если требуется оценить функции управления цифровыми активами, в частности, применить новые омниканальные изображения, должны быть выполнены следующие предварительные требования:
* Вам необходимо иметь доступное **Имя клиента CMS**. Далее приведены инструкции по поиску имени.
### <a name="configure-image-backend-optional"></a>Настройка серверной части изображений (необязательно)
##### <a name="finding-your-media-base-url"></a>Поиск базового URL-адреса мультимедиа
*Примечание. Перед выполнением этого шага необходимо выполнить операцию **Настройка сайта**.*
1. Выполните вход в средство управления узлом, используя ранее записанный URL-адрес.
1. Откройте сайт **Fabrikam**.
1. Выберите **Активы** в меню слева.
1. Выберите любой один актив изображения.
1. Найдите **Общедоступный URL-адрес** в инспекторе свойств справа. В нем есть URL-адрес.
    * Пример URL-адреса: https://images-us-sb.cms.commerce.dynamics.com/cms/api/fabrikam/imageFileData/MA1nQC
1. Замените последний идентификатор в URL-адресе (MA1nQC в приведенном выше примере URL-адреса) следующей строкой: **search?fileName=**
    * Пример URL-адреса после замены: https://images-us-sb.cms.commerce.dynamics.com/cms/api/fabrikam/imageFileData/search?fileName=
    * Это ваш **Базовый URL-адреса мультимедиа** — запишите его.
##### <a name="updating-the-media-base-url"></a>Обновление базового URL-адреса мультимедиа
1. Выполните вход в среду (HQ).
1. Используя меню в левой части, перейдите к пункту **Модули > Retail > Настройка канала > Профили канала**.
1. Выберите **Изменить**.
1. В пункте **Профили канала** замените значение свойства для пункта **Базовый URL-адрес сервера мультимедиа** значением **Базовый URL-адрес мультимедиа**, созданным ранее.
1. Выберите другой канал из списка слева в области канала **По умолчанию**.
1. В разделе **Свойства профиля** щелкните **+ Добавить**.
1. Для добавленного свойства выберите **Базовый URL-адрес сервера мультимедиа** в качестве ключа свойства, а для значения свойства введите **Базовый URL-адрес мультимедиа**, созданный ранее.
1. Нажмите кнопку **Сохранить**.

### <a name="configure-email-server-optional"></a>Настройка сервера электронной почты (необязательно)
Обратите внимание, что вводимый SMTP-сервер или служба электронной почты должны быть доступны в подписке Azure, используемой для среды.
1. Выполните вход в среду (HQ).
1. Используя меню в левой части, перейдите к пункту **Модули > Retail > Настройка центрального офиса > Параметры > Параметры электронной почты**.
1. Перейдите на вкладку **Параметры SMTP**.
1. В поле **Сервер исходящей почты** введите полное доменное имя или IP-адрес сервера SMTP или службы электронной почты.
1. В поле **Номер порта SMTP** введите номер порта (по умолчанию это 25, если не используется SSL).
1. В поле **Имя пользователя** введите значение (если необходима проверка подлинности).
1. В поле **Пароль** введите значение (если необходима проверка подлинности).
1. Нажмите кнопку **Сохранить**.
1. Нажмите **Обновить**.
1. Перейдите на вкладку **Тестовое сообщение электронной почты**.
1. В поле поставщика электронной почты выберите **SMTP**.
1. В поле **Кому отправить** введите адрес электронной почты, по которому необходимо доставить проверочное сообщение.
1. Щелкните **Отправить тестовое сообщение электронной почты**.
### <a name="configure-email-templates-optional"></a>Настройка шаблонов электронной почты (необязательно)
Шаблон электронной почты для каждого события с проводками, по которому необходимо отправить электронную почту, необходимо обновить с помощью действительного адреса электронной почты отправителя.
1. Используя меню в левой части, перейдите к пункту **Модули > Администрирование организации > Настройка > Шаблоны сообщений электронной почты организации**.
1. Щелкните **Показать список**.
1. Для каждого из шаблонов в списке:
    1. В поле **Электронная почта отправителя** введите адрес электронной почты отправителя для данного шаблона электронной почты.
    1. (Необязательно) В поле **Имя отправителя** введите имя, которое будет использоваться как отправитель для данного шаблона электронной почты.
1. Нажмите кнопку **Сохранить**.
### <a name="customizing-email-templates-optional"></a>Пользовательская настройка шаблонов электронной почты (необязательно)
Возможно, потребуется настроить шаблоны электронной почты для использования других изображений или обновить ссылки в шаблоне для обратной связи со средой предварительной версии. В приведенных ниже шагах объясняется, как загрузить шаблоны по умолчанию, настроить их и обновить шаблоны в системе.
1. С помощью обозревателя загрузите [файл .zip шаблонов электронной почты по умолчанию для предварительной версии Microsoft Dynamics 365 Commerce](https://download.microsoft.com/download/d/7/b/d7b6c4d4-fe09-4922-9551-46bbb29d202d/Commerce.Preview.Default.Email.Templates.zip), содержащие следующие HTML-документы, на локальный компьютер.
    1. Шаблон подтверждения заказа
    1. Шаблон выдачи подарочной карты
    1. Шаблон создания заказа
    1. Шаблон заказа на упаковку
    1. Шаблон заказа на комплектацию
1. Настройте шаблоны с помощью текстового редактора или текста HTML. Список поддерживаемых маркеров см. ниже.
1. Выполните вход в среду (HQ).
1. Используя меню в левой части, перейдите к пункту **Модули > Retail > Настройка центрального офиса > Параметры > Шаблоны сообщений электронной почты организации**.
1. Разверните список слева, чтобы просмотреть все шаблоны.
1. Для каждого из шаблонов, которые необходимо настроить, выполните следующие действия:
    1. Выберите шаблон из списка.
    1. В разделе **Содержимое сообщения электронной почты** выберите нужную языковую версию из списка (по умолчанию **en-us**).
    1. В разделе **Содержимое сообщения электронной почты** щелкните **Правка**; должна открыться панель **Отправка шаблона сообщения электронной почты**.
    1. Нажмите **Обзор** и найдите файл HTML с настроенным содержимым.
    1. Щелкните **Отправить**; шаблон отправляется в систему, и будет показан предварительный просмотр.
    1. Щелкните **OK**.
    1. (Необязательно) Настройте свойство **Тема** шаблона.
    1. Нажмите кнопку **Сохранить**.

#### <a name="supported-tokens-in-the-email-template"></a>Поддерживаемые маркеры в шаблоне электронной почты
Эти токены будут заменены во время обработки электронной почты фактическими значениями, которые применяются к клиенту и его заказу.

**Заказ на продажу** — следующие маркеры применяются ко всему заказу на продажу.

|Наименование маркера|Маркер|
|---|---|
|Номер приказа|%salesid%|
|Имя клиента|%customername%|
|Адрес поставки|%deliveryaddress%|
|Адрес выставления счета|%customeraddress%|
|Дата заказа|%shipdate%|
|Способ поставки|%modeofdelivery%|
|Скидка|%discount%|
|Налог|%tax%|
|Итог по заказу|%total%|

**Строка продаж** — следующие маркеры заполняются для каждого продукта в заказе.

*Примечание. Размещайте маркеры **Список продуктов - начало** и **Список продуктов - конец** в начале и в конце блока HTML, который повторяется для каждого продукта.*

|Наименование маркера|Маркер|
|---|---|
|Список продуктов — начало|\<!--%tablebegin.salesline% -->|
|Список продуктов — конец|\<!--%tableend.salesline%-->|
|Наименование продукта|%lineproductname%|
|Описание|%lineproductdescription%|
|Количество|%linequantity%|
|Цена за единицу в строке|%lineprice% (verify)|
|Итого по номенклатуре строки|%linenetamount%|
|скидка по строке|%linediscount%|
|Дата отгрузки|%lineshipdate%|
|Способ закупки|%linedeliverymode%|
|адрес поставки|%linedeliveryaddress%|
|Единица измерения продаж для строки|%lineunit%|

