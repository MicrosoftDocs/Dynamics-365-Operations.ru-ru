---
title: Настройка клиента B2C в Commerce
description: В этом разделе описывается, как настроить клиенты "бизнес-потребитель" (B2C) Azure Active Directory (Azure AD) для проверки подлинности сайта пользователя в Dynamics 365 Commerce.
author: BrianShook
ms.date: 03/17/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.region: Global
ms.search.industry: retail
ms.author: brshoo
ms.search.validFrom: 2020-02-13
ms.dyn365.ops.version: ''
ms.openlocfilehash: f062f40c9eb883d02c4a0ee06c797ed1b0b22665
ms.sourcegitcommit: 3cdc42346bb653c13ab33a7142dbb7969f1f6dda
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/31/2021
ms.locfileid: "5794003"
---
# <a name="set-up-a-b2c-tenant-in-commerce"></a><span data-ttu-id="8808f-103">Настройка клиента B2C в Commerce</span><span class="sxs-lookup"><span data-stu-id="8808f-103">Set up a B2C tenant in Commerce</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="8808f-104">В этом разделе описывается, как настроить клиенты "бизнес-потребитель" (B2C) Azure Active Directory (Azure AD) для проверки подлинности сайта пользователя в Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="8808f-104">This topic describes how to set up your Azure Active Directory (Azure AD) business-to-consumer (B2C) tenants for user site authentication in Dynamics 365 Commerce.</span></span>

<span data-ttu-id="8808f-105">Dynamics 365 Commerce использует Azure AD B2C для поддержки учетных данных пользователей и потоков проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="8808f-105">Dynamics 365 Commerce uses Azure AD B2C to support user credential and authentication flows.</span></span> <span data-ttu-id="8808f-106">Пользователь может регистрировать, выполнять вход и сбрасывать свои пароли в этих потоках.</span><span class="sxs-lookup"><span data-stu-id="8808f-106">A user can sign up, sign in, and reset their password through these flows.</span></span> <span data-ttu-id="8808f-107">Azure AD B2C хранит конфиденциальные сведения о проверке подлинности пользователя, такие как имя пользователя и пароль.</span><span class="sxs-lookup"><span data-stu-id="8808f-107">Azure AD B2C stores sensitive user authentication information, such as username and password.</span></span> <span data-ttu-id="8808f-108">Запись пользователя в клиенте B2C хранит либо запись локальной учетной записи B2C, либо запись поставщика удостоверений социальных сетей B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-108">The user record in the B2C tenant will store either a B2C local account record or a B2C social identity provider record.</span></span> <span data-ttu-id="8808f-109">Эти записи B2C будут связываться обратно с записью клиента в среде Commerce.</span><span class="sxs-lookup"><span data-stu-id="8808f-109">These B2C records will link back to the customer record in the Commerce environment.</span></span>

> [!WARNING] 
> <span data-ttu-id="8808f-110">Azure AD B2C выведет из использования старые пользовательские потоки 1 августа 2021 года.</span><span class="sxs-lookup"><span data-stu-id="8808f-110">Azure AD B2C will retire old (legacy) user flows by August 1, 2021.</span></span> <span data-ttu-id="8808f-111">Поэтому необходимо запланировать миграцию ваших потоков пользователей на новую рекомендуемую версию.</span><span class="sxs-lookup"><span data-stu-id="8808f-111">Therefore, you should plan to migrate your user flows to the new recommended version.</span></span> <span data-ttu-id="8808f-112">Новая версия обеспечивает равенство функций и новые функции.</span><span class="sxs-lookup"><span data-stu-id="8808f-112">The new version provides feature parity and new features.</span></span> <span data-ttu-id="8808f-113">Библиотека модулей для Commerce версии 10.0.15 или выше должна использоваться с рекомендованными потоками пользователей B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-113">The module library for Commerce version 10.0.15 or higher should be used with the recommended B2C user flows.</span></span> <span data-ttu-id="8808f-114">Дополнительные сведения см. в разделе [Потоки пользователей в Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/user-flow-overview).</span><span class="sxs-lookup"><span data-stu-id="8808f-114">For more information, see [User flows in Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/user-flow-overview).</span></span>
 
 > [!NOTE]
 > <span data-ttu-id="8808f-115">Ознакомительные среды Commerce поставляются с предварительно загруженным клиентом Azure AD B2C для демонстрационных целей.</span><span class="sxs-lookup"><span data-stu-id="8808f-115">Commerce evaluation environments come with a pre-loaded Azure AD B2C tenant for demonstration purposes.</span></span> <span data-ttu-id="8808f-116">Загрузка собственного клиента Azure AD B2C с помощью описанных ниже шагов не является необходимым для ознакомительных сред.</span><span class="sxs-lookup"><span data-stu-id="8808f-116">Loading your own Azure AD B2C tenant using the steps below is not required for evaluation environments.</span></span>

## <a name="create-or-link-to-an-existing-aad-b2c-tenant-in-the-azure-portal"></a><span data-ttu-id="8808f-117">Создание или связывание существующего клиента AAD B2C с порталом Azure</span><span class="sxs-lookup"><span data-stu-id="8808f-117">Create or link to an existing AAD B2C tenant in the Azure portal</span></span>

1. <span data-ttu-id="8808f-118">Выполните вход на [портал Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="8808f-118">Sign in to the [Azure portal](https://portal.azure.com/).</span></span>
1. <span data-ttu-id="8808f-119">В меню портала Azure выберите **Создать ресурс**.</span><span class="sxs-lookup"><span data-stu-id="8808f-119">From the Azure portal menu, select **Create a resource**.</span></span> <span data-ttu-id="8808f-120">Убедитесь в том, что используется подписка и каталог, которые будут связаны с вашей средой Commerce.</span><span class="sxs-lookup"><span data-stu-id="8808f-120">Be sure to use the subscription and directory that will be connected with your Commerce environment.</span></span>

    ![Создание ресурса на портале Azure](./media/B2CImage_1.png)

1. <span data-ttu-id="8808f-122">Перейдите в пункт **Удостоверение \> Azure Active Directory B2C**.</span><span class="sxs-lookup"><span data-stu-id="8808f-122">Go to **Identity \> Azure Active Directory B2C**.</span></span>
1. <span data-ttu-id="8808f-123">После перехода на страницу **Создание нового клиента B2C или связывание с существующим клиентом** используйте один из следующих вариантов, который наилучшим образом отвечают потребностям компании:</span><span class="sxs-lookup"><span data-stu-id="8808f-123">Once on the **Create New B2C Tenant or Link to existing Tenant** page, use one of the options below that best suits your company's needs:</span></span>

    - <span data-ttu-id="8808f-124">**Создание нового клиента Azure AD B2C**: используйте этот параметр, чтобы создать новый клиент AAD B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-124">**Create a new Azure AD B2C Tenant**: Use this option to create a new AAD B2C tenant.</span></span>
        1. <span data-ttu-id="8808f-125">Выберите **Создать новый клиент Azure AD B2C**.</span><span class="sxs-lookup"><span data-stu-id="8808f-125">Select **Create a new Azure AD B2C Tenant**.</span></span>
        1. <span data-ttu-id="8808f-126">В поле **Название организации** введите название организации.</span><span class="sxs-lookup"><span data-stu-id="8808f-126">Under **Organization name**, enter the organization name.</span></span>
        1. <span data-ttu-id="8808f-127">В поле **Имя исходного домена** введите имя исходного домена.</span><span class="sxs-lookup"><span data-stu-id="8808f-127">Under **Initial domain name**, enter the initial domain name.</span></span>
        1. <span data-ttu-id="8808f-128">В поле **Страна или регион** выберите страну или регион.</span><span class="sxs-lookup"><span data-stu-id="8808f-128">For **Country or region**, select the country or region.</span></span>
        1. <span data-ttu-id="8808f-129">Выберите **Создать**, чтобы создать клиент.</span><span class="sxs-lookup"><span data-stu-id="8808f-129">Select **Create** to create the tenant.</span></span>

     ![Создание нового клиента Azure AD](./media/B2CImage_2.png)

     - <span data-ttu-id="8808f-131">**Связать существующий клиент Azure AD B2C с моей подпиской Azure**: этот параметр используется, если у вас уже есть клиент Azure AD B2C, с которым необходимо установить связь.</span><span class="sxs-lookup"><span data-stu-id="8808f-131">**Link an existing Azure AD B2C Tenant to my Azure subscription**: Use this option if you already have an Azure AD B2C tenant you want to link to.</span></span>
        1. <span data-ttu-id="8808f-132">Выберите **Связать существующий клиент Azure AD B2C с моей подпиской Azure**.</span><span class="sxs-lookup"><span data-stu-id="8808f-132">Select **Link an existing Azure AD B2C Tenant to my Azure subscription**.</span></span>
        1. <span data-ttu-id="8808f-133">В поле **Клиент Azure AD B2C** выберите соответствующий клиент B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-133">For **Azure AD B2C Tenant**, select the appropriate B2C tenant.</span></span> <span data-ttu-id="8808f-134">Если в поле выбора появляется сообщение "Нет подходящих клиентов B2C", у вас нет подходящего клиента B2C и потребуется создать новый клиент.</span><span class="sxs-lookup"><span data-stu-id="8808f-134">If the message "No eligible B2C Tenants found" appears in the selection box, you do not have an existing eligible B2C tenant and will need to create a new one.</span></span>
        1. <span data-ttu-id="8808f-135">В поле **Группа ресурсов** выберите **Создать новую**.</span><span class="sxs-lookup"><span data-stu-id="8808f-135">For **Resource group**, select **Create new**.</span></span> <span data-ttu-id="8808f-136">Введите **Имя** для группы ресурсов, которая будет содержать клиент, выберите **Местоположение группы ресурсов**, затем выберите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="8808f-136">Enter a **Name** for the resource group that will contain the tenant, select the **Resource group location**, and then select **Create**.</span></span>

    ![Связывание существующего клиента Azure AD B2C с подпиской Azure](./media/B2CImage_3.png)

1. <span data-ttu-id="8808f-138">После создания нового каталога Azure AD B2C (это может занять некоторое время) на панели мониторинга появится ссылка на новый каталог.</span><span class="sxs-lookup"><span data-stu-id="8808f-138">Once the new Azure AD B2C directory is created (this may take a few moments), a link to the new directory will appear on the dashboard.</span></span> <span data-ttu-id="8808f-139">Эта ссылка направляет вас на страницу "Добро пожаловать в Azure Active Directory B2C".</span><span class="sxs-lookup"><span data-stu-id="8808f-139">This link will direct you to the "Welcome to Azure Active Directory B2C" page.</span></span>

    ![Ссылка на новый каталог AAD](./media/B2CImage_4.png)

> [!NOTE]
> <span data-ttu-id="8808f-141">Если в учетной записи Azure имеется несколько подписок или настроен клиент B2C, не связанный с активной подпиской, баннер **Устранение неполадок** направит вас, чтобы связать клиент с подпиской.</span><span class="sxs-lookup"><span data-stu-id="8808f-141">If you have multiple subscriptions within your Azure account or have set up the B2C tenant without linking to an active subscription, a **Troubleshoot** banner will direct you to link the tenant to a subscription.</span></span> <span data-ttu-id="8808f-142">Выберите сообщение об устранении неполадок и выполните указания по устранению проблемы с подпиской.</span><span class="sxs-lookup"><span data-stu-id="8808f-142">Select the troubleshooting message and follow the instructions to resolve the subscription issue.</span></span>

<span data-ttu-id="8808f-143">На следующем рисунке показан пример баннера **Устранение неполадок** для Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-143">The following image shows an example of an Azure AD B2C **Troubleshoot** banner.</span></span>

![Предупреждение, показывающее, что каталог не имеет активной подписки](./media/B2CImage_5.png)

## <a name="create-the-b2c-application"></a><span data-ttu-id="8808f-145">Создание приложения B2C</span><span class="sxs-lookup"><span data-stu-id="8808f-145">Create the B2C application</span></span>

<span data-ttu-id="8808f-146">После создания клиента B2C вы создадите приложение B2C в рамках вашего нового клиента Azure AD B2C, чтобы взаимодействовать с Commerce.</span><span class="sxs-lookup"><span data-stu-id="8808f-146">Once the B2C tenant has been created, you will create a B2C application within your new Azure AD B2C tenant to interact with Commerce.</span></span>

<span data-ttu-id="8808f-147">Для создания приложения B2C выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="8808f-147">To create the B2C application, follow these steps.</span></span>

1. <span data-ttu-id="8808f-148">На портале Azure выберите **Регистрации приложений**, затем выберите **Создать регистрацию**.</span><span class="sxs-lookup"><span data-stu-id="8808f-148">In the Azure portal, select **App registrations**, and then select **New registration**.</span></span>
1. <span data-ttu-id="8808f-149">В поле **Имя** введите имя, которое будет присвоено этому приложению Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-149">Under **Name**, enter the name to give this Azure AD B2C application.</span></span>
1. <span data-ttu-id="8808f-150">В области **Поддерживаемые типы учетных записей** выберите **Учетные записи в любом поставщике удостоверений или в организационном каталоге (для аутентификации пользователей с помощью потока пользователей)**.</span><span class="sxs-lookup"><span data-stu-id="8808f-150">Under **Supported account types**, select **Accounts in any identity provider or organizational directory (for authenticating users with user flows)**.</span></span>
1. <span data-ttu-id="8808f-151">Для **URI перенаправления** введите ваши выделенные URL-адреса для ответа в качестве типа **Интернет**.</span><span class="sxs-lookup"><span data-stu-id="8808f-151">For **Redirect URI**, enter your dedicated reply URLs as type **Web**.</span></span> <span data-ttu-id="8808f-152">Информацию об URL-адресах ответа и порядке форматирования их см. в разделе [URL-адреса ответа](#reply-urls) ниже.</span><span class="sxs-lookup"><span data-stu-id="8808f-152">For information on reply URLs and how to format them, see [Reply URLs](#reply-urls) below.</span></span>
1. <span data-ttu-id="8808f-153">Для параметра **Разрешения** выберите **Предоставить согласие администратора для разрешений OpenID и автономного доступа**.</span><span class="sxs-lookup"><span data-stu-id="8808f-153">For **Permissions**, select **Grant admin consent to openid and offline_access permissions**.</span></span>
1. <span data-ttu-id="8808f-154">Выберите **Регистр**.</span><span class="sxs-lookup"><span data-stu-id="8808f-154">Select **Register**.</span></span>
1. <span data-ttu-id="8808f-155">Выберите вновь созданное приложение и перейдите в меню **Проверка подлинности**.</span><span class="sxs-lookup"><span data-stu-id="8808f-155">Select the newly-created application and navigate to the **Authentication** menu.</span></span> <span data-ttu-id="8808f-156">Здесь можно добавить дополнительные **URI перенаправления**, если это необходимо (сейчас или позже).</span><span class="sxs-lookup"><span data-stu-id="8808f-156">Here you can add additional **Redirect URIs** if needed (now or later).</span></span> <span data-ttu-id="8808f-157">Переходите к следующему шагу, если в данный момент не требуется.</span><span class="sxs-lookup"><span data-stu-id="8808f-157">Continue to the next step if not currently needed.</span></span>
1. <span data-ttu-id="8808f-158">В области **Неявное предоставление разрешения** выберите **Токены доступа** и **Токены идентификации**, чтобы включить их для приложения.</span><span class="sxs-lookup"><span data-stu-id="8808f-158">Under **Implicit grant**, select both **Access tokens** and **ID tokens** to enable them for the application.</span></span> <span data-ttu-id="8808f-159">Нажмите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="8808f-159">Select **Save**.</span></span>
1. <span data-ttu-id="8808f-160">Перейдите в меню **Обзор** портала Azure и скопируйте **ИД приложения (клиента)**.</span><span class="sxs-lookup"><span data-stu-id="8808f-160">Go to the **Overview** menu of the Azure portal and copy the **Application (client) ID**.</span></span> <span data-ttu-id="8808f-161">Запишите этот идентификатор для последующих шагов настройки (который позднее упоминается как **Идентификатор GUID клиента**).</span><span class="sxs-lookup"><span data-stu-id="8808f-161">Note this ID for later setup steps (referenced later as the **Client GUID**).</span></span>

<span data-ttu-id="8808f-162">Дополнительные справочные сведения о регистрации приложений в Azure AD B2C см. в разделе [Новый интерфейс регистрации приложений для Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/app-registrations-training-guide)</span><span class="sxs-lookup"><span data-stu-id="8808f-162">For additional reference on App Registrations in Azure AD B2C, please see [The new App registrations experience for Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/app-registrations-training-guide)</span></span>

### <a name="reply-urls"></a><span data-ttu-id="8808f-163">URL-адреса ответов</span><span class="sxs-lookup"><span data-stu-id="8808f-163">Reply URLs</span></span>

<span data-ttu-id="8808f-164">URL-адреса ответа важны, поскольку они позволяют создать список разрешений доменов возврата, когда ваш сайт вызывает Azure AD B2C для проверки подлинности пользователя.</span><span class="sxs-lookup"><span data-stu-id="8808f-164">Reply URLs are important as they provide an allow list of the return domains when your site calls Azure AD B2C to authenticate a user.</span></span> <span data-ttu-id="8808f-165">Это позволяет вернуть пользователя, прошедшего проверку подлинности, в домен, с которого он выполняет вход (домен вашего сайта).</span><span class="sxs-lookup"><span data-stu-id="8808f-165">This permits the return of the authenticated user back to the domain from which they are signing into (your site domain).</span></span> 

<span data-ttu-id="8808f-166">В поле **URL-адрес ответа** на экране **Azure AD B2c - Приложения \> Новое приложение** необходимо добавить отдельные строки для домена узла и (после подготовки среды) URL-адрес, созданный в Commerce.</span><span class="sxs-lookup"><span data-stu-id="8808f-166">In the **Reply URL** box on the **Azure AD B2c - Applications \> New application** screen, you need to add separate lines for both your site domain and (once your environment is provisioned) the Commerce-generated URL.</span></span> <span data-ttu-id="8808f-167">Эти URL-адреса должны всегда использовать допустимый формат URL-адреса и должны быть только базовыми URL-адресами (без завершающих символов прямой косой черты или путей).</span><span class="sxs-lookup"><span data-stu-id="8808f-167">These URLs must always use a valid URL format and must be base URLs only (no trailing forward slashes or paths).</span></span> <span data-ttu-id="8808f-168">Затем строка ``/_msdyn365/authresp`` должна быть добавлена к базовым URL-адресам, как показано в следующих примерах.</span><span class="sxs-lookup"><span data-stu-id="8808f-168">The string ``/_msdyn365/authresp`` then needs to be appended to the base URLs, as in the following examples.</span></span>

- <span data-ttu-id="8808f-169">``https://www.fabrikam.com/_msdyn365/authresp`` (Домен должен полностью совпадать с доменом электронной коммерции.</span><span class="sxs-lookup"><span data-stu-id="8808f-169">``https://www.fabrikam.com/_msdyn365/authresp`` (The domain should match the e-commerce domain completely.</span></span> <span data-ttu-id="8808f-170">Если имеется несколько доменов, необходимо добавить этот URL-адрес для каждого домена.)</span><span class="sxs-lookup"><span data-stu-id="8808f-170">If you have multiple domains, you need to add this URL for each domain.)</span></span>
- ``https://fabrikam-prod.commerce.dynamics.com/_msdyn365/authresp``

## <a name="create-user-flow-policies"></a><span data-ttu-id="8808f-171">Создание политик потока пользователей</span><span class="sxs-lookup"><span data-stu-id="8808f-171">Create user flow policies</span></span>

<span data-ttu-id="8808f-172">Потоки пользователей — это политики, которые Azure AD B2C использует для обеспечения безопасности входа в систему, регистрации, редактирования профиля и функции забытого пароля пользователя.</span><span class="sxs-lookup"><span data-stu-id="8808f-172">User flows are the policies Azure AD B2C uses to provide secure sign in, sign up, edit profile, and forget password user experiences.</span></span> <span data-ttu-id="8808f-173">Dynamics 365 Commerce использует эти потоки для выполнения действий политики по взаимодействию с клиентом Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-173">Dynamics 365 Commerce uses these flows to perform the policy actions to interact with the Azure AD B2C tenant.</span></span> <span data-ttu-id="8808f-174">Когда пользователь взаимодействует с этими политиками, он перенаправляется на клиент Azure AD B2C для выполнения этих действий.</span><span class="sxs-lookup"><span data-stu-id="8808f-174">When a user interacts with these policies, they are redirected to the Azure AD B2C tenant to perform the actions.</span></span>

<span data-ttu-id="8808f-175">Azure AD B2C предоставляет три основных типа потоков пользователей:</span><span class="sxs-lookup"><span data-stu-id="8808f-175">Azure AD B2C provides three basic user flow types:</span></span>
- <span data-ttu-id="8808f-176">Регистрация и вход</span><span class="sxs-lookup"><span data-stu-id="8808f-176">Sign up and sign in</span></span>
- <span data-ttu-id="8808f-177">Изменение профиля</span><span class="sxs-lookup"><span data-stu-id="8808f-177">Profile editing</span></span>
- <span data-ttu-id="8808f-178">Сброс пароля</span><span class="sxs-lookup"><span data-stu-id="8808f-178">Password reset</span></span>

<span data-ttu-id="8808f-179">Можно использовать потоки пользователей по умолчанию, предоставляемые Azure AD, которые будут показывать страницу, размещенную в AAD B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-179">You can choose to use the default user flows provided by Azure AD, which will display a page hosted by AAD B2C.</span></span> <span data-ttu-id="8808f-180">Кроме того, можно создать HTML-страницу для управления внешним видом этих потоков пользователей.</span><span class="sxs-lookup"><span data-stu-id="8808f-180">Alternately, you can create an HTML page to control the look and feel of these user flow experiences.</span></span> 

<span data-ttu-id="8808f-181">Чтобы настроить страницы политики пользователя со страницами, созданными для Dynamics 365 Commerce, см. раздел [Настройка пользовательских страниц для учетных записей пользователей](custom-pages-user-logins.md).</span><span class="sxs-lookup"><span data-stu-id="8808f-181">To customize the user policy pages with pages built in Dynamics 365 Commerce, see [Set up custom pages for user logins](custom-pages-user-logins.md).</span></span> <span data-ttu-id="8808f-182">Дополнительные сведения см. в разделе [Настройка интерфейса взаимодействия с пользователями в Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/tutorial-customize-ui).</span><span class="sxs-lookup"><span data-stu-id="8808f-182">For additional information, see [Customize the interface of user experiences in Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/tutorial-customize-ui).</span></span>

### <a name="create-a-sign-up-and-sign-in-user-flow-policy"></a><span data-ttu-id="8808f-183">Создание политику потока пользователей для регистрации и входа в систему</span><span class="sxs-lookup"><span data-stu-id="8808f-183">Create a sign up and sign in user flow policy</span></span>

<span data-ttu-id="8808f-184">Чтобы создать регистрацию и вход в политике потока пользователя, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="8808f-184">To create a sign up and sign in user flow policy, follow these steps.</span></span>

1. <span data-ttu-id="8808f-185">На портале Azure выберите **Потоки пользователей (политики)** в левой области переходов.</span><span class="sxs-lookup"><span data-stu-id="8808f-185">In the Azure portal, select **User flows (policies)** in the left navigation pane.</span></span>
1. <span data-ttu-id="8808f-186">На странице **Azure AD B2C – Потоки пользователей (политики)** выберите пункт **Создать поток пользователей**.</span><span class="sxs-lookup"><span data-stu-id="8808f-186">On the **Azure AD B2C – User flows (policies)** page, select **New User Flow**.</span></span>
1. <span data-ttu-id="8808f-187">Выберите политику **Регистрация и вход**, затем выберите версию **Рекомендуемая**.</span><span class="sxs-lookup"><span data-stu-id="8808f-187">Select the **Sign up and sign in** policy, and then select the **Recommended** version.</span></span>
1. <span data-ttu-id="8808f-188">В поле **Имя** введите имя политики.</span><span class="sxs-lookup"><span data-stu-id="8808f-188">Under **Name**, enter a policy name.</span></span> <span data-ttu-id="8808f-189">Это имя впоследствии будет отображаться с префиксом, назначенным порталом (например, "B2C_1_").</span><span class="sxs-lookup"><span data-stu-id="8808f-189">This name will display afterwards with a prefix the portal assigns (for example, "B2C_1_").</span></span>
1. <span data-ttu-id="8808f-190">В разделе **Поставщики удостоверений** установите соответствующий флажок.</span><span class="sxs-lookup"><span data-stu-id="8808f-190">Under **Identity providers**, select the appropriate check box.</span></span>
1. <span data-ttu-id="8808f-191">В группе **Многофакторная проверка подлинности** выберите подходящий вариант для вашей компании.</span><span class="sxs-lookup"><span data-stu-id="8808f-191">Under **Multifactor Authentication**, select the appropriate choice for your company.</span></span> 
1. <span data-ttu-id="8808f-192">В разделе **Атрибуты и заявки пользователей** выберите параметры для сбора атрибутов или возврата заявок, если необходимо.</span><span class="sxs-lookup"><span data-stu-id="8808f-192">Under **User attributes and claims**, select options to collect attributes or return claims as appropriate.</span></span> <span data-ttu-id="8808f-193">Для Commerce требуются следующие параметры по умолчанию:</span><span class="sxs-lookup"><span data-stu-id="8808f-193">Commerce requires the following default options:</span></span>

    | <span data-ttu-id="8808f-194">**Собрать атрибут**</span><span class="sxs-lookup"><span data-stu-id="8808f-194">**Collect  attribute**</span></span> | <span data-ttu-id="8808f-195">**Заявка на возврат**</span><span class="sxs-lookup"><span data-stu-id="8808f-195">**Return  claim**</span></span> |
    | ---------------------- | ----------------- |
    | <span data-ttu-id="8808f-196">Адрес электронной почты</span><span class="sxs-lookup"><span data-stu-id="8808f-196">Email Address</span></span>          | <span data-ttu-id="8808f-197">Адреса электронной почты</span><span class="sxs-lookup"><span data-stu-id="8808f-197">Email Addresses</span></span>   |
    | <span data-ttu-id="8808f-198">Данное имя</span><span class="sxs-lookup"><span data-stu-id="8808f-198">Given Name</span></span>             | <span data-ttu-id="8808f-199">Данное имя</span><span class="sxs-lookup"><span data-stu-id="8808f-199">Given Name</span></span>        |
    |                        | <span data-ttu-id="8808f-200">Поставщик удостоверений</span><span class="sxs-lookup"><span data-stu-id="8808f-200">Identity Provider</span></span> |
    | <span data-ttu-id="8808f-201">Фамилия</span><span class="sxs-lookup"><span data-stu-id="8808f-201">Surname</span></span>                | <span data-ttu-id="8808f-202">Фамилия</span><span class="sxs-lookup"><span data-stu-id="8808f-202">Surname</span></span>           |
    |                        | <span data-ttu-id="8808f-203">Код объекта пользователя</span><span class="sxs-lookup"><span data-stu-id="8808f-203">User’s Object ID</span></span>  |

1. <span data-ttu-id="8808f-204">Выберите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="8808f-204">Select **Create**.</span></span>

<span data-ttu-id="8808f-205">На следующем рисунке показан пример потока пользователей Azure AD B2C для регистрации и входа.</span><span class="sxs-lookup"><span data-stu-id="8808f-205">The following image is an example of the Azure AD B2C sign up and sign in user flow.</span></span>

![Настройки политики регистрации и входа](./media/B2CImage_11.png)

<span data-ttu-id="8808f-207">На следующем рисунке показан параметр **Выполнить поток пользователя** в потоке пользователя Azure AD B2C для регистрации и входа.</span><span class="sxs-lookup"><span data-stu-id="8808f-207">The following image shows the **Run user flow** option in the Azure AD B2C sign up and sign in user flow.</span></span>

![Параметр выполнения потока пользователей в потоке политик](./media/B2CImage_23.png)
   
### <a name="create-a-profile-editing-user-flow-policy"></a><span data-ttu-id="8808f-209">Создание политики потока пользователей для редактирования профиля</span><span class="sxs-lookup"><span data-stu-id="8808f-209">Create a profile editing user flow policy</span></span>

<span data-ttu-id="8808f-210">Чтобы создать политику потока пользователя для редактирования профиля, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="8808f-210">To create a profile editing user flow policy, follow these steps.</span></span>

1. <span data-ttu-id="8808f-211">На портале Azure выберите **Потоки пользователей (политики)** в левой области переходов.</span><span class="sxs-lookup"><span data-stu-id="8808f-211">In the Azure portal, select **User flows (policies)** in the left navigation pane.</span></span>
1. <span data-ttu-id="8808f-212">На странице **Azure AD B2C – Потоки пользователей (политики)** выберите пункт **Создать поток пользователей**.</span><span class="sxs-lookup"><span data-stu-id="8808f-212">On the **Azure AD B2C – User flows (policies)** page, select **New User Flow**.</span></span>
1. <span data-ttu-id="8808f-213">Выберите **Редактирование профиля**, затем выберите версию **Рекомендуемая**.</span><span class="sxs-lookup"><span data-stu-id="8808f-213">Select **Profile editing**, and then select the **Recommended** version.</span></span>
1. <span data-ttu-id="8808f-214">В поле **Имя** введите поток пользователя для редактирования профиля.</span><span class="sxs-lookup"><span data-stu-id="8808f-214">Under **Name**, enter the profile editing user flow.</span></span> <span data-ttu-id="8808f-215">Это имя впоследствии будет отображаться с префиксом, назначенным порталом (например, "B2C_1_").</span><span class="sxs-lookup"><span data-stu-id="8808f-215">This name will display afterwards with a prefix the portal assigns (for example, "B2C_1_").</span></span>
1. <span data-ttu-id="8808f-216">В области **Поставщики удостоверений** выберите **Вход по электронной почте**.</span><span class="sxs-lookup"><span data-stu-id="8808f-216">Under **Identity providers**, select **Email SignIn**.</span></span>
1. <span data-ttu-id="8808f-217">В разделе **Атрибуты пользователя** установите следующие флажки:</span><span class="sxs-lookup"><span data-stu-id="8808f-217">Under **User attributes**, select the following check boxes:</span></span>
    - <span data-ttu-id="8808f-218">**Адреса электронной почты** (только **Заявка на возврат**)</span><span class="sxs-lookup"><span data-stu-id="8808f-218">**Email Addresses** (**Return claim** only)</span></span>
    - <span data-ttu-id="8808f-219">**Данное имя** (**Сбор атрибутов** и **Заявка на возврат**)</span><span class="sxs-lookup"><span data-stu-id="8808f-219">**Given Name** (**Collect attribute** and **Return claim**)</span></span>
    - <span data-ttu-id="8808f-220">**Поставщик удостоверений** (только **Заявка на возврат**)</span><span class="sxs-lookup"><span data-stu-id="8808f-220">**Identity Provider** (**Return claim** only)</span></span>
    - <span data-ttu-id="8808f-221">**Фамилия** (**Сбор атрибутов** и **Заявка на возврат**)</span><span class="sxs-lookup"><span data-stu-id="8808f-221">**Surname** (**Collect attribute** and **Return claim**)</span></span>
    - <span data-ttu-id="8808f-222">**Код объекта пользователя** (только **Заявка на возврат**)</span><span class="sxs-lookup"><span data-stu-id="8808f-222">**User's Object ID** (**Return claim** only)</span></span>
1. <span data-ttu-id="8808f-223">Выберите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="8808f-223">Select **Create**.</span></span>

<span data-ttu-id="8808f-224">На следующем рисунке показан пример потока пользователя Azure AD B2C для редактирования профиля.</span><span class="sxs-lookup"><span data-stu-id="8808f-224">The following image shows an example of the Azure AD B2C profile editing user flow.</span></span>

![Создание потока пользователей для редактирования профиля](./media/B2CImage_12.png)

### <a name="create-a-password-reset-user-flow-policy"></a><span data-ttu-id="8808f-226">Создание политики потока пользователей для сброса пароля</span><span class="sxs-lookup"><span data-stu-id="8808f-226">Create a password reset user flow policy</span></span>

<span data-ttu-id="8808f-227">Чтобы создать политику потока пользователя для сброса пароля, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="8808f-227">To create a password reset user flow policy, follow these steps.</span></span>

1. <span data-ttu-id="8808f-228">На портале Azure выберите **Потоки пользователей (политики)** в левой области переходов.</span><span class="sxs-lookup"><span data-stu-id="8808f-228">In the Azure portal, select **User flows (policies)** in the left navigation pane.</span></span>
1. <span data-ttu-id="8808f-229">На странице **Azure AD B2C – Потоки пользователей (политики)** выберите пункт **Создать поток пользователей**.</span><span class="sxs-lookup"><span data-stu-id="8808f-229">On the **Azure AD B2C – User flows (policies)** page, select **New User Flow**.</span></span>
1. <span data-ttu-id="8808f-230">Выберите **Сброс пароля**, затем выберите версию **Рекомендуемая**.</span><span class="sxs-lookup"><span data-stu-id="8808f-230">Select **Password Reset**, and then select the **Recommended** version.</span></span>
1. <span data-ttu-id="8808f-231">В поле **Имя** введите имя потока пользователей для сброса пароля.</span><span class="sxs-lookup"><span data-stu-id="8808f-231">Under **Name**, enter a name for the password reset user flow.</span></span>
1. <span data-ttu-id="8808f-232">В разделе **Поставщики удостоверений** выберите **Сбросить пароль, используя адрес электронной почты**.</span><span class="sxs-lookup"><span data-stu-id="8808f-232">Under **Identity providers**, select **Reset password using email address**.</span></span>
1. <span data-ttu-id="8808f-233">Выберите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="8808f-233">Select **Create**.</span></span>
1. <span data-ttu-id="8808f-234">В разделе **Заявки приложений** установите следующие флажки:</span><span class="sxs-lookup"><span data-stu-id="8808f-234">Under **Application claims**, select the following check boxes:</span></span>
    - <span data-ttu-id="8808f-235">**Адреса электронной почты**</span><span class="sxs-lookup"><span data-stu-id="8808f-235">**Email addresses**</span></span>
    - <span data-ttu-id="8808f-236">**Данное имя**</span><span class="sxs-lookup"><span data-stu-id="8808f-236">**Given Name**</span></span>
    - <span data-ttu-id="8808f-237">**Фамилия**</span><span class="sxs-lookup"><span data-stu-id="8808f-237">**Surname**</span></span>
    - <span data-ttu-id="8808f-238">**Код объекта пользователя**</span><span class="sxs-lookup"><span data-stu-id="8808f-238">**User's Object ID**</span></span>
1. <span data-ttu-id="8808f-239">Выберите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="8808f-239">Select **Create**.</span></span>

<span data-ttu-id="8808f-240">На следующем рисунке показано, где можно установить **Сброс пароля с помощью адреса электронной почты** в потоке пользователя Azure AD B2C для сброса пароля.</span><span class="sxs-lookup"><span data-stu-id="8808f-240">The following image shows where to set **Reset Password using mail address** in the Azure AD B2C password reset user flow.</span></span>

![Установка значения "Сброс пароль с помощью адреса электронной почты" в политике сброса пароля](./media/B2CImage_13.png)

## <a name="add-social-identity-providers-optional"></a><span data-ttu-id="8808f-242">Добавление поставщиков удостоверений в социальных сетях (дополнительно)</span><span class="sxs-lookup"><span data-stu-id="8808f-242">Add social identity providers (Optional)</span></span>

<span data-ttu-id="8808f-243">Поставщики удостоверений в социальных сетях позволяют пользователям использовать учетные записи социальных сетей для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="8808f-243">Social identity providers allow users to use their social accounts for authentication.</span></span> <span data-ttu-id="8808f-244">Добавление проверки подлинности поставщика удостоверений социальных сетей не является обязательным в Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="8808f-244">Adding social identity provider authentication is optional in Dynamics 365 Commerce.</span></span> 

<span data-ttu-id="8808f-245">Если проверка подлинности поставщика удостоверений социальных сетей не добавлена, профили Azure AD B2C по умолчанию будут основными профилями для вашей базы пользователей.</span><span class="sxs-lookup"><span data-stu-id="8808f-245">If social identity provider authentication is not added, the default Azure AD B2C profiles will be the main profiles for your user base.</span></span> <span data-ttu-id="8808f-246">Пользователи будут выбирать собственные имена пользователей (их предпочтительные адреса электронной почты) и устанавливать пароль.</span><span class="sxs-lookup"><span data-stu-id="8808f-246">Users will select their own username (their preferred email address) and set a password.</span></span> <span data-ttu-id="8808f-247">Azure AD B2C будет выполнять проверку подлинности пользователей напрямую.</span><span class="sxs-lookup"><span data-stu-id="8808f-247">Azure AD B2C will authenticate users directly.</span></span> 

<span data-ttu-id="8808f-248">Если добавлена проверка подлинности поставщика удостоверений социальных сетей и пользователь выбрал одного из предлагаемых поставщиков удостоверений социальных сетей, сущность все равно создается в клиенте Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-248">If social identity provider authentication is added and a user chooses one of the social identity providers offered, an entity is still created in the Azure AD B2C tenant.</span></span> <span data-ttu-id="8808f-249">Azure AD B2C будет проверять подлинность учетных данных пользователя с помощью поставщика удостоверений социальных сетей.</span><span class="sxs-lookup"><span data-stu-id="8808f-249">Azure AD B2C will then authenticate the user's credentials with the social identity provider.</span></span>

> [!NOTE]
> <span data-ttu-id="8808f-250">Вход через поставщика удостоверений создает запись в клиенте B2C, но в формате, отличном от локальных учетных записей, так как он будет вызывать ссылку на внешнего поставщика удостоверений социальной сети для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="8808f-250">The identity provider sign in creates a record in the B2C tenant, but in a different format than local accounts since it will call the external social identity provider reference for authentication.</span></span> <span data-ttu-id="8808f-251">Пользователь может использовать тот же адрес электронной почты для поставщиков удостоверений социальной сети, то есть имя пользователя электронной почты, используемое для проверки подлинности, может не быть уникальным для клиента.</span><span class="sxs-lookup"><span data-stu-id="8808f-251">The user can use the same email address across social identity providers, meaning that the email username used for authentication may not be unique to the tenant.</span></span> <span data-ttu-id="8808f-252">Azure AD B2C обеспечивает только то, чтобы пользователи имели уникальный адрес электронной почты в локальных учетных записях B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-252">Azure AD B2C will only enforce that users have a unique email address on local B2C accounts.</span></span>

<span data-ttu-id="8808f-253">Прежде чем можно будет добавить поставщика удостоверений социальных сетей для проверки подлинности, необходимо перейти на портал поставщика удостоверений и настроить приложение поставщика удостоверений в соответствии с инструкциями из документации по Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-253">Before you can add a social identity provider for authentication, you must go to the identity provider's portal and set up an identity provider application as instructed in the Azure AD B2C documentation.</span></span> <span data-ttu-id="8808f-254">Список ссылок на документацию приведен ниже.</span><span class="sxs-lookup"><span data-stu-id="8808f-254">A list of links to the documentation is provided below.</span></span>

- [<span data-ttu-id="8808f-255">Amazon</span><span class="sxs-lookup"><span data-stu-id="8808f-255">Amazon</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-amzn-app)
- [<span data-ttu-id="8808f-256">Azure AD (один клиент)</span><span class="sxs-lookup"><span data-stu-id="8808f-256">Azure AD (Single Tenant)</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-oidc-azure-active-directory)
- [<span data-ttu-id="8808f-257">Учетная запись Майкрософт</span><span class="sxs-lookup"><span data-stu-id="8808f-257">Microsoft Account</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-msa-app)
- [<span data-ttu-id="8808f-258">Facebook</span><span class="sxs-lookup"><span data-stu-id="8808f-258">Facebook</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-fb-app)
- [<span data-ttu-id="8808f-259">GitHub</span><span class="sxs-lookup"><span data-stu-id="8808f-259">GitHub</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-github-app)
- [<span data-ttu-id="8808f-260">Google</span><span class="sxs-lookup"><span data-stu-id="8808f-260">Google</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-goog-app)
- [<span data-ttu-id="8808f-261">LinkedIn</span><span class="sxs-lookup"><span data-stu-id="8808f-261">LinkedIn</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-li-app)
- [<span data-ttu-id="8808f-262">OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="8808f-262">OpenID Connect</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-oidc-idp)
- [<span data-ttu-id="8808f-263">Twitter</span><span class="sxs-lookup"><span data-stu-id="8808f-263">Twitter</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-twitter-app)

### <a name="add-and-set-up-a-social-identity-provider"></a><span data-ttu-id="8808f-264">Добавление и настройка поставщика удостоверений социальных сетей</span><span class="sxs-lookup"><span data-stu-id="8808f-264">Add and set up a social identity provider</span></span>

<span data-ttu-id="8808f-265">Чтобы добавить и настроить поставщика удостоверений социальных сетей, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="8808f-265">To add and set up a social identity provider, follow these steps.</span></span>  

1. <span data-ttu-id="8808f-266">На портале Azure перейдите к пункту **Поставщики удостоверений**.</span><span class="sxs-lookup"><span data-stu-id="8808f-266">In the Azure portal, navigate to **Identity Providers**.</span></span>
1. <span data-ttu-id="8808f-267">Выберите **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="8808f-267">Select **Add**.</span></span> <span data-ttu-id="8808f-268">Появится экран **Добавление поставщика удостоверений**.</span><span class="sxs-lookup"><span data-stu-id="8808f-268">The **Add identity provider** screen appears.</span></span>
1. <span data-ttu-id="8808f-269">В поле **Имя** введите имя, которое будет отображаться пользователям на экране входа.</span><span class="sxs-lookup"><span data-stu-id="8808f-269">Under **Name**, enter the name to be displayed to users on your sign in screen.</span></span>
1. <span data-ttu-id="8808f-270">В разделе **Тип поставщика удостоверений** выберите поставщика удостоверений из списка.</span><span class="sxs-lookup"><span data-stu-id="8808f-270">Under **Identity provider type**, select an identity provider from the list.</span></span>
1. <span data-ttu-id="8808f-271">Нажмите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="8808f-271">Select **OK**.</span></span>
1. <span data-ttu-id="8808f-272">Выберите **Настройка поставщика удостоверений** для доступа к экрану **Настройка поставщика удостоверений социальных сетей**.</span><span class="sxs-lookup"><span data-stu-id="8808f-272">Select **Set up this identity provider** to access the **Set up the social identity provider** screen.</span></span>
1. <span data-ttu-id="8808f-273">В поле **Код клиента** введите код клиента, полученный от установки приложения поставщика удостоверений.</span><span class="sxs-lookup"><span data-stu-id="8808f-273">Under **Client ID**, enter the client ID as obtained from the identity provider application setup.</span></span>
1. <span data-ttu-id="8808f-274">В поле **Секрет клиента** введите секрет клиента, полученный от установки приложения поставщика удостоверений.</span><span class="sxs-lookup"><span data-stu-id="8808f-274">Under **Client secret**, enter the client secret as obtained from the identity provider application setup.</span></span>
1. <span data-ttu-id="8808f-275">Прикрепите поток пользователей для политик входа в систему:</span><span class="sxs-lookup"><span data-stu-id="8808f-275">Attach user flow for sign in sign up policies:</span></span>
1. <span data-ttu-id="8808f-276">Перейдите к пункту **Azure AD B2C — пользовательские потоки (политики) \> {ваша политика входа и регистрации} \> Поставщики удостоверений**.</span><span class="sxs-lookup"><span data-stu-id="8808f-276">Go to **Azure AD B2C – User flows (policies) \> {your sign-in sign-up policy} \> Identity providers**.</span></span>
1. <span data-ttu-id="8808f-277">Чтобы привязать политику потока пользователей входа/регистрации, выберите каждого поставщика удостоверений, настроенного для вашей организации.</span><span class="sxs-lookup"><span data-stu-id="8808f-277">To attach the sign in/sign up user flow policy, select each identity provider you have set up for your account.</span></span> <span data-ttu-id="8808f-278">Чтобы проверить их, выберите **Выполнить поток пользователя** для каждого поставщика удостоверений.</span><span class="sxs-lookup"><span data-stu-id="8808f-278">To test these, select **Run user flow** for each identity provider.</span></span> <span data-ttu-id="8808f-279">На новой вкладке будет отображена страница регистрация, в которой отображается новое поле выбора поставщика удостоверений.</span><span class="sxs-lookup"><span data-stu-id="8808f-279">A new tab will display the sign-in page displaying the new identity provider selection box.</span></span>

<span data-ttu-id="8808f-280">На следующем рисунке показаны примеры экранов **Добавление поставщика удостоверений** и **Настройка поставщика удостоверений социальных сетей** в Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-280">The following image shows examples of the **Add identity provider** and **Set up the social identity provider** screens in Azure AD B2C.</span></span>

![Добавление поставщика удостоверений социальных сетей в приложение](./media/B2CImage_14.png)

<span data-ttu-id="8808f-282">На следующем рисунке показан пример выбора поставщиков удостоверений на странице Azure AD B2C **Поставщики удостоверений**.</span><span class="sxs-lookup"><span data-stu-id="8808f-282">The following image shows an example of how to select identity providers on the Azure AD B2C **Identity Providers** page.</span></span>

![Выберите каждого поставщика удостоверений социальных сетей, который будет включен в политику](./media/B2CImage_16.png)

<span data-ttu-id="8808f-284">На следующем рисунке показан пример экранного входа по умолчанию с отображением кнопки входа в систему через поставщика удостоверений социальных сетей.</span><span class="sxs-lookup"><span data-stu-id="8808f-284">The following image shows an example of a default sign-in screen with a social identity provider sign-in button displayed.</span></span>

> [!NOTE]
> <span data-ttu-id="8808f-285">При использовании настраиваемых страниц, построенных в модуле Commerce для потоков пользователей необходимо добавить кнопки для поставщиков удостоверений социальных сетей с использованием функций расширяемости библиотеки модуля Commerce.</span><span class="sxs-lookup"><span data-stu-id="8808f-285">If using the custom pages built in Commerce for your user flows, the buttons for social identity providers will need to be added using the extensibility features of the Commerce module library.</span></span> <span data-ttu-id="8808f-286">Кроме того, при настройке приложений с конкретным поставщиком удостоверений социальных сетей в некоторых случаях URL-адреса или строки конфигурации могут быть чувствительны к регистру.</span><span class="sxs-lookup"><span data-stu-id="8808f-286">Additionally, when setting up your applications with a specific social identity provider, in some cases URL or configuration strings may be case sensitive.</span></span> <span data-ttu-id="8808f-287">Дополнительные сведения см. в инструкциях по подключениям поставщика удостоверений социальных сетей.</span><span class="sxs-lookup"><span data-stu-id="8808f-287">Refer to your social identity provider's connection instructions for more information.</span></span>
 
![Пример экран входа по умолчанию с отображением кнопки входа через поставщика удостоверений социальной сети](./media/B2CImage_17.png)

## <a name="update-commerce-headquarters-with-the-new-azure-ad-b2c-information"></a><span data-ttu-id="8808f-289">Обновление центрального офиса Commerce с учетом новой информации Azure AD B2C</span><span class="sxs-lookup"><span data-stu-id="8808f-289">Update Commerce headquarters with the new Azure AD B2C information</span></span>

<span data-ttu-id="8808f-290">После завершения приведенных выше шагов по подготовке Azure AD B2C, приложение Azure AD B2C должно быть зарегистрировано в вашей среде Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="8808f-290">Once the Azure AD B2C provisioning steps above are completed, the Azure AD B2C application must be registered in your Dynamics 365 Commerce environment.</span></span>

<span data-ttu-id="8808f-291">Чтобы обновить штаб-квартиру с новыми сведениями Azure AD B2C, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="8808f-291">To update headquarters with the new Azure AD B2C information, follow these steps.</span></span>

1. <span data-ttu-id="8808f-292">В модуле Commerce перейдите на страницу **Общие параметры Commerce** и выберите пункт **Поставщики удостоверений** в меню слева.</span><span class="sxs-lookup"><span data-stu-id="8808f-292">In Commerce, go to **Commerce Shared Parameters** and select **Identity Providers** in the left menu.</span></span>
1. <span data-ttu-id="8808f-293">В разделе **Поставщики удостоверений** выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="8808f-293">Under **Identity Providers**, do the following:</span></span>
    1. <span data-ttu-id="8808f-294">В поле **Издатель** введите URL-адрес издателя поставщика удостоверений.</span><span class="sxs-lookup"><span data-stu-id="8808f-294">In the **Issuer** box, enter the identity provider issuer URL.</span></span> <span data-ttu-id="8808f-295">Сведения о том, как найти URL-адрес издателя, см. в разделе [Получение URL-адреса издателя](#obtain-issuer-url).</span><span class="sxs-lookup"><span data-stu-id="8808f-295">To find your issuer URL, see [Obtain issuer URL](#obtain-issuer-url) below.</span></span>
    1. <span data-ttu-id="8808f-296">В поле **Имя** введите имя для записи издателя.</span><span class="sxs-lookup"><span data-stu-id="8808f-296">In the **Name** box, enter a name for your issuer record.</span></span>
    1. <span data-ttu-id="8808f-297">В поле **Тип** введите **Azure AD B2C (id_token)**.</span><span class="sxs-lookup"><span data-stu-id="8808f-297">In the **Type** box, enter **Azure AD B2C (id_token)**.</span></span>
1. <span data-ttu-id="8808f-298">В разделе **Зависимые стороны** с выбранным выше пунктом поставщика удостоверений B2C выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="8808f-298">Under **Relying Parties**, with the above B2C identity provider item selected, do the following:</span></span>
    1. <span data-ttu-id="8808f-299">В поле **ClientID** введите код приложения B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-299">In the **ClientID** box, enter your B2C application ID.</span></span> <span data-ttu-id="8808f-300">Можно найти это в поле **Код приложения** страницы свойств приложения B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-300">You can find this in the **Application ID** box of your B2C application's properties page.</span></span>
    1. <span data-ttu-id="8808f-301">В поле **Тип** введите **Общий**.</span><span class="sxs-lookup"><span data-stu-id="8808f-301">In the **Type** box, enter **Public**.</span></span>
    1. <span data-ttu-id="8808f-302">В поле **Тип пользователя** введите **Клиент**.</span><span class="sxs-lookup"><span data-stu-id="8808f-302">In the **User Type** box, enter **Customer**.</span></span>
1. <span data-ttu-id="8808f-303">На панели операций выберите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="8808f-303">On the action pane, select **Save**.</span></span>
1. <span data-ttu-id="8808f-304">В поле поиска Commerce выполните поиск **График распределения**</span><span class="sxs-lookup"><span data-stu-id="8808f-304">In the Commerce search box, search for **Distribution schedule**</span></span>
1. <span data-ttu-id="8808f-305">В левом меню навигации на странице **Графики распределения** выберите задание **1110 Глобальная конфигурация**.</span><span class="sxs-lookup"><span data-stu-id="8808f-305">In the left navigation menu of the **Distribution schedules** page, select job **1110 Global configuration**.</span></span>
1. <span data-ttu-id="8808f-306">В области действий выберите **Выполнить сейчас**.</span><span class="sxs-lookup"><span data-stu-id="8808f-306">On the action pane, select **Run Now**.</span></span>

### <a name="obtain-issuer-url"></a><span data-ttu-id="8808f-307">Получение URL-адреса издателя</span><span class="sxs-lookup"><span data-stu-id="8808f-307">Obtain issuer URL</span></span>

<span data-ttu-id="8808f-308">Чтобы получить URL-адрес издателя поставщика удостоверений, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="8808f-308">To obtain your identity provider issuer URL, follow these steps.</span></span>
1. <span data-ttu-id="8808f-309">На странице Azure AD B2C портала Azure перейдите к потоку пользователей **Регистрация и вход**.</span><span class="sxs-lookup"><span data-stu-id="8808f-309">On the Azure AD B2C page of the Azure portal, navigate to your **Sign up and sign in** user flow.</span></span>
1. <span data-ttu-id="8808f-310">Выберите **Макеты страниц** в левом меню переходов, в разделе **Имя макета** выберите **Унифицированная страница регистрации или входа**, затем выберите **Выполнить поток пользователей**.</span><span class="sxs-lookup"><span data-stu-id="8808f-310">Select **Page layouts** in the left navigation menu, under **Layout name** select **Unified sign up or sign in page**, and then select **Run user flow**.</span></span>
1. <span data-ttu-id="8808f-311">Убедитесь, что ваше приложение настроено на требуемое приложение Azure AD B2C, созданное выше, затем выберите ссылку в заголовке **Выполнить поток пользователей**, которая включает ``.../.well-known/openid-configuration?p=<B2CSIGN-INPOLICY>``.</span><span class="sxs-lookup"><span data-stu-id="8808f-311">Make sure your application is set to your intended Azure AD B2C application created above, and then select the link under the **Run user flow** header that includes ``.../.well-known/openid-configuration?p=<B2CSIGN-INPOLICY>``.</span></span>
1. <span data-ttu-id="8808f-312">Страница метаданных отображается на вкладке обозревателя. Скопируйте URL-адрес поставщика удостоверений (значение для **"issuer"**).</span><span class="sxs-lookup"><span data-stu-id="8808f-312">A metadata page is displayed in your browser tab. Copy the identity provider issuer URL (the value for **"issuer"**).</span></span>
   - <span data-ttu-id="8808f-313">Пример: ``https://login.fabrikam.com/011115c3-0113-4f43-b5e2-df01266e24ae/v2.0/``.</span><span class="sxs-lookup"><span data-stu-id="8808f-313">Example: ``https://login.fabrikam.com/011115c3-0113-4f43-b5e2-df01266e24ae/v2.0/``.</span></span>
 
<span data-ttu-id="8808f-314">**ИЛИ**: чтобы создать тот же URL-адрес метаданных вручную, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="8808f-314">**OR**: To construct the same metadata URL manually, do the following steps.</span></span>

1. <span data-ttu-id="8808f-315">Создайте URL-адрес метаданных в следующем формате, используя клиент B2C и политику: ``https://<B2CTENANTNAME>.b2clogin.com/<B2CTENANTNAME>.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=<B2CSIGN-INPOLICY>``</span><span class="sxs-lookup"><span data-stu-id="8808f-315">Create a metadata address URL in the following format using your B2C tenant and policy: ``https://<B2CTENANTNAME>.b2clogin.com/<B2CTENANTNAME>.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=<B2CSIGN-INPOLICY>``</span></span>
    - <span data-ttu-id="8808f-316">Пример: ``https://d365plc.b2clogin.com/d365plc.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=B2C_1_signinup``.</span><span class="sxs-lookup"><span data-stu-id="8808f-316">Example: ``https://d365plc.b2clogin.com/d365plc.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=B2C_1_signinup``.</span></span>
1. <span data-ttu-id="8808f-317">Введите URL-адрес метаданных в адресную строку браузера.</span><span class="sxs-lookup"><span data-stu-id="8808f-317">Enter the metadata address URL into a browser address bar.</span></span>
1. <span data-ttu-id="8808f-318">В метаданных скопируйте URL-адрес издателя поставщика удостоверений (значение для **"издатель"**).</span><span class="sxs-lookup"><span data-stu-id="8808f-318">In the metadata, copy the identity provider issuer URL (the value for **"issuer"**).</span></span>
    - <span data-ttu-id="8808f-319">Пример: ``https://login.fabrikam.com/011115c3-0113-4f43-b5e2-df01266e24ae/v2.0/``.</span><span class="sxs-lookup"><span data-stu-id="8808f-319">Example: ``https://login.fabrikam.com/011115c3-0113-4f43-b5e2-df01266e24ae/v2.0/``.</span></span>

## <a name="configure-your-b2c-tenant-in-commerce-site-builder"></a><span data-ttu-id="8808f-320">Настройка клиента B2C в конфигураторе сайта Commerce</span><span class="sxs-lookup"><span data-stu-id="8808f-320">Configure your B2C tenant in Commerce site builder</span></span>

<span data-ttu-id="8808f-321">После завершения настройки клиента Azure AD B2C необходимо настроить клиент B2C в конфигураторе сайта Commerce.</span><span class="sxs-lookup"><span data-stu-id="8808f-321">Once setup of your Azure AD B2C tenant is completed, you must configure the B2C tenant in Commerce site builder.</span></span> <span data-ttu-id="8808f-322">Этапы настройки включают сбор информации о приложении B2C с портала Azure, ввод этих сведений о приложении B2C в конфигуратор сайта, затем связывание приложения B2C с сайтом и каналом.</span><span class="sxs-lookup"><span data-stu-id="8808f-322">Configuration steps include collecting B2C application information from the Azure portal, entering that B2C application information into site builder, and then associating the B2C application with your site and channel.</span></span>

### <a name="collect-the-required-application-information"></a><span data-ttu-id="8808f-323">Сбор необходимой информации о приложении</span><span class="sxs-lookup"><span data-stu-id="8808f-323">Collect the required application information</span></span>

<span data-ttu-id="8808f-324">Чтобы собрать необходимые сведения о приложении, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="8808f-324">To collect the required application information, follow these steps.</span></span>

1. <span data-ttu-id="8808f-325">На портале Azure перейдите к пункту **Домашняя страница \> Azure AD B2C — приложения**.</span><span class="sxs-lookup"><span data-stu-id="8808f-325">In the Azure portal, go to **Home \> Azure AD B2C - Applications**.</span></span>
1. <span data-ttu-id="8808f-326">Выберите приложение, затем в левой области навигации выберите **Свойства** для получения сведений о приложении.</span><span class="sxs-lookup"><span data-stu-id="8808f-326">Select your application, and then in the left navigation pane select **Properties** to obtain the application details.</span></span>
1. <span data-ttu-id="8808f-327">В поле **Код приложения** соберите идентификатор приложения B2C, созданный в вашем клиенте B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-327">From the **Application ID** box, collect the application ID of the B2C application created in your B2C tenant.</span></span> <span data-ttu-id="8808f-328">Впоследствии он будет введено как идентификатор **GUID клиента** в конфигураторе сайта.</span><span class="sxs-lookup"><span data-stu-id="8808f-328">This will later be entered as the **Client GUID** in site builder.</span></span>
1. <span data-ttu-id="8808f-329">В разделе **URL-адрес ответа** соберите URL-адрес ответа.</span><span class="sxs-lookup"><span data-stu-id="8808f-329">Under **Reply URL**, collect the reply URL.</span></span>
1. <span data-ttu-id="8808f-330">Перейдите в пункт **Домашняя страница \> Azure AD B2C — потоки пользователей (политики)**, затем соберите имена каждой политики потока пользователей.</span><span class="sxs-lookup"><span data-stu-id="8808f-330">Go to **Home \> Azure AD B2C – User flows (policies)**, and then collect the names of each user flow policy.</span></span>

<span data-ttu-id="8808f-331">На следующем рисунке показан пример страницы **Azure AD B2C — приложения**.</span><span class="sxs-lookup"><span data-stu-id="8808f-331">The following image shows an example of the **Azure AD B2C - Applications** page.</span></span>

![Перейдите к приложению B2C в своем клиенте](./media/B2CImage_19.png)

<span data-ttu-id="8808f-333">На следующем рисунке показан пример страницы **Свойства** приложения в Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-333">The following image shows an example of an application **Properties** page in Azure AD B2C.</span></span> 

![Копирование кода приложения из свойств приложения B2C](./media/B2CImage_21.png)

<span data-ttu-id="8808f-335">На следующем рисунке показан пример политик потока пользователей на странице **Azure AD B2C — потоки пользователей (политики)**.</span><span class="sxs-lookup"><span data-stu-id="8808f-335">The following image shows an example of user flow policies on the **Azure AD B2C – User flows (policies)** page.</span></span>

![Сбор имен каждого потока политик B2C](./media/B2CImage_22.png)

### <a name="enter-your-aad-b2c-tenant-application-information-into-commerce"></a><span data-ttu-id="8808f-337">Ввод данных приложения клиента AAD B2C в Commerce</span><span class="sxs-lookup"><span data-stu-id="8808f-337">Enter your AAD B2C tenant application information into Commerce</span></span>

<span data-ttu-id="8808f-338">Перед сопоставлением клиента B2C с вашими сайтами необходимо ввести сведения о клиенте Azure AD B2C в конфигураторе сайта Commerce.</span><span class="sxs-lookup"><span data-stu-id="8808f-338">You must enter details of the Azure AD B2C tenant into Commerce site builder before associating the B2C tenant with your site(s).</span></span>

<span data-ttu-id="8808f-339">Чтобы добавить данные приложения клиента AAD B2C в Commerce, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="8808f-339">To add your AAD B2C tenant application information to Commerce, follow these steps.</span></span>

1. <span data-ttu-id="8808f-340">Войдите в систему в качестве администратора конфигуратора сайта Commerce для вашей среды.</span><span class="sxs-lookup"><span data-stu-id="8808f-340">Sign in as an administrator to Commerce site builder for your environment.</span></span>
1. <span data-ttu-id="8808f-341">На левом панели навигации выберите **Настройки клиента**, чтобы развернуть их.</span><span class="sxs-lookup"><span data-stu-id="8808f-341">In the left navigation pane, select **Tenant Settings**  to expand it.</span></span>
1. <span data-ttu-id="8808f-342">В поле **Настройки клиента** выберите **Параметры B2C**.</span><span class="sxs-lookup"><span data-stu-id="8808f-342">Under **Tenant Settings**, select **B2C Settings**.</span></span> 
1. <span data-ttu-id="8808f-343">В главном окне рядом с пунктом **Приложения B2C** выберите **Управление**.</span><span class="sxs-lookup"><span data-stu-id="8808f-343">In the main window next **B2C Applications**, select **Manage**.</span></span> <span data-ttu-id="8808f-344">(Если клиент отображается в списке приложений B2C, то он уже добавлен администратором.</span><span class="sxs-lookup"><span data-stu-id="8808f-344">(If your tenant appears in the B2C Applications list, then it was already added by an administrator.</span></span> <span data-ttu-id="8808f-345">Убедитесь, что элементы на шаге 6 ниже соответствуют вашему приложению B2C.)</span><span class="sxs-lookup"><span data-stu-id="8808f-345">Verify that the items in step 6 below match your B2C Application.)</span></span>
1. <span data-ttu-id="8808f-346">Выберите пункт **Добавить приложение B2C**.</span><span class="sxs-lookup"><span data-stu-id="8808f-346">Select **Add B2C Application**.</span></span>
1. <span data-ttu-id="8808f-347">Введите следующие необходимые пункты в отображаемой форме, используя значения из клиента B2C и приложения.</span><span class="sxs-lookup"><span data-stu-id="8808f-347">Enter the following required items in the form displayed, using values from your B2C tenant and application.</span></span> <span data-ttu-id="8808f-348">Поля, которые не являются обязательными (без звездочки), могут быть оставлены пустыми.</span><span class="sxs-lookup"><span data-stu-id="8808f-348">Fields that are not required (those without an asterisk) may be left blank.</span></span>

    - <span data-ttu-id="8808f-349">**Имя приложения**: имя вашего приложения B2C, например "Fabrikam B2C".</span><span class="sxs-lookup"><span data-stu-id="8808f-349">**Application Name**: The name for your B2C Application, for example "Fabrikam B2C".</span></span>
    - <span data-ttu-id="8808f-350">**Имя клиента**: имя вашего B2C-клиента (например, "Fabrikam", если домен отображается как "fabrikam.onmicrosoft.com" для клиента B2C).</span><span class="sxs-lookup"><span data-stu-id="8808f-350">**Tenant Name**: The name of your B2C tenant (for example, use "fabrikam" if the domain appears as "fabrikam.onmicrosoft.com" for the B2C tenant).</span></span> 
    - <span data-ttu-id="8808f-351">**Код политики сброса пароля**: идентификатор политики потока пользователей для сброса пароля, например "B2C_1_PasswordReset".</span><span class="sxs-lookup"><span data-stu-id="8808f-351">**Forget Password Policy ID**: The forget password user flow policy ID, for example "B2C_1_PasswordReset".</span></span>
    - <span data-ttu-id="8808f-352">**Идентификатор политики регистрации или входа**: идентификатор политики потока пользователей для входа и регистрации, например "B2C_1_signup_signin".</span><span class="sxs-lookup"><span data-stu-id="8808f-352">**Signup Signin Policy ID**: The sign up and sign in user flow policy ID, for example "B2C_1_signup_signin".</span></span>
    - <span data-ttu-id="8808f-353">**Идентификатор GUID клиента**: идентификатор приложения B2C, например "22290eb2-c52e-42e9-8b35-a2b0a3bcb9e6".</span><span class="sxs-lookup"><span data-stu-id="8808f-353">**Client GUID**: The B2C application ID, for example "22290eb2-c52e-42e9-8b35-a2b0a3bcb9e6".</span></span>
    - <span data-ttu-id="8808f-354">**Идентификатор политики изменения профиля**: идентификатор политики потока пользователя для редактирования профиля, например "B2C_1A_ProfileEdit".</span><span class="sxs-lookup"><span data-stu-id="8808f-354">**Edit Profile Policy ID**: The profile editing user flow policy ID, for example "B2C_1A_ProfileEdit".</span></span>

1. <span data-ttu-id="8808f-355">Нажмите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="8808f-355">Select **OK**.</span></span> <span data-ttu-id="8808f-356">Теперь в списке должно отображаться имя приложения B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-356">You should now see the name of your B2C application appear in the list.</span></span>
1. <span data-ttu-id="8808f-357">Выберите **Сохранить** для сохранения изменений.</span><span class="sxs-lookup"><span data-stu-id="8808f-357">Select **Save** to save your changes.</span></span>

### <a name="associate-the-b2c-application-to-your-site-and-channel"></a><span data-ttu-id="8808f-358">Связь приложения B2C с сайтом и каналом</span><span class="sxs-lookup"><span data-stu-id="8808f-358">Associate the B2C application to your site and channel</span></span>

> [!WARNING]
> <span data-ttu-id="8808f-359">Если сайт уже связан с приложением B2C, при переходе к другому приложению B2C будут удалены текущие ссылки, установленные для пользователей, уже зарегистрированных в этой среде.</span><span class="sxs-lookup"><span data-stu-id="8808f-359">If your site is already associated with a B2C application, changing to a different B2C application will remove the current references established for users already signed up in this environment.</span></span> <span data-ttu-id="8808f-360">При изменении все учетные данные, связанные с назначенным в данный момент приложением B2C, будут недоступны пользователям.</span><span class="sxs-lookup"><span data-stu-id="8808f-360">If changed, any credentials associated with the currently-assigned B2C application will not be available to users.</span></span> 
> 
> <span data-ttu-id="8808f-361">Обновляйте приложение B2C только в том случае, если выполняется первая настройка приложения B2C канала или если требуется, чтобы пользователи повторно зарегистрировались с новыми учетными данными в этом канале с новым приложением B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-361">Only update the B2C application if you are setting up the channel's B2C application for the first time or if you intend to have users re-sign up with new credentials to this channel with the new B2C application.</span></span> <span data-ttu-id="8808f-362">Соблюдайте осторожность при связывании каналов с приложениями B2C и давайте приложениям понятные названия.</span><span class="sxs-lookup"><span data-stu-id="8808f-362">Take caution when associating channels to B2C applications, and name applications clearly.</span></span> <span data-ttu-id="8808f-363">Если канал не связан с приложением B2C в приведенных ниже шагах, пользователи, вошедшие в этот канал для вашего сайта, будут входить в приложение B2C, которое отображается как **по умолчанию** в списке **Параметры клиента \> Параметры B2C** приложений B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-363">If a channel is not associated to a B2C application in the steps below, users signing into that channel for your site will be entered into the B2C application showing as **default** in the **Tenant Settings \> B2C Settings** list of B2C applications.</span></span>

<span data-ttu-id="8808f-364">Чтобы связать приложение B2C с сайтом и каналом, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="8808f-364">To associate the B2C application to your site and channel, follow these steps.</span></span>

1. <span data-ttu-id="8808f-365">Перейдите на свой сайт в конфигураторе сайта Commerce.</span><span class="sxs-lookup"><span data-stu-id="8808f-365">Navigate to your site in Commerce site builder.</span></span>
1. <span data-ttu-id="8808f-366">На левом панели навигации выберите **Настройки сайта**, чтобы развернуть.</span><span class="sxs-lookup"><span data-stu-id="8808f-366">In the left navigation pane, select **Site Settings** to expand it.</span></span>
1. <span data-ttu-id="8808f-367">В разделе **Параметры сайта** выберите **Каналы**.</span><span class="sxs-lookup"><span data-stu-id="8808f-367">Below **Site Settings**, select **Channels**.</span></span>
1. <span data-ttu-id="8808f-368">В главном окне в разделе **Каналы** выберите свой канал.</span><span class="sxs-lookup"><span data-stu-id="8808f-368">In the main window under **Channels**, select your channel.</span></span>
1. <span data-ttu-id="8808f-369">В правой панели свойств канала выберите имя приложения B2C в раскрывающемся меню **Выбор приложения B2C**.</span><span class="sxs-lookup"><span data-stu-id="8808f-369">In the channel properties pane on the right, select your B2C application name from the **Select B2C Application** drop down menu.</span></span>
1. <span data-ttu-id="8808f-370">Выберите **Закрыть**, затем выберите **Сохранить и опубликовать**.</span><span class="sxs-lookup"><span data-stu-id="8808f-370">Select **Close**, and then select **Save and Publish**.</span></span>

## <a name="additional-b2c-information"></a><span data-ttu-id="8808f-371">Дополнительные сведения B2C</span><span class="sxs-lookup"><span data-stu-id="8808f-371">Additional B2C information</span></span>

### <a name="customer-migration"></a><span data-ttu-id="8808f-372">Миграция клиентов</span><span class="sxs-lookup"><span data-stu-id="8808f-372">Customer migration</span></span>

<span data-ttu-id="8808f-373">Если вы собираетесь выполнить миграцию записей клиентов из предыдущей платформы поставщика удостоверений, работайте с рабочей группой Dynamics 365 Commerce, чтобы проверить свои потребности по миграции клиентов.</span><span class="sxs-lookup"><span data-stu-id="8808f-373">If you are considering migrating customer records from a previous identity provider platform, please work with the Dynamics 365 Commerce team to review your customer migration needs.</span></span>

<span data-ttu-id="8808f-374">Дополнительную документацию Azure AD B2C по миграции клиентов см. в разделе [Миграция пользователей в Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-user-migration).</span><span class="sxs-lookup"><span data-stu-id="8808f-374">For additional Azure AD B2C documentation on customer migration, see [Migrate users to Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-user-migration).</span></span>

### <a name="custom-policies"></a><span data-ttu-id="8808f-375">Пользовательские политики</span><span class="sxs-lookup"><span data-stu-id="8808f-375">Custom policies</span></span>

<span data-ttu-id="8808f-376">Дополнительные сведения о настройке взаимодействий Azure AD B2C и лежащих в основе потоках политик, предлагаемых стандартными политиками B2C, см. раздел [Пользовательские политики в Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-overview-custom).</span><span class="sxs-lookup"><span data-stu-id="8808f-376">For additional information regarding customizing Azure AD B2C interactions and policy flows beyond what is offered by B2C standard policies, see [Custom policies in Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-overview-custom).</span></span> 

### <a name="secondary-admin"></a><span data-ttu-id="8808f-377">Дополнительный администратор</span><span class="sxs-lookup"><span data-stu-id="8808f-377">Secondary admin</span></span>

<span data-ttu-id="8808f-378">При необходимости учетная запись дополнительного администратора может быть добавлена в разделе **Пользователи** вашего клиента B2C.</span><span class="sxs-lookup"><span data-stu-id="8808f-378">An optional, secondary administrator account can be added in the **Users** section of your B2C tenant.</span></span> <span data-ttu-id="8808f-379">Это может быть прямая учетная запись или общая учетная запись.</span><span class="sxs-lookup"><span data-stu-id="8808f-379">This can be a direct account or a general account.</span></span> <span data-ttu-id="8808f-380">Если необходимо сделать учетную запись общей для нескольких ресурсов группы, также может быть создана общая учетная запись.</span><span class="sxs-lookup"><span data-stu-id="8808f-380">If you need to share an account across team resources, a common account can also be created.</span></span> <span data-ttu-id="8808f-381">В связи с чувствительностью данных, хранящихся в Azure AD B2C, следует внимательно отслеживать общую учетную запись в соответствии с политиками безопасности компании.</span><span class="sxs-lookup"><span data-stu-id="8808f-381">Due to the sensitivity of the data stored in Azure AD B2C, a common account should be monitored closely per your company's security practices.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="8808f-382">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="8808f-382">Additional resources</span></span>

[<span data-ttu-id="8808f-383">Настройка доменного имени</span><span class="sxs-lookup"><span data-stu-id="8808f-383">Configure your domain name</span></span>](configure-your-domain-name.md)

[<span data-ttu-id="8808f-384">Развертывание нового клиента электронной коммерции</span><span class="sxs-lookup"><span data-stu-id="8808f-384">Deploy a new e-commerce tenant</span></span>](deploy-ecommerce-site.md)

[<span data-ttu-id="8808f-385">Создание сайта электронной коммерции</span><span class="sxs-lookup"><span data-stu-id="8808f-385">Create an e-commerce site</span></span>](create-ecommerce-site.md)

[<span data-ttu-id="8808f-386">Связывание сайта Dynamics 365 Commerce с интернет-каналом</span><span class="sxs-lookup"><span data-stu-id="8808f-386">Associate a Dynamics 365 Commerce site with an online channel</span></span>](associate-site-online-store.md)

[<span data-ttu-id="8808f-387">Управление файлами robots.txt</span><span class="sxs-lookup"><span data-stu-id="8808f-387">Manage robots.txt files</span></span>](manage-robots-txt-files.md)

[<span data-ttu-id="8808f-388">Пакетная отправка перенаправлений URL-адресов</span><span class="sxs-lookup"><span data-stu-id="8808f-388">Upload URL redirects in bulk</span></span>](upload-bulk-redirects.md)

[<span data-ttu-id="8808f-389">Настройка специальных страниц для входа пользователей</span><span class="sxs-lookup"><span data-stu-id="8808f-389">Set up custom pages for user logins</span></span>](custom-pages-user-logins.md)

[<span data-ttu-id="8808f-390">Настройка нескольких клиентов B2C в среде Commerce</span><span class="sxs-lookup"><span data-stu-id="8808f-390">Configure multiple B2C tenants in a Commerce environment</span></span>](configure-multi-B2C-tenants.md)

[<span data-ttu-id="8808f-391">Добавление поддержки сети доставки контента (CDN)</span><span class="sxs-lookup"><span data-stu-id="8808f-391">Add support for a content delivery network (CDN)</span></span>](add-cdn-support.md)

[<span data-ttu-id="8808f-392">Включение обнаружения магазинов на основе местоположения</span><span class="sxs-lookup"><span data-stu-id="8808f-392">Enable location-based store detection</span></span>](enable-store-detection.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
