---
title: Заказы клиентов в POS-терминале
description: В этом разделе представлена информация о заказах клиентов в POS-терминале. Заказы клиентов также называются специальными заказами. Раздел включает в себя обсуждение связанных параметров и потоков проводки.
author: josaw1
ms.date: 01/06/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: RetailFunctionalityProfile
audience: Application User
ms.reviewer: josaw
ms.custom:
- "260594"
- intro-internal
ms.assetid: 6fc835ef-d62e-4f23-9d49-50299be642ca
ms.search.region: global
ms.search.industry: Retail
ms.author: anpurush
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: Release 10.0.14
ms.openlocfilehash: 679c8d7895ac82236c12732e1080529f44231947
ms.sourcegitcommit: c08a9d19eed1df03f32442ddb65a2adf1473d3b6
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/06/2021
ms.locfileid: "6349634"
---
# <a name="customer-orders-in-point-of-sale-pos"></a>Заказы клиентов в POS-терминале

[!include [banner](includes/banner.md)]

В этом разделе представлена информация о том, как создавать заказы клиентов и как управлять ими в POS-терминале. Заказы клиентов могут использоваться для сбора данных о продажах, в которых покупатели хотят скомплектовать продукты на более позднюю дату, скомплектовать продукты из других местоположений или заказать доставку номенклатур им. 

В мире многоканальной торговли многие компании розничной торговли предоставляют возможность заказов клиента или специальных заказов для удовлетворения требований разных продуктов и требований выполнения. Вот некоторые типовые сценарии:

- Клиент хочет, чтобы продукты были доставлены по определенному адресу на определенную дату.
- Клиент хочет забрать продукты из магазина или местоположения, отличных от магазина или местоположения, где клиент приобрел эти продукты.
- Клиент в местоположении магазина хочет заказать продукты сегодня и скомплектовать их из того же местоположения магазина в более позднюю дату.

Предприятия розничной торговли могут использовать заказы клиентов для уменьшения упущенных продаж, которые в противном случае могли бы возникнуть из-за отсутствия запасов на складе, поскольку товар может быть доставлен или получен в другое время или в другом месте.

## <a name="set-up-customer-orders"></a>Настройка заказов клиентов
Прежде чем пытаться использовать функциональность заказов клиентов в POS-терминале, убедитесь, что все требуемые конфигурации в Commerce Headquarters выполнены/

### <a name="configure-modes-of-delivery"></a>Настройка режимов доставки

Для использования заказов клиентов необходимо настроить способы доставки, которые может использовать канал магазина. Необходимо определить по крайней мере один способ доставки, который может использоваться, когда строки заказа отгружаются клиенту из магазина. Необходимо также определить по крайней мере один способ самовывоза, который может использоваться, когда строки заказа забираются из магазина. Способы доставки определяются на странице **Способы доставки** в модуле Commerce Headquarters. Подробные сведения о настройке режимов доставки для каналов Commerce см. в разделе [Определение способов доставки](./configure-call-center-delivery.md#define-delivery-modes).

![Страница способов доставки.](media/customer-order-modes-of-delivery.png)


### <a name="set-up-fulfillment-groups"></a>Настройка групп выполнения

Некоторые магазины или местоположения склада могут быть не в состоянии выполнить заказы клиентов. Настроив группы выполнения, организация может указать, какие магазины и местоположения склада отображаются в качестве параметров для пользователей, создающих заказы клиентов в POS-терминале. Группы выполнения настраиваются на странице **Группы выполнения**. Организации могут создавать столько групп выполнения, сколько требуется. После того как группа выполнения определена, свяжите ее с магазином, выбрав **Назначение группы выполнения** на вкладке **Настройка** в области действия на странице **Магазины**.

В Commerce версии 10.0.12 и более поздних организации могут определить, могут ли комбинации складов или складов и магазинов, которые определены в группах выполнения, использоваться для отгрузки, для отправки или как для отгрузки, так и для самовывоза. Это позволяет повысить гибкость бизнеса, чтобы определить, какие склады могут выбираться при создании заказа клиента для отгрузки номенклатуры и какие магазины могут выбираться при создании заказа клиента для номенклатур, которые требуется забрать. Чтобы использовать эти параметры конфигурации, включите функцию **Возможность указывать местоположения как "Отгрузка" или "Самовывоз" включена в рамках группы выполнения**. Если склад, связанный с группой выполнения, не является магазином, он может быть сконфигурирован только в качестве места отгрузки. Он не может использоваться, когда заказы для самовывоза настраиваются в POS-терминале.

![Страница групп выполнения.](media/customer-order-fulfillment-group.png)

### <a name="configure-channel-settings"></a>Настройка параметров канала

При работе с заказами клиентов в POS-терминале следует учитывать некоторые настройки канала магазина. Эти параметры находятся на странице **Магазины** в Commerce Headquarters.

- **Склад** — это поле указывает склад, который будет использоваться при уменьшении запасов для заказов с продажей за наличный расчет без доставки и заказов с получением клиентом, привязанных к этому магазину. Рекомендуется использовать уникальные склады для каждого канала магазина, чтобы не допустить возникновения конфликтов с бизнес-логикой в магазинах.
- **Склад отгрузки** — это поле указывает склад, который будет использоваться при уменьшении запасов для заказов клиентов, которые должны быть отгружены из выбранного магазина. Если функция **Возможность указывать местоположения как "Отгрузка" или "Самовывоз" включена в группе выполнения** была включена в вашей среде, пользователи POS-терминала могут выбрать конкретный склад для отгрузки в POS-терминале вместо выбора магазина для отгрузки. Таким образом, если эта функция включена, склад отгрузки больше не используется, так как при создании заказа пользователь будет выбирать конкретный склад для отгрузки заказа.
- **Назначение групп выполнения** — нажмите эту кнопку (на вкладке **Настройка** в области действий), чтобы связать группы выполнения, на которые имеются ссылки, чтобы показать параметры для местоположений самовывоза или происхождений отгрузки, когда заказы клиентов создаются в POS-терминале.
- **Использовать налог на основе места назначения** — этот параметр указывает, используется ли адрес отгрузки, чтобы определить налоговую группу, которая применяется к строкам заказов, отгруженным в адрес клиента.
- **Использовать налог на основе клиента** — этот параметр указывает, используется ли налоговая группа, определенная для адреса доставки клиента, для расчета налога с заказов клиента, созданных в POS-терминале для отгрузки на домашний адрес клиента.

![Настройка канала магазина на странице "Магазины".](media/customer-order-all-stores.png)

### <a name="set-up-customer-order-parameters"></a>Настройка параметров заказов клиентов

Прежде чем пытаться создать заказы клиентов в POS-терминале, необходимо настроить соответствующие параметры в Commerce Headquarters. Эти параметры можно найти на вкладке **Заказы клиентов** на странице **Параметры Commerce**.

- **Тип заказа по умолчанию** — можно указать тип заказа, который по умолчанию назначается заказам клиентов, созданным в POS-терминале. Эти заказы клиентов могут быть либо заказами на продажу, либо заказами с предложениями с расценками. Независимо от типа заказа по умолчанию пользователи по-прежнему могут создавать как заказы на продажу, так и заказы клиентов с POS-терминала.
- **Процент депозита по умолчанию** — укажите процент от общей суммы заказа, которую клиент должен заплатить как депозит, чтобы заказ мог быть подтвержден. В зависимости от своих привилегий, продавцы-консультанты могут переопределить сумму, используя операцию **Переопределение депозита** в POS-терминале, если эта операция настроена для макета экрана проводки.
- **Способ доставки для самовывоза** — указывается способ доставки, который должен применяться к строкам заказов на продажу, настроенным для самовывоза в POS-терминале.
- **Способ доставки для продажи на вынос** — указывается способ доставки, который должен применяться к строкам заказа на продажу, которые считаются строками заказа на покупку на вынос, когда создается смешанная корзина, в которой некоторые строки могут быть забраны самовывозом или отгружены, а некоторые строки клиент сразу же заберет с собой.
- **Процент сбора за аннулирование** — если при отмене заказа клиента должен взиматься сбор, укажите сумму такого сбора.
- **Код сбора за отмену** — укажите код накладных расходов по расчетам с клиентами, который должен использоваться, когда сбор а отмену применяются к отмененным заказам клиентов через POS-терминал. Код накладных расходов определяет логику финансовой разноски для сбора за отмену.
- **Код накладных расходов за отгрузку** — если параметр **Использовать расширенные автоматические накладные расходы** имеет значение **Да**, этот параметр не действует. Если этот параметр имеет значение **Нет**, пользователям будет предложено ввести вручную накладные расходы на доставку при создании заказов клиентов в POS-терминале. Этот параметр используется для сопоставления кода накладных расходов по расчетам с клиентами, который будут применяться к заказам, когда пользователи вводят накладные расходы на отгрузку. Код накладных расходов определяет логику финансовой разноски для накладных расходов за отгрузку.
- **Использовать расширенные автоматические накладные расходы** — установите для этого параметра значение **Да**, чтобы использовать автоматические накладные расходы, рассчитанные системой, когда заказы клиентов создаются в POS-терминале. Эти автоматические накладные расходы могут использоваться для расчета сборов за доставку или других накладных расходов, связанных с заказами или конкретными номенклатурами. Дополнительные сведения о порядке настройки и использования расширенных автоматических накладных расходов см. в разделе [Многоканальные расширенные автоматические накладные расходы](./omni-auto-charges.md).

![Вкладка заказов клиентов на странице параметров Commerce.](media/customer-order-parameters.png)

### <a name="update-transaction-screen-layouts-in-pos"></a>Обновление макетов экрана проводок в POS-терминале

Убедитесь, что [макет экрана](./pos-screen-layouts.md) POS-терминала настроен для поддержки создания и управления заказами клиентов, и настроены все необходимые операции POS-терминала. Ниже приведены некоторые операции POS-терминала, рекомендованные для правильной поддержки создания и управления заказами клиентов:
- **Отгрузка всех продуктов** — эта операция используется, чтобы указать, что все строки в корзине проводки будут отгружены в пункт назначения.
- **Отгрузка выбранных продуктов** — эта операция используется, чтобы указать, что выбранные строки в корзине проводки будут отгружены в пункт назначения.
- **Самовывоз всех продуктов** — эта операция используется, чтобы указать, что все строки в корзине проводки будут получены самовывозом в выбранном местоположении магазина.
- **Самовывоз выбранных продуктов** — эта операция используется, чтобы указать, что выбранные строки в корзине проводки будут получены самовывозом в выбранном местоположении магазина.
- **Немедленное получение всех продуктов** — эта операция используется, чтобы указать, что покупатель сразу же заберет все строки в корзине проводки. Если эта операция используется в POS-терминале, заказ клиента будет преобразован в проводку "заплатил и забрал".
- **Немедленное получение выбранных продуктов** — эта операция используется, чтобы указать, что покупатель заберет выбранные строки в корзине проводки в момент покупки. Эта операция полезна только в случае [гибридного заказа](./hybrid-customer-orders.md).
- **Повторно вызвать заказ** — эта операция используется для поиска и извлечения заказов клиентов, чтобы пользователи POS-терминала могли изменить, отменить или выполнить в них требуемые операции, связанные с выполнением.
- **Изменение способа доставки** — эта операция может использоваться для быстрого изменения способа доставки для строк, уже настроенных для отгрузки, без необходимости пользователям повторно выполнять поток "Отгрузка всех продуктов" или "Отгрузка выбранных продуктов".
- **Переопределение депозита** — эта операция может использоваться для изменения суммы депозита, которую клиент будет платить за выбранный заказ клиента.

![Операции на экране POS-проводок.](media/customer-order-screen-layout.png)

## <a name="work-with-customer-orders-in-pos"></a>Работа с заказами клиентов в POS-терминале

> [!NOTE]
> Функции распознавания выручки в настоящее время не поддерживаются для использования в каналах Commerce (электронная коммерция, POS, центр обработки вызовов). Номенклатуры, для которых задано распознавание выручки, не следует добавлять в заказы, созданные в каналах Commerce. 

### <a name="create-a-customer-order-for-products-that-will-be-shipped-to-the-customer"></a>Создание заказа клиента для продуктов, которые будут отгружены клиенту

1. На экране POS-проводки добавьте клиента в проводку.
2. Добавить продукты в корзину.
3. Выберите **Отгрузить выбранное** или **Отгрузить все**, чтобы отгрузить продукты по адресу, указанному в учетной записи клиента.
4. Выберите параметр для создания заказа клиента.
5. Подтвердите или измените "место отгрузки", подтвердите или измените адрес доставки и выберите способ отгрузки.
6. Введите дату желаемого отгрузки для заказа клиента.
7. Используйте функции платежа для оплаты всех причитающихся рассчитанных сумм или используйте операцию **Переопределение депозита** для изменения сумм, подлежащих оплате, затем примените платеж.
8. Если полный итог по заказу не оплачен, введите кредитную карту, которая будет использована для сальдо, которое должно быть оплачено по заказу, когда по нему будет выставлен счет.

### <a name="create-a-customer-order-for-products-that-the-customer-will-pick-up"></a>Создание заказа клиента для продуктов, которые клиент заберет самовывозом

1. На экране POS-проводки добавьте клиента в проводку.
2. Добавить продукты в корзину.
3. Выберите **Самовывоз выбранного** или **Самовывоз всего**, чтобы начать настройку самовывоза заказа.
4. Выберите местоположение магазина, из которого клиент заберет выбранные продукты самовывозом.
5. Выберите дату, когда номенклатура будет получена самовывозом.
6. Используйте функции платежа для оплаты всех причитающихся рассчитанных сумм или используйте операцию **Переопределение депозита** для изменения сумм, подлежащих оплате, затем примените платеж.
7. Если полный итог по заказу не был оплачен, выберите, будет ли клиент производить платеж позже (при самовывозе), или будет ли сейчас токенизирована кредитная карта, чтобы затем ее можно было использовать и отслеживать во время самовывоза.

### <a name="edit-an-existing-customer-order"></a>Изменение существующего заказа клиента

Розничные заказы, созданные в Интернет-канале или в канале магазина, могут быть вызваны и отредактированы в POS-терминале, как требуется.

> [!IMPORTANT]
> Не все розничные заказы могут редактироваться в приложении POS-терминала. Заказы, созданные в канале центра обработки вызовов, невозможно изменить через POS-терминал, если для канала центра обработки вызовов включен параметр [Включить завершение заказа](./set-up-order-processing-options.md#enable-order-completion). Чтобы обеспечить правильную обработку платежей, заказы, созданные в канале центра обработки звонков и использующие функцию "Включить завершение заказов", должны быть отредактированы в приложении "Центр обработки вызовов" в Commerce Headquarters.

В версии 10.0.17 и более поздних пользователи могут редактировать соответствующие заказы в приложении POS, даже если заказ выполнен частично. Однако заказы, по которым полностью выставлены счета, по-прежнему не могут редактироваться в POS-терминале. Чтобы включить эту возможность, включите функцию **Правка частично выполненных заказов в POS-терминале** в рабочей области **Управление функциями**. Если эта функция не активирована или если используется версия 10.0.16 или более ранняя, пользователи смогут редактировать только заказы клиентов в POS-терминале только в том случае, если заказ полностью открыт. Кроме того, если функция включена, можно ограничить, какие магазины могут редактировать частично выполненные заказы. Возможность отключить эту возможность для некоторых магазинов может быть настроена через **Профиль функциональности** на вкладке **Общие**.


1. Выберите **Повторно вызвать заказ**.
2. Используйте **Поиск** для ввода фильтров для поиска заказа, затем выберите **Применить**.
3. Выберите заказ в списке результатов, затем выберите **Правка**. Если кнопка **Правка** недоступна, заказ находится в состоянии, в котором его нельзя изменить.
4. В корзине проводки внесите все необходимые изменения в заказ клиента. Некоторые изменения могут быть запрещены во время редактирования.
5. Завершите процесс редактирования, выбрав операцию платежа.
6. Чтобы выйти из процесса редактирования без сохранения изменений, можно использовать операцию **Аннулировать проводку**.



### <a name="cancel-a-customer-order"></a>Отмена заказа клиента

1. Выберите **Повторно вызвать заказ**.
2. Используйте **Поиск** для ввода фильтров для поиска заказа, затем выберите **Применить**.
3. Выберите заказ в списке результатов, затем выберите **Отмена**. Если кнопка **Отмена** недоступна, заказ находится в состоянии, в котором его больше нельзя отменить.
4. Если настроены сборы на отмену, подтвердите их. Накладные расходы за отмену можно откорректировать до их подтверждения в случае необходимости. 
5. Из корзины проводок завершите процесс отмены, выбрав операцию платежа. Если депозиты, которые были оплачены, превышают накладные расходы за отмену, могут требоваться платежи по возврату денежных средств.
6. Чтобы выйти из процесса отмены без сохранения изменений, можно использовать операцию **Аннулировать проводку**.

## <a name="finalizing-the-customer-order-shipment-or-pickup-from-pos"></a>Завершение отгрузки или самовывоза по заказу клиента с POS-терминала

После создания заказа номенклатуры будут получены клиентом из местоположения магазина или отгружены, в зависимости от конфигурации заказа. Дополнительные сведения об этом процессе см. в документации по [выполнению заказов в магазине](./order-fulfillment-overview.md).

## <a name="asynchronous-transaction-flow-for-customer-orders"></a>Порядок асинхронной проводки для клиентских заказов

Клиентские заказы можно создавать в POS-терминале в синхронном или асинхронном режиме. Если вы заметили, что при создании заказов клиентов в POS-терминале возникают проблемы с производительностью или задержки пользователей, рассмотрите возможность включения асинхронного создания заказов.

### <a name="enable-customer-orders-to-be-created-in-asynchronous-mode"></a>Включение возможности создания заказов клиентов в асинхронном режиме

1. В Commerce Headquarters на странице **Профили функциональности** выберите профиль функциональности, соответствующий магазину, который требуется настроить.
2. На экспресс-вкладке **Общие** задайте для параметра **Создать клиентский заказ в асинхронном режиме** значение **Да**.

Если для параметра **Создать клиентский заказ в асинхронном режиме** задано значение **Да**, клиентские заказы всегда создаются в асинхронном режиме, даже когда служба Retail Transaction Service (RTS) доступна. Если для этого параметра задано значение **Нет**, клиентские заказы всегда создаются в синхронном режиме с помощью службы RTS. Когда заказы клиентов создаются в асинхронном режиме, они извлекаются и создаются в качестве проводок розничной торговли в Commerce Headquarters из заданий Commerce Pull (P). Соответствующие заказы на продажу для транзакций розничной торговли создаются при выполнении команды **Синхронизация заказов** либо вручную, либо с помощью пакетной обработки.

## <a name="additional-resources"></a>Дополнительные ресурсы

[Гибридные клиентские заказы](hybrid-customer-orders.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]