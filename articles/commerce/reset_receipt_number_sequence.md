---
title: Сброс номеров чеков
description: В этом разделе описывается, как сбросить номера чеков, которые используются для различных действий, на желаемую дату (например, финансовый год или календарный год).
author: ShalabhjainMSFT
ms.date: 10/06/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: josaw
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: Retail, Commerce
ms.author: asharchw
ms.search.validFrom: 2020-01-14
ms.dyn365.ops.version: Application update 10.0.9
ms.openlocfilehash: cabce32a43e55f3a3f19bc2d78547d9bab0d89a2
ms.sourcegitcommit: 3cdc42346bb653c13ab33a7142dbb7969f1f6dda
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/31/2021
ms.locfileid: "5792057"
---
# <a name="reset-receipt-numbers"></a>Сброс номеров чеков 

[!include [banner](includes/banner.md)]

> [!NOTE]
> Перед использованием этой функции требуется выбрать свойство **Независимая последовательность** для всех типов чеков в профиле функциональности. Кроме того, системный часовой пояс устройства, в котором используется POS-терминал, должен соответствовать соответствующему часовому поясу магазина. В связи с этими ограничениями не рекомендует использовать эту функцию в производстве, пока мы работаем над устранением этих проблем в будущих выпусках. 

Розничные продавцы формируют номера чеков для различных действий в магазине, таких как наличные деньги и выполнение проводок, проводки возврата, заказы клиентов, предложения и платежи. Хотя розничные продавцы задают собственные форматы чеков, в некоторых странах и регионах действуют ограничения на эти форматы чеков. Например, такие постановления могут ограничивать количество символов в чеке, требовать последовательных номеров чеков, ограничивать специальные символы или требовать сброса номеров чеков в начале года. Microsoft Dynamics 365 Commerce делает процесс управления номерами чеков очень гибким, чтобы помочь продавцам обеспечить соответствие нормативным требованиям. В этой теме объясняется, как использовать функции для сброса номеров чека.

В Commerce форматы чеков могут быть буквенно-цифровыми. В них можно поместить как статическое, так и динамическое содержимое. Статическое содержимое включает алфавитные символы, цифры и специальные символы. Динамическое содержимое включает один или несколько символов, представляющих такие сведения, как номер магазина, номер терминала, дата, месяц, год и номерные серии, которые автоматически увеличиваются. Эти форматы определяются в разделе **Нумерация чеков** в профиле функциональности. В следующей таблице описаны символы, которые представляют динамическое содержимое.

| Символы | Описание |
|------------|-------------|
| С          | Символ **S** используется для номера магазина. Например, если у магазина номер HOUSTON1, в формате **SSS** на чеке отображается "ON1". В формате **SSSSS** в чеке отображается "STON1". |
| T          | Символ **T** используется для номера терминала. Например, если у терминала номер 0001, в формате **TTTT** на чеке отображается "0001". |
| К          | Символ **C** используется для номера кода сотрудника. Например, если у сотрудника имеет код 000160, в формате **CCCC** на чеке отображается "0160". |
| ddd        | Символы **ddd** соответствуют дню года в интервале от 1 до 366. Например, 15 января в формат **ddd** показано как "015" в чеке. |
| MM         | Символы **MM** используются для обозначения месяца и состоят из двух цифр. Например, январь в формате **MM** показан как "01" в чеке. |
| DD         | Символы **DD** используются для обозначения дня месяца и состоят из двух цифр. Например, 15 января в формате **DD** показано как "15" в чеке. |
| YY         | Символы **YY** используются для обозначения года и состоят из двух цифр. Например, для любого месяца в году 2020 в формате **YY** отображается "20" в чеке. |
| \#         | Для последовательной нумерации используется знак решетки (**\#**). Например, в формате **####** показано "0001", "0002", "0003" и т. д. в чеке. |

Можно сбросить последовательную нумерацию чеков на конкретную дату. Затем для первой проводки, которая происходит после 12:00 на выбранную дату сброса, система сбрасывает номерную серию чека в 1. Можно также указать, будет ли сброс выполняться только один раз, или же он будет повторяться каждый год. Если указан ежегодный период повторения, сброс производится автоматически каждый год, пока продавец не остановит. 

Чтобы сбросить, выполните следующие действия.

1. Перейдите в раздел **Retail и Commerce \> Настройка канала \> Настройка POS \> Профили POS \> Профили функциональности**.
1. На экспресс-вкладке **Нумерация чеков** выберите **Сбросить дату чеков**.
1. В раскрывающемся диалоговом окне в поле **Дата сброса** выберите будущую дату, когда произойдет сброс.
1. В поле **Тип сброса чеков** выберите **Только один раз** или **Ежегодно**.
1. Нажмите **ОК**.

![Выбор даты сброса чека](media/Enable_receipt_reset.png "Выбор даты сброса чека")

После выбора даты она появляется в столбце **Следующая дата сброса чека**. Дата сброса применима для всех типов проводок чеков. Таким образом, номерная серия чеков будет сброшена для всех типов чеков.

Когда наступит дата сброса, номер чека сбрасывается для первой проводки каждого типа. Кроме того, в профиле функциональности дата сброса перемещается с нового столбца **Следующая дата сброса чека** на текущий столбец **Текущая дата сброса чека**. Это изменение указывает на то, что если ККМ не используется в дату сброса, номер чека будет сброшен при *следующем использовании* ККМ. Например, 3 декабря 2019 в качестве даты сброса выбрано **1 января 2020**. 1 января, когда ККМ делают первую проводку, номер чека сбрасывается. Однако в декабре и в январе одна ККМ не используется вообще, а затем используется в феврале. В этом случае, так как было определено действие сброса, номер чека для этой ККМ будет сброшен, когда ККМ создаст свою первую проводку в феврале.

Можно использовать функцию **Очистить дату сброса** для очистки дат перезагрузки в будущем. Однако если дата сброса прошла раньше, ее невозможно отменить. Таким образом, сброс будет выполняться для всех ККМ, в которых сброс еще не выполнялся.

> [!NOTE]
> В зависимости от выбранной даты сброса и формата чеков могут быть указаны повторяющиеся номера чеков. Несмотря на то что система POS может обрабатывать такие ситуации, это увеличивает количество времени, необходимое для обработки возвратов, так как в связи с продажами должен быть выбран один из повторяющихся чеков. Другие сложности, которые связаны с очисткой данных, могут произойти в том случае, если дублирующиеся чеки не запланированы. Поэтому рекомендуется использовать динамические символы (например, **ddd**, **MM**, **DD** и **YY**), чтобы предотвратить появление дубирующихся номеров чеков после сброса.


[!INCLUDE[footer-include](../includes/footer-banner.md)]