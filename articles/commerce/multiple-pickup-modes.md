---
title: Включение нескольких режимов доставки самовывозом для заказов клиентов
description: В этой теме описываются функции в Microsoft Dynamics 365 Commerce, позволяющие создавать заказы клиентов для получения в магазине.
author: hhainesms
manager: annbe
ms.date: 11/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: global
ms.author: hhaines
ms.search.validFrom: ''
ms.dyn365.ops.version: 10.0.16
ms.openlocfilehash: 768b20ecc8d15353258c9b3af69b897957d3de60
ms.sourcegitcommit: 597476103bb695e3cbe6d9ffcd7a466400346636
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/20/2020
ms.locfileid: "4594992"
---
# <a name="enable-multiple-pickup-delivery-modes-for-customer-orders"></a><span data-ttu-id="0674e-103">Включение нескольких режимов доставки самовывозом для заказов клиентов</span><span class="sxs-lookup"><span data-stu-id="0674e-103">Enable multiple pickup delivery modes for customer orders</span></span>

[!include [banner](includes/banner.md)]
[!include [banner](includes/preview-banner.md)]

<span data-ttu-id="0674e-104">В Microsoft Dynamics 365 Commerce версии 10.0.16 или более поздней организации могут определить несколько способов доставки, которые покупатели или продавцы могут выбирать при создании заказа, которые покупатель сам получит в магазине.</span><span class="sxs-lookup"><span data-stu-id="0674e-104">In Microsoft Dynamics 365 Commerce version 10.0.16 and later, organizations can define multiple modes of delivery that shoppers or sales associates can choose among when they create an order that will be picked up at a store.</span></span> <span data-ttu-id="0674e-105">Таким образом, организации могут предоставлять своим покупателям несколько вариантов получения.</span><span class="sxs-lookup"><span data-stu-id="0674e-105">In this way, organizations can provide multiple pickup options to their shoppers.</span></span> <span data-ttu-id="0674e-106">Например, многие розничные продавцы теперь предлагают покупателям на выбор получение в магазине или получение в окне выдачи из автомобиля для своих заказов.</span><span class="sxs-lookup"><span data-stu-id="0674e-106">For example, many retailers now offer shoppers the choice of in-store pickup or curbside pickup for their orders.</span></span> <span data-ttu-id="0674e-107">Commerce поддерживает настройку этих разных режимов получения самовывозом.</span><span class="sxs-lookup"><span data-stu-id="0674e-107">Commerce supports the configuration of these different pickup delivery modes.</span></span> <span data-ttu-id="0674e-108">Пользователи могут воспользоваться преимуществами этих функций, создавая заказы клиентов в любом поддерживаемом канале Commerce (электронная коммерция, центр обработки вызовов или магазин).</span><span class="sxs-lookup"><span data-stu-id="0674e-108">Users can then take advantage of them when they create customer orders in any supported Commerce channel (e-commerce, call center, or store).</span></span>

## <a name="enable-and-configure-pickup-delivery-modes"></a><span data-ttu-id="0674e-109">Включение и настройка режимов доставки самовывозом</span><span class="sxs-lookup"><span data-stu-id="0674e-109">Enable and configure pickup delivery modes</span></span>

<span data-ttu-id="0674e-110">Чтобы использовать эту функцию, включите функцию **Поддержка нескольких режимов доставки для самовывоза** в рабочей области **Управления функциями** в Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="0674e-110">To use this functionality, turn on the **Support for multiple pickup delivery modes** feature in the **Feature management** workspace in Commerce headquarters.</span></span> <span data-ttu-id="0674e-111">После включения функции требуется дополнительная настройка.</span><span class="sxs-lookup"><span data-stu-id="0674e-111">After you turn on the feature, additional configuration is required.</span></span>

<span data-ttu-id="0674e-112">В Commerce версии 10.0.15 и более ранних организации в качестве назначенного режима доставки самовывозом могли определить только один режим доставки.</span><span class="sxs-lookup"><span data-stu-id="0674e-112">In Commerce version 10.0.15 and earlier, organizations can define only one mode of delivery as the designated pickup delivery mode.</span></span> <span data-ttu-id="0674e-113">Это определение выполняется на странице **Параметры Commerce**.</span><span class="sxs-lookup"><span data-stu-id="0674e-113">This definition is done on the **Commerce parameters** page.</span></span> <span data-ttu-id="0674e-114">В версии 10.0.16 и выше, когда включается функция **Поддержка нескольких режимов доставки для самовывоза**, режим доставки, который был определен ранее как режим доставки при самовывозе на странице **Параметры Commerce**, автоматически копируется в новую конфигурацию для режимов доставки самовывозом.</span><span class="sxs-lookup"><span data-stu-id="0674e-114">In version 10.0.16 and later, when you turn on the **Support for multiple pickup delivery modes** feature, the mode of delivery that was previously defined as the pickup delivery mode on the **Commerce parameters** page is automatically copied into the new configuration for pickup delivery modes.</span></span>

![Режимы доставки самовывозом на странице параметров Commerce](media/multiplepickupparameter.png)

<span data-ttu-id="0674e-116">После включения функции **Поддержка нескольких режимов доставки для самовывоза** можно определить несколько режимов доставки для самовывоза в сетке **Режим доставки самовывозом** на экспресс-вкладке **Режимы доставки** на вкладке **Заказы клиентов** на странице **Параметры Commerce**.</span><span class="sxs-lookup"><span data-stu-id="0674e-116">After you turn on the **Support for multiple pickup delivery modes** feature, you can define multiple pickup delivery modes in the **Pickup mode of delivery** grid on the **Modes of delivery** FastTab on the **Customer orders** tab of the **Commerce parameters** page.</span></span>

<span data-ttu-id="0674e-117">Поля **Способ поставки "На вынос"** и **Электронный способ поставки**, а также параметр **Показывать только варианты режима перевозчика для заказов на доставку** были перемещены на эту экспресс-вкладку.</span><span class="sxs-lookup"><span data-stu-id="0674e-117">The **Carry Out mode of delivery** and **Electronic mode of delivery** fields, and the **Show only carrier mode options for ship orders** option, have been relocated to this FastTab.</span></span>

<span data-ttu-id="0674e-118">Прежде чем настраивать дополнительные режимы доставки для самовывоза, необходимо определить режимы доставки.</span><span class="sxs-lookup"><span data-stu-id="0674e-118">Before you configure additional pickup delivery modes, you must define the modes of delivery.</span></span> <span data-ttu-id="0674e-119">На странице **Способы поставки** в Commerce Headquarters добавьте режимы доставки, которые должны рассматриваться как режимы доставки для самовывоза.</span><span class="sxs-lookup"><span data-stu-id="0674e-119">On the **Modes of delivery** page in Commerce headquarters, add the modes of delivery that should be considered pickup delivery modes.</span></span> <span data-ttu-id="0674e-120">Убедитесь, что все настройки завершены.</span><span class="sxs-lookup"><span data-stu-id="0674e-120">Make sure that all configuration is completed.</span></span> <span data-ttu-id="0674e-121">Например, убедитесь, что режим доставки связан с соответствующими каналами и номенклатурами.</span><span class="sxs-lookup"><span data-stu-id="0674e-121">For example, make sure that the mode of delivery is linked to appropriate channels and items.</span></span> <span data-ttu-id="0674e-122">После завершения выполните задание **Обработка способов поставки** для создания отношений между режимом поставки, каналами и номенклатурами.</span><span class="sxs-lookup"><span data-stu-id="0674e-122">When you've finished, run the **Process delivery modes** job to create the relationships among the mode of delivery, channels, and items.</span></span> <span data-ttu-id="0674e-123">После завершения выполнения задания откройте страницу **График распределения** в Commerce Headquarters и запустите задание распределения **1120**, чтобы убедиться, что соответствующие базы данных каналов Commerce обновлены с учетом новой конфигурации способов поставки.</span><span class="sxs-lookup"><span data-stu-id="0674e-123">When the job has finished running, open the **Distribution schedule** page in Commerce headquarters, and run the **1120** distribution job to ensure that the relevant Commerce channel databases are updated with your new delivery mode configuration.</span></span>

![Пример настройки способа поставки для самовывоза из окна выдачи](media/pickupmodes.png)

<span data-ttu-id="0674e-125">После определения дополнительных режимов доставки добавьте их в сетку **Способы поставки самовывозом** на странице **Параметры Commerce**.</span><span class="sxs-lookup"><span data-stu-id="0674e-125">After you define the additional pickup delivery modes, add them to the **Pickup mode of delivery** grid on the **Commerce parameters** page.</span></span> <span data-ttu-id="0674e-126">Затем запустите соответствующие задания распределения, чтобы обновить соответствующие базы данных каналов Commerce изменениями конфигурации.</span><span class="sxs-lookup"><span data-stu-id="0674e-126">Then run the appropriate distribution jobs to update the relevant Commerce channel databases with the configuration change.</span></span>

> [!NOTE]
> <span data-ttu-id="0674e-127">Кроме существующего режима доставки самовывозом, который копируется в сетку **Способ поставки "самовывоз"** при включении функции **Поддержка нескольких способов поставки для самовывоза**, следует настроить новые способы доставки для каждой дополнительной создаваемой конфигурации способа поставки самовывозом.</span><span class="sxs-lookup"><span data-stu-id="0674e-127">Apart from the existing pickup delivery mode that is copied to the **Pickup mode of delivery** grid when you turn on the **Support for multiple pickup delivery modes** feature, for every additional pickup delivery mode configuration that you create, you should configure new modes of delivery.</span></span> <span data-ttu-id="0674e-128">При добавлении способов поставки в сетку **Способ поставки "самовывоз"** Commerce проверяет, не используются ли они уже в каких-либо активных строках продаж.</span><span class="sxs-lookup"><span data-stu-id="0674e-128">When you add modes of delivery to the **Pickup mode of delivery** grid, Commerce validates whether any active open sales lines already use them.</span></span> <span data-ttu-id="0674e-129">Если найдены какие-либо открытые строки продаж, выводится сообщение об ошибке.</span><span class="sxs-lookup"><span data-stu-id="0674e-129">If any open sales lines are found, you receive an error message.</span></span> <span data-ttu-id="0674e-130">Способы поставки не считаются способами доставки для самовывоза, пока не будут закрыты все открытые строки продаж, которые их используют (с выставленными счетами или отмененные).</span><span class="sxs-lookup"><span data-stu-id="0674e-130">Modes of delivery aren't considered pickup delivery modes until all open sales lines that use them have been closed (either invoiced or canceled).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="0674e-131">После определения нескольких режимов поставки для самовывоза на странице **Параметры Commerce** функция **Поддержка нескольких способов поставки для самовывоза** становится обязательной и больше не может быть отключена.</span><span class="sxs-lookup"><span data-stu-id="0674e-131">After you define more than one pickup delivery mode on the **Commerce parameters** page, the **Support for multiple pickup delivery modes** feature becomes mandatory and can no longer be turned off.</span></span> <span data-ttu-id="0674e-132">Если необходимо отключить эту функцию, следует удалить все способы поставки самовывозом из сетки **Способ поставки "самовывоз"**, кроме одного.</span><span class="sxs-lookup"><span data-stu-id="0674e-132">If you must turn off the feature, remove all but one pickup delivery mode from the **Pickup mode of delivery** grid.</span></span> <span data-ttu-id="0674e-133">Если определен только один способ поставки, функция больше не считается обязательной и может быть отключена.</span><span class="sxs-lookup"><span data-stu-id="0674e-133">When only one pickup delivery mode is defined, the feature is longer considered mandatory and can be turned off.</span></span>

### <a name="e-commerce-site-configurations"></a><span data-ttu-id="0674e-134">Настройки сайта электронной коммерции</span><span class="sxs-lookup"><span data-stu-id="0674e-134">E-commerce site configurations</span></span>

<span data-ttu-id="0674e-135">Когда включена функция **Поддержка нескольких способов поставки для самовывоза**, в следующих модулях на страницах электронной коммерции отображаются новые способы поставки самовывозом в соответствии с настройкой:</span><span class="sxs-lookup"><span data-stu-id="0674e-135">When the **Support for multiple pickup delivery modes** feature is turned on, the following modules on e-commerce pages show the new pickup delivery modes as configured:</span></span>

- <span data-ttu-id="0674e-136">Поле покупки</span><span class="sxs-lookup"><span data-stu-id="0674e-136">Buy box</span></span>
- <span data-ttu-id="0674e-137">Селектор магазина</span><span class="sxs-lookup"><span data-stu-id="0674e-137">Store selector</span></span>
- <span data-ttu-id="0674e-138">Корзина</span><span class="sxs-lookup"><span data-stu-id="0674e-138">Cart</span></span>
- <span data-ttu-id="0674e-139">Сведения о вывозе</span><span class="sxs-lookup"><span data-stu-id="0674e-139">Pickup information</span></span>
- <span data-ttu-id="0674e-140">Подтверждение заказа</span><span class="sxs-lookup"><span data-stu-id="0674e-140">Order confirmation</span></span>
- <span data-ttu-id="0674e-141">Сведения о заказе</span><span class="sxs-lookup"><span data-stu-id="0674e-141">Order details</span></span>

<span data-ttu-id="0674e-142">Никаких дополнительных шагов на страницах электронной коммерции не требуется, чтобы сделать доступными способ поставки самовывозом.</span><span class="sxs-lookup"><span data-stu-id="0674e-142">No additional steps are required on e-commerce pages to make the pickup delivery modes available.</span></span>

## <a name="work-with-multiple-pickup-delivery-modes"></a><span data-ttu-id="0674e-143">Работа с несколькими способами поставки самовывозом</span><span class="sxs-lookup"><span data-stu-id="0674e-143">Work with multiple pickup delivery modes</span></span>

<span data-ttu-id="0674e-144">Когда для канала доступно несколько способов поставки самовывозом, для клиентов предоставляется расширенный опыт, когда они покупают продукты, которые будут получены самовывозом.</span><span class="sxs-lookup"><span data-stu-id="0674e-144">When multiple pickup delivery modes are available for a channel, an enhanced experience is provided to customers when they shop for products that will be picked up.</span></span> 

- <span data-ttu-id="0674e-145">В каналах электронной коммерции покупатели могут выбрать любой доступный способ поставки для самовывоза.</span><span class="sxs-lookup"><span data-stu-id="0674e-145">In e-commerce channels, shoppers can select any valid pickup delivery mode that is available.</span></span> <span data-ttu-id="0674e-146">Например, розничный продавец определяет два способа поставки при самовывозе (самовывоз из магазина и получение в окне выдачи), и оба они настраиваются в сетке **Способ поставки "самовывоз"**, и оба варианта действительны для канала выполнения заказа и продукта, приобретаемого покупателем в данный момент.</span><span class="sxs-lookup"><span data-stu-id="0674e-146">For example, a retailer defines two pickup delivery modes (in-store pickup and curbside pickup), both are configured in the **Pickup mode of delivery** grid, and both are valid for the order fulfillment channel and the product that a shopper is currently purchasing.</span></span> <span data-ttu-id="0674e-147">В этом случае покупатель может выбрать предпочтительный способ поставки для самовывоза.</span><span class="sxs-lookup"><span data-stu-id="0674e-147">In this case, the shopper can select their preferred pickup delivery mode.</span></span> <span data-ttu-id="0674e-148">Выбранный способ поставки самовывозом затем становится способом поставки, который связан со строкой заказа на продажу, когда заказ создается в Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="0674e-148">The selected pickup delivery mode then becomes the mode of delivery that is linked to the sales order line when the order is created in Commerce headquarters.</span></span>

    ![Выбор параметра самовывоза в электронной коммерции](media/pickupecommerce.png)

- <span data-ttu-id="0674e-150">В каналах магазина, если заказ клиента для самовывоза создается через приложение POS-терминала, продавцу предлагается выбрать один из доступных способов поставки для самовывоза, если они были настроены.</span><span class="sxs-lookup"><span data-stu-id="0674e-150">In store channels, if a customer order for pickup is created through the point of sale (POS) application, the sales associate is prompted to choose among the available pickup delivery modes, if any have been configured.</span></span> <span data-ttu-id="0674e-151">Если только один допустимый способ поставки самовывозом доступен для канала и номенклатуры, продавцу не предлагается выбрать его.</span><span class="sxs-lookup"><span data-stu-id="0674e-151">If only one valid pickup delivery mode is available for the channel and item, the sales associate isn't prompted to select it.</span></span> <span data-ttu-id="0674e-152">Вместо этого к строкам заказа автоматически применяется доступный способ поставки самовывозом.</span><span class="sxs-lookup"><span data-stu-id="0674e-152">Instead, the available pickup delivery mode is automatically applied to the order lines.</span></span>

    ![Выбор параметра самовывоза в приложении POS-терминала](media/pickuppos.png)

- <span data-ttu-id="0674e-154">Когда пользователи создают заказы с самовывозом в каналах центра обработки вызовов, они могут вручную выбрать любой определенный способ поставки для самовывоза, который связан с каналом центра обработки вызовов.</span><span class="sxs-lookup"><span data-stu-id="0674e-154">In call center channels, when users create pickup orders, they can manually select any defined pickup delivery mode that is linked to the call center channel.</span></span> <span data-ttu-id="0674e-155">Затем система проверяет, можно ли использовать выбранный способ поставки самовывозом при заказе номенклатуры, которая привязывается к заказу.</span><span class="sxs-lookup"><span data-stu-id="0674e-155">The system then validates that the selected pickup delivery mode can be used when the item that is being linked to it is ordered.</span></span> <span data-ttu-id="0674e-156">Если в каналах центра обработки вызовов выбран способ поставки самовывозом, строки заказа на продажу должны быть привязаны к допустимому складу магазина.</span><span class="sxs-lookup"><span data-stu-id="0674e-156">When a pickup delivery mode is selected in call center channels, the sales order lines must be linked to a valid store warehouse.</span></span> <span data-ttu-id="0674e-157">Если в строке продаж центра обработки вызовов определен склад, не являющийся складом магазина, режим поставки самовывозом нельзя настроить для этой строки продаж.</span><span class="sxs-lookup"><span data-stu-id="0674e-157">If a non-store warehouse is defined on a call center sales line, a pickup delivery mode can't be set on that sales line.</span></span>
- <span data-ttu-id="0674e-158">Продавец может использовать операцию **Вызов заказа** или **Выполнение заказов** в приложении POS-терминала для вызова списка заказов или строк заказа для самовывоза.</span><span class="sxs-lookup"><span data-stu-id="0674e-158">Sales associates can use the **Order recall** or **Order fulfillment** operation in the POS application to retrieve a list of orders or order lines for pickup.</span></span> <span data-ttu-id="0674e-159">Если продавец использует готовый фильтр поиска для отображения всех заказов, которые будут получены самовывозом в текущем магазине, запросы изменяются, чтобы гарантировать, что в результаты поиска включены все подходящие заказы, в которых используется любой способ поставки самовывозом.</span><span class="sxs-lookup"><span data-stu-id="0674e-159">If a sales associate uses a predefined search filter to show all orders that will be picked up at the current store, the queries are modified to ensure that the search results include all eligible orders that use any pickup delivery mode.</span></span> <span data-ttu-id="0674e-160">Пользователи POS-терминала могут также использовать существующие фильтры для уточнения списка заказов до определенного способа поставки самовывозом.</span><span class="sxs-lookup"><span data-stu-id="0674e-160">POS users can also use existing filters to narrow down the list of orders to a specific pickup delivery mode.</span></span> <span data-ttu-id="0674e-161">Например, они могут показывать заказы только для самовывозом из окна выдачи.</span><span class="sxs-lookup"><span data-stu-id="0674e-161">For example, they can show only orders for curbside pickup.</span></span>

    ![Фильтр для способов поставки самовывозом, примененный к списку вызванных заказов](media/pickuprecallorder.png)

## <a name="considerations-for-distributed-order-management"></a><span data-ttu-id="0674e-163">Соображения для распределенного управления заказами</span><span class="sxs-lookup"><span data-stu-id="0674e-163">Considerations for distributed order management</span></span>

<span data-ttu-id="0674e-164">Функции [распределенного управления заказами (DOM)](https://docs.microsoft.com/dynamics365/commerce/dom) в Commerce игнорируют все строки продаж, помеченные для самовывоза из магазинов.</span><span class="sxs-lookup"><span data-stu-id="0674e-164">The [distributed order management (DOM)](https://docs.microsoft.com/dynamics365/commerce/dom) features in Commerce ignore any sales lines that are marked for store pickup.</span></span> <span data-ttu-id="0674e-165">Эти функции были обновлены, чтобы гарантировать, что строки продаж, связанные с настроенными способами поставки самовывозом, обходят логику DOM и не будут перераспределены на новый склад выполнения.</span><span class="sxs-lookup"><span data-stu-id="0674e-165">These features have been updated to ensure that sales lines that are linked to configured pickup delivery modes bypass the DOM logic and won't be reallocated to a new fulfillment warehouse.</span></span>
