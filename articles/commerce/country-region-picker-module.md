---
title: Модуль выбора страны/региона
description: В этой статье описывается модуль выбора страны/региона, а также как настраивать его в Microsoft Dynamics 365 Commerce.
author: bicyclingfool
ms.date: 04/06/2022
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgriffin
ms.search.region: Global
ms.author: stuharg
ms.search.validFrom: 2021-08-12
ms.dyn365.ops.version: Release 10.0.22
ms.custom: ''
ms.assetid: ''
ms.search.industry: ''
ms.openlocfilehash: 203a8e17e075f15b7ae3cceb98d24ced75539a01
ms.sourcegitcommit: 87e727005399c82cbb6509f5ce9fb33d18928d30
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/12/2022
ms.locfileid: "9270300"
---
# <a name="countryregion-picker-module"></a>Модуль выбора страны/региона

[!include [banner](includes/banner.md)]

В этой статье описывается модуль выбора страны/региона, а также как настраивать его в Microsoft Dynamics 365 Commerce.

В модуле выбора страны/региона используется функция [географического определения и перенаправления](geo-detection-redirection.md) в Dynamics 365 Commerce, чтобы отображать рекомендуемые сайты для клиентов, которые запрашивают адрес URL сайта электронной коммерции, не связанный с их страной или регионом.

Например, клиент в Канаде запрашивает URL-адрес сайта, который связан со страной, отличной от Канады. В этом случае в модуле выбора страны/региона отображается диалоговое окно, в котором рекомендуются URL-адреса сайтов, связанные с Канады. 

## <a name="how-it-works"></a>Как это работает

Когда географическое обнаружение и перенаправление включено для сайта, а клиент запрашивает URL-адрес сайта, для определения того, соответствует ли этот URL-адрес стране, в которой находится клиент, используются страна/регион, который был определен для клиента, и URL-адрес, который он запросил. Сопоставление URL-адресов и стран/регионов определяется на странице **Каналы** в разделе **Параметры сайта** в конструкторе сайтов Commerce. 

Если URL-адрес запроса не соответствует ни одному URL-адресу, сопоставленному со страной клиента, в ответе возвращается список одного или нескольких URL-адресов, которые сопоставляются с данной страной/регионом. Средство выбора страны/региона сравнивает каждый URL-адрес из этого списка с URL-адресами, настроенными в модуле страны/региона. Для каждого найденного точного соответствия в средстве выбора страны/региона отображается заголовок отображения, подзаголовок и изображение для этого URL-адреса, и задаются гиперссылки на эти элементы с помощью URL-адреса.

Когда клиент выбирает параметр в средстве выбора страны/региона, он переносится на URL-адрес гиперссылки. Этот URL-адрес записывается в файл cookie **\_msdyn365\_\_\_site\_**, чтобы его можно было использовать в качестве предпочтений сайта клиента. Затем в следующий раз, когда клиент запросит URL-адрес, не связанный с его страной или регионом, они автоматически перенаправляются в нужную страну. Поэтому рекомендуется также использовать [модуль средства выбора сайта](site-selector.md) на веб-сайте электронной коммерции, чтобы клиенты могли переопределять или обновлять свои настройки сайта. 

Если клиент закрыл диалоговое окно средства выбора страны/региона, файл cookie не будет записан и клиент останется на текущем сайте. 

На следующем рисунке показан пример диалогового окна выбора страны/региона.

![Пример диалогового окна выбора страны/региона на домашней странице.](./media/Geo_country-region-module-insitu.png)

## <a name="countryregion-picker-module-properties"></a>Свойства модуль выбора страны/региона

| Имя свойства              | значение       | описание                                                  |
| -------------------------- | ----------- | ------------------------------------------------------------ |
| Заголовок                    | Текст        | Заголовок, отображаемый в верхней части диалогового окна.       |
| Подзаголовок                 | Текст        | Подзаголовок, который появится под заголовком.               |
| Страна: отображаемая строка    | Текст        | Отображаемое имя параметра URL-адреса (например, "Канада").   |
| Страна: отображаемая подстрока | Текст        | Необязательная отображаемая подстрока для параметра URL-адреса (например, "Английский" или "Французский"). |
| Страна: изображение страны     | Мультимедийный актив | Необязательное изображение, связанное с параметром URL-адреса (например, изображением канадского флага). |
| Страна: URL-адрес страны       | Текст        | URL-адрес сайта для страны или региона, который настраивается. Этот URL-адрес должен точно совпадать с URL-адресом, указанным для данной страны/региона на странице **Каналы** в разделе **Параметры сайта** в конструкторе сайтов Commerce. Кроме того, домен URL-адреса должен быть пользовательским доменом, указанным в поле **Сопоставить домен** на странице **Каналы**, а не на рабочем адресе сайта, который предоставляет Commerce при создании среды электронной коммерции (например, URL-адрес `https://<yourcompany>.commerce.dynamics.com/`). |
| Ссылка на действие                | Ссылка на действие | Необязательная ссылка, которая появляется в нижней части диалогового окна. Например, эта ссылка может указывать на внутреннюю страницу, которая содержит список всех стран и регионов, поддерживаемых сайтом. |

## <a name="add-a-countryregion-picker-module-to-a-page"></a>Добавление модуля выбора стран/регионов на страницу

Модуль выбора страны/региона можно добавить в модуль заголовка как напрямую, так и через общий фрагмент. Дополнительные сведения о модули заголовка см. в разделе [Модуль заголовка](author-header-module.md).

## <a name="configure-the-countryregion-picker-module-in-commerce-site-builder"></a>Настройка модуля выбора страны/региона в конфигураторе сайтов Commerce

> [!NOTE]
> URL-адреса, рекомендованные клиентам, должны быть настроены как объекты стран в модуле выбора страны/региона.

Для каждого URL-адреса сайта, который необходимо показать и рекомендовать клиентам, выполните следующие действия в конфигураторе сайтов Commerce.

1. Выберите ячейку модуля выбора страны/региона.
1. В области свойств в **список стран** выберите **Добавить страну**.
1. Выберите новое поле **страна**.
1. В поле **Отображаемая строка** введите отображаемое имя (например, **Канада**).
1. Необязательно: в поле **Отображаемая подстрока** введите отображаемая подстрока (например, **французский** или **fr-ca**).
1. Необязательно: выберите изображение из библиотеки мультимедиа.
1. В поле **URL-адрес страны** введите URL-адрес. Этот URL-адрес должен точно совпадать с URL-адресом, который отображается на странице **каналы** и сопоставлен с каналом, включая языковой стандарт, связанный со страной или регионом. 
1. Нажмите **ОК**.
1. Повторите эти шаги для всех других URL-адресов стран, которые будут отображаться в модуле выбора страны/региона.

## <a name="additional-resources"></a>Дополнительные ресурсы

[Настройка географического определения и перенаправления](geo-detection-redirection.md)

[Обзор библиотеки модулей](starter-kit-overview.md)

[Модуль верхнего колонтитула](author-header-module.md)

[Модуль выбора сайта](site-selector.md)

[Модуль иерархической навигации](add-breadcrumb.md)

[!INCLUDE[footer-include](../includes/footer-banner.md)]
