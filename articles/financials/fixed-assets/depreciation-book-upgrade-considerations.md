---
title: "Обзор обновления журнала амортизации"
description: "В предыдущих выпусках имелось две концепции оценки для основных средств — модели стоимости и журналы амортизации. В Microsoft Dynamics 365 for Operations (1611) функция модели стоимости и функция журнала амортизации были объединены в одно понятие книги. В этом разделе приводятся некоторые сведения, которые следует учитывать для обновления."
author: twheeloc
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
audience: Application User, Developer
ms.reviewer: twheeloc
ms.search.scope: Core, Operations
ms.custom: 221624
ms.assetid: cf434099-36f9-4b0f-a7c8-bed091e34f39
ms.search.region: global
ms.author: saraschi
ms.search.validFrom: 2016-11-30
ms.dyn365.ops.version: Version 1611
ms.translationtype: HT
ms.sourcegitcommit: 2771a31b5a4d418a27de0ebe1945d1fed2d8d6d6
ms.openlocfilehash: e95fa9dd15dfe5e6b26de61b5dbc1a9a6c0d768d
ms.contentlocale: ru-ru
ms.lasthandoff: 11/03/2017

---

# <a name="depreciation-book-upgrade-overview"></a>Обзор обновления журнала амортизации

[!include [banner](../includes/banner.md)]

В предыдущих выпусках имелось две концепции оценки для основных средств — модели стоимости и журналы амортизации. В Microsoft Dynamics 365 for Operations (1611) функция модели стоимости и функция журнала амортизации были объединены в одно понятие книги. В этом разделе приводятся некоторые сведения, которые следует учитывать для обновления. 

В процессе обновления ваша существующая настройка и все существующие проводки будут перемещены в структуру новой книги. Модели стоимости будут оставаться как есть на данный момент в качестве книги, которая выполняет разноску в главную книгу. Журналы амортизации будет перемещены в книгу, в которой для параметра **Разноска в главную книгу** задано значение **Нет**. Имена журналов амортизации будут перемещены в имя журнала ГК, в котором для слоя разноски установлено значение **Нет**. Проводки журнала амортизации будут перемещены в проводки основных средств. 

Перед выполнением обновления данных следует понимать два доступных варианта обновления строк книг журналов амортизации в ваучерах проводок и номерной серии, которая будет использоваться для серии ваучеров. 

Вариант 1. **Номерная серия определяется системой** — это вариант по умолчанию для оптимизации производительности обновления. Обновление не будет использовать инфраструктуру номерных серий, а будет распределять ваучеры с подходом, основанным на наборах. После обновления новая номерная серия будет создана со **Следующим набором номеров**, соответствующим образом основанным на обновленных проводках. По умолчанию используется номерная серия в формате FADBUpgr\#\#\#\#\#\#\#\#\#. Вам доступно несколько параметров для корректировки формата при использовании этого подхода:

-   **Код номерной серии** — код, определяющий номерную серию. Этот код номерной серии не может существовать, так как он будет создан обновлением.
    -   Постоянное имя: **NumberSequenceDefaultCode**
    -   Значение по умолчанию: "FADBUpgr"
-   **Префикс** — постоянное строковое значение, которое будет использоваться как префикс для кодов ваучеров.
    -   Постоянное имя: **NumberSequenceDefaultParameterPrefix**
    -   Значение по умолчанию: "FADBUpgr"
-   **Буквенно-цифровая длина** — длина буквенно-цифрового сегмента номерной серии.
    -   Постоянное имя: **NumberSequenceDefaultParameterAlpanumericLength**
    -   Значение по умолчанию: 9
-   **Начальный номер** — первый номер, используемый в номерной серии.
    -   Постоянное имя: **NumberSequenceDefaultParameterStartNumber**
    -   Значение по умолчанию: 1

Вариант 2. **Существующая определяемая пользователем номерная серия** — этот вариант позволяет вам определить номерную серию, которая будет использоваться для обновления. Рекомендуется использовать этот вариант, если требуется сложная конфигурация номерной серии. Для использования номерной серии следует изменить класс обновления ReleaseUpdateDB70\_FixedAssetJournalDepBookRemovalDepBookJournalTrans, указав следующую информацию:

-   **Код номерной серии** — код номерной серии.
    -   Постоянное имя: **NumberSequenceExistingCode **
    -   Значение по умолчанию: отсутствует, это необходимо обновить с кодом номерной серии.
-   **Общая номерная серия** — логическое значение, чтобы определить область действия номерной серии. Используйте значение «true» для общих номерных серий во всех компаниях и «false» для области действия в пределах конкретной компании. При использовании значения «false» номерная серия с указанным именем должна существовать в каждой компании, содержащей проводки журнала амортизации. Общие номерные серии существуют в каждом разделе, содержащем проводки журнала амортизации.
    -   Постоянное имя: **NumberSequenceExistingIsShared **
    -   Значение по умолчанию: true

Эти параметры расположены в начале класса ReleaseUpdateDB70\_FixedAssetJournalDepBookRemovalDepBookJournalTrans. 

*// Укажите предпочтительный подход распределения ваучеров* 
 *// true, если вы хотите использовать существующий код номерной серии* 
 *// false, если планируется использовать определенную системой номерную серию (по умолчанию)* const boolean NumberSequenceUseExistingCode = false;  

*// Если используется подход с номерной серией, определенной системой, укажите параметры для номерной серии.*
 *// Новая номерная серия будет создана с этими параметрами.* const str NumberSequenceDefaultCode = 'FADBUpgr'; const str NumberSequenceDefaultParameterPrefix = 'FADBUpgr'; const int NumberSequenceDefaultParameterAlpanumericLength = 9; const int NumberSequenceDefaultParameterStartNumber = 1;   

*// Если используется подход с существующей номерной серией, укажите существующий код номерной серии.* 
 *// Распределение ваучеров будет выполняться построчно для существующих номерных серий.* const str NumberSequenceExistingCode = ''; *// Укажите область действия существующего кода номерной серии* 
 *// true, если указанная номерная серия является общей* 
 *// false, если указана номерная серия для каждой компании* 
 *// Будет использоваться определенная системой номерная серия по умолчанию, если код номерной серии с указанной областью действия не найден.* const boolean NumberSequenceExistingIsShared = true; 

Перестройте проект, содержащий этот класс, после изменения констант. 

При использовании подхода с созданной системой номерной серией (вариант 1) обновление будет использовать обработку на базе набора для распределения кодов ваучеров, как указано в параметрах скрипта обновления. Он также создает новую номерную серию с указанными параметрами после распределения. 

При использовании подхода с определяемой пользователем существующей номерной серией (вариант 2) обновление данных проверяет, существует ли номерная серия с указанной областью действия в базе данных для каждого раздела и компании с проводками журнала амортизации. Если она существует, обновление будет использовать построчную обработку для распределения кодов ваучеров, как указано номерной серией с помощью структуры номерной серии. Если номерная серия не существует с указанной областью действия, обновление будет использовать подход по умолчанию с определенной системой номерной серией для распределения кодов ваучеров, и создаст новую номерную серию с указанными параметрами по умолчанию после распределения.

В любом из подходов сценарий обновления данных также будет использовать номерную серию для поля **Серии ваучеров** для новых имен журналов ГК, созданных для старых имен книг журналов амортизации.




