---
title: "Задания импорта и экспорта данных"
description: "Для создания заданий импорта и экспорта данных и управления ими служит рабочая область \"Управление данными\"."
author: Sunil-Garg
manager: AnnBe
ms.date: 08/28/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-platform
ms.technology: 
audience: Application user
ms.reviewer: margoc
ms.search.scope: Operations
ms.search.region: Global
ms.author: sunilg
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.translationtype: HT
ms.sourcegitcommit: e444168f249e798fa68b9b082556aa8e5e7d8113
ms.openlocfilehash: 0e1c5120bf8558b955b66e059a8be8bbec2c2ce1
ms.contentlocale: ru-ru
ms.lasthandoff: 02/13/2018

---

# <a name="data-import-and-export-jobs"></a>Задания импорта и экспорта данных

[!include[banner](../includes/banner.md)]

Для создания заданий импорта и экспорта данных и управления ими в Microsoft Dynamics 365 for Finance and Operations, Enterprise Edition служит рабочая область **Управление данными**. По умолчанию процесс импорта и экспорта данных создает промежуточную таблицу для каждого объекта в целевой базе данных. Промежуточные таблицы позволяют проверить, очистить или преобразовать данные перед перемещением.

> [!NOTE]
> В этом разделе предполагается, что вы знакомы с [информационными объектами](data-entities.md).

## <a name="data-importexport-process"></a>Процесс импорта/экспорта данных
Ниже приведены шаги, необходимые для импорта или экспорта данных.

1. Создание задания импорта или экспорта, что предполагает выполнение следующих задач:

    - Определение категории проекта.
    - Определение объектов для импорта или экспорта.
    - Определение формата данных для задания.
    - Определение последовательности объектов, чтобы они обрабатывались в виде логических групп и в порядке, которые имеет какой-либо смысл.
    - Определение того, следует ли использовать промежуточные таблицы.

2. Проверка правильности сопоставления исходных данных и целевых данных.
3. Проверка параметров безопасности для задания импорта или экспорта.
4. Запуск задания импорта или экспорта.
5. Проверка правильности выполнения задания путем просмотра истории задания.
6. Очистка промежуточных таблиц.

В остальных разделах этой темы приведены дополнительные сведения о каждом шаге процесса.

> [!NOTE]
> Чтобы обновить форму импорта и экспорта данных для просмотра последних данных о ходе выполнения, используйте значок обновления формы. Обновление на уровне браузера не рекомендуется, поскольку оно прерывает все задания импорта и экспорта, которые не выполняются в пакете.

## <a name="create-an-import-or-export-job"></a>Создание задания импорта или экспорта
Задание импорта или экспорта данных можно запустить один раз или несколько раз.

### <a name="define-the-project-category"></a>Определение категории проекта
Рекомендуем подойти к выбору категории проекта для задания импорта или экспорта со всей тщательностью. Категории проекта помогают управлять связанными заданиями.

### <a name="identify-the-entities-to-import-or-export"></a>Определение объектов для импорта или экспорта
Можно добавить в задание импорта или экспорта конкретные объекты или выбрать шаблон для применения. Шаблоны заполняют задание списком объектов. Действие **Применить шаблон** становится доступным после присвоения заданию имени и сохранения задания.

### <a name="set-the-data-format-for-the-job"></a>Определение формата данных для задания
При выборе объекта необходимо выбрать формат данных, которые будут экспортированы или импортированы. Форматы определяются с помощью плитки **Настройка источников данных**. Многие организации начинают с форматов, которые входят в набор демонстрационных данных по умолчанию. Ниже приведен список некоторых из этих форматов:

- AX (для данных, которые должны импортироваться или экспортироваться в том же формате, который используется для Microsoft Dynamics 365 for Finance and Operations, Enterprise Edition)
- ColonSeparated
- Значения, разд. запятой
- Excel
- Пакет

### <a name="sequence-the-entities"></a>Определение последовательности объектов
Задать последовательность объектов можно в шаблоне данных или в заданиях импорта и экспорта. При запуске задания, которое содержит несколько информационных объектов, необходимо убедиться, что информационные объекты следуют в правильном порядке. Последовательность объектов задается главным образом для учета всех функциональных зависимостей между объектами. Если объекты не имеют никаких функциональных зависимостей, их можно импортировать или экспортировать параллельно.

#### <a name="execution-units-levels-and-sequences"></a>Единицы выполнения, уровни и порядковые номера
Единица выполнения, уровень в единице выполнения и порядковый номер объекта помогают управлять порядком, в котором экспортируются или импортируются данные.

- Объекты в различных единицах выполнения обрабатываются параллельно.
- В каждой единице выполнения объекты обрабатываются параллельно, если они имеют один и тот же уровень.
- На каждом уровне объекты обрабатываются в соответствии с их порядковым номером на данном уровне.
- После завершения обработки одного уровня обрабатывается следующий уровень.

#### <a name="resequencing"></a>Изменение последовательности
Изменить последовательность объектом может понадобиться в следующих ситуациях:

- Если для всех ваших изменений используется только одно задание, вы можете использовать команды изменения последовательности для оптимизации времени выполнения всего задания. В этих случаях можно использовать единицу выполнения для представления модуля, уровень для представления функциональной области в модуле, а порядковый номер для представления объекта. При таком подходе можно работать между модулями в параллельном режиме, но в пределах модуля все равно работать в определенной последовательности. Чтобы гарантировать успешное выполнение параллельных операций, необходимо учитывать все зависимости.
- Если используется несколько заданий данных (например, по одному заданию для каждого модуля), задание последовательности может влиять на уровень и порядковый номер для оптимального выполнения.
- Если зависимости отсутствуют вообще, вы можете задать последовательность объектов в различных единицах выполнения для максимальной оптимизации.

Меню **Изменение последовательности** доступно, когда выбрано несколько объектов. Изменять последовательность можно по единицам измерения, уровням или порядковым номерам. Можно задать приращение для изменения последовательности выбранных объектов. Единица, уровень и/или порядковый номер, выбранный для каждого объекта, обновляется на заданное значение приращения.

#### <a name="sorting"></a>Сортировка
Для просмотра списка объектов в порядке последовательности можно использовать параметр **Сортировать по**.

## <a name="validate-that-the-source-data-and-target-data-are-mapped-correctly"></a>Проверка правильности сопоставления исходных данных и целевых данных
Сопоставление — это функция, которая применяется и к заданиям импорта, и к заданиям экспорта.

- В контексте задания импорта сопоставление описывает, какие столбцы в исходном файле становятся столбцами в промежуточной таблице. Таким образом система может определить, в какой столбец в промежуточной таблице должны копироваться данные того или иного столбца в исходном файле должны копироваться.
- В контексте задания экспорта сопоставление описывает, какие столбцы промежуточной таблицы (т. е. источника) становятся столбцами в целевом файле.

Если имена столбцов в промежуточной таблице и файле совпадают, система устанавливает сопоставления автоматически на основании имен. Однако, если имена различаются, столбцы не сопоставляются автоматически. В этих случаях необходимо выполнить сопоставление, выбрав команду **Просмотр карты** в объекте в задании данных.

Доступно два представления сопоставления: **Визуализация сопоставления**, которое используется по умолчанию, и **Сведения о сопоставлении**. Красной звездочкой (\*) обозначаются все обязательные поля в объекте. Эти поля должны быть сопоставлены, прежде чем вы сможете работать с объектом. Работая с объектом, вы можете отменить сопоставление других полей, если необходимо. Чтобы отменить сопоставление поля, выберите поле в столбце **Объект** или в столбце **Источник**, а затем выберите **Удалить выбор**. Выберите **Сохранить**, чтобы сохранить изменения, а затем закройте страницу, чтобы вернуться в проект. Эту же процедуру можно использовать для изменения сопоставления полей между источником и промежуточной таблицей после импорта.

Сопоставление на странице можно сгенерировать, выбрав **Создать сопоставление источника**. Сгенерированное сопоставление ведет себя как автоматическое сопоставление. Следовательно, все несопоставленные поля необходимо сопоставить вручную.

![Сопоставление данных](./media/dixf-map.png)

## <a name="verify-the-security-for-your-import-or-export-job"></a>Проверка параметров безопасности для задания импорта или экспорта
Доступ к рабочей области **Управление данными** можно ограничить, чтобы пользователи, не являющиеся администраторами, имели доступ только к определенным заданиям данных. Доступ к заданию данных подразумевает полный доступ к истории выполнения этого задания и доступ к промежуточной таблице. Следовательно, при создании задания данных необходимо проследить за тем, чтобы были заданы надлежащие параметры управления доступом.

### <a name="secure-a-job-by-roles-and-users"></a>Ограничение доступа к заданию по ролям и пользователям
Меню **Применимые роли** служит для ограничения доступа к заданию одной или несколькими ролями безопасности. Доступ к заданию будут иметь только пользователи с этими ролями.

Также можно ограничить доступ к заданию конкретным набором пользователей. Предоставление доступа к заданию по отдельным пользователям, а не по ролям обеспечивает более высокий уровень контроля, если роли назначено несколько пользователей.

### <a name="secure-a-job-by-legal-entity"></a>Ограничение доступа к заданию по юридическому лицу
Задания данных по природе своей являются глобальными. Таким образом, при создании и использовании задания данных в юридическом лице это задание будет видно другим юридическим лицам в системе. В некоторых сценариях такое предусмотренное по умолчанию поведение является предпочтительным. Например, в организации, которая импортирует накладные посредством информационных объектов, может существовать централизованная группа обработки накладных, отвечающая за устранение ошибок в накладных по всем подразделениям организации. В этом случае централизованной группе обработки накладных полезно иметь доступ к заданиям импорта накладных из всех юридических лиц. Следовательно, предусмотренное по умолчанию поведение соответствует требованиям с точки зрения юридических лиц.

Однако в организации также могут быть отдельные группы обработки накладных для каждого юридического лица. В таком случае команда в юридическом лице должна иметь доступ только к заданию импорта накладных в своем собственном юридическом лице. Для удовлетворения этого требования можно настроить контроль доступа к заданиям данных по юридическому лицу с помощью меню **Применимые юридические лица** внутри задания данных. По завершении конфигурирования пользователи смогут видеть только задания, доступные в юридическом лице, в которое они в данный момент вошли. Чтобы просмотреть задания в другом юридическом лице, пользователю понадобится перейти в это юридическое лицо.

Доступ к заданию можно ограничить по ролям, пользователям и юридическому лицу одновременно.

## <a name="run-the-import-or-export-job"></a>Запуск задания импорта или экспорта
Можно запустить задание однократно, нажав кнопку **Импорт** или **Экспорт** после определения задания. Чтобы настроить повторяющееся задание, нажмите кнопку **Создать повторяющееся задание данных**.

## <a name="validate-that-the-job-ran-as-expected"></a>Проверка правильности выполнения задания
Для исследования и устранения неполадок и в заданиях импорта, и в заданиях экспорта ведется история задания. Запуски задания в ней упорядочены по временным диапазонам.

![Диапазоны в истории задания](./media/dixf-job-history.md.png)

По каждому запуску задания фиксируются следующие подробности:

- Сведения о выполнении
- Журнал выполнения

Сведения о выполнении отражают состояние каждого информационного объекта, обработанного заданием. Таким образом можно быстро найти следующую информацию:

- Какие объекты были обработаны
- Сколько записей в каждом объекте было успешно обработано, а сколько обработать не удалось
- Записи промежуточной таблицы для каждого объекта

Промежуточные данные можно загрузить в виде файла для заданий экспорта и в виде пакета для задания импорта и экспорта.

Из сведений о выполнении можно также открыть журнал выполнения.

## <a name="clean-up-the-staging-tables"></a>Очистка промежуточных таблиц
Очистить промежуточные таблицы можно с помощью функции **Очистка промежуточных данных** в рабочей области **Управление данными**. Для выбора того, какие записи должны быть удалены из тех или иных промежуточных таблиц, можно использовать следующие варианты:

- **Объект** — если указан только объект, удаляются все записи из промежуточной таблицы этого объекта. Выбирайте этот вариант, чтобы удалить все данные для объекта по всем проектам данных и всем заданиям.
- **Код задания** — если указан только код задания, все записи для всех объектов в выбранном задании удаляются из соответствующих промежуточных таблиц.
- **Проекты данных** — если только выбран проект данных, удаляются все записи для всех объектов и во всех заданиях для выбранного проекта данных.

Можно также сочетать эти варианты для дальнейшего ограничения удаляемого набора записей.

