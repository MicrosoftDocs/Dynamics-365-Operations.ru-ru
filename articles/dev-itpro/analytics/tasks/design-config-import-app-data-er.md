---
title: Разработка конфигураций электронной отчетности для анализа входящих документов
description: В этой процедуре показано, как разработать конфигурации электронной отчетности для анализа входящего электронного документа.
author: NickSelin
manager: AnnBe
ms.date: 12/12/2017
ms.topic: business-process
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: kfend
ms.search.scope: Operations
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: Version 7.0.0
ms.openlocfilehash: 23004930d2377a3d647435b53b6809cd500f44ac
ms.sourcegitcommit: 45f8cea6ac75bd2f4187380546a201c056072c59
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/12/2019
ms.locfileid: "1741363"
---
# <a name="design-er-configurations-to-parse-incoming-documents"></a>Разработка конфигураций электронной отчетности для анализа входящих документов

[!include [task guide banner](../../includes/task-guide-banner.md)]

В этой процедуре показано, как разработать конфигурации электронной отчетности для анализа входящего электронного документа. В этой процедуре вам предстоит импортировать необходимые конфигурации электронной отчетности, созданные для демонстрационной компании Litware, Inc., а затем использовать их для анализа входящих электронных документов. Для выполнения действий в этой процедуре необходимо сначала выполнить процедуру "Электронная отчетность — Создание поставщика конфигурации и пометка его как активного".

Эта процедура предназначена для пользователей, которым назначена роль "Системный администратор" или "Разработчик электронной отчетности". 

Эти шаги можно выполнить с использованием любого набора данных. Перед тем как начать, загрузите и сохраните файлы, перечисленные в разделе "Разбор входящих документов для обновления данных приложений" (https://docs.microsoft.com/dynamics365/unified-operations/dev-itpro/analytics/parse-incoming-electronic-documents)). Файлы: EFSTA model.xml, EFSTA format.xml, Response1.xml, Response2.xml, Response3.xml, Response4.xml.

1. Перейдите в раздел "Управление организацией" > "Рабочие области" > "Электронная отчетность".
    * Убедитесь, что поставщик конфигурации для демонстрационной компании Litware, Inc. доступен и помечен как активный. Если вы не видите этого поставщика конфигурации, необходимо сначала выполнить шаги в процедуре "Создание поставщика конфигурации и пометка его как активного".  
2. Щелкните "Конфигурации отчетности".
    * Следующий сценарий будет использоваться для отображения возможностей анализа входящих электронных документов в формате XML: приложение ERP (Dynamics 365 for Finance and Operations) запрашивает данные из веб-службы (например, финансовая служба EFSTA http://efsta.org/) и выполняет анализ входящих ответов для обновления данных приложения соответствующим образом. Для наиболее эффективного анализа используется один формат ER несмотря на отличную структуру ожидаемых входящих документов в формате XML.   

## <a name="import-and-review-er-configurations"></a>Импорт и просмотр конфигураций ER
Импортируйте конфигурацию модели ER, содержащую образец модели данных, предназначенный для хранения сведений входящего файла.  
1. Щелкните "Обменять".
2. Щелкните "Загрузить из XML-файла".
    * Щелкните "Обзор" и выберите файл EFSTA model.xml.  
3. Нажмите кнопку "OК".
4. В дереве выберите "Модель EFSTA".
5. Выберите Конструктор.
    * Просмотрите структуру импортированной модели данных. Обратите внимание, что определено перечисление enumType для распознавания следующих типов ответов службы: для получения подтверждения об отправке проводки, для получения сведений о последней отправленной проводке и для распознавания неподдерживаемых типов ответа.   
6. В дереве разверните "Ответ".
    * Обратите внимание, что определен корневой элемент "Отчет" для указания того, какие данные необходимо извлечь из поддерживаемого ответа службы для обновления данных приложения соответствующим образом.   
7. Закройте страницу.
    * Будет импортирована конфигурация формата ER, которая определяет, как будут анализироваться входящие документы для хранения данных в модели данных ER.   
8. Щелкните "Обменять".
9. Щелкните "Загрузить из XML-файла".
    * Щелкните "Обзор" и выберите файл EFSTA format.xml.  
10. Нажмите кнопку "OК".
11. В дереве разверните "Модель EFSTA".
12. В дереве выберите "Модель EFSTA\Формат EFSTA".
13. Выберите Конструктор.
14. Щелкните "Развернуть/свернуть".
    * Обратите внимание, что элемент формата CASE используется в качестве корня и содержит три вложенных элемента FILE, что означает, что этот формат предназначен для анализа входящих файлов нескольких форматов.  
15. В дереве выберите "Ответы\Выполнение проводки\TraC".
    * Обратите внимание, что ответ об отправленной проводке начинается с корневого элемента TraC.   
16. В дереве выберите "Ответы\Последний запрос проводки\Tra".
    * Обратите внимание, что ответ о последней отправленной проводке начинается с корневого элемента Tra.   
17. В дереве выберите "Ответы\Неожиданный ответ\Текст".
    * Третий элемент FILE с вложенным элементом TEXT добавлен для распознавания всех других типов ответов, которые отличаются от указанных выше.   
18. Щелкните "Сопоставить формат модели".
    * Это сопоставление модели содержит определение потока данных для хранения сведений проанализированного входящего документа с использованием элементов модели данных.  
19. Выберите Конструктор.
20. В дереве разверните "формат".
21. В дереве разверните "формат\Ответы: Обращение(ответы)".
    * Просмотрите структуру источника данных "формат". Обратите внимание, что все три типа ответа предлагаются отдельно.   
22. В дереве выберите "формат\Ответы: Обращение(ответы)\aType".
    * Элемент источника данных aType добавлен для указания типа ответа и связан с элементом модели данных "Тип".  
23. Перейдите на вкладку "Проверки".
24. В дереве выберите "Тип = format.Responses.aType".
    * Обратите внимание, проверка ER настроена для сообщения пользователю о ситуации, когда структура ответа не соответствует подтверждению отправки проводки или сведениям о последней отправленной проводке (неподдерживаемый ответ).   
25. Закройте страницу.

## <a name="run-model-mapping-of-er-format-configured-for-parsing-incoming-files"></a>Выполнение сопоставления модели формата ER, настроенного для анализа входящих файлов
Будет выполнено сопоставление созданной модели в целях тестирования, чтобы просмотреть, каким образом настроенный формат ER будет анализировать входящие ответы службы. Этот шаг использует различные XML-файлы для моделирования различных типов ответов веб-служб.   
1. Откройте файл Response1.xml в средстве чтения XML, например веб-обозревателе. Обратите внимание, что этот файл содержит сведения подтверждения для завершенной проводки (TraC является корневым элементом).   
2. Щелкните "Выполнить".
    * Щелкните "Обзор" и выберите файл Response1.xml.  
3. Нажмите кнопку "OК".
    * Просмотрите созданные выходные данные. Обратите внимание, что тип ответа правильно распознан и проанализирован (ERModelEnumDataSourceHandler#EFSTA model#enumType#C означает завершение проводки).   
    * Откройте файл Response2.xml в средстве чтения XML. Обратите внимание, что этот файл содержит сведения о последней отправленной проводке (Tra является корневым элементом).   
4. Щелкните "Выполнить".
    * Щелкните "Обзор" и выберите файл Response2.xml.  
5. Нажмите кнопку "OК".
    * Просмотрите созданные выходные данные. Обратите внимание, что тип ответа правильно распознан и проанализирован (ERModelEnumDataSourceHandler#EFSTA model#enumType#R означает перезапуск системы).   
    * Откройте файл Response3.xml в средстве чтения XML. Обратите внимание, что этот файл начинается с корневого элемента TraZ и что эта структура не настроена с использованием формата ER.   
6. Щелкните "Выполнить".
    * Щелкните "Обзор" и выберите файл Response3.xml.  
7. Нажмите кнопку "OК".
    * Просмотрите созданные выходные данные. Обратите внимание, что тип ответа правильно распознан как неподдерживаемый (ERModelEnumDataSourceHandler#EFSTA model#enumType#U). Соответствующее сообщение добавлено в журнал Infolog (в соответствии с настройкой проверки ER), и большая часть модели данных не заполнена.   
    * Откройте файл Response4.xml в средстве чтения XML. Обратите внимание, что структура этого файла практически идентична успешно проанализированному файлу Response1.xml за исключением последовательности вложенных элементов корневого элемента TraC.   
8. Щелкните "Выполнить".
    * Щелкните "Обзор" и выберите файл Response4.xml.  
9. Нажмите кнопку "OК".
    * Просмотрите созданные выходные данные. Обратите внимание, что тип ответа правильно распознан как неподдерживаемый (ERModelEnumDataSourceHandler#EFSTA model#enumType#U)). Соответствующее сообщение добавлено в журнал Infolog, и большая часть модели данных не заполнена. Это происходит потому, что текущая настройка этого формата ER предполагает определенную последовательность вложенных элементов корневого элемента входящего файла.   
10. Закройте страницу.
11. В дереве выберите "Ответы\Выполнение проводки\TraC".
12. В поле "Порядок синтаксического разбора вложенных элементов" выберите "Любой".
    * Выберите "Любой" в поле "Порядок синтаксического разбора вложенных элементов", чтобы разрешить любую последовательность вложенных элементов для этого корневого элемента XML.  
13. Нажмите кнопку "Сохранить".
14. Щелкните "Сопоставить формат модели".
15. Щелкните "Выполнить".
    * Щелкните "Обзор" и выберите файл Response4.xml.  
16. Нажмите кнопку "OК".
    * Просмотрите созданные выходные данные. Обратите внимание, что тип ответа теперь должным образом распознан как равный файлу Response1.xml.  

