--- 
title: "Разработка конфигурации для импорта данных из внешнего файла в формате CSV (ER)"
description: "Используйте эту процедуру для разработка конфигураций электронной отчетности (ER) для импорта данных в приложение Dynamics 365 for Finance and Operations, Enterprise Edition из внешнего файла в формате CSV."
author: NickSelin
manager: AnnBe
ms.date: 12/12/2017
ms.topic: business-process
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
audience: Application User
ms.reviewer: kfend
ms.search.scope: Operations
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: Version 7.0.0
ms.translationtype: HT
ms.sourcegitcommit: 74606b1378e94e8a6945a408520c8b68648970d8
ms.openlocfilehash: 5c1766992531ee272ea156bc33c4c0ea8dfac27a
ms.contentlocale: ru-ru
ms.lasthandoff: 02/07/2018

---
# <a name="design-a-configuration-to-import-data-from-an-external-file-in-csv-format-er"></a><span data-ttu-id="f5615-103">Разработка конфигурации для импорта данных из внешнего файла в формате CSV (ER)</span><span class="sxs-lookup"><span data-stu-id="f5615-103">Design a configuration to import data from an external file in CSV format (ER)</span></span>

[!include[task guide banner](../../includes/task-guide-banner.md)]

<span data-ttu-id="f5615-104">Используйте эту процедуру для разработка конфигураций электронной отчетности (ER) для импорта данных в приложение Dynamics 365 for Finance and Operations, Enterprise Edition из внешнего файла в формате CSV.</span><span class="sxs-lookup"><span data-stu-id="f5615-104">Use this procedure to design Electronic reporting (ER) configurations to import data in to the Dynamics 365 for Finance and Operations, Enterprise edition application from an external file in CSV format.</span></span> <span data-ttu-id="f5615-105">В этой процедуре вам предстоит создать необходимые конфигурации ER для примера компании Litware, Inc. Чтобы выполнить следующие шаги, вам необходимо выполнить шаги в процедуре "Электронная отчетность — Создание поставщика конфигурации и пометка его как активного".</span><span class="sxs-lookup"><span data-stu-id="f5615-105">In this procedure, you will create the required ER configurations for the sample company, Litware, Inc. To complete these steps, you must first complete the steps in the procedure, “ER Create a configuration provider and mark it as active.”</span></span> 

<span data-ttu-id="f5615-106">Эта процедура предназначена для пользователей, которым назначена роль "Системный администратор" или "Разработчик электронной отчетности".</span><span class="sxs-lookup"><span data-stu-id="f5615-106">This procedure is created for users with the assigned role of System administrator or Electronic reporting developer.</span></span> <span data-ttu-id="f5615-107">Эти шеги можно выполнить с использованием набора данных USMF.</span><span class="sxs-lookup"><span data-stu-id="f5615-107">These steps can be completed using the USMF data set.</span></span> 

<span data-ttu-id="f5615-108">Необходимо также загрузить и сохранить локально следующие файлы: (https://go.microsoft.com/fwlink/?linkid=862266): 1099model.xml, 1099formatcsv.xml, 1099entriescsv.csv.</span><span class="sxs-lookup"><span data-stu-id="f5615-108">You must also download and save the following files locally: (https://go.microsoft.com/fwlink/?linkid=862266): 1099model.xml, 1099formatcsv.xml, 1099entriescsv.csv.</span></span>

1. <span data-ttu-id="f5615-109">Перейдите в раздел "Управление организацией" > "Рабочие области" > "Электронная отчетность".</span><span class="sxs-lookup"><span data-stu-id="f5615-109">Go to Organization administration > Workspaces > Electronic reporting.</span></span>
    * <span data-ttu-id="f5615-110">Можно настроить процесс для импорта внешних файлов в формате XML, TXT или CSV в таблицы в приложении Dynamics 365 for Finance and Operations, Enterprise Edition.</span><span class="sxs-lookup"><span data-stu-id="f5615-110">You can configure a process to import external files in XML, TXT, or CSV format to tables in the Dynamics 365 for Finance and Operations, Enterprise edition application.</span></span> <span data-ttu-id="f5615-111">Во-первых, необходимо создать абстрактную модель данных для представления импортированных данных с точки зрения бизнеса — для этого создается конфигурация модели данных ER.</span><span class="sxs-lookup"><span data-stu-id="f5615-111">First, you must create an abstract data model to represent the imported data, from a business standpoint – an ER data model configuration is created for that.</span></span> <span data-ttu-id="f5615-112">Затем определите структуру импортированного файла, которая сопоставляет разработанную модель данных как способ портирования данных из файла в абстрактную модель данных — для этого создается конфигурации формата ER.</span><span class="sxs-lookup"><span data-stu-id="f5615-112">Next, define a structure of the imported file that maps to the designed data model as the way to port data from the file to the abstract data model – an ER format configuration is created for that.</span></span> <span data-ttu-id="f5615-113">После этого необходимо расширить конфигурацию модели данных ER, добавив новое сопоставление модели, которое описывает, как данные из импортированного файла и постоянные данные из абстрактной модели данных используются для обновления таблиц приложения или информационных объектов.</span><span class="sxs-lookup"><span data-stu-id="f5615-113">Then, the ER data model configuration must be extended with a new model mapping that describes how the data from the imported file and the persisted data from the abstract data model is used to update the application tables or data entities.</span></span>  
    * <span data-ttu-id="f5615-114">В следующих шагах описывается, как импортировать проводки поставщиков, которые отслеживаются извне, из внешнего CSV-файла для последующего использования в сопоставлении поставщика по форме 1099.</span><span class="sxs-lookup"><span data-stu-id="f5615-114">The following steps show how externally tracked vendors’ transactions are imported from the external CSV file for later use in the vendor’s settlement for 1099’s forms.</span></span>   
    * <span data-ttu-id="f5615-115">Убедитесь, что поставщик конфигурации для примера компании Litware, Inc. доступен и помечен как активный.</span><span class="sxs-lookup"><span data-stu-id="f5615-115">Verify that the configuration provider for sample company, Litware, Inc. is available and marked as active.</span></span> <span data-ttu-id="f5615-116">Если вы не видите этого поставщика конфигурации, необходимо сначала выполнить шаги в процедуре "Электронная отчетность — создание поставщика конфигурации и пометка его как активного".</span><span class="sxs-lookup"><span data-stu-id="f5615-116">If you don’t see this configuration provider, you must first complete the steps in the procedure, “Create a configuration provider and mark it as active”.</span></span>  
2. <span data-ttu-id="f5615-117">Щелкните "Конфигурации отчетности".</span><span class="sxs-lookup"><span data-stu-id="f5615-117">Click Reporting configurations.</span></span>
3. <span data-ttu-id="f5615-118">Примените фильтр "Модель платежей по форме 1099".</span><span class="sxs-lookup"><span data-stu-id="f5615-118">Apply the '1099 Payments model' filter.</span></span> <span data-ttu-id="f5615-119">Если вы уже закончили процедуру "ER Создание необходимых конфигураций для импорта данных из внешнего файла для электронной отчетности" и конфигурация "Модель платежей по форме 1099" доступна в дереве конфигурации, пропустите все шаги, приведенные в следующей подзадаче.</span><span class="sxs-lookup"><span data-stu-id="f5615-119">If you already completed the procedure,” ER Create required configurations to import data from an external file for electronic reporting”, and the ‘1099 Payments model’ configuration is available in the configuration tree, skip all of the steps in the next sub-task.</span></span>   

## <a name="add-a-new-er-model-configuration"></a><span data-ttu-id="f5615-120">Добавление новой конфигурации модели ER</span><span class="sxs-lookup"><span data-stu-id="f5615-120">Add a new ER model configuration</span></span>
1. <span data-ttu-id="f5615-121">Вместо того чтобы создавать новую модель для поддержки импорта данных, загрузите файл 1099model.xml, загруженный ранее.</span><span class="sxs-lookup"><span data-stu-id="f5615-121">Instead of creating a new model to support data import, load the 1099model.xml file that you previously downloaded.</span></span> <span data-ttu-id="f5615-122">Этот файл содержит модель пользовательских данных проводок по поставщику.</span><span class="sxs-lookup"><span data-stu-id="f5615-122">This file contains the custom data model of vendors’ transactions.</span></span> <span data-ttu-id="f5615-123">Эта модель данных уже сопоставлена с необходимыми компонентами данных.</span><span class="sxs-lookup"><span data-stu-id="f5615-123">This data model is already mapped to the necessary data components.</span></span>  
2. <span data-ttu-id="f5615-124">Щелкните "Обменять".</span><span class="sxs-lookup"><span data-stu-id="f5615-124">Click Exchange.</span></span>
3. <span data-ttu-id="f5615-125">Щелкните "Загрузить из XML-файла".</span><span class="sxs-lookup"><span data-stu-id="f5615-125">Click Load from XML file.</span></span>
4. <span data-ttu-id="f5615-126">Нажмите кнопку "Обзор" и перейдите к ранее загруженному файлу 1099model.xml.</span><span class="sxs-lookup"><span data-stu-id="f5615-126">Click Browse and navigate to the 1099model.xml file that you previously downloaded.</span></span>  
5. <span data-ttu-id="f5615-127">Нажмите кнопку "OК".</span><span class="sxs-lookup"><span data-stu-id="f5615-127">Click OK.</span></span>

## <a name="add-a-new-er-format-configuration-that-supports-data-import"></a><span data-ttu-id="f5615-128">Добавление новой конфигурации формата ER, поддерживающей импорт данных</span><span class="sxs-lookup"><span data-stu-id="f5615-128">Add a new ER format configuration that supports data import</span></span>
1. <span data-ttu-id="f5615-129">В дереве выберите "Модель платежей по форме 1099".</span><span class="sxs-lookup"><span data-stu-id="f5615-129">In the tree, select '1099 Payments model'.</span></span>
2. <span data-ttu-id="f5615-130">Щелкните "Создать конфигурацию", чтобы открыть ниспадающее диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="f5615-130">Click Create configuration to open the drop dialog.</span></span>
3. <span data-ttu-id="f5615-131">В поле "Создать" введите «Формат, основанный на модели данных "Модель платежей по форме 1099"».</span><span class="sxs-lookup"><span data-stu-id="f5615-131">In the New field, enter 'Format based on data model 1099 Payments model'.</span></span>
4. <span data-ttu-id="f5615-132">Выберите "Да" в поле "Поддерживает импорт данных".</span><span class="sxs-lookup"><span data-stu-id="f5615-132">Select Yes in the Supports data import field.</span></span>
5. <span data-ttu-id="f5615-133">Нажмите клавишу ESC, чтобы закрыть эту страницу.</span><span class="sxs-lookup"><span data-stu-id="f5615-133">Press ESC key to close this page.</span></span>
    * <span data-ttu-id="f5615-134">Вместо того чтобы создавать новый формат ER для поддержки импорта данных, загрузите файл 1099formatcsv.xml, загруженный ранее.</span><span class="sxs-lookup"><span data-stu-id="f5615-134">Instead of creating a new ER format to support data import, load the 1099formatcsv.xml file that you previously downloaded.</span></span> <span data-ttu-id="f5615-135">Этот файл содержит требуемый формат ER, который определяет структуру входящего CSV-файла и соответствие этой структуры модели данных проводок поставщиков.</span><span class="sxs-lookup"><span data-stu-id="f5615-135">This file contains the required ER format that defines the structure of the incoming CSV file and the mapping of this structure to the data model of the vendors’ transactions.</span></span>   
6. <span data-ttu-id="f5615-136">Щелкните "Обменять".</span><span class="sxs-lookup"><span data-stu-id="f5615-136">Click Exchange.</span></span>
7. <span data-ttu-id="f5615-137">Щелкните "Загрузить из XML-файла".</span><span class="sxs-lookup"><span data-stu-id="f5615-137">Click Load from XML file.</span></span>
    * <span data-ttu-id="f5615-138">Нажмите кнопку "Обзор" и перейдите к ранее загруженному файлу 1099formatcsv.xml.</span><span class="sxs-lookup"><span data-stu-id="f5615-138">Click Browse and navigate to the 1099formatcsv.xml file that you previously downloaded.</span></span>  
8. <span data-ttu-id="f5615-139">Нажмите кнопку "OК".</span><span class="sxs-lookup"><span data-stu-id="f5615-139">Click OK.</span></span>
9. <span data-ttu-id="f5615-140">В дереве разверните узел "Модель платежей по форме 1099".</span><span class="sxs-lookup"><span data-stu-id="f5615-140">In the tree, expand '1099 Payments model'.</span></span>
10. <span data-ttu-id="f5615-141">В дереве выберите "Модель платежей по форме 1099\Для импорта проводок поставщиков (CSV)".</span><span class="sxs-lookup"><span data-stu-id="f5615-141">In the tree, select '1099 Payments model\For importing vendors' transactions (CSV)'.</span></span>

## <a name="review-format-settings"></a><span data-ttu-id="f5615-142">Проверка параметров формата</span><span class="sxs-lookup"><span data-stu-id="f5615-142">Review format settings</span></span>
1. <span data-ttu-id="f5615-143">Выберите Конструктор.</span><span class="sxs-lookup"><span data-stu-id="f5615-143">Click Designer.</span></span>
2. <span data-ttu-id="f5615-144">Щелкните "Развернуть/свернуть".</span><span class="sxs-lookup"><span data-stu-id="f5615-144">Click Expand/collapse.</span></span>
3. <span data-ttu-id="f5615-145">Установите переключатель "Показать сведения" в положение "Вкл.".</span><span class="sxs-lookup"><span data-stu-id="f5615-145">Toggle ‘Show details’ on.</span></span>
    * <span data-ttu-id="f5615-146">Созданный формат представляет ожидаемую структуру внешнего файла в формате CSV.</span><span class="sxs-lookup"><span data-stu-id="f5615-146">The designed format represents the expected structure of the external file in CSV format.</span></span>  
4. <span data-ttu-id="f5615-147">В дереве выберите "Входящие: файл\Корень: последовательность".</span><span class="sxs-lookup"><span data-stu-id="f5615-147">In the tree, select 'Incoming: File\Root: Sequence'.</span></span>
    * <span data-ttu-id="f5615-148">Для элемента "Корень" типа SEQUENCE в поле "Специальные символы" выбран параметр "Создать строку — Windows (CR LF)".</span><span class="sxs-lookup"><span data-stu-id="f5615-148">For the Root element of the type SEQUENCE, the option ‘New line - Windows (CR LF)’ has been selected in the ‘Special characters’ field.</span></span> <span data-ttu-id="f5615-149">На основании этого параметра каждая строка в файле анализа должна рассматриваться как отдельная запись.</span><span class="sxs-lookup"><span data-stu-id="f5615-149">Based on this setting, each line in the parsing file must be considered as a separate record.</span></span>   
5. <span data-ttu-id="f5615-150">В дереве выберите "Входящие: файл\Корень: последовательность\Строка: последовательность 1..\* ".</span><span class="sxs-lookup"><span data-stu-id="f5615-150">In the tree, select 'Incoming: File\Root: Sequence\Line: Sequence 1..\* '.</span></span>
    * <span data-ttu-id="f5615-151">Для элемента "Корень\Строка" типа SEQUENCE в поле "Кратность" выбран параметр "Один — много".</span><span class="sxs-lookup"><span data-stu-id="f5615-151">For the Root\Line element of the type SEQUENCE, the option ‘One many’ has been selected in the ‘Multiplicity’ field.</span></span> <span data-ttu-id="f5615-152">На основании этого параметра по крайней мере одна строка будет представлена в файле анализа.</span><span class="sxs-lookup"><span data-stu-id="f5615-152">Based on this setting, at least one line will be presented in the parsing file.</span></span>   
6. <span data-ttu-id="f5615-153">В дереве выберите "Входящие: файл\Корень: последовательность\Строка: последовательность 1..\* \Типы: обращение".</span><span class="sxs-lookup"><span data-stu-id="f5615-153">In the tree, select 'Incoming: File\Root: Sequence\Line: Sequence 1..\* \Types: Case'.</span></span>
    * <span data-ttu-id="f5615-154">Обратите внимание, что элемент "Корень\Строка\Типы" типа CASE был добавлен в качестве вложенного элемента последовательности "Корень\Строка".</span><span class="sxs-lookup"><span data-stu-id="f5615-154">Note that the Root\Line\Types element of the type CASE has been added as the nested element of the Root\Line sequence.</span></span> <span data-ttu-id="f5615-155">Поскольку этот элемент CASE содержит 3 вложенных элемента последовательности, этот параметр предполагает, что ожидается 3 различных типа строки в файле анализа.</span><span class="sxs-lookup"><span data-stu-id="f5615-155">Because this CASE element contains 3 nested sequence elements, this setting assumes that we expect to meet 3 different types of line in the parsing file.</span></span>   
7. <span data-ttu-id="f5615-156">В дереве выберите "Входящие: файл\Корень: последовательность\Строка: последовательность 1..\* \Типы: обращение\Заголовок: последовательность 1..1 ".</span><span class="sxs-lookup"><span data-stu-id="f5615-156">In the tree, select 'Incoming: File\Root: Sequence\Line: Sequence 1..\* \Types: Case\Header: Sequence 1..1 '.</span></span>
    * <span data-ttu-id="f5615-157">Элемент "Корень\Строка\Типы\Заголовок" типа SEQUENCE содержит вложенный элемент STRING, значение которого определено как фиксированное строковое значение.</span><span class="sxs-lookup"><span data-stu-id="f5615-157">The Root\Line\Types\Header element of the type SEQUENCE contains the nested STRING element the value of which has been defined as the fixed string value.</span></span> <span data-ttu-id="f5615-158">Эта последовательность будет анализировать строку заголовка файла анализа.</span><span class="sxs-lookup"><span data-stu-id="f5615-158">This sequence will parse the header line of the parsing file.</span></span>   
8. <span data-ttu-id="f5615-159">В дереве выберите "Входящие: файл\Корень: последовательность\Строка: последовательность 1..\* \Типы: обращение\Запись: последовательность 1..1 (,)".</span><span class="sxs-lookup"><span data-stu-id="f5615-159">In the tree, select 'Incoming: File\Root: Sequence\Line: Sequence 1..\* \Types: Case\Record: Sequence 1..1 (,)'.</span></span>
    * <span data-ttu-id="f5615-160">Элемент "Корень\Строка\Типы\Запись" типа SEQUENCE настроен для анализа строк проводки.</span><span class="sxs-lookup"><span data-stu-id="f5615-160">The Root\Line\Types\Record element of the type SEQUENCE, has been configured to parse the transaction lines.</span></span> <span data-ttu-id="f5615-161">Обратите внимание, что для параметра символа "Пользовательский разделитель" задана запятая.</span><span class="sxs-lookup"><span data-stu-id="f5615-161">Note that the ‘Custom delimiter’ character option has been configured as a comma.</span></span> <span data-ttu-id="f5615-162">Это означает, что запятая будет использоваться в качестве разделителя полей для этого типа строки в файле анализа.</span><span class="sxs-lookup"><span data-stu-id="f5615-162">This means that the comma will be used as a fields’ separator for this type of line in the parsing file.</span></span>   
    * <span data-ttu-id="f5615-163">Обратите внимание, что несколько вложенных элементов различных типов данных были добавлены к элементу "Корень\Строка\Типы\Запись" для анализа строк проводки как разделенных полей.</span><span class="sxs-lookup"><span data-stu-id="f5615-163">Note that several nested elements of different data types have been added for the Root\Line\Types\Record element for parsing the transaction’s lines as separated fields.</span></span> <span data-ttu-id="f5615-164">Обратите внимание, что для параметра "Заявление на предложение" задано значение "Нет".</span><span class="sxs-lookup"><span data-stu-id="f5615-164">Note that the ‘Quotation application’ option has been configured as ‘None’.</span></span> <span data-ttu-id="f5615-165">Это означает, что в файле анализа все поля этого типа будут учитываться как не имеющие вложенных символов.</span><span class="sxs-lookup"><span data-stu-id="f5615-165">This means that in the parsing file, all fields of this type will be considered as having no enclosed characters.</span></span>   
9. <span data-ttu-id="f5615-166">В дереве выберите "Входящие: файл\Корень: последовательность\Строка: последовательность 1..\* \Типы: обращение\Запись: последовательность 1..1 (,)\Дата проводки: время и дата".</span><span class="sxs-lookup"><span data-stu-id="f5615-166">In the tree, select 'Incoming: File\Root: Sequence\Line: Sequence 1..\* \Types: Case\Record: Sequence 1..1 (,)\TransactionDate: DateTime'.</span></span>
    * <span data-ttu-id="f5615-167">Например, элемент "Корень\Строка\Типы\Запись\Дата проводки" типа DATETIME настроен для получения значения даты и времени проводки из файла анализа в формате "ММ/дд/гггг".</span><span class="sxs-lookup"><span data-stu-id="f5615-167">For example, the Root\Line\Types\Record\TransactionDate element of the type DATETIME has been configured to get the transaction’s date and time value from the parsing file in the ‘M/d/yyyy’ format.</span></span>   
10. <span data-ttu-id="f5615-168">В дереве выберите "Входящие: файл\Корень: последовательность\Строка: последовательность 1..\* \Типы: обращение\Запись: последовательность 1..1 (,)\Код страны: строка 0..1 ".</span><span class="sxs-lookup"><span data-stu-id="f5615-168">In the tree, select 'Incoming: File\Root: Sequence\Line: Sequence 1..\* \Types: Case\Record: Sequence 1..1 (,)\CountryCode: String 0..1 '.</span></span>
    * <span data-ttu-id="f5615-169">Обратите внимание, что для элемента "Корень\Строка\Типы\Запись\Код страны" типа STRING в поле "Кратность" задано значение "Ноль — один".</span><span class="sxs-lookup"><span data-stu-id="f5615-169">Note that Root\Line\Types\Record\CountryCode element of the type STRING has been configured as having the option ‘Zero one’ in the ‘Multiplicity’ field.</span></span> <span data-ttu-id="f5615-170">Этот параметр рассматривает значение поля "Код страны" в строке анализа как необязательное.</span><span class="sxs-lookup"><span data-stu-id="f5615-170">This setting considers the value of the CountryCode field in the parsing line as optional.</span></span>   
11. <span data-ttu-id="f5615-171">В дереве выберите "Входящие: файл\Корень: последовательность\Строка: последовательность 1..\* \Типы: обращение\Запись: последовательность 1..1 (,)\Примечание: последовательность 1..1 (,)".</span><span class="sxs-lookup"><span data-stu-id="f5615-171">In the tree, select 'Incoming: File\Root: Sequence\Line: Sequence 1..\* \Types: Case\Record: Sequence 1..1 (,)\Remark: Sequence 1..1 (,)'.</span></span>
    * <span data-ttu-id="f5615-172">Обратите внимание, что для параметра "Корень\Строка\Типы\Запись\Примечание" типа SEQUENCE в поле "Заявление на предложение" задано значение "Все" и в поле "Кавычка" используется символ двойных кавычек.</span><span class="sxs-lookup"><span data-stu-id="f5615-172">Note that Root\Line\Types\Record\Remark element of the type SEQUENCE has been configured as having the option ‘All’ in the ‘Quotation application’ field and double quotes character in the ‘Quotation mark’ field.</span></span> <span data-ttu-id="f5615-173">Это означает, что все поля этого типа строк в файле анализа (описываемые вложенными элементами: текст типа STRING) будут рассматриваться как заключенные в символы двойных кавычек.</span><span class="sxs-lookup"><span data-stu-id="f5615-173">It means that all fields of this type of lines in the parsing file (described by the nested elements: Text of the STRING type) will be considered as enclosed in double quotes characters.</span></span>  
12. <span data-ttu-id="f5615-174">В дереве выберите "Входящие: файл\Корень: последовательность\Строка: последовательность 1..\* \Типы: обращение\1..1 (,)\Не проанализировано: последовательность 1..1 ".</span><span class="sxs-lookup"><span data-stu-id="f5615-174">In the tree, select 'Incoming: File\Root: Sequence\Line: Sequence 1..\* \Types: Case\Unparsed: Sequence 1..1 '.</span></span>
    * <span data-ttu-id="f5615-175">Элемент "Корень\Строка\Типы\Не проанализировано" типа SEQUENCE настроен для анализа строк проводки для структуры, которая не соответствует структуре, описанной выше в родительском элементе CASE.</span><span class="sxs-lookup"><span data-stu-id="f5615-175">The Root\Line\Types\Unparsed element of the type SEQUENCE has been configured to parse the transaction lines for the structure which does not match the structure described above in the parent CASE element.</span></span>   

## <a name="review-the-setting-of-the-format-mapping-to-the-data-model"></a><span data-ttu-id="f5615-176">Проверка параметра сопоставления формата с моделью данных</span><span class="sxs-lookup"><span data-stu-id="f5615-176">Review the setting of the format mapping to the data model</span></span>
1. <span data-ttu-id="f5615-177">Щелкните "Сопоставить формат модели".</span><span class="sxs-lookup"><span data-stu-id="f5615-177">Click Map format to model.</span></span>
    * <span data-ttu-id="f5615-178">Сопоставление модели "Сопоставление с моделью из формата CSV" описывает поток данных в передаче данных из входящего CSV-файла в модель данных.</span><span class="sxs-lookup"><span data-stu-id="f5615-178">The model mapping ‘Mapping to model from CSV format’ describes the data flow of the data transfer from the incoming CSV file to the data model.</span></span>   
2. <span data-ttu-id="f5615-179">Выберите Конструктор.</span><span class="sxs-lookup"><span data-stu-id="f5615-179">Click Designer.</span></span>
3. <span data-ttu-id="f5615-180">В дереве разверните "формат".</span><span class="sxs-lookup"><span data-stu-id="f5615-180">In the tree, expand 'format'.</span></span>
    * <span data-ttu-id="f5615-181">Обратите внимание, что созданный формат представляется как компонент источника данных.</span><span class="sxs-lookup"><span data-stu-id="f5615-181">Note that the designed format is presented here as a data source component.</span></span>  
4. <span data-ttu-id="f5615-182">В дереве разверните "формат\Входящие: Файл(входящий)".</span><span class="sxs-lookup"><span data-stu-id="f5615-182">In the tree, expand 'format\Incoming: File(Incoming)'.</span></span>
5. <span data-ttu-id="f5615-183">В дереве разверните "формат\Входящие: Файл(входящий)\Корень: Последовательность(корень)".</span><span class="sxs-lookup"><span data-stu-id="f5615-183">In the tree, expand 'format\Incoming: File(Incoming)\Root: Sequence(Root)'.</span></span>
6. <span data-ttu-id="f5615-184">В дереве разверните "формат\Входящие: Файл(входящий)\Корень: Последовательность(корень)\Строка: последовательность 1..\* (строка)".</span><span class="sxs-lookup"><span data-stu-id="f5615-184">In the tree, expand 'format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..\* (Line)'.</span></span>
7. <span data-ttu-id="f5615-185">В дереве разверните "формат\Входящие: Файл(входящий)\Корень: Последовательность(корень)\Строка: последовательность 1..\* (строка)\Типы: Обращение(типы)".</span><span class="sxs-lookup"><span data-stu-id="f5615-185">In the tree, expand 'format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..\* (Line)\Types: Case(Types)'.</span></span>
8. <span data-ttu-id="f5615-186">В дереве разверните "формат\Входящие: Файл(входящий)\Корень: Последовательность(корень)\Строка: последовательность 1..\* (строка)\Типы: Обращение(типы)\Запись: последовательность 1..1 (,)(запись)".</span><span class="sxs-lookup"><span data-stu-id="f5615-186">In the tree, expand 'format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..\* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)'.</span></span>
9. <span data-ttu-id="f5615-187">В дереве разверните "формат\Входящие: Файл(входящий)\Корень: Последовательность(корень)\Строка: последовательность 1..\* (строка)\Типы: Обращение(типы)\Запись: последовательность 1..1 (,)(запись)\Данные".</span><span class="sxs-lookup"><span data-stu-id="f5615-187">In the tree, expand 'format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..\* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)\Data'.</span></span>
10. <span data-ttu-id="f5615-188">В дереве разверните "формат\Входящие: Файл(входящий)\Корень: Последовательность(корень)\Строка: последовательность 1..\* (строка)\Типы: Обращение(типы)\Запись: последовательность 1..1 (,)(запись)\Данные\Код страны: строка 0..1 (код страны)".</span><span class="sxs-lookup"><span data-stu-id="f5615-188">In the tree, expand 'format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..\* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)\Data\CountryCode: String 0..1 (CountryCode)'.</span></span>
11. <span data-ttu-id="f5615-189">В дереве выберите "формат\Входящие: Файл(входящий)\Корень: Последовательность(корень)\Строка: последовательность 1..\* (строка)\Типы: Обращение(типы)\Запись: последовательность 1..1 (,)(запись)\Данные\Дата проводки: время и дата(дата проводки)".</span><span class="sxs-lookup"><span data-stu-id="f5615-189">In the tree, select 'format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..\* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)\Data\TransactionDate: DateTime(TransactionDate)'.</span></span>
    * <span data-ttu-id="f5615-190">Обратите внимание, что обязательные и необязательные элементы формата, например "Дата проводки" и "Код страны", выглядят по-другому в предопределенном компоненте источника данных "формат".</span><span class="sxs-lookup"><span data-stu-id="f5615-190">Note that the required and optional format elements, such as TransactionDate and CountryCode, look different in the predefined ‘format’ data source component.</span></span>   
12. <span data-ttu-id="f5615-191">В дереве разверните "Проводки = $both".</span><span class="sxs-lookup"><span data-stu-id="f5615-191">In the tree, expand 'Transactions = '$both''.</span></span>
    * <span data-ttu-id="f5615-192">Обратите внимание, что элементы формата, который определяет структуру импортированного файла, привязаны к элементам модели данных.</span><span class="sxs-lookup"><span data-stu-id="f5615-192">Note that the elements of the format that defines the structure of the imported file are bound to the elements of the data model.</span></span> <span data-ttu-id="f5615-193">На основании этих привязок содержимое импортированного CSV-файла будет храниться во время выполнения в существующей модели данных.</span><span class="sxs-lookup"><span data-stu-id="f5615-193">Based on these bindings, the content of the imported CSV file will be stored at run-time in the existing data model.</span></span> <span data-ttu-id="f5615-194">Обратите внимание на привязку элемента "Страна/регион".</span><span class="sxs-lookup"><span data-stu-id="f5615-194">Pay attention to the binding of the CountryRegion element.</span></span> <span data-ttu-id="f5615-195">Для любого элемента проводки во входящем файле, для которого не указано значение кода страны, в модели данных будет заполнен код страны по умолчанию "США".</span><span class="sxs-lookup"><span data-stu-id="f5615-195">For any transaction element in the incoming file that does not have a country code value specified, the default country code ‘USA’ will be populated in the data model.</span></span>   
13. <span data-ttu-id="f5615-196">Установите переключатель "Показать сведения" в положение "Вкл.".</span><span class="sxs-lookup"><span data-stu-id="f5615-196">Toggle on ‘Show details’.</span></span>
14. <span data-ttu-id="f5615-197">Перейдите на вкладку "Проверки".</span><span class="sxs-lookup"><span data-stu-id="f5615-197">Click the Validations tab.</span></span>
15. <span data-ttu-id="f5615-198">Нажмите кнопку Поиск.</span><span class="sxs-lookup"><span data-stu-id="f5615-198">Click Search.</span></span>
16. <span data-ttu-id="f5615-199">В поле "Поиск" введите "поставщик".</span><span class="sxs-lookup"><span data-stu-id="f5615-199">In the Find field, type 'vend'.</span></span>
17. <span data-ttu-id="f5615-200">Нажмите кнопку "Найти далее".</span><span class="sxs-lookup"><span data-stu-id="f5615-200">Click Find next.</span></span>
    * <span data-ttu-id="f5615-201">Это сопоставление формата может содержать пользовательскую логику для проверки точности импортируемых данных с точки зрения бизнеса.</span><span class="sxs-lookup"><span data-stu-id="f5615-201">This format mapping may contain user-defined logic to validate the accuracy of the imported data from a business standpoint.</span></span> <span data-ttu-id="f5615-202">Например, на основе параметра для любой строки импортируемого файла, структура которого не соответствует ни структуре строки заголовка, ни строке проводки, создается предупреждающее сообщение в Infolog, сообщающее пользователю об этом и указывающее порядковый номер проводки в файле.</span><span class="sxs-lookup"><span data-stu-id="f5615-202">For example, based on the setting, for any line in the importing file the structure of which does not match neither the structure of the header line nor transaction line, a warning message will be generated in the Infolog informing the user about this case, indicating the transaction’s sequence number in the file.</span></span>   
18. <span data-ttu-id="f5615-203">Закройте страницу.</span><span class="sxs-lookup"><span data-stu-id="f5615-203">Close the page.</span></span>

## <a name="run-the-format-mapping"></a><span data-ttu-id="f5615-204">Выполнение сопоставления формата</span><span class="sxs-lookup"><span data-stu-id="f5615-204">Run the format mapping</span></span>
<span data-ttu-id="f5615-205">В целях тестирования выполните сопоставление формата с помощью ранее загруженного файла 1099entriescsv.csv.</span><span class="sxs-lookup"><span data-stu-id="f5615-205">For testing purposes, execute the format mapping using the 1099entriescsv.csv file that you previously downloaded.</span></span> <span data-ttu-id="f5615-206">Созданные выходные данные будут представлять данные, импортируемые из выбранного CSV-файла и заполняющие модель пользовательских данных в реальном импорте.</span><span class="sxs-lookup"><span data-stu-id="f5615-206">The generated output will present data that will be imported from the selected CSV file and populated to the custom data model at real import.</span></span>   
1. <span data-ttu-id="f5615-207">Щелкните "Выполнить".</span><span class="sxs-lookup"><span data-stu-id="f5615-207">Click Run.</span></span>
    * <span data-ttu-id="f5615-208">Нажмите кнопку "Обзор" и перейдите к ранее загруженному файлу 1099entriescsv.csv.</span><span class="sxs-lookup"><span data-stu-id="f5615-208">Click Browse and navigate to the 1099entriescsv.csv file that you previously downloaded.</span></span>  
2. <span data-ttu-id="f5615-209">Нажмите кнопку "OК".</span><span class="sxs-lookup"><span data-stu-id="f5615-209">Click OK.</span></span>
    * <span data-ttu-id="f5615-210">Обратите внимание на предупреждающие сообщения о строках, которые не приняты.</span><span class="sxs-lookup"><span data-stu-id="f5615-210">Note the warning messages about lines that are not accepted.</span></span> <span data-ttu-id="f5615-211">Строка 4 содержит значение дохода, представленное в недопустимом формате, в то время как строка 7 не содержит текст примечания проводки в двойных кавычках.</span><span class="sxs-lookup"><span data-stu-id="f5615-211">Line 4 contains the income value that is presented in the non-acceptable format while line 7 does not contain the transaction remark text in double quotes.</span></span>   
    * <span data-ttu-id="f5615-212">Просмотрите выходные данные в формате XML, представляющем данные, которые были импортированы из выбранного файла, а затем перенесены в модель данных.</span><span class="sxs-lookup"><span data-stu-id="f5615-212">Review the output in XML format that represents the data that has been imported from the selected file and ported to the data model.</span></span> <span data-ttu-id="f5615-213">Обратите внимание, что были обработаны все 7 строк импортированного CSV-файла.</span><span class="sxs-lookup"><span data-stu-id="f5615-213">Note that all 7 lines of the imported CSV file were processed.</span></span> <span data-ttu-id="f5615-214">Заголовки содержащих полей в строке 1 пропущены, 4 проводки проанализированы верно, а 2 проводки распознаны как недопустимые.</span><span class="sxs-lookup"><span data-stu-id="f5615-214">The containing fields’ titles line 1 were skipped, 4 transactions were properly parsed, and 2 transactions were recognized as not valid.</span></span>   
3. <span data-ttu-id="f5615-215">Закройте страницу.</span><span class="sxs-lookup"><span data-stu-id="f5615-215">Close the page.</span></span>
4. <span data-ttu-id="f5615-216">Закройте страницу.</span><span class="sxs-lookup"><span data-stu-id="f5615-216">Close the page.</span></span>


