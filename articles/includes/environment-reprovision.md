<span data-ttu-id="27ed1-101">Чтобы при копировании базы данных между средами скопированная база данных стала полностью функциональной, вам понадобится запустить средство повторной подготовки среды для обеспечения актуальности всех компонентов Commerce.</span><span class="sxs-lookup"><span data-stu-id="27ed1-101">When copying a database between environments, you will need to run the environment re-provisioning tool before the copied database is fully functional, to ensure that all Commerce components are up-to-date.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="27ed1-102">Рекомендуется выполнять эту процедуру независимо от того, используются компоненты Commerce или нет, так как функциональные возможности Commerce включены во все среды.</span><span class="sxs-lookup"><span data-stu-id="27ed1-102">We recommend that you run this procedure whether you are using Commerce components or not, because Commerce functionality is included in all environments.</span></span> 

<span data-ttu-id="27ed1-103">Перед продолжением необходимо убедиться, что выполнены следующие необходимые условия:</span><span class="sxs-lookup"><span data-stu-id="27ed1-103">Before you continue, you must make sure that the following prerequisites are met:</span></span>
1. <span data-ttu-id="27ed1-104">При обновлении до выпуска за июль 2017 г. (также называется 7.2) 7.2.11792.56024 примените следующие исправления приложений X++ в конечной среде перед выполнением обновления данных в этой среде.</span><span class="sxs-lookup"><span data-stu-id="27ed1-104">If you are upgrading to the July 2017 release (also known as 7.2) 7.2.11792.56024, apply the following application X++ hotfixes in the destination environment before running the data upgrade in that environment.</span></span> <span data-ttu-id="27ed1-105">Это предотвратит появление различных ошибок во время обновления данных.</span><span class="sxs-lookup"><span data-stu-id="27ed1-105">These will prevent various errors occurring during the data upgrade:</span></span>

    - <span data-ttu-id="27ed1-106">КБ 4036156 — обновление дополнительной версии Retail — "Не задана последовательность для номеров вариантов."</span><span class="sxs-lookup"><span data-stu-id="27ed1-106">KB 4036156 - Retail minor version upgrade - 'Variant number sequence is not set.'</span></span> <span data-ttu-id="27ed1-107">Этот пакет исправлений также включает в себя KB 4035399 и KB 4035751.</span><span class="sxs-lookup"><span data-stu-id="27ed1-107">This fix package also includes KB 4035399 and KB 4035751.</span></span> <span data-ttu-id="27ed1-108">Обратите внимание, что для использования этого пакета должно быть установлено обновление не ниже Platform Update 9.</span><span class="sxs-lookup"><span data-stu-id="27ed1-108">Note that you must have a minimum of Platform Update 9 to use this package.</span></span> <span data-ttu-id="27ed1-109">При наличии сомнений установите новейшие двоичные файлы.</span><span class="sxs-lookup"><span data-stu-id="27ed1-109">If you are unsure, install the latest binaries.</span></span>
    
2. <span data-ttu-id="27ed1-110">При обновлении с Microsoft Dynamics AX 2012 перед запуском обновления данных установите следующие исправления приложений X++ в конечной среде:</span><span class="sxs-lookup"><span data-stu-id="27ed1-110">If you are upgrading from Microsoft Dynamics AX 2012, install the following application X++ fixes in the destination environment before you run the data upgrade:</span></span>
    - <span data-ttu-id="27ed1-111">KB 4033183 — сбой обновления (не розничного) Dynamics AX 2012 R2 или Dynamics AX 2012 R3 (до накопительного обновления CU8) с сообщением о том, что не найден объект для dbo.RETAILTILLLAYOUTZONE.</span><span class="sxs-lookup"><span data-stu-id="27ed1-111">KB 4033183 - Dynamics AX 2012 R2 or Dynamics AX 2012 R3 Pre-CU8 non-retail upgrade fails with Object not found for dbo.RETAILTILLLAYOUTZONE.</span></span>
    - <span data-ttu-id="27ed1-112">KB 4040692 — сбой обновления Dynamics AX 2012 R3 до Microsoft Dynamics 365 for Operations 7.2 по повторяющемуся индексу RetailSalesLine в SalesLineIdx.</span><span class="sxs-lookup"><span data-stu-id="27ed1-112">KB 4040692 - Dynamics AX 2012 R3 to Microsoft Dynamics 365 for Operations 7.2 upgrade fails on RetailSalesLine duplicate index on SalesLineIdx.</span></span>
    - <span data-ttu-id="27ed1-113">КБ 4035490 — проблема производительности сценария обновления поля GeneralJournalAccountEntry MainAccount.</span><span class="sxs-lookup"><span data-stu-id="27ed1-113">KB 4035490 - Performance issue with GeneralJournalAccountEntry MainAccount field upgrade script.</span></span>


<span data-ttu-id="27ed1-114">Выполните следующие действия, чтобы выполнить средство повторной подготовки среды.</span><span class="sxs-lookup"><span data-stu-id="27ed1-114">Follow these steps to run the Environment reprovisioning tool.</span></span>

1. <span data-ttu-id="27ed1-115">В библиотеке общих ресурсов выберите **Готовый к развертыванию программный пакет**.</span><span class="sxs-lookup"><span data-stu-id="27ed1-115">In the Shared asset library, select **Software deployable package**.</span></span>
2. <span data-ttu-id="27ed1-116">Загрузите средство повторной подготовки среды.</span><span class="sxs-lookup"><span data-stu-id="27ed1-116">Download the Environment reprovisioning tool.</span></span>
3. <span data-ttu-id="27ed1-117">В библиотеке общих ресурсов для вашего проекта выберите **Готовый к развертыванию программный пакет**.</span><span class="sxs-lookup"><span data-stu-id="27ed1-117">In the asset library for your project, select **Software deployable package**.</span></span>
4. <span data-ttu-id="27ed1-118">Выберите **Создать** для создания нового пакета.</span><span class="sxs-lookup"><span data-stu-id="27ed1-118">Select **New** to create a new package.</span></span>
5. <span data-ttu-id="27ed1-119">Введите имя и описание для пакета.</span><span class="sxs-lookup"><span data-stu-id="27ed1-119">Enter a name and description for the package.</span></span> <span data-ttu-id="27ed1-120">В качестве имени пакета можно использовать **Средство повторной подготовки среды**.</span><span class="sxs-lookup"><span data-stu-id="27ed1-120">You can use **Environment reprovisioning tool** as the package name.</span></span>
6. <span data-ttu-id="27ed1-121">Отправьте пакет, который был загружен ранее.</span><span class="sxs-lookup"><span data-stu-id="27ed1-121">Upload the package that you downloaded earlier.</span></span>
7. <span data-ttu-id="27ed1-122">На странице **Сведения среды** для целевой среды выберите команду **Поддержка** > **Применить обновления**.</span><span class="sxs-lookup"><span data-stu-id="27ed1-122">On the **Environment details** page for your target environment, select **Maintain** > **Apply updates**.</span></span>
8. <span data-ttu-id="27ed1-123">Выберите загруженное ранее средство повторной подготовки среды, затем выберите **Применить**, чтобы применить пакет.</span><span class="sxs-lookup"><span data-stu-id="27ed1-123">Select the Environment reprovisioning tool that you uploaded earlier, and then select **Apply** to apply the package.</span></span>
9. <span data-ttu-id="27ed1-124">Контролируйте процесс развертывания пакета.</span><span class="sxs-lookup"><span data-stu-id="27ed1-124">Monitor the progress of the package deployment.</span></span> 

<span data-ttu-id="27ed1-125">Подробнее порядок применения готового к развертыванию пакета см. в разделе [Применение готового к развертыванию пакета](../deployment/create-apply-deployable-package.md).</span><span class="sxs-lookup"><span data-stu-id="27ed1-125">For more information about how to apply a deployable package, see [Apply a deployable package](../deployment/create-apply-deployable-package.md).</span></span> <span data-ttu-id="27ed1-126">Подробнее о том, как вручную применить готовый к развертыванию пакет, см. в разделе [Установка готового к развертыванию пакета](../deployment/install-deployable-package.md).</span><span class="sxs-lookup"><span data-stu-id="27ed1-126">For more information about how to manually apply a deployable package, see [Install a deployable package](../deployment/install-deployable-package.md).</span></span>
