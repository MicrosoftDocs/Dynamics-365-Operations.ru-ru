---
title: Оптимизация запланированных пакетных заданий BYOD
description: В этой теме объясняется, как оптимизировать производительность, когда вы используете функцию использования собственной базы данных (BYOD) с Microsoft Dynamics 365 Human Resources.
author: andreabichsel
manager: tfehr
ms.date: 08/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-human-resources
ms.technology: ''
audience: Application User
ms.reviewer: anbichse
ms.search.scope: Human Resources
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: anbichse
ms.search.validFrom: 2020-08-10
ms.dyn365.ops.version: Platform update 36
ms.openlocfilehash: 4b9cf4b4181b64ef4daf397edd852fb2f881424e
ms.sourcegitcommit: ea2d652867b9b83ce6e5e8d6a97d2f9460a84c52
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/03/2021
ms.locfileid: "5113926"
---
# <a name="optimize-byod-scheduled-batch-jobs"></a>Оптимизация запланированных пакетных заданий BYOD

В этой теме объясняется, как оптимизировать производительность, когда вы используете функцию использования собственной базы данных (BYOD). Дополнительные сведения о BYOD см. в разделе [Использование собственной базы данных (BYOD)](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/analytics/export-entities-to-your-own-database?toc=/dynamics365/human-resources/toc.json).

## <a name="performance-considerations-for-data-export"></a>Вопросы производительности при экспорте данных

После публикации сущностей в целевой базе данных можно использовать функцию экспорта в рабочей области **Управление данными** для перемещения данных. Функция экспорта позволяет определить задание перемещения данных, которое содержит один или несколько сущностей. Дополнительные сведения об экспорте данных см. в разделе [Обзор заданий импорта и экспорта данных](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/data-entities/data-import-export-job?toc=/dynamics365/human-resources/toc.json).

Страницу **Экспорт** можно использовать для экспорта данных в другие целевые форматы данных, такие как файл значений с разделителями-запятыми (CSV). Эта страница также поддерживает базы данных SQL в качестве другого места назначения.

Можно создать проект данных с несколькими сущностями и использовать пакетное задание, чтобы запланировать выполнение этого проекта данных. При выборе параметра **Пакетный экспорт** можно запланировать периодическое выполнение задания экспорта данных.

Чтобы помочь сохранить общую надежность экспорта BYOD, следует соблюдать осторожность при добавлении нескольких сущностей в проект экспорта. При определении числа сущностей, добавляемых в один и тот же проект, следует рассмотреть следующие параметры:

- Сложность сущностей
- Ожидаемый объем данных на сущность
- Общее время, которое потребуется для завершения экспорта на уровне задания

Для обеспечения оптимальной производительности следует избегать добавления сотен сущностей в один проект. Рекомендуется создать несколько заданий, каждое из которых содержит меньшее количество сущностей.

## <a name="scheduling-byod-batch-jobs"></a>Планирование пакетных заданий BYOD

Чтобы помочь снизить воздействие на пользователей Microsoft Dynamics 365 Human Resources, выполняйте пакетные задания BYOD ночью или после рабочих часов. Обязательно проверьте часовой пояс для повторяющихся пакетных заданий. Некоторые пакетные задания могут использовать стандартное тихоокеанское время (PST).

Чтобы избежать проблем с производительностью, при настройке частоты планирования для пакетных заданий BYOD необходимо учитывать следующие факторы:

- Время, необходимое для выполнения каждого пакетного задания
- Бизнес-потребность в данных в BYOD

Установите частоту для каждого пакетного задания со значением, которое гарантирует, что задание может быть завершено задолго до следующего запланированного времени выполнения. Избегайте параллельного запуска нескольких заданий, поскольку такой подход может негативно повлиять на производительность модуля Human Resources.

Для повышения производительности следует всегда использовать параметр **Пакетный экспорт** на странице **Экспорт** для планирования пакетных заданий BYOD. Не следует планировать повторяющиеся экспорты в пункте **Управление \> Управление повторяющимися задания данных**.

## <a name="incremental-export"></a>Инкрементный экспорт

При добавлении сущности для экспорта данных можно выполнить либо инкрементную принудительную отправку (экспорт), либо полную принудительную отправку. При полной принудительной отправке все существующие записи удаляются из сущности в базе данных BYOD. Затем вставляется текущий набор записей из сущности Human Resources.

Для выполнения инкрементной принудительной отправки необходимо включить отслеживание изменений для каждой из сущностей на странице **Сущности**. Дополнительные сведения см. в разделе [Включение отслеживания изменений для сущностей](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/data-entities/entity-change-track?toc=/dynamics365/human-resources/toc.json).

При выборе инкрементной принудительной отправки первая отправка всегда является полной. SQL отслеживает изменения с первой полной принудительной отправки. Когда вставляется новая запись или когда запись обновляется или удаляется, это изменение отражается в целевой сущности.

## <a name="time-outs"></a>Параметры времен ожидания

Ниже приведены тайм-ауты по умолчанию для экспортов BYOD:

- Десять минут для операций усечения
- Один час для операций массовой вставки

При больших объемах эти настройки времени ожидания могут оказаться недостаточными. Чтобы обновить их, перейдите к пункту **Управление данными \> Параметры структуры \> Использование своей собственной базы данных**. Эти интервалы времени ожидания относятся к конкретным компаниям и должны быть настроены отдельно для каждой компании.

## <a name="known-limitations"></a>Известные ограничения

Функция BYOD имеет следующие ограничения:

- В процессе синхронизации не должно быть активных блокировок базы данных. Активные блокировки могут вызывать медленную запись или даже сбой экспорта данных в базу данных SQL Azure.
- Нельзя экспортировать составные сущности в собственную базу данных. В настоящее время составные сущности не поддерживаются. Необходимо экспортировать отдельные сущности, которые составляют составную сущность. Однако обе сущности можно экспортировать в один и тот же проект данных.
- Сущности, у которых нет уникальных ключей, нельзя экспортировать, используя инкрементную принудительную отправку. С этим ограничением можно столкнуться, особенно при попытке инкрементного экспорта записей из нескольких готовых сущностей. Поскольку эти сущности были созданы для включения импорта данных, они не имеют уникального ключа.

## <a name="troubleshooting"></a>Устранение неполадок

### <a name="incremental-push-doesnt-work-correctly"></a>Инкрементная принудительная отправка не работает должным образом

**Проблема:** при выполнении полной принудительной отправки для сущности вы видите большой набор записей в BYOD при использовании инструкции **select**. Однако при выполнении инкрементной принудительной отправки отображаются только несколько записей в BYOD. Кажется, что инкрементная принудительная отправка удалила все записи и были добавлены только измененные записи в BYOD.

**Решение:** таблицы отслеживания изменений SQL могут быть не в ожидаемом состоянии. В случае такого типа рекомендуется отключить отслеживание изменений для сущности, а затем снова его включить. Дополнительные сведения см. в разделе [Включение отслеживания изменений для сущностей](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/data-entities/entity-change-track?toc=/dynamics365/human-resources/toc.json).

## <a name="see-also"></a>См. также

[Обзор управления данными](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/data-entities/data-entities-data-packages?toc=/dynamics365/human-resources/toc.json)<br>
[Использование своей собственной базы данных (BYOD)](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/analytics/export-entities-to-your-own-database?toc=/dynamics365/human-resources/toc.json)<br>
[Обзор заданий импорта и экспорта данных](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/data-entities/data-import-export-job?toc=/dynamics365/human-resources/toc.json)<br>
[Включение отслеживания изменений для объектов](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/data-entities/entity-change-track?toc=/dynamics365/human-resources/toc.json)
