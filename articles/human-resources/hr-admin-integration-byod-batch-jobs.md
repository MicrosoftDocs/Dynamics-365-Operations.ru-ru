---
title: Оптимизация запланированных пакетных заданий BYOD
description: В этой теме объясняется, как оптимизировать производительность, когда вы используете функцию использования собственной базы данных (BYOD) с Microsoft Dynamics 365 Human Resources.
author: andreabichsel
manager: AnnBe
ms.date: 08/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-human-resources
ms.technology: ''
audience: Application User
ms.reviewer: anbichse
ms.search.scope: Core, Human Resources
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: anbichse
ms.search.validFrom: 2020-08-10
ms.dyn365.ops.version: Platform update 36
ms.openlocfilehash: d08762ff40b4da8264bd5bc4a1c16fd2afc4d610
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/13/2020
ms.locfileid: "4420223"
---
# <a name="optimize-byod-scheduled-batch-jobs"></a><span data-ttu-id="820f6-103">Оптимизация запланированных пакетных заданий BYOD</span><span class="sxs-lookup"><span data-stu-id="820f6-103">Optimize BYOD scheduled batch jobs</span></span>

<span data-ttu-id="820f6-104">В этой теме объясняется, как оптимизировать производительность, когда вы используете функцию использования собственной базы данных (BYOD).</span><span class="sxs-lookup"><span data-stu-id="820f6-104">This topic explains how to optimize performance when you're using the bring your own database (BYOD) feature.</span></span> <span data-ttu-id="820f6-105">Дополнительные сведения о BYOD см. в разделе [Использование собственной базы данных (BYOD)](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/analytics/export-entities-to-your-own-database?toc=/dynamics365/human-resources/toc.json).</span><span class="sxs-lookup"><span data-stu-id="820f6-105">For more information about BYOD, see [Bring your own database (BYOD)](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/analytics/export-entities-to-your-own-database?toc=/dynamics365/human-resources/toc.json).</span></span>

## <a name="performance-considerations-for-data-export"></a><span data-ttu-id="820f6-106">Вопросы производительности при экспорте данных</span><span class="sxs-lookup"><span data-stu-id="820f6-106">Performance considerations for data export</span></span>

<span data-ttu-id="820f6-107">После публикации сущностей в целевой базе данных можно использовать функцию экспорта в рабочей области **Управление данными** для перемещения данных.</span><span class="sxs-lookup"><span data-stu-id="820f6-107">After entities are published to the destination database, you can use the Export function in the **Data management** workspace to move data.</span></span> <span data-ttu-id="820f6-108">Функция экспорта позволяет определить задание перемещения данных, которое содержит один или несколько сущностей.</span><span class="sxs-lookup"><span data-stu-id="820f6-108">The Export function lets you define a Data movement job that contains one or more entities.</span></span> <span data-ttu-id="820f6-109">Дополнительные сведения об экспорте данных см. в разделе [Обзор заданий импорта и экспорта данных](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/data-entities/data-import-export-job?toc=/dynamics365/human-resources/toc.json).</span><span class="sxs-lookup"><span data-stu-id="820f6-109">For more information about data export, see [Data import and export jobs overview](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/data-entities/data-import-export-job?toc=/dynamics365/human-resources/toc.json).</span></span>

<span data-ttu-id="820f6-110">Страницу **Экспорт** можно использовать для экспорта данных в другие целевые форматы данных, такие как файл значений с разделителями-запятыми (CSV).</span><span class="sxs-lookup"><span data-stu-id="820f6-110">You can use the **Export** page to export data into different target data formats, such as a comma-separated values (CSV) file.</span></span> <span data-ttu-id="820f6-111">Эта страница также поддерживает базы данных SQL в качестве другого места назначения.</span><span class="sxs-lookup"><span data-stu-id="820f6-111">This page also supports SQL databases as another destination.</span></span>

<span data-ttu-id="820f6-112">Можно создать проект данных с несколькими сущностями и использовать пакетное задание, чтобы запланировать выполнение этого проекта данных.</span><span class="sxs-lookup"><span data-stu-id="820f6-112">You can create a data project that has multiple entities and use a batch job to schedule that data project to run.</span></span> <span data-ttu-id="820f6-113">При выборе параметра **Пакетный экспорт** можно запланировать периодическое выполнение задания экспорта данных.</span><span class="sxs-lookup"><span data-stu-id="820f6-113">If you select the **Export in batch** option, you can schedule the data export job to run periodically.</span></span>

<span data-ttu-id="820f6-114">Чтобы помочь сохранить общую надежность экспорта BYOD, следует соблюдать осторожность при добавлении нескольких сущностей в проект экспорта.</span><span class="sxs-lookup"><span data-stu-id="820f6-114">To help preserve the overall reliability of the BYOD export, you must be careful when you add multiple entities to an export project.</span></span> <span data-ttu-id="820f6-115">При определении числа сущностей, добавляемых в один и тот же проект, следует рассмотреть следующие параметры:</span><span class="sxs-lookup"><span data-stu-id="820f6-115">When you're determining the number of entities to add to the same project, consider the following parameters:</span></span>

- <span data-ttu-id="820f6-116">Сложность сущностей</span><span class="sxs-lookup"><span data-stu-id="820f6-116">The complexity of the entities</span></span>
- <span data-ttu-id="820f6-117">Ожидаемый объем данных на сущность</span><span class="sxs-lookup"><span data-stu-id="820f6-117">The expected data volume per entity</span></span>
- <span data-ttu-id="820f6-118">Общее время, которое потребуется для завершения экспорта на уровне задания</span><span class="sxs-lookup"><span data-stu-id="820f6-118">The overall time that will be required to complete the export at the job level</span></span>

<span data-ttu-id="820f6-119">Для обеспечения оптимальной производительности следует избегать добавления сотен сущностей в один проект.</span><span class="sxs-lookup"><span data-stu-id="820f6-119">For the best performance, avoid adding hundreds of entities to a single project.</span></span> <span data-ttu-id="820f6-120">Рекомендуется создать несколько заданий, каждое из которых содержит меньшее количество сущностей.</span><span class="sxs-lookup"><span data-stu-id="820f6-120">We recommend that you create multiple jobs, each of which contains fewer entities.</span></span>

## <a name="scheduling-byod-batch-jobs"></a><span data-ttu-id="820f6-121">Планирование пакетных заданий BYOD</span><span class="sxs-lookup"><span data-stu-id="820f6-121">Scheduling BYOD batch jobs</span></span>

<span data-ttu-id="820f6-122">Чтобы помочь снизить воздействие на пользователей Microsoft Dynamics 365 Human Resources, выполняйте пакетные задания BYOD ночью или после рабочих часов.</span><span class="sxs-lookup"><span data-stu-id="820f6-122">To help reduce the impact on users of Microsoft Dynamics 365 Human Resources, run BYOD batch jobs at night or after hours.</span></span> <span data-ttu-id="820f6-123">Обязательно проверьте часовой пояс для повторяющихся пакетных заданий.</span><span class="sxs-lookup"><span data-stu-id="820f6-123">Be sure to check the time zone for recurring batch jobs.</span></span> <span data-ttu-id="820f6-124">Некоторые пакетные задания могут использовать стандартное тихоокеанское время (PST).</span><span class="sxs-lookup"><span data-stu-id="820f6-124">Some batch jobs might use Pacific Standard Time (PST).</span></span>

<span data-ttu-id="820f6-125">Чтобы избежать проблем с производительностью, при настройке частоты планирования для пакетных заданий BYOD необходимо учитывать следующие факторы:</span><span class="sxs-lookup"><span data-stu-id="820f6-125">To help avoid performance issues, consider the following factors when you configure the scheduling frequency for BYOD batch jobs:</span></span>

- <span data-ttu-id="820f6-126">Время, необходимое для выполнения каждого пакетного задания</span><span class="sxs-lookup"><span data-stu-id="820f6-126">The time that is required to complete each batch job</span></span>
- <span data-ttu-id="820f6-127">Бизнес-потребность в данных в BYOD</span><span class="sxs-lookup"><span data-stu-id="820f6-127">The business need for the data in BYOD</span></span>

<span data-ttu-id="820f6-128">Установите частоту для каждого пакетного задания со значением, которое гарантирует, что задание может быть завершено задолго до следующего запланированного времени выполнения.</span><span class="sxs-lookup"><span data-stu-id="820f6-128">Set the frequency for each batch job to a value that ensures that the job can be completed well before its next scheduled run time.</span></span> <span data-ttu-id="820f6-129">Избегайте параллельного запуска нескольких заданий, поскольку такой подход может негативно повлиять на производительность модуля Human Resources.</span><span class="sxs-lookup"><span data-stu-id="820f6-129">Avoid running multiple jobs in parallel, because this approach can negatively affect the performance of Human Resources.</span></span>

<span data-ttu-id="820f6-130">Для повышения производительности следует всегда использовать параметр **Пакетный экспорт** на странице **Экспорт** для планирования пакетных заданий BYOD.</span><span class="sxs-lookup"><span data-stu-id="820f6-130">For the best performance, always use the **Export in batch** option on the **Export** page to schedule BYOD batch jobs.</span></span> <span data-ttu-id="820f6-131">Не следует планировать повторяющиеся экспорты в пункте **Управление \> Управление повторяющимися задания данных**.</span><span class="sxs-lookup"><span data-stu-id="820f6-131">Avoid scheduling recurring exports at **Manage \> Manage recurring data jobs**.</span></span>

## <a name="incremental-export"></a><span data-ttu-id="820f6-132">Инкрементный экспорт</span><span class="sxs-lookup"><span data-stu-id="820f6-132">Incremental export</span></span>

<span data-ttu-id="820f6-133">При добавлении сущности для экспорта данных можно выполнить либо инкрементную принудительную отправку (экспорт), либо полную принудительную отправку.</span><span class="sxs-lookup"><span data-stu-id="820f6-133">When you add an entity for data export, you can do either an incremental push (export) or a full push.</span></span> <span data-ttu-id="820f6-134">При полной принудительной отправке все существующие записи удаляются из сущности в базе данных BYOD.</span><span class="sxs-lookup"><span data-stu-id="820f6-134">A full push deletes all existing records from an entity in the BYOD database.</span></span> <span data-ttu-id="820f6-135">Затем вставляется текущий набор записей из сущности Human Resources.</span><span class="sxs-lookup"><span data-stu-id="820f6-135">It then inserts the current set of records from the Human Resources entity.</span></span>

<span data-ttu-id="820f6-136">Для выполнения инкрементной принудительной отправки необходимо включить отслеживание изменений для каждой из сущностей на странице **Сущности**.</span><span class="sxs-lookup"><span data-stu-id="820f6-136">To do an incremental push, you must turn on change tracking for each entity on the **Entities** page.</span></span> <span data-ttu-id="820f6-137">Дополнительные сведения см. в разделе [Включение отслеживания изменений для сущностей](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/data-entities/entity-change-track?toc=/dynamics365/human-resources/toc.json).</span><span class="sxs-lookup"><span data-stu-id="820f6-137">For more information, see [Enable change tracking for entities](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/data-entities/entity-change-track?toc=/dynamics365/human-resources/toc.json).</span></span>

<span data-ttu-id="820f6-138">При выборе инкрементной принудительной отправки первая отправка всегда является полной.</span><span class="sxs-lookup"><span data-stu-id="820f6-138">If you select an incremental push, the first push is always a full push.</span></span> <span data-ttu-id="820f6-139">SQL отслеживает изменения с первой полной принудительной отправки.</span><span class="sxs-lookup"><span data-stu-id="820f6-139">SQL tracks changes from this first full push.</span></span> <span data-ttu-id="820f6-140">Когда вставляется новая запись или когда запись обновляется или удаляется, это изменение отражается в целевой сущности.</span><span class="sxs-lookup"><span data-stu-id="820f6-140">When a new record is inserted, or when a record is updated or deleted, the change is reflected in the destination entity.</span></span>

## <a name="time-outs"></a><span data-ttu-id="820f6-141">Параметры времен ожидания</span><span class="sxs-lookup"><span data-stu-id="820f6-141">Time-outs</span></span>

<span data-ttu-id="820f6-142">Ниже приведены тайм-ауты по умолчанию для экспортов BYOD:</span><span class="sxs-lookup"><span data-stu-id="820f6-142">Here are the default time-outs for BYOD exports:</span></span>

- <span data-ttu-id="820f6-143">Десять минут для операций усечения</span><span class="sxs-lookup"><span data-stu-id="820f6-143">Ten minutes for truncation operations</span></span>
- <span data-ttu-id="820f6-144">Один час для операций массовой вставки</span><span class="sxs-lookup"><span data-stu-id="820f6-144">One hour for bulk insert operations</span></span>

<span data-ttu-id="820f6-145">При больших объемах эти настройки времени ожидания могут оказаться недостаточными.</span><span class="sxs-lookup"><span data-stu-id="820f6-145">When volumes are high, these time-out settings might not be sufficient.</span></span> <span data-ttu-id="820f6-146">Чтобы обновить их, перейдите к пункту **Управление данными \> Параметры структуры \> Использование своей собственной базы данных**.</span><span class="sxs-lookup"><span data-stu-id="820f6-146">To update them, go to **Data management \> Framework parameters \> Bring your own database**.</span></span> <span data-ttu-id="820f6-147">Эти интервалы времени ожидания относятся к конкретным компаниям и должны быть настроены отдельно для каждой компании.</span><span class="sxs-lookup"><span data-stu-id="820f6-147">These time-outs are company-specific and must be set separately for each company.</span></span>

## <a name="known-limitations"></a><span data-ttu-id="820f6-148">Известные ограничения</span><span class="sxs-lookup"><span data-stu-id="820f6-148">Known limitations</span></span>

<span data-ttu-id="820f6-149">Функция BYOD имеет следующие ограничения:</span><span class="sxs-lookup"><span data-stu-id="820f6-149">The BYOD feature has the following limitations:</span></span>

- <span data-ttu-id="820f6-150">В процессе синхронизации не должно быть активных блокировок базы данных.</span><span class="sxs-lookup"><span data-stu-id="820f6-150">There should be no active locks on your database during synchronization.</span></span> <span data-ttu-id="820f6-151">Активные блокировки могут вызывать медленную запись или даже сбой экспорта данных в базу данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="820f6-151">Active locks can cause slow writes or even failure to export data to your Azure SQL database.</span></span>
- <span data-ttu-id="820f6-152">Нельзя экспортировать составные сущности в собственную базу данных.</span><span class="sxs-lookup"><span data-stu-id="820f6-152">You can't export composite entities into your own database.</span></span> <span data-ttu-id="820f6-153">В настоящее время составные сущности не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="820f6-153">Currently, composite entities aren't supported.</span></span> <span data-ttu-id="820f6-154">Необходимо экспортировать отдельные сущности, которые составляют составную сущность.</span><span class="sxs-lookup"><span data-stu-id="820f6-154">You must export individual entities that make up the composite entity.</span></span> <span data-ttu-id="820f6-155">Однако обе сущности можно экспортировать в один и тот же проект данных.</span><span class="sxs-lookup"><span data-stu-id="820f6-155">However, you can export both entities in the same data project.</span></span>
- <span data-ttu-id="820f6-156">Сущности, у которых нет уникальных ключей, нельзя экспортировать, используя инкрементную принудительную отправку.</span><span class="sxs-lookup"><span data-stu-id="820f6-156">Entities that don't have unique keys can't be exported by using incremental push.</span></span> <span data-ttu-id="820f6-157">С этим ограничением можно столкнуться, особенно при попытке инкрементного экспорта записей из нескольких готовых сущностей.</span><span class="sxs-lookup"><span data-stu-id="820f6-157">You might face this limitation especially when you try to incrementally export records from a few ready-made entities.</span></span> <span data-ttu-id="820f6-158">Поскольку эти сущности были созданы для включения импорта данных, они не имеют уникального ключа.</span><span class="sxs-lookup"><span data-stu-id="820f6-158">Because these entities were designed to enable the import of data, they don't have a unique key.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="820f6-159">Устранение неполадок</span><span class="sxs-lookup"><span data-stu-id="820f6-159">Troubleshooting</span></span>

### <a name="incremental-push-doesnt-work-correctly"></a><span data-ttu-id="820f6-160">Инкрементная принудительная отправка не работает должным образом</span><span class="sxs-lookup"><span data-stu-id="820f6-160">Incremental push doesn't work correctly</span></span>

<span data-ttu-id="820f6-161">**Проблема:** при выполнении полной принудительной отправки для сущности вы видите большой набор записей в BYOD при использовании инструкции **select**.</span><span class="sxs-lookup"><span data-stu-id="820f6-161">**Issue:** When a full push occurs for an entity, you see a large set of records in BYOD when you use a **select** statement.</span></span> <span data-ttu-id="820f6-162">Однако при выполнении инкрементной принудительной отправки отображаются только несколько записей в BYOD.</span><span class="sxs-lookup"><span data-stu-id="820f6-162">However, when you do an incremental push, you see only a few records in BYOD.</span></span> <span data-ttu-id="820f6-163">Кажется, что инкрементная принудительная отправка удалила все записи и были добавлены только измененные записи в BYOD.</span><span class="sxs-lookup"><span data-stu-id="820f6-163">It seems as though the incremental push deleted all the records and added only the changed records in BYOD.</span></span>

<span data-ttu-id="820f6-164">**Решение:** таблицы отслеживания изменений SQL могут быть не в ожидаемом состоянии.</span><span class="sxs-lookup"><span data-stu-id="820f6-164">**Solution:** The SQL change tracking tables might not be in the expected state.</span></span> <span data-ttu-id="820f6-165">В случае такого типа рекомендуется отключить отслеживание изменений для сущности, а затем снова его включить.</span><span class="sxs-lookup"><span data-stu-id="820f6-165">In cases of this type, we recommend that you turn off change tracking for the entity and then turn it back on.</span></span> <span data-ttu-id="820f6-166">Дополнительные сведения см. в разделе [Включение отслеживания изменений для сущностей](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/data-entities/entity-change-track?toc=/dynamics365/human-resources/toc.json).</span><span class="sxs-lookup"><span data-stu-id="820f6-166">For more information, see [Enable change tracking for entities](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/data-entities/entity-change-track?toc=/dynamics365/human-resources/toc.json).</span></span>

## <a name="see-also"></a><span data-ttu-id="820f6-167">См. также</span><span class="sxs-lookup"><span data-stu-id="820f6-167">See also</span></span>

[<span data-ttu-id="820f6-168">Обзор управления данными</span><span class="sxs-lookup"><span data-stu-id="820f6-168">Data management overview</span></span>](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/data-entities/data-entities-data-packages?toc=/dynamics365/human-resources/toc.json)<br>
[<span data-ttu-id="820f6-169">Использование своей собственной базы данных (BYOD)</span><span class="sxs-lookup"><span data-stu-id="820f6-169">Bring your own database (BYOD)</span></span>](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/analytics/export-entities-to-your-own-database?toc=/dynamics365/human-resources/toc.json)<br>
[<span data-ttu-id="820f6-170">Обзор заданий импорта и экспорта данных</span><span class="sxs-lookup"><span data-stu-id="820f6-170">Data import and export jobs overview</span></span>](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/data-entities/data-import-export-job?toc=/dynamics365/human-resources/toc.json)<br>
[<span data-ttu-id="820f6-171">Включение отслеживания изменений для объектов</span><span class="sxs-lookup"><span data-stu-id="820f6-171">Enable change tracking for entities</span></span>](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/data-entities/entity-change-track?toc=/dynamics365/human-resources/toc.json)
