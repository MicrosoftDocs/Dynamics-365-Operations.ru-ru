---
title: "Внедрение приложений PowerApps"
description: "В этом разделе описывается, как внедрить PowerApps в клиент Finance and Operations для расширения функциональных возможностей продукта."
author: jasongre
manager: AnnBe
ms.date: 06/08/2018
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-platform
ms.technology: 
ms.search.form: FormRunConfigurationAddPAControl, FormRunConfigurationEditPAControl
audience: Application User, Developer, IT Pro
ms.search.scope: Operations, Core
ms.search.region: Global
ms.author: jasongre
ms.search.validFrom: 2018-02-28
ms.dyn365.ops.version: Platform update 14
ms.translationtype: HT
ms.sourcegitcommit: 764d4c9049d94ebcd55c61654aa2f4133b35bae6
ms.openlocfilehash: 3b0bb61a52721f1e2eaf6df53e17b6cc162d8409
ms.contentlocale: ru-ru
ms.lasthandoff: 08/09/2018

---

# <a name="embed-powerapps-apps"></a>Внедрение приложений PowerApps

[!include [banner](../includes/banner.md)]

В обновлении платформы 14 Microsoft Dynamics 365 for Finance and Operations поддерживает интеграцию с Microsoft PowerApps, службой, которая позволяет разработчикам и обычным пользователям создавать пользовательские бизнес-приложения для мобильных устройств, планшетов и интернета без написания кода. Затем приложения PowerApps, разработанные вами, вашей организации или более широкой экосистемой можно внедрить в клиент Finance and Operations для расширения функциональности продукта. Например, можно построить приложение PowerApp для дополнения Finance and Operations информацией, извлеченной из другой системы. 

Для получения дополнительных сведений о внедрении PowerApps посмотрите короткое видео [Как внедрить PowerApps в Dynamics 365 for Finance and Operations](https://www.youtube.com/watch?v=x3qyA1bH-NY).

## <a name="adding-an-embedded-powerapp-to-a-page"></a>Добавление внедренного приложения PowerApp на страницу
### <a name="overview"></a>Обзор
Перед внедрением приложения PowerApp в клиент Finance and Operations необходимо сначала найти или построить приложение PowerApp с требуемыми визуальными элементами и/или функциональными возможностями. Мы не будет здесь подробно описывать процесс построения приложения PowerApp. Раздел [Знакомство с PowerApps](https://docs.microsoft.com/en-us/powerapps/getting-started) является хорошей начальной точкой, если вы не знакомы с PowerApps.

Когда вы готовы для внедрения определенного приложения PowerApp, можно выбрать один из двух способов доступа к приложению PowerApp на странице, который лучше подходит для вашего сценария. Первый способ — через кнопку PowerApps, которая была добавлена в стандартной области действий. Добавленные с помощью этого механизма приложения PowerApps будут отображаться как пункты меню внутри меню кнопки PowerApps. При выборе каждый их этих пунктов меню открывает боковую область, содержащую внедренное приложение PowerApp. Можно также выбрать отображение приложения PowerApp непосредственно на странице в виде новой вкладки, экспресс-вкладки, колонки или нового раздела в рабочей области. 

При настройке вашего внедренного приложения PowerApp в Finance and Operations можно выбрать одно поле, которое необходимо отправить в качестве входных данных в приложение PowerApp. Это позволяет приложению PowerApp реагировать на основе данных, просматриваемых в данный момент в Finance and Operations.  

### <a name="details"></a>Подробности
Приведенные ниже инструкции демонстрируют, как внедрить в веб-клиент Finance and Operations приложение PowerApp.  

1. Перейдите на страницу, на которой вы хотите внедрить приложение PowerApp. Это будет та же страница, которая содержит любые данные, который должны быть переданы в приложение PowerApp в качестве входных данных.  
2. Откройте область **Вставить PowerApp**:
   - Щелкните **Параметры**, затем выберите **Персонализировать эту форму**. В меню **Вставить** выберите **PowerApp**. Наконец, выберите область, в которой вы хотите добавить приложение PowerApp. Если требуется внедрить приложение PowerApp в меню кнопки PowerApps, выберите область действий. Если требуется внедрить приложение PowerApp непосредственно на страницу, выберите соответствующую вкладку, экспресс-вкладку, колонку или раздела (если вы находитесь в рабочей области).   
   - Если доступ к приложению PowerApp будет осуществляться с помощью меню кнопки PowerApps, можно также щелкнуть кнопку меню **PowerApps** на стандартной панели действий, а затем выбрать **Вставить PowerApp**.  
3. Настройка внедренного приложения PowerApp:
   - Поле **Имя** показывает текст, отображаемый для кнопки или вкладки, которая будет содержать внедренное приложение PowerApp. Часто требуется повторить имя приложения PowerApp в этом поле.  
   - **Код приложения** — это идентификатор GUID для приложения PowerApp, которое требуется внедрить. Чтобы получить это значение, найдите приложение PowerApp на сайте [web.powerapps.com](https://web.powerapps.com), затем найдите поле **Код приложения** в разделе **Сведения**.  
   - Для **Входные данные для PowerApp** можно при необходимости выбрать поле, которое содержит данные, которые необходимо передать приложению PowerApp в качестве входных данных. См. пункт ниже в этом разделе под названием [Построение приложения PowerApp, которое использует данные из Finance and Operations](#building-a-powerapp-that-leverages-data-sent-from-finance-and-operations) для получения сведений о том, как приложение PowerApp может получить доступ к данным, отправленным из Finance and Operations.  
   - Выберите **Размер приложения**, соответствующий типу внедряемого приложения PowerApp. Выберите **Узкий** для приложений PowerApps, созданного для мобильных устройств, и **Широкий** для приложений PowerApps, созданных для планшетов. Это гарантирует, что достаточное количество места будет выделено для внедренного приложения PowerApp.
   - Экспресс-вкладка **Юридические лица** предоставляет возможность выбора, для какого юридического лица доступно приложение PowerApp. По умолчанию приложение PowerApp отображается во всех юридических лицах.  
4. После подтверждения, что настройка выполнена верно, нажмите кнопку **Вставить** для внедрения приложения PowerApp на страницу. Будет предложено обновить браузер, чтобы появилось внедренное приложение PowerApp. 

## <a name="sharing-an-embedded-powerapp"></a>Совместное использование внедренного приложения PowerApp
После внедрения приложения PowerApp на страницу и проверки правильности его работы с любым контекстом данных, которые передаются со страницы, можно предоставить доступ к этому внедренному приложению PowerApp другим пользователям в системе. Это можно сделать двумя разными способами с помощью функций персонализации продукта:

- Рекомендуется делать это через системного администратора, который может принудительно отправлять персонализации всеми пользователями или части пользователей. 

- Кроме того, можно экспортировать персонализации страницы, отправить их одному или нескольким пользователям, и каждый из этих пользователей может импортировать эти изменения. Параметр Управление на панели инструментов персонализации позволяет экспортировать и импортировать персонализации.

См. раздел [Персонализация работы пользователя](personalize-user-experience.md), в котором приведены более подробных сведения о возможностях персонализации в продукте и порядке их использования.

## <a name="building-a-powerapp-that-leverages-data-sent-from-finance-and-operations"></a>Создание приложения PowerApp, которое использует данные, отправляемые из Finance and Operations
Важная часть построения приложения PowerApp, которое будет внедрено в Finance and Operations, — это использования входных данных из Finance and Operations. Внутри приложения PowerApp доступ к этим данным можно получить с помощью переменной Param("EntityId").  

Например, в функции OnStart приложения PowerApp можно задать входные данные из Finance and Operations для переменной следующим образом:

If(!IsBlank(Param("EntityId")), Set(FinOpsInput, Param("EntityId")), Set(FinOpsInput, "")); 

## <a name="viewing-an-embedded-powerapp"></a>Просмотр внедренного приложения PowerApp
Для просмотра внедренного приложения PowerApp на странице в Finance and Operations просто перейдите на страницу с внедренным приложением PowerApp. Помните, что приложения PowerApps можно открывать с помощью кнопки PowerApps на стандартной панели действий или они могут отображаться прямо на странице как новая вкладка, экспресс-вкладка, колонка или новый раздел в рабочей области. Когда пользователь в первый раз пытается загрузить приложение PowerApp на странице, ему или ей будет предложено выполнить вход в PowerApps, чтобы убедиться, что пользователь имеет соответствующие разрешения для использования приложения PowerApp.   

## <a name="editing-an-embedded-powerapp"></a>Изменение внедренного приложения PowerApp
После того как приложение PowerApp внедрено на страницу, может потребоваться внести изменения в конфигурацию этого приложения PowerApp. Например, может потребоваться изменить метку, связанную с внедренным приложением PowerApp, или была создана новая версии приложения PowerApp и необходимо обновить идентификатор приложения для указания в последней версии приложения PowerApp. 

Выполните следующие действия, чтобы изменить конфигурацию внедренного приложения PowerApp.
1. Перейдите в область **Редактировать PowerApp**. 
   - Если доступ к внедренному приложению PowerApp осуществляется с помощью кнопки меню PowerApps, щелкните правой кнопкой мыши кнопку меню PowerApps и выберите **Персонализация**. Выберите приложение PowerApp, которое требуется настроить, в раскрывающемся меню **Выбрать PowerApp**.  
   - Если внедренное приложение PowerApp отображается непосредственно на странице, выберите **Параметры**, затем выберите **Персонализировать эту форму**. С помощью инструмента **Выбрать** щелкните внедренное приложение PowerApp.  
2. Внесите необходимые изменения в конфигурацию PowerApps, затем щелкните **Сохранить**.  

## <a name="removing-an-embedded-powerapp"></a>Удаление внедренного приложения PowerApp
После того как приложение PowerApp было внедрено на страницу, существует два способа удаления его при необходимости: 

- Перейдите в область **Редактировать PowerApp**, используя инструкции из пункта [Изменение внедренного приложения PowerApp](#editing-an-embedded-powerapp) ранее в этом разделе. Убедитесь, что в области отображается информация для внедренного приложения PowerApp, которое вы хотите удалить, затем нажмите кнопку **Удалить**. 

- Поскольку внедренное приложение PowerApp сохраняется как данные персонализации, очистка персонализации страницы также приведет к удалению всех внедренных приложений PowerApps на этой странице. Обратите внимание, что очистка персонализации страницы является необратимой и не может быть отменена. Чтобы удалить вашу персонализацию на странице, выберите **Параметры**, затем щелкните **Персонализировать эту форму**. В меню **Управление** выберите пункт **Очистить**. После обновления браузера все предыдущие персонализации для этой страницы будут удалены. Дополнительные сведения об оптимизации страниц с помощью персонализации см. в разделе [Персонализация работы пользователя](personalize-user-experience.md).  

## <a name="appendix"></a>Приложение 
### <a name="developer-control-over-where-a-powerapp-can-be-embedded"></a>Контроль разработчика над тем, где возможно внедрение приложения PowerApp
По умолчанию пользователи могут внедрять приложения PowerApps на любой странице, как в кнопку меню PowerApps, так и непосредственно на страницу в виде вкладки, экспресс-вкладки, колонки или нового раздела в рабочей области. Тем не менее при необходимости разработчики также могут настроить эту возможность, чтобы разрешить только внедрение приложений PowerApps на некоторых страницах путем реализации следующих методов: 

- **isPowerAppPersonalizationEnabled** — если этот метод возвращает значение false для конкретной страницы, то кнопка меню PowerApps не будет отображаться и пользователи не смогут внедрять приложения PowerApps ни в каком месте на этой странице, в том числе в виде вкладки. 

- **isPowerAppTabPersonalizationEnabled** — если этот метод возвращает значение false для конкретной страницы, то пользователи не смогут внедрять приложения PowerApps непосредственно на странице в качестве вкладки, экспресс-вкладки или раздела панорамы. Пользователи по-прежнему будут иметь возможность внедрять приложения PowerApps через кнопку меню PowerApps, если внедрение разрешено на странице.  

Следующий пример показывает новый класс с двумя методами, необходимый для настройки того, где могут быть внедрены приложения PowerApps.  

```
[ExtensionOf(classStr(FormRunConfigurationPowerAppsConfiguration))]

public final class ClassTest_Extension
{

    public static boolean isPowerAppPresonalizationEnabled(str pageName)
    {
        var result = next isPowerAppPresonalizationEnabled(pageName);
        return true;
    }

    public static boolean isPowerAppTabPresonalizationEnabled(str pageName)   
    {
        var result = next isPowerAppTabPresonalizationEnabled(pageName);
        return true;
    }
    ```

}


