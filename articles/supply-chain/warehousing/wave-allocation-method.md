---
title: Распределение волны
description: В этой теме описывается, как настроить этап распределения волны, включая способ включения параллельной обработки для нее.
author: Mirzaab
ms.date: 03/08/2021
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2021-03-08
ms.dyn365.ops.version: Release 10.0.18
ms.openlocfilehash: feee33a7d4ea3f0d9c4d671210293a28aac14f61
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/01/2021
ms.locfileid: "5823175"
---
# <a name="wave-allocation"></a><span data-ttu-id="37a30-103">Распределение волны</span><span class="sxs-lookup"><span data-stu-id="37a30-103">Wave allocation</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="37a30-104">Обработка волны может быть трудоемкой, и большая часть времени обработки затрачивается на этапы распределения и на шаге создания работ.</span><span class="sxs-lookup"><span data-stu-id="37a30-104">Wave processing can be time consuming, and most of the processing time is spent in the allocation step and in the work creation step.</span></span>

<span data-ttu-id="37a30-105">Сейчас можно выполнить каждый из этих шагов параллельно, что может повысить производительность обработки волн и увеличить пропускную способность волн в одном и том же складе.</span><span class="sxs-lookup"><span data-stu-id="37a30-105">It is now possible to run each of these steps in parallel, which can improve the performance of the wave processing, and allow for a larger throughput of waves in the same warehouse.</span></span> <span data-ttu-id="37a30-106">В этой теме объясняется, как настроить метод распределения волны для параллельного выполнения.</span><span class="sxs-lookup"><span data-stu-id="37a30-106">This topic explains how to set up the wave allocation method to run in parallel.</span></span> <span data-ttu-id="37a30-107">Для получения дополнительных сведений о том, как настроить параллельное создание работ, см. раздел [Планирование создания работы во время волны](configure-wave-schedule-work-creation.md).</span><span class="sxs-lookup"><span data-stu-id="37a30-107">For more information about how to set up work creation to run in parallel, see [Schedule work creation during wave](configure-wave-schedule-work-creation.md).</span></span>

<span data-ttu-id="37a30-108">Раньше было возможно только распределить одну волну на складе за один раз.</span><span class="sxs-lookup"><span data-stu-id="37a30-108">Previously it was only possible to allocate one wave at a warehouse at a time.</span></span> <span data-ttu-id="37a30-109">Это ограничение было удалено и заменено новым ограничением, которое блокирует только номенклатуру и аналитики, расположенные выше в иерархии резервирования.</span><span class="sxs-lookup"><span data-stu-id="37a30-109">This constraint has been removed and replaced by a new constraint that only locks the item and dimensions that are above location in the reservation hierarchy.</span></span> <span data-ttu-id="37a30-110">Аналитики выше местоположения всегда включают в себя аналитики продукта.</span><span class="sxs-lookup"><span data-stu-id="37a30-110">Dimensions above the location always include product dimensions.</span></span> <span data-ttu-id="37a30-111">Например, если номенклатура настроена с использованием аналитики *Цвет*, то варианты *Красный*, *Синей* и *Желтый* могут быть обработаны параллельно.</span><span class="sxs-lookup"><span data-stu-id="37a30-111">For example, if an item is configured using *Color*, then variants for *Red*, *Blue*, and *Yellow* could each be processed in parallel.</span></span>

<span data-ttu-id="37a30-112">Это означает, что если одна и та же номенклатура с теми же аналитиками выше расположения распределяется одной волной, другие волны должны подождать получения блокировки на эту же номенклатуру и аналитики.</span><span class="sxs-lookup"><span data-stu-id="37a30-112">This means that if the same item with the same dimensions above the location is being allocated by one wave, other waves will have to wait to acquire a lock on the same item and dimensions.</span></span> <span data-ttu-id="37a30-113">Если блокировку невозможно получить своевременно, произойдет ошибка, и произойдет сбой обработки волны.</span><span class="sxs-lookup"><span data-stu-id="37a30-113">If the lock can't be acquired in a timely manner, an error will occur and the wave processing will fail.</span></span>

<span data-ttu-id="37a30-114">Для использования параллельной обработки волна должна быть выполнена в пакете.</span><span class="sxs-lookup"><span data-stu-id="37a30-114">In order to utilize parallel processing, the wave must run in batch.</span></span>

## <a name="performance-improvements"></a><span data-ttu-id="37a30-115">Улучшения производительности</span><span class="sxs-lookup"><span data-stu-id="37a30-115">Performance improvements</span></span>

<span data-ttu-id="37a30-116">Преимущества производительности при параллельной обработке делятся на две категории:</span><span class="sxs-lookup"><span data-stu-id="37a30-116">Performance benefits of parallel processing fall in two categories:</span></span>

- <span data-ttu-id="37a30-117">**Повышенная пропускная способность** — производительность волны обычно увеличивается даже в том случае, если параллельная обработка не настроена, особенно в тех случаях, когда номенклатуры в волнах не перекрываются.</span><span class="sxs-lookup"><span data-stu-id="37a30-117">**Improved throughput** - The throughput of waves will typically improve even if parallel processing isn't configured, especially for scenarios where there is no overlap of items within the waves.</span></span>
- <span data-ttu-id="37a30-118">**Улучшение распределения для одной волны** — проверка на данных клиентов показала повышение производительности около 50% после переключения на параллельное распределение.</span><span class="sxs-lookup"><span data-stu-id="37a30-118">**Improvement of the allocation for a single wave** - Testing on customer data has shown a near 50% performance improvement after switching to parallel allocation.</span></span> <span data-ttu-id="37a30-119">Параллельная обработка выполняется по номенклатурам и аналитикам выше местоположения, поэтому улучшения зависят от количества различных номенклатур, содержащихся в волне, доступной инфраструктуры и продолжительности распределения относительно продолжительности создания работы.</span><span class="sxs-lookup"><span data-stu-id="37a30-119">The parallel processing is done per items and dimensions above the location, so the improvements depend on how many different items a wave contains, the infrastructure available, and the duration of the allocation versus the duration of the work creation.</span></span>

## <a name="configure-parallel-allocation"></a><span data-ttu-id="37a30-120">Настройка параллельного распределения</span><span class="sxs-lookup"><span data-stu-id="37a30-120">Configure parallel allocation</span></span>

### <a name="warehouse-management-parameters"></a><span data-ttu-id="37a30-121">Параметры управления складом</span><span class="sxs-lookup"><span data-stu-id="37a30-121">Warehouse management parameters</span></span>

<span data-ttu-id="37a30-122">Чтобы использовать параллельную обработку распределения, перейдите в раздел **Управление складом > Настройка > Параметры управления складом**, откройте вкладку **Обработка волн** и выполните следующие настройки:</span><span class="sxs-lookup"><span data-stu-id="37a30-122">To use parallel allocation processing, go to **Warehouse management > Setup > Warehouse management parameters**, open the **Wave processing** tab, and make the following settings:</span></span>

- <span data-ttu-id="37a30-123">**Группа партий обработки волны** — выберите группу пакетов, которую следует использовать при первоначальной обработке волн.</span><span class="sxs-lookup"><span data-stu-id="37a30-123">**Wave processing batch group** - Select the batch group that the initial processing of the waves should use.</span></span> <span data-ttu-id="37a30-124">Последующая обработка распределения может выполняться с использованием других пакетных групп.</span><span class="sxs-lookup"><span data-stu-id="37a30-124">The subsequent processing of allocation can be done using different batch groups.</span></span>
- <span data-ttu-id="37a30-125">**Обрабатывать волны в партии** — установите значение *Да*, чтобы использовать параллельную обработку.</span><span class="sxs-lookup"><span data-stu-id="37a30-125">**Process waves in batch** - Set this to *Yes* to use parallel processing.</span></span>
- <span data-ttu-id="37a30-126">**Ожидание блокировки (мс)** — введите время (в миллисекундах), в течение которого на данном этапе распределения будет ожидаться системный ресурс, заблокированный на другом этапе распределения.</span><span class="sxs-lookup"><span data-stu-id="37a30-126">**Wait for lock (ms)** - Enter the time, in milliseconds, that an allocation step will wait for a system resource that is locked by another allocation step.</span></span> <span data-ttu-id="37a30-127">По истечении этого времени волна не будет обрабатываться, и отобразится сообщение об ошибке.</span><span class="sxs-lookup"><span data-stu-id="37a30-127">When this time is exceeded, the wave is not processed and an error message is displayed.</span></span> <span data-ttu-id="37a30-128">Рекомендуется выделить по крайней мере несколько секунд, чтобы дождаться завершения распределения одной логической единицы.</span><span class="sxs-lookup"><span data-stu-id="37a30-128">We recommend that you allow at least a few seconds to allow for allocation of one logical unit to finish.</span></span>

<span data-ttu-id="37a30-129">Сведения об этих и других вариантах обработки параметров волны на странице **Параметры управления складом** см. в разделе [Складские параметры для обработки волн](wave-warehouse-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="37a30-129">For information about these and other wave processing options on the **Warehouse management parameters** page, see [Warehouse parameters for wave processing](wave-warehouse-parameters.md).</span></span>

## <a name="wave-process-methods"></a><span data-ttu-id="37a30-130">Методы обработки волн</span><span class="sxs-lookup"><span data-stu-id="37a30-130">Wave process methods</span></span>

<span data-ttu-id="37a30-131">Чтобы настроить параллельную обработку:</span><span class="sxs-lookup"><span data-stu-id="37a30-131">To set up parallel processing:</span></span>

1. <span data-ttu-id="37a30-132">Перейдите в раздел **Управление складом > Настройка > Волны > Методы обработки волн**.</span><span class="sxs-lookup"><span data-stu-id="37a30-132">Go to **Warehouse Management > Setup > Waves > Wave process methods**.</span></span>
1. <span data-ttu-id="37a30-133">Выберите метод `allocateWave` в сетке.</span><span class="sxs-lookup"><span data-stu-id="37a30-133">Select the `allocateWave` method in the grid.</span></span>
1. <span data-ttu-id="37a30-134">В панели операций выберите **Конфигурация задач**.</span><span class="sxs-lookup"><span data-stu-id="37a30-134">On the Action Pane, select **Task configuration**.</span></span>
1. <span data-ttu-id="37a30-135">Откроется страница **Конфигурация задачи метода разноски волны**.</span><span class="sxs-lookup"><span data-stu-id="37a30-135">The **Wave post method task configuration** page opens.</span></span> <span data-ttu-id="37a30-136">В этой сетке перечислены все склады, для которых был настроен метод `allocateWave`.</span><span class="sxs-lookup"><span data-stu-id="37a30-136">This grid lists each warehouse where you have configured the `allocateWave` method.</span></span> <span data-ttu-id="37a30-137">Параллельная обработка будет использоваться только для перечисленных складов.</span><span class="sxs-lookup"><span data-stu-id="37a30-137">Parallel processing will only be used for warehouses that are listed.</span></span> <span data-ttu-id="37a30-138">С помощью кнопок области действий можно добавлять или удалять склады из сетки по мере необходимости.</span><span class="sxs-lookup"><span data-stu-id="37a30-138">Use the Action Pane buttons to add or remove warehouses from the grid as needed.</span></span> 
1. <span data-ttu-id="37a30-139">Для каждого склада задайте следующие настройки:</span><span class="sxs-lookup"><span data-stu-id="37a30-139">For each warehouse, make the following settings:</span></span>
    - <span data-ttu-id="37a30-140">**Максимальное число пакетных задач** — укажите количество пакетных задач, которые должны использоваться для распределения для выбранного склада.</span><span class="sxs-lookup"><span data-stu-id="37a30-140">**Maximum number of batch tasks** - Specify the number of batch tasks that should be used for the allocation for the selected warehouse.</span></span> <span data-ttu-id="37a30-141">Оптимальное количество пакетных задач зависит от доступной инфраструктуры и от того, какие другие пакетные задания обрабатываются на сервере.</span><span class="sxs-lookup"><span data-stu-id="37a30-141">The optimal number of batch tasks depends on the infrastructure available and what other batch jobs are being processed on the server.</span></span> <span data-ttu-id="37a30-142">Тесты, выполненные в четырех основных средах, которые были назначены для обработки волны, показали, что использование восьми задач дает хорошие результаты.</span><span class="sxs-lookup"><span data-stu-id="37a30-142">Tests done on a four core environment that was dedicated to wave processing showed that using eight tasks produced good results.</span></span>
    - <span data-ttu-id="37a30-143">**Группа партий обработки волны** — определенные группы партий могут использоваться для различных складов, что позволяет выполнять масштабную обработку распределения для каждого склада.</span><span class="sxs-lookup"><span data-stu-id="37a30-143">**Wave processing batch group** - Specific batch groups can be used for different warehouses to allow the allocation processing to scale out per warehouse.</span></span>

## <a name="enable-or-disable-parallelization-across-all-legal-entities"></a><span data-ttu-id="37a30-144">Включение или отключение параллельного выполнения для всех юридических лиц</span><span class="sxs-lookup"><span data-stu-id="37a30-144">Enable or disable parallelization across all legal entities</span></span>

<span data-ttu-id="37a30-145">Рекомендуется настроить метод `allocateWave` так, чтобы он выполнялся параллельно для всех юридических лиц, так как это помогает повысить производительность обработки волн.</span><span class="sxs-lookup"><span data-stu-id="37a30-145">We recommend that you set the `allocateWave` method to run in parallel across all legal entities because this helps to improve the performance of the wave processing.</span></span> <span data-ttu-id="37a30-146">Начиная с Supply Chain Management версии 10.0.17, функция *Метод параллельной обработки для распределения волны* включена по умолчанию для всех новых и обновленных установок и не может быть отключена снова.</span><span class="sxs-lookup"><span data-stu-id="37a30-146">Starting in Supply Chain Management version 10.0.17, the *Wave parallelization for Allocate Wave method* feature is enabled by default for all new and updated installations, and can't be turned off again.</span></span> <span data-ttu-id="37a30-147">После включения этой функции происходит следующее:</span><span class="sxs-lookup"><span data-stu-id="37a30-147">After enabling this feature, the following occurs:</span></span>

- <span data-ttu-id="37a30-148">Метод `allocateWave` обновлен для включения параметра конфигурации задачи, который позволяет использовать страницу **Методы обработки волны** для определения количества одновременно выполняемых задач, эквивалентный количеству параллельных процессов.</span><span class="sxs-lookup"><span data-stu-id="37a30-148">The `allocateWave` method is updated to include a task configuration setting that lets you use the **Wave process methods** page to define the number of tasks that will run simultaneously, equivalent to the number of parallel processes.</span></span> <span data-ttu-id="37a30-149">В результате время, используемое на шаге распределения (обычно от 30% до 60% от общего времени обработки), уменьшается на коэффициент, примерно равный числу задач.</span><span class="sxs-lookup"><span data-stu-id="37a30-149">As a result, the time used on the allocate-wave step (which is typically 30% to 60% of the total processing time) is reduced by a factor roughly equivalent to the number of tasks.</span></span> <span data-ttu-id="37a30-150">Кроме того, можно выбрать, какой пакет будет назначен для выполнения этих задач.</span><span class="sxs-lookup"><span data-stu-id="37a30-150">It's also possible to select which batch will be assigned to process these tasks.</span></span> <span data-ttu-id="37a30-151">Важно отметить, что все ваши юридические лица будут настроены на обработку волн в пакете.</span><span class="sxs-lookup"><span data-stu-id="37a30-151">It's important to note that all of your legal entities will be configured to process waves in batch.</span></span> <span data-ttu-id="37a30-152">Для складов, которые уже настроены для обработки волн в пакете, и для складов, уже настроенных для использования метода `allocateWave` параллельно, существующая конфигурация будет сохранена.</span><span class="sxs-lookup"><span data-stu-id="37a30-152">For the warehouses that are already configured to process waves in batch, and for the warehouses that are already configured to use the `allocateWave` method in parallel, the existing configuration will be kept.</span></span>
- <span data-ttu-id="37a30-153">По умолчанию все новые юридические лица настроены для обработки волн в пакете.</span><span class="sxs-lookup"><span data-stu-id="37a30-153">By default, all the new legal entities are configured to process waves in batch.</span></span> <span data-ttu-id="37a30-154">Все новые склады с включенным параметром **Процессы управления складом** будут иметь метод `allocateWave`, настроенный на работу в параллельном режиме по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="37a30-154">All new warehouses with the **Warehouse management processes** option enabled will have the `allocateWave` method configured to run in parallel by default.</span></span>
- <span data-ttu-id="37a30-155">На странице **Параметры управления складом** параметр **Обрабатывать волны в партии** имеет значение *Да* и **Ожидание блокировки (мс)** по умолчанию равно 15 секундам.</span><span class="sxs-lookup"><span data-stu-id="37a30-155">On the **Warehouse management parameters** page, **Process saves in batch** is set to *Yes* and  **Wait for lock (ms)** set to a default 15 seconds.</span></span> <span data-ttu-id="37a30-156">Это означает, что все волны будут выполняться в партии.</span><span class="sxs-lookup"><span data-stu-id="37a30-156">This means that all waves will be executed in batch.</span></span> <span data-ttu-id="37a30-157">Когда выполняется волна, она получает блокировку номенклатуры и аналитик над местонахождением во время выполнения шага распределения.</span><span class="sxs-lookup"><span data-stu-id="37a30-157">When a wave is running, it acquires a lock on the item and dimensions above location during the allocation step.</span></span> <span data-ttu-id="37a30-158">Когда другая задача обработки волны пытается получить такую же блокировку для идентичной записи, она блокируется до завершения текущей обработки.</span><span class="sxs-lookup"><span data-stu-id="37a30-158">When another wave processing task tries to acquire the same lock for the identical record, it is blocked until the current process is finished.</span></span> <span data-ttu-id="37a30-159">Параметры **Ожидание блокировки (мс)** устанавливают максимальное время, в течение которого система будет ожидать снятия блокировки.</span><span class="sxs-lookup"><span data-stu-id="37a30-159">The **Wait for lock (ms)** settings establishes the maximum time the system will wait before the lock is released.</span></span>

<span data-ttu-id="37a30-160">Для параллельной обработки распределения необходимо, чтобы обработка волн выполнялось в партии.</span><span class="sxs-lookup"><span data-stu-id="37a30-160">Parallel allocation processing requires wave processing to run in batch.</span></span> <span data-ttu-id="37a30-161">Таким образом, вы уменьшите производительность обработки волн, если отключите параметр **Обрабатывать волны в партии**, особенно если обработка волн выполняется с использованием параллельного процесса, как определено в конфигурации задачи для соответствующих методов волны.</span><span class="sxs-lookup"><span data-stu-id="37a30-161">Therefore, you will reduce your wave processing performance if you turn off the **Process saves in batch** setting, especially if wave processing is using a parallel process as defined by the task configuration for the relevant wave methods.</span></span>

<span data-ttu-id="37a30-162">При необходимости можно отменить каждый из параметров, заданных по умолчанию, когда функция *Метод параллельной обработки для распределения волны* автоматически включается для вашего экземпляра.</span><span class="sxs-lookup"><span data-stu-id="37a30-162">If necessary, you can undo each of the settings made by default when the *Wave parallelization for Allocate Wave method* feature is automatically enabled for your instance.</span></span> <span data-ttu-id="37a30-163">Для этого:</span><span class="sxs-lookup"><span data-stu-id="37a30-163">To do this:</span></span>

- <span data-ttu-id="37a30-164">Перейдите в раздел **Управление складом \> Настройка \> Параметры управления складом**.</span><span class="sxs-lookup"><span data-stu-id="37a30-164">Go to **Warehouse management \> Setup \> Warehouse management parameters**.</span></span> <span data-ttu-id="37a30-165">На вкладке **Обработка волны** примените предпочтительные значения для параметров **Обрабатывать волны в партии** и **Ожидание блокировки (мс)**.</span><span class="sxs-lookup"><span data-stu-id="37a30-165">On the **Wave processing** tab, apply your preferred values for **Process waves in batch** and **Wait for lock (ms)**.</span></span>
- <span data-ttu-id="37a30-166">Перейдите в раздел **Управление складом \> Настройка \> Волны \> Методы обработки волн**.</span><span class="sxs-lookup"><span data-stu-id="37a30-166">Go to **Warehouse management \> Setup \> Waves \> Wave process methods**.</span></span> <span data-ttu-id="37a30-167">Выберите метод `allocateWave`.</span><span class="sxs-lookup"><span data-stu-id="37a30-167">Select the `allocateWave` method.</span></span> <span data-ttu-id="37a30-168">В области действий выберите **Конфигурация задачи**, чтобы открыть страницу со списком всех складов, где этот метод настроен на выполнение параллельно.</span><span class="sxs-lookup"><span data-stu-id="37a30-168">On the Action Pane, select **Task configuration** to open a page that lists each warehouse where the method is set to run in parallel.</span></span> <span data-ttu-id="37a30-169">При необходимости измените или удалите число пакетных задач и назначенную группу волн для каждого перечисленного склада.</span><span class="sxs-lookup"><span data-stu-id="37a30-169">Modify or delete the number of batch tasks and the assigned wave group for each listed warehouse as needed.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="37a30-170">Устранение неполадок</span><span class="sxs-lookup"><span data-stu-id="37a30-170">Troubleshooting</span></span>

### <a name="troubleshoot-using-the-infolog"></a><span data-ttu-id="37a30-171">Устранение неполадок с помощью Infolog</span><span class="sxs-lookup"><span data-stu-id="37a30-171">Troubleshoot using the Infolog</span></span>

<span data-ttu-id="37a30-172">Так как используется платформа пакетной обработки, ошибки, происходящие во время обработки волн, фиксируются как часть пакетных заданий Infolog.</span><span class="sxs-lookup"><span data-stu-id="37a30-172">Because the batch framework is used, errors that occur during wave processing will be captured as part of the batch jobs Infologs.</span></span> <span data-ttu-id="37a30-173">Для чтения пакетных заданий, связанных с волной:</span><span class="sxs-lookup"><span data-stu-id="37a30-173">To read the batch jobs related to a wave:</span></span>

1. <span data-ttu-id="37a30-174">Перейдите в раздел **Управление складом \> Исходящие волны \> Волны отгрузок \> Все волны**.</span><span class="sxs-lookup"><span data-stu-id="37a30-174">Go to **Warehouse management \> Outbound waves \> Shipment waves \> All waves**.</span></span>
1. <span data-ttu-id="37a30-175">Выберите волну, которую хотите проверить.</span><span class="sxs-lookup"><span data-stu-id="37a30-175">Select the wave you want to inspect.</span></span>
1. <span data-ttu-id="37a30-176">В области действий откройте вкладку **Волна** и в группе **Волна** выберите **Пакетные задания**.</span><span class="sxs-lookup"><span data-stu-id="37a30-176">On the Action Pane, open the **Wave** tab and, from the **Wave** group, select **Batch jobs**.</span></span>

<span data-ttu-id="37a30-177">Обработка волны поддерживает самокоррекцию, поэтому любая ошибка, обнаруженная во время обработки, должна быть включена в отчет Infolog.</span><span class="sxs-lookup"><span data-stu-id="37a30-177">Wave processing is self-correcting, so any error detected during processing should be reported using the Infolog.</span></span>

<span data-ttu-id="37a30-178">Типичная ошибка, связанная с параллельной обработкой, состоит в том, что две волны пытаются выделить одну и ту же номенклатуру в одно и то же время, а одна не была выполнена, потому что другая волна не могла получить блокировку в течение указанного времени.</span><span class="sxs-lookup"><span data-stu-id="37a30-178">A typical error related to parallel processing could be that two waves try to allocate the same item at the same time and one does not complete so that the other wave is unable to acquire a lock within the specified time.</span></span> <span data-ttu-id="37a30-179">В этом случае в журнале пакетных заданий будет содержаться информация о том, что блокировка для данной номенклатуры не может быть получена, и в этом случае должна быть заново обработана волна, которая не удалась.</span><span class="sxs-lookup"><span data-stu-id="37a30-179">If this situation occurs, the batch jobs log will contain information stating that the lock for the item could not be acquired, in which case the wave that failed must be processed again.</span></span>

<span data-ttu-id="37a30-180">Поскольку обработка происходит параллельно, данные должны поддерживаться в разных таблицах для отслеживания состояния обработки.</span><span class="sxs-lookup"><span data-stu-id="37a30-180">Because the processing is happening in parallel, data must be maintained in different tables to track the state of the processing.</span></span> <span data-ttu-id="37a30-181">Это означает, что журналы пакетных заданий могут содержать ошибки, такие как ошибки дублирования ключей.</span><span class="sxs-lookup"><span data-stu-id="37a30-181">This means that the logs for the batch jobs might contain errors such as duplicate key errors.</span></span>

<span data-ttu-id="37a30-182">Ошибки пакетных задач также входят в журнал пакетных заданий.</span><span class="sxs-lookup"><span data-stu-id="37a30-182">The errors from the batch tasks are also part of the batch jobs log.</span></span> <span data-ttu-id="37a30-183">Как правило, наиболее важные сведения находятся в конце.</span><span class="sxs-lookup"><span data-stu-id="37a30-183">The most important information is typically at the bottom.</span></span>

<span data-ttu-id="37a30-184">В редких случаях, например, если соединение с SQL-сервером завершено, возможно, что обработка волны заканчивается в несогласованном состоянии, когда пакетное задание выглядит работающим, но обработка остановлена.</span><span class="sxs-lookup"><span data-stu-id="37a30-184">In rare cases, for example if the SQL connection ended, it is possible for the wave processing to end in an inconsistent state where the batch job appears to be running but the processing is stopped.</span></span> <span data-ttu-id="37a30-185">Волна не может обработать такие ошибки, поэтому попытка очистки невыполненных волн происходит при следующем запуске волны.</span><span class="sxs-lookup"><span data-stu-id="37a30-185">The wave can't handle errors like this, so an attempt to clean up failed waves is done when the next wave runs.</span></span> <span data-ttu-id="37a30-186">Если текущая волна находится в несогласованном состоянии, можно также выполнить следующие действия:</span><span class="sxs-lookup"><span data-stu-id="37a30-186">Alternatively, if the current wave is in an inconsistent state, perform the following steps:</span></span>

1. <span data-ttu-id="37a30-187">Перейдите в раздел **Управление складом \> Исходящие волны \> Волны отгрузок \> Все волны**.</span><span class="sxs-lookup"><span data-stu-id="37a30-187">Go to **Warehouse management \> Outbound waves \> Shipment waves \> All waves**.</span></span>
1. <span data-ttu-id="37a30-188">Выберите волну, который необходимо очистить.</span><span class="sxs-lookup"><span data-stu-id="37a30-188">Select the wave you need to clean up.</span></span>
1. <span data-ttu-id="37a30-189">В области действий откройте вкладку **Волна** и в группе **Волна** выберите **Очистить данные волны**.</span><span class="sxs-lookup"><span data-stu-id="37a30-189">On the Action Pane, open the **Wave** tab and, in the **Wave** group, select **Cleanup wave data**.</span></span>

### <a name="troubleshoot-using-the-wave-progress-log"></a><span data-ttu-id="37a30-190">Устранение неполадок с использованием журнала хода выполнения волны</span><span class="sxs-lookup"><span data-stu-id="37a30-190">Troubleshoot using the wave progress log</span></span>

<span data-ttu-id="37a30-191">Если параметр **Создать журнал хода выполнения волны** включен на странице **Параметры управления складом**, то запись журнала создается каждый раз, когда выделение для номенклатуры и ее аналитик начинается и завершается.</span><span class="sxs-lookup"><span data-stu-id="37a30-191">If the **Create wave progress log** option is enabled on the **Warehouse management parameters** page, then a log record is created every time allocation for an item and its dimensions begins and ends.</span></span> <span data-ttu-id="37a30-192">Этот журнал следует включать только в том случае, если это необходимо, например при первоначальном тестировании или для устранения неполадок.</span><span class="sxs-lookup"><span data-stu-id="37a30-192">You should only enable this log when you need it, for example, during initial testing or for troubleshooting.</span></span> <span data-ttu-id="37a30-193">Если этот параметр включен, можно просмотреть журнал, выполнив следующие шаги:</span><span class="sxs-lookup"><span data-stu-id="37a30-193">When this option is enabled, you can view the log by taking the following steps:</span></span>

1. <span data-ttu-id="37a30-194">Перейдите в раздел **Управление складом \> Исходящие волны \> Волны отгрузок \> Все волны**.</span><span class="sxs-lookup"><span data-stu-id="37a30-194">Go to **Warehouse management \> Outbound waves \> Shipment waves \> All waves**.</span></span>
1. <span data-ttu-id="37a30-195">Выберите волну, которую хотите проверить.</span><span class="sxs-lookup"><span data-stu-id="37a30-195">Select the wave you want to inspect.</span></span>
1. <span data-ttu-id="37a30-196">В области действий откройте вкладку **Волна** и в группе **Волна** выберите **Ход выполнения**.</span><span class="sxs-lookup"><span data-stu-id="37a30-196">On the Action Pane, open the **Wave** tab and, in the **Wave** group, select **Progress**.</span></span>
