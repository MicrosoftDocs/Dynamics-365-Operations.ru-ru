---
title: Политики консолидации отгрузок
description: В этом разделе представлен обзор функциональных возможностей, обеспечивающих гибкую настройку политик консолидации отгрузок.
author: GarmMSFT
manager: tfehr
ms.date: 05/12/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: WHSShipConsolidationPolicy, WHSShipConsolidationWorkbench
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: v-olbara
ms.search.validFrom: 2020-05-01
ms.dyn365.ops.version: 10.0.3
ms.openlocfilehash: 53bfd24085160227639af1aa5c398e56517805b3
ms.sourcegitcommit: 8a2127c5af6cdbda30ccc1f9bef9bd4ab61e9e50
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/18/2020
ms.locfileid: "3383845"
---
# <a name="shipment-consolidation-policies"></a><span data-ttu-id="d203d-103">Политики консолидации отгрузок</span><span class="sxs-lookup"><span data-stu-id="d203d-103">Shipment consolidation policies</span></span>

<span data-ttu-id="d203d-104">Процесс консолидации отгрузок, использующий политики консолидации отгрузок, позволяет использовать автоматическую консолидацию отгрузок во время автоматического и ручного запуска на склад.</span><span class="sxs-lookup"><span data-stu-id="d203d-104">The shipment consolidation process that uses shipment consolidation policies allows for automated shipment consolidation during automated and manual release to the warehouse.</span></span> <span data-ttu-id="d203d-105">Автоматизированная консолидация, которая была доступна до того, как была введена эта функция, имела жестко запрограммированные поля и была основана на поле **Консолидировать отгрузку перед запуском на склад**, которое было задано для склада.</span><span class="sxs-lookup"><span data-stu-id="d203d-105">The automated consolidation that was available before this feature was introduced had hard-coded fields and was based on the **Consolidate shipment at release to warehouse** field that was set for a warehouse.</span></span>

<span data-ttu-id="d203d-106">Политики консолидации отгрузок используются для следующих функций:</span><span class="sxs-lookup"><span data-stu-id="d203d-106">Shipment consolidation policies are used for the following functionality:</span></span>

- <span data-ttu-id="d203d-107">Пакетное задание автоматического выпуска на склад</span><span class="sxs-lookup"><span data-stu-id="d203d-107">The automated release-to-warehouse batch job</span></span>
- <span data-ttu-id="d203d-108">Команда **Запуск на склад** в заказе на продажу или в заказе на перемещение</span><span class="sxs-lookup"><span data-stu-id="d203d-108">The **Release to warehouse** command in a sales order or transfer order</span></span>
- <span data-ttu-id="d203d-109">Страница Специальный **Запуск на склад**</span><span class="sxs-lookup"><span data-stu-id="d203d-109">The dedicated **Release to warehouse** page</span></span>
- <span data-ttu-id="d203d-110">Команда **Запуск на склад**на странице **Рабочем месте планирования загрузки**</span><span class="sxs-lookup"><span data-stu-id="d203d-110">The **Release to warehouse** command on the **Load planning workbench** page</span></span>
- <span data-ttu-id="d203d-111">Ручная консолидация отгрузок на страницах **Консолидация отгрузок** и **Рабочее место консолидации отгрузок**</span><span class="sxs-lookup"><span data-stu-id="d203d-111">The manual consolidation of shipments on the **Consolidate shipments** and **Shipment consolidation workbench** pages</span></span>

<span data-ttu-id="d203d-112">Прежде чем были введены политики консолидации отгрузок, функция консолидации существовала как настройка на уровне склада.</span><span class="sxs-lookup"><span data-stu-id="d203d-112">Before shipment consolidation policies were introduced, the consolidation function existed as a setting at the warehouse level.</span></span> <span data-ttu-id="d203d-113">Все заказы для всех клиентов одного склада рассматривались так же, как и в случае одинаковых требований консолидации.</span><span class="sxs-lookup"><span data-stu-id="d203d-113">All orders for all customers from a single warehouse were treated as though they had the same consolidation requirements.</span></span> <span data-ttu-id="d203d-114">Политики консолидации отгрузок позволяют добавлять поддержку сценариев, в которых различные организации имеют различные требования для консолидации отгрузок.</span><span class="sxs-lookup"><span data-stu-id="d203d-114">Shipment consolidation policies add support for scenarios where different organizations have different requirements for shipment consolidation.</span></span>

<span data-ttu-id="d203d-115">Запросы используются для определения применяемой политики консолидации отгрузок, а затем редактируемый набор полей определяет порядок группировки строк загрузки на уровне отгрузки.</span><span class="sxs-lookup"><span data-stu-id="d203d-115">Queries are used to identify the shipment consolidation policy that applies, and then an editable set of fields determines how the load lines are grouped at the shipment level.</span></span> <span data-ttu-id="d203d-116">(Этот шаблон напоминает шаблон, которым следуют шаблоны волн.) Кроме того, в каждую политику добавляется параметр **Консолидация с существующими отгрузками**.</span><span class="sxs-lookup"><span data-stu-id="d203d-116">(This pattern resembles the pattern that wave templates follow.) In addition, a **Consolidate with existing shipments** option has been added to each policy.</span></span> <span data-ttu-id="d203d-117">Если этот параметр включен, процедура *Запуск на склад* позволяет найти отгрузки для консолидации, выполняя поиск среди существующих отгрузок, созданных на основе одной и той же политики консолидации.</span><span class="sxs-lookup"><span data-stu-id="d203d-117">When this option is turned on, the *Release to warehouse* procedure finds shipments for consolidation by searching among existing shipments that were created based on the same consolidation policy.</span></span> <span data-ttu-id="d203d-118">В этом случае система выберет существующую отгрузку или загрузку вместо того, чтобы создавать новые.</span><span class="sxs-lookup"><span data-stu-id="d203d-118">In this case, the system will select an existing shipment or load instead of creating a new one.</span></span> <span data-ttu-id="d203d-119">Однако система будет выполнять консолидацию только с существующими отгрузками, имеющими статус *открыт*; отгрузки со статусом *запущено* или выше не будут рассматриваться как цели консолидации.</span><span class="sxs-lookup"><span data-stu-id="d203d-119">However, the system will only consolidate with existing shipments that have a status of *Open*; shipments that belong to a wave release with a status of *Released* or higher won't be considered as targets for consolidation.</span></span>

<span data-ttu-id="d203d-120">Когда доступны политики консолидации отгрузок, параметр **Консолидировать отгрузку перед запуском на склад**, которая ранее была доступна на странице настройки **Склады**, скрыт.</span><span class="sxs-lookup"><span data-stu-id="d203d-120">When shipment consolidation policies are made available, the **Consolidate shipment at release to warehouse** setting that was previously available on the **Warehouses** setup page is hidden.</span></span> <span data-ttu-id="d203d-121">Для облегчения перехода к новой функции консолидации отгрузок функция на странице **политики консолидации отгрузок** создает политику по умолчанию, которая автоматически включает старые настройки для существующих складов.</span><span class="sxs-lookup"><span data-stu-id="d203d-121">To help you transition to the new shipment consolidation feature, a function on the **Shipment consolidation policies** page creates a default policy that automatically includes the old setting for existing warehouses.</span></span> <span data-ttu-id="d203d-122">После создания политики по умолчанию, параметр **Консолидировать отгрузку перед запуском на склад** на странице **Настройка складов** больше учитываться не будет.</span><span class="sxs-lookup"><span data-stu-id="d203d-122">After that default policy is created, the **Consolidate shipment at release to warehouse** setting on the **Warehouses** setup page will no longer be considered.</span></span>

<span data-ttu-id="d203d-123">Можно использовать страницу **запуск на склад**, чтобы вручную переопределить применимую политику консолидации тем же способом, что и для переопределения политик выполнения.</span><span class="sxs-lookup"><span data-stu-id="d203d-123">You can use the **Release to warehouse** page to manually override the applicable consolidation policy in the same way that you can override fulfillment policies.</span></span>

<span data-ttu-id="d203d-124">Можно использовать команду **Запуск в производство \> Запуск на склад** на странице **Рабочее место планирования загрузки**, чтобы собрать исходящие загрузки, основанные на заказе на продажу и строках заказа на перемещение перед выполнением выпуска на склад.</span><span class="sxs-lookup"><span data-stu-id="d203d-124">You can use the **Release \> Release to warehouse** command on the **Load planning workbench** page to build outbound loads that are based on sales order and transfer order lines before you do the release to the warehouse.</span></span> <span data-ttu-id="d203d-125">Эти загрузки используют одну и ту же логику консолидации, которая была введена вместе с консолидацией политик отгрузки.</span><span class="sxs-lookup"><span data-stu-id="d203d-125">These loads use the same consolidation logic that was introduced together with the consolidation of shipment policies.</span></span>

<span data-ttu-id="d203d-126">Можно использовать страницу **Рабочее место консолидации отгрузок** , чтобы консолидировать существующие отгрузки, которые еще не были подтверждены, но уже были запущены на склад.</span><span class="sxs-lookup"><span data-stu-id="d203d-126">You can use the **Shipment consolidation workbench** page to consolidate existing shipments that haven't yet been confirmed but have already been released to the warehouse.</span></span> <span data-ttu-id="d203d-127">Эта функция поддерживает сценарии, в которых автоматизированный процесс запуска в производство, имеющий собственную консолидацию отгрузки, запускается несколько раз в день, но возможные дополнительные консолидации вручную определяются до завершения отгрузки перевозчикам в ходе процесса подтверждения.</span><span class="sxs-lookup"><span data-stu-id="d203d-127">This functionality supports scenarios where the automated release process, which has its own shipment consolidation, is run multiple times a day, but potential additional consolidations are manually identified before the shipment to carriers is completed during the confirmation process.</span></span> <span data-ttu-id="d203d-128">Эта функция позволяет консолидировать исходящие отгрузки, созданные из строк заказа на продажу или заказа на перемещение в любое время после выпуска отгрузок на склад, но перед подтверждением.</span><span class="sxs-lookup"><span data-stu-id="d203d-128">This functionality lets you consolidate outbound shipments that are created from sales order or transfer order lines at any time after the shipments are released to the warehouse but before they are confirmed.</span></span>

<span data-ttu-id="d203d-129">Страница **Рабочее место консолидации отгрузок** функционирует подобно рабочее место формирования загрузок, где можно одновременно оценивать несколько отгрузок и назначить неконсолидированный заказ для определенной отгрузки.</span><span class="sxs-lookup"><span data-stu-id="d203d-129">The **Shipment consolidation workbench** page works like the load building workbench, where you can assess multiple shipments at the same time and assign a non-consolidated order to a specific shipment.</span></span> <span data-ttu-id="d203d-130">Шаблоны консолидации отгрузок можно применять для оценки предлагаемых консолидаций несколько раз и для их подтверждения.</span><span class="sxs-lookup"><span data-stu-id="d203d-130">You can apply shipment consolidation templates to assess proposed consolidations multiple times and confirm them.</span></span> <span data-ttu-id="d203d-131">Некоторые правила реализованы для предотвращения неавторизованной консолидации и предупреждения о возможных ошибках.</span><span class="sxs-lookup"><span data-stu-id="d203d-131">Some rules are implemented to prevent unauthorized consolidation and to warn you about possible errors.</span></span>

## <a name="overview-of-new-functionality"></a><span data-ttu-id="d203d-132">Обзор новых функциональных возможностей</span><span class="sxs-lookup"><span data-stu-id="d203d-132">Overview of new functionality</span></span>

<span data-ttu-id="d203d-133">В этом разделе описываются страницы, команды и функции, которые были изменены или добавлены при включении и использовании функции *политики консолидации отгрузок*.</span><span class="sxs-lookup"><span data-stu-id="d203d-133">This section describes the pages, commands, and features that are changed or added when you turn on and use the *Shipment consolidation policies* feature.</span></span>

### <a name="shipment-consolidation-policies-page"></a><span data-ttu-id="d203d-134">Страница политик консолидации отгрузок</span><span class="sxs-lookup"><span data-stu-id="d203d-134">Shipment consolidation policies page</span></span>

<span data-ttu-id="d203d-135">Политики различаются по типу заказов на работу.</span><span class="sxs-lookup"><span data-stu-id="d203d-135">Policies are differentiated by work order type.</span></span> <span data-ttu-id="d203d-136">Тип **заказов на продажу** представляет отгрузки по _заказу на продажу_, а тип **заказов на перемещение** представляет отгрузки _Выдача на перемещение_.</span><span class="sxs-lookup"><span data-stu-id="d203d-136">The **Sales orders** type represents _Sales order_ shipments, and the **Transfer orders** type represents _Transfer issue_ shipments.</span></span>

<span data-ttu-id="d203d-137">Каждая политика консолидации отгрузок содержит запрос, определяющий, когда он применяется, и порядковый номер, определяющий порядок выполнения.</span><span class="sxs-lookup"><span data-stu-id="d203d-137">Every shipment consolidation policy has a query that defines when it's applied and a sequence number that determines the execution order.</span></span> <span data-ttu-id="d203d-138">Консолидация применяется для каждой уникальной комбинации выбранных полей.</span><span class="sxs-lookup"><span data-stu-id="d203d-138">Consolidation is applied for each unique combination of the selected fields.</span></span> <span data-ttu-id="d203d-139">Дополнительный параметр используется для консолидации с существующими (открытыми) отгрузками.</span><span class="sxs-lookup"><span data-stu-id="d203d-139">An additional parameter that is provided is used for consolidation with existing (open) shipments.</span></span> <span data-ttu-id="d203d-140">Эти политики оцениваются и применяются каждый раз, когда создается новая отгрузка (до обработки волн).</span><span class="sxs-lookup"><span data-stu-id="d203d-140">The policies are evaluated and applied every time that a new shipment is created (before wave processing).</span></span>

<span data-ttu-id="d203d-141">Если в политике отсутствуют обязательные поля или в нее включены какие-либо запрещенные поля, эта политика помечается как недопустимая в разделе **Выбрано**.</span><span class="sxs-lookup"><span data-stu-id="d203d-141">If a policy is missing any mandatory fields, or if it includes any prohibited fields, the policy is marked as not valid in the **Selected** section.</span></span> <span data-ttu-id="d203d-142">Списки обязательных и запрещенных полей являются жестко запрограммированными и могут быть расширены.</span><span class="sxs-lookup"><span data-stu-id="d203d-142">The lists of mandatory and prohibited fields are hard-coded and can be extended.</span></span>

<span data-ttu-id="d203d-143">В следующем списке показаны обязательные поля.</span><span class="sxs-lookup"><span data-stu-id="d203d-143">The following list shows the mandatory fields.</span></span> <span data-ttu-id="d203d-144">Поскольку отгрузки всегда разбиваются на основе этих полей, невозможно сгруппировать несколько отгрузок, имеющих различные значения для этих полей.</span><span class="sxs-lookup"><span data-stu-id="d203d-144">Because shipments are always split based on these fields, you can't group multiple shipments that have different values for these fields.</span></span>

- <span data-ttu-id="d203d-145">Заказы на продажу</span><span class="sxs-lookup"><span data-stu-id="d203d-145">For sales orders:</span></span>

    - <span data-ttu-id="d203d-146">**Номер счета:** _WHSShipmentTable.AccountNum_</span><span class="sxs-lookup"><span data-stu-id="d203d-146">**Account number:** _WHSShipmentTable.AccountNum_</span></span>
    - <span data-ttu-id="d203d-147">**Получатель доставки:** _WHSShipmentTable.DeliveryName_</span><span class="sxs-lookup"><span data-stu-id="d203d-147">**Delivery recipient:** _WHSShipmentTable.DeliveryName_</span></span>
    - <span data-ttu-id="d203d-148">**Почтовый адрес (RecId):** _WHSShipmentTable.DeliveryPostalAddress_</span><span class="sxs-lookup"><span data-stu-id="d203d-148">**Postal address (RecId):** _WHSShipmentTable.DeliveryPostalAddress_</span></span>
    - <span data-ttu-id="d203d-149">**Склад:** _WHSShipmentTable.InventLocationId_</span><span class="sxs-lookup"><span data-stu-id="d203d-149">**Warehouse:** _WHSShipmentTable.InventLocationId_</span></span>

- <span data-ttu-id="d203d-150">Для заказы на перемещение:</span><span class="sxs-lookup"><span data-stu-id="d203d-150">For transfer orders:</span></span>

    - <span data-ttu-id="d203d-151">**Со склада:** _InventTransferTable.InventLocationIdFrom_</span><span class="sxs-lookup"><span data-stu-id="d203d-151">**From warehouse:** _InventTransferTable.InventLocationIdFrom_</span></span>
    - <span data-ttu-id="d203d-152">**На склад:** _InventTransferTable.InventLocationIdTo_</span><span class="sxs-lookup"><span data-stu-id="d203d-152">**To warehouse:** _InventTransferTable.InventLocationIdTo_</span></span>

<span data-ttu-id="d203d-153">Следующие поля недоступны для всех типов документов.</span><span class="sxs-lookup"><span data-stu-id="d203d-153">The following fields are unavailable for all document types.</span></span> <span data-ttu-id="d203d-154">Эти поля не отображаются в интерфейсе пользователя и не могут использоваться для консолидации.</span><span class="sxs-lookup"><span data-stu-id="d203d-154">These fields aren't visible in the user interface (UI), and they can't be used for consolidation.</span></span>

- <span data-ttu-id="d203d-155">**Код отгрузки:** _WHSShipmentTable.ShipmentId_</span><span class="sxs-lookup"><span data-stu-id="d203d-155">**Shipment ID:** _WHSShipmentTable.ShipmentId_</span></span>
- <span data-ttu-id="d203d-156">**Статус:** _WHSShipmentTable.ShipmentStatus_</span><span class="sxs-lookup"><span data-stu-id="d203d-156">**Status:** _WHSShipmentTable.ShipmentStatus_</span></span>
- <span data-ttu-id="d203d-157">**Политика консолидации отгрузок:** _WHSShipmentTable.ShipConsolidationPolicyName_</span><span class="sxs-lookup"><span data-stu-id="d203d-157">**Shipment consolidation policy:** _WHSShipmentTable.ShipConsolidationPolicyName_</span></span>
- <span data-ttu-id="d203d-158">**Тип проводки работы:** _WHSShipmentTable.WorkTransType_</span><span class="sxs-lookup"><span data-stu-id="d203d-158">**Work transaction type:** _WHSShipmentTable.WorkTransType_</span></span>
- <span data-ttu-id="d203d-159">**Код волны:** _WHSShipmentTable.WaveId_</span><span class="sxs-lookup"><span data-stu-id="d203d-159">**Wave ID:** _WHSShipmentTable.WaveId_</span></span>
- <span data-ttu-id="d203d-160">**Код загрузки:** _WHSShipmentTable.LoadId_</span><span class="sxs-lookup"><span data-stu-id="d203d-160">**Load ID:** _WHSShipmentTable.LoadId_</span></span>
- <span data-ttu-id="d203d-161">**Код отгрузки:** _WHSLoadLine.ShipmentId_</span><span class="sxs-lookup"><span data-stu-id="d203d-161">**Shipment ID:** _WHSLoadLine.ShipmentId_</span></span>
- <span data-ttu-id="d203d-162">**Код загрузки:** _WHSLoadLine.LoadId_</span><span class="sxs-lookup"><span data-stu-id="d203d-162">**Load ID:** _WHSLoadLine.LoadId_</span></span>

<span data-ttu-id="d203d-163">По умолчанию при создании политики набор обязательных полей используется в качестве полей консолидации.</span><span class="sxs-lookup"><span data-stu-id="d203d-163">By default, when you create a policy, the set of mandatory fields is used as the consolidation fields.</span></span> <span data-ttu-id="d203d-164">Однако список можно изменить с помощью кнопок со стрелками влево и вправо.</span><span class="sxs-lookup"><span data-stu-id="d203d-164">However, you can modify the list by using left arrow and right arrow buttons.</span></span> <span data-ttu-id="d203d-165">(Процесс напоминает процесс выбора способов в шаблонах волн.)</span><span class="sxs-lookup"><span data-stu-id="d203d-165">(The process resembles the process for selecting methods in wave templates.)</span></span>

<span data-ttu-id="d203d-166">Значения, выбранные пользователями для этих полей, будут использоваться для всех вновь создаваемых отгрузок, или они будут добавлены в существующие отгрузки в ходе консолидации с этими отгрузками.</span><span class="sxs-lookup"><span data-stu-id="d203d-166">The values that users select for these fields will be used for all newly created shipments, or they will be added to existing shipments during consolidation with those shipments.</span></span> <span data-ttu-id="d203d-167">Когда две отгрузки имеют одинаковое значение для поля, выбранного для консолидации этих отгрузок, отгрузки консолидируются.</span><span class="sxs-lookup"><span data-stu-id="d203d-167">When two shipments have the same value for a field that is selected for consolidation of those shipments, the shipments are consolidated.</span></span> <span data-ttu-id="d203d-168">Этот же принцип применяется для всех последующих полей консолидации, которые выбраны.</span><span class="sxs-lookup"><span data-stu-id="d203d-168">The same principle applies for all subsequent consolidation fields that are selected.</span></span> <span data-ttu-id="d203d-169">Если значения различаются, вторая отгрузка сбрасывается и выбирается для новой отгрузки.</span><span class="sxs-lookup"><span data-stu-id="d203d-169">If the values differ, the second shipment is discarded and will be selected for a new shipment.</span></span> <span data-ttu-id="d203d-170">Процесс автоматической консолидации состоит из создания всех уникальных комбинаций значений полей консолидации отгрузок и последующего назначения отгрузки соответствующей комбинации.</span><span class="sxs-lookup"><span data-stu-id="d203d-170">The automated consolidation process consists of creating all the unique combinations of values for the shipment consolidation fields and then assigning a shipment to the relevant combination.</span></span>

<span data-ttu-id="d203d-171">Невыбранные поля игнорируются в процессе консолидации.</span><span class="sxs-lookup"><span data-stu-id="d203d-171">Unselected fields are ignored during the consolidation process.</span></span> <span data-ttu-id="d203d-172">Если для невыбранных полей две отгрузки имеют различающиеся значения, это поле очищается (то есть оно задается пустым).</span><span class="sxs-lookup"><span data-stu-id="d203d-172">If two shipments have different values for an unselected field, the field is cleared (that is, it's set to blank).</span></span> <span data-ttu-id="d203d-173">Если обе отгрузки имеют одинаковое значение для невыбранных полей, поле заполняется.</span><span class="sxs-lookup"><span data-stu-id="d203d-173">If both shipments have the same value for an unselected field, the field is filled in.</span></span>

<span data-ttu-id="d203d-174">Список полей консолидации (то есть полей, которые будут очищены, если они имеют другие значения) является жестко запрограммированным.</span><span class="sxs-lookup"><span data-stu-id="d203d-174">The list of consolidation fields (that is, fields that will be cleared if they have different values) is hard-coded.</span></span> <span data-ttu-id="d203d-175">Список содержит все поля, которые инициализируются в строке заказа на продажу или заказа на перемещение при создании новой отгрузки.</span><span class="sxs-lookup"><span data-stu-id="d203d-175">The list contains all fields that are initialized from a sales order or transfer order line when a new shipment is created.</span></span> <span data-ttu-id="d203d-176">Другими словами, если поле не инициализировано из строки заказа на продажу или заказа на перемещение, оно игнорируется при добавлении новых данных в существующую отгрузку.</span><span class="sxs-lookup"><span data-stu-id="d203d-176">In other words, if a field isn't initialized from a sales order or transfer order line, it's ignored when new data is added to an existing shipment.</span></span>

### <a name="release-to-warehouse-page"></a><span data-ttu-id="d203d-177">Страница «Запуск на склад»</span><span class="sxs-lookup"><span data-stu-id="d203d-177">Release to warehouse page</span></span>

- <span data-ttu-id="d203d-178">Новое поле в нижней сетке отображает примененную политику консолидации.</span><span class="sxs-lookup"><span data-stu-id="d203d-178">A new field in the lower grid shows the consolidation policy that was applied.</span></span>
- <span data-ttu-id="d203d-179">Новая кнопка позволяет вручную выбрать и/или переопределить политику консолидации.</span><span class="sxs-lookup"><span data-stu-id="d203d-179">A new button lets you manually select and/or override the consolidation policy.</span></span>

### <a name="release-to-warehouse-command-on-the-load-planning-workbench-page"></a><span data-ttu-id="d203d-180">Команда Запуск на склад на странице Рабочее место планирования загрузки</span><span class="sxs-lookup"><span data-stu-id="d203d-180">Release to warehouse command on the Load planning workbench page</span></span>

- <span data-ttu-id="d203d-181">Логика была настроена так, что использует примененные политики консолидации.</span><span class="sxs-lookup"><span data-stu-id="d203d-181">The logic was adjusted so that it uses applied consolidation policies.</span></span>
- <span data-ttu-id="d203d-182">Отгрузки в данный состав консолидируются только в рамках одной загрузки.</span><span class="sxs-lookup"><span data-stu-id="d203d-182">Shipments are now consolidated only within a single load.</span></span>

### <a name="consolidate-shipments-page"></a><span data-ttu-id="d203d-183">Страница Консолидация отгрузок</span><span class="sxs-lookup"><span data-stu-id="d203d-183">Consolidate shipments page</span></span>

- <span data-ttu-id="d203d-184">Поиск аналогичных отгрузок (то есть кандидатов для консолидации) был изменен так, чтобы он использовал поля, выбранные в политике консолидации отгрузок.</span><span class="sxs-lookup"><span data-stu-id="d203d-184">The search for similar shipments (that is, candidates for consolidation) was changed so that it uses fields that are selected in the shipment consolidation policy.</span></span>
- <span data-ttu-id="d203d-185">Поля, имеющие различающиеся значения в других отгрузках, в данный форме устанавливаются как пустые.</span><span class="sxs-lookup"><span data-stu-id="d203d-185">Fields that have different values in different shipments are now set to blank.</span></span> <span data-ttu-id="d203d-186">(Ранее использовались значения из выбранной отгрузки "базовая".)</span><span class="sxs-lookup"><span data-stu-id="d203d-186">(Previously, the values from the selected "base" shipment were used.)</span></span>

### <a name="shipment-consolidation-workbench-page"></a><span data-ttu-id="d203d-187">Страница Рабочее место консолидации отгрузок</span><span class="sxs-lookup"><span data-stu-id="d203d-187">Shipment consolidation workbench page</span></span>

- <span data-ttu-id="d203d-188">Новая функциональность копирует процесс консолидации вручную с большим масштабом.</span><span class="sxs-lookup"><span data-stu-id="d203d-188">New functionality replicates the process of manual consolidation on a larger scale.</span></span>
- <span data-ttu-id="d203d-189">Теперь эту страницу можно открыть из меню **Запуск на склад** в модуле **Управление складом**.</span><span class="sxs-lookup"><span data-stu-id="d203d-189">You can now open this page from the **Release to warehouse** menu in the **Warehouse management** module.</span></span>
- <span data-ttu-id="d203d-190">Алгоритм анализирует существующие отгрузки, которые еще не были отгружены.</span><span class="sxs-lookup"><span data-stu-id="d203d-190">The algorithm analyzes existing shipments that haven't yet been shipped.</span></span> <span data-ttu-id="d203d-191">Затем она предлагает консолидацию на основе полей, выбранных в политиках консолидации.</span><span class="sxs-lookup"><span data-stu-id="d203d-191">It then proposes consolidation, based on fields that are selected in the consolidation policies.</span></span>

## <a name="comparison-of-functionality"></a><span data-ttu-id="d203d-192">Сравнение функций</span><span class="sxs-lookup"><span data-stu-id="d203d-192">Comparison of functionality</span></span>

<span data-ttu-id="d203d-193">В следующей таблице показано, как выполняется консолидация отгрузки, когда не используются политики консолидации отгрузок и когда они используются.</span><span class="sxs-lookup"><span data-stu-id="d203d-193">The following table summarizes how shipment consolidation works when you don't use shipment consolidation policies and when you do use them.</span></span>

| <span data-ttu-id="d203d-194">Без политик консолидации отгрузок</span><span class="sxs-lookup"><span data-stu-id="d203d-194">Without shipment consolidation policies</span></span> | <span data-ttu-id="d203d-195">С политиками консолидации отгрузок</span><span class="sxs-lookup"><span data-stu-id="d203d-195">With shipment consolidation policies</span></span> |
|---|----|
| <span data-ttu-id="d203d-196">Неприменимо</span><span class="sxs-lookup"><span data-stu-id="d203d-196">Not applicable</span></span> | <span data-ttu-id="d203d-197">Отгрузки по продажам или перемещению, выбранные для консолидации, должны иметь ту же политику консолидации, что и создаваемая отгрузка, или они должны быть назначены открытой отгрузке (когда включен параметр **Консолидация с существующими отгрузками** ).</span><span class="sxs-lookup"><span data-stu-id="d203d-197">Sales or transfer shipments that are selected for consolidation must have the same consolidation policy as the shipment that is being created, or they must be assigned to an open shipment (when the **Consolidate with existing shipments** option is turned on).</span></span> |
| <span data-ttu-id="d203d-198">Процедура *Запуск на склад* не выполняет поиск по существующим отгрузкам, чтобы найти отгрузку для консолидации.</span><span class="sxs-lookup"><span data-stu-id="d203d-198">The *Release to warehouse* procedure doesn't search among existing shipments to find a shipment for consolidation.</span></span> <span data-ttu-id="d203d-199">Для поиска отгрузки для консолидации используются только отгрузки, созданные текущим экземпляром процедуры *Запуск на склад*.</span><span class="sxs-lookup"><span data-stu-id="d203d-199">Only shipments that are created by a current instance of the *Release to warehouse* procedure are used to find a shipment for consolidation.</span></span> | <span data-ttu-id="d203d-200">Если для используемой в данный момент политики консолидации включен параметр **консолидация с существующими отгрузками**, то процедура *запуск на склад* выполняет поиск среди существующих отгрузок, созданных на основе той же политики консолидации для поиска отгрузки для консолидации.</span><span class="sxs-lookup"><span data-stu-id="d203d-200">If the **Consolidate with existing shipments** option is turned on for a consolidation policy that is currently being used, the *Release to warehouse* procedure searches among existing shipments that were created based on the same consolidation policy to find a shipment for consolidation.</span></span> <span data-ttu-id="d203d-201">Таким образом, если имеется две политики, отгрузка, создаваемая на основе политики 2, никогда не будет консолидироваться с отгрузкой, созданной на основе политики 1.</span><span class="sxs-lookup"><span data-stu-id="d203d-201">Therefore, if you have two policies, a shipment that is being created based on policy 2 will never be consolidated with a shipment that was created based on policy 1.</span></span> |
| <span data-ttu-id="d203d-202">Неприменимо</span><span class="sxs-lookup"><span data-stu-id="d203d-202">Not applicable</span></span> | <span data-ttu-id="d203d-203">Если список полей политики консолидации пуст, или если политика не найдена, создается новая отгрузка для каждой строки заказа на продажу или заказа на перемещение.</span><span class="sxs-lookup"><span data-stu-id="d203d-203">If a list of consolidation policy fields is empty, or if a policy can't be found, a new shipment is created for each sales order or transfer order line.</span></span> |
| <span data-ttu-id="d203d-204">Следующее поле консолидации определяет уникальное сочетание значений, используемых для консолидации отгрузок для *строки перемещения*.</span><span class="sxs-lookup"><span data-stu-id="d203d-204">The following consolidation field defines the unique combination of values that is used to consolidate shipments for a *transfer line*.</span></span> <span data-ttu-id="d203d-205">(Все остальные поля игнорируются.)</span><span class="sxs-lookup"><span data-stu-id="d203d-205">(All other fields are ignored.)</span></span><ul><li><span data-ttu-id="d203d-206">Номер заказа (OrderNum)</span><span class="sxs-lookup"><span data-stu-id="d203d-206">Order number (OrderNum)</span></span></li></ul> | <span data-ttu-id="d203d-207">Следующее поле консолидации определяет уникальное сочетание значений, используемых для консолидации отгрузок для *строки перемещения*.</span><span class="sxs-lookup"><span data-stu-id="d203d-207">The following consolidation fields define the unique combination of values that is used to consolidate shipments for a *transfer line*.</span></span> <span data-ttu-id="d203d-208">(Все остальные поля игнорируются.)</span><span class="sxs-lookup"><span data-stu-id="d203d-208">(All other fields are ignored.)</span></span><ul><li><span data-ttu-id="d203d-209">Номер заказа (OrderNum)</span><span class="sxs-lookup"><span data-stu-id="d203d-209">Order number (OrderNum)</span></span></li><li><span data-ttu-id="d203d-210">Получатель поставки (DeliveryName)</span><span class="sxs-lookup"><span data-stu-id="d203d-210">Delivery recipient (DeliveryName)</span></span></li><li><span data-ttu-id="d203d-211">Почтовый адрес (DeliveryPostalAddress)</span><span class="sxs-lookup"><span data-stu-id="d203d-211">Postal address (DeliveryPostalAddress)</span></span></li><li><span data-ttu-id="d203d-212">Код страны ISO (CountryRegionISOCode)</span><span class="sxs-lookup"><span data-stu-id="d203d-212">ISO country code (CountryRegionISOCode)</span></span></li><li><span data-ttu-id="d203d-213">Адрес (Address)</span><span class="sxs-lookup"><span data-stu-id="d203d-213">Address (Address)</span></span></li><li><span data-ttu-id="d203d-214">Узел (InventSiteId)</span><span class="sxs-lookup"><span data-stu-id="d203d-214">Site (InventSiteId)</span></span></li><li><span data-ttu-id="d203d-215">Склад (InventLocationId)</span><span class="sxs-lookup"><span data-stu-id="d203d-215">Warehouse (InventLocationId)</span></span></li><li><span data-ttu-id="d203d-216">Перевозчик, осуществляющий доставку (CarrierCode)</span><span class="sxs-lookup"><span data-stu-id="d203d-216">Shipping carrier (CarrierCode)</span></span></li><li><span data-ttu-id="d203d-217">Услуга перевозчика (CarrierServiceCode)</span><span class="sxs-lookup"><span data-stu-id="d203d-217">Carrier service (CarrierServiceCode)</span></span></li><li><span data-ttu-id="d203d-218">Режим доставки (ModeCode)</span><span class="sxs-lookup"><span data-stu-id="d203d-218">Mode of delivery (ModeCode)</span></span></li><li><span data-ttu-id="d203d-219">Группа перевозчика (CarrierGroupCode)</span><span class="sxs-lookup"><span data-stu-id="d203d-219">Carrier group (CarrierGroupCode)</span></span></li><li><span data-ttu-id="d203d-220">Условия поставки (DlvTermId)</span><span class="sxs-lookup"><span data-stu-id="d203d-220">Delivery terms (DlvTermId)</span></span></li></ul><span data-ttu-id="d203d-221">Эти поля являются единственными полями, доступными и инициализированными при создании новой отгрузки.</span><span class="sxs-lookup"><span data-stu-id="d203d-221">These fields are the only fields that are available and initialized when a new shipment is created.</span></span> |
| <span data-ttu-id="d203d-222">Следующее поле консолидации определяет уникальное сочетание значений, используемых для консолидации отгрузок для *строки продажи*.</span><span class="sxs-lookup"><span data-stu-id="d203d-222">The following consolidation fields define the unique combination of values that is used to consolidate shipments for a *sales line*.</span></span> <span data-ttu-id="d203d-223">(Все остальные поля игнорируются.)</span><span class="sxs-lookup"><span data-stu-id="d203d-223">(All other fields are ignored.)</span></span><ul><li><span data-ttu-id="d203d-224">Номер заказа (OrderNum)</span><span class="sxs-lookup"><span data-stu-id="d203d-224">Order number (OrderNum)</span></span></li><li><span data-ttu-id="d203d-225">Ссылка клиента (CustomerRef)</span><span class="sxs-lookup"><span data-stu-id="d203d-225">Customer reference (CustomerRef)</span></span></li><li><span data-ttu-id="d203d-226">Заявка клиента (CustomerReq)</span><span class="sxs-lookup"><span data-stu-id="d203d-226">Customer requisition (CustomerReq)</span></span></li><li><span data-ttu-id="d203d-227">Условия поставки (DlvTermId)</span><span class="sxs-lookup"><span data-stu-id="d203d-227">Delivery terms (DlvTermId)</span></span></li></ul> | <span data-ttu-id="d203d-228">Следующее поле консолидации определяет уникальное сочетание значений, используемых для консолидации отгрузок для *строки продажи*.</span><span class="sxs-lookup"><span data-stu-id="d203d-228">The following consolidation fields define the unique combination of values that is used to consolidate shipments for a *sales line*.</span></span> <span data-ttu-id="d203d-229">(Все остальные поля игнорируются.)</span><span class="sxs-lookup"><span data-stu-id="d203d-229">(All other fields are ignored.)</span></span><ul><li><span data-ttu-id="d203d-230">Номер заказа (OrderNum)</span><span class="sxs-lookup"><span data-stu-id="d203d-230">Order number (OrderNum)</span></span></li><li><span data-ttu-id="d203d-231">Номер счета (AccountNum)</span><span class="sxs-lookup"><span data-stu-id="d203d-231">Account number (AccountNum)</span></span></li><li><span data-ttu-id="d203d-232">Получатель поставки (DeliveryName)</span><span class="sxs-lookup"><span data-stu-id="d203d-232">Delivery recipient (DeliveryName)</span></span></li><li><span data-ttu-id="d203d-233">Почтовый адрес (DeliveryPostalAddress)</span><span class="sxs-lookup"><span data-stu-id="d203d-233">Postal address (DeliveryPostalAddress)</span></span></li><li><span data-ttu-id="d203d-234">Код страны ISO (CountryRegionISOCode)</span><span class="sxs-lookup"><span data-stu-id="d203d-234">ISO country code (CountryRegionISOCode)</span></span></li><li><span data-ttu-id="d203d-235">Адрес (Address)</span><span class="sxs-lookup"><span data-stu-id="d203d-235">Address (Address)</span></span></li><li><span data-ttu-id="d203d-236">Узел (InventSiteId)</span><span class="sxs-lookup"><span data-stu-id="d203d-236">Site (InventSiteId)</span></span></li><li><span data-ttu-id="d203d-237">Склад (InventLocationId)</span><span class="sxs-lookup"><span data-stu-id="d203d-237">Warehouse (InventLocationId)</span></span></li><li><span data-ttu-id="d203d-238">Перевозчик, осуществляющий доставку (CarrierCode)</span><span class="sxs-lookup"><span data-stu-id="d203d-238">Shipping carrier (CarrierCode)</span></span></li><li><span data-ttu-id="d203d-239">Услуга перевозчика (CarrierServiceCode)</span><span class="sxs-lookup"><span data-stu-id="d203d-239">Carrier service (CarrierServiceCode)</span></span></li><li><span data-ttu-id="d203d-240">Режим доставки (ModeCode)</span><span class="sxs-lookup"><span data-stu-id="d203d-240">Mode of delivery (ModeCode)</span></span></li><li><span data-ttu-id="d203d-241">Группа перевозчика (CarrierGroupCode)</span><span class="sxs-lookup"><span data-stu-id="d203d-241">Carrier group (CarrierGroupCode)</span></span></li><li><span data-ttu-id="d203d-242">Код брокера (BrokerCode)</span><span class="sxs-lookup"><span data-stu-id="d203d-242">Broker ID (BrokerCode)</span></span></li><li><span data-ttu-id="d203d-243">Направление (LoadDirection)</span><span class="sxs-lookup"><span data-stu-id="d203d-243">Direction (LoadDirection)</span></span></li><li><span data-ttu-id="d203d-244">Условия поставки (DlvTermId)</span><span class="sxs-lookup"><span data-stu-id="d203d-244">Delivery terms (DlvTermId)</span></span></li><li><span data-ttu-id="d203d-245">Ссылка клиента (CustomerRef)</span><span class="sxs-lookup"><span data-stu-id="d203d-245">Customer reference (CustomerRef)</span></span></li><li><span data-ttu-id="d203d-246">Заявка клиента (CustomerReq)</span><span class="sxs-lookup"><span data-stu-id="d203d-246">Customer requisition (CustomerReq)</span></span></li></ul><span data-ttu-id="d203d-247">Эти поля являются единственными полями, доступными и инициализированными при создании новой отгрузки.</span><span class="sxs-lookup"><span data-stu-id="d203d-247">These fields are the only fields that are available and initialized when a new shipment is created.</span></span> |
| <span data-ttu-id="d203d-248">Неприменимо</span><span class="sxs-lookup"><span data-stu-id="d203d-248">Not applicable</span></span> | <span data-ttu-id="d203d-249">Следующие поля консолидации являются обязательными для *строки продажи* и не могут быть удалены:</span><span class="sxs-lookup"><span data-stu-id="d203d-249">The following consolidation fields are mandatory for a *sales line* and can't be removed:</span></span><ul><li><span data-ttu-id="d203d-250">Номер счета (AccountNum)</span><span class="sxs-lookup"><span data-stu-id="d203d-250">Account number (AccountNum)</span></span></li><li><span data-ttu-id="d203d-251">Получатель поставки (DeliveryName)</span><span class="sxs-lookup"><span data-stu-id="d203d-251">Delivery recipient (DeliveryName)</span></span></li><li><span data-ttu-id="d203d-252">Почтовый адрес (DeliveryPostalAddress)</span><span class="sxs-lookup"><span data-stu-id="d203d-252">Postal address (DeliveryPostalAddress)</span></span></li><li><span data-ttu-id="d203d-253">Склад (InventLocationId)</span><span class="sxs-lookup"><span data-stu-id="d203d-253">Warehouse (InventLocationId)</span></span></li></ul><span data-ttu-id="d203d-254">По умолчанию эти поля будут назначены при создании новой политики.</span><span class="sxs-lookup"><span data-stu-id="d203d-254">By default, these fields will be assigned when a new policy is created.</span></span> <span data-ttu-id="d203d-255">Их невозможно удалить.</span><span class="sxs-lookup"><span data-stu-id="d203d-255">They can't be removed.</span></span> |
| <span data-ttu-id="d203d-256">В процедуре *Запуск загрузок на склад* на странице **Рабочее место планирования загрузки** используется собственный отдельный код для создания отгрузок и волн.</span><span class="sxs-lookup"><span data-stu-id="d203d-256">The *Release of loads to warehouse* procedure on the **Load planning workbench** page uses its own separate code to create shipments and waves.</span></span> | <span data-ttu-id="d203d-257">Политики консолидации отгрузок используются для определения полей, которые должны быть оценены для консолидации.</span><span class="sxs-lookup"><span data-stu-id="d203d-257">Shipment consolidation policies are applied to determine which fields should be evaluated for consolidation.</span></span> <span data-ttu-id="d203d-258">Отгрузки консолидируются только в рамках одной загрузки.</span><span class="sxs-lookup"><span data-stu-id="d203d-258">Shipments are consolidated only within a single load.</span></span> |
| <span data-ttu-id="d203d-259">Вручную выберите **консолидация отгрузок** на странице **все отгрузки** , а затем выберите целевой "основной" отгрузки.</span><span class="sxs-lookup"><span data-stu-id="d203d-259">You manually select **Consolidate shipments** on the **All shipments** page and then select a target "base" shipment.</span></span> <span data-ttu-id="d203d-260">Фильтр предложит все существующие отгрузки, имеющие одинаковые значения для нескольких ключевых полей.</span><span class="sxs-lookup"><span data-stu-id="d203d-260">The filter will suggest any existing shipments that have matching values for several key fields.</span></span> | <span data-ttu-id="d203d-261">Вручную выберите **консолидация отгрузок** на странице **все отгрузки** , а затем выберите целевой "основной" отгрузки.</span><span class="sxs-lookup"><span data-stu-id="d203d-261">You manually select **Consolidate shipments** on the **All shipments** page and then select a target "base" shipment.</span></span> <span data-ttu-id="d203d-262">Система предложит другие существующие отгрузки, соответствующие значениям нескольких ключевых полей, настроенных для соответствующих политик консолидации отгрузок.</span><span class="sxs-lookup"><span data-stu-id="d203d-262">The system will suggest other existing shipments by matching the values of several key fields that are configured for the relevant shipment consolidation policies.</span></span> |
| <span data-ttu-id="d203d-263">Можно использовать команду **консолидировать отгрузки** на странице **все отгрузки** только для одной отгрузки.</span><span class="sxs-lookup"><span data-stu-id="d203d-263">You can use the **Consolidate shipments** command on the **All shipments** page for only a single shipment.</span></span> | <span data-ttu-id="d203d-264">Страница **Рабочее место консолидации отгрузок** позволяет найти набор отгрузок, которые еще не находятся в состоянии "отгружено".</span><span class="sxs-lookup"><span data-stu-id="d203d-264">The **Shipment consolidation workbench** page helps you find a set of shipments that aren't yet in a shipped state.</span></span> <span data-ttu-id="d203d-265">Эти отгрузки анализируются на основе нескольких ключевых полей, настроенных в политиках консолидации отгрузок.</span><span class="sxs-lookup"><span data-stu-id="d203d-265">These shipments are analyzed based on several key fields that are configured in your shipment consolidation policies.</span></span> <span data-ttu-id="d203d-266">Все отгрузки, для которых значения этих полей совпадают, предлагаются для консолидации.</span><span class="sxs-lookup"><span data-stu-id="d203d-266">Any shipments where the values of these fields match are suggested for consolidation.</span></span><p><span data-ttu-id="d203d-267">Консолидацию можно выполнить вручную, удалив отгрузки из предложенных консолидаций и/или добавив отгрузки в них.</span><span class="sxs-lookup"><span data-stu-id="d203d-267">You can manually maintain the consolidation by removing shipments from suggested consolidations and/or by adding shipments to them.</span></span> <span data-ttu-id="d203d-268">Могут возникать различные типы ошибок, но некоторые из них можно переопределить.</span><span class="sxs-lookup"><span data-stu-id="d203d-268">Several types of errors can occur, but you can override some of them.</span></span></p> |
| <span data-ttu-id="d203d-269">**Примечание:** процедуры *Автоматический запуск заказов на продажу на склад* разделяет строки продаж по группам.</span><span class="sxs-lookup"><span data-stu-id="d203d-269">**Design note:** The *Automatic release of sales orders to warehouse* procedure splits sales lines into groups.</span></span> <span data-ttu-id="d203d-270">Каждая группа имеет собственное уникальное значение **ReleaseToWarehouseId** и обрабатывается отдельно в соответствии с процедурой *Запуск на склад*.</span><span class="sxs-lookup"><span data-stu-id="d203d-270">Each group has its own unique **ReleaseToWarehouseId** value and is processed separately by the *Release to warehouse* procedure.</span></span> <span data-ttu-id="d203d-271">Эта процедура создает новую работу независимо от настройки перерыва в работе.</span><span class="sxs-lookup"><span data-stu-id="d203d-271">This procedure creates new work regardless of the work break setup.</span></span> | <span data-ttu-id="d203d-272">**Примечание:** процедура *Автоматический запуск заказов на продажу на склад* назначает одно и то же значение **ReleaseToWarehouseId** всем обрабатываемым строкам продаж.</span><span class="sxs-lookup"><span data-stu-id="d203d-272">**Design note:** The *Automatic release of sales orders to warehouse* procedure assigns the same **ReleaseToWarehouseId** value to all sales lines that are being processed.</span></span> <span data-ttu-id="d203d-273">Все строки продаж обрабатываются в одно и то же время с помощью процедуры *Запуск на склад*.</span><span class="sxs-lookup"><span data-stu-id="d203d-273">All sales lines are processed by the *Release to warehouse* procedure at the same time.</span></span> <span data-ttu-id="d203d-274">Для обеспечения более раннего поведения необходимо настроить для кода отгрузки его перерыв в работе.</span><span class="sxs-lookup"><span data-stu-id="d203d-274">To ensure the earlier behavior, you must configure work break per shipment ID.</span></span> |

## <a name="additional-resources"></a><span data-ttu-id="d203d-275">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="d203d-275">Additional resources</span></span>

- [<span data-ttu-id="d203d-276">Настройка политик консолидации отгрузок</span><span class="sxs-lookup"><span data-stu-id="d203d-276">Configure shipment consolidation policies</span></span>](configure-shipment-consolidation-policies.md)