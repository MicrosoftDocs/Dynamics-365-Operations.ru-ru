---
title: Последовательность работ, управляемая системой
description: В этой статье приводятся сведения о последовательности работ, управляемой системой. Эта функция позволяет отсортировать и отфильтровать заказы на работу, предоставляемые пользователям системой для выполнения. Это полезно в тех случаях, когда для процесса складской комплектации требуются дополнительные критерии.
author: Mirzaab
ms.date: 07/03/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: WHSRFSystemDirectedWorkSequenceQuery, WHSLocDirTable
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2020-07-03
ms.dyn365.ops.version: 10.0.7
ms.openlocfilehash: 88ea680b5b3e237d117b087978d703a7f6f09465
ms.sourcegitcommit: c98d55a4a6e27239ae6b317872332f01cbe8b875
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/02/2022
ms.locfileid: "9219699"
---
# <a name="system-directed-work-sequencing"></a>Последовательность работ, управляемая системой

[!include [banner](../includes/banner.md)]

Последовательность работ, управляемая системой, позволяет отсортировать и отфильтровать заказы на работу, предоставляемые пользователям системой для выполнения. Это полезно в ситуациях, когда для обработки складской комплектации требуются дополнительные критерии (например, время отгрузки, зона комплектации, профиль местоположения или сочетание различных критериев).

Эта функция расширяет возможности текущей управляемой системой комплектации путем добавления управляемого системой порядка запросов, где пользователи могут настроить последовательность и один или несколько запросов, которые будут оценивать все созданные заказы на работу. Будут собраны и представлены только те заказы на работу, которые удовлетворяют критериям, указанным в настройке элемента меню мобильного устройства.

Таким образом, эта функция позволяет дополнительно оптимизировать процессы комплектации склада, поскольку она определяет заказы на работу, которые соответствуют указанному критерию, назначает их для соответствующего пункта меню мобильного устройства, а затем предоставляет их работнику на основе определенного набора навыков, оборудования комплектации или другого требования.

> [!NOTE]
> При необходимости использования других критериев необходимо использовать несколько пунктов меню мобильного устройства.

## <a name="turn-on-the-organization-wide-system-directed-work-sequencing-feature"></a>Включение функции последовательности работ под управлением системы во всей организации

Прежде чем использовать последовательность работ, управляемую системой, эта функция должна быть включена в системе. Администраторы могут использовать рабочую область [Управление функциями](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) для проверки статуса функции и ее включения, если это требуется. В этом случае функция указана следующим образом:

- **Модуль:** *Управление складом*
- **Имя функции:** *Последовательность работы под управлением системы во всей организации*

## <a name="setup"></a>Настройка

### <a name="make-demo-data-available"></a>Сделать демонстрационные данные доступными

Для работы с этим сценарием с помощью значений, представленных в этой статье, следует работать с системой, в которой установлены стандартные [демонстрационные данные](../../fin-ops-core/fin-ops/get-started/demo-data.md). Дополнительно необходимо выбрать юридическое лицо **USMF**. В сценарии используется склад *51* из демонстрационных данных.

> [!IMPORTANT]
> Перед тем, как выпустить заказы на склад, убедитесь, что в местах комплектации достаточно запасов для всех номенклатур по заказам.
>
> Этот сценарий должны поддерживать данные USMF по умолчанию. Если вы не используете демонстрационные данные, проверьте настройку **Директива местонахождения**, чтобы узнать, какие местонахождения комплектации используются для комплектации заказов на продажу. Если необходимо скорректировать запасы, можно создать ручные перемещения, воспользуйтесь пополнением или используйте любой другой поток.

### <a name="set-up-a-mobile-device-menu-item"></a>Настройка пункта меню мобильного устройства

1. Перейдите в раздел **Управление складом \> Настройка \> Мобильное устройство \> Пункты меню мобильного устройства**.
1. В списке пунктов меню мобильного устройства выберите **Комплектация продаж — система**. Требуемый пункт меню уже должен существовать. 
1. Подтвердите следующие параметры.

    - На экспресс-вкладке **Общие** в поле **Кем управляется** должно быть указано *Управляется системой*.
    - На экспресс-вкладке **Классы работ** должны отображаться следующие настройки:

        | Код класса работы | Тип заказа на выполнение работ |
        |---|---|
        | Sales | Заказы на продажу |
        | Комплектация заказа на продажу | Заказы на продажу |

1. В области действий выберите **Запросы последовательности работы под управлением системы**.
1. Выберите **Правка**.
1. Удалите существующую строку, затем подтвердите действие, выбрав **Да**.
1. На панели операций выберите **Создать** для создания строки.
1. В новой строке установите следующие значения:

    - **Порядковый номер**: *1*
    - **Поле описания:** *Количество работ меньше 20 и убывает*

1. Нажмите **Сохранить**.
1. На панели операций выберите **Изменить запрос**.
1. На вкладке **Объединения** раскройте иерархию объединения, чтобы отобразить таблицу **Строки работ**.
1. Выберите соединение таблицы **Строки работ**.
1. Выберите **Добавить соединение таблицы**.
1. В отобразившемся списке найдите и выберите строку со следующими параметрами:

    - **Режим соединения:** *n:1*
    - **Отношение:** *Местонахождения (местонахождение)*

1. Выберите **Выбрать**.

    Местоположения добавляются к соединению таблицы.

1. На вкладке **Сортировка** выберите **добавить**, чтобы добавить строку.
1. В новой строке установите следующие значения:

    - **Таблица:** *Строки работ*
    - **Производная таблица:** *Строки работ*
    - **Поле:** *Количество работы* (В появившемся окне сообщения выберите **Да**, чтобы добавить сортировку в это поле.)
    - **Направление поиска:** *В порядке убывания*

1. Выберите вкладку **Диапазон**.

    Если в последовательность должны быть включены только отдельные критерии работы, их можно указать на вкладке **Диапазон**. В этом примере необходимо включить только работу, когда количество меньше 20 шт. (самая малая единица измерения).

    Обратите внимание, что некоторые строки уже включены. Эти строки не должны удаляться.

1. Выберите **Добавить**, чтобы добавить строку.
1. В новой строке установите следующие значения:

    - **Таблица:** *Строки работ*
    - **Производная таблица:** *Строки работ*
    - **Поле:** *Рабочее количество запасов*
    - **Критерий:** *\<20* (менее 20)

1. Выберите **Добавить**, чтобы добавить другую строку.
1. В новой строке установите следующие значения:

    - **Таблица:** *Строки работ*
    - **Производная таблица:** *Строки работ*
    - **Поле:** *Тип работы*
    - **Критерии:** *Комплектации*

1. Выберите **Добавить**, чтобы добавить другую строку.
1. В новой строке установите следующие значения:

    - **Таблица:** *Местонахождения*
    - **Производная таблица:** *Местонахождения*
    - **Поле:** *Код профиля местонахождения*
    - **Критерий:** *!STAGE*

        > [!IMPORTANT]
        > Убедитесь, что указан восклицательный знак (*!*) перед *STAGE*.

1. Выберите **ОК**, чтобы сохранить и закрыть запрос.
1. Нажмите **Сохранить**.
1. Закройте страницу, чтобы вернуться на страницу **Пункты меню мобильного устройства**.

> [!NOTE]
> Эта настройка определяет критерии, которые будут использоваться для подачи подходящей работы в пункт меню мобильного устройства. При добавлении дополнительных строк критериев в запрос система сначала будет использовать строку запроса с наименьшим порядковым номером. Другими словами, вся подходящая работа для порядкового номера 1 будут представлена пользователю в первую очередь, а затем все работы для порядкового номера 2. Таким образом, если необходимо использовать определенный диапазон и сортировку вместе, они должны быть указаны в одном и том же запросе управляемой системой последовательности работ.
>
> При этой настройке будут записаны все работы, содержащие хотя бы одну строку, в которой количество меньше 20 шт. Таким образом, если в работе имеется строка, в которой количество равно точно 20 шт. или более 20 шт., она будет действительной, при условии, что в ней также имеется хотя бы одна строка, в которой количество меньше 20 шт.

### <a name="location-directives"></a>Директивы для мест хранения

При использовании данных Contoso по умолчанию изменения запроса для действия директивы расположения не требуются. Однако, чтобы гарантировать, что директивы местоположения будут фиксировать номенклатуры в заказах на продажу при применении этой функции в среде, отличной от Contoso, создайте новую директиву местоположения. Чтобы проверить настройки в демонстрационной среде, выполните следующие действия.

1. Перейдите к **Управление складом** \> **Настройка** \> **директивы местонахождений**.
1. В поле **Тип заказа на работу** выберите *Заказы на продажу*.
1. Выберите директиву местоположения с именем *51 Комплектация*.
1. На экспресс-вкладке **Действия директивы местоположения** выберите строку для действия **Комплектация**.
1. Выберите **Изменить запрос** над сеткой.
1. Просмотрите запрос **Диапазон**.

    1. Найдите строку, в которой в поле **Поле** указано *Местонахождение*.
    2. Убедитесь, что поле **Критерии** пусто (т. е., отсутствуют ограничения).

## <a name="scenario"></a>Сценарий

### <a name="create-sales-order-picking-work"></a>Создание работы комплектации для заказа на продажу

Прежде чем выполнять комплектацию, управляемую системой, должно быть создано несколько исходящих работ. Для этого сценария будут созданы четыре заказа на продажу, которые будут основываться на указанных запросах последовательности работ, управляемых системой.

Вы зарезервируете количества запасов для каждого заказа на продажу. Таким образом, зарезервированный запас не может быть извлечен со склада для других заказов, пока резервирование запаса не будет полностью или частично отменено.

Затем вы выпустите каждый заказ на продажу в склад для создания исходящей работы.

#### <a name="sales-order-1"></a>Заказ на продажу 1

1. Перейдите в раздел **Продажи и маркетинг \> Заказы на продажу \> Все заказы на продажу**.
1. На панели операций выберите **Создать** для создания заказа на продажу 1.
1. В диалоговом окне **Создание заказа на продажу** установите следующие значения:

    - В разделе **Клиент** задайте для поля **Счет клиента** значение *US-004*.
    - В разделе **Общее** задайте в поле **Склад** значение *51*.

1. Выберите **OK**, чтобы закрыть диалоговое окно. Запишите номер заказа на продажу.
1. Добавьте строку в новый заказ на работу и задайте следующие значения:

    - **Код номенклатуры:** *M9200*
    - **Количество:** *20*

1. В меню **Запасы** над сеткой выберите **Резервирование**.
1. На странице **Резервирование** выберите **Зарезервировать лот**, чтобы зарезервировать запасы.
1. Закройте страницу **Резервирование**.
1. На панели операций на вкладке **Склад** выберите вариант **Выпустить на склад**, чтобы создать работу для склада.

    Вы получите информационные сообщения, которые указывают код волны и коды отгрузки, которые были созданы для данного заказа на продажу.

#### <a name="sales-order-2"></a>Заказ на продажу 2

1. На панели операций выберите **Создать** для создания заказа на продажу 2.
1. В диалоговом окне **Создание заказа на продажу** установите следующие значения:

    - **Счет клиента:** *US-007*
    - **Склад:** *51*

1. Выберите **OK**, чтобы закрыть диалоговое окно. Запишите номер заказа на продажу.
1. Добавьте строку в новый заказ на работу и задайте следующие значения:

    - **Код номенклатуры:** *M9200*
    - **Количество:** *5*

1. Выберите **Добавить строку**, чтобы добавить вторую строку, и установите следующие значения:

    - **Код номенклатуры:** *M9201*
    - **Количество:** *1*

1. Зарезервируйте запасы для обеих строк.
1. Выпустите заказ на склад.

#### <a name="sales-order-3"></a>Заказ на продажу 3

1. На панели операций выберите **Создать** для создания заказа на продажу 3.
1. В диалоговом окне **Создание заказа на продажу** установите следующие значения:

    - **Счет клиента:** *US-009*
    - **Склад:** *51*

1. Выберите **OK**, чтобы закрыть диалоговое окно. Запишите номер заказа на продажу.
1. Добавьте строку в новый заказ на работу и задайте следующие значения:

    - **Код номенклатуры:** *M9200*
    - **Количество:** *7*

1. Выберите **Добавить строку**, чтобы добавить вторую строку, и установите следующие значения:

    - **Код номенклатуры:** *M9202*
    - **Количество:** *8*

1. Зарезервируйте запасы для обеих строк.
1. Выпустите заказ на склад.

#### <a name="sales-order-4"></a>Заказ на продажу 4

1. На панели операций выберите **Создать** для создания заказа на продажу 4.
1. В диалоговом окне **Создание заказа на продажу** установите следующие значения:

    - **Счет клиента:** *US-010*
    - **Склад:** *51*

1. Выберите **OK**, чтобы закрыть диалоговое окно. Запишите номер заказа на продажу.
1. Добавьте строку в новый заказ на работу и задайте следующие значения:

    - **Код номенклатуры:** *M9200*
    - **Количество:** *25*

1. Выберите **Добавить строку**, чтобы добавить вторую строку, и установите следующие значения:

    - **Код номенклатуры:** *M9202*
    - **Количество:** *10*

1. Зарезервируйте запасы для обеих строк.
1. Выпустите заказ на склад.

### <a name="get-work-ids-for-the-work-that-was-created"></a>Получение кодов работ для созданной вами работы

1. Перейдите в раздел **Управление складом \> Работа \> Сведения о работе**.
1. Отфильтруйте по полю **Склад**, чтобы отображалась только работа для склада *51*.
1. Должны быть созданы четыре кода работ. Запишите код работы для каждого заказа на продажу.

    | Код заказа на продажу | Код работы | Количество работы |
    |---|---|---|
    | Заказ на продажу 1 | Код работы 1 | 20 шт. |
    | Заказ на продажу 2 | Код работы 2 | 6 шт. (сумма по обеим строкам) |
    | Заказ на продажу 3 | Код работы 3 | 15 шт. (сумма по обеим строкам) |
    | Заказ на продажу 4 | Код работы 4 | 35 шт. (сумма по обеим строкам) |

Перед запуском потока на мобильном устройстве убедитесь, что только работа, только что созданная вами, имеет статус *Открыта* для склада *51* и тип заказа на работу *Заказ на продажу*. В противном случае результаты теста могут быть разными, так как управляемая системой комплектация будет включать всю подходящую работу.

1. Перейдите к пункту **Управление складом \> Работа \> Исходящая \> Открытая работы по продажам**.
1. В сетке **Открытая работа по продажам** отфильтруйте по полю **Склад**, чтобы отображалась только работа для склада *51*.
1. Убедитесь, что показаны только четыре кода работ, созданные ранее.
1. Закройте страницу **Работа**.

### <a name="mobile-device-flow-execution"></a>Выполнение потока на мобильном устройстве

В зависимости от настройки, система будет подавать пользователю работу, отсортированную от самого большого количества по строке работы до самого маленького. Количество в каждой строке будет менее 20 шт.

Помните, что при этой настройке будут записаны все работы, содержащие хотя бы одну строку, в которой количество меньше 20 шт. Таким образом, если в работе имеется другая строка, в которой количество равно точно 20 шт. или более 20 шт., она также будет действительной.

#### <a name="mobile-app"></a>Мобильное приложение

1. Выполните вход в приложение склада как пользователь на складе *51*.
1. Выберите **Исходящие \> Комплектация продаж — система**.

    Будет представлен шаг комплектации для кода работы *4*. Этот код работы представляется первым из-за настройки заказа запроса, управляемого системой, где в указали, что работа должна быть упорядочена на основе убывания количества в строке работы.

1. Завершите требуемую комплектацию и размещение, чтобы закрыть код работы.

    Затем отображается код работы *3*. Одна из его строк работы находится следующей в последовательности на основе количества в строке работы.

1. Завершите комплектацию и размещение, чтобы закрыть код работы.

    Затем отображается код работы *2*. Эта строка комплектации работы является следующей в последовательности.

1. Завершите комплектацию и размещение, чтобы закрыть код работы.

    Вам не должна быть представлена никакая дальнейшая работа. Код работы *1* не подходит для данного пункта меню мобильного устройства, поскольку запрос указывает, что заголовки работы рассматриваются только в том случае, если количество в строках работы меньше 20 шт.

## <a name="tips"></a>Советы

Запросы последовательности работ под управлением системы являются *инклюзивными*. Важно помнить этот факт для некоторых настроек. Например, вы хотите, чтобы конкретный пункт меню обрабатывал работу только в том случае, если единицей измерения работы является *шт.*, и это ограничение вы указали на вкладке **Диапазон** запроса. В этом случае вся работа, в которой по крайней мере для одной строки работы заданы единицы измерения работы *шт.*, отправляется работнику. Таким образом, эта работа может также включать работу, в которой строки работы имеют единицу измерения, отличную от *шт.* (например, *коробка* или *палета*). Запрос будет исключать только работу, для которой ни в одной строке работы не заданы единицы измерения работы *шт.*

Таким образом, в примере из этого сценария код работы *4* также был включен с помощью запроса. При создании были добавлены две строки: одна для 25 шт., другая для 10 шт. Работа все равно была представлена пользователю, так как по крайней мере одна из строк работы имеет количество менее 20 шт.

В зависимости от сценария, этого поведения можно избежать, используя перерывы работы.


[!INCLUDE[footer-include](../../includes/footer-banner.md)]