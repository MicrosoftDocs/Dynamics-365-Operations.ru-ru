---
title: Планирование создания работы во время волны
description: В этой тепе описывается, как настроить и использовать метод обработки планирования создания работы во время волны.
author: perlynne
manager: mirzaab
ms.date: 01/14/2021
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: WHSPostMethod, WHSWavePostMethodTaskConfig, WHSWaveTemplateTable, WHSParameters, WHSWaveTableListPage, WHSWorkTableListPage, WHSWorkTable, BatchJobEnhanced, WHSPlannedWorkOrder
audience: Application User
ms.reviewer: ''
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: kamaybac
ms.search.validFrom: 2021-01-14
ms.dyn365.ops.version: 10.0.17
ms.openlocfilehash: ed8f43c7db139b7b16ac6901d5db56ba2f021690
ms.sourcegitcommit: b7a7a14f8650913f6797ae1c4a82ad8adfe415fd
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/28/2021
ms.locfileid: "5078300"
---
# <a name="schedule-work-creation-during-wave"></a>Планирование создания работы во время волны

[!include [banner](../includes/banner.md)]

Используйте функцию *Планирование содания работ* в рамках процесса волны, чтобы повысить пропускную способность обработки волны, настроив систему на создание работы с использованием параллельной обработки.

Когда функциональность активирована, запланированная работа будет автоматически создана, и система будет в конечном итоге обрабатывать для создания фактической работы. Если количество строк загрузки волны достигает заранее определенного порога, система создает фактическую работу быстрее путем применения параллельной асинхронной обработки.

## <a name="enable-the-schedule-work-creation-feature"></a>Включение функции планирования создания работы

### <a name="enable-the-feature-in-feature-management"></a>Включение функции в управлении функциями

Прежде чем использовать функцию *Планирование создания работы*, она должна быть включена в системе. Администраторы могут использовать рабочую область [Управление функциями](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) для проверки статуса функции и ее включения, если это требуется. В этом случае функция указана следующим образом:

- **Модуль:** *Управление складом*
- **Название функции:** *Планирование создания работы*

> [!NOTE]
> Функция *Блокировка работы для всей организации* должна быть включена, прежде чем можно будет включить функцию *Планирование создания работы*.

### <a name="manually-enable-batch-processing-of-waves"></a>Ручное включение пакетной обработки волн

Чтобы воспользоваться преимуществом параллельного асинхронного метода создания складских работ, необходимо, чтобы ваш процесс волны был запущен в пакетном режиме. Чтобы это настроить:

1. Перейдите в раздел  **Управление складом \> Настройка \> Параметры управления складом**.

1. На вкладке **Общие** задайте для параметра **Обрабатывать волны в партии** значение *Да*. При желании можно также выбрать специальную **Группа партий обработки волны**, чтобы предотвратить выполнение обработки пакетной очереди в то же время, что и другие процессы.

1. Установите **Время ожидания блокировки (мс)**, которое применяется, когда система обрабатывает несколько волн в одно и то же время. Для большинства больших процессов волн рекомендуется установить значение *60000*.

### <a name="manually-enable-the-new-wave-step-method-for-existing-wave-templates"></a>Ручное включение нового метода шага волны для существующих шаблонов волн

Начните с создания нового метода шага волны и включения его для параллельной асинхронной обработки задач.

1. Перейдите в раздел  **Управление складом \> Настройка \> Волны \> Методы обработки волн**.

1. Выберите  **Восстановить метод** и обратите внимание, что *WHSScheduleWorkCreationWaveStepMethod* был добавлен в список методов обработки волны, которые можно использовать в шаблонах волны отгрузки.

1. Выберите запись, в которой **Имя метода** равно *WHSScheduleWorkCreationWaveStepMethod*, и выберите **Конфигурация задачи**.

1. Чтобы добавить новую строку в сетку, выберите **Создать** на панели действий и используйте следующие параметры:

    - **Склад** — выберите склад, который будет использоваться для планирования обработки создания работ.

    - **Максимальное число пакетных задач** — указывает максимальное число пакетных задач. В большинстве случаев это значение должно находиться в диапазоне от 8 до 16, однако рекомендуется поэкспериментировать с оптимальной настройкой на основе ваших сценариев.

    - **Группа пакетов обработки волн** — выберите специальную группу пакетов обработки волн для оптимизации обработки очереди пакетных заданий.

Теперь можно обновить существующий шаблон волны (или создать новый) для использования метода обработки волны *Планирование создания работ*.

1. Перейдите в раздел  **Управление складом \> Настройка \> Волны \> Шаблоны волны**.

1. Выберите **Правка** на панели операций.

1. В области списка выберите шаблон волны, который требуется обновить (если тестируется производится с помощью демонстрационных данных, можно использовать *Доставка 24 по умолчанию*).

1. Разверните экспресс-вкладку **Методы** и выберите строку, в которой **Имя** равно *Планирование создания работ* в сетке **Оставшиеся методы**.

1. Выберите стрелку, указывающую на столбец **Выбранные методы**, чтобы переместить выбранную строку в этот столбец. (Допускается только один выбранный метод за раз, использующий *WHSScheduleWorkCreationWaveStepMethod* или *createWork*, поэтому существующая строка, в которой **Имя метода** равно *createWork*, автоматически перемещается в сетку **Оставшиеся методы**.)

## <a name="set-wave-task-processing-threshold-data"></a>Установка пороговых значений обработки задач волны

Система создаст пороговые данные обработки задач волны по умолчанию при первом запуске процесса волны с использованием любой обработки на основе задач. Данные используются для управления тем, когда обработка волны выполняется асинхронно и должна быть основана на задачах, что позволяет ей параллельно обрабатывать и создавать работу.

Данные по умолчанию изначально будут использовать пороговое значение 15 для минимального количества строк загрузки (MINIMUMWAVELOADLINES). Это означает, что когда система обрабатывает волну с более чем 15 строками загрузки, она будет использовать асинхронную обработку задач. Эти данные можно вручну ювставить в таблицу **WHSWaveTaskProcessingThresholdParameters** в тестовых средах, но если вам необходимо изменить этот параметр в производственной среде, необходимо обратиться в службу поддержки Майкрософт, чтобы запросить обновление.

## <a name="work-with-the-feature"></a>Работа с функцией

Когда функция *Планирование создания работ* активирована, при обработке волн создается запланированная работа, которая в конечном итоге будет использоваться в новом процессе создания работы. Во время создания работы эта работа будет заблокирована с помощью функции *Блокировка работы для всей организации*.

В следующей блок-схеме показано, как создается запланированная работа во время обработки волны.

![Запланировать создание работы](media/schedule-work-creation-process.png)

### <a name="planned-work"></a>Запланированная работа

Страница **Сведения о запланированной работе** (**Управление складом \> Работа \> Сведения о запланированной работе**) отображает сведения о запланированной работе, которая первоначально создается во время обработки волны. Доступны следующие значения **Статус процесса**:

- **В очереди** — запланированная работа ожидает использования для создания работы.
- **Завершено** — запланированная работа была использована для создания работы.
- **Сбой** — обработка волны завершилась с ошибкой. Обратите внимание, что запланированная работа может находиться в состоянии **Сбой** с соответствующей фактический работой или без нее. Когда процесс создания фактической работы заканчивается сбоем, фактическая работа остается в состоянии *Отменено*.

### <a name="batch-job-for-the-work-creation-process"></a>Пакетное задание для процесса создания работы

Для просмотра пакетных заданий для обработки волн выберите **Пакетные задания** на панели операций на странице **Все волны**.

Отсюда можно просмотреть все подробные сведения о пакетной задаче для каждого из кодов пакетных заданий.


[!INCLUDE[footer-include](../../includes/footer-banner.md)]