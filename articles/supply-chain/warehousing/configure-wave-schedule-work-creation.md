---
title: Планирование создания работы во время волны
description: В этой тепе описывается, как настроить и использовать метод обработки планирования создания работы во время волны.
author: perlynne
ms.date: 01/14/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: WHSPostMethod, WHSWavePostMethodTaskConfig, WHSWaveTemplateTable, WHSParameters, WHSWaveTableListPage, WHSWorkTableListPage, WHSWorkTable, BatchJobEnhanced, WHSPlannedWorkOrder
audience: Application User
ms.reviewer: ''
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: kamaybac
ms.search.validFrom: 2021-01-14
ms.dyn365.ops.version: 10.0.17
ms.openlocfilehash: e4258c03b12a80a5bd81328ae7418835d68f82e7
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/01/2021
ms.locfileid: "5835710"
---
# <a name="schedule-work-creation-during-wave"></a><span data-ttu-id="6635a-103">Планирование создания работы во время волны</span><span class="sxs-lookup"><span data-stu-id="6635a-103">Schedule work creation during wave</span></span>

[!include [banner](../../includes/banner.md)]

<span data-ttu-id="6635a-104">Используйте функцию *Планирование содания работ* в рамках процесса волны, чтобы повысить пропускную способность обработки волны, настроив систему на создание работы с использованием параллельной обработки.</span><span class="sxs-lookup"><span data-stu-id="6635a-104">Use the *Schedule work creation* feature as part of your waving process to help increase wave processing throughput by having the system create work using parallel processing.</span></span>

<span data-ttu-id="6635a-105">Когда функциональность активирована, запланированная работа будет автоматически создана, и система будет в конечном итоге обрабатывать для создания фактической работы.</span><span class="sxs-lookup"><span data-stu-id="6635a-105">When the functionality is enabled, planned work will automatically get created, which the system will eventually process to create actual work.</span></span> <span data-ttu-id="6635a-106">Если количество строк загрузки волны достигает заранее определенного порога, система создает фактическую работу быстрее путем применения параллельной асинхронной обработки.</span><span class="sxs-lookup"><span data-stu-id="6635a-106">If the number of wave load lines reaches a predetermined threshold, the system will create actual work more quickly by applying parallel, asynchronous processing.</span></span>

## <a name="turn-on-the-scheduled-work-creation-features-in-feature-management"></a><span data-ttu-id="6635a-107">Включение функций создания запланированных работ в управлении функциями</span><span class="sxs-lookup"><span data-stu-id="6635a-107">Turn on the scheduled work creation features in feature management</span></span>

<span data-ttu-id="6635a-108">Для использования описанных в этом разделе функций они должны быть включены в системе.</span><span class="sxs-lookup"><span data-stu-id="6635a-108">To use the features described in this topic, they must be turned on for your system.</span></span> <span data-ttu-id="6635a-109">Используйте рабочую область [Управление функциями](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md), чтобы включить следующие функции в следующем порядке:</span><span class="sxs-lookup"><span data-stu-id="6635a-109">Use [Feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) workspace to turn on the following features in the following order:</span></span>

1. <span data-ttu-id="6635a-110">**Блокировка работы для всей организации** — необходимо для ручной и автоматической настройки создания запланированной работы.</span><span class="sxs-lookup"><span data-stu-id="6635a-110">**Organization-wide work blocking** - Required for both manual and automatic configuration of scheduled work creation.</span></span>
1. <span data-ttu-id="6635a-111">**Планирование создания работы** — необходимо для ручной и автоматической настройки создания запланированной работы.</span><span class="sxs-lookup"><span data-stu-id="6635a-111">**Schedule work creation** - Required for both manual and automatic configuration of scheduled work creation.</span></span>
1. <span data-ttu-id="6635a-112">**Метод волны "Планирование создания работы" для всей организации** — необходимо для автоматической настройки создания запланированной работы.</span><span class="sxs-lookup"><span data-stu-id="6635a-112">**Organization-wide "Schedule work creation" wave method** - Required for automatic configuration of scheduled work creation.</span></span> <span data-ttu-id="6635a-113">Эта функция не нужна, если будет использоваться только настройка вручную.</span><span class="sxs-lookup"><span data-stu-id="6635a-113">You don't need this feature if you will only use manual configuration.</span></span>

<a name="Auto-enable-schedule-work-creation"></a>

## <a name="automatically-configure-scheduled-work-creation"></a><span data-ttu-id="6635a-114">Автоматическая настройка создания запланированной работы</span><span class="sxs-lookup"><span data-stu-id="6635a-114">Automatically configure scheduled work creation</span></span>

<span data-ttu-id="6635a-115">Если включена функция *Метод волны "Планирование создания работы" для всей организации*, в системе автоматически выполняются следующие операции:</span><span class="sxs-lookup"><span data-stu-id="6635a-115">If you enable the *Organization-wide "Schedule work creation" wave method* feature, the following automatically occurs on your system:</span></span>

- <span data-ttu-id="6635a-116">Метод волны *Планирование создания работы* (`WHSScheduleWorkCreationWaveStepMethod`) добавляется и настраивается для параллельного выполнения по всем юридическим лицам.</span><span class="sxs-lookup"><span data-stu-id="6635a-116">The *Schedule work creation* wave method (`WHSScheduleWorkCreationWaveStepMethod`) is added and configured to run in parallel across all legal entities.</span></span>
- <span data-ttu-id="6635a-117">В шаблонах волн из всех юридических лиц, у которых для параметра **Тип шаблона волны** задано значение *Отгрузка*, а для параметра **Статус шаблона** задано значение *Допустимо*, метод *Создать работу* будет заменен методом *Планирование создания работы*.</span><span class="sxs-lookup"><span data-stu-id="6635a-117">Wave templates from all legal entities that have **Wave template type** set to *Shipping* and **Template status** set to *Valid* will have the *Create work* method replaced by the *Schedule work creation* method.</span></span> <span data-ttu-id="6635a-118">Однако шаблоны волн из юридических лиц, в которых метод *Создание работы* разрешен как повторяющийся, не изменяются.</span><span class="sxs-lookup"><span data-stu-id="6635a-118">However, wave templates from legal entities where the *Create work* method is allowed to be repeatable will not be modified.</span></span>
- <span data-ttu-id="6635a-119">Конфигурации задач для метода *Планирование создания работ* будут созданы для всех складов из всех юридических лиц, в которых включен параметр **Использовать процессы управления складом**.</span><span class="sxs-lookup"><span data-stu-id="6635a-119">Task configurations for the *Schedule work creation* method will be created for all warehouses from all legal entities that have **Use warehouse management processes** enabled.</span></span> <span data-ttu-id="6635a-120">Это означает, что метод *Планирование создания работы* будет выполняться параллельно по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="6635a-120">This means that the *Schedule work creation* method will now run in parallel by default.</span></span> <span data-ttu-id="6635a-121">В существующих складах, для которых вы измените значение параметра **Использовать процессы управления складом** с *Нет* на *Да*, этот метод также будет выполняться параллельно по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="6635a-121">Existing warehouses for which you change **Use warehouse management processes** from *No* to *Yes* will also run this method in parallel by default.</span></span>
- <span data-ttu-id="6635a-122">Все юридические лица будут обрабатывать волны в пакетах и для параметра **Ожидание блокировки (мс)** будет задано значение по умолчанию *60 000 мс*, если ранее было установлено значение *0* мс.</span><span class="sxs-lookup"><span data-stu-id="6635a-122">All legal entities will process waves in batches and **Wait for lock (ms)** will be set to a default value of *60,000* ms if it was previously set to *0* ms.</span></span>
- <span data-ttu-id="6635a-123">Все новые шаблоны волн, которые вы создадите, будет использовать метод волны *Планирование создание работы* вместо метода *Создать работу*.</span><span class="sxs-lookup"><span data-stu-id="6635a-123">All the new wave templates that you create will have the *Schedule work creation* wave method instead of the *Create Work* method.</span></span>

<span data-ttu-id="6635a-124">Существующие конфигурации обработки задач и волн также будут сохранены для всех юридических лиц, уже настроенных на обработку волн пакетами, и для всех складов, уже настроенных для параллельного использования метода *Планирование создания работы*.</span><span class="sxs-lookup"><span data-stu-id="6635a-124">The existing task and wave processing configurations will also be kept for all legal entities that are already configured to process waves in batches, and for all warehouses that are already configured to use the *Schedule work creation* method in parallel.</span></span>

<span data-ttu-id="6635a-125">При необходимости можно вручную отменить любые настройки, заданные автоматически при включении функции *Метод волны "Планирование создания работы" для всей организации*, выполнив следующие действия:</span><span class="sxs-lookup"><span data-stu-id="6635a-125">If necessary, you can manually revert any or all of the settings made automatically when you enabled the *Organization-wide Schedule work creation wave method* feature by doing the following:</span></span>

- <span data-ttu-id="6635a-126">Для шаблонов волны перейдите в раздел **Управление складом \> Настройка \> Волны \> Шаблоны волны**.</span><span class="sxs-lookup"><span data-stu-id="6635a-126">For wave templates, go to **Warehouse management \> Setup \> Waves \> Wave templates**.</span></span> <span data-ttu-id="6635a-127">Замените метод *Планирование создания работы* методом *Создать работу*.</span><span class="sxs-lookup"><span data-stu-id="6635a-127">Replace *Schedule work creation* method with *Create work*.</span></span>
- <span data-ttu-id="6635a-128">Для параметров склада перейдите в раздел **Управление складом \> Настройка \> Параметры управления складом**.</span><span class="sxs-lookup"><span data-stu-id="6635a-128">For warehouse parameters, go to **Warehouse management \> Setup \> Warehouse management parameters**.</span></span> <span data-ttu-id="6635a-129">На вкладке **Обработка волны** примените предпочтительные значения для параметров **Обрабатывать волны в партии** и **Ожидание блокировки (мс)**.</span><span class="sxs-lookup"><span data-stu-id="6635a-129">On the **Wave processing** tab, apply your preferred values for **Process waves in batch** and **Wait for lock (ms)**.</span></span>
- <span data-ttu-id="6635a-130">Для методов волны перейдите в раздел **Управление складом \> Настройка \> Волны \> Методы обработки волн**.</span><span class="sxs-lookup"><span data-stu-id="6635a-130">For the wave methods, go to **Warehouse management \> Setup \> Waves \> Wave process methods**.</span></span> <span data-ttu-id="6635a-131">Выберите `WHSScheduleWorkCreationWaveStepMethod` и на панели операций выберите **Конфигурация задач**.</span><span class="sxs-lookup"><span data-stu-id="6635a-131">Select `WHSScheduleWorkCreationWaveStepMethod` and, on the Action Pane, select **Task configuration**.</span></span> <span data-ttu-id="6635a-132">При необходимости измените или удалите число пакетных задач и назначенную группу волн для каждого перечисленного склада.</span><span class="sxs-lookup"><span data-stu-id="6635a-132">Modify or delete the number of batch tasks and the assigned wave group for each listed warehouse as needed.</span></span>

## <a name="manually-configure-scheduled-work-creation"></a><span data-ttu-id="6635a-133">Ручная настройка создания запланированной работы</span><span class="sxs-lookup"><span data-stu-id="6635a-133">Manually configure scheduled work creation</span></span>

<span data-ttu-id="6635a-134">Если вы не включили [функцию *Метод волны "Планирование создания работы" для всей организации*](#Auto-enable-schedule-work-creation), вы можете использовать процедуры, описанные в этом разделе, чтобы вручную настроить создание запланированных работ, если это необходимо.</span><span class="sxs-lookup"><span data-stu-id="6635a-134">If you didn't enable the [*Organization-wide "Schedule work creation" wave method* feature](#Auto-enable-schedule-work-creation), then you can use the procedures provided in this section to manually configure scheduled work creation as needed.</span></span>

### <a name="manually-enable-batch-processing-of-waves"></a><span data-ttu-id="6635a-135">Ручное включение пакетной обработки волн</span><span class="sxs-lookup"><span data-stu-id="6635a-135">Manually enable batch processing of waves</span></span>

<span data-ttu-id="6635a-136">Чтобы воспользоваться преимуществом параллельного асинхронного метода создания складских работ, необходимо, чтобы ваш процесс волны был запущен в пакетном режиме.</span><span class="sxs-lookup"><span data-stu-id="6635a-136">To take advantage of a parallel asynchronous method to create warehouse work, your wave process must be running in batch.</span></span> <span data-ttu-id="6635a-137">Чтобы это настроить:</span><span class="sxs-lookup"><span data-stu-id="6635a-137">To set this up:</span></span>

1. <span data-ttu-id="6635a-138">Перейдите в раздел  **Управление складом \> Настройка \> Параметры управления складом**.</span><span class="sxs-lookup"><span data-stu-id="6635a-138">Go to **Warehouse management \> Setup \> Warehouse management parameters**.</span></span>
1. <span data-ttu-id="6635a-139">На вкладке **Общие** задайте для параметра **Обрабатывать волны в партии** значение *Да*.</span><span class="sxs-lookup"><span data-stu-id="6635a-139">On the **General** tab, set **Process waves in batch** to *Yes*.</span></span> <span data-ttu-id="6635a-140">При желании можно также выбрать специальную **Группа партий обработки волны**, чтобы предотвратить выполнение обработки пакетной очереди в то же время, что и другие процессы.</span><span class="sxs-lookup"><span data-stu-id="6635a-140">Optionally, you can also select a dedicated **Wave processing batch group** to prevent your batch queue processing from running at the same time as other processes.</span></span>
1. <span data-ttu-id="6635a-141">Установите **Время ожидания блокировки (мс)**, которое применяется, когда система обрабатывает несколько волн в одно и то же время.</span><span class="sxs-lookup"><span data-stu-id="6635a-141">Set the **Wait for lock (ms) time**, which applies when the system is processing several waves at the same time.</span></span> <span data-ttu-id="6635a-142">Для большинства больших процессов волн рекомендуется установить значение *60000*.</span><span class="sxs-lookup"><span data-stu-id="6635a-142">For most larger waving processes, we recommend a value of *60000*.</span></span>

### <a name="manually-enable-the-new-wave-step-method-for-existing-wave-templates"></a><span data-ttu-id="6635a-143">Ручное включение нового метода шага волны для существующих шаблонов волн</span><span class="sxs-lookup"><span data-stu-id="6635a-143">Manually enable the new wave step method for existing wave templates</span></span>

<span data-ttu-id="6635a-144">Начните с создания нового метода шага волны и включения его для параллельной асинхронной обработки задач.</span><span class="sxs-lookup"><span data-stu-id="6635a-144">Start by creating the new wave step method and enabling it for parallel asynchronous task processing.</span></span>

1. <span data-ttu-id="6635a-145">Перейдите в раздел  **Управление складом \> Настройка \> Волны \> Методы обработки волн**.</span><span class="sxs-lookup"><span data-stu-id="6635a-145">Go to **Warehouse management \> Setup \> Waves \> Wave process methods**.</span></span>
1. <span data-ttu-id="6635a-146">Выберите  **Восстановить метод** и обратите внимание, что *WHSScheduleWorkCreationWaveStepMethod* был добавлен в список методов обработки волны, которые можно использовать в шаблонах волны отгрузки.</span><span class="sxs-lookup"><span data-stu-id="6635a-146">Select  **Regenerate method** and note that *WHSScheduleWorkCreationWaveStepMethod* has been added to the list of wave process methods you can use in your shipping wave templates.</span></span>
1. <span data-ttu-id="6635a-147">Выберите запись, в которой **Имя метода** равно *WHSScheduleWorkCreationWaveStepMethod*, и выберите **Конфигурация задачи**.</span><span class="sxs-lookup"><span data-stu-id="6635a-147">Select the record with the **Method name** *WHSScheduleWorkCreationWaveStepMethod* and select **Task configuration**.</span></span>
1. <span data-ttu-id="6635a-148">Чтобы добавить новую строку в сетку, выберите **Создать** на панели действий и используйте следующие параметры:</span><span class="sxs-lookup"><span data-stu-id="6635a-148">To add a new row to the grid, select **New** on the Action Pane and use the following settings:</span></span>

    - <span data-ttu-id="6635a-149">**Склад** — выберите склад, который будет использоваться для планирования обработки создания работ.</span><span class="sxs-lookup"><span data-stu-id="6635a-149">**Warehouse** - Select the warehouse you will use to schedule work creation processing.</span></span>
    - <span data-ttu-id="6635a-150">**Максимальное число пакетных задач** — указывает максимальное число пакетных задач.</span><span class="sxs-lookup"><span data-stu-id="6635a-150">**Maximum number of batch tasks** - Specify a maximum number of batch tasks.</span></span> <span data-ttu-id="6635a-151">В большинстве случаев это значение должно находиться в диапазоне от 8 до 16, однако рекомендуется поэкспериментировать с оптимальной настройкой на основе ваших сценариев.</span><span class="sxs-lookup"><span data-stu-id="6635a-151">In most cases, this value should be in the range from 8-16, however we recommend that you experiment with the optimal setting based on your scenarios.</span></span>
    - <span data-ttu-id="6635a-152">**Группа пакетов обработки волн** — выберите специальную группу пакетов обработки волн для оптимизации обработки очереди пакетных заданий.</span><span class="sxs-lookup"><span data-stu-id="6635a-152">**Wave processing batch group** - Select a dedicated wave processing batch group to optimize your batch queue processing.</span></span>

<span data-ttu-id="6635a-153">Теперь можно обновить существующий шаблон волны (или создать новый) для использования метода обработки волны *Планирование создания работ*.</span><span class="sxs-lookup"><span data-stu-id="6635a-153">Now you are ready to update an existing wave template (or create a new one) to use the *Schedule work creation* wave processing method.</span></span>

1. <span data-ttu-id="6635a-154">Перейдите в раздел  **Управление складом \> Настройка \> Волны \> Шаблоны волны**.</span><span class="sxs-lookup"><span data-stu-id="6635a-154">Go to **Warehouse management \> Setup \> Waves \> Wave templates**.</span></span>
1. <span data-ttu-id="6635a-155">Выберите **Правка** на панели операций.</span><span class="sxs-lookup"><span data-stu-id="6635a-155">Select **Edit** on the Action Pane.</span></span>
1. <span data-ttu-id="6635a-156">В области списка выберите шаблон волны, который требуется обновить (если тестируется производится с помощью демонстрационных данных, можно использовать *Доставка 24 по умолчанию*).</span><span class="sxs-lookup"><span data-stu-id="6635a-156">In the list pane, select the wave template you would like to update (if you are testing using demo data, then you could use *24 Shipping default*).</span></span>
1. <span data-ttu-id="6635a-157">Разверните экспресс-вкладку **Методы** и выберите строку, в которой **Имя** равно *Планирование создания работ* в сетке **Оставшиеся методы**.</span><span class="sxs-lookup"><span data-stu-id="6635a-157">Expand the **Methods** FastTab and select the row with the **Name** *Schedule work creation* in the **Remaining methods** grid.</span></span>
1. <span data-ttu-id="6635a-158">Выберите стрелку, указывающую на столбец **Выбранные методы**, чтобы переместить выбранную строку в этот столбец.</span><span class="sxs-lookup"><span data-stu-id="6635a-158">Select the arrow pointing to the **Selected methods** column to move the selected row to that column.</span></span> <span data-ttu-id="6635a-159">(Допускается только один выбранный метод за раз, использующий `WHSScheduleWorkCreationWaveStepMethod` или `createWork`, поэтому существующая строка, в которой **Имя метода** равно `createWork`, автоматически перемещается в сетку **Оставшиеся методы**.)</span><span class="sxs-lookup"><span data-stu-id="6635a-159">(You can only have one selected method at a time that uses either `WHSScheduleWorkCreationWaveStepMethod` or `createWork`, so the existing row with **Method name** `createWork` is automatically moved to the **Remaining methods** grid.)</span></span>

## <a name="set-wave-task-processing-threshold-data"></a><span data-ttu-id="6635a-160">Установка пороговых значений обработки задач волны</span><span class="sxs-lookup"><span data-stu-id="6635a-160">Set wave task processing threshold data</span></span>

<span data-ttu-id="6635a-161">Система создаст пороговые данные обработки задач волны по умолчанию при первом запуске процесса волны с использованием любой обработки на основе задач.</span><span class="sxs-lookup"><span data-stu-id="6635a-161">The system will create default wave task processing threshold data the first time a wave process runs using any task-based processing.</span></span> <span data-ttu-id="6635a-162">Данные используются для управления тем, когда обработка волны выполняется асинхронно и должна быть основана на задачах, что позволяет ей параллельно обрабатывать и создавать работу.</span><span class="sxs-lookup"><span data-stu-id="6635a-162">The data is used to control when wave processing will run asynchronously and be task-based, which enables it to process and create work in parallel.</span></span>

<span data-ttu-id="6635a-163">Данные по умолчанию изначально будут использовать пороговое значение 15 для минимального количества строк загрузки (`MINIMUMWAVELOADLINES`).</span><span class="sxs-lookup"><span data-stu-id="6635a-163">The default data will initially use a threshold value of 15 for the minimum number of load lines (`MINIMUMWAVELOADLINES`).</span></span> <span data-ttu-id="6635a-164">Это означает, что когда система обрабатывает волну с более чем 15 строками загрузки, она будет использовать асинхронную обработку задач.</span><span class="sxs-lookup"><span data-stu-id="6635a-164">This means that when the system processes a wave with more than 15 loads lines, it will use asynchronous task processing.</span></span> <span data-ttu-id="6635a-165">Эти данные можно вручную вставить или обновить в таблице `WHSWaveTaskProcessingThresholdParameters` в ваших тестовых средах.</span><span class="sxs-lookup"><span data-stu-id="6635a-165">You can manually insert/update this data in the `WHSWaveTaskProcessingThresholdParameters` table in your test environments.</span></span> <span data-ttu-id="6635a-166">Если необходимо изменить этот параметр в производственной среде, необходимо обратиться в службу поддержки Майкрософт, чтобы запросить обновление.</span><span class="sxs-lookup"><span data-stu-id="6635a-166">If you need to change this setting in a production environment, you must contact Microsoft Support to request the update.</span></span>

## <a name="work-with-the-scheduled-work-creation"></a><span data-ttu-id="6635a-167">Работа с запланированным созданием работ</span><span class="sxs-lookup"><span data-stu-id="6635a-167">Work with the scheduled work creation</span></span>

<span data-ttu-id="6635a-168">Сведения о работе с запланированным созданием работ см. в разделе [Создание и обработка волн](wave-processing.md).</span><span class="sxs-lookup"><span data-stu-id="6635a-168">For details about how to work with scheduled work creation, see [Wave creation and processing](wave-processing.md).</span></span> 


[!INCLUDE[footer-include](../../includes/footer-banner.md)]
