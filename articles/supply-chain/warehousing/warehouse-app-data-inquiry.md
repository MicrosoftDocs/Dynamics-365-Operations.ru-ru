---
title: Запрос данных с помощью переключений в мобильном приложении Warehouse Management
description: В этой статье описывается, как настроить пункты меню мобильного устройства запроса на доступ к данным и использовать их в качестве части переключений.
author: perlynne
ms.date: 08/09/2022
ms.topic: article
ms.search.form: WHSMobileAppFlowStepListPage, WHSMobileAppFlowStepAddDetour,WHSMobileAppFlowStepDetourSelectFields
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2022-08-01
ms.dyn365.ops.version: 10.0.29
ms.openlocfilehash: 39677ebfb9babeb7246ece4d27ab1813435ca12e
ms.sourcegitcommit: 3d7ae22401b376d2899840b561575e8d5c55658c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/08/2022
ms.locfileid: "9427857"
---
# <a name="query-data-using-warehouse-management-mobile-app-detours"></a>Запрос данных с помощью переключений в мобильном приложении Warehouse Management

[!include [banner](../includes/banner.md)]

## <a name="feature-introduction"></a>Введение в функцию

Благодаря возможности сканирования штрих-кода мобильное приложение Warehouse Management предоставляет простой и точный способ сбора данных в рамках складских процессов. Однако штрих-коды иногда повреждаются и становятся нечитаемыми, либо необходимые сведения могут не существовать в виде штрих-кода в потоках бизнес-процесса. В этих случаях ввод данных вручную может занять много времени, что может привести к сохранению неверных данных. Результаты могут ухудшится, а уровень обслуживания снизится.

С помощью гибкого процесса запроса данных работники могут легко искать требуемые сведения как часть встроенных потоков мобильного приложения Warehouse Management и применять параметры фильтрации, чтобы отображались только соответствующие данные. Таким образом, выбор в ручном режиме выполняется быстрее и точнее.

Например, в потоке получения заказа на покупку номер заказа на покупку должен соответствовать поступающим запасам. В ходе этого процесса можно легко настроить пункты меню, чтобы создать представление в виде списка карточек для соответствующих номеров заказа на покупку. Таким образом можно продолжить приемку, используя простой подход "укажите, чтобы выбрать". В этой статье приводятся примеры сценариев, но эти функции могут также использоваться в любом или во всех потоках мобильного приложения Warehouse Management.

## <a name="turn-on-the-data-inquiry-flow-feature-and-its-prerequisites"></a>Включение функции потока запроса данных и необходимые для этого условия

Перед использованием функции, описанной в этой статье, необходимо выполнить следующую процедуру, чтобы включить необходимые функции.

1. Перейдите в раздел **Администрирование системы \> Рабочие области \> Управление функциями**. (Дополнительные сведения об использовании рабочей области **Управление функциями** см. в разделе [Обзор управления функциями](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md).)
1. Если используется Supply Chain Management версии 10.0.28 или ранее, включите функцию, которая указана в списке следующим образом:

    - **Модуль:** *Управление складом*
    - **Название функции:** *Инструкции шага приложения склада*

    Эта функция является обязательным условием для функции *Поток запросов данных приложения Warehouse Management*. В Supply Chain Management версии 10.0.29 она обязательна и не может быть отключена. Дополнительные сведения о функции *Инструкции для шагов приложения склада* см. в разделе [Настройка названий шагов и инструкций для мобильного приложения Warehouse Management](mobile-app-titles-instructions.md).

1. Включите указанную функцию следующим образом:

    - **Модуль:** *Управление складом*
    - **Название функции:** *Переключения приложений Warehouse Management*

    Эта функция является обязательным условием для функции *Поток запросов данных приложения Warehouse Management*. В Supply Chain Management версии 10.0.29 она включена по умолчанию. Дополнительные сведения о функции *Переключения приложения Warehouse Management* см. в разделе [Настройка переключений для шагов в пунктах меню мобильного устройства](warehouse-app-detours.md).

1. Если функция *Переключения приложения Warehouse Management* еще не включена, обновите имена полей в мобильном приложении Warehouse Management, перейдя в раздел **Управление складом \> Настройка \> Мобильное устройство \> Названия полей приложения склада** и выбрав пункт **Создать настройку по умолчанию**. Повторите этот шаг для каждого юридического лица (компании), где используется мобильное приложение Warehouse Management. Дополнительные сведения см. в разделе [Настройка полей мобильного приложения управления складом](configure-app-field-names-priorities-warehouse.md).
1. Включите указанную функцию следующим образом:

    - **Модуль:** *Управление складом*
    - **Название функции**: *Поток запросов данных приложения Warehouse Management*

    Эта функция описана в данной статье.

## <a name="example-scenarios"></a>Пример сценариев

В этой статье используются примеры сценариев для демонстрации возможности использования функции *Поток запросов данных приложения Warehouse Management* для улучшения потока прихода покупки. В сценариях используются стандартные данные, которые включают в себя поток, называемый *Получение покупки*. Этот поток начинается с того, что работники идентифицируют номер заказа на покупку. Чтобы помочь работникам легче определить заказ на покупку, вы сможете расширить первую страницу потока, добавив следующие новые параметры запроса в качестве [переключений](warehouse-app-detours.md):

- **Поиск заказов на покупку по поставщику** — открывает страницу, которая предлагает работникам ввести имя поставщика или часть имени поставщика. Возможно использование подстановочных знаков. Например, если работник сегодня ожидает входящую поставку от поставщика, в названии которой есть слово *Tailspin*, работник может ввести слово **Tail\***, чтобы просмотреть набор карточек для открытых заказов на покупку, включающих в себя этот текст. У каждой карточки есть несколько полей, содержащих информацию о каждом заказе на покупку. Кроме наименования поставщика можно создавать такие карточки, в которых будут отображаться номер счета поставщика, дата поставки и статус документа.
- **Поиск заказов на покупку на сегодня** — открывает страницу, которая не предлагает сотрудникам вводить данные, а вместо этого отображает предварительно настроенные фильтры (такие как "текущая дата"). Затем на странице отображается набор карточек, соответствующих фильтру. Работники выбирают карточку для заказа на покупку, по которому они хотят зарегистрировать складируемые номенклатуры.
- **Поиск заказов на покупку по номенклатуре** — открывает страницу, которая предлагает работникам сканировать штрих-код любой номенклатуры в прибывших запасах. Затем в потоке перечисляются все открытые заказы на покупку, содержащие строки для отсканированного кода номенклатуры. Чтобы охватить ситуации, когда штрих-код невозможно считать, можно добавить на эту страницу другое переключение, с помощью которого работники могут выполнять поиск по кодам номенклатур в конкретном заказе на покупку.

В каждом случае работник определяет заказ на покупку путем выбора карточки с возвратом на первую страницу, на которой отображается выбранный номер заказа на покупку. Затем работник может продолжить работу с входящим потоком регистрации складируемой номенклатуры.

## <a name="enable-sample-data"></a>Включение демонстрационных данных

Для работы со сценариями, описанными в этой статье, следует использовать систему, в которой установлены стандартные [демонстрационные данные](../../fin-ops-core/dev-itpro/deployment/deploy-demo-environment.md). Дополнительно перед началом необходимо выбрать юридическое лицо (компанию) *USMF*.

## <a name="configure-the-mobile-device-menu-items"></a>Настройка пунктов меню мобильного устройства

Чтобы создать новые параметры запроса, которые необходимо добавить на первую страницу потока, необходимо настроить ее как пункт меню мобильного устройства. Позже параметры запроса станут доступны в качестве переключений для потока *Получение покупки*.

### <a name="create-the-look-up-pos-by-vendor-menu-item"></a>Создание пункта меню "Поиск заказов на покупку по поставщику"

Создайте пункт меню **Поиск заказов на покупку по поставщику**, выполнив следующие шаги:

1. Перейдите в раздел **Управление складом \> Настройка \> Мобильное устройство \> Пункты меню мобильного устройства**.
1. В области действий выберите **Создать**, чтобы добавить пункт меню мобильного устройства.
1. Задайте следующие значения для нового пункта меню:

    - **Название пункта меню:** *Поиск заказов на покупку по поставщику*
    - **Заголовок:** *Поиск заказов на покупку по поставщику*
    - **Режим:** *Косвенный*

1. На экспресс-вкладке **Общие** установите следующие значения.

    - **Код действия:** *Запрос данных*
    - **Использовать руководство по процессу:** *Да* (это значение выбирается автоматически.)
    - **Имя таблицы:** *PurchTable* (в этой таблице можно просматривать номера заказов на покупку)

1. В области действий выберите **Изменить запрос** для определения запроса, основанного на выбранной базовой таблице (в данном случае — на таблице заказов на покупку).
1. В редакторе запросов на вкладке **Диапазон** добавьте в сетку следующие строки.

    | Таблица | Производная таблица | Поле | Критерии |
    |---|---|---|---|
    | Заказы на покупку | Заказы на покупку | Статус заказа на покупку | Открытый заказ |
    | Заказы на покупку | Заказы на покупку | Дата поставки | (dayRange(-10,10)) |
    | Заказы на покупку | Заказы на покупку | Наименование Поставщика | |

1. Нажмите **ОК**.

    В этом примере настраивается новый пункт меню для поиска открытых заказов на покупку, которые должны поступить в любое время в течение 10 дней в прошлом и 10 дней в будущем.

    В запросе столбец **Критерии** для *Имени поставщика* был оставлен пустым. Таким образом, работники смогут указать это значение, пока они используют мобильное приложение Warehouse Management.

    Если необходимо указать, как должен быть отсортирован список, можно настроить сортировку на вкладке **Сортировка**.

1. В дополнение к определению запроса необходимо выбрать поля, которые будут отображаться на карточках страницы списка запросов. В области действий выберите **Список полей**.
1. На странице **Список полей** установите следующие значения:

    - **Отображаемое поле 1:** *PurchId* (это поле будет отображаться как заголовок для каждой карточки)
    - **Отображаемое поле 2:** *PurchStatus*
    - **Отображаемое поле 3:** *PurchName*
    - **Отображаемое поле 4:** *OrderAccount*
    - **Отображаемое поле 5:** *DeliveryDate*
    - **Отображается поле 6:** *displayDocumentStatus()* (Это значение является методом отображения. На это указывают скобки "()" в конце.)

1. На панели операций выберите **Сохранить**. Затем закройте страницу.

### <a name="create-the-look-up-pos-for-today-menu-item"></a>Создание пункта меню "Поиск заказов на покупку на сегодня"

Создайте пункт меню **Поиск заказов на покупку на сегодня**, выполнив следующие шаги:

1. Перейдите в раздел **Управление складом \> Настройка \> Мобильное устройство \> Пункты меню мобильного устройства**.
1. В области действий выберите **Создать**, чтобы добавить пункт меню мобильного устройства.
1. Задайте следующие значения для нового пункта:

    - **Название пункта меню:** *Поиск заказов на покупку на сегодня*
    - **Заголовок:** *Поиск заказов на покупку на сегодня*
    - **Режим:** *Косвенный*

1. На экспресс-вкладке **Общие** установите следующие значения.

    - **Код действия:** *Запрос данных*
    - **Использовать руководство по процессу:** *Да* (это значение выбирается автоматически.)
    - **Имя таблицы:** *PurchTable* (в этой таблице можно просматривать номера заказов на покупку)

1. В области действий выберите **Изменить запрос** для определения запроса, основанного на выбранной базовой таблице (в данном случае — на таблице заказов на покупку).
1. В редакторе запросов на вкладке **Диапазон** добавьте в сетку следующие строки.

    | Таблица | Производная таблица | Поле | Критерии |
    |---|---|---|---|
    | Заказ на покупку | Заказ на покупку | Статус заказа на покупку | Открытый заказ |
    | Заказ на покупку | Заказ на покупку | Дата поставки | (Day(0)) |

1. Нажмите **ОК**.

    В этом примере настраивается новый пункт меню для поиска открытых заказов на покупку, которые должны поступить сегодня.

    Если необходимо указать, как должен быть отсортирован список, можно настроить сортировку на вкладке **Сортировка**.

1. В дополнение к определению запроса необходимо выбрать поля, которые будут отображаться на карточках страницы списка запросов. В области действий выберите **Список полей**.
1. На странице **Список полей** установите следующие значения:

    - **Отображаемое поле 1:** *PurchName* (это поле будет отображаться как заголовок для каждой карточки)
    - **Отображаемое поле 2:** *PurchId*
    - **Отображаемое поле 3:** *PurchStatus*
    - **Отображаемое поле 4:** *DlvMode*
    - **Отображаемое поле 5:** *DlvTerm*
    - **Отображаемое поле 6:** *OrderAccount*
    - **Отображается поле 7:** *VendorName()* (Это значение является методом отображения. На это указывают скобки "()" в конце.)

1. На панели операций выберите **Сохранить**. Затем закройте страницу.

### <a name="create-the-look-up-pos-by-item-menu-item"></a>Создание пункта меню "Поиск заказов на покупку по номенклатуре"

Создайте пункт меню **Поиск заказов на покупку по номенклатуре**, выполнив следующие шаги:

1. Перейдите в раздел **Управление складом \> Настройка \> Мобильное устройство \> Пункты меню мобильного устройства**.
1. В области действий выберите **Создать**, чтобы добавить пункт меню мобильного устройства.
1. Задайте следующие значения для нового пункта:

    - **Название пункта меню:** *Поиск заказов на покупку по номенклатуре*
    - **Заголовок:** *Поиск заказов на покупку по номенклатуре*
    - **Режим:** *Косвенный*

1. На экспресс-вкладке **Общие** установите следующие значения.

    - **Код действия:** *Запрос данных*
    - **Использовать руководство по процессу:** *Да* (это значение выбирается автоматически.)
    - **Имя таблицы:** *PurchLine* (в данных строки можно просматривать номера заказов на покупку на основании кода номенклатуры)

1. В области действий выберите **Изменить запрос**, чтобы определить запрос, основанный на выбранной базовой таблице (в данном случае — на таблице "Строки заказа на покупку". Однако можно использовать любые значения, которые связаны с заголовком, путем присоединения к *PurchTable*).
1. В редакторе запросов на вкладке **Диапазон** добавьте в сетку следующие строки.

    | Таблица | Производная таблица | Поле | Критерии |
    |---|---|---|---|
    | Строки заказа на покупку | Строки заказа на покупку | Статус строки | Открытый заказ |
    | Строки заказа на покупку | Строки заказа на покупку | Дата поставки | (dayRange(-10,10)) |
    | Строки заказа на покупку | Строки заказа на покупку | Код номенклатуры | |

1. Нажмите **ОК**.

    В этом примере настраивается новый пункт меню для поиска строк открытых заказов на покупку, которые должны поступить в любое время в течение 10 дней в прошлом и 10 дней в будущем.

    В запросе столбец **Критерии** для *Кода номенклатуры* был оставлен пустым. Таким образом, работники смогут указать это значение, пока они используют мобильное приложение Warehouse Management.

    Если необходимо указать, как должен быть отсортирован список, можно настроить сортировку на вкладке **Сортировка**.

1. В дополнение к определению запроса необходимо выбрать поля, которые будут отображаться на карточках страницы списка запросов. В области действий выберите **Список полей**.
1. На странице **Список полей** установите следующие значения:

    - **Отображаемое поле 1:** *PurchId* (это значение поля будет использоваться как заголовок для каждой карточки)
    - **Отображаемое поле 2:** *VendAccount*
    - **Отображаемое поле 3:** *PurchQty*
    - **Отображаемое поле 4:** *PurchUnit*
    - **Отображаемое поле 5:** *PurchStatus*

1. На панели операций выберите **Сохранить**. Затем закройте страницу.

## <a name="add-the-new-mobile-device-menu-items-to-a-menu"></a>Добавление новых пунктов меню мобильного устройства в меню

Три новых пункта меню мобильного устройства теперь готовы к добавлению в меню мобильного устройства. Эта задача должна быть завершена до того, как пункты меню можно будет использовать как часть процесса переключения. В этом примере создается новое подменю и добавляются новые пункты меню.

1. Перейдите в раздел **Управление складом \> Настройка \> Мобильное устройство \> Меню мобильного устройства**.
1. В области действий выберите **Создать**.
1. Задайте следующие значения в заголовке новой записи:

    - **Имя:** *Запрос*
    - **Описание:** *Запрос*

1. В списке **Доступные меню и пункты меню** выберите первый из пунктов меню мобильного устройства, который вы только что создали. Затем нажмите кнопку со стрелкой вправо, чтобы переместить этот пункт меню в список **Структура меню**.
1. Повторите предыдущий шаг для других двух новых пунктов меню.
1. В области списка слева выберите меню **Основное**.
1. В списке **Доступные меню и пункты меню** перейдите к разделу **Меню** и выберите новое меню **Запрос**. Затем нажмите кнопку со стрелкой вправо, чтобы переместить этот пункт меню в список **Структура меню**.

## <a name="configure-detours-in-your-mobile-device-steps"></a>Настройка переключений в шагах мобильного устройства

Чтобы завершить настройку, теперь следует использовать конфигурацию переключений на странице **Шаги для мобильного устройства**, чтобы добавить три новых пункта меню мобильного устройства к существующему шагу идентификации заказа на покупку в потоке *Получение покупки*.

1. Перейдите в раздел **Управление складом \> Настройка > Мобильное устройство \> Шаги мобильного устройства**.
1. В поле **Фильтр** введите *PONum*. Затем выберите *Код шага: "PONum"* из раскрывающегося списка.
1. Пока найденная запись выбрана в сетке, выберите **Добавить конфигурацию шага** в области действий. В открывшемся раскрывающемся диалоговом окне задайте полю **Пункт меню** значение *Получение покупки*. Затем выберите **OK**, чтобы закрыть диалоговое окно.
1. На странице подробных сведений о конфигурации нового шага (**Получение покупки: PONum**) на экспресс-вкладке **Доступные переключения (пункты меню)** выберите **Добавить** на панели инструментов.
1. В диалоговом окне **Добавить переключение** найдите и выберите ранее созданный пункт меню **Поиск заказов на покупку по поставщику**.
1. Нажмите кнопку **ОК**, чтобы закрыть диалоговое окно, а затем добавьте выбранный пункт меню в список переключений.
1. Выберите новое переключение, а затем выберите пункт **Выбрать поля для отправки** на панели инструментов.
1. В диалоговом окне **Выбрать поля для отправки** не добавляйте ничего в раздел **Отправить из получения покупки**, так как нет необходимости передавать какие-либо значения в пункт меню переключения. Однако в разделе **Вернуть из результатов поиска заказов на покупку по поставщику** установите следующее значение для пустой строки, которая уже была добавлена:

    - **Копировать из результатов поиска заказов на покупку по поставщику:** *Заказ на покупку*
    - **Вставить в получение покупки:** *Заказ на покупку*

1. Выберите **OK**, чтобы закрыть диалоговое окно.
1. Повторите шаги с 4 по 9 для двух других новых пунктов меню (**Поиск заказов на покупку на сегодня** и **Поиск заказов на покупку по номенклатуре**). Как и для пункта меню **Поиск заказов на покупку по поставщику**, вам не нужно отправлять данные в эти переключения, но необходимо вернуть номер заказа на покупку.
1. Закройте страницу.

## <a name="try-a-purchase-receiving-flow-that-has-a-data-inquiry-as-part-of-a-detour"></a>Попробуйте выполнить поток получения покупки с запросом данных в качестве части переключения

Выполните следующие шаги, чтобы проверить установку нового мобильного приложения.

1. Создайте несколько заказов на покупку со строками для склада 51.
1. Перейдите на мобильное устройство или эмулятор, где запущено мобильное приложение управления складом, и выполните вход на склад 51, используя *51* в качестве идентификатора пользователя и *1* в качестве пароля.
1. В меню мобильного приложения выберите пункт **Входящие**, а затем выберите **Получение покупки**.

    Должна отобразиться следующая страница, содержащая три новых пункта меню.

    ![Получение покупки с использованием номера заказа на покупку.](media/wma-purchase-receive-po-num-with-detours.png "Получение покупки с использованием номера заказа на покупку")

1. Испытайте другие возможности и обратите внимание на то, что можно отправить назад номер заказа на покупку, выбрав одну из карточек в списке.

    ![Получение покупки с использованием поиска заказа на покупку по поставщику, пример 1.](media/wma-purchase-receive-lookup-po-vendor-keyin-detours.png "Получение покупки с использованием поиска заказа на покупку по поставщику, пример 1")

    ![Получение покупки с использованием поиска заказа на покупку по поставщику, пример 2.](media/wma-purchase-receive-lookup-po-vendor-detours.png "Получение покупки с использованием поиска заказа на покупку по поставщику, пример 2")

> [!TIP]
> Вместо того, чтобы запустить поток получения путем поиска в пункте меню **Получение покупки**, можно начать с потока запросов (**Основной \> Запрос \> Поиск заказов на покупку по поставщику**) и вызвать переключение для запуска нужного потока, выбрав одну из карточек в списке. Чтобы использовать такой подход, можно определить переключение на странице **Шаги для мобильного устройства** для шага со значением **Код шага** равным *GenericDataInquiryList*. Если функция [*Многоуровневые переключения для мобильного приложения Warehouse Management*](warehouse-app-detours.md) включена для вашей системы, при необходимости можно также добавить дополнительное переключение (эта функция добавляет поддержку до двух уровней переключения, и ее можно настроить для поддержки дополнительных уровней).

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
