---
title: Контроль работы склада с шаблонами работы и директивами для мест хранения
description: В этой теме рассматривается, как использовать шаблоны работы и директивы для мест хранения для определения того, как и где выполняется работа на складе.
author: perlynne
manager: AnnBe
ms.date: 02/05/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: WHSLocDirFailure, WHSLocDirHint, WHSLocDirTable, WHSLocDirTableUOM, WHSRFMenuItem, WHSWork, WHSWorkClass, WHSWorkPool, WHSWorkTemplateTable
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: 72921
ms.assetid: 377ab8af-5b0c-4b5e-a387-06ac1e1820c0
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 4645cf36201aa1b87c22ba4dbfb1b8d8117f425a
ms.sourcegitcommit: fb7d0efd97754f1ae0b5aa765d0eeb3f57b8078f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/05/2020
ms.locfileid: "3028036"
---
# <a name="control-warehouse-work-by-using-work-templates-and-location-directives"></a>Контроль работы склада с шаблонами работы и директивами для мест хранения

[!include [banner](../includes/banner.md)]

В этой теме рассматривается, как использовать шаблоны работы и директивы для мест хранения для определения того, как и где выполняется работа на складе.

Инструкции, которые работники склада получают на мобильное устройство, определяются рабочими шаблонами Dynamics 365 Supply Chain Management, которые вы настраиваете, чтобы определить разные процессы и задачи склад. Шаблоны работы определяют, как работа выполнена для каждого процесса склада. Связывая директиву для места хранения с шаблонами работы, можно гарантировать, что работа выполняется в определенных физических областях склада.

## <a name="work-templates"></a>Шаблоны работ
На странице **Рабочие шаблоны** можно определить рабочие операции, которые должны быть выполнены на складе. Как правило, рабочие операции склада состоят из пары действий: рабочий склада комплектует запасы в наличии в одном расположении и помещает скомплектованные запасы в другом расположении. 

Рабочие шаблоны состоят из заголовка и связанных строк. Каждый рабочий шаблон предназначен для определенного *типа заказа на работу*. Многие типы заказов на работу связаны с исходными документами, например заказами на покупку или продажу. Тем не менее другие типы заказов на работу представляют отдельные складские процессы, например подсчет циклов. *ИД пула работ* позволяет организовать работу по группам. 

Параметры в определении заголовка работы можно использовать, чтобы определить, когда создавать новый элемент работы. Например, можно задать максимальное число строк комплектования и максимальное ожидаемое время комплектования. Затем, если работа по процессу комплектования заказа на продажу превышает какое-либо из этих значений, эта работа разделяется на два компонента. 

Строки работы представляют физические задачи, которые необходимы для обработки работы. Например, для исходящего складского процесса может существовать строка работы для комплектования номенклатур на складе и другая строка для размещения этих номенклатур в зоне ожидания. Кроме того, может существовать дополнительная строка для комплектования номенклатур из зоны ожидания и еще одна строка для размещения номенклатур в грузовом автомобиле в процессе погрузки. Можно задать *директивный код* в строках рабочего шаблона. Директивный код связан с директивой для места хранения и помогает гарантировать, что складская работа обрабатывается в правильном расположении склада. 

Можно задать запрос, чтобы контролировать время использования определенного рабочего шаблона. Например, можно задать ограничение, чтобы определенный шаблон можно было использовать только для работы на определенном складе. Кроме того, можно использовать несколько шаблонов для создания работы для исходящей обработки заказов на продажу в зависимости от источника продаж. Система использует поле **Порядковый номер**, чтобы определить порядок оценки доступных рабочих шаблонов. Следовательно, при наличии очень конкретного запроса для определенного рабочего шаблона нужно присвоить ему низкий порядковый номер. В этом случае запрос будет оцениваться раньше, чем другие, более общие запросы. 

Чтобы остановить или приостановить рабочий процесс, можно воспользоваться параметром **Остановить работу** в строке работы. В таком случае работник, выполняющий работу, не получит запрос на выполнение следующего этапа в строке работы. Чтобы перейти к следующему шагу, этот или другой работник должен выбрать работу снова. Можно разделить задачи в пределах элемента работы, воспользовавшись другим *ИД рабочего класса* в строках рабочего шаблона.

## <a name="location-directives"></a>Директивы для мест хранения
Директивы для мест хранения — это правила, с помощью которых можно определить места комплектации и размещения для перемещения запасов. Например, в проводке заказа на продажу директива для места хранения определяет места комплектации и размещения номенклатур. Директивы для мест хранения состоят из заголовка и сопутствующих строк и создаются на странице **Директивы для мест хранения**. 

В заголовке каждая директива для места хранения должна быть связана с *типом заказа на работу*, определяющим тип проводки по запасам, для которой будет использоваться директива, такой как заказы на продажу, пополнение или комплектация сырья. *Тип работы* определяет, будет ли директива для места хранения использоваться для комплектации или размещения работы, а также для других складских процессов, например расчета или изменения состояния запасов. Необходимо также задать *объект* и *склад*. *Код директивы*, который вы определяете в заголовке, можно использовать, чтобы связать директиву для места хранения с одним или несколькими шаблонами работы. 

Что касается шаблонов работы, можно настроить запрос и определить, когда используется конкретная директива для места хранения. Например, можно задать, что если электронная коммерция является источником заказа на продажу, запасы должны комплектоваться из специальной области склада. Система использует поле **Порядковый номер** для идентификации порядка, в котором оцениваются доступные директивы для мест хранения. 

Строки директив для места хранения задают дополнительные ограничения на применение правил поиска места хранения. Можно определить минимальное количество и максимальное количество, к которому должна применяться директива, и можно указать, что директива должна относиться к конкретной единице измерения складского учета. Например, если единицей измерения является палета, в определенном местонахождении можно разместить номенклатуры в палетах. Можно также определить, может ли количество разделяться между несколькими расположениями. Как и заголовок директивы для места хранения, каждая строка директивы для места хранения имеет порядковый номер, определяющий порядок, в котором оцениваются строки. 

Директивы для мест хранения имеют один дополнительный уровень детализации: *действия директивы для места хранения*. Можно определить несколько действий директивы для места хранения для каждой строки. Опять же, порядковый номер используется, чтобы определить порядок оценки действий. На этом уровне можно настроить запрос для определения способа поиска оптимального расположения на складе. Для поиска оптимального расположения можно также использовать предопределенные параметры **Стратегия**.

## <a name="location-directives-configuration-details"></a>Сведения о конфигурации директив для мест хранения 

 ### <a name="sequence-number"></a>Порядковый номер
 
Этот номер указывает, какой по счету обрабатывается директива для места хранения для выбранного типа заказа. Это значение можно изменить с помощью команд **Вверх** и **Вниз** в меню.
 
 ### <a name="work-type"></a>Тип работы
 
Это тип работы, которую требуется выполнить. Доступный тип работы зависит от типа проводки по запасам, выбранного в поле **Тип заказа на выполнение работ**.
-   **Размещение** — тип работы **Размещение** означает, что директива для места хранения должна найти оптимальное место для размещения запасов, поступающих в систему с приемки, производства или в результате корректировки запасов. Может также использоваться для определения размещения в промежуточном месте хранения или в окончательном месте хранения перед отгрузкой (у двери).
-   **Комплектация** — тип работы **Комплектация** означает, что склад должен найти оптимальное место хранения, откуда будут физически зарезервированы запасы (создать работу). Комплектация может быть завершена (строка работы "комплектация" может быть закрыта), даже если работа не выполнена. Пользователь может выполнить физическую комплектацию, что представляет собой один из шагов комплектации. Пользователь может затем отменить ее на мобильном устройстве и выполнить работу позднее. Тем не менее заголовок работы закрывается при выполнении окончательного размещения. 
-   **Инвентаризация, Корректировки, Пользовательский, Изменение статуса запасов, Создание грузоместа, Печать, Изменение статуса, Упаковывать по вложенным грузоместам** — не могут использоваться в конфигурациях директив для мест хранения. Это перечисление, поэтому фильтрации, связанной с типом заказа на выполнение работ, нет. 

### <a name="directive-code"></a>Код директивы

Выберите код директивы для связи с шаблоном работы или шаблоном пополнения. В форме **Код директивы** можно создавать новые коды, которые могут использоваться для связи между шаблоном пополнения шаблона работы и директивы для места хранения. Они также могут использоваться для установления связи между любой строкой шаблона работы и директивой для места хранения (такого как дверь или промежуточное место хранения).

Обратите внимание, что если этот код задан, при создании работы система не будет искать директиву для места хранения по порядковому номеру; поиск будет производиться по коду директивы. Это означает, что можно конкретнее указывать, какой шаблон места хранения используется для определенного шага в шаблоне работы, например промежуточное хранение материалов. 

### <a name="site"></a>Сайт

Сайт является обязательным полем, поскольку директиве для места хранения требуется сайт и склад, для которых она действительна. 

### <a name="warehouse"></a>Склад

Склад является обязательным полем, поскольку директиве для места хранения требуется сайт и склад, для которых она действительна.

### <a name="multiple-sku"></a>Несколько SKU

Это позволяет использовать несколько единиц измерения хранения (SKU) в месте хранения, таком как дверь. Если выбрать **Несколько SKU**, место размещения будет указано в работе (что ожидается), однако будет способно обрабатывать только размещение нескольких номенклатур (если работа включает разные SKU для комплектации и размещения, а не размещение одного SKU). Если не выбирать **Несколько SKU**, место размещения будет указано только в случае, если в размещении фигурирует только один вид SKU. Чтобы использовать оба действия, необходимо указать две строки: одну, для которой параметр "Несколько SKU" включен, и вторую, для которой он выключен. Эти строки должны иметь одинаковую структуру и настройки. Для операций размещения необходимо, чтобы директивы для мест хранения были идентичными, даже если вы не делаете различия между одной и несколькими SKU в коде работы. Также необходимо выполнить настройку для комплектации, если у вас есть заказ, куда входит более одной номенклатуры.

### <a name="sequence-number"></a>Порядковый номер

Укажите, какой по счету обрабатывается строка директивы для места хранения для выбранного типа работы. В случае необходимости можно также изменить последовательность с помощью команд **Вверх** и **Вниз**.

### <a name="fromto-quantity"></a>Количество от/до

Этот параметр дает возможность указать диапазон количества для случаев, когда нужно выбрать последовательность в середине сетки. Можно указать диапазон количества (от/до) в соответствующей единице измерения.

### <a name="unit"></a>Блок

Можно определить минимальное количество и максимальное количество, к которому должна применяться директива, и можно указать, что директива должна относиться к конкретной единице измерения складского учета. Поле единицы измерения в строке используется только для оценки количества.

При проверке применимости строки директивы для места хранения эта проверка производится на основании количества в соответствующей единице измерения, указанной в строке директивы места хранения. Каждый раз при достижении строки директивы для места хранения система будет пытаться преобразовать единицу измерения спроса в единицу измерения, указанную в строке. Если пересчета единиц измерения не существует, система перейдет на следующую строку. 

### <a name="locate-quantity"></a>Найти количество

Этот параметр используется только для размещения количества на складе (поиска места для него). Он предназначен только типа работы "размещение". Допустимые значения:

-   **Количество по грузоместу** — при оценке того, находится ли количество в пределах диапазонов от/до, используется количество на принимаемом грузоместе.
-   **Классифицированное в единицах количество** — при оценке того, находится ли количество в пределах диапазонов от/до, используется количество, классифицируемое в единицах в ходе конкретной проводки.
-   **Оставшееся количество** — при оценке того, находится ли количество в пределах диапазонов от/до, используется количество, оставшееся к получению по строке заказа на покупку, который в настоящее время прибывает.
-   **Ожидаемое количество** — при оценке того, находится ли количество в пределах диапазонов от/до, используется итоговое количество по строке заказа на покупку, вне зависимости от того, какое количество уже получено.

### <a name="restrict-by-unit"></a>Ограничить по единице

Это позволяет привязать строку директивы для места хранения к единице измерения (или нескольким единицам измерения). При резервировании количества, если вы хотите резервировать только палеты из конкретного набора мест хранения, последовательность в середине сетки будет ограничивать эту последовательность палетой, т. е. при любом количестве, которое меньше палеты, последовательность выбираться не будет. Выберите **Ограничить по единице**, чтобы настроить единицы измерения. Также можно ограничить строку несколькими единицами измерения. Работает только с директивами для мест хранения типа "комплектация". 

### <a name="round-up-to-unit"></a>Округлить вверх до единицы измерения

Это поле используется вместе с полем **Ограничить по единице**. Если параметр **Ограничить по единице** в строке директивы для места хранения установлен в значение "ящик", выбор параметра **Округлить вверх до единицы измерения** указывает, что работа, создаваемая из директивы для комплектации сырья, должна округляться вверх до кратного одной единицы обработки (указанной в поле **Ограничить по единице**). Обратите внимание, что это работает только для комплектации сырья и только с директивами для мест хранения типа "комплектация".

### <a name="locate-packing-qty"></a>Найти упакованное количество

Если в заказе на продажу, заказе на перемещение или производственном заказе указано упакованное количество, при выборе этого параметра система выбирает только те места хранения, где в одном месте есть количество, предусмотренное в упаковке. Работает только с директивами для мест хранения типа "комплектация".

### <a name="allow-split"></a>Разрешить разделение

Этот параметр указывает, разрешено ли директиве для места хранения разбивать принимаемое количество или резервируемое количество между несколькими местами хранения на складе, или же для создания работы все количество должно быть размещено в одном месте хранения или резервироваться из одного места хранения. 

### <a name="sequence-number"></a>Порядковый номер

Указывает, какой по счету обрабатывается директива для места хранения для выбранного типа работы. При необходимости последовательность можно изменить. Однако использовать порядковые номера необходимо с осторожностью, поскольку обработка всегда выполняется последовательно. 

### <a name="name"></a>Наименование

Введите наименование для действия директивы для места хранения. Наименование должно быть информативным.

### <a name="fixed-location-usage"></a>Использование фиксированного местонахождения 

-   **Фиксированные и нефиксированные местонахождения** — директива для места хранения будет учитывать все места хранения.
-   **Только фиксированные местонахождения для продукта** — директива для места хранения будет учитывать только фиксированные местонахождения для продуктов.
-   **Только фиксированные местонахождения для варианта продукта** — директива для места хранения будет учитывать только фиксированные местонахождения для вариантов продукта.

### <a name="allow-negative-inventory"></a>Разрешить отрицательный запас

Установите этот флажок, чтобы разрешить отрицательный запас в указанном месте хранения в директивах для мест хранения. 

### <a name="batch-enabled"></a>Партия активна 

Установите этот флажок, чтобы использовать стратегии партий для номенклатур, для которых включены партии. При достижении строки, для которой установлен флажок **Партия активна**, но для номенклатуры в которой не включены партии, процесс перейдет на следующую строку действия. 

### <a name="strategy"></a>Стратегия

-   **Консолидировать** — эта стратегия используется для консолидации номенклатур в определенном месте хранения, если уже доступны аналогичные номенклатуры. Работает только для директив для места хранения типа "размещение". Типовая настройка размещения будет следующей: консолидировать на первой строке действия, а на второй попытаться разместить без консолидации. Консолидация товаров делает более эффективной последующую комплектацию.
-   **Соответствие упакованному количеству** — эта стратегия позволяет найти местоположение, в котором содержится грузоместо с точным требуемым количеством. Она не может использоваться с местонахождениями без управления грузоместом. Эта стратегия работает только для директив для мест хранения с типом работы "комплектация".
-   **Резервирование партии по FEFO** — эта стратегия используется, когда запасы размещаются по дате окончания срока годности партии и выделяются для резервирования партии. Эту стратегию можно использовать только для номенклатур, для которых включены партии. Работает только для директив для мест хранения с типом работы "комплектация". 
-   **Округлить до полного НЗ** — эта стратегия используется для округления количества запасов до количества по грузоместу, назначенного комплектуемым номенклатурам. Эту стратегию можно использовать только для директив для мест хранения типа "комплектация" при пополнении. 
-   **Пустое местонахождение без входящих работ** — эта стратегия используется для поиска пустых мест хранения. Местонахождение считается пустым если в нем нет физических запасов и ожидаемой входящей работы. Эта стратегия используется только для директив для места хранения типа "комплектация". 

### <a name="example-of-the-use-of-location-directives"></a>Пример использования директив для мест хранения

В этом примере мы рассмотрим процедуру, связанную с заказом на покупку, когда директива для места хранения должна найти на складе свободное место для складируемых номенклатур, которые только что были зарегистрированы в доке приемки. Во-первых, нужно попытаться найти свободное место на складе путем консолидации с существующими запасами в наличии. Если консолидация невозможна, нужно найти пустое место хранения. 

Для этого сценария необходимо определить два действия директивы для места хранения. Первое действие в последовательности должно использовать стратегию **Консолидировать**, а второе — **Пустое расположение без входящей работы**. Если не определено третье действие для обработки сценария переполнения, возможны два результата, если места на складе нет: работа будет создана, несмотря на отсутствие определенных мест хранения, либо процесс создания работы завершится сбоем. Результат определяется настройкой страницы **Ошибки указания местонахождения**, где можно определить, нужно ли выбирать параметр **Прекратить работу при сбое директивы местонахождения** для каждого типа заказа на работу.
