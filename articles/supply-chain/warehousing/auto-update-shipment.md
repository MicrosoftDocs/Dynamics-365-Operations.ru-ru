---
title: Автоматические обновления отгрузок
description: В этом разделе представлен обзор функциональной возможности, обеспечивающей автоматическое обновление отгрузок.
author: josaw1
manager: tfehr
ms.date: 11/04/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: WHSWaveTemplateTable,SalesTableListPage,SalesTable,WHSWaveTableListPage
audience: Application User
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2019-08-31
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: 1f75e9421ab9cac0b62e1cdee17ecf74796783cc
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/15/2021
ms.locfileid: "5001232"
---
# <a name="shipment-auto-updates"></a>Автоматические обновления отгрузок

[!include [banner](../includes/banner.md)]

Функция автоматического обновления отгрузок автоматически обновляет количества (и увеличивает, и уменьшает) в строке загрузки, связанной с отгрузкой, после того как отгрузка была отпущена на склад. Эта функция остается включенной до тех пор, пока строка загрузки в отгрузке или грузе не будет обработана в волне. Когда она используется, обновления заказов могут автоматически передаваться на склад, не требуя вмешательства вручную, пока не будет создано складское задание.

Когда функция автоматического обновления отгрузки не используется, только уменьшения количества автоматически передаются, пока не будет создана складская работа. Пользователи должны вручную обновлять или удалять строки, а затем должны повторно выпустить строки, если количества по заказу увеличиваются или добавляются новые строки заказа. С помощью функции автоматического обновления отгрузки предприятия могут легко предоставлять обновления склада, не заботясь о том, что связанные отгрузки и грузы не будут отражать обновления строк заказа.

Функция автоматического обновления отгрузки применяется как к строкам заказа на продажу, так и к строкам заказа на перемещение, и она включается для конкретного склада. Таким образом, компании могут применять разные политики автоматического обновления отгрузки по складам, как это требуется. По умолчанию политика автоматического обновления отгрузки для уменьшения количества применяется для всех складов, использующих процессы управления складом. Когда используется эта настройка политики по умолчанию, только уменьшения количества автоматически передаются в отгрузку и груз, пока не будет создана складская работа. Это поведение напоминает поведение, которое было использовано до введения функции автоматического обновления отгрузки.

## <a name="main-elements-of-the-functionality"></a>Основные элементы функциональной возможности

Функция автоматического обновления отгрузки полагается в первую очередь на статус отгрузки, чтобы определить, следует ли изменять количество в строке загрузки при внесении изменений в строку заказа на продажу или в строку заказа на перемещение. Он также полагается в основном на статус отгрузки, чтобы определить, когда новую строку загрузки следует автоматически добавить в существующую загрузку. Когда отгрузка имеет статус **Разделено по волнам** или выше, автоматическое обновление выполняться не будет.

Статус волны также учитывается при автоматических обновлениях. Когда волна, которая связана со строкой загрузки, имеет статус **На удержании**, **Выполнение**, **Выпущено**, **Скомплектовано** или **Отгружено**, если пользователь пытается уменьшить количество в строке загрузки (через уменьшение количества в строке заказа на продажу или в строке заказа на перемещение), появляется следующее сообщение об ошибке: "Не удается удалить резервирования в связи с наличием зависимой от них работы". Кроме того, когда волна имеет один из ранее указанных статусов волны, если пользователь пытается косвенно увеличить количество в строке загрузки путем увеличения количества в строке заказа на продажу или в строке заказа на перемещение, количество в строке загрузки не будет автоматически увеличено. В этом случае строка загрузки должна быть обновлена вручную.

## <a name="scenarios"></a>Сценарии

Функция автоматического обновления отгрузки поддерживает четыре сценария: добавление новой строки заказа, увеличение количества по строке заказа, уменьшение количества по строке заказа и удаление строки заказа.

- **Добавление новой строки заказа** — когда поле **Автоматические обновления отгрузки** на экспресс-вкладке **Склад** на странице **Склады** (**Управление складом \> Настройка \> Склад \> Склады**) имеет значение **Всегда**, если для этого заказа существует отгрузка и новая строка заказа добавляется в заказ на продажу или заказ на перемещение после того, как уже была создана загрузка для заказа на продажу, существующая загрузка не обновляется. Создается новая строка загрузки, которая не имеет ссылки на существующую загрузку, и связывается с существующей отгрузкой. Новая строка добавляется к загрузке и выпускается.
- **Увеличение количества в строке заказа** — когда в поле **Автоматическое обновление отгрузки** установлено значение **Всегда**, если для заказа существует отгрузка, и количество в существующей строке заказа на продажу или строке заказа на перемещение увеличивается после того, как загрузка уже была создана для заказа на продажу, строка загрузки увеличивается на то же количество, что и строка заказа. Если загрузка была выпущена, но работа не была создана, то строка загрузки увеличивается на то же количество, что и строка заказа.
- **Уменьшение количества в строке заказа** — когда в поле **Автоматическое обновление отгрузки** установлено значение **Всегда** или **При уменьшении количества**, если для заказа существует отгрузка, и количество в существующем заказе на продажу строка или заказе на перемещение уменьшается после того, как уже была создана загрузка для заказа на продажу, количество по связанной строке загрузки обновляется для соответствия, если только количество в этой строке загрузки уже не равно или меньше нового количества в строке заказа. В этом случае строка загрузки не изменяется. Если загрузка была выпущена, но работа не была создана, количество по связанной строке загрузки обновляется до соответствующего значения, за исключением случаев, когда количество в строке загрузки уже равно или меньше нового количества в строке заказа. В этом случае строка загрузки изменяется.
- **Удаление строки заказа** — когда в поле **Автоматическое обновление отгрузки** установлено значение **Всегда** или **При уменьшении количества**, если пользователь пытается удалить строку заказа, для которой существует строка загрузки, выводится сообщение об ошибке.

## <a name="example-scenario"></a>Пример сценария

Для этого сценария необходимо установить демонстрационные данные, а также необходимо использовать компанию **USMF** с демонстрационными данными.

### <a name="turn-on-the-auto-update-shipment-functionality"></a>Включение функции автоматического обновления отгрузки

Чтобы включить функцию автоматического обновления отгрузки, выполните следующие действия.

1. Перейдите в раздел **Управление складом \> Настройка \> Склад \> Склады**.
2. Выберите склад **24**.
3. На экспресс- вкладке **Склад** в поле **Автоматическое обновление отгрузки** измените значение с **При уменьшении количества** на **Всегда**.

После изменения значения на **Всегда** любое увеличение или уменьшение количества в строках заказа на продажу и строках заказа на перемещение, а также любые добавления новых строк отражаются в отгрузках и загрузках для выбранного склада с учетом ранее упомянутых ограничений на обновление.

### <a name="change-the-wave-template-so-that-load-lines-arent-automatically-processed"></a>Изменение шаблона волны, чтобы строки загрузки не обрабатывались автоматически

Чтобы настроить шаблон волны, чтобы он не выполнял автоматическую обработку строк загрузки, выполните следующие действия.

1. Перейдите в раздел **Управление складом \> Настройка \> Волны \> Шаблоны волны**.
2. Выберите шаблон волны **24 Отгрузка по умолчанию**.
3. Выберите **Правка**.
4. На экспресс-вкладке **Общие сведения** задайте для параметра **Создавать волны автоматически** значение **Да** и убедитесь, что все остальные параметры имеют значение **Нет**.

Важно, чтобы в процессе создания волны не были автоматически созданы и запущены никакие работы. После создания работы, которая относится к строке загрузки, которая была создана для строки заказа на продажу, эта строка загрузки больше не обновляется автоматически, если количество в строке заказа на продажу изменяется.

### <a name="create-a-sales-order"></a>Создать заказ на продажу

Чтобы создать заказ на продажу, выполните следующие действия.

1. Перейдите в раздел **Продажи и маркетинг \> Заказы на продажу \> Все заказы на продажу**.
2. Выберите клиента **US-003**.
3. Создайте строку для кода номенклатуры **A0001**.
4. Введите количество **10**. (Убедитесь, что вы используете склад **24**.)
5. Нажмите **Сохранить**.
6. На панели операций на вкладке **Склад** в группе **Действия** выберите вариант **Запуск на склад**. Будут созданы отгрузка и волна.

Поскольку шаблон волны был изменен в предыдущей процедуре, загрузка или работа не создаются. Статус отгрузки будет **Открыта**, а статус волны — **Создана**.

### <a name="decrease-the-quantity-on-a-sales-order-line"></a>Уменьшение количества по строке заказу на продажу

Чтобы уменьшить количество в строке заказа на продажу, выполните следующие действия.

1. Перейдите в раздел **Продажи и маркетинг \> Заказы на продажу \> Все заказы на продажу**.
2. Выберите заказ на продажу, только что выпущенный на склад.
3. Выберите строку заказа на продажу. В поле **Количество** измените значение с **10** на **8**.
4. В строке заказа на продажу выберите **Склад \> Сведения об отгрузке**. На странице **Сведения об отгрузке** на экспресс-вкладке **Строки загрузки** количество отражает изменение в строке заказа на продажу.

### <a name="increase-the-quantity-on-a-sales-order-line"></a>Увеличение количества по строке заказу на продажу

Чтобы увеличить количество в строке заказа на продажу, выполните следующие действия.

1. Перейдите в раздел **Продажи и маркетинг \> Заказы на продажу \> Все заказы на продажу**.
2. Выберите заказ на продажу, ранее выпущенный на склад.
3. Измените количество в строке с **8** до **12**.
4. Нажмите **Сохранить**.
5. Вернитесь на страницу **Все заказы на продажу** и снова выберите заказ на продажу.
5. На панели операций на вкладке **Склад** в группе **Связанные сведения** выберите **Сведения об отгрузке**. На странице **Сведения об отгрузке** на экспресс-вкладке **Строки загрузки** количество отражает изменение в строке заказа на продажу.

Хотя количество в строке загрузки было увеличено с 8 до 12, только восемь номенклатур остаются зарезервированы, если только не включено автоматическое резервирование. Так как количество, добавленное к существующей отгрузке, не было зарезервировано, если волна будет обработана в этот момент, без резервирования, работа создается только для количества, которое уже было зарезервировано.

> [!NOTE]
> При уменьшении количества в строке заказа количество в строке загрузки не изменяется, если оно уже равно или меньше нового количества в строке заказа. Когда количество в строке заказа увеличивается, строка загрузки увеличивается на то же количество, что и строка заказа. Если количество в строке заказа отличается от количества в строке загрузки, разница остается.

### <a name="add-a-sales-order-line"></a>Добавление строки заказа на продажу

Чтобы добавить строку заказа на продажу, выполните следующие действия.

1. Перейдите в раздел **Продажи и маркетинг \> Заказы на продажу \> Все заказы на продажу**.
2. Выберите заказ на продажу, ранее выпущенный на склад.
3. Создайте строку для кода номенклатуры **A0002**.
4. В поле **Количество** введите **10**. (Убедитесь, что вы используете склад **24**.) Новая строка автоматически добавляется к существующей отгрузке.
5. Нажмите **Сохранить**.
6. Вернитесь на страницу **Все заказы на продажу** и снова выберите заказ на продажу.
7. На панели операций на вкладке **Склад** в группе **Связанные сведения** выберите **Сведения об отгрузке**. На странице **Сведения об отгрузке** на экспресс-вкладке **Строки загрузки** обратите внимание на вторую строку загрузки.

Поскольку строка заказа на продажу, только что добавленная к существующей отгрузке, не была зарезервирована, если волна обрабатывается в этот момент, работа создается только для количества в первой строке заказа на продажу и первой строке загрузки.

### <a name="process-a-wave"></a>Обработка волны

Чтобы обработать волну, выполните следующие действия.

1. Перейдите в раздел **Управление складом \> Исходящие волны \> Волны отгрузок \> Все волны**.
2. Выберите созданную ранее волну.
3. В области действий на вкладке **Волна** в группе **Волна** выберите **Обработать**.

Волна обрабатывается и создает работу для зарезервированных количеств в строках загрузки. Статус отгрузки обновляется с **Открыта** до **Разделено по волнам**. Поскольку статус отгрузки обновляется до **Разделено по волнам**, любые изменения, которые происходят, такие как уменьшение или увеличение количества в строках или добавление новых строк в заказ на продажу, не влияют на существующие строки загрузки, связанные с разделенной по волнам отгрузкой.

Если отгрузка имеет статус **Разделено по волнам** или выше, обновления количества в строке заказа на продажу не отражаются или не проверяются по строке загрузки, связанной с отгрузкой. Изменения количества в строке загрузки должны выполняться непосредственно в строке загрузки.

Проверка выполнена после того, как работа была создана для строки загрузки и было выполнено резервирование. Уменьшение количества в строке заказа на продажу затем проверяется с учетом резервирования по строкам работ.
