---
title: Создание директив местонахождения
description: В этом разделе описывается, как создать директивы местонахождения. Директивы местонахождения — это определяемые пользователем правила, с помощью которых можно определить местонахождения комплектации и размещения для перемещения запасов.
author: Mirzaab
manager: tfehr
ms.date: 07/28/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: WHSLocDirTable
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2020-07-28
ms.dyn365.ops.version: Release 10.0.9
ms.openlocfilehash: bdd99b5faefd7054023b45a91fad070aac055a26
ms.sourcegitcommit: ecad92c9cb7e9e57688e678f79f747673c921df5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/13/2020
ms.locfileid: "3692146"
---
# <a name="create-location-directives"></a>Создание директив местонахождения

[!include [banner](../includes/banner.md)]

В этом разделе описывается, как создать директивы местонахождения. Директивы местонахождения — это определяемые пользователем правила, с помощью которых можно определить местонахождения комплектации и размещения для перемещения запасов. Например, для проводки заказа на продажу директива местонахождения определяет места комплектации и размещения номенклатур.

> [!NOTE]
> Этот раздел относится к функциям в модуле **Управление складом**. Она не применяется к функциям в модуле [Управление запасами](../inventory/inventory-home-page.md).

Директивы местонахождения можно использовать для выполнения следующих задач:

- Размещать входящие номенклатуры.
- Комплектовать и подготавливать номенклатуры для исходящих проводок.
- Комплектовать и размещать сырье для производства.
- Пополнять местонахождения.

## <a name="prerequisites"></a>Необходимые условия

Прежде чем можно будет создать директиву местонахождения, необходимо выполнить следующие действия, чтобы убедиться, что необходимые условия выполнены.

1. Перейдите в раздел **Управление складом \> Настройка \> Склад \> Склады**.
1. Создание склада.
1. На экспресс-вкладке **Склад** задайте параметр **Использовать процессы управления складом** на *Да*.
1. Создание местонахождений, типов местонахождений, профилей местонахождений и форматов местонахождений. Дополнительные сведения см. в [Настройка местонахождений на складе, поддерживающем WMS](https://docs.microsoft.com/dynamics365/supply-chain/warehousing/tasks/configure-locations-wms-enabled-warehouse).
1. Создание сайтов, зон и групп зон. Дополнительные сведения см. в [Настройка складов](https://docs.microsoft.com/dynamics365/commerce/channels-setup-warehouse) и [Настройка местонахождений на складе, поддерживающем WMS](https://docs.microsoft.com/dynamics365/supply-chain/warehousing/tasks/configure-locations-wms-enabled-warehouse).

## <a name="setup"></a>Настройка

### <a name="create-location-directives"></a>Создание директив местонахождения

Чтобы создать директиву местонахождения, выполните следующие действия.

1. Перейдите в раздел **Управление складом \> Настройка \> Директивы местонахождения**.
1. В области списка задайте в поле **Тип заказа на работу** тип проводки по запасам, для которой создается данная директива местонахождения.
1. На панели операций выберите **Создать** для создания директивы местонахождения.
1. Для новой директивы местонахождения задайте значения в полях, как описано в следующей таблице.

    | Поле | описание |
    |---|---|
    | Порядковый номер | Введите целое число, указывающее местонахождение последовательности в директиве местонахождения. Местонахождения последовательности определяют, когда каждая директива местонахождения обрабатывается для выбранного типа заказа на работу. |
    | Наименование | Введите имя директивы местонахождения. | 
    | Тип работы | Выберите тип работы для выполнения. Список значений зависит от типа проводки по запасам, выбранного в поле **Тип заказа на работу**. Могут быть доступны следующие значения:<ul><li>**Размещение** — директива местонахождения попытается найти оптимальное место для размещения запасов, поступающих в систему с приемки, производства или в результате корректировки запасов. Директива местонахождения используется также для определения размещения в промежуточном месте хранения или в окончательном месте хранения перед отгрузкой (у двери) в исходящем потоке.</li><li>**Комплектация** — директива местонахождения попытается найти оптимальные местонахождения для физического резервирования запасов (создать работу). Комплектация может быть завершена (строка работы "комплектация" может быть закрыта), даже если работа не выполнена. Пользователь может выполнить физическую комплектацию. В системе это действие является шагом комплектации. Пользователь может затем отменить ее на мобильном устройстве и выполнить работу (например, размещение) позднее. Тем не менее заголовок работы сначала закрывается, затем выполняется окончательное размещение.</li><li>**Инвентаризация**, **Корректировки**, **Пользовательский**, **Изменение статуса запасов**, **Создание грузоместа**, **Печать**, **Изменение статуса** и **Упаковывать по вложенным грузоместам** — эти значения не могут использоваться при настройке любой директивы местонахождения.</li></ul> |
    | Место | Выберите сайт, где должна быть выполнена работа. |
    | Склад | Выберите местонахождение склада, где должна быть выполнена работа. |
    | Код директивы | Выберите код директивы для руководства выбором директив местоположения, связанных со строками размещения шаблона работы, где назначен этот код. На странице **Код директивы** можно создавать новые коды, которые могут использоваться для подключения шаблона работы к директиве местонахождения. Также можно использовать эту страницу для установления связи между любой строкой шаблона работы и директивой местонахождения (такого как дверь или промежуточное местонахождение). Дополнительные сведения о том, как настроить код директивы с помощью шаблона работы см. в [Контроль работы склада с шаблонами работы и директивами местонахождения](control-warehouse-location-directives.md).<p>Если этот код директивы задан, когда должна быть создана работа, система будет искать директивы местонахождения по коду директивы, а не по последовательности. Таким образом, можно более точно указывать, какой шаблон местонахождения используется для определенного шага в шаблоне работы, например помещение на промежуточное хранение и обработку материалов.</p> |
    | Код метода обработки | Выберите код местонахождения, чтобы перенаправить размещение полученных номенклатур в местонахождение. (Дополнительные сведения см. в разделе [Настройка кодов методов обработки](tasks/set-up-dispositions-codes.md).) Это поле доступно только в том случае, если в поле **Тип заказа на работу** установлено значение *заказы на покупку*, *заказы на возврат* или *Размещение готовой продукции*. |
    | Несколько SKU | Задайте этот параметр на *Да*, чтобы использовать несколько единиц складского хранения (SKU) для местонахождения. Например, этот параметр должен иметь значение *Да* для двери отсека.<p>Если для параметра **несколько SKU** установлено значение *Да*, местонахождение размещения будет указано в поле работа (как ожидается). Однако местонахождение размещения может обрабатывать несколько номенклатур, только если работа включает различные единицы складского учета, которые должны быть скомплектованы и размещены, а не в том случае, если работа включает только одну единицу складского учета, которая должна быть размещена.</p><p>Если для параметра **Несколько SKU** задано значение *Нет*, место размещения будет указано только в случае, если в размещении фигурирует только один тип SKU.</p><p>Для использования обоих методов необходимо указать две строки с одинаковой структурой и настройкой, но для параметра **несколько SKU** установите значение *Да* для одной из строк, и *Нет* для другой. Другими словами, для операций размещения требуются две идентичные директивы местонахождения, даже если вы не делаете различий между одной и несколькими SKU в коде работы. Также необходимо задать директиву местонахождения для комплектации, если у вас есть заказ, куда входит более одной номенклатуры.</p><p>**Примечание:** Если вы установите для параметра **Несколько SKU** значение *Да* для директивы местонахождения для типа работ *Размещение*, система всегда будет выбирать первую строку директивы местонахождения независимо от других ограничений, созданных в строках.</p> |

1. Необязательно: На панели действий выберите **Изменить запрос**, чтобы выбрать местонахождения или определить ограничения, применяемые при выборе определенной директивы местонахождения.
1. На экспресс-вкладке **Строки** создайте одну или несколько строк, чтобы указать единицы и найти либо зарезервировать количество на складе.
1. В каждой новой строке задайте значения в полях, как описано в следующей таблице.

    | Поле | описание |
    |---|---|
    | Порядковый номер | Введите целое число, указывающее местонахождение последовательности в директиве местонахождения. Местонахождения последовательности определяют, когда каждая директива местонахождения обрабатывается для выбранного типа работы. |
    | Количество "От" | Укажите начальный диапазон количества для случаев, когда нужно выбрать последовательность в середине сетки. Укажите количество в единицах измерения, выбранных в поле **Единица**. |
    | Количество "До" | Укажите конечный диапазон количества для случаев, когда нужно выбрать последовательность в середине сетки. Укажите количество в единицах измерения, выбранных в поле **Единица**. |
    | Единица | Выберите единицу измерения для номенклатур.<p>Можно указать минимальное количество и максимальное количество, к которому должна применяться директива. Также можно указать, что следует использовать эту директиву для определенной единицы складского учета. Поле **Единица измерения** используется только для оценки количества.</p><p>Чтобы определить, применяется ли строка директивы местонахождения, система оценивает количества, используя значение **Единица измерения** , указанное в строке. Каждый раз при достижении строки директивы местонахождения система будет пытаться преобразовать единицу измерения спроса в единицу измерения, указанную в строке. Если пересчет единиц измерения не существует, система перейдет в следующую строку.</p> |
    | Найти количество | Это поле действительно только при попытке разместить или найти количество на складе. Другими словами, это допустимо только для работы *Размещение*. Выберите метод оценки того, находится ли количество в диапазоне, определенном в полях **Количество "От"** и **Количество "До"**. Если директива местонахождения предназначена для входящей проводки, выберите один из следующих параметров:<ul><li>**Количество по грузоместу** — для оценки того, находится ли количество в пределах целевого диапазона, используется количество на принимаемом грузоместе.</li><li>**Классифицированное в единицах количество** — для оценки того, находится ли количество в пределах целевого диапазона, используется количество, классифицируемое в единицах в ходе проводки. Например, если на складе можно получить количество 1000 и разделить его на 10 грузомест по 100 каждое, можно использовать количество, равное 1000 номенклатурам, вместо количества по грузоместу, равного 100.</li><li>**Оставшееся количество** — чтобы оценить, находится ли количество в пределах целевого диапазона, используется количество, оставшееся к получению по строке заказа на покупку, который в настоящее время прибывает.</li><li>**Ожидаемое количество** — чтобы оценить, находится ли количество в пределах целевого диапазона, используется итоговое количество по строке заказа на покупку, вне зависимости от того, какое количество уже получено.</li></ul> |

1. Необязательно: На экспресс-вкладке **Строки** можно задать следующие дополнительные поля.

    | Поле | описание |
    |---|---|
    | Ограничить по единице | Установите этот флажок, чтобы ограничить единицы измерения, которые считаются допустимыми критериями выбора для строк директивы местонахождения. Когда определены единицы измерения, только те номенклатуры, в которых единица измерения совпадает по крайней мере с одной единицей измерения, определенной для группы упорядочения единиц, будут считаться действительными для выбора строки.<p>Например, единица ограничена палетами, и номенклатура связана с группой упорядочения единиц, которая содержит единицы измерения *палеты*. В этом случае номенклатуры будут считаться допустимыми вариантами для директивы местонахождения.</p><p>Однако флажок **Ограничение по единицам** не контролирует единицу измерения или единицы измерения, применяемые в строках работы. Ограничение единицы применяется только к единицам, доступным через группу упорядочения единиц.</p><p>Например, номенклатура связана с группой упорядочения единиц, которая содержит единицы измерения *палеты* и *шт.*. Единица измерения определена, где 1 палета = 100 шт., а в директиве местонахождения используется функция **Ограничить по единице** только для палет. Кроме того, был определен шаблон работы, который ограничивает создание заголовка работы 50 шт. В этом случае будут созданы строки работы на 50 шт.</p><p>Чтобы указать единицу измерения для ограничения, выполните следующие действия</p><ol><li>На экспресс-вкладке **строки** выберите **Ограничить по единице**. Эта кнопка доступна только в том случае, если установлен флажок **Ограничить по единице** в строке, а затем выберите **Сохранить**.</li><li>В поле **Единица** выберите единицу измерения для ограничения процессами комплектации и размещения.</li></ol> |
    | Округлить вверх до единицы измерения | Выберите этот параметр, чтобы указать, что комплектация сырья должна округляться до числа, кратного единице обработки, указанной поле **Ограничить по единице**. Это поле относится только к директивам местоположения и комплектации сырья типа *Комплектация*. |
    | Найти упакованное количество | Установите этот флажок, если количество единиц измерения упаковки указано на странице **Заказ на продажу**. Если этот флажок установлен, выбираются только местонахождения с данным количеством единиц измерения упаковки. |
    | Разрешить разделение | Установите этот флажок, чтобы разделить количество на несколько местонахождений. |
    | Шаблон немедленного пополнения | Создайте связь с шаблоном пополнения для немедленного запуска пополнения, если номенклатуры не распределены. Если это поле оставлено пустым, пополнение номенклатуры не запустится, пока не будут обработаны все строки директивы местоположения.<p>Это поле доступно только в выбранных типах заказов на работу, для которых разрешено пополнение, таких как *заказы на продажу* и *Комплектация сырья*.</p> |

1. На экспресс-вкладке **Действия директивы местонахождения** щелкните **Создать**, чтобы выбрать местонахождение или диапазон местонахождений.
1. В поле **порядковый номер** отображается последовательность, в которой будет обрабатываться директива местонахождения для выбранного типа работ. Это последовательность можно изменить. Однако следует осторожно следовать порядковым номерам для действий директивы местонахождения, поскольку в этой последовательности всегда будут выполняться действия директивы местонахождения.
1. В поле **Имя** введите имя действия директивы местонахождения. Будьте конкретны, чтобы было понятно, что это за действие.
1. Необязательно: выберите **Изменить запрос**, чтобы изменить местонахождения склада и другие критерии.
1. (Необязательно) Можно задать следующие дополнительные поля для директивы местонахождения.

    | Поле | описание |
    |---|---|
    | Использование фиксированного местонахождения | Выберите, какие местонахождения следует учитывать в директиве местонахождений:<ul><li>**Фиксированные и нефиксированные местонахождения** — директива для места хранения будет учитывать все места хранения.</li><li>**Только фиксированные местонахождения для продукта** — директива для места хранения будет учитывать только фиксированные местонахождения для продуктов.</li><li>**Только фиксированные местонахождения для варианта продукта** — директива для места хранения будет учитывать только фиксированные местонахождения для вариантов продукта.</li></ul> |
    | Разрешить отрицательный запас | Установите этот флажок, чтобы разрешить отрицательный запас в определенном местонахождении склада. |
    | Партия активна | Установите этот флажок, чтобы использовать стратегии партий для номенклатур с поддержкой партий. Если этот флажок установлен, а в поле **стратегия** установлено значение *нет*, система перейдет к следующей строке действия. |
    | Стратегия | Выберите стратегию, которую следует использовать для директивы местонахождения:<ul><li>**Нет** — стратегия не используется.</li><li>**Соответствие упакованному количеству** — эта стратегия проверяет, имеется ли в местонахождении комплектации указанное упаковочное количество. Данная стратегия допустима только в том случае, если в поле **Тип работы** указано значение *Комплектация*.</li><li>**Консолидировать** — эта стратегия консолидирует номенклатур в определенном местонахождении, если уже доступны аналогичные номенклатуры. Данная стратегия допустима только в том случае, если в поле **Тип работы** указано значение *Размещение*. В стандартной настройке размещения система пытается выполнить консолидацию по первой строке действия, а затем во второй строке действия она попытается выполнить операцию без консолидации. Консолидация товаров делает более эффективной последующую комплектацию.</li><li>**Резервирование партии по FEFO** — эта стратегия используется, когда запасы размещаются по дате окончания срока действия партии и выделяются для резервирования партии. Стратегия резервирования партии по принципу «в порядке истечения срока годности» (FEFO) также используется при распределении запасов посредством использования даты окончания срока годности партии помимо окончания срока действия. Эту стратегию можно использовать только для номенклатур с поддержкой партий. Данная стратегия допустима только в том случае, если в поле **Тип работы** указано значение *Комплектация*. При выборе этой стратегии переопределяется любая сортировка запросов для примененных номеров партии.</li><li>**Округлить до полного НЗ** — эта стратегия используется для округления количества запасов до количества по грузоместу, назначенного комплектуемым номенклатурам. Эта стратегия может использоваться только для типа пополнения директив местонахождения, и только в том случае, когда в поле **Тип работы** установлено значение *Комплектация*.</li><li>**Пустое местонахождение без входящих работ** — эта стратегия используется для поиска пустых мест хранения. Местонахождение считается пустым если в нем нет физических запасов и ожидаемой входящей работы. Данная стратегия допустима только в том случае, если в поле **Тип работы** указано значение *Размещение*.</li></ul> |

## <a name="example-of-the-use-of-location-directives"></a>Пример использования директив для мест хранения

В этом примере мы рассмотрим процедуру, связанную с заказом на покупку, когда директива для места хранения должна найти на складе свободное место для складируемых номенклатур, которые только что были зарегистрированы в доке приемки. Во-первых, нужно попытаться найти свободное место на складе путем консолидации с существующими запасами в наличии. Если консолидация невозможна, нужно найти пустое место хранения.

Для этого сценария необходимо определить два действия директивы для места хранения. Первое действие в последовательности должно использовать стратегию **Консолидировать**, а второе — **Пустое расположение без входящей работы**. Если не определено третье действие для обработки сценария переполнения, возможны два результата, если места на складе нет: работа будет создана, несмотря на отсутствие определенных мест хранения, либо процесс создания работы завершится сбоем. Результат определяется настройкой страницы **Ошибки указания местонахождения**, где можно определить, нужно ли выбирать параметр **Прекратить работу при сбое директивы местонахождения** для каждого типа заказа на работу.

## <a name="next-step"></a>Далее

После создания директив местонахождения можно связать каждый код директивы с кодом шаблона работы для создания работы. Дополнительные сведения см. в разделе [Контроль работы склада с использованием шаблонов работы и директив местонахождения](https://docs.microsoft.com/dynamics365/supply-chain/warehousing/control-warehouse-location-directives).

## <a name="technical-information-for-system-admins"></a>Техническая информация для системных администраторов

При отсутствии доступа к страницам, которые необходимы для выполнения этой задачи, свяжитесь с системным администратором и предоставьте сведения, представленные в следующей таблице.

| Категория | Необходимые условия |
|---|---|
| Конфигурационные ключи | Перейдите в раздел **Администрирование системы \> Настройка \> Конфигурация лицензии**. Разверните лицензионный ключ **Торговля** и выберите ключ конфигурации **Управление складом и транспортировкой**. |
