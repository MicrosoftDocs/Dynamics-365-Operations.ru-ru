---
title: Настройка политик консолидации отгрузок
description: В этом разделе описан порядок настройки политик консолидации отгрузок по умолчанию и настраиваемые.
author: GarmMSFT
manager: tfehr
ms.date: 05/12/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: WHSShipConsolidationPolicy, WHSShipConsolidationWorkbench, WHSFilterGroupTable, TMSMode, WHSShipmentConsolidation, WHSFilterGenerallyAvail
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: kamaybac
ms.search.validFrom: 2020-05-01
ms.dyn365.ops.version: 10.0.3
ms.openlocfilehash: adb88bbd29a89a1d18d7fd4781c2541ffb4e721f
ms.sourcegitcommit: 827d77c638555396b32d36af5d22d1b61dafb0e8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/16/2020
ms.locfileid: "4436382"
---
# <a name="configure-shipment-consolidation-policies"></a><span data-ttu-id="cb987-103">Настройка политик консолидации отгрузок</span><span class="sxs-lookup"><span data-stu-id="cb987-103">Configure shipment consolidation policies</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="cb987-104">Процесс консолидации отгрузок, использующий политики консолидации отгрузок, позволяет использовать автоматическую консолидацию отгрузок во время автоматического и ручного запуска на склад.</span><span class="sxs-lookup"><span data-stu-id="cb987-104">The shipment consolidation process that uses shipment consolidation policies allows for automated shipment consolidation during automated and manual release to the warehouse.</span></span> <span data-ttu-id="cb987-105">После включения этой функции необходимо настроить исходные политики.</span><span class="sxs-lookup"><span data-stu-id="cb987-105">After you turn on this feature, you must configure your initial policies.</span></span> <span data-ttu-id="cb987-106">Если не настроены никакие политики, каждая строка продажи будет создавать отдельную отгрузку, имеющую одну строку загрузки.</span><span class="sxs-lookup"><span data-stu-id="cb987-106">If no policies are configured, each sales line will generate a separate shipment that has a single load line.</span></span>

<span data-ttu-id="cb987-107">Сценарии, представленные в этом разделе, показывают порядок настройки политик консолидации по умолчанию и настраиваемых.</span><span class="sxs-lookup"><span data-stu-id="cb987-107">The scenarios that are presented in this topic show how to set up default and custom shipment consolidation policies.</span></span>

## <a name="turn-on-the-shipment-consolidation-policies-feature"></a><span data-ttu-id="cb987-108">Включение функции политик консолидации отгрузок</span><span class="sxs-lookup"><span data-stu-id="cb987-108">Turn on the Shipment consolidation policies feature</span></span>

> [!IMPORTANT]
> <span data-ttu-id="cb987-109">В [первом сценарии](#scenario-1), описанном в этом разделе, необходимо сначала настроить склад, чтобы он использовал предыдущую функцию консолидации отгрузок.</span><span class="sxs-lookup"><span data-stu-id="cb987-109">In the [first scenario](#scenario-1) that is described in this topic, you will first set up a warehouse so that it uses the earlier shipment consolidation feature.</span></span> <span data-ttu-id="cb987-110">После этого можно будет использовать политики консолидации отгрузок.</span><span class="sxs-lookup"><span data-stu-id="cb987-110">You will then make shipment consolidation policies available.</span></span> <span data-ttu-id="cb987-111">Таким образом можно познакомиться с работой сценария обновления.</span><span class="sxs-lookup"><span data-stu-id="cb987-111">In this way, you can experience how the upgrade scenario works.</span></span> <span data-ttu-id="cb987-112">Если вы планируете использовать среду демонстрационных данных для выполнения первого сценария, не включайте эту функцию перед выполнением сценария.</span><span class="sxs-lookup"><span data-stu-id="cb987-112">If you plan to use a demo data environment to go through the first scenario, don't turn on the feature before you do the scenario.</span></span>

<span data-ttu-id="cb987-113">Прежде чем можно будет использовать функцию *политики консолидации отгрузок*, необходимо включить ее в вашей системе.</span><span class="sxs-lookup"><span data-stu-id="cb987-113">Before you can use the *Shipment consolidation policies* feature, you must turn it on in your system.</span></span> <span data-ttu-id="cb987-114">Администраторы могут использовать параметры [управления компонентами](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) для проверки статуса функции и ее включения.</span><span class="sxs-lookup"><span data-stu-id="cb987-114">Admins can use the [feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) settings to check the status of the feature and turn it on.</span></span> <span data-ttu-id="cb987-115">В рабочей области **Управление функциями** эта функция перечисляется следующими способами:</span><span class="sxs-lookup"><span data-stu-id="cb987-115">In the **Feature management** workspace, the feature is listed in the following way:</span></span>

- <span data-ttu-id="cb987-116">**Модуль:** *Управление складом*</span><span class="sxs-lookup"><span data-stu-id="cb987-116">**Module:** *Warehouse management*</span></span>
- <span data-ttu-id="cb987-117">**Имя компонента:** *Консолидация отгрузок*</span><span class="sxs-lookup"><span data-stu-id="cb987-117">**Feature name:** *Consolidate shipment*</span></span>

## <a name="make-demo-data-available"></a><span data-ttu-id="cb987-118">Сделать демонстрационные данные доступными</span><span class="sxs-lookup"><span data-stu-id="cb987-118">Make demo data available</span></span>

<span data-ttu-id="cb987-119">Каждый сценарий в этом разделе ссылается на значения и записи, включенные в стандартные демонстрационные данные, предоставляемые в Microsoft Dynamics 365 Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="cb987-119">Each scenario in this topic references values and records that are included in the standard demo data that is provided for Microsoft Dynamics 365 Supply Chain Management.</span></span> <span data-ttu-id="cb987-120">Если вы хотите использовать значения, указанные здесь, в ходе выполнения упражнений, убедитесь, что вы работаете в среде, в которой установлены демонстрационные данные, и настройте юридическое лицо на **USMF** перед началом работы.</span><span class="sxs-lookup"><span data-stu-id="cb987-120">If you want to use the values that are provided here as you do the exercises, be sure to work in an environment where the demo data is installed, and set the legal entity to **USMF** before you begin.</span></span>

## <a name="scenario-1-configure-default-shipment-consolidation-policies"></a><a name="scenario-1"></a><span data-ttu-id="cb987-121">Сценарий 1: настройка политик консолидации отгрузок по умолчанию</span><span class="sxs-lookup"><span data-stu-id="cb987-121">Scenario 1: Configure default shipment consolidation policies</span></span>

<span data-ttu-id="cb987-122">Имеется две ситуации, когда необходимо настроить минимальное количество политик по умолчанию после включения функции *политики консолидации отгрузок*:</span><span class="sxs-lookup"><span data-stu-id="cb987-122">There are two situations where you must configure the minimum number of default policies after you turn on the *Shipment consolidation policies* feature:</span></span>

- <span data-ttu-id="cb987-123">Выполняется обновление среды, которая уже содержит данные.</span><span class="sxs-lookup"><span data-stu-id="cb987-123">You're upgrading an environment that already contains data.</span></span>
- <span data-ttu-id="cb987-124">Выполняется настройка абсолютно новой среды.</span><span class="sxs-lookup"><span data-stu-id="cb987-124">You're setting up a completely new environment.</span></span>

### <a name="upgrade-an-environment-where-warehouses-are-already-configured-for-cross-order-consolidation"></a><span data-ttu-id="cb987-125">Обновление среды, в которой склады уже настроены для консолидации между заказами</span><span class="sxs-lookup"><span data-stu-id="cb987-125">Upgrade an environment where warehouses are already configured for cross-order consolidation</span></span>

<span data-ttu-id="cb987-126">При запуске этой процедуры следует выключить *политику консолидации отгрузок*, чтобы смоделировать среду, в которой уже использовалась базовая функция консолидации между заказами.</span><span class="sxs-lookup"><span data-stu-id="cb987-126">When you start this procedure, the *Shipment consolidation policies* feature should be turned off, to simulate an environment where the basic cross-order consolidation feature was already used.</span></span> <span data-ttu-id="cb987-127">Затем можно использовать управление функциями, чтобы включить функцию, чтобы можно было изучить настройку политик консолидации отгрузок после обновления.</span><span class="sxs-lookup"><span data-stu-id="cb987-127">You will then use feature management to turn on the feature, so that you can learn how to set up shipment consolidation policies after the upgrade.</span></span>

<span data-ttu-id="cb987-128">Выполните следующие действия, чтобы настроить политики консолидации отгрузок по умолчанию в среде, в которой склады уже настроены для консолидации между заказами.</span><span class="sxs-lookup"><span data-stu-id="cb987-128">Follow these steps to set up default shipment consolidation policies in an environment where warehouses have already been configured for cross-order consolidation.</span></span>

1. <span data-ttu-id="cb987-129">Перейдите в раздел **Управление складом \> Настройка \> Склад \> Склады**.</span><span class="sxs-lookup"><span data-stu-id="cb987-129">Go to **Warehouse management \> Setup \> Warehouse \> Warehouses**.</span></span>
1. <span data-ttu-id="cb987-130">В списке найдите и откройте нужную запись склада (например, склад *24* в демонстрационных данных **USMF**).</span><span class="sxs-lookup"><span data-stu-id="cb987-130">In the list, find and open the desired warehouse record (for example, warehouse *24* in the **USMF** demo data).</span></span>
1. <span data-ttu-id="cb987-131">На панели операций выберите **Правка**.</span><span class="sxs-lookup"><span data-stu-id="cb987-131">On the Action Pane, select **Edit**.</span></span>
1. <span data-ttu-id="cb987-132">На Экспресс-вкладке **Склад** установите для параметра **Консолидировать отгрузку перед запуском на склад** значение *Да*.</span><span class="sxs-lookup"><span data-stu-id="cb987-132">On the **Warehouse** FastTab, set the **Consolidate shipment at release to warehouse** option to *Yes*.</span></span>
1. <span data-ttu-id="cb987-133">Повторите шаги со 2 по 4 для всех других складов, где необходимо выполнить консолидацию.</span><span class="sxs-lookup"><span data-stu-id="cb987-133">Repeat steps 2 through 4 for all other warehouses where consolidation is required.</span></span>
1. <span data-ttu-id="cb987-134">Закройте страницу.</span><span class="sxs-lookup"><span data-stu-id="cb987-134">Close the page.</span></span>
1. <span data-ttu-id="cb987-135">Используйте [Управление функциями](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) для включения функции *политики консолидации отгрузок*.</span><span class="sxs-lookup"><span data-stu-id="cb987-135">Use [feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) to turn on the *Shipment consolidation policies* feature.</span></span> <span data-ttu-id="cb987-136">В рабочей области **Управление функциями** функция называется *Консолидация отгрузки*.</span><span class="sxs-lookup"><span data-stu-id="cb987-136">In the **Feature management** workspace, the feature is named *Consolidate shipment*.</span></span>
1. <span data-ttu-id="cb987-137">Перейдите на страницу **Управление складом \> Настройка \> Запуск на склад \> политики консолидации отгрузок**.</span><span class="sxs-lookup"><span data-stu-id="cb987-137">Go to **Warehouse management \> Setup \> Release to warehouse \> Shipment consolidation policies**.</span></span> <span data-ttu-id="cb987-138">Возможно, потребуется обновить браузер, чтобы увидеть новый пункт меню **Политики консолидации отгрузок** после включения функции.</span><span class="sxs-lookup"><span data-stu-id="cb987-138">You might have to refresh your browser to see the new **Shipment consolidation policies** menu item after you turn on the feature.</span></span>
1. <span data-ttu-id="cb987-139">На панели операций выберите **создать настройку по умолчанию** для создания следующих политик:</span><span class="sxs-lookup"><span data-stu-id="cb987-139">On the Action Pane, select **Create default setup** to create the following policies:</span></span>

    - <span data-ttu-id="cb987-140">Политика **CrossOrder** для типа политики *Заказы на продажу* (при условии, что имеется хотя бы один склад, настроенный для использования более ранней функции консолидации)</span><span class="sxs-lookup"><span data-stu-id="cb987-140">A **CrossOrder** policy for the *Sales orders* policy type (provided that you have at least one warehouse that is set up to use the earlier consolidation feature)</span></span>
    - <span data-ttu-id="cb987-141">Политика **по умолчанию** для типа политики *Заказы на продажу*</span><span class="sxs-lookup"><span data-stu-id="cb987-141">A **Default** policy for the *Sales orders* policy type</span></span>
    - <span data-ttu-id="cb987-142">Политика **по умолчанию** для типа политики *Выдача на перемещение*</span><span class="sxs-lookup"><span data-stu-id="cb987-142">A **Default** policy for the *Transfer issue* policy type</span></span>
    - <span data-ttu-id="cb987-143">Политика **CrossOrder** для типа политики *Выдача на перемещение* (при условии, что имеется хотя бы один склад, настроенный для использования более ранней функции консолидации)</span><span class="sxs-lookup"><span data-stu-id="cb987-143">A **CrossOrder** policy for the *Transfer issue* policy type (provided you have at least one warehouse that is set up to use the earlier consolidation feature)</span></span>

    > [!NOTE]
    > - <span data-ttu-id="cb987-144">Обе политики **CrossOrder** рассматривает тот же набор полей, что и предыдущая логика, за исключением поля для номера заказа.</span><span class="sxs-lookup"><span data-stu-id="cb987-144">Both **CrossOrder** policies consider the same set of fields as the earlier logic, except for the field for the order number.</span></span> <span data-ttu-id="cb987-145">(Это поле используется для консолидации строк в отгрузку на основе таких факторов, как склад, режим транспортировки поставки и адрес.)</span><span class="sxs-lookup"><span data-stu-id="cb987-145">(That field is used to consolidate lines into shipments, based on factors such as the warehouse, transportation mode of delivery, and address.)</span></span>
    > - <span data-ttu-id="cb987-146">Обе политики **По умолчанию** рассматривает тот же набор полей, что и предыдущая логика, включая поля для номера заказа.</span><span class="sxs-lookup"><span data-stu-id="cb987-146">Both **Default** policies consider the same set of fields as the earlier logic, including the field for the order number.</span></span> <span data-ttu-id="cb987-147">(Это поле используется для консолидации строк в отгрузку на основе таких факторов, как номер заказа, склад, режим транспортировки поставки и адрес.)</span><span class="sxs-lookup"><span data-stu-id="cb987-147">(That field is used to consolidate lines into shipments, based on factors such as the order number, warehouse, transportation mode of delivery, and address.)</span></span>

1. <span data-ttu-id="cb987-148">Выберите политику **CrossOrder** для типа политики *заказы на продажу*, а затем на панели операций выберите **изменить запрос**.</span><span class="sxs-lookup"><span data-stu-id="cb987-148">Select the **CrossOrder** policy for the *Sales orders* policy type, and then, on the Action Pane, select **Edit query**.</span></span>
1. <span data-ttu-id="cb987-149">В диалоговом окне Редактор запросов обратите внимание, что перечисляются склады, где параметр **Консолидировать отгрузку перед запуском на склад** установлен на *Да*.</span><span class="sxs-lookup"><span data-stu-id="cb987-149">In the query editor dialog box, notice that warehouses where the **Consolidate shipment at release to warehouse** option is set to *Yes* are listed.</span></span> <span data-ttu-id="cb987-150">Поэтому они включаются в запрос.</span><span class="sxs-lookup"><span data-stu-id="cb987-150">Therefore, they are included in the query.</span></span>

### <a name="create-default-policies-for-a-new-environment"></a><span data-ttu-id="cb987-151">Создание политик по умолчанию для новой среды</span><span class="sxs-lookup"><span data-stu-id="cb987-151">Create default policies for a new environment</span></span>

<span data-ttu-id="cb987-152">Выполните следующие действия, чтобы настроить политики консолидации отгрузок по умолчанию в новой среде.</span><span class="sxs-lookup"><span data-stu-id="cb987-152">Follow these steps to set up default shipment consolidation policies in a brand-new environment.</span></span>

1. <span data-ttu-id="cb987-153">Используйте [Управление функциями](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) для включения функции *политики консолидации отгрузок*, если вы ее еще не включили.</span><span class="sxs-lookup"><span data-stu-id="cb987-153">Use [feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) to turn on the *Shipment consolidation policies* feature, if you haven't already turned it on.</span></span> <span data-ttu-id="cb987-154">В рабочей области **Управление функциями** функция называется *Консолидация отгрузки*.</span><span class="sxs-lookup"><span data-stu-id="cb987-154">In the **Feature management** workspace, the feature is named *Consolidate shipment*.</span></span>
1. <span data-ttu-id="cb987-155">Перейдите на страницу **Управление складом \> Настройка \> Запуск на склад \> политики консолидации отгрузок**.</span><span class="sxs-lookup"><span data-stu-id="cb987-155">Go to **Warehouse management \> Setup \> Release to warehouse \> Shipment consolidation policies**.</span></span>
1. <span data-ttu-id="cb987-156">На панели операций выберите **создать настройку по умолчанию** для создания следующих политик:</span><span class="sxs-lookup"><span data-stu-id="cb987-156">On the Action Pane, select **Create default setup** to create the following policies:</span></span>

    - <span data-ttu-id="cb987-157">Политика **по умолчанию** для типа политики *Заказы на продажу*</span><span class="sxs-lookup"><span data-stu-id="cb987-157">A **Default** policy for the *Sales orders* policy type</span></span>
    - <span data-ttu-id="cb987-158">Политика **по умолчанию** для типа политики *Выдача на перемещение*</span><span class="sxs-lookup"><span data-stu-id="cb987-158">A **Default** policy for the *Transfer issue* policy type</span></span>

    > [!NOTE]
    > <span data-ttu-id="cb987-159">Обе политики **По умолчанию** рассматривает тот же набор полей, что и предыдущая логика, включая поля для номера заказа.</span><span class="sxs-lookup"><span data-stu-id="cb987-159">Both **Default** policies consider the same set of fields as the earlier logic, including the field for the order number.</span></span> <span data-ttu-id="cb987-160">(Это поле используется для консолидации строк в отгрузку на основе таких факторов, как номер заказа, склад, режим транспортировки поставки и адрес.)</span><span class="sxs-lookup"><span data-stu-id="cb987-160">(That field is used to consolidate lines into shipments, based on factors such as the order number, warehouse, transportation mode of delivery, and address.)</span></span>

## <a name="scenario-2-configure-custom-shipment-consolidation-policies"></a><span data-ttu-id="cb987-161">Сценарий 2: настройка пользовательских политик консолидации отгрузок</span><span class="sxs-lookup"><span data-stu-id="cb987-161">Scenario 2: Configure custom shipment consolidation policies</span></span>

<span data-ttu-id="cb987-162">В этом сценарии показано, как настроить пользовательские политики консолидации отгрузок.</span><span class="sxs-lookup"><span data-stu-id="cb987-162">This scenario shows how to set up custom shipment consolidation policies.</span></span> <span data-ttu-id="cb987-163">Пользовательские политики могут поддерживать сложные бизнес-требования, когда консолидация отгрузки зависит от нескольких условий.</span><span class="sxs-lookup"><span data-stu-id="cb987-163">Custom policies can support complex business requirements where shipment consolidation depends on several conditions.</span></span> <span data-ttu-id="cb987-164">Для каждого примера политики позже в этом сценарии включается краткое описание экономического обоснования.</span><span class="sxs-lookup"><span data-stu-id="cb987-164">For each example policy later in this scenario, a short description of the business case is included.</span></span> <span data-ttu-id="cb987-165">Эти политики должны быть настроены в последовательности, которая обеспечивает оценку запросов в виде пирамиды.</span><span class="sxs-lookup"><span data-stu-id="cb987-165">These example policies should be set up in a sequence that ensures a pyramid-like evaluation of the queries.</span></span> <span data-ttu-id="cb987-166">(Иными словами, политики, имеющие наибольшее количество условий, должны оцениваться как имеющие наивысший приоритет.)</span><span class="sxs-lookup"><span data-stu-id="cb987-166">(In other words, the policies that have the most conditions should be evaluated as having the highest priority.)</span></span>

### <a name="turn-on-the-feature-and-prepare-master-data-for-this-scenario"></a><span data-ttu-id="cb987-167">Включите функцию и приготовьте основные данные для этого сценария</span><span class="sxs-lookup"><span data-stu-id="cb987-167">Turn on the feature and prepare master data for this scenario</span></span>

<span data-ttu-id="cb987-168">Прежде чем выполнять упражнения из этого сценария, необходимо включить функцию и подготовить основные данные, необходимые для выполнения фильтрации, как описано в следующих подразделах.</span><span class="sxs-lookup"><span data-stu-id="cb987-168">Before you can go through the exercises in this scenario, you must turn on the feature and prepare the master data that is required to do the filtering, as described in the following subsections.</span></span> <span data-ttu-id="cb987-169">(Эти компоненты также применимы к сценариям, перечисленным в [Примеры сценариев использования политик консолидации отгрузок](#example-scenarios).)</span><span class="sxs-lookup"><span data-stu-id="cb987-169">(These prerequisites also apply to the scenarios listed in [Example scenarios of how to use shipment consolidation policies](#example-scenarios).)</span></span>

#### <a name="turn-on-the-feature-and-create-the-default-policies"></a><span data-ttu-id="cb987-170">Включите функцию и создайте политики по умолчанию</span><span class="sxs-lookup"><span data-stu-id="cb987-170">Turn on the feature and create the default policies</span></span>

<span data-ttu-id="cb987-171">Используйте управление функциями, чтобы включить функцию, если она еще не была включена, и создайте политики консолидации по умолчанию, которые описаны в [сценарии 1](#scenario-1).</span><span class="sxs-lookup"><span data-stu-id="cb987-171">Use feature management to turn on the feature, if you haven't already turned it on, and create the default consolidation polices that are described in [scenario 1](#scenario-1).</span></span>

#### <a name="create-two-new-product-filter-codes"></a><span data-ttu-id="cb987-172">Создание двух новых кодов фильтров продуктов</span><span class="sxs-lookup"><span data-stu-id="cb987-172">Create two new product filter codes</span></span>

1. <span data-ttu-id="cb987-173">Перейдите на страницу **Управление складом \> Настройка \> Фильтры продуктов \> Фильтры продуктов** и добавьте два фильтра продуктов:</span><span class="sxs-lookup"><span data-stu-id="cb987-173">Go to **Warehouse management \> Setup \> Product filters \> Product filters**, and add two product filters:</span></span>

    - <span data-ttu-id="cb987-174">Фильтр продуктов 1:</span><span class="sxs-lookup"><span data-stu-id="cb987-174">Product filter 1:</span></span>

        - <span data-ttu-id="cb987-175">**Код фильтра:** *Воспламеняющиеся*</span><span class="sxs-lookup"><span data-stu-id="cb987-175">**Filter code:** *Flammable*</span></span>
        - <span data-ttu-id="cb987-176">**Заголовок фильтра:** *Код 4*</span><span class="sxs-lookup"><span data-stu-id="cb987-176">**Filter title:** *Code 4*</span></span>

    - <span data-ttu-id="cb987-177">Фильтр продуктов 2:</span><span class="sxs-lookup"><span data-stu-id="cb987-177">Product filter 2:</span></span>

        - <span data-ttu-id="cb987-178">**Код фильтра:** *Взрывоопасные*</span><span class="sxs-lookup"><span data-stu-id="cb987-178">**Filter code:** *Explosive*</span></span>
        - <span data-ttu-id="cb987-179">**Заголовок фильтра:** *Код 4*</span><span class="sxs-lookup"><span data-stu-id="cb987-179">**Filter title:** *Code 4*</span></span>

1. <span data-ttu-id="cb987-180">Выберите **Управление сведениями о продукте \> Продукты \> Выпущенные продукты**.</span><span class="sxs-lookup"><span data-stu-id="cb987-180">Go to **Product information management \> Products \> Released products**.</span></span>
1. <span data-ttu-id="cb987-181">Откройте продукт, который имеет код номенклатуры *M9200*.</span><span class="sxs-lookup"><span data-stu-id="cb987-181">Open the product that has item number *M9200*.</span></span> <span data-ttu-id="cb987-182">(Выбранный продукт должен быть активирован для расширенных процессов склада \[WMS\] и этот продукт заранее включен для процессов WMS в демонстрационных данных **USMF**.)</span><span class="sxs-lookup"><span data-stu-id="cb987-182">(The product that you select must be enabled for advanced warehouse \[WMS\] processes, and this product is pre-enabled for WMS processes in the **USMF** demo data.)</span></span>
1. <span data-ttu-id="cb987-183">На Экспресс-вкладке **склад** установите для поля **Код 4** значение *Воспламеняющиеся*.</span><span class="sxs-lookup"><span data-stu-id="cb987-183">On the **Warehouse** FastTab, set the **Code 4** field to *Flammable*.</span></span>
1. <span data-ttu-id="cb987-184">Закройте страницу.</span><span class="sxs-lookup"><span data-stu-id="cb987-184">Close the page.</span></span>
1. <span data-ttu-id="cb987-185">Откройте продукт, который имеет код номенклатуры *M9201*.</span><span class="sxs-lookup"><span data-stu-id="cb987-185">Open the product that has item number *M9201*.</span></span> <span data-ttu-id="cb987-186">(Этот продукт также заранее включен для процессов WMS в демонстрационные данных **USMF**.)</span><span class="sxs-lookup"><span data-stu-id="cb987-186">(This product is also pre-enabled for WMS processes in the in the **USMF** demo data.)</span></span>
1. <span data-ttu-id="cb987-187">На Экспресс-вкладке **склад** установите для поля **Код 4** значение *Взрывоопасные*.</span><span class="sxs-lookup"><span data-stu-id="cb987-187">On the **Warehouse** FastTab, set the **Code 4** field to *Explosive*.</span></span>
1. <span data-ttu-id="cb987-188">Закройте страницу.</span><span class="sxs-lookup"><span data-stu-id="cb987-188">Close the page.</span></span>

#### <a name="create-a-new-transportation-mode-of-delivery"></a><span data-ttu-id="cb987-189">Создайте новый режим транспортировки поставки</span><span class="sxs-lookup"><span data-stu-id="cb987-189">Create a new transportation mode of delivery</span></span>

1. <span data-ttu-id="cb987-190">Перейдите в раздел **Управление транспортировкой \> \> Настройка \> Перевозчики**.</span><span class="sxs-lookup"><span data-stu-id="cb987-190">Go to **Transportation management \> Setup \> Carriers \> Mode**.</span></span>
1. <span data-ttu-id="cb987-191">Создайте режим транспортировки, который будет использоваться в запросах консолидации, и назовите его *Airways*.</span><span class="sxs-lookup"><span data-stu-id="cb987-191">Create a transportation mode that will be used in consolidation queries, and name it *Airways*.</span></span>
1. <span data-ttu-id="cb987-192">Перейдите в раздел **Управление транспортировкой \> Настройка \> Перевозчики \> Перевозчики, осуществляющий доставку**.</span><span class="sxs-lookup"><span data-stu-id="cb987-192">Go to **Transportation management \> Setup \> Carriers \> Shipping carriers**.</span></span>
1. <span data-ttu-id="cb987-193">Создайте перевозчика со следующими параметрами:</span><span class="sxs-lookup"><span data-stu-id="cb987-193">Create a carrier that has the following settings:</span></span>

    - <span data-ttu-id="cb987-194">**Перевозчик, осуществляющий доставку:** *Airways*</span><span class="sxs-lookup"><span data-stu-id="cb987-194">**Shipping carrier:** *Airways*</span></span>
    - <span data-ttu-id="cb987-195">**Имя:** *Airways*</span><span class="sxs-lookup"><span data-stu-id="cb987-195">**Name:** *Airways*</span></span>
    - <span data-ttu-id="cb987-196">**Режим:** *Airways*</span><span class="sxs-lookup"><span data-stu-id="cb987-196">**Mode:** *Airways*</span></span>

1. <span data-ttu-id="cb987-197">На Экспресс-вкладке **службы** для нового перевозчика добавьте строку со следующими параметрами:</span><span class="sxs-lookup"><span data-stu-id="cb987-197">On the **Services** FastTab for the new carrier, add a row that has the following settings:</span></span>

    - <span data-ttu-id="cb987-198">**Услуга перевозчика:** *Air*</span><span class="sxs-lookup"><span data-stu-id="cb987-198">**Carrier service:** *Air*</span></span>
    - <span data-ttu-id="cb987-199">**способ транспортировки:** *Air*</span><span class="sxs-lookup"><span data-stu-id="cb987-199">**Transportation method:** *Air*</span></span>

1. <span data-ttu-id="cb987-200">На панели операций выберите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="cb987-200">On the Action Pane, select **Save**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="cb987-201">При сохранении нового перевозчика в поле **Способ поставки** для новой строки в сетке **услуг** автоматически устанавливается значение *Airwa-Air*.</span><span class="sxs-lookup"><span data-stu-id="cb987-201">When you save the new carrier, the **Mode of delivery** field for the new row in the **Services** grid is automatically set to *Airwa-Air*.</span></span> <span data-ttu-id="cb987-202">При использовании способа поставки *Airwa-Air* для заказа на продажу, режим транспортировки *Airways* будет использоваться для соответствующих отгрузок.</span><span class="sxs-lookup"><span data-stu-id="cb987-202">When you use the *Airwa-Air* mode of delivery for a sales order, the *Airways* transportation mode will be used for related shipments.</span></span>

#### <a name="create-an-order-pool"></a><span data-ttu-id="cb987-203">Создание кластера заказов</span><span class="sxs-lookup"><span data-stu-id="cb987-203">Create an order pool</span></span>

1. <span data-ttu-id="cb987-204">Перейдите в раздел **Продажи и маркетинг \> Настройка \> Заказы на продажу \> Кластеры заказа**.</span><span class="sxs-lookup"><span data-stu-id="cb987-204">Go to **Sales and marketing \> Setup \> Sales orders \> Order pools**.</span></span>
1. <span data-ttu-id="cb987-205">Создание кластера заказов, который будет использоваться для запроса консолидации.</span><span class="sxs-lookup"><span data-stu-id="cb987-205">Create an order pool that will be used for the consolidation query.</span></span> <span data-ttu-id="cb987-206">Этот кластер заказов должен иметь следующие параметры:</span><span class="sxs-lookup"><span data-stu-id="cb987-206">This order pool should have the following settings:</span></span>

    - <span data-ttu-id="cb987-207">**Кластер:** Введите целое число, еще не используемое каким-либо другим кластером.</span><span class="sxs-lookup"><span data-stu-id="cb987-207">**Pool:** Enter an integer that isn't already used by any other pool.</span></span>
    - <span data-ttu-id="cb987-208">**Имя:** *ShipCons*</span><span class="sxs-lookup"><span data-stu-id="cb987-208">**Name:** *ShipCons*</span></span>

1. <span data-ttu-id="cb987-209">Перейдите в раздел **Продажи и маркетинг \> Клиенты \> Все клиенты**.</span><span class="sxs-lookup"><span data-stu-id="cb987-209">Go to **Sales and marketing \> Customers \> All customers**.</span></span>
1. <span data-ttu-id="cb987-210">Откройте клиента с номером счета *US-003*.</span><span class="sxs-lookup"><span data-stu-id="cb987-210">Open the customer that has account number *US-003*.</span></span>
1. <span data-ttu-id="cb987-211">На Экспресс-вкладке **заказ на продажу по умолчанию** задайте в поле **Кластер заказов на продажу** только что созданный кластер заказов.</span><span class="sxs-lookup"><span data-stu-id="cb987-211">On the **Sales order defaults** FastTab, set the **Sales order pool** field to the order pool that you just created.</span></span>
1. <span data-ttu-id="cb987-212">Закройте страницу и повторите шаги 4 и 5 для клиента с номером счета *US-004*.</span><span class="sxs-lookup"><span data-stu-id="cb987-212">Close the page, and then repeat the steps 4 and 5 for the customer that has account number *US-004*.</span></span>

### <a name="create-example-policy-1"></a><span data-ttu-id="cb987-213">Создайте пример политики 1</span><span class="sxs-lookup"><span data-stu-id="cb987-213">Create example policy 1</span></span>

<span data-ttu-id="cb987-214">В этом примере создается политика *Клиент + режим*, которая может использоваться для следующего экономического обоснования:</span><span class="sxs-lookup"><span data-stu-id="cb987-214">In this example, you will create a *Customer+Mode* policy that can be used for the following business case:</span></span>

- <span data-ttu-id="cb987-215">Эта политика будет запрашивать конкретный счет клиента (*US-001*) и конкретный способ поставки (*Airwa-Air*).</span><span class="sxs-lookup"><span data-stu-id="cb987-215">The policy will query for a specific customer account (*US-001*) and a specific mode of delivery (*Airwa-Air*).</span></span>
- <span data-ttu-id="cb987-216">Консолидация с открытыми отгрузками отключается.</span><span class="sxs-lookup"><span data-stu-id="cb987-216">Consolidation with open shipments is turned off.</span></span>
- <span data-ttu-id="cb987-217">Консолидация выполняется по коду заказов.</span><span class="sxs-lookup"><span data-stu-id="cb987-217">Consolidation is done per order ID.</span></span> <span data-ttu-id="cb987-218">(Иными словами, будут использоваться отдельные отгрузки по заказу, складу и так далее.)</span><span class="sxs-lookup"><span data-stu-id="cb987-218">(In other words, there will be separate shipments per order, warehouse, and so on.)</span></span>

<span data-ttu-id="cb987-219">Выполните следующие действия, чтобы создать политику консолидации отгрузок для этого экономического обоснования.</span><span class="sxs-lookup"><span data-stu-id="cb987-219">Follow these steps to create the shipment consolidation policy for this business case.</span></span>

1. <span data-ttu-id="cb987-220">Перейдите на страницу **Управление складом \> Настройка \> Запуск на склад \> политики консолидации отгрузок**.</span><span class="sxs-lookup"><span data-stu-id="cb987-220">Go to **Warehouse management \> Setup \> Release to warehouse \> Shipment consolidation policies**.</span></span>
1. <span data-ttu-id="cb987-221">Задайте в поле **Тип политики** значение *заказы на продажу*.</span><span class="sxs-lookup"><span data-stu-id="cb987-221">Set the **Policy type** field to *Sales orders*.</span></span>
1. <span data-ttu-id="cb987-222">На панели операций выберите **Создать**, чтобы создать политику со следующими настройками:</span><span class="sxs-lookup"><span data-stu-id="cb987-222">On the Action Pane, select **New** to create a policy that has the following settings:</span></span>

    - <span data-ttu-id="cb987-223">**Имя политики:** *CustomerMode*</span><span class="sxs-lookup"><span data-stu-id="cb987-223">**Policy name:** *CustomerMode*</span></span>
    - <span data-ttu-id="cb987-224">**Описание политики:** *счет клиента и способ поставки*</span><span class="sxs-lookup"><span data-stu-id="cb987-224">**Policy description:** *Customer account and mode of delivery*</span></span>

1. <span data-ttu-id="cb987-225">Оставьте параметр **Консолидация с открытыми отгрузками** с значением *нет*.</span><span class="sxs-lookup"><span data-stu-id="cb987-225">Leave the **Consolidate with open shipments** option set to *No*.</span></span>
1. <span data-ttu-id="cb987-226">На панели операций выберите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="cb987-226">On the Action Pane, select **Save**.</span></span>
1. <span data-ttu-id="cb987-227">На Экспресс-вкладке **поля консолидации** в списке **оставшиеся поля** выберите строку, где поле **Имя поля** установлено на значение *Способ поставки*.</span><span class="sxs-lookup"><span data-stu-id="cb987-227">On the **Consolidation fields** FastTab, in the **Remaining fields** list, select the row where the **Field name** field is set to *Mode of delivery*.</span></span>
1. <span data-ttu-id="cb987-228">Выберите кнопку **Добавить** ![Стрелка вправо](media/forward-button.png), чтобы переместить поле в список **Выбранные поля**.</span><span class="sxs-lookup"><span data-stu-id="cb987-228">Select the **Add** button ![Right arrow](media/forward-button.png) to move the field to the **Selected fields** list.</span></span>
1. <span data-ttu-id="cb987-229">На панели операций выберите **Изменить запрос**.</span><span class="sxs-lookup"><span data-stu-id="cb987-229">On the Action Pane, select **Edit query**.</span></span>
1. <span data-ttu-id="cb987-230">В диалоговом окне Редактор запросов на вкладке **диапазон** в сетке найдите строку, в которой поле **поле** имеет значение *счет клиента*, и установите для этой строки значение поля **критерий** на *US-001*.</span><span class="sxs-lookup"><span data-stu-id="cb987-230">In the query editor dialog box, on the **Range** tab, in the grid, find the row where the **Field** field is set to *Customer account*, and set the **Criteria** field for that row to *US-001*.</span></span>
1. <span data-ttu-id="cb987-231">Выберите **Добавить**, чтобы добавить строку со следующими настройками в сетку:</span><span class="sxs-lookup"><span data-stu-id="cb987-231">Select **Add** to add a row that has the following settings to the grid:</span></span>

    - <span data-ttu-id="cb987-232">**Таблица:** *строки заказа*</span><span class="sxs-lookup"><span data-stu-id="cb987-232">**Table:** *Order lines*</span></span>
    - <span data-ttu-id="cb987-233">**Производная таблица:** *строки заказа*</span><span class="sxs-lookup"><span data-stu-id="cb987-233">**Derived table:** *Order lines*</span></span>
    - <span data-ttu-id="cb987-234">**Поле:** *Способ поставки*</span><span class="sxs-lookup"><span data-stu-id="cb987-234">**Field:** *Mode of delivery*</span></span>
    - <span data-ttu-id="cb987-235">**Критерии:** *Airwa-Air*</span><span class="sxs-lookup"><span data-stu-id="cb987-235">**Criteria:** *Airwa-Air*</span></span>

1. <span data-ttu-id="cb987-236">Выберите **OK**, чтобы закрыть диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="cb987-236">Select **OK** to close the dialog box.</span></span>

> [!NOTE]
> <span data-ttu-id="cb987-237">Для этого экономического обоснования строки заказа для клиента *US-001*, в котором используется *Airwa-Air* режим поставки, не будут консолидированы по заказам.</span><span class="sxs-lookup"><span data-stu-id="cb987-237">For this business case, order lines for customer *US-001* that use the *Airwa-Air* mode of delivery won't be consolidated across orders.</span></span> <span data-ttu-id="cb987-238">Эта политика предназначена сначала для использования в тех случаях, когда отгрузки для всех других способов поставки консолидируются для данного клиента.</span><span class="sxs-lookup"><span data-stu-id="cb987-238">This policy is intended to be used first in a sequence, in cases where shipments for all other modes of delivery are consolidated for this customer.</span></span>

### <a name="create-example-policy-2"></a><span data-ttu-id="cb987-239">Создайте пример политики 2</span><span class="sxs-lookup"><span data-stu-id="cb987-239">Create example policy 2</span></span>

<span data-ttu-id="cb987-240">В этом примере создается политика *Опасные товары*, которая может использоваться для следующего экономического обоснования:</span><span class="sxs-lookup"><span data-stu-id="cb987-240">In this example, you will create a *Hazardous goods* policy that can be used for the following business case:</span></span>

- <span data-ttu-id="cb987-241">Эта политика будет запрашивать конкретный код фильтра (*опасные*) и конкретный способ поставки (*Airwa-Air*).</span><span class="sxs-lookup"><span data-stu-id="cb987-241">The policy will query for a specific filter code (*hazardous*) and a specific mode of delivery (*Airwa-Air*).</span></span>
- <span data-ttu-id="cb987-242">Консолидация с открытыми отгрузками включается.</span><span class="sxs-lookup"><span data-stu-id="cb987-242">Consolidation with open shipments is turned on.</span></span>
- <span data-ttu-id="cb987-243">Консолидация выполняется по заказам.</span><span class="sxs-lookup"><span data-stu-id="cb987-243">Consolidation is done across orders.</span></span> <span data-ttu-id="cb987-244">(Иными словами, будут отдельные отгрузки по каждому счету, складу и так далее, но только внутри номенклатурной группы, указанной в запросе.)</span><span class="sxs-lookup"><span data-stu-id="cb987-244">(In other words, there will be separate shipments per account, warehouse, and so on, but only within the item group that is specified in the query.)</span></span>

<span data-ttu-id="cb987-245">Выполните следующие действия, чтобы создать политику консолидации отгрузок для этого экономического обоснования.</span><span class="sxs-lookup"><span data-stu-id="cb987-245">Follow these steps to create the shipment consolidation policy for this business case.</span></span>

1. <span data-ttu-id="cb987-246">Перейдите на страницу **Управление складом \> Настройка \> Запуск на склад \> политики консолидации отгрузок**.</span><span class="sxs-lookup"><span data-stu-id="cb987-246">Go to **Warehouse management \> Setup \> Release to warehouse \> Shipment consolidation policies**.</span></span>
1. <span data-ttu-id="cb987-247">Задайте в поле **Тип политики** значение *заказы на продажу*.</span><span class="sxs-lookup"><span data-stu-id="cb987-247">Set the **Policy type** field to *Sales orders*.</span></span>
1. <span data-ttu-id="cb987-248">На панели операций выберите **Создать**, чтобы создать политику со следующими настройками:</span><span class="sxs-lookup"><span data-stu-id="cb987-248">On the Action Pane, select **New** to create a policy that has the following settings:</span></span>

    - <span data-ttu-id="cb987-249">**Имя политики:** *Тип номенклатуры*</span><span class="sxs-lookup"><span data-stu-id="cb987-249">**Policy name:** *Item type*</span></span>
    - <span data-ttu-id="cb987-250">**Описание политики:** *Консолидация одного и того же типа номенклатуры по заказам*</span><span class="sxs-lookup"><span data-stu-id="cb987-250">**Policy description:** *Consolidate the same type of item across orders*</span></span>

1. <span data-ttu-id="cb987-251">Задайте параметр **Консолидация с открытыми отгрузками** на значение *Да*.</span><span class="sxs-lookup"><span data-stu-id="cb987-251">Set the **Consolidate with open shipments** option to *Yes*.</span></span>
1. <span data-ttu-id="cb987-252">На панели операций выберите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="cb987-252">On the Action Pane, select **Save**.</span></span>
1. <span data-ttu-id="cb987-253">На Экспресс-вкладке **поля консолидации** в списке **оставшиеся поля** выберите строку, где поле **Имя поля** установлено на значение *Способ поставки*.</span><span class="sxs-lookup"><span data-stu-id="cb987-253">On the **Consolidation fields** FastTab, in the **Remaining fields** list, select the row where the **Field name** field is set to *Mode of delivery*.</span></span>
1. <span data-ttu-id="cb987-254">Выберите кнопку **Добавить** ![Стрелка вправо](media/forward-button.png), чтобы переместить поле в список **Выбранные поля**.</span><span class="sxs-lookup"><span data-stu-id="cb987-254">Select the **Add** button ![Right arrow](media/forward-button.png) to move the field to the **Selected fields** list.</span></span>
1. <span data-ttu-id="cb987-255">На панели операций выберите **Изменить запрос**.</span><span class="sxs-lookup"><span data-stu-id="cb987-255">On the Action Pane, select **Edit query**.</span></span>
1. <span data-ttu-id="cb987-256">В диалоговом окне Редактор запросов на вкладке **Соединения** разверните и выберите **таблицы \> Сведения о загрузке** в дереве.</span><span class="sxs-lookup"><span data-stu-id="cb987-256">In the query editor dialog box, on the **Joins** tab, expand and select **Tables \> Load details** in the tree.</span></span>
1. <span data-ttu-id="cb987-257">Выберите **Добавить соединение таблицы**.</span><span class="sxs-lookup"><span data-stu-id="cb987-257">Select **Add table join**.</span></span>
1. <span data-ttu-id="cb987-258">В сетке связей, которые отображаются, найдите и выберите строку, в которой в поле **Связь** указано значение *Код складской номенклатуры (код номенклатуры)*, а затем выберите **выбрать**.</span><span class="sxs-lookup"><span data-stu-id="cb987-258">In the grid of relations that appears, find and select the row where the **Relation** field is set to *Warehouse item number (Item number)*, and then select **Select**.</span></span> 
1. <span data-ttu-id="cb987-259">На вкладке **Диапазон** выберите **Добавить**, чтобы добавить строку со следующими настройками в сетку:</span><span class="sxs-lookup"><span data-stu-id="cb987-259">On the **Range** tab, select **Add** to add a row that has the following settings to the grid:</span></span>

    - <span data-ttu-id="cb987-260">**Таблица:** *код складской номенклатуры*</span><span class="sxs-lookup"><span data-stu-id="cb987-260">**Table:** *Warehouse item number*</span></span>
    - <span data-ttu-id="cb987-261">**Производная таблица:** *код складской номенклатуры*</span><span class="sxs-lookup"><span data-stu-id="cb987-261">**Derived table:** *Warehouse item number*</span></span>
    - <span data-ttu-id="cb987-262">**Поле:** *Код 4*</span><span class="sxs-lookup"><span data-stu-id="cb987-262">**Field:** *Code 4*</span></span>
    - <span data-ttu-id="cb987-263">**Критерий:** *Воспламеняющиеся*</span><span class="sxs-lookup"><span data-stu-id="cb987-263">**Criteria:** *Flammable*</span></span>

1. <span data-ttu-id="cb987-264">Выберите **OK**, чтобы закрыть диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="cb987-264">Select **OK** to close the dialog box.</span></span>

> [!NOTE]
> <span data-ttu-id="cb987-265">Для этого случая все строки заказа, для которых номенклатуры имеют специальный код фильтра (то есть код фильтра, где поле **код 4** устанавливается в *Воспламеняющиеся*), будет консолидирован с другими номенклатурами того же типа по заказам.</span><span class="sxs-lookup"><span data-stu-id="cb987-265">For this business case, all order lines where items have a specific filter code (that is, the filter code where the **Code 4** field is set to *Flammable*) will be consolidated with other items of the same type across orders.</span></span> <span data-ttu-id="cb987-266">Если имеется открытое отгрузка для того же счета, склада и группы номенклатур, к ней будут присоединены новые строки.</span><span class="sxs-lookup"><span data-stu-id="cb987-266">If there is an open shipment for the same account, warehouse, and group of items, the new lines will be attached to it.</span></span>

### <a name="create-example-policy-3"></a><span data-ttu-id="cb987-267">Создайте пример политики 3</span><span class="sxs-lookup"><span data-stu-id="cb987-267">Create example policy 3</span></span>

<span data-ttu-id="cb987-268">В этом примере создается политика *Требования клиентов*, которая может использоваться для следующего экономического обоснования:</span><span class="sxs-lookup"><span data-stu-id="cb987-268">In this example, you will create a *Customers' requirements* policy that can be used for the following business case:</span></span>

- <span data-ttu-id="cb987-269">Эта политика будет запрашивать конкретный счет клиента.</span><span class="sxs-lookup"><span data-stu-id="cb987-269">The policy will query for a specific customer account.</span></span>
- <span data-ttu-id="cb987-270">Консолидация с открытыми отгрузками включается.</span><span class="sxs-lookup"><span data-stu-id="cb987-270">Consolidation with open shipments is turned on.</span></span>
- <span data-ttu-id="cb987-271">Консолидация выполняется по заказам, но базируется на заявках клиента.</span><span class="sxs-lookup"><span data-stu-id="cb987-271">Consolidation is done across orders but is based on customer requisitions.</span></span> <span data-ttu-id="cb987-272">(Иными словами, несколько заказов будут сгруппированы в отгрузки на основе одного и того же номера заявки клиента и склада.)</span><span class="sxs-lookup"><span data-stu-id="cb987-272">(In other words, multiple orders will be grouped into shipments, based on the same customer requisition number and warehouse.)</span></span>

<span data-ttu-id="cb987-273">Выполните следующие действия, чтобы создать политику консолидации отгрузок для этого экономического обоснования.</span><span class="sxs-lookup"><span data-stu-id="cb987-273">Follow these steps to create the shipment consolidation policy for this business case.</span></span>

1. <span data-ttu-id="cb987-274">Перейдите на страницу **Управление складом \> Настройка \> Запуск на склад \> политики консолидации отгрузок**.</span><span class="sxs-lookup"><span data-stu-id="cb987-274">Go to **Warehouse management \> Setup \> Release to warehouse \> Shipment consolidation policies**.</span></span>
1. <span data-ttu-id="cb987-275">Задайте в поле **Тип политики** значение *заказы на продажу*.</span><span class="sxs-lookup"><span data-stu-id="cb987-275">Set the **Policy type** field to *Sales orders*.</span></span>
1. <span data-ttu-id="cb987-276">На панели операций выберите **Создать**, чтобы создать политику со следующими настройками:</span><span class="sxs-lookup"><span data-stu-id="cb987-276">On the Action Pane, select **New** to create a policy that has the following settings:</span></span>

    - <span data-ttu-id="cb987-277">**Имя политики:** *CustomerOrderNo*</span><span class="sxs-lookup"><span data-stu-id="cb987-277">**Policy name:** *CustomerOrderNo*</span></span>
    - <span data-ttu-id="cb987-278">**Описание политики:** *Консолидация строк на основе ЗП клиента*</span><span class="sxs-lookup"><span data-stu-id="cb987-278">**Policy description:** *Consolidate lines based on customer PO*</span></span>

1. <span data-ttu-id="cb987-279">Задайте параметр **Консолидация с открытыми отгрузками** на значение *Да*.</span><span class="sxs-lookup"><span data-stu-id="cb987-279">Set the **Consolidate with open shipments** option to *Yes*.</span></span>
1. <span data-ttu-id="cb987-280">На панели операций выберите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="cb987-280">On the Action Pane, select **Save**.</span></span>
1. <span data-ttu-id="cb987-281">На Экспресс-вкладке **поля консолидации** в списке **оставшиеся поля** выберите строку, где поле **Имя поля** установлено на значение *Заявка клиента*.</span><span class="sxs-lookup"><span data-stu-id="cb987-281">On the **Consolidation fields** FastTab, in the **Remaining fields** list, select the row where the **Field name** field is set to *Customer requisition*.</span></span>
1. <span data-ttu-id="cb987-282">Выберите кнопку **Добавить** ![Стрелка вправо](media/forward-button.png), чтобы переместить поле в список **Выбранные поля**.</span><span class="sxs-lookup"><span data-stu-id="cb987-282">Select the **Add** button ![Right arrow](media/forward-button.png) to move the field to the **Selected fields** list.</span></span>
1. <span data-ttu-id="cb987-283">В списке **оставшиеся поля** выберите строку, где поле **Имя поля** установлено на значение *Способ поставки*.</span><span class="sxs-lookup"><span data-stu-id="cb987-283">In the **Remaining fields** list, select the row where the **Field name** field is set to *Mode of delivery*.</span></span>
1. <span data-ttu-id="cb987-284">Выберите кнопку **Добавить** ![Стрелка вправо](media/forward-button.png), чтобы переместить поле в список **Выбранные поля**.</span><span class="sxs-lookup"><span data-stu-id="cb987-284">Select the **Add** button ![Right arrow](media/forward-button.png) to move the field to the **Selected fields** list.</span></span>
1. <span data-ttu-id="cb987-285">На панели операций выберите **Изменить запрос**.</span><span class="sxs-lookup"><span data-stu-id="cb987-285">On the Action Pane, select **Edit query**.</span></span>
1. <span data-ttu-id="cb987-286">В диалоговом окне Редактор запросов на вкладке **диапазон** найдите строку, в которой поле **поле** имеет значение *счет клиента*, и установите для этой строки значение поля **критерий** на *US-001*.</span><span class="sxs-lookup"><span data-stu-id="cb987-286">In the query editor dialog box, on the **Range** tab, find the row where the **Field** field is set to *Customer account*, and set the **Criteria** field for that row to *US-001*.</span></span>
1. <span data-ttu-id="cb987-287">Выберите **OK**, чтобы закрыть диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="cb987-287">Select **OK** to close the dialog box.</span></span>

> [!NOTE]
> <span data-ttu-id="cb987-288">Для этого экономического обоснования все строки заказа, в которых заказы на продажу имеют один и тот же номер заявки клиента, будут консолидированы в одну отгрузку, независимо от номера заказа на продажу.</span><span class="sxs-lookup"><span data-stu-id="cb987-288">For this business case, all order lines where sales orders have the same customer requisition number will be consolidated into one shipment, regardless of the sales order number.</span></span> <span data-ttu-id="cb987-289">(Номер заявки клиента используется в качестве заказа на покупку клиента Номер \[ЗП\].) Если имеется открытое отгрузка для этого счета, склада и заявки клиента, к ней будут прикреплены новые строки.</span><span class="sxs-lookup"><span data-stu-id="cb987-289">(The customer requisition number is used as the customer's purchase order \[PO\] number.) If there is an open shipment for the same account, warehouse, and customer requisition, the new lines will be attached to it.</span></span> <span data-ttu-id="cb987-290">Эта политика может использоваться, если клиент отправит дополнительные строки заказа с одним и тем же номером ЗП несколько раз в течение дня и хочет, чтобы все строки были сгруппированы в одну отгрузку.</span><span class="sxs-lookup"><span data-stu-id="cb987-290">This policy can be used if the customer sends additional order lines that have the same PO number several times during a day and wants all the lines to be grouped into one shipment.</span></span> <span data-ttu-id="cb987-291">(Иными словами, будет существовать одна транспортная накладная и одна отборочная накладная.)</span><span class="sxs-lookup"><span data-stu-id="cb987-291">(In other words, there will be one bill of lading and one packing slip.)</span></span>

### <a name="create-example-policy-4"></a><span data-ttu-id="cb987-292">Создайте пример политики 4</span><span class="sxs-lookup"><span data-stu-id="cb987-292">Create example policy 4</span></span>

<span data-ttu-id="cb987-293">В этом примере создается политика *Клиенты, разрешающие консолидацию*, которая может использоваться для следующего экономического обоснования:</span><span class="sxs-lookup"><span data-stu-id="cb987-293">In this example, you will create a *Customers allowing consolidation* policy that can be used for the following business case:</span></span>

- <span data-ttu-id="cb987-294">Эта политика выполнит запрос определенного кластера заказов для идентификации клиентов, которые будут принимать консолидированные отгрузки.</span><span class="sxs-lookup"><span data-stu-id="cb987-294">The policy will query for a specific order pool to identify customers who accept consolidated shipments.</span></span>
- <span data-ttu-id="cb987-295">Консолидация с открытыми отгрузками отключается.</span><span class="sxs-lookup"><span data-stu-id="cb987-295">Consolidation with open shipments is turned off.</span></span>
- <span data-ttu-id="cb987-296">Консолидация выполняется по заказам с использованием полей, выбранных политикой по умолчанию CrossOrder (для копирования ранее установленного флажка **Консолидировать отгрузку перед запуском на склад**).</span><span class="sxs-lookup"><span data-stu-id="cb987-296">Consolidation is done across orders using the fields selected by default CrossOrder policy (to replicate the previous **Consolidate shipment at release to warehouse** check box).</span></span>

- <span data-ttu-id="cb987-297">Можно переопределить правило в заказе на продажу, выбрав свой кластер заказов.</span><span class="sxs-lookup"><span data-stu-id="cb987-297">You can override the rule on a sales order by selecting a different order pool.</span></span>

<span data-ttu-id="cb987-298">Выполните следующие действия, чтобы создать политику консолидации отгрузок для этого экономического обоснования.</span><span class="sxs-lookup"><span data-stu-id="cb987-298">Follow these steps to create the shipment consolidation policy for this business case.</span></span>

1. <span data-ttu-id="cb987-299">Перейдите на страницу **Управление складом \> Настройка \> Запуск на склад \> политики консолидации отгрузок**.</span><span class="sxs-lookup"><span data-stu-id="cb987-299">Go to **Warehouse management \> Setup \> Release to warehouse \> Shipment consolidation policies**.</span></span>
1. <span data-ttu-id="cb987-300">Задайте в поле **Тип политики** значение *заказы на продажу*.</span><span class="sxs-lookup"><span data-stu-id="cb987-300">Set the **Policy type** field to *Sales orders*.</span></span>
1. <span data-ttu-id="cb987-301">На панели операций выберите **Создать**, чтобы создать политику со следующими настройками:</span><span class="sxs-lookup"><span data-stu-id="cb987-301">On the Action Pane, select **New** to create a policy that has the following settings:</span></span>

    - <span data-ttu-id="cb987-302">**Имя политики:** *Кластер заказов*</span><span class="sxs-lookup"><span data-stu-id="cb987-302">**Policy name:** *Order pool*</span></span>
    - <span data-ttu-id="cb987-303">**Описание политики:** *Консолидация по заказам, основанным на кластере заказов*</span><span class="sxs-lookup"><span data-stu-id="cb987-303">**Policy description:** *Consolidate across orders based on order pool*</span></span>

1. <span data-ttu-id="cb987-304">Оставьте параметр **Консолидация с открытыми отгрузками** с значением *нет*.</span><span class="sxs-lookup"><span data-stu-id="cb987-304">Leave the **Consolidate with open shipments** option set to *No*.</span></span>
1. <span data-ttu-id="cb987-305">На панели операций выберите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="cb987-305">On the Action Pane, select **Save**.</span></span>
1. <span data-ttu-id="cb987-306">На Экспресс-вкладке **поля консолидации** в списке **оставшиеся поля** выберите строку, где поле **Имя поля** установлено на значение *Способ поставки*.</span><span class="sxs-lookup"><span data-stu-id="cb987-306">On the **Consolidation fields** FastTab, in the **Remaining fields** list, select the row where the **Field name** field is set to *Mode of delivery*.</span></span>
1. <span data-ttu-id="cb987-307">Выберите кнопку **Добавить** ![Стрелка вправо](media/forward-button.png), чтобы переместить поле в список **Выбранные поля**.</span><span class="sxs-lookup"><span data-stu-id="cb987-307">Select the **Add** button ![Right arrow](media/forward-button.png) to move the field to the **Selected fields** list.</span></span>
1. <span data-ttu-id="cb987-308">На панели операций выберите **Изменить запрос**.</span><span class="sxs-lookup"><span data-stu-id="cb987-308">On the Action Pane, select **Edit query**.</span></span>
1. <span data-ttu-id="cb987-309">В диалоговое окно редактора запросов на вкладке **Диапазон** выберите **Добавить**, чтобы добавить строку со следующими настройками в сетку:</span><span class="sxs-lookup"><span data-stu-id="cb987-309">In the query editor dialog box, on the **Range** tab, select **Add** to add a row that has the following settings to the grid:</span></span>

    - <span data-ttu-id="cb987-310">**Таблица:** *Заказы на продажу*</span><span class="sxs-lookup"><span data-stu-id="cb987-310">**Table:** *Sales orders*</span></span>
    - <span data-ttu-id="cb987-311">**Производная таблица:** *Заказы на продажу*</span><span class="sxs-lookup"><span data-stu-id="cb987-311">**Derived table:** *Sales orders*</span></span>
    - <span data-ttu-id="cb987-312">**Поле:** *Кластер*</span><span class="sxs-lookup"><span data-stu-id="cb987-312">**Field:** *Pool*</span></span>
    - <span data-ttu-id="cb987-313">**Критерий:** *ShipCons*</span><span class="sxs-lookup"><span data-stu-id="cb987-313">**Criteria:** *ShipCons*</span></span>

1. <span data-ttu-id="cb987-314">Выберите **OK**, чтобы закрыть диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="cb987-314">Select **OK** to close the dialog box.</span></span>

> [!NOTE]
> <span data-ttu-id="cb987-315">Для этого случая все строки заказа, в которых заказы на продажу относятся к одному и тому же кластеру заказов, будут консолидированы в одну отгрузку по заказам на продажу для одного и того же счета, склада и режима транспортировки поставки.</span><span class="sxs-lookup"><span data-stu-id="cb987-315">For this business case, all order lines where sales orders belong to the same order pool will be consolidated into one shipment across sales orders for the same account, warehouse, and transportation mode of delivery.</span></span> <span data-ttu-id="cb987-316">Вместо кластера заказов можно использовать любое другое поле для различения группы клиентов и использования заголовка заказа на продажу по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="cb987-316">Instead of the order pool, you can use any other field to distinguish a group of customers and use the sales order header by default.</span></span> <span data-ttu-id="cb987-317">Этот подход можно использовать, если клиент, а не склад, потребует проведения консолидации.</span><span class="sxs-lookup"><span data-stu-id="cb987-317">You can use this approach if the customer, not the warehouse, is driving the need for consolidation.</span></span> <span data-ttu-id="cb987-318">(В предыдущей логике консолидации склад требовал консолидации.)</span><span class="sxs-lookup"><span data-stu-id="cb987-318">(In the earlier consolidation logic, the warehouse drove the need for consolidation.)</span></span>

### <a name="create-example-policy-5"></a><span data-ttu-id="cb987-319">Создайте пример политики 5</span><span class="sxs-lookup"><span data-stu-id="cb987-319">Create example policy 5</span></span>

<span data-ttu-id="cb987-320">В этом примере создается политика *Склады, разрешающие консолидацию*, которая может использоваться для следующего экономического обоснования:</span><span class="sxs-lookup"><span data-stu-id="cb987-320">In this example, you will create a *Warehouses allowing consolidation* policy that can be used for the following business case:</span></span>

- <span data-ttu-id="cb987-321">Эта политика выполнит запрос определенного кластера заказов для идентификации складов, которые могут консолидировать отгрузки.</span><span class="sxs-lookup"><span data-stu-id="cb987-321">The policy will query for a specific order pool to identify warehouses that can consolidate shipments.</span></span>
- <span data-ttu-id="cb987-322">Консолидация с открытыми отгрузками отключается.</span><span class="sxs-lookup"><span data-stu-id="cb987-322">Consolidation with open shipments is turned off.</span></span>
- <span data-ttu-id="cb987-323">Консолидация выполняется по заказам с использованием полей, выбранных политикой по умолчанию CrossOrder (для копирования ранее установленного флажка **Консолидировать отгрузку перед запуском на склад**).</span><span class="sxs-lookup"><span data-stu-id="cb987-323">Consolidation is done across orders using the fields selected by default CrossOrder policy (to replicate the previous **Consolidate shipment at release to warehouse** check box).</span></span>

<span data-ttu-id="cb987-324">Обычно это экономическое обоснование можно устранить с помощью политик по умолчанию, созданных в [сценарии 1](#scenario-1).</span><span class="sxs-lookup"><span data-stu-id="cb987-324">Typically, this business case can be addressed by using the default policies that you created in [scenario 1](#scenario-1).</span></span> <span data-ttu-id="cb987-325">Однако аналогичную политику можно также создать вручную, выполнив следующие действия.</span><span class="sxs-lookup"><span data-stu-id="cb987-325">However, you can also manually create similar policies by following these steps.</span></span>

1. <span data-ttu-id="cb987-326">Перейдите на страницу **Управление складом \> Настройка \> Запуск на склад \> политики консолидации отгрузок**.</span><span class="sxs-lookup"><span data-stu-id="cb987-326">Go to **Warehouse management \> Setup \> Release to warehouse \> Shipment consolidation policies**.</span></span>
1. <span data-ttu-id="cb987-327">Задайте в поле **Тип политики** значение *заказы на продажу*.</span><span class="sxs-lookup"><span data-stu-id="cb987-327">Set the **Policy type** field to *Sales orders*.</span></span>
1. <span data-ttu-id="cb987-328">На панели операций выберите **Создать**, чтобы создать политику со следующими настройками:</span><span class="sxs-lookup"><span data-stu-id="cb987-328">On the Action Pane, select **New** to create a policy that has the following settings:</span></span>

    - <span data-ttu-id="cb987-329">**Имя политики:** *Cross-order*</span><span class="sxs-lookup"><span data-stu-id="cb987-329">**Policy name:** *Cross-order*</span></span>
    - <span data-ttu-id="cb987-330">**Описание политики:** *Консолидация между заказами для конкретного склада*</span><span class="sxs-lookup"><span data-stu-id="cb987-330">**Policy description:** *Cross-order consolidation for specific warehouses*</span></span>

1. <span data-ttu-id="cb987-331">Оставьте параметр **Консолидация с открытыми отгрузками** с значением *нет*.</span><span class="sxs-lookup"><span data-stu-id="cb987-331">Leave the **Consolidate with open shipments** option set to *No*.</span></span>
1. <span data-ttu-id="cb987-332">На панели операций выберите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="cb987-332">On the Action Pane, select **Save**.</span></span>
1. <span data-ttu-id="cb987-333">На Экспресс-вкладке **поля консолидации** в поле **оставшиеся поля** выберите строку, где поле **Имя поля** установлено на значение *Способ поставки*.</span><span class="sxs-lookup"><span data-stu-id="cb987-333">On the **Consolidation fields** FastTab, in the **Remaining fields** field, select the row where the **Field name** field is set to *Mode of delivery*.</span></span>
1. <span data-ttu-id="cb987-334">Выберите кнопку **Добавить** ![Стрелка вправо](media/forward-button.png), чтобы переместить поле в список **Выбранные поля**.</span><span class="sxs-lookup"><span data-stu-id="cb987-334">Select the **Add** button ![Right arrow](media/forward-button.png) to move the field to the **Selected fields** list.</span></span>
1. <span data-ttu-id="cb987-335">На панели операций выберите **Изменить запрос**.</span><span class="sxs-lookup"><span data-stu-id="cb987-335">On the Action Pane, select **Edit query**.</span></span>
1. <span data-ttu-id="cb987-336">В диалоговом окне Редактор запросов на вкладке **диапазон** найдите строку, в которой поле **поле** имеет значение *Склад*, и установите для этой строки значение поля **критерий** на *61, 63*.</span><span class="sxs-lookup"><span data-stu-id="cb987-336">In the query editor dialog box, on the **Range** tab, find the row where the **Field** field is set to *Warehouse*, and set the **Criteria** field for that row to *61, 63*.</span></span>
1. <span data-ttu-id="cb987-337">Выберите **OK**, чтобы закрыть диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="cb987-337">Select **OK** to close the dialog box.</span></span>

### <a name="set-the-order"></a><span data-ttu-id="cb987-338">Задание заказа</span><span class="sxs-lookup"><span data-stu-id="cb987-338">Set the order</span></span>

<span data-ttu-id="cb987-339">После создания всех политик необходимо установить порядок, в котором они будут применяться.</span><span class="sxs-lookup"><span data-stu-id="cb987-339">Now that you've created all your policies, you must establish the order that they will be applied in.</span></span> <span data-ttu-id="cb987-340">Чтобы использовать подход в виде пирамиды, где политики с наибольшим количеством условий оцениваются как имеющие наивысший приоритет, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="cb987-340">To use a pyramid-like approach, where the policies that have the most conditions are evaluated as having the highest priority, follow these steps.</span></span>

1. <span data-ttu-id="cb987-341">Перейдите на страницу **Управление складом \> Настройка \> Запуск на склад \> политики консолидации отгрузок**.</span><span class="sxs-lookup"><span data-stu-id="cb987-341">Go to **Warehouse management \> Setup \> Release to warehouse \> Shipment consolidation policies**.</span></span>
1. <span data-ttu-id="cb987-342">Задайте в поле **Тип политики** значение *заказы на продажу*.</span><span class="sxs-lookup"><span data-stu-id="cb987-342">Set the **Policy type** field to *Sales orders*.</span></span>
1. <span data-ttu-id="cb987-343">Выберите каждую из политик, перечисленных в левом столбце, а затем воспользуйтесь кнопками **вверх** и **вниз** на панели операций для упорядочения политик в следующем порядке:</span><span class="sxs-lookup"><span data-stu-id="cb987-343">Select each policy that is listed in the left column, and then use the **Move up** and **Move down** buttons on the Action Pane to arrange the policies in the following order:</span></span>

    1. <span data-ttu-id="cb987-344">CustomerMode</span><span class="sxs-lookup"><span data-stu-id="cb987-344">CustomerMode</span></span>
    1. <span data-ttu-id="cb987-345">Тип номенклатуры</span><span class="sxs-lookup"><span data-stu-id="cb987-345">Item type</span></span>
    1. <span data-ttu-id="cb987-346">CustomerOrderNo</span><span class="sxs-lookup"><span data-stu-id="cb987-346">CustomerOrderNo</span></span>
    1. <span data-ttu-id="cb987-347">Кластер заказов</span><span class="sxs-lookup"><span data-stu-id="cb987-347">Order pool</span></span>
    1. <span data-ttu-id="cb987-348">Cross-order</span><span class="sxs-lookup"><span data-stu-id="cb987-348">Cross-order</span></span>
    1. <span data-ttu-id="cb987-349">По умолчанию</span><span class="sxs-lookup"><span data-stu-id="cb987-349">Default</span></span>

## <a name="example-scenarios-of-how-to-use-shipment-consolidation-policies"></a><a name="example-scenarios"></a> <span data-ttu-id="cb987-350">Примеры сценариев использования политик консолидации отгрузок</span><span class="sxs-lookup"><span data-stu-id="cb987-350">Example scenarios of how to use shipment consolidation policies</span></span>

<span data-ttu-id="cb987-351">В следующих сценариях показано, как можно использовать политики консолидации отгрузок, созданные при чтении этого раздела.</span><span class="sxs-lookup"><span data-stu-id="cb987-351">The following scenarios illustrate how you could use the shipment consolidation policies that you created while reading this topic.</span></span> <span data-ttu-id="cb987-352">Каждый сценарий проведет вас через процесс консолидации отгрузок, использующий политики консолидации отгрузок во время автоматического или ручного выпуска на складе:</span><span class="sxs-lookup"><span data-stu-id="cb987-352">Each scenario walks you through a shipment consolidation process that uses shipment consolidation policies during automated or manual release to the warehouse:</span></span>

- <span data-ttu-id="cb987-353">Сценарий 1: [Консолидируйте отгрузки, когда они выпускаются на склад, используя автоматический запуск заказов на продажу](../warehousing/consolidate-shipments-automatic.md)</span><span class="sxs-lookup"><span data-stu-id="cb987-353">Scenario 1: [Consolidate shipments when they are released to the warehouse by using Automatic release of sales orders](../warehousing/consolidate-shipments-automatic.md)</span></span>
- <span data-ttu-id="cb987-354">Сценарий 2: [Консолидируйте отгрузки, когда политика консолидации отгрузок переопределяется на странице Запуск на склад](../warehousing/consolidate-shipments-release-to-warehouse-override.md)</span><span class="sxs-lookup"><span data-stu-id="cb987-354">Scenario 2: [Consolidate shipments when the shipment consolidation policy is overridden from the Release to warehouse page](../warehousing/consolidate-shipments-release-to-warehouse-override.md)</span></span>
- <span data-ttu-id="cb987-355">Сценарий 3: [Консолидируйте отгрузки, используя Запуск на склад из рабочего места планирования загрузки](../warehousing/consolidate-shipments-load-planning-workbench.md)</span><span class="sxs-lookup"><span data-stu-id="cb987-355">Scenario 3: [Consolidate shipments by using Release to warehouse from the load planning workbench](../warehousing/consolidate-shipments-load-planning-workbench.md)</span></span>
- <span data-ttu-id="cb987-356">Сценарий 4: [Консолидируйте отгрузки, используя рабочее место консолидации отгрузок](../warehousing/consolidate-shipments-manual-workbench.md)</span><span class="sxs-lookup"><span data-stu-id="cb987-356">Scenario 4: [Consolidate shipments by using the shipment consolidation workbench](../warehousing/consolidate-shipments-manual-workbench.md)</span></span>
- <span data-ttu-id="cb987-357">Сценарий 5: [Консолидируйте отгрузки вручную, используя страницу Консолидация отгрузок](../warehousing/consolidate-shipments-manual-form.md)</span><span class="sxs-lookup"><span data-stu-id="cb987-357">Scenario 5: [Consolidate shipments manually by using the Consolidate shipments page](../warehousing/consolidate-shipments-manual-form.md)</span></span>


## <a name="additional-resources"></a><span data-ttu-id="cb987-358">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="cb987-358">Additional resources</span></span>

- [<span data-ttu-id="cb987-359">Политики консолидации отгрузок</span><span class="sxs-lookup"><span data-stu-id="cb987-359">Shipment consolidation policies</span></span>](about-shipment-consolidation-policies.md)
