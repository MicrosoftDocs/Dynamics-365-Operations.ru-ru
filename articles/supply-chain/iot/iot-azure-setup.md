---
title: Настройка ресурсов Azure для аналитики Интернета вещей
description: В этом разделе объясняется, как создать и настроить ресурсы Microsoft Azure, необходимые для работы с аналитики Интернета вещей.
author: robinarh
manager: tfehr
ms.date: 08/16/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: ''
ms.custom: ''
ms.search.region: Global
ms.author: rhaertle
ms.search.validFrom: 2020-04-04
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: cd06410dd6260e6a371b0044546be7f8c9957c80
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/15/2021
ms.locfileid: "4989829"
---
# <a name="set-up-azure-resources-for-iot-intelligence"></a>Настройка ресурсов Azure для аналитики Интернета вещей

[!include [banner](../../includes/banner.md)]

В этом разделе объясняется, как создать и настроить ресурсы Microsoft Azure, необходимые для работы с аналитики Интернета вещей.

## <a name="create-azure-resources"></a>Создание ресурсов Azure

Выполните следующие действия, чтобы создать узел Интернета вещей, кэш Redis и хранилище ключей, доступ к которым можно получить, используя Microsoft Dynamics 365 Supply Chain Management.

### <a name="verify-that-the-microsoft-dynamics-erp-microservices-first-party-app-id-is-in-your-tenant"></a>Убедитесь, что код собственного приложения Microsoft Dynamics ERP Microservices используется в вашем клиенте

Чтобы убедиться в том, что код приложения для собственного приложения Microsoft Dynamics ERP Microservices находится в вашем клиенте, выполните следующие действия.

1. Выполните вход на портал Azure по адресу <https://portal.azure.com>.
2. Перейдите на страницу **Azure Active Directory**.
3. Перейдите к **Корпоративные приложения**.
4. В поле **Тип приложения** выберите **приложения Microsoft** .
5. В поле поиска введите **Microsoft Dynamics ERP Microservices**.
6. Убедитесь, что **Microsoft Dynamics ERP Microservices** в списке. Другие приложения имеют похожие имена. Поэтому, убедитесь, что вы нашли соответствующее приложение. Код приложения — **0cdb527f-a8d1-4bf8-9436-b352c68682b2**.

    Если приложение отсутствует в списке, его необходимо добавить в клиент:

    1. На портале Azure на панели инструментов нажмите кнопку, чтобы открыть Azure Cloud Shell.
    2. Выполните команду **Install-Module AzureAD**. Введите **Y**, чтобы установить модуль.
    3. Выполните команду **Get-InstalledModule -Name "AzureAD"**, чтобы убедиться, что модуль установлен.
    4. Выполните команду **Connect-AzureAD -Confirm**, чтобы выполнить проверку подлинности.
    5. Выполните команду **New-AzureADServicePrincipal -AppId 0cdb527f-a8d1-4bf8-9436-b352c68682b2**.

    Теперь можно повторить шаги с 1 по 6 для проверки того, что код приложения находится в вашем клиенте.

### <a name="create-a-key-vault-resource"></a>Создание ресурса хранилища ключей

Чтобы создать ресурс хранилища ключей, выполните следующие действия.

1. На портале Azure создайте или перейдите к группе ресурсов.
2. Выберите **Добавить**.
3. На странице **Создать** в поле поиска введите **хранилище ключей**. Затем выберите **Создать**.
4. На странице **Создание хранилища ключей** в поле **имя хранилища ключей** введите имя.
5. Просмотрите значения по умолчанию, а затем выберите **Просмотреть + создать**.
6. Выберите **Создать**.

Хранилище ключей создается в фоновом режиме.

### <a name="create-an-iot-hub-resource"></a>Создание ресурса узла Интернета вещей

Чтобы создать ресурс узла Интернета вещей, выполните следующие действия.

1. Создайте или перейдите к группе ресурсов.
2. Выберите **Добавить**.
3. На странице **Создать** в поле поиска введите **узел Интернета вещей**. Затем выберите **Создать**.
4. В поле **Имя узла Интернета вещей** введите имя.
5. Просмотрите значения по умолчанию, а затем выберите **Просмотреть + создать**.
6. Выберите **Создать**.

Узел Интернета вещей создается в фоновом режиме.

> [!NOTE]
> Рекомендуется создавать только один ресурс узла Интернета вещей для каждой среды.

### <a name="create-a-redis-cache-resource"></a>Создание ресурса кэша Redis

Чтобы создать ресурс кэша Redis, выполните следующие действия.

1. Создайте или перейдите к группе ресурсов.
2. Выберите **Добавить**.
3. На странице **Создать** в поле поиска введите **Кэш Azure для Redis**. Затем выберите **Создать**.
4. В поле **Имя DNS** введите имя.
5. Просмотрите значения по умолчанию, а затем выберите **Создать**.

Кэш Redis создается в фоновом режиме.

> [!NOTE]
> Рекомендуется создавать только один кэш Redis для каждой среды.

Все ресурсы будут созданы.

## <a name="configure-the-azure-resources"></a>Настройка ресурсов Azure

### <a name="configure-the-iot-hub"></a>Настройка узла Интернета вещей

Выполните следующие действия, чтобы настроить узел Интернета вещей.

1. В ресурсах выберите ресурс узла Интернета вещей.
2. В левой области навигации выберите **встроенные конечные точки**.
3. В **группы потребителей** вставьте следующие группы потребителей. Эти группы потребителей соответствуют готовым сценариям.

    + microsoft.dynamics.iotintelligence-1
    + microsoft.dynamics.iotintelligence-2
    + microsoft.dynamics.iotintelligence-3

### <a name="configure-the-key-vault"></a>Настройка хранилища ключей

Чтобы настроить хранилище ключей, выполните следующие действия.

1. В ресурсах выберите ресурс хранилища ключей.
2. В левой области переходов выберите **политики доступа**.
3. Выберите **Добавить политику доступа**.
4. На странице **Добавить политику доступа** в поле **секретные разрешения** выберите значение **получить** и **список**.
5. Щелкните **Выбрать доверителя**.
6. В диалоговом окне **Доверитель** выполните поиск и выберите **Microsoft Dynamics ERP Microservices**. Затем выберите **Выбрать**.
7. Выберите **Добавить**.
8. Нажмите **Сохранить**.

У приложения есть доступ к секретам в хранилище ключей.

### <a name="save-the-iot-hub-connection-string-secret"></a>Сохраните секрет для строки подключения к узлу Интернета вещей

Чтобы сохранить секрет для строки подключения к узлу Интернета вещей, выполните следующие действия.

1. В ресурсах выберите ресурс узла Интернета вещей.
2. В левой области навигации выберите **встроенные конечные точки**.
3. Скопируйте значение в поле **Конечная точка, совместимая с центром событий**.
4. Перейдите к ресурсу хранилища ключей.
5. В левой области переходов выберите **Секреты**.
6. Выберите **Создать/Импортировать**.
7. В поле **Имя** введите имя.
8. В поле **значение** вставьте ранее скопированное значение конечной точки.
9. Выберите **Создать**.

### <a name="save-the-redis-cache-connection-string-secret"></a>Сохраните секрет для строки подключения к кэшу Redis

Чтобы сохранить секрет для строки подключения к кэшу Redis, выполните следующие действия.

1. В ресурсах выберите ресурс кэша Redis.
2. Выбор **ключей доступа**.
3. Скопируйте значение в поле **первичная строка подключения**.
4. Перейдите к ресурсу хранилища ключей.
5. В левой области переходов выберите **Секреты**.
6. Выберите **Создать/Импортировать**.
7. В поле **Имя** введите имя.
8. В поле **значение** вставьте ранее скопированное строку подключения.
9. Выберите **Создать**.

> [!NOTE]
> Когда обновляется одна из строк подключения, необходимо также обновить значения секрета.

Теперь подготовка необходимых ресурсов Azure завершена. Следующий шаг состоит в [установке надстройки аналитики Интернета вещей в Microsoft Dynamics Lifecycle Services (LCS)](iot-lcs-setup.md).
