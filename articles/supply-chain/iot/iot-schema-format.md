---
title: Форматы схем для сообщений центра Интернета вещей
description: В этой статье описывается разработка схемы сообщений, которую можно использовать в аналитике Интернета вещей.
author: johanhoffmann
ms.date: 08/04/2022
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User, Developer, IT Pro
ms.reviewer: kamaybac
ms.custom: ''
ms.search.region: Global
ms.author: johanho
ms.search.validFrom: 2020-04-25
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: b6d133d520ce0a1dccb2575e352f63e6ceb2bd3f
ms.sourcegitcommit: e0905a3af85d8cdc24a22e0c041cb3a391c036cb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/06/2022
ms.locfileid: "9228643"
---
# <a name="schema-formats-for-iot-hub-messages"></a>Форматы схем для сообщений центра Интернета вещей

[!include [banner](../../includes/banner.md)]
[!INCLUDE [iot-sdi-announcement](../../includes/iot-sdi-announcement.md)]

В этой статье описывается разработка схемы сообщений, которую можно использовать в аналитике Интернета вещей.

## <a name="message-requirements"></a>Требования к сообщениям

Ниже перечислены правила, которые применяются для мониторинга сообщений в аналитике Интернета вещей:

+ Схемы сообщений должны быть в формате нотации объектов JavaScript (JSON).
+ Свойство UNIX **timestamp**, значение которого выражается в миллисекундах (мс), должно присутствовать в сообщении центра Интернета вещей Microsoft Azure.
+ Сообщение отслеживается только в том случае, если оно содержит все свойства, определенные в настройке сценария. Например, если задать свойства **id**, **timestamp** и **value**, отслеживается следующее сообщение.

    ```json
    {
        "id": "IoTInt.Machine1225.PartOut",
        "timestamp": 1576016821614,
        "value": True
    }
    ```

    Это сообщение не отслеживается, поскольку отсутствует свойство **value**.

    ```json
    {
        "id": "IoTInt.Machine1225.PartOut",
        "timestamp": 1576016821614,
    }
    ```

+ Аналитика Интернета вещей игнорирует свойства в сообщении, которые не были определены в конфигурации сценария. Например, если задать свойства **id**, **timestamp** и **value**, аналитика Интернета вещей отслеживает следующие сообщения.

    ```json
    {
        "id": "IoTInt.Machine1225.PartOut",
        "timestamp": 1576016821614,
        "value": True
    },
    {
        "id": "IoTInt.Machine1225.PartOut",
        "timestamp": 1576016821614,
        "value": True,
        "machine" : "Machine1225",
    },
    {
        "id": "IoTInt.Machine1225.PartOut",
        "timestamp": 1576016821614,
        "value": True,
         "activity": "PartOut"
    },
    ```

+ Аналитика Интернета вещей автоматически игнорирует сообщения, которые не соответствуют критериям конфигурации сценария.
+ Можно определять и использовать несколько типов схем сообщений.
+ Должна быть определена не каждый тип схем сообщений. Должны быть определены только схемы, которые будут использоваться для сценариев аналитики Интернета вещей.

## <a name="id-value-pair-schema"></a>Схема пар код-значение

Пара код-значение является общим шаблоном для схем сообщений аналитики Интернета вещей. Используя пару код-значение, можно гарантировать, что схема сообщений одинакова для всех сценариев. Например, это сообщение для сценария **Простой оборудования** или **Задержки производства**.

```json
{
    "id": "IoTInt.Machine1225.PartOut",
    "timestamp": 1576016821614,
    "value": True
}
```

Ниже приводится сообщение для сценария **Качество продукта**.

```json
{
    "id": "IoTInt.Machine1225.Temperature",
    "timestamp": 1576016821614,
    "value": 105
}
```

Оба предыдущих сообщения содержат свойства **id** и **value**. Значения **id** могут быть сопоставлены в таблице **Значения данных сигнала** во время настройки сценария. Для сценария **Простой оборудования** будет сопоставлено значение **IoTInt.Machine1225.PartOut**. Для сценария **Качество продукта** будет сопоставлено значение **IoTInt.Machine1225.Temperature**.

Дополнительные сведения см. в [документации по центру Интернета вещей Azure](/azure/iot-hub/).


[!INCLUDE[footer-include](../../includes/footer-banner.md)]