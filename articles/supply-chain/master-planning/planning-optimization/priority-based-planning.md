---
title: Планирование на основе приоритетов
description: В этой теме описывается функция планирования с учетом приоритета в Microsoft Dynamics 365 Supply Chain Management.
author: t-benebo
ms.date: 10/15/2021
ms.topic: article
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: benebotg
ms.search.validFrom: 2021-10-15
ms.dyn365.ops.version: 10.0.23
ms.openlocfilehash: bdca7ef99716cebee5c4eb41d1e51793b9468dd4
ms.sourcegitcommit: ad1afc6893a8dc32d1363395666b0fe1d50e983a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/23/2022
ms.locfileid: "8468310"
---
# <a name="priority-based-planning"></a>Планирование на основе приоритетов

[!include [banner](../../includes/banner.md)]

В этой теме описывается функция планирования с учетом приоритета в Microsoft Dynamics 365 Supply Chain Management. Эта функция добавляет поддержку для планирования на основе спроса, которая является одним из этапов планирования потребностей в материальных ресурсах на основе спроса (DDMRP). Планирование на основе приоритетов позволяет оптимизировать планирование для создания спланированных заказов, которые определяются приоритетами планирования вместо дат потребности.

Планирование на основе приоритетов позволяет назначить приоритеты заказам на пополнение, чтобы гарантировать, что срочное требование имеет приоритет по отношению к менее важному спросу. Например, заказ на пополнение отсутствующих запасов получает приоритет относительно стандартного заказа на пополнение запасов. Система может автоматически разбивать крупные заказы на отдельные более мелкие заказы, в которых строки заказа группируются по приоритету. Затем она может обработать сначала все заказы с высоким приоритетом.

Чтобы получить краткий обзор этой функции, см. следующую видеозапись: [Поддержка оптимизации планирования для планирования на основе приоритетов в Dynamics 365 Supply Chain Management](https://youtu.be/GmMHzFETTQc).

## <a name="turn-on-priority-based-planning-in-your-system"></a>Включение планирования на основе приоритетов в вашей системе

Прежде чем использовать эту функцию, она должна быть включена в системе. Администраторы могут использовать параметры [управления компонентами](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) для проверки статуса функции и ее включения. В рабочей области **Управление функциями** эта функция перечисляется следующими способами:

- **Модуль:** *Сводное планирование*
- **Название функции:** *Поддержка MRP на базе приоритетов для оптимизации планирования*

## <a name="where-and-how-planning-priorities-are-assigned"></a>Место и способ назначения приоритетов планирования

Сведения о *приоритете планирования* для поставок и спроса являются основой планирования на основе приоритетов. Приоритет планирования определяет важность спроса или строки поставок. Оптимизация планирования использует его, когда в поле **Код покрытия** задано значение *Приоритет*.

Приоритет планирования обычно является числом от 0 (нуля) до 100, где 0 соответствует наивысшей важности. Он отображается и устанавливается в поле **Приоритет планирования**. Это поле можно найти на следующих страницах: **Строки прогноза спроса**, **Сведения по заказам на продажу**, **Сведения о заказе на покупку**, **Сведения о заказе на перемещение** и **Сведения о спланированном заказе**.

Когда для поля **Код покрытия** для соответствующей номенклатуры или группы покрытия выбрано значение *Приоритет*, оптимизация планирования сводит поставки со спросом, с использованием подхода на основе спроса, так как в нем рассчитывается приоритет планирования и для каждого выпущенного продукта учитываются значения, установленные для полей **Минимум**, **Точка повторного заказа** и **Максимум** на странице **Покрытие номенклатуры**.

> [!NOTE]
> Значение *Приоритет* доступно для поля **Код покрытия**, только если активирована оптимизация планирования.

Соответствующие *модели приоритета планирования* управляют приоритетом планирования и разбивают спланированные заказы по диапазону приоритета. Они также позволяют задавать значения приоритета планирования по умолчанию для каждого типа поставки или спроса и определять метод расчета приоритета.

## <a name="types-of-priority-calculation-methods"></a>Типы методов расчета приоритета

Каждая модель приоритета планирования имеет настройку **Метод расчета приоритета**, которая управляет тем, как сводное планирование применяет приоритет к спланированным заказам. Доступными значениями являются *Процент от максимального количества запасов* и *Диапазоны приоритетов*. *Диапазоны приоритетов* представляют собой более расширенную версию метода *Процент от максимального количества запасов*.

### <a name="percent-of-maximum-inventory-quantity"></a>Процент от максимального количества запасов

В методе расчета *Процент от максимального количества запасов* для расчета приоритета поставок находит текущее *общее доступное количество запасов* (чистый поток) в виде процента от значения **Максимальное количество запасов**, которое задано для номенклатуры. После этого для номенклатуры и поставщика создается один спланированный заказ (если только максимальное количество заказа не используется для принудительного разбиения). Приоритет планирования заказа рассчитывается как процент от максимума.

Используется следующая формула:

*Процент от максимального значения* = (*Чистая текущая позиция* × 100) ÷ *Максимальное значение количества запасов из покрытия номенклатуры*

В этой формуле *Чистая текущая позиция* рассчитывается следующим образом:

*Чистая текущая позиция* = *В наличии* + *По заказу* — *Квалифицированный спрос*

- *По заказу* — это ожидаемый запас.
- *Квалифицированный спрос* представляет чистые потребности, которые имеют дату потребности в временных границах планирования.

При выполнении сводного планирования создаются новые спланированные заказы, когда чистая текущая позиция меньше количества в точке повторного заказа для номенклатуры. Количество по спланированному заказу — это разница между значением **Максимальное количество запасов**, которое задается на уровне номенклатуры, и чистой текущей позицией. Приоритет спланированного заказа рассчитывается как процент *чистой текущей позиции* от значения **Максимальное количество запасов**.

> [!NOTE]
> Рассчитанный приоритет не может быть отрицательным, даже если спрос превышает общее количество поставок. Если спрос превышает общее количество поставок, расчетный приоритет устанавливается равным 0 (нулю).

### <a name="priority-ranges"></a>Диапазоны приоритетов

Метод расчета *Диапазоны приоритетов* является более расширенным, чем метод *Процент от максимального количества запасов*, и настраивается на уровне модели приоритета планирования. Несколько новых спланированных заказов на поставку можно создать для удовлетворения спроса по номенклатуре. Приоритеты запланированных поставок следуют значениям, определенным в сетке **Диапазоны приоритетов планирования** на странице **Модели приоритета планирования**.

Следующие дополнительные правила вступают в силу, когда в поле **Метод расчета приоритета** установлено значение *Диапазоны приоритетов*:

- Если параметр **Учитывать приоритет спроса** для модели приоритета планирования установлен в значение *Да*, приоритет, установленный для каждой строки спроса, ограничит пределы сегмента диапазона приоритетов. Приоритет любого нового спланированного заказа на поставку будет не ниже приоритета спроса. Верхнее значение диапазона считается порогом, с которым сравнивается значение приоритета спроса. Если приоритет спроса точно расположен в средней части между верхними пороговыми значениями двух диапазонов, будет выбран диапазон с наивысшим приоритетом (то есть, с самым низким значением приоритета).
- Если для поля **Создание спланированного заказа** для модели спланированного приоритета задано значение *Одна поставка с самым важным приоритетом*, только одна поставка будет создана для полного пополнения до максимального значения. Приоритет будет установлен равным приоритету первого диапазона, который будет вызывать поставку.
- Если нет запасов в наличии, нет поставок и нет спроса, будет использоваться строка в сетке **Диапазоны приоритетов планирования**, в которой в поле **От количества** задано значение *Ноль*.
- Если есть спрос, но нет запасов в наличии или ожидаемой поставки, будет использоваться строка в сетке **Диапазоны приоритетов планирования**, в которой в поле **От количества** задано значение *Ноль или менее*.
- При оценке диапазона, частью которого является спрос, значение параметра **Учитывать приоритет спроса** все равно будет иметь эффект.

## <a name="differences-between-traditional-timeline-calculations-and-priority-based-planning"></a>Различия между обычными расчетами временной шкалы и планированием на основе приоритетов

Планирование на основе приоритетов отличается от традиционных вычислений временной шкалы следующим образом:

- Все регулярные процессоры предварительного планирования все еще действуют. Эти предварительные процессоры включают сопоставление утвержденных спланированных заказов со спросом на продажу, сопоставление заявок на закупку и логику резервирования. Обрабатываются только требования, которые не выполняются этими предварительными процессорами.
- Во время определения источника потребности все поставки учитывается, независимо от их приоритета. Эта поставка включает в себя запасы в наличии, выпущенные поставки и нефиксированную часть утвержденных спланированных заказов.
- Спрос "отрицательных дней" не может быть привязан к поставкам в течение всего времени покрытия.
- Когда поставка привязана к требованию, первым используется поставка с наивысшим приоритетом (то есть, с самым низким значением приоритета). В запасах в наличии предполагается, что значение приоритета равно 0 (нулю). Поэтому он будет потреблен в качестве самого первого источника.
- Новые строки плановых поставок будут создаваться в соответствии с обычными правилами для минимального размера заказа, максимального размера заказа, кратного количества и так далее.

## <a name="planning-priority-models"></a>Модели приоритетов планирования

*Модели приоритетов планирования* назначаются группам покрытия и управляют приоритетом планирования для спланированных заказов. Они определяют логику, которая определяет порядок расчета значения приоритета планирования для каждого спланированного заказа и порядок назначения приоритета спланированным заказам, строкам поставок и строкам спроса.

Для работы с моделями приоритетов планирования перейдите в раздел **Сводное планирование \> Настройка \> Модели приоритета планирования**. Как обсуждалось ранее, одной из важнейших настроек модели является значение **Метод расчета приоритета**. Этот параметр управляет методом расчета, который используется, когда сводное планирование назначает значение приоритета спланированным заказам.

> [!NOTE]
> Модели приоритетов планирования применяются в масштабе всей организации по всем юридическим лицам.

### <a name="coverage-group"></a>Группа покрытия

Настройте новую группу покрытия, которую планируется использовать для планирования на основе приоритетов, как описано в разделе [Определение правил покрытия для номенклатур](../tasks/define-coverage-rules-items.md). После создания группы покрытия настройте следующие дополнительные поля:

- **Код покрытия** — выберите *Приоритет*, если группа покрытия будет использовать планирование на основе приоритетов.
- **Модель приоритета планирования** — выберите любую модель приоритета планирования в масштабе всей организации.

### <a name="item-coverage"></a>Покрытие номенклатуры

Настройка параметров покрытия номенклатуры, как указано в [параметрах покрытия](../coverage-settings.md). По умолчанию значение **Код покрытия**, выбранное для группы покрытия, копируется в параметры покрытия номенклатуры. Однако если требуется, значение по умолчанию можно переопределить. В некоторых случаях в поле **Код покрытия** для записи покрытия номенклатуры задано значение *Планирование*, но модель приоритета планирования не определена для соответствующей группы покрытия. В этих случаях любая модель, в которой для поля **Метод расчета приоритета** указано значение *Процент от максимального количества запасов*, а в поле **Создание спланированного заказа** задано значение *Одна поставка с самым важным приоритетом*, будет применяться по умолчанию.

Установите для поля **Код покрытия** значение *Приоритет*, чтобы сделать поле **Точка повторного заказа** доступным в параметрах покрытия номенклатуры. В этом поле введите количество в точке повторного заказа, которое система должна использовать при определении того, когда необходимо разместить спланированные заказы, имеющие для параметра **Код покрытия** значение *Приоритет*.

Количество в точке повторного заказа часто рассчитывается как спрос в течение времени ожидания плюс минимальное значение (резервный запас). Оно должно быть значением между значениями **Минимум** и **Максимум**.

Например, можно настроить поля следующим образом:

- **Минимум:** *10*
- **Точка повторного заказа:** *45*
- **Максимум:** *60*

В данном примере количество в точке повторного заказа базируется на времени выполнения семь дней и среднем ежедневном использовании, равном 5. Следовательно, спрос во время ожидания составляет 35. Для получения точки повторного заказа 45 затем добавляется минимальное значение 10 (резервный запас). Когда используется эта настройка, поставка будет предложена, когда предполагаемый уровень запасов меньше 45. Приоритет заказа будет основываться на настройке приоритета планирования.

### <a name="manage-planning-priority-models"></a>Управление моделями приоритетов планирования

Для работы с вашими моделями приоритетов планирования. выполните следующие действия.

1. Перейдите в раздел **Сводное планирование \> Настройка \> Модели приоритетов планирования**.
1. Выберите существующую модель в области списка или выберите **Создать** на панели операций, чтобы создать новую модель.
1. В заголовке записи задайте следующие поля:

    - **Имя** — введите имя для модели. Имя должно быть уникальным для всех юридических лиц в организации.
    - **Описание** — введите описание модели.
    - **Метод расчета приоритета** — выберите одно из следующих значений:

        - *Диапазоны приоритетов* — при выборе этого значения сетка **Диапазоны приоритетов планирования** становится доступной. Для определения значения приоритета планирования необходимо установить несколько диапазонов приоритета.
        - *Процент от максимального количества запасов* — расчет значения приоритета планирования в виде процента на основе прогнозируемого уровня запасов по максимальному количеству запасов.

    - **Создание спланированного заказа** — это поле доступно, если в поле **Метод расчета приоритета** установлено значение *Диапазон приоритетов*. Выберите одно из следующих значений:

        - *Одна поставка с самым важным приоритетом* — не разделяет спланированные заказы на основе диапазона приоритетов. Приоритет планирования для спланированного заказа основан на самом важном диапазоне приоритета (то есть, самом низком значении приоритета планирования).
        - *Разделить в соответствии с диапазонами приоритетов* — разделение спроса на несколько спланированных заказов на основе диапазонов приоритетов планирования. Приоритет планирования для отдельных спланированных заказов определяется приоритетом планирования соответствующего диапазона приоритетов планирования.

    - **Учитывать приоритет спроса** — установите для этого параметра значение *Да*, чтобы ограничить приоритет нового спланированного заказа, созданного для поставки. (Приоритет не будет ниже, чем приоритет соответствующего требования.) Если для этого параметра установить значение *Нет*, приоритет заказа на спрос не будет учитываться при расчете приоритета заказа на поставку.

1. Если для поля **Метод расчета приоритета** задано значение *Диапазон приоритетов*, используйте кнопки **Добавить** и **Удалить** на панели инструментов экспресс-вкладки **Диапазоны приоритетов планирования**, чтобы добавить или удалить строки диапазонов приоритетов по мере необходимости. Если имеется несколько строк, при вставке новой строки приоритет планирования будет автоматически установлен равным среднему значению выбранной строки и строки, расположенной над ней. Для каждой строки заполните следующие поля:

    - **Приоритет планирования** — введите любое значение между 0,00 и 100,00. Это значение представляет приоритет планирования, используемый для строки. Самое низкое значение приоритета представляет самый высокий приоритет. Значение по умолчанию назначается, но вы можете изменить его, как вам требуется. Одно и то же значение **Приоритет планирования** нельзя использовать для более чем одного диапазона приоритетов планирования в одной и той же модели приоритета планирования.
    - **Описание** — введите описание диапазона приоритетов планирования (например, *Точка повторного заказа до максимума*).
    - **Количество "От"** — нижний предел диапазона приоритета планирования. Это значение доступно только для чтения и базируется на значениях **Количество "До"** и **Процент от количества "До"** для предыдущего диапазона приоритета планирования.
    - **Количество "До"** — выберите поле из покрытия номенклатуры, которое должно использоваться для определения верхнего предела диапазона. Поддерживаются следующие значения, которые могут повлиять на значение **Количество "От"** следующего диапазона:

        - *Ноль* — это значение соответствует диапазону от отрицательных значений до нуля (от *Ноль или меньше* до *Ноль*). Для строк, в которых выбрано это значение, поле **Процент от количества "До"** доступно только для чтения и всегда устанавливается равным *100* процентам.
        - *Минимальное количество запасов* — это значение представляет значение **Минимум** для номенклатуры на странице **Покрытие номенклатуры**. Для строк, в которых выбрано это значение, поле **Процент от количества "До"** является редактируемым и используется для задания значения **Количество "До"** в следующем диапазоне (например, до *80% от минимального количества запасов*).
        - *Точка повторного заказа* — это значение представляет значение **Точка повторного заказа** для номенклатуры на странице **Покрытие номенклатуры**. Для строк, в которых выбрано это значение, поле **Процент от количества "До"** является редактируемым и используется для задания значения **Количество "До"** для следующего диапазона (например, до *80% от точки повторного заказа*).
        - *Максимальное количество запасов* — это значение представляет значение **Максимум** для номенклатуры на странице **Покрытие номенклатуры**. Для строк, в которых выбрано это значение, поле **Процент от количества "До"** является редактируемым и используется для задания значения **Количество "До"** в следующем диапазоне (например, до *80% от минимального количества запасов*).
        - *Бесконечно* — это значение соответствует бесконечному верхнему уровню диапазона (от *Бесконечно или меньше* до *Бесконечно*). Для строк, в которых выбрано это значение, поле **Процент от количества "До"** доступно только для чтения и всегда устанавливается равным *100* процентам.

    - **Процент от количества "До"** — введите процентное значение, которое используется для расчета верхнего предела диапазона приоритета планирования на основе значения, выбранного в поле **Количество "До"**. Например, если в поле **Количество "До"** указано значение *Минимальное количество запасов*, а в поле **Процент от количества "До"** указано значение *50*, верхний предел будет 50 процентов от минимального количества запасов из соответствующего покрытия номенклатуры.

1. На экспресс-вкладке **Значения по умолчанию приоритета планирования** задайте поля, как необходимо для определения приоритетов планирования по умолчанию для каждого типа поставки или строки спроса (заказ на продажу, заказ на покупку, заказ на перемещение или прогноз спроса). Могут быть введены только положительные значения.

## <a name="view-and-maintain-planning-priority"></a>Просмотр и ведение приоритета планирования

Приоритет планирования отображается и определяется в поле **Приоритет планирования**. Это поле можно найти на страницах, перечисленных в следующей таблице. Приоритет обычно задается числом от 0 (нуля) до 100, где 0 соответствует наивысшей важности.

| Страница | Расположение поля | Источник значения |
|---|---|---|
| Строки прогноза спроса | <p>Вкладка **Номенклатура**</p><p>(Выберите строку в верхнем разделе, а затем выберите вкладку **Номенклатура**.)</p> | Значение по умолчанию или значение, заданное вручную |
| Сведения по Заказам на Продажу | <p>Вкладка **Поставка** на экспресс-вкладке **Сведения строки**</p><p>(Выберите строку на экспресс-вкладке **Строки заказа на продажу**, а затем на экспресс-вкладке **Сведения по строке** выберите вкладку **Поставка**.)</p> | Значение по умолчанию, внутрихолдинговое значение или значение, заданное вручную |
| Сведения о заказе на покупку | <p>Вкладка **Поставка** на экспресс-вкладке **Сведения строки**</p><p>(Выберите строку на экспресс-вкладке **Строки заказа на покупку**, а затем на экспресс-вкладке **Сведения по строке** выберите вкладку **Поставка**.)</p> | Значение, которое задается при утверждении из спланированных заказов, значение внутрихолдинговых расчетов или значение, которое задается вручную |
| Сведения о заказе на перемещение | <p>Вкладка **Поставка** на экспресс-вкладке **Сведения строки**</p><p>(Выберите строку на экспресс-вкладке **Строки заказа на перемещение**, а затем на экспресс-вкладке **Сведения по строке** выберите вкладку **Поставка**.)</p> | Значение, которое задается при утверждении из спланированных заказов или значение, которое задается вручную |
| Сведения по Спланированным Производственным Заказам | Экспресс-вкладке **Общее** | Значение, которое рассчитывается при сводном планировании или значение, заданное вручную |

### <a name="intercompany-trade"></a>Внутрихолдинговая торговля

Значение **Приоритет планирования** для строк внутрихолдинговых поставок и спроса совместно используется между связанными сущностями. Изменение по одной стороне будет отражено в связанной строке заказа.

Далее приводятся некоторые примеры.

- Пользователь изменяет приоритет планирования для строки внутрихолдингового заказа на продажу с 20 на 30. Это изменение отражается в строке связанного внутрихолдингового заказа на покупку.
- Пользователь изменяет приоритет планирования для строки внутрихолдингового заказа на покупку с 40 на 50. Это изменение отражается в строке связанного внутрихолдингового заказа на продажу.
