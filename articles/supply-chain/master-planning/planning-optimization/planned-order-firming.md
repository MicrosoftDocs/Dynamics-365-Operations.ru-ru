---
title: Утверждение спланированных заказов
description: В этой теме объясняется, как утвердить спланированные заказы. При подтверждении спланированных заказов они становятся фактическими заказами на покупку, заказами на перемещение или производственными заказами.
author: ChristianRytt
ms.date: 04/22/2021
ms.search.form: ReqTransPo, ReqTransFirmLog
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: crytt
ms.search.validFrom: 2021-04-22
ms.dyn365.ops.version: 10.0.19
ms.openlocfilehash: ec4265f0433fbbce1e00eda206c297b54f9b8df8
ms.sourcegitcommit: 8cb031501a2b2505443599aabffcfece50e01263
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/09/2021
ms.locfileid: "7778529"
---
# <a name="firm-planned-orders"></a>Утверждение спланированных заказов

[!include [banner](../../includes/banner.md)]

Спланированные заказы должны быть *подтверждены* (то есть выпущены) как часть процесса сводного планирования. При подтверждении спланированных заказов они становятся фактическими заказами на покупку, заказами на перемещение или производственными заказами. Эти заказы также известны как *выпущенные заказы* или *открытые заказы*.

Существует три метода подтверждения спланированных заказов:

- **Подтверждение вручную** — выберите в списке конкретный спланированный заказ, а затем вручную запустите процесс.
- **Автоматическое подтверждение** — определите временную границу подтверждения по умолчанию для групп покрытия, отдельных номенклатур и комбинаций номенклатур и сводных планов. Затем во время выполнения сводного планирования спланированные заказы будут автоматически подтверждены, если дата заказа находится в пределах заданной временной границы для подтверждения.
- **Подтверждение на основе запроса** — определите запрос для выбора спланированных заказов на основе их свойств. Можно настроить пакетное задание для выполнения запроса и подтверждения совпадающих заказов по регулярному расписанию.

В этом разделе подробно описывается каждый из методов.

## <a name="enable-the-features-that-are-described-in-this-topic"></a><a name="enable-features"></a>Включите функции, описанные в этой теме

Большинство функций спланированного заказа доступны во всех стандартных установках Microsoft Dynamics 365 Supply Chain Management, в которых используется оптимизация планирования. Однако несколько функций, описанных в этом разделе, должны быть включены в управлении функциями, прежде чем их можно будет использовать.

### <a name="enable-parallelized-firming-of-planned-orders"></a>Включение параллельного подтверждения спланированных заказов

Параллельное подтверждение помогает ускорить процесс подтверждения путем параллельного выполнения в нескольких потоках. Этот подход может быть полезен, если подтверждено много спланированных заказов.

Чтобы эта функция была доступна в системе, перейдите [Управление функциями](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) и включите функцию *Параллельное подтверждение спланированных заказов*. (В Supply Chain Management версии 10.0.21 эта функция включена по умолчанию.)

### <a name="enable-planned-order-firming-with-filtering"></a>Включение подтверждения спланированного заказа с фильтрацией

При подтверждении спланированного заказа с фильтрацией можно определить логические критерии для выбора спланированных заказов для подтверждения. Можно также просмотреть выбранные спланированные заказы, выполнить процесс в фоновом режиме и/или запланировать его как пакетное задание.

Чтобы эта функция была доступна в системе, перейдите [Управление функциями](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) и включите функцию *Подтверждение спланированных заказов с фильтрацией*.

### <a name="enable-auto-firming-for-planning-optimization"></a>Включение автоматического подтверждения для оптимизации планирования

Автоматическое подтверждение позволяет подтверждать спланированные заказы в рамках процесса сводного планирования в переделах временной границы подтверждения. Автоматическое подтверждение всегда поддерживается для механизма планирования, встроенного в Supply Chain Management. Однако, чтобы использовать его в оптимизации планирования, необходимо включить функцию.

Чтобы эта функция была доступна в системе, перейдите [Управление функциями](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) и включите функцию *Автоматическое подтверждение для оптимизации планирования*. (В Supply Chain Management версии 10.0.21 эта функция включена по умолчанию.)

## <a name="manually-firm-planned-orders"></a>Подтверждение спланированных заказов вручную

Чтобы вручную подтвердить спланированные заказы, найдите и выберите спланированные заказы, которые необходимо подтвердить, а затем запустите процесс подтверждения вручную.

1. [Откройте любую страницу списка спланированных заказов](approved-planned-order.md#view-planned-orders).
1. Используйте поле **Фильтр**, **План** и заголовки столбцов, чтобы отфильтровать и отсортировать список таким образом, чтобы можно было найти требуемые спланированные заказы.
1. Выберите флажок для каждого спланированного заказа, которые необходимо подтвердить. Если необходимо подтвердить все спланированные заказы, которые в настоящее время указаны на странице (на основе примененных фильтров), пропустите этот шаг.
1. В области действий нажмите одну из следующих кнопок:

    - **Подтвердить** — подтвердить только выбранные спланированные заказы.
    - **Подтвердить все** — подтвердить все спланированные заказы, выбранные на странице (на основе примененных фильтров), независимо от выбранных флажков. Этот параметр может быть полезен при подтверждении большого количества спланированных заказов.

1. В диалоговом окне **Подтверждение** на экспресс-вкладке **Параметры** установите следующие поля. (Многие из этих полей получают значения по умолчанию из вкладки **Стандартное обновление** на странице **Параметры сводного планирования**.)

    - **Обновить маркировку** — выберите политику складской маркировки для использования при подтверждении спланированных заказов.
    - **Прервать подтверждение в случае ошибки** — установите этот параметр как *Да*, чтобы прервать подтверждение всех выбранных спланированных заказов, если в одном из них произошла ошибка. Этот параметр должен иметь значение *Нет*, если для параметра **Параллельное подтверждение** задано значение *Да*.
    - **Параллельное подтверждение** — этот параметр доступен только в том случае, если функция [*Параллельное подтверждение спланированных заказов*](#enable-features) включена в вашей и если было выбрано два или более спланированных заказов для подтверждения. Задайте значение *Да*, чтобы параллельно выполнять процессы подтверждения. Параллельное подтверждение может помочь повысить производительность.
    - **Количество потоков** — этот параметр доступен только в том случае, если функция [*Параллельное подтверждение спланированных заказов*](#enable-features) включена в вашей и для параметра **Параллельное подтверждение** выбрано значение *Да*. Введите число потоков, используемых для параллельного выполнения подтверждения. Советы по использованию этого параметра в сводном планировании см. в разделе [Повышение производительности сводного планирования](../master-planning-performance.md#number-of-threads).

        > [!NOTE]
        > Значение *0* (ноль) для поля **Количество потоков** увеличивает время выполнения сводного планирования. Поэтому рекомендуется всегда задавать в этом поле значение больше 0.

    - **Группировать по поставщику** — установите этот параметр как *Да*, чтобы сгруппировать спланированные заказы на покупку и создать один заказ на покупку для каждого поставщика в процессе подтверждения. Либо можно создать один заказ на покупку с одной строкой для каждого спланированного заказа.
    - **Группировать по группе закупщиков** — задайте для этого параметра значение *Да*, чтобы сгруппировать спланированные заказы на покупку и создать один заказ на покупку, объединяющий поставщика и группу закупщиков. Чтобы использовать этот параметр, необходимо задать параметр **Группировать по поставщику** как *Да*.
    - **Группировать по договорам покупки** — установите этот параметр в положение *Да*, чтобы сгруппировать спланированные заказы на покупку, имеющие того же поставщика в качестве существующих договоров на покупку, и создать один заказ на покупку для каждого договора покупки. Этот параметр автоматически включается, когда включен параметр **Группировать по поставщику**. Для использования **Группировать по договорам покупки** для параметра **Поиск договоров покупки** необходимо установить значение *Да* на странице **Параметры сводного планирования**.
    - **Группировать по периоду** (в разделе **Заказы на покупку**) — выберите период, по которому необходимо сгруппировать спланированные заказы на покупку. Чтобы использовать этот параметр, необходимо установить параметр **Группировать по поставщику**.
    - **Группировать по периоду** (в разделе **Перемещения**) — выберите период, по которому необходимо сгруппировать спланированные заказы на перемещение. Заказы будут сгруппированы на основе значений **Со склада** и **На склад**.

    ![Экспресс-вкладка параметров в диалоговом окне подтверждения.](./media/manual-firming.png "Экспресс-вкладка параметров в диалоговом окне подтверждения")

1. На Экспресс-вкладке **Выполнять в фоновый режиме** настройте задание таким образом, чтобы оно выполнялось в пакетном режиме. Однако при выполнении подтверждения вручную нет смысла настраивать повторяющийся график. Поля работают так же, как они работают для других типов [фоновых заданий](../../../fin-ops-core/dev-itpro/sysadmin/batch-processing-overview.md) в Supply Chain Management. Однако для подтверждения вручную пакетное задание будет обрабатывать только выбранные в данный момент спланированные заказы. При этом не будут обрабатываться никакие заказы, соответствующие фильтрам, которые в данный момент применены на странице.
1. Выберите **ОК**, чтобы применить настройки и создать спланированные заказы.

## <a name="auto-firm-planned-orders"></a>Автоматическое подтверждение спланированных заказов

Автоматическое подтверждение позволяет подтверждать спланированные заказы в рамках процесса сводного планирования. Можно определить временную границу подтверждения по умолчанию для групп покрытия, отдельных номенклатур и комбинаций номенклатур и сводных планов. Затем во время выполнения сводного планирования спланированные заказы будут автоматически подтверждены, если дата заказа находится в пределах заданной временной границы для подтверждения. Спланированные заказы, созданные оптимизацией планирования, и встроенная операция сводного планирования обрабатывают дату заказа (то есть дату начала) по-разному.

> [!NOTE]
> Автоматическое подтверждение спланированных заказов на покупку может выполняться только для номенклатур, связанных с поставщиком.
> 
> Утвержденные производные заказы (то есть субподрядные заказы на покупку) будут иметь статус *На рассмотрении*, когда включено отслеживание изменений.

> [!IMPORTANT]
> Перед тем как функция, описанная в этом разделе, может быть использована при оптимизации планирования, в вашей системе должна быть включена функция [*Автоматическое подтверждение для оптимизации планирования*](#enable-features), как описано в начале этого раздела. Автоматическое подтверждение всегда может использоваться со встроенным механизмом сводного планирования.

### <a name="auto-firming-with-planning-optimization-vs-the-built-in-planning-engine"></a>Автоматическое подтверждение с оптимизацией плана и встроенным механизмом планирования

Для автоматического подтверждения спланированных заказов можно использовать как оптимизацию планирования, так и встроенный механизм планирования. Однако существуют некоторые важные различия. Например, в то время как в оптимизации планирования используется дату заказа (то есть дата начала), чтобы определить, какие спланированные заказы должны быть подтверждены, во встроенном механизме планирования используется дата потребности (то есть дата окончания). В приведенной ниже таблице представлена сводная информация о различиях.

| Функция | Оптимизация планирования | Встроенный механизм планирования |
|---|---|---|
| **Основание даты** | Автоматическое подтверждение основано на дате заказа (дате начала). | Автоматическое подтверждение основано на дате потребности (дате окончания). |
| **Время упреждения** | Так как дата заказа (дата начала) инициирует подтверждение, нет необходимости учитывать время упреждения как часть временной границы подтверждения. | Чтобы помочь гарантировать, что заказы подтверждаются вовремя, временная граница подтверждения должна быть длиннее времени упреждения. |
| **Заказы за текущую неделю** | Чтобы подтвердить все заказы, которые должны быть запущены в течение текущей недели, временная граница подтверждения должна быть равна одной неделе. | Если необходимо подтвердить все заказы, которые должны быть запущены в течение текущей недели, временная граница подтверждения должна быть равна времени упреждения плюс одна неделя. |

### <a name="set-up-auto-firming-and-the-firming-time-fence"></a>Настройка автоматического подтверждения и временной границы подтверждения

Автоматическое подтверждение включается путем назначения временной границы автоматического подтверждения соответствующей настройке покрытия, как описано далее в этом разделе. Если автоматическое подтверждение не включено для каких-либо настроек покрытия или если планирование запускается с определенной страницы, например страницы **Чистые потребности** для выпущенного продукта, процесс автоматического подтверждения пропускается.

Параметры группировки и маркировки для автоматического подтверждения получают значения со вкладки **Стандартное обновление** на странице **Параметры сводного планирования**.

Временная граница автоматического подтверждения определяется количеством дней, которое вводится для соответствующей настройки покрытия. Можно включить автоматическое подтверждение и контролировать временную границу подтверждения следующими способами:

- Чтобы определить временную границу подтверждения по умолчанию для группы покрытия, перейдите **Сводное планирование \> Настройка \> Покрытие \> Группы покрытия** и выберите группу покрытия. Затем на экспресс-вкладке **Прочие** в поле **Временная граница автоматического подтверждения (в днях)** введите количество дней.
- Чтобы перезаписать временную границу подтверждения, которая определена для группы покрытия для конкретной номенклатуры, перейдите **Управление сведениями о продукте \> Выпущенные продукты**. В области действий выберите **План**, а затем выберите **Покрытие номенклатуры**. На вкладке **Общие** выберите **Перекрытие временных границ** и затем в поле **Временная граница автоматического подтверждения (в днях)** введите количество дней.
- Чтобы перезаписать временную границу подтверждения, определенную для группы покрытия и покрытия номенклатуры для конкретного сводного плана, перейдите **Сводное планирование \> Настройка \> Сводные планы** и выберите сводный план. Затем на экспресс-вкладке **Временная граница в днях** выберите параметр **Подтверждение** как *Да* и введите количество дней.

Если для всех ранее указанных временных границ установлено значение *0* (ноль), автоматическое подтверждение фактически отключается для соответствующих охватываемых в данный момент номенклатур.

## <a name="firm-planned-orders-by-using-a-query"></a>Подтверждение спланированных заказов с помощью запроса

Подтверждение на основе запросов позволяет планировать подтверждение на основе заранее определенных критериев. В отличие от автоматического подтверждения подтверждение на основе запросов позволяет автоматически подтверждать отдельные подмножества заказов в разные моменты времени. Кроме того, можно использовать ручные или автоматические операции для подтверждения различных типов спланированных заказов. Можно также предварительно просмотреть, какие подтвержденные заказы выбираются на основе ваших настроек. Таким образом, можно подтвердить, что выбор соответствует вашим ожиданиям.

Автоматическое подтверждение можно комбинировать с подтверждением на основе запросов. Например, задание подтверждения на основе запроса имеет временную границу перенаправления, превышающую временную границу для соответствующей конфигурации покрытия автоматического подтверждения. Таким образом, задание подтверждения на основе запроса будет обрабатывать спланированные заказы перед запуском автоматического подтверждения. Можно воспользоваться преимуществом этого поведения для планирования заказов для определённых поставщиков другим способом, нежели заказы для аналогичных продуктов других поставщиков.

> [!IMPORTANT]
> Перед тем как функция, описанная в этом разделе, может быть использована, в вашей системе должна быть включена функция [*Подтверждение спланированных заказов с фильтрацией*](#enable-features), как описано в начале этого раздела.

Чтобы подтвердить спланированный заказ, используя процесс подтверждения на основе запроса, выполните следующие действия.

1. Перейдите в раздел **Сводное планирование \> Сводное планирование \> Выполнение \> Подтверждение спланированных заказов**.
1. В диалоговом окне **Подтверждение спланированных заказов** на экспресс-вкладке **Параметры** настройте параметры базовой обработки, маркировки и группировки. Эти параметры работают так же, как и в диалоговом окне **Подтверждение**. (Описание см. в предыдущем разделе.) Затем в разделе **План** задайте следующие поля, которые являются уникальными для диалогового окна **Подтверждение спланированного заказа**:

    - **План** — выберите сводный план, который должен применяться при подтверждении спланированных заказов, найденных данным запросом.
    - **Временная граница подтверждения, дней вперед** —выберите, как далеко в будущем должны рассчитываться различные потребности и другие аспекты при сводном планировании.
    - **Временная граница подтверждения, дней назад** —выберите, как далеко в прошлом должны рассчитываться различные потребности и другие аспекты при сводном планировании.

    ![Экспресс-вкладка параметров в диалоговом окне подтверждения спланированного заказа.](./media/planned-order-firming-main-1.png "Экспресс-вкладка параметров в диалоговом окне подтверждения спланированного заказа")

1. Чтобы указать, какие записи должны быть включены в заказ, нажмите кнопку **Фильтр** на экспресс-вкладке **Записи для добавления**. Появится стандартное диалоговое окно запроса, в котором можно определить критерии выбора, критерии сортировки и соединения. Поля работают так же, как они работают для других типов запросов в Supply Chain Management. Поля доступны только для чтения и содержат значения, которые связаны с запросом.

    ![Экспресс-вкладка записей для добавления в диалоговом окне подтверждения спланированного заказа.](./media/planned-order-firming-main-2.png "Экспресс-вкладка записей для добавления в диалоговом окне подтверждения спланированного заказа")

1. Выберите **Предварительный просмотр** для предварительного просмотра содержимого подтвержденного заказа на основе ваших настроек на данный момент времени. Список спланированных заказов, которые будут утверждены, отображается как сообщение. После этого можно скорректировать настройки нужным образом, пока в окне предварительного просмотра не будет показан утвержденный заказ в том виде, в котором он предполагается.

    ![Пример предварительного просмотра подтвержденного заказа.](./media/planned-order-firming-preview.png "Пример предварительного просмотра подтвержденного заказа")

    > [!WARNING]
    > Эта функция подтверждает все спланированные заказы, соответствующие критерию фильтрации. Некритическое подтверждение спланированных заказов может привести к созданию большого количества нежелательных заказов на покупку, перемещение и производство. Перед продолжением следует всегда использовать кнопку **Предварительный просмотр**, чтобы проверять записи, которые будут включены в процесс.

1. На экспресс-вкладке **Выполнять в фоновый режиме** настройте задание таким образом, чтобы оно выполнялось в пакетном режиме, и/или настройте повторяющийся график. Поля работают так же, как они работают для других типов [фоновых заданий](../../../fin-ops-core/dev-itpro/sysadmin/batch-processing-overview.md) в Supply Chain Management.
1. Выберите **ОК**, чтобы применить настройки и создать спланированные заказы.

## <a name="track-firmed-orders"></a>Отслеживание подтвержденных заказов

Для отслеживания спланированного заказа, который был подтвержден, выполните следующие действия.

1. [Откройте любую страницу списка спланированных заказов](approved-planned-order.md#view-planned-orders).
1. Откройте или выберите спланированный заказ, который нужно отслеживать.
1. В области действий на вкладке **Вид** в группе **Вид** выберите **История подтверждений**.

[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
