---
title: Выполнение резервного запаса для номенклатур
description: В этом разделе обсуждается выполнение резервного запаса и порядок настройки количества резервного запаса для номенклатур.
author: roxanadiaconu
manager: tfehr
ms.date: 11/27/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ReqSafetyKey, ReqItemTableSetup, ReqItemJournalName, ReqItemTable, EcoResProductDetailsExtended, ReqSafetyKeyDefaultDataWizard
audience: Application User, IT Pro
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: kamaybac
ms.dyn365.ops.version: 7.2999999999999998
ms.search.validFrom: 2017-12-31
ms.openlocfilehash: d97fd3e441c08152dc151a95b80cbf73d93d8fca
ms.sourcegitcommit: eaf330dbee1db96c20d5ac479f007747bea079eb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/15/2021
ms.locfileid: "5247894"
---
# <a name="safety-stock-fulfillment-for-items"></a>Выполнение резервного запаса для номенклатур

[!include [banner](../includes/banner.md)]

Резервный запас указывает дополнительное количество номенклатуры, хранящееся в запасах, чтобы уменьшить риск того, что номенклатура будет отсутствовать на складе. Резервный запас используется в качестве буферного запаса в случае, если поступил заказ на продажу, а поставщик не может доставить дополнительное количество номенклатур для удовлетворения запрошенной клиентом даты отгрузки. При использовании резервного запаса для выполнения заказа на продажу резервный запас уменьшается. Можно использовать сводное планирование, чтобы автоматически довести запасы снова до безопасного уровня.    

## <a name="set-up-safety-stock-levels-for-items"></a>Настройка уровней резервного запаса для номенклатур

Резервный запас настраивается как часть покрытия номенклатуры на странице **Покрытие номенклатуры** в пункте **Выпущенные продукты** > **План** > **Покрытие**.

В поле **Минимум** введите уровень резервных запасов, который требуется поддерживать для номенклатуры. Это значение задается в ед. изм. складского учета. Если поле остается пустым, значением по умолчанию будет ноль. Это поле доступно при выборе **Период**, **Потребность** или **Мин/Макс** в списке **Код покрытия**. Предел уровня запасов применяется к доступным запасам; это означает, что резервирование и отметка могут запускать пополнение резервного запаса до того, как физическое количество запасов станет ниже указанного минимального уровня.

> [!NOTE]
> Перед определением поля **Минимум** необходимо определить все остальные аналитики спланированного покрытия. Это предотвращает использование недопустимой записи при сводном планировании. Такая ситуация может возникнуть, например, при расширении группы аналитик путем добавления дополнительной аналитики спланированного покрытия, для которой еще не определены минимальное и максимальное значения количества запасов.

Можно использовать минимальные ключи резервного запаса для управления сезонными колебаниями спроса. Например, можно снизить минимальный уровень запаса номенклатуры в сезон спала и затем постепенно увеличивать его в последующие месяцы. Минимальный ключ резервного запаса создается путем выбора пункта **Сводное планирование** > **Настройка** > **Покрытие** > **Ключи резервного запаса**. Минимальный ключ резервного запаса для настройки уровня резервного запаса в зависимости от сезона можно указать в поле **Ключ резервного запаса** на странице **Покрытие номенклатуры**. 

## <a name="example-minimum-key"></a>Пример. Ключ резервного запаса
Если вы хотите настроить ключ резервного запаса, который учитывает увеличение сезонного спроса в весенние и летние месяцы, перейдите к пункту **Сводное планирование** > **Настройка** > **Покрытие** > **Ключи резервного запаса** и выполните следующие действия.

1. Создайте 12 строк и назначьте строкам номера от 1 до 12 в поле **Изменить**.
2. В поле **Единица измерения** выберите **Месяцы**.
3. В поле **Коэффициент** введите значения, описанные в следующей таблице.

|Линейная|Введите данное значение.|Результат|
|---|---|---|
|1-3|1|Для периода с января по март для обеспечения минимального складского запаса используется параметр на странице **Покрытие номенклатуры**.|
|4–5|2|Для апреля и мая минимальный запас умножается на коэффициент 2.|
|6–8|2,5|Для периода с июня по август минимальный запас умножается на коэффициент 2,5.|
|9–12|1|Для периода с сентября по декабрь минимальный запас возвращается к параметру, указанному на странице **Покрытие номенклатуры**.|

Если код покрытия имеет значение **Мин./Макс.**, можно также указать количество запасов **Максимум**, которое необходимо поддерживать для номенклатуры. Это значение также задается в единицах измерения складского учета. Если ожидаемый доступный запас опускает ниже минимального количества, сводное планирование генерирует запланированный заказ для пополнения всех открытых требований и доводит доступные запасы до указанного максимального количества. Также как и при настройке параметра **Минимум**, перед определением поля **Максимум** необходимо определить все остальные аналитики спланированного покрытия.

## <a name="example-minmax-coverage-code"></a>Пример. Код покрытия "Мин/макс"
Минимальное количество равно 10, максимальное количество равно 15. Текущие запасы в наличии — 4. Это дает минимальную потребность в размере 6. Однако поскольку максимальное количество равно 15, сводное планирование генерирует запланированный заказ на 11 единиц.

Для номенклатур с сезонным спросом может потребоваться поддерживать различные максимальные уровни. Чтобы сделать это, необходимо определить **Максимальные ключи резервного запаса**, перейдя к пункту **Сводное планирование** > **Настройка** > **Покрытие** > **Ключи резервного запаса**. Заполните поле **Максимальный ключ** на странице **Покрытие номенклатуры**. Можно просмотреть сведения об уровнях резервного запаса, определенных через ключи минимального резервного запаса, на вкладке **Мин./Макс.** на странице **Покрытие номенклатуры**. Необходимо убедиться в том, что в течение определенного периода минимальное и максимальное значения синхронизированы.

## <a name="safety-stock-fulfillment"></a>Выполнение резервного запаса 

Параметр **Гарантированный минимум** позволяет выбрать дату или период времени, в течение которого складской уровень должен отвечать количеству, указанному в поле **Минимум**. Это поле доступно при выборе **Период**, **Потребность** или **Мин/Макс** в списке **Код покрытия**.

Если используется параметр **Минимальные ключи**, установите флажок **Минимальные периоды** для выполнения требований минимального складского уровня для всех периодов, настроенных для минимального ключа. При снятом флажке минимальный запас выполняется только для за текущего периода.

Следующий сценарий показывает, как работает этот параметр и каковы различия между его значениями.

> [!NOTE]
> Для всех иллюстраций в этом разделе по оси x откладываются запасы, по оси y откладывается время в днях, столбцы представляют уровень запасов, стрелки показывают проводки, такие как строки заказов на продажу, строки заказов на покупку или спланированные заказы.

[![Распространенный сценарий для выполнения резервного запаса](./media/Scenario1.png)](./media/Scenario1.png) Параметр **Гарантированный минимум** может иметь следующие значения:
### <a name="todays-date"></a>Сегодняшняя дата 
Указанное минимальное количество достигается в день выполнения сводного планирования. Система пытается удовлетворить лимит резервных запасов как можно раньше, даже если это может быть нереально из-за времени упреждения. 
[![Потребность на текущую дату](./media/TodayReq.png)](./media/TodayReq.png) Спланированный заказ P1 создается для текущей даты, чтобы сделать доступные запасы выше уровня резервного запаса на эту дату. Строки заказа на продажу от S1 до S3 продолжают снижать уровень запасов. Спланированные заказы от P2 до P4 создаются сводным планирования, чтобы уровень запасов возвращался к пределу резервного запаса после каждого требования заказа на продажу.
Если используется код покрытия **Потребность**, создаются несколько спланированных заказов. Рекомендуется всегда использовать покрытие **Период** или **Мин./Макс.** для номенклатур и материалов с высоким спросом, чтобы пополнение производилось партиями. На следующем рисунке приведен пример для кода покрытия **Период**.
[![Период. Текущая дата](./media/TodayPeriod.png)](./media/TodayPeriod.png) На следующем рисунке приведен пример для кода покрытия **Мин./Макс.**.
[![Мин./Макс. Текущая дата](./media/TodayMinMax.png)](./media/TodayMinMax.png)
### <a name="todays-date--procurement-time"></a>Сегодняшняя дата + время приобретения 
Указанное минимальное количество достигается в день, когда запускается сводное планирование плюс время упреждения для доставки или производства. Это время включает все резервное время. Если номенклатура отвечает коммерческому соглашению и флажок **Поиск коммерческих соглашений** на странице **Параметры сводного планирования** установлен, время доставки из коммерческого соглашения не учитывается. Время упреждения берется из настроек покрытия номенклатуры или из номенклатуры.
В этом режиме выполнения создаются планы с меньшими задержками и меньшим числом спланированных заказов, независимо от группы покрытия для номенклатуры. На следующем рисунке показан результат плана, если код покрытия имеет значение **Потребность** или **Период**.  
[![Потребность. Период. Текущая дата и время упреждения](./media/TodayPLTReq.png)](./media/TodayPLTReq.png) На следующем рисунке показан результат плана, если код покрытия имеет значение **Мин./Макс.**.  
[![Мин./Макс. Текущая дата и время упреждения](./media/TodayPLTMinMax.png)](./media/TodayPLTMinMax.png)
### <a name="first-issue"></a>Первый расход 
Указанное минимальное количество достигается в день, когда доступные запасы опускаются ниже минимального уровня, как показано на следующем рисунке. Даже если доступные запасы находятся ниже минимального уровня на дату выполнения сводного планирования, **Первый расход** не будет пытаться покрыть их до поступления следующей потребности.
На следующем рисунке приведен пример для кода покрытия **Потребность**.
[![Планирование номенклатуры с кодом покрытия **Потребность** и выполнение **Первый расход**](./media/FirstIssueReq.png)](./media/FirstIssueReq.png) На следующем рисунке представлен пример для покрытия кода **Период**.
[![Планирование номенклатуры с кодом покрытия **Период** и выполнение **Первый расход**](./media/FirstIssuePeriod.png)](./media/FirstIssuePeriod.png) На следующем рисунке представлен пример для покрытия кода **Мин./Макс.**.
[![Планирование номенклатуры с кодом покрытия **Мин./Макс.** и выполнение **Первый расход**](./media/FirstIssueMinMax.png)](./media/FirstIssueMinMax.png) Если на дату выполнения сводного планирования доступные запасы уже ниже лимита резервного запаса, значения **Текущая дата** и **Текущая дата + время приобретения** будут немедленно активировать пополнение. Значение **Первый расход** будет ожидать следующей проводки расхода, такой как заказ на продажу и потребность в строке спецификации, для номенклатуры, а затем запускает пополнение на дату этой проводки. Если на дату выполнения сводного планирования доступные запасы не находятся ниже лимита резервного запаса, значения **Текущая дата** и **Первый расход** обеспечивают абсолютно одинаковый результат, как показано на приведенном ниже рисунке. 

[![NotUnderLimit](./media/ReqFirstIssue.png)](./media/ReqFirstIssue.png) Если на дату сводного планирования доступные запасы не находятся ниже лимита резервного запаса, значение **Текущая дата + время приобретения** обеспечит следующий результат, поскольку оно откладывает выполнение до завершения времени упреждения закупки продукции.
![Планирование номенклатуры с кодом покрытия **Потребность** и выполнением **Первый расход**](./media/ReqTodayLT.png)
### <a name="coverage-time-fence"></a>Временная граница покрытия
Указанное минимальное количество достигается в течение периода, указанного в поле **Временная граница покрытия**. Этот параметр полезен, когда сводное планирование не разрешает использовать доступные запасы для фактических заказов, таких как продажи или перемещения, пытаясь сохранить уровень резервных запасов. Однако в будущих выпусках этот режим пополнения больше не требуется, и этот параметр будет считаться устаревшим.
## <a name="plan-safety-stock-replenishment-for-first-expired-first-out-fefo-items"></a>Планирование пополнения резервных запасов для номенклатур типа FEFO (первоочередной отпуск товаров с ближайшим истечением срока годности)
В любой момент времени приход запасов с самой поздней датой окончания срока годности будет использоваться для резервного запаса, чтобы реальный спрос, такой как строки продажи или строки спецификации, выполнялся в порядке FEFO (первоочередной отпуск товаров с ближайшим сроком годности).
Чтобы показать, как это происходит, рассмотрим следующий сценарий.
[![FEFOScenario](./media/FEFOScenario.png)](./media/FEFOScenario.png) При выполнении планирования оно покрывает первый заказ на продажу из существующих запасов в наличии и дополнительный заказ на покупку для оставшегося количества.
[![FEFO1](./media/FEFO1.png)](./media/FEFO1.png) Создается спланированный заказ, чтобы привести доступные запасы обратно к пределу резервных запасов.
[![FEFO2](./media/FEFO2.png)](./media/FEFO2.png) При планировании второго заказа на продажу ранее созданный спланированный заказ, который охватывает резервное количество, используется для покрытия этого количества. Таким образом, резервный запас постоянно меняется.
[![FEFO3](./media/FEFO3.png)](./media/FEFO3.png) Наконец, создается другой спланированный заказ для покрытия резервного запаса.
[![FEFO4](./media/FEFO4.png)](./media/FEFO4.png) Срок годности всех партий истекает соответствующим образом, и спланированные заказы создается для пополнения резервного запаса по истечении срока годности.

## <a name="how-master-planning-handles-the-safety-stock-constraint"></a>Как сводное планирование обрабатывает ограничения резервного запаса

Резервный запас отслеживается в системе как тип требования, точно так же, как строки продаж или требования спецификации. Можно просмотреть строку требования резервного запаса на странице **Чистые потребности**, если удалить фильтр по умолчанию в столбце **Тип требования**.

Выполнение проводки требования резервного запаса имеет низкий приоритет, если система определяет, что это вызывает задержки в удовлетворении реального спроса, такого как строки продаж, строки спецификаций, требования перемещения или строки прогноза спроса. В противном случае обеспечения того, что доступные запасы превышают количество резервного запаса, имеет тот же приоритет, как и любые другие типы спроса. Это гарантирует отсутствие задержек реальных проводок и помогает предотвратить избыточное пополнение и слишком ранее пополнения резервных запасов.

На этапе покрытия сводного планирования пополнение резервных запасов больше не имеет пониженный приоритет. Запасы в наличии могут использоваться до любых других типов спроса. Во время вычисления задержки новая логика будет добавлен для просмотра задержанных строки продаж, потребностей строк спецификации и всех другие типов спроса, чтобы определить, могут ли они быть доставлены в срок, при условии использования резервного запаса. Если система определяет, что может минимизировать задержки с помощью резервных запасов, то в строках продажи или строках спецификации их первоначальное покрытие будет заменено на резервный запас, и взамен система активирует пополнение резервного запаса.

Если план и номенклатура не настроены для расчета задержки, то ограничение резервного запаса будет иметь тот же приоритет, что и любые другие типы спроса. Это означает, что имеется резервирование наличных запасов и других доступных запасов до других типов спроса.


[!INCLUDE[footer-include](../../includes/footer-banner.md)]