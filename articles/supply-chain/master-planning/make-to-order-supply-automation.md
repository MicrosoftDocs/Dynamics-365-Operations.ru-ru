---
title: Автоматизация поставок по индивидуальным заказам
description: В этой статье описывается, как настроить и использовать различные усовершенствования, добавленные функцией автоматизации поставок по индивидуальным заказам.
author: t-benebo
ms.date: 07/27/2022
ms.topic: article
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: benebotg
ms.search.validFrom: 2022-07-27
ms.dyn365.ops.version: 10.0.29
ms.openlocfilehash: d376c2f4d8514a4e6122e2e94455d57a39d2babf
ms.sourcegitcommit: 491ab9ae2b6ed991b4eb0317e396fef542d3a21b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/03/2022
ms.locfileid: "9740203"
---
# <a name="make-to-order-supply-automation"></a>Автоматизация поставок по индивидуальным заказам

[!include [banner](../includes/banner.md)]

Функция *Автоматизация поставок по индивидуальным заказам* добавляет несколько усовершенствований в Microsoft Dynamics 365 Supply Chain Management. Эти усовершенствования позволяют выполнять перечисленные ниже задачи.

- Просмотр максимальной мощности ресурсов для определяемого пользователем периода позволяет выполнять долгосрочную оценку максимальной мощности.
- Для повышения гибкости можно контролировать допустимое отклонение задержки (отрицательные дни) для каждого сводного плана.
- Обеспечение доступности продуктов для срочных заказов и оптимизация использования существующих поставок за счет привязки самой последней возможной поставки к спросу вместо использования первой возможной поставки.
- Поддержание гибкости выделения компонентов для производственных заказов после подтверждения, чтобы система могла оптимизироваться с учетом оперативных изменений спроса. Иными словами, ограничение помечается на один уровень.
- Управление политикой выполнения для каждого заказа на продажу. Параметры по умолчанию берутся из настройки клиента.
- Оптимизация потоков информации внутри компании. Заказы на покупку обновляются таким образом, чтобы они включали поля для режима поставки, условий поставки и внешнего кода номенклатуры. Это изменение обеспечивает передачу подробной информации о спросе в компанию, осуществляющую поставку.

В этой статье описывается, как настроить и использовать каждое усовершенствование.

## <a name="turn-on-the-make-to-order-supply-automation-feature"></a>Включение функции "Автоматизация поставок по индивидуальным заказам"

Прежде чем использовать функцию, описанную в этой статье, необходимо включить ее в системе. Администраторы могут использовать рабочую область [Управление функциями](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md), где эта функция обозначена следующим образом:

- **Модуль:** *Сводное планирование*
- **Название функции:** *Автоматизация поставок по индивидуальным заказам*

## <a name="set-the-number-of-days-to-show-on-capacity-load-page"></a>Установка количества дней для отображения на странице "Максимальная мощность"

Страница **Максимальная мощность** позволяет просматривать доступную мощность ресурса. Функция *Автоматизация поставок по индивидуальным заказам* позволяет расширить функциональность страницы **Максимальная мощность**, добавив поле **Количество дней**. Это поле можно использовать для ограничения количества дней, отображаемого в сетке **Обзор**. Заданное значение сохраняется в памяти. То есть, если закрыть страницу, а потом снова вернуться на нее, сетка **Обзор** будет по-прежнему показывать количество дней, указанное последним.

Чтобы открыть страницу **Максимальная мощность** и просмотреть доступную мощность для отдельного ресурса, выполните следующие действия.

1. Перейдите в раздел **Управление организацией \> Ресурсы \> Ресурсы**.
1. Выберите ресурс для проверки.
1. В области действий на вкладке **Ресурс** выберите в группе **Просмотр** пункт **Максимальная мощность**.
1. Используйте фильтр **Количество дней**, чтобы ограничить количество дней, отображаемых в сетке **Обзор**.

Чтобы открыть страницу **Максимальная мощность** и просмотреть доступную мощность для группы ресурсов, выполните следующие действия.

1. Перейдите в раздел **Управление организацией \> Ресурсы \> Группы ресурсов**.
1. Выберите группу ресурсов для проверки.
1. В области действий на вкладке **Группа ресурсов** выберите в группе **Просмотр** пункт **Максимальная мощность**.
1. Используйте фильтр **Количество дней**, чтобы ограничить количество дней, отображаемых в сетке **Обзор**.

## <a name="apply-a-single-level-of-marking-when-you-firm-planned-orders"></a>Применение одного уровня маркировки при утверждении спланированных заказов

*Маркировка* используется для связывания поставок и спроса. Она напоминает *определение источника потребности*, которая определяет, как сводное планирование предполагает покрывать спрос. Однако маркировка является более постоянной, чем определение источника потребности. Функция *Автоматизация поставок по индивидуальным заказам* добавляет возможность ограничения разметки запасов на один уровень при утверждении спланированных заказов. При утверждении спланированного заказа в поле **Обновить маркировку** в диалоговом окне **Утверждение** добавляются следующие новые параметры:

- *Один уровень, стандартный* — используется одноуровневая маркировка. Одноуровневая маркировка отмечает только основную номенклатуру, но не компоненты ее спецификации. Таким образом, можно сохранить назначение компонентов для производственных заказов в гибком виде после утверждения. Режим одноуровневой маркировки позволяет системе оптимизировать срочные изменения спроса. В *стандартной* одноуровневой маркировке заказы требований маркируются по их заказам выполнения, но заказы на выполнение не отмечаются, если в них есть оставшееся количество.
- *Один уровень, расширенная* — используется одноуровневая маркировка. В *расширенной* одноуровневой маркировке заказы требований маркируются по их заказам выполнения и заказы на выполнение всегда отмечаются, вне зависимости от того, остается ли какое-либо количество.

Эти параметры также доступны в поле **Обновить маркировку** на вкладке **Стандартное обновление** на странице **Параметры сводного планирования**, где определяется выбор по умолчанию для диалогового окна **Утверждение**.

Для получения дополнительной информации см. раздел [Маркировка запасов](planning-optimization/marking.md).

## <a name="set-delay-tolerance-negative-days-at-the-master-plan-level"></a>Задание допустимого отклонения задержки (отрицательных дней) на уровне сводного плана

Функция *Автоматизация поставок по индивидуальным заказам* добавляет возможность настройки допустимого отклонения задержки (отрицательных дней) на уровне сводного плана. Эта настройка доступна также на уровнях покрытия номенклатуры и группы покрытия. Если отрицательные дни назначены на нескольких уровнях, система применяет для выбора параметра, который будет использоваться, описанную ниже иерархию.

- Если отрицательные дни настроены на странице **Сводные планы**, этот параметр переопределяет при выполнении плана все прочие настройки отрицательных дней.
- Если отрицательные дни настроены на странице **Покрытие номенклатуры**, эта настройка переопределяет настройку группы покрытия.
- Отрицательные дни, настроенные на странице **Группы покрытия**, применяются только в том случае, если отрицательные дни не были настроены для соответствующей номенклатуры или сводного плана.

Чтобы задать отрицательные дни для сводного плана, выполните следующие действия.

1. Выберите **Сводное планирование \> Настройка \> Планы \> Сводные планы**.
1. Выберите сводный план на панели списка или создайте новый.
1. На экспресс-вкладке **Временные границы в днях** задайте для параметра **Отрицательные дни** значение *Да*.
1. В расположенном рядом поле введите допустимое количество отрицательных дней.

Дополнительные сведения об использовании отрицательных дней см. в разделе [Допуск задержки (отрицательные дни)](planning-optimization/delay-tolerance.md).

## <a name="control-the-pegging-sequence-used-during-master-planning"></a>Контроль последовательности информации об источниках потребности, используемой при сводном планировании

В сводном планировании используется *информация об источниках потребности*, чтобы определить, какой спрос будет удовлетворять определенное предложение. Функция *Автоматизация поставок по индивидуальным заказам* добавляет новый параметр **Использовать самую позднюю возможную поставку**, который обеспечивает более полный контроль над последовательностью информации об источниках потребности. Новый параметр помогает обеспечивать доступность продуктов для срочных заказов и оптимизацию использования существующих поставок за счет привязки самой последней возможной поставки к спросу вместо использования первой возможной поставки.

Можно настроить последовательность информации об источниках потребности на уровне сводного плана, покрытия номенклатуры или группы покрытия. Если последовательность информации об источниках потребности задана на нескольких уровнях, система применяет для выбора параметра, который будет использоваться, описанную ниже иерархию.

- Если последовательность информации об источниках потребности настроена на странице **Сводный план**, эта настройка переопределяет все остальные настройки последовательности информации об источниках потребности при выполнении плана.
- Если последовательность информации об источниках потребности определена на странице **Покрытие номенклатуры**, эта настройка переопределяет настройку группы покрытия.
- Последовательность информации об источниках потребности, настроенная на странице **Группы покрытия**, применяется только в том случае, если параметры последовательности информации об источниках потребности не настроены для соответствующего элемента или сводного плана.

Чтобы настроить информацию об источниках потребности на уровне группы покрытия, выполните следующие действия.

1. Выберите **Сводное планирование \> Настройка \> Покрытие \> Группы покрытия**.
1. Выберите группу на панели списка или создайте новую.
1. На экспресс-вкладке **Общие** в разделе **Последовательность определения источника потребности** используйте поля **Использовать запасы в наличии** и **Использовать самую позднюю поставку** для настройки вашей последовательности информации об источниках потребности. В таблице далее в этом разделе показано, как объединяются эти настройки для определения вашей последовательности информации об источниках потребности.

Чтобы настроить информацию об источниках потребности на уровне покрытия номенклатур, выполните следующие действия.

1. Выберите **Управление сведениями о продукте \> Продукты \> Выпущенные продукты**.
1. Выберите продукт в сетке или создайте новый.
1. В области действий на вкладке **План** выберите **Покрытие номенклатуры**.
1. Страница **Покрытие номенклатуры** содержит строки, которые позволяют определить правила покрытия, применяемые к номенклатуре на каждом складе. Выберите существующую строку сетки или создайте новую.
1. На вкладке **Общие** установите флажок **Переопределить последовательность определения источника потребности**.
1. Используйте поля **Использовать запасы в наличии** и **Использовать самую позднюю поставку** для настройки последовательности информации об источниках потребности. В таблице далее в этом разделе показано, как объединяются эти настройки для определения вашей последовательности информации об источниках потребности.

Чтобы настроить информацию об источниках потребности на уровне сводного плана, выполните следующие действия.

1. Выберите **Сводное планирование \> Настройка \> Планы \> Сводные планы**.
1. Выберите сводный план на панели списка или создайте новый.
1. На экспресс-вкладке **Общие** задайте для параметра **Переопределить последовательность определения источника потребности** значение *Да*.
1. Используйте поля **Использовать запасы в наличии** и **Использовать самую позднюю поставку** для настройки последовательности информации об источниках потребности. В таблице далее в этом разделе показано, как объединяются эти настройки для определения вашей последовательности информации об источниках потребности.

В приведенной ниже таблице показано, как объединять параметры **Использовать запасы в наличии** и **Использовать самую позднюю поставку** для формирования последовательности определения источника потребности.

| | Использовать самую позднюю поставку = Да | Использовать самую позднюю поставку = Нет |
|---|---|---|
| **Использовать запасы в наличии** = *Перед всеми прочими источниками* | <ol><li>В наличии</li><li>Имеющиеся запасы, которые могут соответствовать дате спроса</li><li>Имеющиеся запасы, которые на соответствуют дате спроса, но еще находятся в пределах отрицательных дней</li><li>Создать новые запасы (планируемый заказ)</li></ol> | <ol><li>В наличии</li><li>Имеющиеся запасы, которые могут соответствовать дате спроса</li><li>Имеющиеся запасы, которые на соответствуют дате спроса, но еще находятся в пределах отрицательных дней</li><li>Создать новые запасы (планируемый заказ)</li></ol> |
| **Использовать запасы в наличии** = *После всех прочих источников* | <ol><li>Имеющиеся запасы, которые могут соответствовать дате спроса</li><li>В наличии</li><li>Имеющиеся запасы, которые на соответствуют дате спроса, но еще находятся в пределах отрицательных дней</li><li>Создать новые запасы (планируемый заказ)</li></ol> | <ol><li>Имеющиеся запасы, которые могут соответствовать дате спроса</li><li>Имеющиеся запасы, которые на соответствуют дате спроса, но еще находятся в пределах отрицательных дней</li><li>В наличии</li><li>Создать новые запасы (планируемый заказ)</li></ol> |

## <a name="review-and-set-the-fulfillment-policy-that-applies-to-each-sales-order"></a>Просмотр и настройка политики выполнения, которая применяется к каждому заказу на продажу

Политики выполнения управляют процентом от общей цены или количества заказа, который необходимо физически зарезервировать, прежде чем заказ на продажу можно будет выпустить на склад. Можно настроить глобальную политику выполнения по умолчанию, а затем переопределить ее для определенных клиентов нужным образом. Функция *Автоматизация поставок по индивидуальным заказам* позволяет определить, какая политика по умолчанию фактически применяется для любого заказа, и при необходимости применить переопределение для определенного заказа.

- Чтобы задать глобальную политику выполнения по умолчанию для заказов на продажу, перейдите в раздел **Расчеты с клиентами \> Настройка \> Параметры модуля расчетов с клиентами**. Затем на вкладке **Управление складом** задайте в поле **Политика выполнения заказов на продажу** имя политики, которую необходимо использовать. 
- Чтобы настроить для конкретного клиента политику выполнения для заказов на продажу, перейдите в раздел **Расчеты с клиентами \> Клиенты \> Все клиенты**. Затем на вкладке **Управление складом** задайте в поле **Политика выполнения** имя политики, которую необходимо использовать.

Чтобы просмотреть политику по умолчанию, которая применяется к любому заказу, и применить переопределение для определенного заказа, выполните следующие действия.

1. Перейдите в раздел **Продажи и маркетинг \> Заказы на продажу \> Все заказы на продажу**.
1. Откройте заказ на продажу, который хотите проверить или изменить.
1. Выберите представление **Заголовок**.
1. На экспресс-вкладке **Склад** просмотрите следующие поля и при необходимости внесите изменения в них:

    - **Политика выполнения заказов** — выберите политику выполнения, которая будет использоваться для выбранного заказа. Политика по умолчанию будет переопределена. Чтобы использовать политику выполнения по умолчанию, которая отображается в поле **Политика выполнения по умолчанию**, оставьте это поле пустым.
    - **Политика выполнения по умолчанию** — в этом поле отображается политика выполнения по умолчанию, которая применяется, если поле **Политика выполнения заказа** пусто. Это поле может использоваться только для чтения. Если поле пусто, никакая политика для определенного клиента или глобальная политика выполнения по умолчанию не определена.

    Если пустыми остаются оба поля (**Политика выполнения заказа** и **Политика выполнения по умолчанию**), не используется никакая политика выполнения. Однако могут действовать другие ограничения, которые могут потребовать, чтобы были выполнены резервирования или другие условия, прежде чем заказ на продажу можно будет выпустить.

## <a name="set-the-delivery-mode-and-terms-on-individual-purchase-order-lines"></a>Настройка режима доставки и условий для отдельных строк заказа на покупку

Все заказы на покупку включают в себя параметры **Условия поставки** и **Способ поставки** в заголовке заказа. Функция *Автоматизация поставок по индивидуальным заказам* добавляет эти настройки в каждую строку заказа. Таким образом, при необходимости можно определить переопределения для параметров **Условия поставки** и/или **Способ поставки** для любой или всех строк заказа. Для строк, в которых не определено переопределение, используется значение из заголовка. Можно указать, следует ли обновить значение одного или обоих полей в заголовке заказа, а также изменить все строки.

Чтобы указать, что должно происходить с параметрами строки, если пользователь изменяет **Условия поставки** и/или **Способ поставки** в заголовке заказа, выполните следующие действия.

1. Выберите **Закупки и источники \> Настройка \> Параметры модуля "Закупки и источники"**.
1. На вкладке **Общие** на экспресс-вкладке **Значения и параметры по умолчанию** выберите ссылку **Обновить строки заказа**.
1. В диалоговом окне **Обновление строк заказа** в полях **Обновление условий поставки** и **Обновить способа поставки** выберите одно из следующих значений:

    - *Никогда* — никогда не обновлять строки заказа после изменения настроек в заголовке заказа.
    - *Всегда* — всегда обновлять все строки заказа после изменения настроек в заголовке заказа.
    - *Подсказка* — если пользователь изменяет один или оба параметра в заголовке заказа, открывается диалоговый бот, уточняющий, хочет ли пользователь обновить все строки, чтобы они соответствовали изменению этих параметров.

Чтобы указать сведения о доставке в заголовке заказа на покупку, выполните следующие действия.

1. Перейдите в раздел **Закупки и источники \> Заказы на покупку \> Все заказы на покупку**.
1. Откройте заказ на покупку, который хотите проверить или изменить.
1. Выберите представление **Заголовок**.
1. На экспресс-вкладке **Поставка** введите нужные значения в поля **Способ поставки** и **Условия поставки**.
1. В зависимости от настроек на странице **Параметры модуля "Закупки и источники"**, возможно, будет предложено указать, следует ли применять изменения ко всем строкам заказа.

Чтобы установить переопределения для сведений о доставке в строке заголовке заказа на покупку, выполните следующие действия.

1. Перейдите в раздел **Закупки и источники \> Заказы на покупку \> Все заказы на покупку**.
1. Откройте заказ на покупку, который хотите проверить или изменить.
1. Выберите представление **Строки**.
1. На экспресс-вкладке **Строки заказа на покупку** выберите строку, которую нужно изменить.
1. На экспресс-вкладке **Сведения строки** на вкладке **Поставка** укажите нужные значения в полях **Способ поставки** и **Условия поставки**. Для использования соответствующих параметров в заголовке следует очистить одно или оба поля.

Для внутрихолдинговых заказов значения полей **Способ поставки** и **Условия поставки** в каждой строке заказа на покупку будут синхронизированы между заказом на покупку и соответствующим заказом на продажу.

## <a name="sync-external-item-ids-and-descriptions-for-intercompany-orders"></a>Синхронизация кодов и описаний внешних номенклатур для внутрихолдинговых заказов

В случае внутрихолдинговых заказов функция *Автоматизация поставок по индивидуальным заказам* позволяет синхронизировать коды внешних номенклатур и текстовые описания строк заказа на покупку с соответствующими строками внутрихолдингового заказа на продажу, независимо от того, относится ли заказ на покупку к прямой поставке. Эта функция также позволяет указать итоговый счет внешнего клиента во внутрихолдинговом заказе на покупку. Затем система автоматически подставит коды внешних номенклатур и текстовые описания из записи внешнего клиента вместо записи (внутреннего) внутрихолдингового поставщика.

Чтобы настроить внутрихолдингового поставщика для синхронизации внешних кодов номенклатур и наименований номенклатур между внутрихолдинговыми заказами на покупку и соответствующими внутрихолдинговыми заказами на продажу, выполните следующие действия.

1. Перейдите в раздел **Закупки и источники \> Поставщики \> Все поставщики**.
1. Выберите внутрихолдингового поставщика, которого необходимо настроить.
1. В области действий на вкладке **Общие** в группе **Настроить** выберите пункт **Внутрихолдинговый**.
1. На странице **Внутрихолдинговый** на вкладке **Политики заказа на покупку** в разделе **Внутрихолдинговый заказ на покупку -\> Внутрихолдинговый заказ на продажу** установите флажок **Внешний ИД номенклатуры и наименование номенклатуры**.

Чтобы указать итоговый счет внешнего клиента для внутрихолдингового заказа на покупку, выполните указанные ниже действия. Поле **Счет клиента** применяется только для внутрихолдинговых заказов на покупку. Используйте его для указания номера счета клиента, который в конечном итоге будет получать товары. Если это поле задано, строки заказа на покупку будут принимать номера и описания внешних номенклатур с указанного счета клиента вместо внутрихолдингового поставщика, указанного в заказе на покупку. Если позднее изменить счет клиента, коды и описания внешних номенклатур будут обновлены для приведения в соответствие со значениям для нового счета. Описания и коды внешних номенклатур для каждой строки будут также синхронизированы с соответствующими внутрихолдинговыми заказами на продажу.

1. Перейдите в раздел **Закупки и источники \> Заказы на покупку \> Все заказы на покупку**.
1. Откройте заказ на покупку, который необходимо настроить, или создайте новый.
1. Выберите представление **Заголовок**.
1. В разделе **Ссылка** укажите в поле **Счет клиента** соответствующий счет внешнего клиента.

Чтобы указать коды внешних номенклатур и текстовые описания для строки заказа на покупку для внутрихолдингового заказа, выполните следующие действия. Настроенные значения будут синхронизированы со связанными строками внутрихолдингового заказа на продажу, независимо от того, относится ли заказ на покупку к прямой поставке.

1. Перейдите в раздел **Закупки и источники \> Заказы на покупку \> Все заказы на покупку**.
1. Откройте заказ на покупку, который необходимо настроить, или создайте новый.
1. Выберите представление **Строки**.
1. На экспресс-вкладке **Строки заказа на покупку** выберите строку, которую нужно изменить.
1. На экспресс-вкладке **Сведения по строке** на вкладке **Общие** в разделе **Строка заказа** введите в поле **Текст** внешнее описание номенклатуры, которое указано в выбранной строке заказа. Это значение будет синхронизировано со строкой соответствующего внутрихолдингового заказа на продажу.
1. В разделе **Ссылка** в поле **Внешняя** введите код внешней номенклатуры для номенклатуры, указанной в выбранной строке заказа. Это значение будет синхронизировано со строкой соответствующего внутрихолдингового заказа на продажу.

Дополнительные сведения см. в разделе [Создание внутрихолдингового заказа на продажу для внешнего клиента и выставление накладной по нему](../sales-marketing/intercompany-sales-order-for-external-customer.md).
