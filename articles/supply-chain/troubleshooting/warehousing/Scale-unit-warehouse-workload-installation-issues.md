---
title: Проблемы с обработкой происходят после установки рабочей нагрузки склада единицу масштабирования
description: В этой теме описываются проблемы, которые могут возникать вскоре после установки рабочей нагрузки склада единицы масштабирования, и даются рекомендации по их исправлению.
author: perlynne
ms.date: 1/13/2022
ms.topic: troubleshooting
ms.search.form: WHSLoadPlanningWorkbench, WHSOutboundLoadPlanningWorkbench
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2022-01-13
ms.dyn365.ops.version: 10.0.25
ms.openlocfilehash: f589ffed61b695f471989ab1dd693f30cd5d5262
ms.sourcegitcommit: 3a7f1fe72ac08e62dda1045e0fb97f7174b69a25
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/31/2022
ms.locfileid: "8071654"
---
# <a name="processing-issues-occur-after-a-scale-unit-warehouse-workload-is-installed"></a>Проблемы с обработкой происходят после установки рабочей нагрузки склада единицу масштабирования

В этой теме описываются проблемы, которые могут возникать вскоре после установки рабочей нагрузки склада единицы масштабирования, и даются рекомендации по их исправлению.

## <a name="issue-1-error-after-a-load-is-released-from-a-load-planning-workbench"></a>Проблема 1. Ошибка после выпуска нагрузки из рабочего места планирования загрузки

### <a name="symptoms-of-issue-1"></a>Признаки проблемы 1

При выпуске нагрузки со страницы **Рабочее место планирования загрузки** или **Рабочее место планирования исходящей загрузки** появляется сообщение об ошибке, которое имеет следующий вид:

> При разноске загрузки %1 произошло исключение. Не удалось выпустить загрузку.
> 
> UPDATE WHSSHIPMENTTABLE SET ...
> 
> Невозможно редактировать запись в отгрузках (WHSShipmentTable). Код отгрузки: ...

Вот фактический пример, включающий образцы данных:

> При разноске загрузки USMF-000033 произошло исключение. Не удалось выпустить загрузку.
сеанс 5133 (администратор)
>
> UPDATE WHSSHIPMENTTABLE SET ORDERNUM=?,RECVERSION=?,MODIFIEDDATETIME=?,MODIFIEDBY=? WHERE ((RECID=?) AND (RECVERSION=?))  
> [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]Scale Unit @@ attempted to update records owned by Scale Unit @A.  
> Object Server Azure:
>
> Невозможно редактировать запись в отгрузках (WHSShipmentTable). Код отгрузки: USMF-000031, USMF-000033. База данных SQL обнаружила ошибку.

### <a name="cause-of-issue-1"></a>Причина проблемы 1

Эта проблема может возникнуть в том случае, если при установке рабочей нагрузки склада единицы масштабирования используется следующая комбинация условий:

- Система включает в себя невыпущенную загрузку, в которой несколько строк связаны с разными заказами, и некоторые строки загрузок не связаны с отгрузкой.
- Система настроена для использования консолидации отгрузки.

При развертывании распределенной гибридной топологии каждая запись загрузки и отгрузки помечается как принадлежащая определенной единице масштабирования или концентратору. При выпуске загрузки со страницы **Рабочее место планирования загрузки** система изменяет назначенного владельца. Однако в связи с предыдущими условиями система не может разрешить владение данными. Поэтому она не может выпустить загрузку на склад.

### <a name="resolution-of-issue-1"></a>Устранение проблемы 1

Разбейте загрузку на две небольшие загрузки, прежде чем выпустить их на склад.

## <a name="issue-2-error-while-a-wave-is-processed-on-a-scale-unit"></a>Проблема 2. Ошибка во время обработки волны для единицы масштабирования

### <a name="symptoms-of-issue-2"></a>Признаки проблемы 2

При обработке волны для единицы масштабирования появляется сообщение об ошибке, которое имеет следующий вид:

> Невозможно изменить строку загрузки с кодом RecId = %1, Load ID = %2, так как она еще принадлежит концентратору предприятия. Убедитесь, что соответствующая исходящая загрузка была выпущена в единицу масштабирования и, следовательно, были созданы строки заказа склада.

Вот фактический пример, включающий образцы данных:

> Infolog для задания Выполнить волну USMF-000000012 (9223377668365210)  
> Infolog для задачи Выполнить волну USMF-000000012 (9223377668370462)  
> Невозможно изменить строку загрузки с кодом RecId = 68719478242, load id= USMF-000034, так как она еще принадлежит концентратору предприятия. Убедитесь, что соответствующая исходящая загрузка была выпущена в единицу масштабирования и, следовательно, были созданы строки заказа склада.

### <a name="cause-of-issue-2"></a>Причина проблемы 2

При развертывании распределенной гибридной топологии владение загрузки и дата отгрузки назначаются определенной единице масштабирования или концентратору. В ходе обработки волны предполагается, что владение данными должно быть назначено единице масштабирования.

При установке рабочей нагрузки склада единицы масштабирования, если открытая отгрузка связана с загрузкой и волной, система не сможет управлять владением данными. Таким образом, в единице масштабирования произойдет сбой обработки волны.

### <a name="resolution-of-issue-2"></a>Устранение проблемы 2

Выпустить загрузку на склад из концентратора.

## <a name="troubleshoot-issues-by-viewing-a-records-ownership-and-destination"></a>Устранение неполадок путем просмотра владения записи и месте назначения

При развертывании распределенной гибридной топологии многие типы записей помечаются как принадлежащие определенной единице масштабирования или концентратору. После переключения на распределенную гибридную топологию и/или настройки новой рабочей нагрузки склада единицы масштабирования, система назначает владение каждой соответствующей записи. Этот процесс может иногда привести к ошибкам или непредсказуемым результатам. Таким образом, сведения о владении записи и месте назначении передачи могут помочь в устранении неполадок, возникающих после внесения этих типов изменений.

Выполните следующие действия для просмотра владения и месте назначения записи.

1. Откройте соответствующую запись.
1. В области действий на вкладке **Параметры** в группе **Сведения о записи** выберите **Показать все поля**.
1. На отображаемой странице отображаются значения всех полей, доступные для выбранной записи. Проверьте следующие поля:

    - **SYSSCALEUNITID** — в этом поле отображается текущий владелец данной записи.
    - **SYSTARGETSCALEUNITID** — в этом поле отображается код единицы масштабирования для концентратора или единица масштабирования, в которую будет перенесена запись, когда текущий владелец завершил работу с ней. Значение этого поля используется пакетными заданиями, которые управляют процессом этого типа. Хотя это поле не связано непосредственно с владением, при переносе записи владелец может измениться. В некоторых случаях это поле остается пустым.
