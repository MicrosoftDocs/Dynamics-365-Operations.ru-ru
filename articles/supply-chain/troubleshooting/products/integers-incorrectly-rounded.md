---
title: Неправильные округления целочисленных значений в расчетах модели конфигурации продукта
description: Целочисленные результаты не всегда округляются правильно при расчете моделей конфигурации продуктов. Устраните проблему с помощью добавленного десятичного атрибута и расчета.
author: SmithaNataraj
ms.date: 06/24/2021
ms.topic: troubleshooting
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: smnatara
ms.search.validFrom: 2021-06-24
ms.dyn365.ops.version: 10.0.20
ms.openlocfilehash: b17145d7d17cb784fe11b3fbf65ddf5aa5530f27
ms.sourcegitcommit: 2d6e31648cf61abcb13362ef46a2cfb1326f0423
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/07/2021
ms.locfileid: "7477435"
---
# <a name="integers-incorrectly-rounded-when-product-configuration-models-are-calculated"></a>Неправильные округления целочисленных значений при расчете моделей конфигурации продуктов

## <a name="symptoms"></a>Симптомы

Эта проблема может возникнуть при выполнении следующей последовательности действий:

1. Настройте эти атрибуты в модели конфигурации производства:

    - Ввод (целое число)
    - Процент (десятичное число)
    - Результат (целое число)

2. Создайте расчет со следующим выражением:

    *Результат* = *Ввод* × *Процент* ÷ 100

В этом случае целочисленный результат не всегда правильно округляется. Например, если введено значение 1000, а процентное значение составляет 2,40, то ожидается, что целочисленное значение составит 24, поскольку 2,40 процента от 1000 равно 24 (или 24,00 в десятичной системе счисления). Вместо этого результат отображается как 23. Однако если процент равен 2,39, вычисление округляется до 24 вместо 23. Если процент равен 2,50, вычисление округляется до 25, как и ожидается.

## <a name="cause"></a>Причина

Эта проблема возникает из-за того, что внутри Microsoft Solver Foundation числа представляются с использованием дробей. В предыдущем примере результат вычисления с процентом 2,40 представляется как 27021597764222975 ÷ 1125899906842624 = 23,99999999999999911182158029987476766109466552734375. Когда платформа .NET приводит это значение к целому числу, она возвращает 23.

## <a name="resolution"></a>Решение

Это поведение не будет изменено, так как от него зависят другие сценарии. В предыдущем примере можно устранить проблему, введя дополнительный десятичный атрибут и расчеты.

Например, настройте следующие атрибуты в модели конфигурации производства:

- Ввод (целое число)
- Процент (десятичное число)
- ResultDecimal (десятичное число)
- ResultInteger (целое число)

Можно затем добавить следующие расчеты:

- *ResultDecimal* = *Ввод* × *Процент* ÷ 100
- *ResultInteger* = *ResultDecimal*
