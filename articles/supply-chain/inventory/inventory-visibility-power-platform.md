---
title: Приложение видимости запасов
description: В этой статье описывается, как использовать приложение видимости запасов.
author: yufeihuang
ms.date: 09/15/2022
ms.topic: article
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: yufeihuang
ms.search.validFrom: 2021-08-02
ms.dyn365.ops.version: 10.0.21
ms.openlocfilehash: 0a4e436cc1af6b71049f75fb66bdfb89ca38df9f
ms.sourcegitcommit: 0c927fcb3afd34d870391f05b5393a4673d916e5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/08/2022
ms.locfileid: "9831783"
---
# <a name="use-the-inventory-visibility-app"></a>Использование приложения Inventory Visibility

[!include [banner](../includes/banner.md)]

В этой статье описывается, как использовать приложение видимости запасов.

Видимость запасов — приложение на основе модели для визуализации. Приложение содержит три страницы: **Конфигурация**, **Операционная видимость** и **Сводка по запасам**. Оно имеет следующие функции:

- Оно предоставляет интерфейс пользователя (UI) для настройки конфигурации "в наличии" и конфигурации предварительного резервирования.
- Оно поддерживает запросы запасов в наличии в реальном времени в различных комбинациях аналитик.
- Оно предоставляет пользовательский интерфейс для разноски запросов резервирования.
- Оно предоставляет представление запасов в наличии для продуктов вместе со всеми аналитиками.
- Оно предоставляет список запасов в наличии для продуктов вместе с предварительно заданными аналитиками. Представление запасов в наличии в виде списка может представлять собой либо полную сводку, либо предварительно загруженный результат из запроса запасов в наличии.

## <a name="prerequisites"></a>Необходимые условия

Перед началом установки установите и настройте надстройку "Видимость запасов", как описано в разделе [Установка и настройка видимости запасов](inventory-visibility-setup.md).

## <a name="open-and-authenticate-the-inventory-visibility-app"></a><a name="open-authenticate"></a>Открытие и проверка подлинности приложения видимости запасов

Чтобы открыть и выполнить проверка подлинности приложения видимости запасов, выполните следующие действия.

1. Выполните вход в свою среду Power Apps.
1. Откройте приложение **Видимость запасов**.
1. Откройте страницу **Операционная видимость** в левой области.
1. Выберите кнопку **Настройки** (значок шестеренки) вверху страницы.
1. В диалоговом окне **Параметры** введите **Код клиента**, **Код арендатора** и **Секрет клиента**, которые вы записали при [установке и настройке видимости запасов](inventory-visibility-setup.md).
1. Выберите кнопку **Обновить** рядом с полем **Токен носителя**. Система создает новый маркер носителя на основе введенной вами информации.

    ![Настройки запросов о запасах в наличии.](media/inventory-visibility-query-settings.png "Настройки запросов в наличии")

1. При получении действительного токена носителя закройте диалоговое окно. Срок действия маркера носителя истечет через некоторое время. Поэтому время от времени его следует обновлять, когда необходимо обновить конфигурацию, данные разноски или данные запроса.

## <a name="configure-the-inventory-visibility-app"></a><a name="configuration"></a>Настройка приложения видимости запасов

Страница **Конфигурация** приложения Видимость запасов позволяет настроить общую конфигурацию управления данными и конфигурацию функции. После установки надстройки конфигурация по умолчанию включает настройки по умолчанию для Microsoft Dynamics 365 Supply Chain Management (источник данных `fno`). Можно просмотреть настройку по умолчанию. Впоследствии, в зависимости от бизнес-требований и требований разноски запасов для внешней системы, можно изменить конфигурацию, чтобы стандартизировать способ разноски, упорядочения и запроса изменений запасов в нескольких системах.

Полные сведения о настройке решения см. в разделе [Настройка Видимости запасов](inventory-visibility-configuration.md).

## <a name="operational-visibility"></a>Операционная видимость

Страница **Операционная видимость** содержит результаты запроса запасов в наличии в реальном времени, разноски резервирования и распределение на основе различных комбинаций аналитик. Если [включена](inventory-visibility-configuration.md) функция *OnHandReservation*, можно также разнести запросы на резервирование со страницы **Операционная видимость**.

### <a name="on-hand-query"></a>Запрос в наличии

На вкладке **Запрос наличия** страницы **Операционная видимость** можно запросить запасы в наличии в реальном времени. Выполните следующие действия, чтобы настроить и выполнить запрос.

1. Откройте приложение **Видимость запасов**.
1. Откройте страницу **Операционная видимость** в левой области.
1. На вкладке **Запрос наличия** введите **Код организации**, **Код сайта** и **Код местоположения**, которые требуется запросить.
1. В поле **Код продукта** введите один или несколько кодов продуктов, чтобы получить точное соответствие для запроса. Если поле **Код продукта** оставлено пустым, в результаты будут включены все продукты на указанном сайте и в местоположении.
1. Чтобы получить более детализированный результат (например, представление по значениям аналитики, например, по цвету и размеру), выберите группировку по измерениям в поле **Группировка результатов**.
1. Чтобы найти номенклатуры, имеющие конкретное значение аналитики (например, цвет = красный), выберите аналитику в поле **Фильтр аналитик**, затем введите значение аналитики.
1. Выберите **Запрос**. Вы получите сообщение об успешном завершении (зеленое) или неудачном выполнении (красное). Если запрос завершается сбоем, проверьте критерии запроса и убедитесь, что [маркер носителя](#open-authenticate) не просрочен.

Другим способом создания запроса запасов в наличии является выполнение прямых запросов API. Можно использовать `/api/environment/{environmentId}/onhand/indexquery` или `/api/environment/{environmentId}/onhand`. Дополнительные сведения см. в разделе [Открытые API-интерфейсы видимости запасов](inventory-visibility-api.md).

### <a name="reservation-posting"></a>Разноска резервирования

Вкладка **Разноска резервирования** страницы **Операционная видимость** используется для разноски запроса на резервирование. Прежде чем можно будет разнести запрос на резервирование, необходимо включить функцию *OnHandReservation*. Дополнительные сведения об этой функции и порядке ее включения см. в разделе [Резервирования видимости запасов](inventory-visibility-reservations.md).

> [!NOTE]
> Возможность выполнить предварительное резервирование через интерфейс пользователя предназначена для тестирования функции. Каждый запрос предварительного резервирования должен быть связан с изменением строки заказа проводки (создание, изменение, удаление и т. д.). Поэтому рекомендуется создавать только предварительные резервирования, которые связаны с серверным заказом. Дополнительные сведения см. в разделе [Резервирования видимости запасов](inventory-visibility-reservations.md).

Выполните следующие действия, чтобы выполнить разноску запроса предварительного резервирования с помощью интерфейса пользователя.

1. Откройте приложение **Видимость запасов**.
1. Откройте страницу **Операционная видимость** в левой области.
1. На вкладке **Разноска резервирования** в поле **Количество** введите количество, которое требуется предварительно зарезервировать.
1. Снимите флажок **Разрешить отрицательные запасы для поддержки продажи сверх запасов**, чтобы не допустить избыточной продажи или избыточного резервирования запасов в наличии.
1. В поле **Оператор** выберите источник данных и физическую меру, применяемую к предварительно зарезервированному количеству.
1. Введите **Код организации**, **Код сайта**, **Код местоположения** и **Код продукта**, которые требуется запросить.
1. Чтобы получить более детализированный результат, выберите источник данных, аналитики и значения аналитик.

Другим способом разноски предварительного резервирования является выполнение прямых запросов API. Воспользуйтесь шаблоном, описанным в разделе [Создание одного события резервирования](inventory-visibility-api.md#create-one-reservation-event). Затем выберите **Разнести**. Чтобы просмотреть сведения об ответе на запрос, выберите **Показать сведения**. Можно также получить значение `reservationId` из сведений ответа.

### <a name="allocation"></a>Распределение

Сведения об управлении распределением из интерфейса пользователя и API-интерфейсов см. в разделе [Функция распределения запасов надстройки «Видимость запасов»](inventory-visibility-allocation.md).

## <a name="inventory-summary"></a><a name="inventory-summary"></a>Сводка запасов

Страница **Сводка запасов** предоставляет сводку запасов для продуктов вместе со всеми аналитиками. Это настраиваемое представление сущности *Сумма запасов в наличии*. Итоговые данные по запасам периодически синхронизируются из видимости запасов.

Чтобы включить страницу **Сводка запасов** и задать частоту синхронизации, выполните следующие шаги:

1. Откройте страницу **Конфигурация**.
1. Откройте вкладку **Управления функциями и параметры**.
1. Установите выключатель для функции *OnHandMostSpecificBackgroundService* в положение *Да*.
1. Когда функция включена, раздел **Конфигурация службы** становится доступным и включает строку для настройки функции **OnHandMostSpecificBackgroundService**. Этот параметр позволяет выбрать частоту синхронизации сводных данных запасов. Воспользуйтесь кнопками **Вверх** и **Вниз** в столбце **Значение**, чтобы изменить время между синхронизациями (может быть не менее 5 минут). Затем выберите **Сохранить**.

    ![Настройка OnHandMostSpecificBackgroundService](media/inventory-visibility-ohms-freq.png "Настройка OnHandMostSpecificBackgroundService")

1. Выберите **Обновить конфигурацию**, чтобы сохранить все изменения.

> [!NOTE]
> Функция *OnHandMostSpecificBackgroundService* отслеживает только те изменения запасов в наличии, которые произошли после включения этой функции. Данные для продуктов, которые не были изменены с момента включения функции, не будут синхронизированы из кэша складской службы в среду Dataverse. Если страница **Сводка запасов** не показывает все ожидаемые сведения о наличии, откройте Supply Chain Management, перейдите в пункт **Управление запасами > Периодические задачи > Интеграция Видимости запасов**, отключите пакетное задание и включите его снова. Это приведет к первоначальной отправке, и все данные будут синхронизированы с сущностью *Сумма запасов в наличии* в течение следующих 15 минут. Если вы хотите использовать функцию *OnHandMostSpecificBackgroundService*, рекомендуется включить ее перед созданием каких-либо изменений запасов в наличии и включить пакетное задание **Интеграция Видимости запасов**.

## <a name="preload-a-streamlined-on-hand-query"></a><a name="preload-streamlined-onhand-query"></a>Предварительная загрузка оптимизированного запроса запасов в наличии

[!INCLUDE [preview-banner-section](../../includes/preview-banner-section.md)]
<!-- KFM: Preview until further notice -->

Supply Chain Management хранит большой объем информации о текущих запасах в наличии и делает ее доступной для широкого спектра целей. Однако многие ежедневные операции и интеграции сторонних производителей требуют наличия всего лишь небольшого подмножества этих сведений, а запросы у системы всех этих сведений может привести к созданию больших наборов данных, которые занимают время для сборки и передачи. Таким образом, служба видимости запасов может периодически производить выборку и сохранение оптимизированного набора данных о запасах в наличии, чтобы обеспечить постоянную доступность оптимизированной информации. Сохраненные сведения о запасах в наличии фильтруются на основе настраиваемых критериев бизнеса с целью гарантировать, что включены только наиболее значимые сведения. Так как отфильтрованные списки запасов в наличии хранятся локально в службе видимости запасов и регулярно обновляются, они поддерживают быстрый доступ, экспорт данных по запросу и оптимизированную интеграцию с внешними системами.

Страница **Сводка предварительной загрузки видимости запасов** предоставляет представление для сущности *Результаты предварительной загрузки запроса индекса запасов в наличии*. В отличие от сущности *Сводка запасов*, сущность *Результаты предварительной загрузки запроса индекса запасов в наличии* предоставляет список запасов в наличии для продуктов вместе с выбранными аналитиками. Видимость запасов синхронизирует предварительно загруженные сводные данные каждые 15 минут.

Для просмотра данных на вкладке **Предварительная загрузка сводки Inventory Visibility** необходимо включить и настроить функцию *OnHandIndexQueryPreloadBackgroundService*. Инструкции см. в разделе [Включение и настройка предварительно загруженных запросов запасов в наличии](inventory-visibility-configuration.md#query-preload-configuration).

> [!NOTE]
> Как и в случае с функцией *OnHandMostSpecificBackgroundService*, функция *OnHandIndexQueryPreloadBackgroundService* отслеживает только изменения запасов в наличии, произошедшие после включения этой функции. Данные для продуктов, которые не были изменены с момента включения функции, не будут синхронизированы из кэша складской службы в среду Dataverse. Если страница **Сводка запасов** не показывает все ожидаемые сведения о наличии, перейдите в пункт **Управление запасами > Периодические задачи > Интеграция Видимости запасов**, отключите пакетное задание и включите его снова. Это приведет к первоначальной отправке, и все данные будут синхронизированы с сущностью *Результаты предварительной загрузки запроса индекса запасов в наличии* в течение следующих 15 минут. Если вы хотите использовать эту функцию, рекомендуется включить ее перед созданием каких-либо изменений запасов в наличии и включить пакетное задание **Видимость запасов**.

## <a name="filter-and-browse-the-inventory-summaries"></a><a name="additional-tip-for-viewing-data"></a>Фильтрация и просмотр сводок запасов

Используя **Расширенный фильтр** в Dataverse, можно создать личное представление, в котором будут отображаться важные для вас строки. С помощью расширенных параметров фильтра можно создавать разнообразные представления, из простых до сложных. Они также позволяют добавлять сгруппированные и вложенные условия для фильтров. Дополнительные сведения об использовании расширенного фильтра см. в разделе [Редактирование или создание персональных представлений с помощью расширенных фильтров сетки](/powerapps/user/grid-filters-advanced).

На странице **Сводка запасов** имеется три поля над сеткой (**Аналитика по умолчанию**, **Настраиваемая аналитика** и **Мера**), которые можно использовать для управления видимыми столбцами. Можно также выбрать любой заголовок столбца для фильтрации или сортировки текущего результата по этому столбцу. На следующем снимке экрана выделены поля аналитики, фильтрации, числа результатов и "загрузить еще", доступные на странице **Сводка запасов**.

![Страница сводки запасов.](media/inventory-visibility-onhand-list.png "Страница сводки запасов")

Так как у вас будут предварительно определенные аналитики, используемые для загрузки сводных данных, на странице **Предварительная загрузка сводки видимости запасов** отображаются столбцы, имеющие отношение к аналитике. *Аналитики не настраиваются &mdash; система поддерживает только аналитики сайта и местоположения для предварительно загруженных списков в наличии.* Страница **Предварительная загрузка сводки видимости запасов** содержит фильтры, аналогичные фильтрам на странице **Сводка запасов**, за исключением того, что аналитики уже выбраны. На следующем снимке экрана выделены поля фильтрации, доступные на странице **Предварительная загрузка сводки видимости запасов**.

![Страница «Предварительная загрузка сводки видимости запасов».](media/inventory-visibility-preload-onhand-list.png "Страница «Предварительная загрузка сводки видимости запасов»")

В нижней части страниц **Предварительная загрузка сводки видимости запасов** и **Сводка запасов** можно найти такие сведения, как "50 записей (29 выбрано)" или "50 записей". Эти сведения относятся к загруженным в данный момент записям из результатов **расширенного фильтра**. Текст "29 выбрано" означает число записей, выбранных с помощью фильтра заголовка столбца для загруженных записей. Также есть кнопка **Загрузить еще**, которую можно использовать для загрузки дополнительных записей из Dataverse. Число загруженных записей по умолчанию — 50. При выборе **Загрузить еще** в представление будут загружены следующие 1000 доступных записей. Число на кнопке **Загрузить еще** означает загруженные в данный момент записи и общее число записей для результатов **расширенного фильтра**.
