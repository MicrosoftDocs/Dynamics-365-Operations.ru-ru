---
title: Архивирование проводок по запасам
description: В этом разделе описывается, как архивировать данные проводок по запасам для повышения производительности системы.
author: sherry-zheng
ms.date: 03/01/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: InventTransArchiveProcessForm
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: chuzheng
ms.search.validFrom: 2021-03-01
ms.dyn365.ops.version: Release 10.0.18
ms.openlocfilehash: 8b61e65d3a641a1e3d73192853c832d57ed17401
ms.sourcegitcommit: 08ce2a9ca1f02064beabfb9b228717d39882164b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/11/2021
ms.locfileid: "6021279"
---
# <a name="archive-inventory-transactions"></a><span data-ttu-id="cdb11-103">Архивирование проводок по запасам</span><span class="sxs-lookup"><span data-stu-id="cdb11-103">Archive inventory transactions</span></span>

[!include [banner](../../includes/banner.md)]

<span data-ttu-id="cdb11-104">Со временем таблица проводок по запасам (`InventTrans`) продолжит расти и будет потреблять больше места для базы данных.</span><span class="sxs-lookup"><span data-stu-id="cdb11-104">Over time, the inventory transactions table (`InventTrans`) will continue to grow and consume more database space.</span></span> <span data-ttu-id="cdb11-105">Поэтому запросы, выполняемые с таблицей, постепенно становятся медленнее.</span><span class="sxs-lookup"><span data-stu-id="cdb11-105">Therefore, queries that are made against the table will gradually become slower.</span></span> <span data-ttu-id="cdb11-106">В этом разделе описывается, как использовать функцию *Архивация проводок по запасам* для архивирования данных о проводках по запасам для повышения производительности системы.</span><span class="sxs-lookup"><span data-stu-id="cdb11-106">This topic describes how you can use the *Inventory transactions archive* feature to archive data about inventory transactions to help improve system performance.</span></span>

> [!NOTE]
> <span data-ttu-id="cdb11-107">В выбранный закрытый период ГК можно архивировать только финансово обновленные проводки по запасам.</span><span class="sxs-lookup"><span data-stu-id="cdb11-107">Only financially updated inventory transactions can be archived in a selected closed ledger period.</span></span> <span data-ttu-id="cdb11-108">Для архивации у финансово обновленных исходящих проводок по запасам должен быть статус отпуска *Продано*, а для входящих проводок по запасам должен быть установлен статус поступления *Куплено*.</span><span class="sxs-lookup"><span data-stu-id="cdb11-108">To be archived, financially updated outbound inventory transactions must have an issue status of *Sold*, and inbound inventory transactions must have a receipt status of *Purchased*.</span></span>

<span data-ttu-id="cdb11-109">При архивации проводок по запасам все соответствующие проводки переносятся в таблицу `InventTransArchive`.</span><span class="sxs-lookup"><span data-stu-id="cdb11-109">When you archive inventory transactions, all related transactions are moved to the `InventTransArchive` table.</span></span> <span data-ttu-id="cdb11-110">Проводки отпуска запасов и проводки поступления на склад архивируются отдельно, на основе комбинации кода номенклатуры (`itemId`) и кода складской аналитики (`inventDimId`), и они помещаются в суммарные проводки отпуска и поступления.</span><span class="sxs-lookup"><span data-stu-id="cdb11-110">Inventory issue transactions and inventory receipt transactions are archived separately, based on the combination of the item ID (`itemId`) and inventory dimension ID (`inventDimId`), and they are put into the summarized issue and summarized receipt transactions.</span></span>

<span data-ttu-id="cdb11-111">Если комбинация `itemId` и `inventDimId` содержит только одну проводку поступления или отпуска, проводка не будет заархивирована.</span><span class="sxs-lookup"><span data-stu-id="cdb11-111">If an `itemId` and `inventDimId` combination contains only one receipt or issue transaction, the transaction won't be archived.</span></span>

## <a name="turn-on-the-feature-in-your-system"></a><span data-ttu-id="cdb11-112">Включите функцию в системе</span><span class="sxs-lookup"><span data-stu-id="cdb11-112">Turn on the feature in your system</span></span>

<span data-ttu-id="cdb11-113">Если ваша система еще не содержит функций, описанных в этом разделе, перейдите в [Управление функциями](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) и включите функцию *Архивация проводок по запасам*.</span><span class="sxs-lookup"><span data-stu-id="cdb11-113">If your system doesn't already include the features that is described in this topic, go to [Feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md), and turn on the *Inventory transactions archive* feature.</span></span> <span data-ttu-id="cdb11-114">Обратите внимание, что эту функцию нельзя отключить после ее активации.</span><span class="sxs-lookup"><span data-stu-id="cdb11-114">Note that this feature cannot be disabled once it has been enabled.</span></span>

## <a name="things-to-consider-before-you-archive-inventory-transactions"></a><span data-ttu-id="cdb11-115">Вопросы, которые необходимо учесть перед архивацией проводок по запасам</span><span class="sxs-lookup"><span data-stu-id="cdb11-115">Things to consider before you archive inventory transactions</span></span>

<span data-ttu-id="cdb11-116">Перед архивацией проводок по запасам необходимо учитывать следующие бизнес-сценарии, поскольку на них повлияет операция:</span><span class="sxs-lookup"><span data-stu-id="cdb11-116">Before you archive inventory transactions, you should consider the following business scenarios, because they will be affected by the operation:</span></span>

- <span data-ttu-id="cdb11-117">При аудите проводок по запасам из соответствующих документов, таких как строки заказа на покупку, они будут показаны как архивированные.</span><span class="sxs-lookup"><span data-stu-id="cdb11-117">When you audit inventory transactions from related documents, such as purchase order lines, they will be shown as archived.</span></span> <span data-ttu-id="cdb11-118">Чтобы просмотреть архивированные проводки, необходимо перейти **Управление запасами \> Периодические задачи \> Очистка \> Архивация проводок по запасам**.</span><span class="sxs-lookup"><span data-stu-id="cdb11-118">To review the archived transactions, you must go to **Inventory management \> Periodic tasks \> Clean up \> Inventory transactions archive**.</span></span>
- <span data-ttu-id="cdb11-119">Закрытие склада не может быть отменено для архивированных периодов.</span><span class="sxs-lookup"><span data-stu-id="cdb11-119">Inventory closing can't be canceled for archived periods.</span></span> <span data-ttu-id="cdb11-120">Прежде чем можно будет отменить закрытие склада, необходимо сторнировать архив проводок по запасам для соответствующего периода.</span><span class="sxs-lookup"><span data-stu-id="cdb11-120">Before you can cancel an inventory closing, you must reverse the inventory transaction archive for the relevant period.</span></span>
- <span data-ttu-id="cdb11-121">Преобразование стандартных затрат нельзя выполнить для архивированных периодов.</span><span class="sxs-lookup"><span data-stu-id="cdb11-121">Standard cost conversion can't be done for archived periods.</span></span> <span data-ttu-id="cdb11-122">Прежде чем можно будет выполнить преобразование стандартных затрат, необходимо сторнировать архив проводок по запасам для соответствующего периода.</span><span class="sxs-lookup"><span data-stu-id="cdb11-122">Before you can do standard cost conversion, you must reverse the inventory transaction archive for the relevant period.</span></span>
- <span data-ttu-id="cdb11-123">При архивации проводок по запасам отчеты по запасам, источником которых являются проводки по запасам, будут затронуты.</span><span class="sxs-lookup"><span data-stu-id="cdb11-123">Inventory reports that are sourced from inventory transactions will be affected when you archive inventory transactions.</span></span> <span data-ttu-id="cdb11-124">Эти отчеты включают отчет распределения запасов по срокам и отчеты по стоимости запасов.</span><span class="sxs-lookup"><span data-stu-id="cdb11-124">These reports include the inventory aging report and inventory value reports.</span></span>
- <span data-ttu-id="cdb11-125">Прогнозы по запасам могут быть затронуты, если они выполняются во временном горизонте архивированных периодов.</span><span class="sxs-lookup"><span data-stu-id="cdb11-125">Inventory forecasts might be affected if they are run during the time horizon of archived periods.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="cdb11-126">Необходимые условия</span><span class="sxs-lookup"><span data-stu-id="cdb11-126">Prerequisites</span></span>

<span data-ttu-id="cdb11-127">Проводки по запасам можно архивировать только в периоды, когда соблюдаются следующие условия:</span><span class="sxs-lookup"><span data-stu-id="cdb11-127">Inventory transactions can be archived only during periods where the following conditions are met:</span></span>

- <span data-ttu-id="cdb11-128">Период главной книги должен быть закрыт.</span><span class="sxs-lookup"><span data-stu-id="cdb11-128">The ledger period must be closed.</span></span>
- <span data-ttu-id="cdb11-129">Закрытие склада должно выполняться в дату окончания периода архивации или после нее.</span><span class="sxs-lookup"><span data-stu-id="cdb11-129">Inventory closing must be run on or after the to-period date of the archive.</span></span>
- <span data-ttu-id="cdb11-130">Период должен быть по крайней мере на один год раньше начальной даты периода архивации.</span><span class="sxs-lookup"><span data-stu-id="cdb11-130">The period must be at least one year before the from-period date of the archive.</span></span>
- <span data-ttu-id="cdb11-131">Не должно быть каких-либо существующих перерасчетов запасов.</span><span class="sxs-lookup"><span data-stu-id="cdb11-131">There must not be any existing inventory recalculations.</span></span>

## <a name="archive-inventory-transactions"></a><span data-ttu-id="cdb11-132">Архивирование проводок по запасам</span><span class="sxs-lookup"><span data-stu-id="cdb11-132">Archive inventory transactions</span></span>

<span data-ttu-id="cdb11-133">Чтобы архивировать проводки по запасам, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="cdb11-133">To archive inventory transactions, follow these steps.</span></span>

1. <span data-ttu-id="cdb11-134">Перейдите в раздел **Управление запасами** \> **Периодические задачи** \> **Очистка** \> **Архивация проводок по запасам**.</span><span class="sxs-lookup"><span data-stu-id="cdb11-134">Go to **Inventory management** \> **Periodic tasks** \> **Clean up** \> **Inventory transaction archive**.</span></span>

    <span data-ttu-id="cdb11-135">Появится страница **Архивация проводок по запасам**, в которой отображается список архивированных записей процесса.</span><span class="sxs-lookup"><span data-stu-id="cdb11-135">The **Inventory transactions archive** page appears and shows a list of archived process records.</span></span>

    <span data-ttu-id="cdb11-136">![Страница архивирования проводок по запасам](media/archive-inventory-empty.png "Страница архивирования проводок по запасам")</span><span class="sxs-lookup"><span data-stu-id="cdb11-136">![Inventory transactions archive page](media/archive-inventory-empty.png "Inventory transactions archive page")</span></span>

1. <span data-ttu-id="cdb11-137">В области действий выберите **Архивирование проводок по запасам** для создания архива проводок по запасам.</span><span class="sxs-lookup"><span data-stu-id="cdb11-137">On the Action Pane, select **Inventory transactions archive** to create an inventory transaction archive.</span></span>
1. <span data-ttu-id="cdb11-138">В диалоговом окне **Архивирование проводок по запасам** на экспресс-вкладке **Параметры** установите следующие поля:</span><span class="sxs-lookup"><span data-stu-id="cdb11-138">In the **Inventory transactions archive** dialog box, on the **Parameters** FastTab, set the following fields:</span></span>

    - <span data-ttu-id="cdb11-139">**Начальная дата в закрытом периоде ГК** — выберите самую раннюю дату проводки для включения в архив.</span><span class="sxs-lookup"><span data-stu-id="cdb11-139">**From date in closed ledger period** – Select the earliest transaction date to include in the archive.</span></span>
    - <span data-ttu-id="cdb11-140">**Конечная дата в закрытом периоде ГК** — выберите самую позднюю дату проводки для включения в архив.</span><span class="sxs-lookup"><span data-stu-id="cdb11-140">**To date in closed ledger period** – Select the latest transaction date to include in the archive.</span></span>

    <span data-ttu-id="cdb11-141">![Диалоговое окно архивирования проводок по запасам](media/archive-inventory-dates.png "Диалоговое окно архивирования проводок по запасам")</span><span class="sxs-lookup"><span data-stu-id="cdb11-141">![Inventory transactions archive dialog box](media/archive-inventory-dates.png "Inventory transactions archive dialog box")</span></span>

    > [!NOTE]
    > <span data-ttu-id="cdb11-142">Для выбора доступны только периоды, соответствующие [предварительным требованиям](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="cdb11-142">Only periods that meet the [prerequisites](#prerequisites) will be available for selection.</span></span>

1. <span data-ttu-id="cdb11-143">На экспресс-вкладке **Выполнять в фоновом режиме** настройте сведения о пакетной обработке по мере необходимости.</span><span class="sxs-lookup"><span data-stu-id="cdb11-143">On the **Run in the background** FastTab, set up batch processing details as you require.</span></span> <span data-ttu-id="cdb11-144">Выполните обычные действия для пакетных заданий в Microsoft Dynamics 365 Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="cdb11-144">Follow the usual steps for batch jobs in Microsoft Dynamics 365 Supply Chain Management.</span></span>
1. <span data-ttu-id="cdb11-145">Нажмите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="cdb11-145">Select **OK**.</span></span>
1. <span data-ttu-id="cdb11-146">Появится сообщение с предложением подтвердить, что вы хотите продолжить.</span><span class="sxs-lookup"><span data-stu-id="cdb11-146">You receive a message that prompts you to confirm that you want to continue.</span></span> <span data-ttu-id="cdb11-147">Внимательно прочтите сообщение и нажмите кнопку **Да**, если необходимо продолжить операцию.</span><span class="sxs-lookup"><span data-stu-id="cdb11-147">Read the message carefully, and then select **Yes** if you want to continue.</span></span>

    <span data-ttu-id="cdb11-148">Появится сообщение о том, что задание архивирования проводок по запасам было добавлено в очередь пакетных заданий.</span><span class="sxs-lookup"><span data-stu-id="cdb11-148">You receive a message that states that your inventory transactions archive job has been added to the batch queue.</span></span> <span data-ttu-id="cdb11-149">После этого задание начнет архивировать проводки по запасам из выбранного периода.</span><span class="sxs-lookup"><span data-stu-id="cdb11-149">The job will now start to archive inventory transactions from the selected period.</span></span>

## <a name="view-archived-inventory-transactions"></a><span data-ttu-id="cdb11-150">Просмотр архивированных складских проводок</span><span class="sxs-lookup"><span data-stu-id="cdb11-150">View archived inventory transactions</span></span>

<span data-ttu-id="cdb11-151">На странице **Архивирование проводок по запасам** отображается полный журнал архивирования.</span><span class="sxs-lookup"><span data-stu-id="cdb11-151">The **Inventory transactions archive** page shows your full archiving history.</span></span> <span data-ttu-id="cdb11-152">В каждой строке сетки отображаются такие сведения, как дата создания архива, пользователь, создавший его, и его статус.</span><span class="sxs-lookup"><span data-stu-id="cdb11-152">Each row in the grid shows information such as the date when the archive was created, the user who created it, and its status.</span></span>

<span data-ttu-id="cdb11-153">![Страница журнала архивирования проводок по запасам](media/archive-inventory-full.png "Страница журнала архивирования проводок по запасам")</span><span class="sxs-lookup"><span data-stu-id="cdb11-153">![Archiving history on the Inventory transactions archive page](media/archive-inventory-full.png "Archiving history on the Inventory transactions archive page")</span></span>

<span data-ttu-id="cdb11-154">В раскрывающемся списке в верхней части страницы выберите одно из следующих значений для фильтрации архивов, показанных в сетке:</span><span class="sxs-lookup"><span data-stu-id="cdb11-154">In the drop-down list at the top of the page select one of the following values to filter the archives that are shown in the grid:</span></span>

- <span data-ttu-id="cdb11-155">**Активно** — отображаются только активные архивы, а не сторнированные архивы.</span><span class="sxs-lookup"><span data-stu-id="cdb11-155">**Active** – Show only active archives, not reversed archives.</span></span>
- <span data-ttu-id="cdb11-156">**Все** — отображаются все архивы, активные и сторнированные.</span><span class="sxs-lookup"><span data-stu-id="cdb11-156">**All** – Show all archives, both active and reversed.</span></span>

<span data-ttu-id="cdb11-157">Для каждого архива в сетке предоставляются следующие сведения:</span><span class="sxs-lookup"><span data-stu-id="cdb11-157">For each archive in the grid, the following information is provided:</span></span>

- <span data-ttu-id="cdb11-158">**Активно** — этот флажок указывает, что архив активен.</span><span class="sxs-lookup"><span data-stu-id="cdb11-158">**Active** – A check mark indicates that the archive is active.</span></span>
- <span data-ttu-id="cdb11-159">**Начальная дата** — дата самой старой проводки, которая может быть включена в архив.</span><span class="sxs-lookup"><span data-stu-id="cdb11-159">**From date** – The date of the oldest transaction that can be included in the archive.</span></span>
- <span data-ttu-id="cdb11-160">**Конечная дата** — дата последней проводки, которая может быть включена в архив.</span><span class="sxs-lookup"><span data-stu-id="cdb11-160">**To date** – The date of the latest transaction that can be included in the archive.</span></span>
- <span data-ttu-id="cdb11-161">**Кем запланировано** — учетная запись пользователя, создавшего архив.</span><span class="sxs-lookup"><span data-stu-id="cdb11-161">**Scheduled by** – The user account that created the archive.</span></span>
- <span data-ttu-id="cdb11-162">**Выполнено** — дата создания архива.</span><span class="sxs-lookup"><span data-stu-id="cdb11-162">**Executed** – The date when the archive was created.</span></span>
- <span data-ttu-id="cdb11-163">**Сторно** — флажок указывает на то, что архива был сторнирован.</span><span class="sxs-lookup"><span data-stu-id="cdb11-163">**Reverse** – A check mark indicates that the archive has been reversed.</span></span>
- <span data-ttu-id="cdb11-164">**Остановить текущее обновление** – флажок указывает, что архивирование выполняется, но было приостановлено.</span><span class="sxs-lookup"><span data-stu-id="cdb11-164">**Stop current update** – A check mark indicates that the archive is in progress, but it has been paused.</span></span>
- <span data-ttu-id="cdb11-165">**Состояние** — статус обработки архива.</span><span class="sxs-lookup"><span data-stu-id="cdb11-165">**State** – The processing status of the archive.</span></span> <span data-ttu-id="cdb11-166">Возможные значения: *Ожидание*, *В обработке* и *Завершено*.</span><span class="sxs-lookup"><span data-stu-id="cdb11-166">The possible values are *Waiting*, *In progress*, and *Finished*.</span></span>

<span data-ttu-id="cdb11-167">Панель инструментов над сеткой содержит следующие кнопки, которые можно использовать для работы с выбранным архивом:</span><span class="sxs-lookup"><span data-stu-id="cdb11-167">The toolbar above the grid provides the following buttons that you can use to work with a selected archive:</span></span>

- <span data-ttu-id="cdb11-168">**Архивированные проводки** — просмотр подробных сведений о выбранном архиве.</span><span class="sxs-lookup"><span data-stu-id="cdb11-168">**Archived transactions** – View the full details of the selected archive.</span></span> <span data-ttu-id="cdb11-169">На появившейся странице **Архивированные проводки** показаны все проводки в архиве.</span><span class="sxs-lookup"><span data-stu-id="cdb11-169">The **Archived transactions** page that appears shows all the transactions in the archive.</span></span>

    <span data-ttu-id="cdb11-170">![Страница архивированных проводок](media/archive-inventory-transactions.png "Страница архивированных проводок")</span><span class="sxs-lookup"><span data-stu-id="cdb11-170">![Archived transactions page](media/archive-inventory-transactions.png "Archived transactions page")</span></span>

    <span data-ttu-id="cdb11-171">Чтобы просмотреть дополнительные сведения о конкретной проводке на странице **Архивированные проводки**, выберите ее в сетке, а затем в области действий выберите **Сведения об архивированной проводке**.</span><span class="sxs-lookup"><span data-stu-id="cdb11-171">To view more information about a specific transaction on the **Archived transactions** page, select it in the grid, and then, on the Action Pane, select **Archived transaction details**.</span></span> <span data-ttu-id="cdb11-172">На появившейся странице **Сведения об архивированной проводке** содержатся такие сведения, как разноска ГК, связанные ссылки субкниги и финансовые аналитики.</span><span class="sxs-lookup"><span data-stu-id="cdb11-172">The **Archived transaction details** page that appears shows information such as the ledger posting, related subledger references, and financial dimensions.</span></span>

- <span data-ttu-id="cdb11-173">**Приостановить архивацию** — приостановить выбранную архивацию, обрабатываемую в данный момент.</span><span class="sxs-lookup"><span data-stu-id="cdb11-173">**Pause archiving** – Pause a selected archive that is currently being processed.</span></span> <span data-ttu-id="cdb11-174">Пауза вступает в силу только после создания задачи архивирования.</span><span class="sxs-lookup"><span data-stu-id="cdb11-174">The pause takes effect only after the archiving task has been generated.</span></span> <span data-ttu-id="cdb11-175">Поэтому может быть короткая задержка, прежде чем пауза вступит в силу.</span><span class="sxs-lookup"><span data-stu-id="cdb11-175">Therefore, there might be a short delay before the pause takes effect.</span></span> <span data-ttu-id="cdb11-176">Если архивация была приостановлена, в поле **Остановить текущее обновление** появится флажок.</span><span class="sxs-lookup"><span data-stu-id="cdb11-176">If an archive has been paused, a check mark appears in its **Stop current update** field.</span></span>
- <span data-ttu-id="cdb11-177">**Возобновить архивацию** — возобновить обработку выбранной архивации, приостановленную в данный момент.</span><span class="sxs-lookup"><span data-stu-id="cdb11-177">**Resume archiving** – Resume processing for a selected archive that is currently paused.</span></span>
- <span data-ttu-id="cdb11-178">**Сторно** — сторнировать выбранный архив.</span><span class="sxs-lookup"><span data-stu-id="cdb11-178">**Reverse** – Reverse the selected archive.</span></span> <span data-ttu-id="cdb11-179">Сторнировать архив можно только в том случае, если в поле **Состояние** выбрано значение *Завершено*.</span><span class="sxs-lookup"><span data-stu-id="cdb11-179">You can reverse an archive only if its **State** field is set to *Finished*.</span></span> <span data-ttu-id="cdb11-180">Если архив был сторнирован, в поле **Сторно** появится флажок.</span><span class="sxs-lookup"><span data-stu-id="cdb11-180">If an archive has been reversed, a check mark appears in its **Reverse** field.</span></span>
