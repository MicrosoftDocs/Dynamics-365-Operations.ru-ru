---
title: Состояния жизненного цикла заказов на работу
description: В этом разделе описываются состояния жизненного цикла заказов на работу в управлении активами.
author: josaw1
manager: AnnBe
ms.date: 08/13/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: mkirknel
ms.search.validFrom: 2019-08-30
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: f531f51d7f42f88e4da2d046e61313e9ada2b259
ms.sourcegitcommit: d37fb09101c30858bcb975931b3d8f947d72017b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/10/2019
ms.locfileid: "2569808"
---
# <a name="work-order-lifecycle-states"></a>Состояния жизненного цикла заказов на работу


[!include [banner](../../includes/banner.md)]

 

Состояния жизненного цикла заказа на работу определяют состояния, через которые может проходить заказ на работу. Примерами являются: **Создан**, **Запланирован**, **Выполняется** и **Завершен**. Состояния жизненного цикла заказов на работу могут быть обновлены вручную в заказе на работу, или они могут быть автоматически обновлены (например, в процессе планирования заказов на работу).

Состояния жизненного цикла заказов на работу, которые необходимы для заказов на работу, должны быть связаны с соответствующими этапами проекта на странице **Параметры модуля "Управление и учет по проектам"** (**Управление и учет по проектам** \> **Параметры модуля "Управление и учет по проектам"**). Сначала необходимо настроить этапы проекта в модуле "Управление и учет по проектам". Затем настраиваются состояния жизненного цикла заказов на работу и модели жизненного цикла заказов на работу в управлении активами.

В следующей таблице описаны параметры в разделах **Заказ на работу** и **График** на экспресс-вкладке **Общее** страницы **Состояние жизненного цикла заказов на работу** (**Управление активами** \> **Настройка** \> **Заказы на работу** \> **Состояния жизненного цикла**).

![Страница состояния жизненного цикла заказов на работу](media/09-setup-for-work-orders.png)

| Название параметра                   | Описание |
|-------------------------------|-------------|
| Активный                        | Установите для этого параметра значение **Да**, если заказ на работу должен быть активен, когда он находится в этом состоянии жизненного цикла. |
| Добавить строку                      | Установите для этого параметра значение **Да**, если задания заказа на работу могут быть добавлены в заказ на работу, который находится в данном состоянии жизненного цикла. |
| DELETE                        | Установите для этого параметра значение **Да**, если заказ на работу может быть удален, когда он находится в этом состоянии жизненного цикла. |
| Удалить строку                   | Установите для этого параметра значение **Да**, если задания заказа на работу могут быть удалены из заказа на работу, который находится в данном состоянии жизненного цикла. |
| Разрешить планирование              | Установите для этого параметра значение **Да**, если заказ на работу может быть запланирован, когда он находится в этом состоянии жизненного цикла. |
| Задать фактическое начало              | Установите для этого параметра значение **Да**, если пользователю должно быть предложено выбрать фактическую дату и время начала для заказа на работу, когда он обновляется до этого состояния жизненного цикла. |
| Настроить фактическое окончание                | Установите для этого параметра значение **Да**, если пользователю должно быть предложено выбрать фактическую дату и время окончания для заказа на работу, когда он обновляется до этого состояния жизненного цикла. |
| Разнести журналы                 | Установите для этого параметра значение **Да**, если журналы заказа на работу должны быть автоматически разнесены, когда заказ на работу обновляется до данного состояния жизненного цикла. Если во время разноски журнала происходит ошибка, выводится сообщение, и обновление состояния жизненного цикла заказа на работу отменяется. Чтобы просмотреть строки журнала для заказа на работу, выберите **Управление активами** \> **Общее** \> **Заказы на работу** \> **Все заказы на работу**, **Активные заказы на работу** или **Мои активные заказы на работу**, выберите заказ на работу в списке, затем выберите **Журналы**. Эта настройка автоматической разноски журнала заказов на работу в конкретном состоянии жизненного цикла та же, что и при выборе **Разнести журналы** на странице **Журналы заказов на работу**.<p>**Примечание.** Если для этого параметра выбрано значение **Да**, журналы автоматически разносятся, если не был настроен рабочий процесс утверждения. Если ваша компания использует настройку утверждения журнала, настроенную на странице **Утверждение журнала** (**Управление и учет по проектам** \> **Настройка** \> **Журналы** \> **Утверждение журнала**), менеджер или клерк должен выполнить проверку и разноску регистраций потребления.</p> |
| Обработка контрольного списка обслуживания | Установите для этого параметра значение **Да**, если все вложенные контрольные списки обслуживания должны быть обработаны, когда заказ на работу обновляется до данного состояния жизненного цикла. В рамках этой обработки все регистрации счетчиков, сделанные в контрольном списке обслуживания, разносятся, и оценивается результат всего контрольного списка обслуживания. Строки контрольного списка обслуживания, имеющие результаты **Пройден** и **Не пройден** оцениваются, и если по крайней мере одна строка не удалась, в управлении активами весь контрольный список обслуживания отмечается как **Не пройден**. |
| Готово                         | Установите для этого параметра значение **Да**, если состояние расписания заданий заказа на работу для всех заданий заказа на работу, созданных для заказа на работу, должно быть автоматически обновлено до состояния **Готов**, когда заказ на работу обновляется до этого состояния жизненного цикла. |
| Запустить                         | Установите для этого параметра значение **Да**, если состояние расписания заданий заказа на работу для всех заданий заказа на работу, созданных для заказа на работу, должно быть автоматически обновлено до состояния **Начато**, когда заказ на работу обновляется до этого состояния жизненного цикла. |
| Завершение                           | Установите для этого параметра значение **Да**, если состояние расписания заданий заказа на работу для всех заданий заказа на работу, созданных для заказа на работу, должно быть автоматически обновлено до состояния **Завершено**, когда заказ на работу обновляется до этого состояния жизненного цикла. |
| Удалить строки плана         | Установите для этого параметра значение **Да**, если планирование всех заданий заказа на работу, которые уже были запланированы, должно быть удалено, когда заказ на работу обновляется до этого состояния жизненного цикла. Другими словами, зарезервированные мощности актива, связанный работник обслуживания и связанные инструменты, будут удалены. Например, можно установить для этого параметра значение **Да** в состоянии жизненного цикла заказа на работу, которое называется **Оценено**. Затем, когда заказ на работу возвращается в это состояние жизненного цикла, поскольку требуется перепланирование, планирование может быть удалено для этого заказа на работу. |

## <a name="set-up-project-stages-and-work-order-lifecycle-states"></a>Настройка этапов проекта и состояний жизненного цикла заказов на работу

1. Выберите **Управление и учет по проектам** \> **Настройка** \> **Параметры модуля "Управление и учет по проектам"**.
2. На вкладке **Состояние проекта** для каждого этапа, который необходимо использовать, установите флажок для каждого типа проекта, который требуется для заказов на работу. Типы проектов определяют правила о разрешенных финансовых задачах. Примерами таких финансовых задач являются создание прогноза, создание оценок и создание начальных сальдо.

    > [!IMPORTANT]
    > Если этап проекта не выбран для типа проекта, но стадия проекта используется для состояния жизненного цикла заказа на работу, проекты заказов на работу не обновляются соответствующим образом.

3. Закройте страницу **Параметры модуля "Управление и учет по проектам"**.
4. Выберите **Управление активами** \> **Настройка** \> **Заказы на работу** \> **Состояния жизненного цикла**.
5. Выберите **Создать**, чтобы создать состояние жизненного цикла заказа на работу.
6. В поле **Состояния жизненного цикла** введите идентификатор для состояния жизненного цикла.
7. В поле **Имя** введите имя.

    На экспресс-вкладке **Подробно** поле **Модели жизненного цикла** показывает количество моделей жизненного цикла заказа на работу, которые используют это состояние жизненного цикла.

8. На экспресс-вкладке **Общие** в разделе **Заказ на работу** выберите функции, которые должны быть доступны для этого состояния жизненного цикла, задав для соответствующих параметров значение **Да**. Описания параметров приведены таблице ранее в этой теме.
9. В разделе **Проект** в поле **Этап** выберите стадию проекта, которая должна быть связана с этим состоянием жизненного цикла.
10. В разделе **Проект** установите для параметра **Закрыть мероприятия** значение **Да**, если мероприятия по проекту, которые связаны с каждым заданием заказа на работу, должны быть автоматически закрыты, когда заказ на работу находится в данном состоянии жизненного цикла.

    > [!NOTE]
    > Чтобы найти номер мероприятия проекта, которое связано с заданием по заказу на работу, выберите **Управление активами** \> **Общее** \> **Заказы на работу** \> **Все заказы на работу**, **Активные заказы на работу** или **Мои активные заказы на работу**. Откройте заказ на работу, затем выберите задание заказа на работу. Номер мероприятия отображается в поле **Номер мероприятия** в разделе **Проект** на вкладке **Общие** на экспресс-вкладке **Сведения по строке**.

11. В разделе **Прогноз** настройте для параметра **Копировать часовой прогноз**, **Копировать прогноз номенклатуры** и/или **Копировать прогноз расходов** значение **Да**, если прогнозы проекта заказа на работу должны автоматически копироваться в журналы заказов на работу, когда заказ на работу находится в данном состоянии жизненного цикла.
12. В разделе **График** задайте для одного из параметров значение **Да**, если статус графика для заданий заказов на работу следует обновить, когда заказ на работу находится в данном состоянии жизненного цикла. Описания параметров **Готово**, **Начало**, **Конец** и **Удалить строки графика** см. в таблице, приведенной выше в этой теме.

    > [!NOTE]
    > Чтобы просмотреть строки графика, которые связаны с заданиями заказа на работу, выберите **Управление активами** \> **Общее** \> **Заказы на работу** \> **Все заказы на работу**, **Активные заказы на работу** или **Мои активные заказы на работу**. Откройте заказ на работу, выберите задание заказа на работу на экспресс-вкладке **Задания заказа на работу**, и просмотрите связанные сведения на экспресс-вкладке **Сведения по строке**. В поле **Состояние** на вкладке **График** отображается состояние задания заказа на работу. В поле **Состояние** могут быть установлены следующие значения: **Запланировано**, **Готово**, **Начато**, **Остановлено** и **Завершено**.

13. В разделе **Запросы на обслуживание** в поле **Состояние жизненного цикла** выберите состояние жизненного цикла запроса на обслуживание, до которого должны быть обновлены соответствующие запросы на обслуживание. Это обновление выполняется автоматически. Это можно сделать только в том случае, если в модели жизненного цикла запроса на обслуживание, используемой для запроса на обслуживание, выбрано это состояние жизненного цикла запроса на обслуживание.
14. В разделе **Актив** задайте для параметра **Обновить спецификацию актива** значение **Да**, если все номенклатуры, используемые в заказе на работу, должны автоматически обновляться на странице **Спецификация активов** при обновлении заказа на работу в это состояние жизненного цикла. Этот параметр может быть уместным, если, например, состояние жизненного цикла заказа на работу определяет заказ на работу как завершенный или законченный.
15. В разделе **Пул заказов на работу** задайте для параметра **Удалить ссылку на пул** значение **Да**, если заказы на работу, которые находятся в этом состоянии жизненного цикла, должны быть автоматически удалены из пулов заказов на работу.
16. На экспресс-вкладке **Проверить** выберите типы проверки, которые должны быть активированы в этом состоянии жизненного цикла, задав для соответствующих параметров значение **Да**. Затем в поле **Тип** для каждого выбранного типа проверки выберите тип сообщения, которое должно отображаться, если обязательные поля, имеющие отношение к типу проверки, не были проверены. При выборе **Ошибка** обновление состояния жизненного цикла заказа на работу отменяется, пока не будут обновлены соответствующие обязательные поля в заказе на работу.

    - Параметры **Простой из-за обслуживания**, **Контрольный список обслуживания**, **Симптом неисправности**, **Причина неисправности** и **Устранение неисправности** связаны с параметрами в разделе **Обязательно** на странице **Типы заданий на работу** (**Управление активами** \> **Настройка** \> **Заказы на работу** \> **Типы заказов на работу**). Чтобы активировать эти проверки, для соответствующих параметров необходимо также установить значение **Да** в типе заказа на работу, который используется для данного заказа на работу.
    - Если для параметра **Контрольный список обслуживания** задано значение **Да** для состояния жизненного цикла, в которое обновляется заказ на работу, проверка выполняется для проверки того, что строки контрольного списка обслуживания, помеченные как **Обязательные**, были зарегистрированы как **Проверено** или **Неприменимо**. Если ни одна из этих регистраций не была выполнена в обязательных строках, при обновлении заказа на работу до этого состояния выводится информационное сообщение, ошибка или предупреждение.
    - Если параметр **Подтвержденные затраты** имеет значение **Да** для состояния жизненного цикла, до которого обновляется заказ на работу, общая сумма подтвержденных затрат (то есть, общая сумма расходов, которые должно оплатить юридическое лицо), рассчитывается для каждого задания заказа на работу. Если сумма подтвержденных затрат больше 0 (нуля), выводится сообщение. Можно выбрать типы обязательств по затратам, которые включены, на экспресс-вкладке **Подтверждения затрат** на вкладке **Управление затратами** страницы **Параметры модуля "Управление и учет по проектам"** (**Управление и учет по проектам** \> **Настройка** \> **Параметры модуля "Управление и учет по проектам"**).
    - Если для параметра **Простой из-за обслуживания** задано значение **Да** для состояния жизненного цикла, в которое обновляется заказ на работу, проверка простоя из-за обслуживании выполняется для актива, который связан с этим заказом на работу. Если регистрация простоя из-за обслуживания была выполнена, но нет регистрации **Завершено**, то при обновлении заказа на работу до этого состояния жизненного цикла будет выведено соответствующее сообщение.
    - Если стандартная настройка проекта не включает все этапы, необходимые для настройки управления активами, можно настроить пользовательские этапы проекта на вкладке **Этап проекта** на странице **Параметры модуля "Управление и учет по проектам"**. На следующем рисунке показана вкладка **Этап проекта** на странице **Параметры модуля "Управление и учет по проектам"**.

    ![Страница настройки этапов проекта для различных типов проекта](media/10-setup-for-work-orders.png)

> [!NOTE]
> Если состояние жизненного цикла, до которого обновляется заказ на работу, является неактивным, журналы, которые связаны с этим заказом на работу, но еще не были разнесены, автоматически удаляются. Это позволяет гарантировать автоматическую очистку неиспользуемых данных. (Состояние жизненного цикла неактивно, если параметр **Активный** для него имеет значение **Нет** на экспресс-вкладке **Общие** на странице **Состояния жизненного цикла заказа на работу**.)
>
> Однако если вручную задать заказ на работу, чтобы он был неактивным, журналы, которые связаны с этим заказом на работу, но еще не были разнесены, автоматически **не** удаляются. (Чтобы вручную деактивировать заказ на работу, **Управление активами** \> **Общие** \> **Заказы на работу** \> **Все заказы на работу** или **Активные заказы на работу**. Откройте заказ на работу и переключитесь в представление **Заголовок**. На экспресс-вкладке **Общая** выберите **Изменить**, затем установите для параметра **Активный** значение **Нет**.)

## <a name="relations-among-work-order-lifecycle-models-work-order-types-and-work-order-lifecycle-states"></a>Отношения между моделями жизненного цикла заказа на работу, типами заказа на работу и состояниями жизненного цикла заказа на работу

Модели жизненного цикла ссылаются на рабочие процессы, а состояния жизненного цикла выбираются в модели жизненного цикла в последовательном порядке. Модели жизненного цикла настраиваются для типов заказов на работу. Типы заказов на работу определяют размер или объем рабочих процессов и процессов работы. Например, **Обслуживание**, которое является стандартным типом заказа на работу, может быть связано с моделью жизненного цикла заказов на работу, имеющей много состояний жизненного цикла. Напротив, можно иметь тип заказа на работу **Корректирующий**, который используется для незапланированных заказов на работу или для заказов на работу, в которых задание завершено до создания заказа на работу в связи со срочной ситуацией. Этот тип заказа на работу может быть связан с моделью жизненного цикла заказа на работу, которая имеет только несколько состояний жизненного цикла.

Причина использования типов заключается в том, что если тип определен, например, в заказе на работу или в активе, соответствующие рабочие процессы (состояния жизненного цикла) определяются автоматически. Для получения дополнительной информации о том, как настроить типы заказов на работу, см. раздел [Типы заказов на работу](../setup-for-work-orders/work-order-types.md).

> [!NOTE]
> Состояния жизненного цикла, модели жизненного цикла и типы применяются к функциональным местоположениям, активам и запросам на обслуживание, в дополнение к заказам на работу.

На следующем рисунке показана связь между типами заказов на работу, моделями жизненного цикла и состояниями жизненного цикла.

![Страница типа заказа на работу в сравнении со страницей моделей жизненного цикла заказа на работу](media/11-setup-for-work-orders.png)

## <a name="work-order-lifecycle-models"></a>Модели жизненного цикла заказа на работу

После создания состояний жизненного цикла заказов на работу, необходимых для заказов на работу, они могут быть разделены на модели жизненного цикла заказов на работу. Следует создать как минимум одну стандартную модель жизненного цикла.

1. Выберите **Управление активами** \> **Настройка** \> **Заказы на работу** \> **Модели жизненного цикла**.
2. Выберите **Создать**, чтобы создать модель жизненного цикла заказа на работу.
3. В поле **Модель жизненного цикла** введите идентификатор для модели жизненного цикла.
4. В поле **Имя** введите имя.

    На экспресс-вкладке **Подробно** поле **Состояния жизненного цикла** показывает количество состояний жизненного цикла, которые выбраны в этой модели жизненного цикла. Поле **Типы заказов на работу** показывает количество типов заказов на работу, которые используют эту модель жизненного цикла.

5. На экспресс-вкладке **Состояния жизненного цикла** выберите состояния жизненного цикла, которые должны быть включены в модель жизненного цикла:

    - Чтобы включить состояние жизненного цикла в модель жизненного цикла, выберите его в разделе **Осталось состояний жизненного цикла**, а затем выберите кнопку со стрелкой вправо ![Стрелка вправо](media/12-setup-for-work-orders.png), чтобы переместить его в раздел **Выбранные состояния жизненного цикла**.
    - Чтобы включить все доступные состояния жизненного цикла в модель жизненного цикла, выберите кнопку **Выбрать все доступные этапы** ![Выбрать все доступные этапы](media/13-setup-for-work-orders.png). Все состояния жизненного цикла перемещаются в раздел **Выбранные состояния жизненного цикла**.
    - Чтобы удалить состояние жизненного цикла из модели жизненного цикла, выберите его в разделе **Выбранные состояния жизненного цикла**, а затем выберите кнопку со стрелкой влево ![Стрелка влево](media/14-setup-for-work-orders.png), чтобы переместить его в раздел **Осталось состояний жизненного цикла**.

6. Выберите **Обновления состояния жизненного цикла** для определения состояний жизненного цикла, которые могут следовать за выбранным состоянием жизненного цикла.
7. На экспресс-вкладке **Обновления** в поле **Запланированное состояние** выберите состояние жизненного цикла, которое должно быть всегда выбрано для заказа на работу, для которого завершено планирование заказов на работу, независимо от предыдущего состояния жизненного цикла заказа на работу.
8. В поле **Состояние жизненного цикла "Не запланировано"** выберите состояние жизненного цикла, которое должно быть всегда выбрано для заказа на работу, если планирование заказа на работу было удалено.
9. Сохраните модель жизненного цикла заказа на работу.

![Страница моделей жизненного цикла заказа на работу](media/15-setup-for-work-orders.png)
