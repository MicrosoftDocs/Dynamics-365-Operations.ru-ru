---
title: "Ограничения выражений и ограничения таблиц в моделях конфигурации продукта"
description: "В этом разделе описывается использование ограничений выражений и ограничений таблиц. Ограничения управляют значениями атрибутов, которые можно выбирать при настройке продуктов для заказа на продажу, предложения по продажам, заказа на покупку или производственного заказа. Можно использовать ограничения выражений или ограничения таблиц в зависимости того, как вы предпочитаете формировать ограничения."
author: cvocph
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
ms.search.form: PCGlobalTableConstraintEdit, PCProductConfigurationModelDetails, PCTableConstraintAttachAttributeTree, PCTableConstraintDefinition
audience: Application User
ms.reviewer: YuyuScheller
ms.search.scope: Core, AX 7.0.0, Operations, UnifiedOperations
ms.custom: 53111
ms.assetid: 5c12b1f2-eb89-4648-a755-de412f2eadd6
ms.search.region: Global
ms.search.industry: Manufacturing
ms.author: yuyus
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.translationtype: HT
ms.sourcegitcommit: 69eeb90387ca5765c163c7d482295ea104cc078c
ms.openlocfilehash: 7aeb0438182fe177ac83580f03cbb547c79fd08a
ms.contentlocale: ru-ru
ms.lasthandoff: 09/29/2017

---

# <a name="expression-constraints-and-table-constraints-in-product-configuration-models"></a>Ограничения выражений и ограничения таблиц в моделях конфигурации продукта

[!include[banner](../includes/banner.md)]


В этом разделе описывается использование ограничений выражений и ограничений таблиц. Ограничения управляют значениями атрибутов, которые можно выбирать при настройке продуктов для заказа на продажу, предложения по продажам, заказа на покупку или производственного заказа. Можно использовать ограничения выражений или ограничения таблиц в зависимости того, как вы предпочитаете формировать ограничения. 

Ограничения используются для управления значениями атрибутов, которые можно выбирать при настройке продуктов для заказа на продажу, предложения по продажам, заказа на покупку или производственного заказа. Можно использовать ограничения выражений или ограничения таблиц в зависимости того, как вы предпочитаете формировать ограничения.

## <a name="what-are-expression-constraints"></a>Что такое ограничения выражений?
Ограничения выражения описываются выражением, которое использует арифметические и логические операторы и функции. Ограничение выражения пишется для определенного компонента в модели конфигурации продукта. Его нельзя использовать повторно или совместно с другим компонентом. Однако ограничения выражения для компонента могут ссылаться на атрибуты субкомпонентов компонента.

## <a name="what-are-table-constraints"></a>Что такое ограничения таблиц?
Ограничения таблиц содержат сочетания допустимых значений атрибутов при настройке продукта. Определения ограничений таблиц можно использовать универсальным образом. При создании ограничения таблицы для компонента в модели конфигурации продукта выбирается определение ограничения таблицы. Чтобы создать допустимые комбинации, можно добавить атрибуты конкретных типов к компонентам. Каждый тип атрибута имеет определенное значение.

### <a name="example-of-a-table-constraint"></a>Пример ограничения таблицы

Этот пример показывает, как вы можете ограничить конфигурацию динамика определенными видами отделки корпуса и передней панели. В первой таблице показаны отделки корпуса и передние решетки, которые обычно доступны для настройки. Значения определены для типов атрибутов **Отделка корпуса** и **Передняя решетка**.

| Тип атрибута | Значения                      |
|----------------|-----------------------------|
| Отделка корпуса | Черный, Дуб, Палисандр, Белый |
| Передняя решетка    | Черная, Металл, Белая         |

В следующей таблице показаны сочетания, которые определены ограничением таблицы **Цвет и отделка**. Путем использование этого ограничения таблицы вы можете задать конфигурацию динамика с отделкой дубом и черной решеткой, с отделкой палисандром и белой решеткой и так далее.

| Готово         | Решетка                       |
|----------------|-----------------------------|
| Дуб            | Черный                       |
| Палисандр       | Белый                       |
| Белый          | Черный                       |
| Белый          | Белый                       |
| Черный          | Черный                       |
| Черный          | Металл                       | 

Вы можете создавать системные и пользовательские ограничения таблиц. Дополнительную информацию см. в разделе [Системные и пользовательские ограничения таблиц](system-defined-user-defined-table-constraints.md).

## <a name="what-syntax-should-be-used-to-write-constraints"></a>Какой синтаксис следует использовать для записи ограничений?
При написании ограничений используется синтаксис языка OML. В системе для разрешения ограничений используется решатель ограничений Microsoft Solver Foundation.

## <a name="should-i-use-table-constraints-or-expression-constraints"></a>Как выбрать между ограничениями таблиц и ограничениями выражений?
Можно использовать как ограничения выражений, так и ограничения таблиц, в зависимости того, как вы предпочитаете формировать ограничения. Ограничение таблицы формируется как матрица, тогда как ограничение выражения — как отдельное выражение. При настройке продукта используемый тип ограничения не имеет значения. Следующий пример демонстрирует отличия этих двух методов.  

Когда вы настраиваете продукт путем использования приведенных ниже установок ограничения, разрешены следующие комбинации:

-   Продукт в цвете "Черный", размер 30 или 50
-   Продукт в цвете "Красный", размер 20

### <a name="table-constraint-setup"></a>Настройка ограничений таблицы

| Цвет | Размер |
|-------|------|
| Черный | 30   |
| Черный | 50   |
| Красный   | 20   |

### <a name="expression-constraint-setup"></a>Настройка ограничения выражения

(Color == "Black" & (size == "30" | size == "50")) | (color == "Red" & size = "20")

## <a name="should-i-use-operators-or-infix-notation-when-i-write-expression-constraints"></a>Нужно ли использовать операторы или инфиксную нотацию при написании ограничений выражений?
Вы можете писать ограничения выражений с помощью доступных префиксных операторов или с использованием инфиксной нотации. Для операторов **Min**, **Max** и **Abs** использовать инфиксную нотацию нельзя. Эти операторы включены в качестве стандартных операторов в большинство языков программирования.

## <a name="what-operators-and-infix-notation-can-i-use-when-i-write-expression-constraints"></a>Какие операторы и инфиксные нотации можно использовать при написании ограничений выражений?
В следующей таблице перечислены операторы и инфиксные нотации, которые можно использовать при написании ограничений выражений для компонента модели конфигурации продукта. В примерах в первой таблице показано, как записать выражение с помощью инфиксной нотации или операторов.

<table>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead>
<tr class="header">
<th>Оператор</th>
<th>Описание</th>
<th>Синтаксис</th>
<th>Примеры</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Implies</td>
<td>Выражение истинно, если первое условие ложно, второе условие истинно или выполняются оба условия.</td>
<td>Implies[a, b], infix: a -: b</td>
<td><ul>
<li><strong>Оператор:</strong> Implies[x != 0, y &gt;= 0]</li>
<li><strong>Инфиксная нотация:</strong> x != 0 -: y &gt;= 0</li>
</ul></td>
</tr>
<tr class="even">
<td>И</td>
<td>Выражение истинно, только если условия истинны. Если число условий равно 0, результатом будет <strong>True</strong>.</td>
<td>And[args], infix: a &amp; b &amp; ... &amp; z</td>
<td><ul>
<li><strong>Оператор:</strong> And[x == 2, y &lt;= 2]</li>
<li><strong>Инфиксная нотация:</strong> x == 2 &amp; y &lt;= 2</li>
</ul></td>
</tr>
<tr class="odd">
<td>Или</td>
<td>Выражение истинно, если любое из условий истинно. Если число условий равно 0, результатом будет <strong>False</strong>.</td>
<td>Or[args], infix: a | b | ... | z</td>
<td><ul>
<li><strong>Оператор:</strong> Or[x == 2, y &lt;= 2]</li>
<li><strong>Инфиксная нотация:</strong> x == 2 | y &lt;= 2</li>
</ul></td>
</tr>
<tr class="even">
<td>Плюс</td>
<td>Выражение суммирует его условия. Если число условий равно 0, результатом будет <strong>0</strong>.</td>
<td>Plus[args], infix: a + b + ... + z</td>
<td><ul>
<li><strong>Оператор:</strong> Plus[x, y, 2] == z</li>
<li><strong>Инфиксная нотация:</strong> x + y + 2 == z</li>
</ul></td>
</tr>
<tr class="odd">
<td>Минус</td>
<td>Инвертирует свой аргумент. У этого выражения должно быть ровно одно условие.</td>
<td>Minus[expr], infix: -expr</td>
<td><ul>
<li><strong>Оператор:</strong> Minus[x] == y</li>
<li><strong>Инфиксная нотация:</strong> -x == y</li>
</ul></td>
</tr>
<tr class="even">
<td>Abs</td>
<td>Выражение получает модуль значения условия. У этого выражения должно быть ровно одно условие.</td>
<td>Abs[expr]</td>
<td><strong>Оператор:</strong> Abs[x]</td>
</tr>
<tr class="odd">
<td>Время</td>
<td>Выражение получает произведение условий. Если число условий равно 0, результатом будет <strong>1</strong>.</td>
<td>Times[args], infix: a * b * ... * z</td>
<td><ul>
<li><strong>Оператор:</strong> Times[x, y, 2] == z</li>
<li><strong>Инфиксная нотация:</strong> x * y * 2 == z</li>
</ul></td>
</tr>
<tr class="even">
<td>Степень</td>
<td>Выражение возводит аргумент в степень. Возведение в степень применяется справа налево. (То есть, это правоассоциативное выражение.) Поэтому выражение <strong>Power[a, b, c]</strong> эквивалентно <strong>Power[a, Power[b, c]]</strong>. <strong>Power</strong> можно использовать только в том случае, если экспонента является положительной константой.</td>
<td>Power[args], infix: a ^ b ^ ... ^ z</td>
<td><ul>
<li><strong>Оператор:</strong> Power[x, 2] == y</li>
<li><strong>Инфиксная нотация:</strong> x ^ 2 == y</li>
</ul></td>
</tr>
<tr class="odd">
<td>Макс.</td>
<td>Выражение получает наибольшее из условий. Если число условий равно 0, результатом будет <strong>Infinity</strong>.</td>
<td>Max[args]</td>
<td><strong>Оператор:</strong> Max[x, y, 2] == z</td>
</tr>
<tr class="even">
<td>Мин.</td>
<td>Выражение получает наименьшее из условий. Если число условий равно 0, результатом будет <strong>Infinity</strong>.</td>
<td>Min[args]</td>
<td><strong>Оператор:</strong> Min[x, y, 2] == z</td>
</tr>
<tr class="odd">
<td>Не</td>
<td>Выражение получает логическую инверсию условия. У этого выражения должно быть ровно одно условие.</td>
<td>Not[expr], infix: !expr</td>
<td><ul>
<li><strong>Оператор:</strong> Not[x] &amp; Not[y == 3]</li>
<li><strong>Инфиксная нотация:</strong> !x!(y == 3)</li>
</ul></td>
</tr>
</tbody>
</table>

Примеры в следующей таблице показывают запись в инфиксной нотации.

| Нотация infix    | описание                                                                                   |
|-------------------|-----------------------------------------------------------------------------------------------|
| x + y + z         | Сложение                                                                                      |
| x \* y \* z       | Умножение                                                                                |
| x - y             | Двоичное вычитание преобразуется так же, как двоичное сложение с измененным знаком второго аргумента. |
| x ^ y ^ z         | Возведение в степень является правоассоциативным выражением                                                   |
| !x                | Логическое НЕ                                                                                   |
| x -: y            | Логическая импликация                                                                           |
| х | y | z         | Логическое ИЛИ                                                                                    |
| x & y & z         | Логическое И                                                                                   |
| x == y == z       | Равенство                                                                                      |
| x != y != z       | Определенный                                                                                      |
| x &lt; y &lt; z   | Меньше                                                                                     |
| x &gt; y &gt; z   | Больше                                                                                  |
| x &lt;= y &lt;= z | Меньше или равен                                                                         |
| x &gt;= y &gt;= z | Больше или равен                                                                      |
| (x)               | Скобки имеют наивысший приоритет.                                                      |

## <a name="why-arent-my-expression-constraints-validated-correctly"></a>Почему мои ограничения выражений не проходят проверку?
Нельзя использовать зарезервированные ключевые слова, такие как имена решателя, для атрибутов, компонентов или субкомпонентов в модели конфигурации продукта. Ниже приведен список зарезервированных ключевых слов, которые нельзя использовать.

-   Ceiling
-   Элемент
-   Равно
-   Этаж
-   Если
-   Less
-   Больше
-   Implies
-   Журнал
-   Макс.
-   Мин.
-   Минус
-   Плюс
-   Мощность
-   Время
-   Интервал
-   Модель
-   Роль в решениях
-   Цель


<a name="see-also"></a>См. также
--------

[Создание ограничения выражения (проводник по задаче)(tasks/add-expression-constraint-product-configuration-model.md)

[Добавление расчета к модели конфигурации продукта (проводник по задаче)](tasks/add-calculation-product-configuration-model.md)




