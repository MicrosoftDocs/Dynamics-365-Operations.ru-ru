---
title: Цены продажи на основе атрибутов для конфигурации продуктов на основе ограничений
description: В этом разделе описывается, как создать модели цены продажи с ценами продажи на основе компонентов и атрибутов, а не на основе физической спецификации и маршрута.
author: sorenva
manager: tfehr
ms.date: 10/2/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: sorenand
ms.search.validFrom: 2020-08-17
ms.dyn365.ops.version: Release 10.0.15
ms.openlocfilehash: c0f9c1bb94b4dcc3c3c1e7656868ef6e6bd903db
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/13/2020
ms.locfileid: "4435703"
---
# <a name="attribute-based-sales-prices-for-constraint-based-product-configuration"></a>Цены продажи на основе атрибутов для конфигурации продуктов на основе ограничений

В этом разделе описывается, как создать модели цены продажи с ценами продажи на основе компонентов и атрибутов, а не на основе физической спецификации и маршрута. Можно создать несколько моделей цены продажи для каждой модели конфигурации продукта.

## <a name="set-relevant-product-information-management-parameters"></a>Задание соответствующих параметров управление сведениями о продукте

Перед началом создания моделей цен необходимо определить валюту по умолчанию, которая будет использоваться при создании моделей цены продажи. Можно также выбрать, приложить ли файл Microsoft Excel с разбивкой цены по всем строкам заказа или предложения с расценками. Разбиение цены позволит обмениваться информацией с клиентами о том, как вы получили определенную цену продажи для настроенного продукта.

Чтобы задать валюту по умолчанию:

1. Перейдите в **Управление сведениями о продукте \> Настройка \> Параметры модуля "Управление сведениями о продукте"**.
1. Откройте вкладку **Модели конфигурации продуктов на основе ограничений**.
1. Откройте раскрывающийся список **Валюта по умолчанию** и выберите валюту.

    ![Задайте валюту по умолчанию для конфигурации продуктов на основе ограничений](media/prod-config-currency.png "Задайте валюту по умолчанию для конфигурации продуктов на основе ограничений")

1. Если требуется приложить файл Excel с разбивкой цены по всем строкам заказа или предложения с расценками, затем в разделе **Модель цены** установите для параметра **Вложить** значение *Да*.

## <a name="build-your-sales-price-models"></a><a name="build-price-model"></a>Создание моделей цены продажи

Для создания модели цены продажи:

1. Перейдите в раздел **Управление сведениями о продукте \> Продукты \> Модели конфигурации продукта**.
1. Выберите целевую модель конфигурации продукта.
1. В области действий откройте вкладку **Модель** и в группе **Настройка** выберите **Модели цены**.
1. Откроется страница **Модели цены**.
1. Выберите модель цены или добавьте новую модель в сетку.
1. Выберите **Правка**, чтобы открыть страницу правки для выбранной модели, которая предоставляет следующие возможности:
    - В заголовке формы отображается валюта по умолчанию, позволяя добавлять новые валюты для настройки цены.
    - В левой области отображаются все компоненты и требования пользователя к модели продукта. Каждый узел в дереве моделей продуктов может иметь одно выражение базовой цены и произвольное число правил выражений. Правило выражения состоит из условия и выражения, а каждое правило выражения содержит параметр продукта, который помогает управлять ценой продукта.
    - При создании условий и выражений используются те же операторы, что и для расчетов в модели продукта. Редактор выражений также поддерживает как условия, так и выражения.
1. Выберите узел в левом столбце, а затем воспользуйтесь функциями, описанными на предыдущем шаге, для определения правил ценообразования для него (см. также пример, приведенный после этой процедуры). Повторяйте этот шаг для каждого требуемого узла.

В следующем примере показана базовая цена в виде статического числа 899,95 евро, которая может быть изменена одним или несколькими правилами из следующих пяти правил выражения, в зависимости от конфигурации, выбранной клиентом:

- Для белой отделки корпуса вычтите 59,95 евро.
- Для защиты углов добавьте 35,95 евро.
- Для металлической передней решетки добавьте 89,95 евро.
- Для отделки корпуса красным деревом добавьте 119,95 евро.
- Добавьте 12,95 евро для каждой единицы высоты динамика.

![Пример модели цены](media/prod-config-rules-example.png "Пример модели цены")

## <a name="add-support-for-multiple-currencies"></a>Добавление поддержки нескольких валют

При продаже настраиваемого продукта система проверяет, были ли цены заданы явным образом в валюте клиента. В этом случае используются явные значения. Если нет, система использует валютные курсы, установленные для компании-продавца, для преобразования значения валюты по умолчанию в валюту клиента.

Для добавления явных цен в дополнительную валюту:

1. Откройте страницу правки для модели цены, как описано в разделе [Создание моделей цены продажи](#build-price-model).
1. Выберите кнопку **Добавить** в заголовке модели цены, чтобы открыть раскрывающееся диалоговое окно **Валюты**, в котором перечисляются доступные валюты.
1. В раскрывающемся диалоговом окне **Валюты** выберите валюту, которую требуется добавить, затем выберите **ОК**.
1. В раскрывающемся списке **Текущая валюта** теперь включена только что добавленная валюта, а также все остальные валюты, которые могли быть добавлены ранее. Выберите новую валюту и обратите внимание на то, что сетка в разделе **Правила выражений** теперь содержит два поля выражения:
    - **Выражение** — отображает выражение (или постоянное значение) для поиска цены, используя текущую выбранную валюту в поле **Текущая валюта**.
    - **Выражения по умолчанию** — отображает выражение (или постоянное значение) для поиска цены, используя валюту по умолчанию (отображаемую в поле **Валюта по умолчанию**).

    > [!NOTE]
    > Поле **Условие** для правил выражения "принадлежит" валюте по умолчанию, что означает невозможность изменения условия для других валют. Кроме того, нельзя добавлять новые правила выражений, когда в поле **Текущая валюта** выбрана валюта, отличная от валюты по умолчанию.
1. Измените значения в столбце **Выражение**, как это необходимо для текущей валюты.

В приведенном выше примере _евро_ является валютой по умолчанию, а _доллары США_ добавлены в качестве дополнительной валюты.

![Пример модели с несколькими валютами](media/prod-config-rules-currency-example.png "Пример модели с несколькими валютами")

> [!NOTE]
> Нельзя добавлять правила выражений, которые являются уникальными для валюты, отличной от валюты по умолчанию. Чтобы создать правила выражений, которые будут применяться только для валюты, отличной от валюты по умолчанию, необходимо задать для валюты по умолчанию выражение цены, равное нулю. Затем задайте соответствующее выражение для валюты, не являющейся валютой по умолчанию.

## <a name="test-your-price-model"></a>Проверка модели цены

Чтобы проверить работу цен продажи в сеансе конфигурации, откройте страницу редактирование для модели цены, как описано в разделе [Создание моделей цены продажи](#build-price-model), затем выберите **Проверка** в области действий. Откроется диалоговое окно **Протестировать модель продукции**, в котором можно выполнить следующие действия:

- Воспользуйтесь предложенными здесь настройками конфигурации, чтобы выбрать параметры продукта, затем посмотрите, как они влияют на значение, отображаемое для параметра **Цена и дата отгрузки**.
- Выберите **Просмотр детализации цены** для загрузки документа Excel, в котором отображаются полные сведения о том, как была рассчитана цена.

![Проверка модели продукта](media/prod-config-test.png "Проверка модели продукта")

В загруженной таблице показаны как абсолютное значение, так и вклад в процентах для каждого активного элемента цены. Если задан параметр модели цены **Вложить** на странице **Параметры управления сведениями о продуктах**, эта таблица Excel прикрепляется к строке заказа или предложения с расценками.

![Таблица Excel с отображением разбивки цены](media/prod-config-excel-example.png "Таблица Excel с отображением разбивки цены")

## <a name="set-up-selection-criteria-for-price-models"></a>Настройка критериев выбора для моделей цены

Когда заданы модели цены, необходимо установить по крайней мере один критерий выбора для выбора модели цены при настройке для предложения с расценками или для заказа. Для этого необходимо настроить один или несколько запросов. В сочетании с соответствующими моделями цены продажи запросы обеспечивают большую гибкость в задании цен продажи для конкретных клиентов, регионов, периодов и других критериев.

Чтобы настроить критерии выбора для моделей цены:

1. Перейдите в раздел **Управление сведениями о продукте \> Продукты \> Модели конфигурации продукта**.
1. Выберите целевую модель конфигурации продукта.
1. В области действий откройте вкладку **Модель** и в группе **Настройка** выберите **Критерии модели цены**. Откроется страница **Критерии модели цены**.
1. Если нужная строка запроса еще не существует, выберите **Создать** на панели действий, чтобы добавить новую строку в сетку и выполнить для нее следующие настройки:
    - **Имя** — введите имя для этой строки.
    - **Описание** — кратко опишите запрос и его назначение.
    - **Модель цены** — выберите [модель цены](#build-price-model) (из текущей модели конфигурации), к которой будет применяться запрос при его запуске.
    - **Тип заказа** — выберите тип заказа, в котором будет применяться запрос.
    - **Действительно с** — указывается первый день, когда будет применяться запрос.
    - **Срок действия истекает** — указывается последняя дата, когда будет применяться запрос.

    ![Критерии модели цены](media/prod-config-price-model-criteria.png "Критерии модели цены")

1. Выберите строку для запроса, которую необходимо определить, затем выберите **Правка** на **панели действий**. Откроется диалоговое окно редактора запросов. Он работает так же, как и большинство редакторов запросов в Supply Chain Management. Используйте его для определения условий, при которых должна применяться модель цены для выбранной строки.

1. Повторите шаги 4–5 для каждого из необходимых запросов.
    > [!TIP]
    > Можно сэкономить время, копируя существующую строку, которая уже аналогична новой строке, которую необходимо добавить. Для этого выберите целевую строку, затем выберите **Дублировать** на панели действий.

1. После завершения настройки критериев расположите их в нужном порядке в списке **Критерии модели цены**. Чтобы изменить положение строки, выберите строку, затем выберите **Вверх** или **Вниз** в области действий.

    > [!IMPORTANT]
    > Во время настройки система начинает поиск с верхней части списка и использует первый запрос, который соответствует данным в предложении с расценками или строке заказа. Таким образом, необходимо сначала разместить самые конкретные запросы. Если поместить общий запрос в начало списка, то он будет использоваться, даже несмотря на то, что в списке может быть указан запрос, который предназначен для точного клиента или перспективного клиента конфигурации.

## <a name="set-attribute-based-sales-prices-for-the-product-model-version"></a>Задание цен продажи на основе атрибутов для версии модели продукта

Заключительным шагом является указание цены продажи на основе атрибутов для версии модели продукта. Для этого:

1. Перейдите в раздел **Управление сведениями о продукте \> Продукты \> Модели конфигурации продукта**.
1. Выберите целевую модель конфигурации продукта.
1. В области действий откройте вкладку **Модель** и в группе **Сведения о модели продукции** выберите **Версии**.
1. Откроется страница **Версии**. Убедитесь, что для параметра **Метод ценообразования** выбрано значение **На основе атрибутов**.
    ![Задание метода ценообразования на основе атрибутов](media/prod-config-versions.png "Задание метода ценообразования на основе атрибутов")


[!INCLUDE[footer-include](../../includes/footer-banner.md)]