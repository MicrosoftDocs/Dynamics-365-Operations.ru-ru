---
title: Синхронизация контактов непосредственно из Sales с контактами или клиентами в Supply Chain Management
description: В этой теме обсуждаются шаблоны и базовые задачи, которые используются для синхронизации объектов контакта (контакты) и контакта (клиенты) из Dynamics 365 Sales с Dynamics 365 Supply Chain Management.
author: ChristianRytt
ms.date: 10/25/2018
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: crytt
ms.dyn365.ops.version: July 2017 update
ms.search.validFrom: 2017-07-8
ms.openlocfilehash: a16006a18e552c00fbed5eda7579fbcb77c315ea
ms.sourcegitcommit: c08a9d19eed1df03f32442ddb65a2adf1473d3b6
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/06/2021
ms.locfileid: "6355933"
---
# <a name="synchronize-contacts-directly-from-sales-to-contacts-or-customers-in-supply-chain-management"></a>Синхронизация контактов непосредственно из Sales с контактами или клиентами в Supply Chain Management

[!include [banner](../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]

> [!NOTE]
> Перед использованием решения "Перспективный клиент в наличные деньги" следует ознакомиться с разделом [Интеграция данных в Microsoft Dataverse для приложений](/powerapps/administrator/data-integrator).

В этой теме обсуждаются шаблоны и базовые задачи, которые используются для синхронизации таблиц контакта (контакты) и контакта (клиенты) непосредственно из Dynamics 365 Sales с Dynamics 365 Supply Chain Management.

## <a name="data-flow-in-prospect-to-cash"></a>Поток данных в решение "Перспективный клиент в наличные деньги"

Решение "Перспективный клиент в наличные деньги" использует функцию интеграции данных для синхронизации данных между экземплярами Supply Chain Management и Sales. Шаблоны "Перспективный клиент в наличные деньги", доступные в компоненте интеграции данных, обеспечивают движение данных об организациях, контактах, продуктах, предложениях по продажам, заказах на продажу и накладных по продажам между Supply Chain Management и Sales. На следующем рисунке показано, как данные синхронизируются между Supply Chain Management и Sales.

[![Поток данных в решение "Перспективный клиент в наличные деньги".](./media/prospect-to-cash-data-flow.png)](./media/prospect-to-cash-data-flow.png)

## <a name="templates-and-tasks"></a>Шаблоны и задачи

Чтобы получить доступ к доступным шаблонам, откройте [Центр администрирования PowerApps](https://preview.admin.powerapps.com/dataintegration). Выберите **Проекты**, затем в правом верхнем углу выберите **Создать проект**, чтобы выбрать общие шаблоны.

Следующие шаблоны и базовые задачи используются для синхронизации таблиц "Контакт" (контакты) в Sales с таблицами "Контакт" (клиенты) в Supply Chain Management.

- **Имена шаблонов в интеграции данных**

    - Контакты (из Sales в Supply Chain Management) — напрямую
    - Из контактов в клиента (из Sales в Supply Chain Management) — напрямую

- **Имена задач в проекте интеграции данных**

    - Контакты
    - ContactToCustomer

Следующая задача синхронизации необходима, чтобы стала возможна синхронизации контактов: счета (из Sales в Supply Chain Management)

## <a name="entity-sets"></a>Наборы объектов

| Прод.    | Управление цепочкой поставок |
|----------|------------------------|
| Контактные лица | Контактные лица Dataverse           |
| Контактные лица | Клиенты V2           |

## <a name="entity-flow"></a>Поток объектов

Для управления контактами используется приложение Sales, из которого они синхронизируются с Supply Chain Management.

Контакт в Sales может стать контактом или клиентом в Supply Chain Management. Чтобы определить, должен ли контакт в Sales синхронизироваться в Supply Chain Management в качестве контакта или клиента, система проверяет следующие свойства контакта в Sales:

- **Синхронизация с клиентом в Supply Chain Management:** контакты, в которых для параметра **Является активным клиентом** задано значение **Да**.
- **Синхронизация с контактом в Supply Chain Management:** контакты, у которых для параметра **Является активным клиентом** задано значение **Нет**, а параметр **Компания** (родительская организация/контакт) указывает на организацию (не на контакт).

## <a name="prospect-to-cash-solution-for-sales"></a>Решение "Перспективный клиент в наличные деньги" для Sales

Новый столбец **Является активным клиентов** добавлен к контакту. Этот столбец используется для разделения контактов, имеющих мероприятия по продаже, и контактов, не имеющих мероприятий по продаже. В поле **Является активным клиентом** установлено значение **Да** только для контактов, с которыми связаны предложения, заказы или счета. Только эти контакты синхронизируются с Supply Chain Management как клиенты.

Новый столбец **IsCompanyAnAccount** добавлен к контакту. Этот столбец указывает, связан ли контакт с компанией (родительской организацией/контактом) типа **Организация**. Эта информация используется для определения контактов, которые должны синхронизироваться с Supply Chain Management как контакты.

Новый столбец **Номер контакта** добавлен к контакту для предоставления естественного и уникального ключа для интеграции. Когда создается новый контакт, значение **Номер контакта** обновляется автоматически с использованием номерной серии. Значение состоит из **CON**, после чего следует увеличивающая номерная серия и суффикс из шести символов. Пример: **CON-01000-BVRCPS**

При применении решения интеграции для Sales сценарий обновления задает значение в столбце **Номер контакта** для существующих контактов с использованием номерной серии, как описано выше. Сценарий обновления также задает для столбца **Является активным клиентом** значение **Да** для всех контактов, имеющие мероприятия по продажам.

## <a name="in-supply-chain-management"></a>В Supply Chain Management

Контакты, помеченные с помощью свойства **IsContactPersonExternallyMaintained**. Это свойство указывает, что данный контакт ведется извне. В этом случае контакты, ведение которых выполняется извне, ведутся в Sales.

## <a name="preconditions-and-mapping-setup"></a>Предварительные условия и настройка сопоставления

### <a name="contact-to-customer"></a>Контакт в клиента

- **CustomerGroup** является обязательным в Supply Chain Management. Чтобы помочь избежать ошибок синхронизации, можно указать значение по умолчанию в сопоставлении. Это значение по умолчанию будет использоваться, если этот столбец оставить пустым в Sales.

    Значение шаблона по умолчанию — **10**.

- Добавляя следующие сопоставления, можно уменьшить число обновлений вручную, необходимых в Supply Chain Management. Можно использовать значение по умолчанию или сопоставление значений, например, из поля **Страна/регион** или **Город**.

    - **SiteId** — сайт по умолчанию также может быть определен в продуктах в Supply Chain Management. Сайт необходим для создания предложений и заказов на продажу в Supply Chain Management.

        Значение шаблона для **SiteId** не определено.

    - **WarehouseId** — склад по умолчанию также может быть определен в продуктах в Supply Chain Management. Склад необходим для создания предложений и заказов на продажу в Supply Chain Management.

        Значение шаблона для **WarehouseId** не определено.

    - **LanguageId** — язык необходим для создания предложений и заказов на продажу в Supply Chain Management.
    
        Значение шаблона по умолчанию — **en-us**.

## <a name="template-mapping-in-data-integration"></a>Сопоставление шаблона в интеграции данных

На следующем рисунке показан пример сопоставления шаблона в интеграции данных. 

> [!NOTE]
> Сопоставление показывает, какие данные столбцов будут синхронизированы из Sales в Supply Chain Management.

### <a name="contact-to-contact"></a>Контакт в контакт

![Сопоставление шаблона в интеграторе данных.](./media/contacts-direct-template-mapping-data-integrator-1.png)

### <a name="contact-to-customer"></a>Контакт в клиента

![Сопоставление шаблона в интеграторе данных.](./media/contacts-direct-template-mapping-data-integrator-2.png)


## <a name="related-topics"></a>Связанные разделы

[Продажа перспективному клиенту](prospect-to-cash.md)

[Синхронизация организаций непосредственно из Sales с клиентами в Supply Chain Management](accounts-template-mapping-direct.md)

[Синхронизация продуктов непосредственно из Supply Chain Management с продуктами в Sales](products-template-mapping-direct.md)

[Синхронизация заказов на продажу напрямую между Sales и Supply Chain Management](sales-order-template-mapping-direct-two-ways.md)

[Синхронизация заголовков и строк накладной по продаже непосредственно из Supply Chain Management с Sales](sales-invoice-template-mapping-direct.md)




[!INCLUDE[footer-include](../../includes/footer-banner.md)]