---
title: Резервирование по заказам
description: В этом разделе представлена информация о резервировании по заказу. Резервирование по заказу помогает гарантировано обещать даты доставки для клиентов и обеспечивает гибкость для выполнения этих дат.
author: ShylaThompson
manager: tfehr
ms.date: 04/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: SalesATP, SalesAvailableDlvDates, SalesCarrier
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.custom: 193933
ms.assetid: 676fc53a-fa25-4688-9f26-1005316763b8
ms.search.region: Global
ms.author: kamaybac
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: ae3192bcf5128c09279017e3d5e8be8f42ec6975
ms.sourcegitcommit: 95f90ac3f248716abdab16d5de6ccbf059616e4b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/03/2020
ms.locfileid: "4666778"
---
# <a name="order-promising"></a>Резервирование по заказам

[!include [banner](../includes/banner.md)]

В этом разделе представлена информация о резервировании по заказу. Резервирование по заказу помогает гарантировано обещать даты доставки для клиентов и обеспечивает гибкость для выполнения этих дат.

При резервировании по заказу рассчитываются самые ранние даты отгрузки и поступления. Оно основывается на способе управления датами поставки и времени транспортировки в днях. Можно выбрать один из четырех способов управления датами поставки:

-   **Время упреждения для продаж** — время упреждения для продаж представляет собой время, затрачиваемое с момента создания заказа на продажу до отправки номенклатуры. Расчет даты поставки основан на количестве дней по умолчанию и не учитывает доступность запасов, известное требование или запланированную поставку.
-   **ATP (доступно для заказа)** — ATP — это количество номенклатуры, которое доступно и может быть зарезервировано для клиента на определенную дату. Расчет ATP включает незадействованные запасы, значения времени упреждения, плановые поступления и расходы.
-   **ATP + резервное время для расхода** — дата отгрузки равна дате ATP плюс резервное время для отпуска номенклатуры. Резервное время для отпуска — это время, необходимое для подготовки номенклатур для отгрузки.
-   **CTP (доступно для заказа с учетом производства)** — доступность рассчитывается через развертывание.

> [!NOTE]
> При обновлении заказа на продажу сведения о планировании заказа обновляются только в том случае, если существующая дата планирования заказа не может быть выполнена, как показано в следующих примерах:
> 
> - **Пример 1**: текущая дата планирования заказа — 20 июля, но в связи с увеличением количества невозможно выполнить доставку раньше 25 июля. Поскольку текущая дата больше не может быть удовлетворена, запускается планирование сроков выполнения заказа.
> -  **Пример 2**: текущая дата планирования заказа — 20 июля, но в связи с уменьшением количества теперь доставка возможна 15 июля. Однако поскольку текущая дата может быть выполнена, планирование заказа не запускается, а 20 июля остается плановой датой заказа.

## <a name="atp-calculations"></a>Расчеты ATP
Количество ATP вычисляется с помощью метода "суммарное ATP с прогнозированием". Основное преимущество этого метода подсчета ATP заключается в том, что с его помощью можно обрабатывать случаи, когда сумма расходов между приходами больше, чем последний приход (т. е. когда необходимо использовать количество из предыдущего прихода для соответствия требованию). Метод расчета "суммарное ATP с прогнозированием” включает все расходы, пока суммарное получаемое количество не превысит суммарное количество расходов. Следовательно этот метод расчета ATP оценивает, можно ли использовать некоторое количество из более раннего периода в более последнем периоде.  

Доступное для резервирования (ATP) количество — это незадействованное сальдо склада за первый период, Оно обычно подсчитывается для каждого периода, на который запланировано поступление. Программа оценивает период доступного для резервирования (ATP) количества в днях и считает текущую дату первой датой доступного для резервирования (ATP) количества. В первом периоде в доступное для резервирования (ATP) количество входят запасы в наличии минус должные и просроченные заказы клиента.  

ATP рассчитывается по следующей формуле:  

ATP = ATP за предыдущий период + приходы за текущий период - расходы за текущий период - количество чистых расходов за каждый период вплоть до периода, когда сумма приходов за все будущие периоды вплоть до будущего периода включительно, превышает сумму расходов вплоть до будущего периода включительно.  

Обратите внимание, что расчет доступного для резервирования количества не включает информацию, указанную в поле даты окончания срока годности, а также временную границу ATP, ожидаемую системой, когда любое количество может быть обещано.

Когда не останется расходов и приходов для рассмотрения, доступное для резервирования (ATP) количество для следующих дат совпадает с последним подсчитанным доступным для резервирования (ATP) количеством.  

Если не все аналитики номенклатуры заполнены во время проверки доступного для резервирования (ATP) количества, их все равно можно указать в расходах и поступлениях. В этом случае во время расчета доступного для резервирования (ATP) количества поступления и расходы должны быть агрегированы по существующим аналитикам, чтобы уменьшить количество строк поступлений и расходов при расчете доступного для резервирования (ATP) количества.  

Отображаемое количество ATP всегда больше или равно 0 (нулю). Если при подсчете получается отрицательное доступное для резервирования (ATP) количество (например, если ранее было зарезервировано количество большее, чем доступное) количество автоматически устанавливает равным 0.

### <a name="example"></a>Пример

В поле **Временная граница требования ATP назад во времени** можно указать, какое время назад следует искать задержанные заказы требования или расходы запасов. В поле **Временная граница поставки ATP назад во времени** можно указать, какое время назад следует искать задержанные заказы поставки или поступления на склад. Например, если считать заказы, которые задерживаются только на семь дней, следует учитывать в расчете ATP, в обоих полях будет задано значение **7**.  

В полях **Время корр. счета отложенного требования "Доступно для резервирования" (ATP)** и **Время корр. счета отложенной поставки "Доступно для резервирования" (ATP)** указывается, когда требование или поставка будут учитываться в расчетах ATP. Например, если отложенные требование и поставка должны учитываться в расчете ATP на послезавтра, в обоих полях будет задано значение **2**. Значение **2** значит, что количество номенклатуры в задержанном заказе на покупку, которое должно учитываться в расчете ATP, будет отображаться как доступное по прошествии двух дней с момента текущей даты.  

В следующем примере введено значение **7** в полях **Временная граница требования ATP назад во времени** и **Временная граница поставки ATP назад во времени** и значение **1** в полях **Время корр. счета отложенного требования "Доступно для резервирования" (ATP)** и **Время корр. счета отложенной поставки "Доступно для резервирования" (ATP)**.  

Заказ на покупку 200 единиц продукта, который должен быть доставлен три дня назад, до сих пор не получен. В связи с этим строка заказа на продажу на 75 единиц того же продукта, который должен быть доставлен вчера, также не отгружена.  

Звонит клиент и хочет заказать 150 единиц этого же продукта. Во время проверки доступности продукта обнаруживается наличие еще одного заказа на покупку 100 единиц продукта, который будет доставлен через 10 дней.  

Вы создаете строку заказа на продажу для продукта и вводите значение **150** для количества.  

Поскольку для контроля даты поставки используется метод ATP, данные ATP рассчитываются для поиска самой ранней возможной даты отгрузки. На основании настроек задержанные заказ на покупку и заказ на продажу учитываются, и мы получаем количество ATP на текущую дату равным 0. Завтра, когда ожидается поступление задержанного заказа на покупку, количество ATP рассчитывается как больше 0 (в этом случае это 125). Однако через 10 дней с момента текущей даты, когда ожидается поступление дополнительного заказа на покупку 100 единиц, количество ATP становится больше 150.  

Таким образом, в качестве даты отгрузки задается дата спустя 10 дней с текущей даты на основании расчета ATP. Следовательно, можно сообщить клиенту, что запрошенное количество может быть доставлено в течение 10 дней, начиная с сегодняшнего дня.





[!INCLUDE[footer-include](../../includes/footer-banner.md)]