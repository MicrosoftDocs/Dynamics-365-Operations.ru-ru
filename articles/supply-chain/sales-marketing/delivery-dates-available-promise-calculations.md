---
title: Резервирование по заказу
description: Эта статья содержит сведения о резервировании по заказу. Резервирование по заказу помогает гарантировано обещать даты доставки для клиентов и обеспечивает гибкость для выполнения этих дат.
author: ShylaThompson
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: SalesATP, SalesAvailableDlvDates
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: 193933
ms.assetid: 676fc53a-fa25-4688-9f26-1005316763b8
ms.search.region: Global
ms.author: omulvad
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: ad70e94521fdb8c6d3f9a76a84aa9da5759fcf89
ms.sourcegitcommit: 9d4c7edd0ae2053c37c7d81cdd180b16bf3a9d3b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/15/2019
ms.locfileid: "1548286"
---
# <a name="order-promising"></a><span data-ttu-id="ab9c6-104">Резервирование по заказу</span><span class="sxs-lookup"><span data-stu-id="ab9c6-104">Order promising</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="ab9c6-105">Эта статья содержит сведения о резервировании по заказу.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-105">This article provides information about order promising.</span></span> <span data-ttu-id="ab9c6-106">Резервирование по заказу помогает гарантировано обещать даты доставки для клиентов и обеспечивает гибкость для выполнения этих дат.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-106">Order promising helps you reliably promise delivery dates to your customers and gives you flexibility so that you can meet those dates.</span></span>

<span data-ttu-id="ab9c6-107">При резервировании по заказу рассчитываются самые ранние даты отгрузки и поступления. Оно основывается на способе управления датами поставки и времени транспортировки в днях.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-107">Order promising calculates the earliest ship and receipt dates, and is based on the delivery date control method and transport days.</span></span> <span data-ttu-id="ab9c6-108">Можно выбрать один из четырех способов управления датами поставки:</span><span class="sxs-lookup"><span data-stu-id="ab9c6-108">You can select among four delivery date control methods:</span></span>

-   <span data-ttu-id="ab9c6-109">**Время упреждения для продаж** — время упреждения для продаж представляет собой время, затрачиваемое с момента создания заказа на продажу до отправки номенклатуры.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-109">**Sales lead time** – Sales lead time is the time between creation of the sales order and shipment of the items.</span></span> <span data-ttu-id="ab9c6-110">Расчет даты поставки основан на количестве дней по умолчанию и не учитывает доступность запасов, известное требование или запланированную поставку.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-110">The delivery date calculation is based on a default number of days, and does not consider stock availability, known demand, or planned supply.</span></span>
-   <span data-ttu-id="ab9c6-111">**ATP (доступно для заказа)** — ATP — это количество номенклатуры, которое доступно и может быть зарезервировано для клиента на определенную дату.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-111">**ATP (available-to-promise)** – ATP is the quantity of an item that is available and can be promised to a customer on a specific date.</span></span> <span data-ttu-id="ab9c6-112">Расчет ATP включает незадействованные запасы, значения времени упреждения, плановые поступления и расходы.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-112">The ATP calculation includes uncommitted inventory, lead times, planned receipts, and issues.</span></span>
-   <span data-ttu-id="ab9c6-113">**ATP + резервное время для расхода** — дата отгрузки равна дате ATP плюс резервное время для отпуска номенклатуры.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-113">**ATP + Issue margin** – The shipping date is equal to the ATP date plus the issue margin for the item.</span></span> <span data-ttu-id="ab9c6-114">Резервное время для отпуска — это время, необходимое для подготовки номенклатур для отгрузки.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-114">The issue margin is the time that is required to prepare the items for shipment.</span></span>
-   <span data-ttu-id="ab9c6-115">**CTP (доступно для заказа с учетом производства)** — доступность рассчитывается через развертывание.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-115">**CTP (capable-to-promise)** – Availability is calculated through explosion.</span></span>

## <a name="atp-calculations"></a><span data-ttu-id="ab9c6-116">Расчеты ATP</span><span class="sxs-lookup"><span data-stu-id="ab9c6-116">ATP calculations</span></span>
<span data-ttu-id="ab9c6-117">Количество ATP вычисляется с помощью метода "суммарное ATP с прогнозированием".</span><span class="sxs-lookup"><span data-stu-id="ab9c6-117">The ATP quantity is calculated by using the “cumulative ATP with look-ahead” method.</span></span> <span data-ttu-id="ab9c6-118">Основное преимущество этого метода подсчета ATP заключается в том, что с его помощью можно обрабатывать случаи, когда сумма расходов между приходами больше, чем последний приход (т. е. когда необходимо использовать количество из предыдущего прихода для соответствия требованию).</span><span class="sxs-lookup"><span data-stu-id="ab9c6-118">The main advantage of this ATP calculation method is that it can handle cases where the sum of issues among receipts is more than the latest receipt (for example, when a quantity from an earlier receipt must be used to meet a requirement).</span></span> <span data-ttu-id="ab9c6-119">Метод расчета "суммарное ATP с прогнозированием” включает все расходы, пока суммарное получаемое количество не превысит суммарное количество расходов.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-119">The “cumulative ATP with look-ahead” calculation method includes all issues until the cumulative quantity to receive exceeds the cumulative quantity to issue.</span></span> <span data-ttu-id="ab9c6-120">Следовательно этот метод расчета ATP оценивает, можно ли использовать некоторое количество из более раннего периода в более последнем периоде.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-120">Therefore, this ATP calculation method evaluates whether some of the quantity from an earlier period can be used in a later period.</span></span>  

<span data-ttu-id="ab9c6-121">Доступное для резервирования (ATP) количество — это незадействованное сальдо склада за первый период,</span><span class="sxs-lookup"><span data-stu-id="ab9c6-121">The ATP quantity is the uncommitted inventory balance in the first period.</span></span> <span data-ttu-id="ab9c6-122">Оно обычно подсчитывается для каждого периода, на который запланировано поступление.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-122">Typically, it's calculated for each period in which a receipt is scheduled.</span></span> <span data-ttu-id="ab9c6-123">Программа оценивает период доступного для резервирования (ATP) количества в днях и считает текущую дату первой датой доступного для резервирования (ATP) количества.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-123">The program calculates the ATP period in days and calculates the current date as the first date for the ATP quantity.</span></span> <span data-ttu-id="ab9c6-124">В первом периоде в доступное для резервирования (ATP) количество входят запасы в наличии минус должные и просроченные заказы клиента.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-124">In the first period, ATP includes on-hand inventory minus customer orders that are due and overdue.</span></span>  

<span data-ttu-id="ab9c6-125">ATP рассчитывается по следующей формуле:</span><span class="sxs-lookup"><span data-stu-id="ab9c6-125">ATP is calculated by using the following formula:</span></span>  

<span data-ttu-id="ab9c6-126">ATP = ATP за предыдущий период + приходы за текущий период - расходы за текущий период - количество чистых расходов за каждый период вплоть до периода, когда сумма приходов за все будущие периоды вплоть до будущего периода включительно, превышает сумму расходов вплоть до будущего периода включительно.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-126">ATP = ATP for the previous period + Receipts for the current period – Issues for the current period – Net issue quantity for each future period until the period when the sum of receipts for all future periods, up to and including the future period, exceeds the sum of issues up to and including the future period.</span></span>  

<span data-ttu-id="ab9c6-127">Когда не останется расходов и приходов для рассмотрения, доступное для резервирования (ATP) количество для следующих дат совпадает с последним подсчитанным доступным для резервирования (ATP) количеством.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-127">When there are no more issues or receipts to consider, the ATP quantity for the following dates is the same as the latest calculated ATP quantity.</span></span>  

<span data-ttu-id="ab9c6-128">Если не все аналитики номенклатуры заполнены во время проверки доступного для резервирования (ATP) количества, их все равно можно указать в расходах и поступлениях.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-128">If not all the dimensions that are used for an item are given when the ATP check is completed, they can still be specified on the issue and receipts.</span></span> <span data-ttu-id="ab9c6-129">В этом случае во время расчета доступного для резервирования (ATP) количества поступления и расходы должны быть агрегированы по существующим аналитикам, чтобы уменьшить количество строк поступлений и расходов при расчете доступного для резервирования (ATP) количества.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-129">In this case, in the ATP calculation, the receipts and issues must be aggregated to the existing dimensions to reduce the number of receipt and issue lines that are used in the ATP calculation.</span></span>  

<span data-ttu-id="ab9c6-130">Отображаемое количество ATP всегда больше или равно 0 (нулю).</span><span class="sxs-lookup"><span data-stu-id="ab9c6-130">The ATP quantity that is shown is always greater than or equal to 0 (zero).</span></span> <span data-ttu-id="ab9c6-131">Если при подсчете получается отрицательное доступное для резервирования (ATP) количество (например, если ранее было зарезервировано количество большее, чем доступное), программа автоматически устанавливает количество равным **0**.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-131">If the calculation returns a negative ATP quantity (for example, if the quantity that was previously promised exceeds the available quantity), the program automatically sets the quantity to **0**.</span></span>

### <a name="example"></a><span data-ttu-id="ab9c6-132">Пример</span><span class="sxs-lookup"><span data-stu-id="ab9c6-132">Example</span></span>

<span data-ttu-id="ab9c6-133">В поле **Временная граница требования ATP назад во времени** можно указать, какое время назад следует искать задержанные заказы требования или расходы запасов.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-133">The **ATP backward demand time fence** field controls how far back in time to look for delayed demand orders or inventory issues.</span></span> <span data-ttu-id="ab9c6-134">В поле **Временная граница поставки ATP назад во времени** можно указать, какое время назад следует искать задержанные заказы поставки или поступления на склад.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-134">The **ATP backward supply time fence** field controls how far back in time to look for delayed supply orders or inventory receipts.</span></span> <span data-ttu-id="ab9c6-135">Например, если считать заказы, которые задерживаются только на семь дней, следует учитывать в расчете ATP, в обоих полях будет задано значение **7**.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-135">For example, if orders that are delayed by only seven days should be considered in the ATP calculation, both fields should be set to **7**.</span></span>  

<span data-ttu-id="ab9c6-136">В полях **Время корр. счета отложенного требования "Доступно для резервирования" (ATP)** и **Время корр. счета отложенной поставки "Доступно для резервирования" (ATP)** указывается, когда требование или поставка будут учитываться в расчетах ATP.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-136">The **ATP delayed demand offset time** and **ATP delayed supply offset time** fields control when the delayed demand or supply will be considered in the ATP calculation.</span></span> <span data-ttu-id="ab9c6-137">Например, если отложенные требование и поставка должны учитываться в расчете ATP на послезавтра, в обоих полях будет задано значение **2**.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-137">For example, if the delayed supply and demand should be considered in the ATP calculation the day after tomorrow, both fields should be set to **2**.</span></span> <span data-ttu-id="ab9c6-138">Значение **2** значит, что количество номенклатуры в задержанном заказе на покупку, которое должно учитываться в расчете ATP, будет отображаться как доступное по прошествии двух дней с момента текущей даты.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-138">A value of **2** means that the quantity of an item on a delayed purchase order that should be considered in the ATP calculation will be seen as available two days after the current date.</span></span>  

<span data-ttu-id="ab9c6-139">В следующем примере введено значение **7** в полях **Временная граница требования ATP назад во времени** и **Временная граница поставки ATP назад во времени** и значение **1** в полях **Время корр. счета отложенного требования "Доступно для резервирования" (ATP)** и **Время корр. счета отложенной поставки "Доступно для резервирования" (ATP)**.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-139">For the following example, **7** is entered in the **ATP backward demand time fence** and **ATP backward supply time fence** fields, and **1** is entered in the **ATP delayed demand offset time** and **ATP delayed supply offset time** fields.</span></span>  

<span data-ttu-id="ab9c6-140">Заказ на покупку 200 единиц продукта, который должен быть доставлен три дня назад, до сих пор не получен.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-140">A purchase order for 200 pieces of a product that should have been received three days ago hasn't been received yet.</span></span> <span data-ttu-id="ab9c6-141">В связи с этим строка заказа на продажу на 75 единиц того же продукта, который должен быть доставлен вчера, также не отгружена.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-141">Therefore, a sales order line for 75 pieces of the same product that should have been shipped yesterday hasn't been shipped.</span></span>  

<span data-ttu-id="ab9c6-142">Звонит клиент и хочет заказать 150 единиц этого же продукта.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-142">A customer calls and wants to order 150 pieces of the same product.</span></span> <span data-ttu-id="ab9c6-143">Во время проверки доступности продукта обнаруживается наличие еще одного заказа на покупку 100 единиц продукта, который будет доставлен через 10 дней.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-143">When you verify the availability of the product, you find that another purchase order for 100 pieces of the product will be delivered 10 days later.</span></span>  

<span data-ttu-id="ab9c6-144">Вы создаете строку заказа на продажу для продукта и вводите значение **150** для количества.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-144">You create a sales order line for the product and enter **150** as the quantity.</span></span>  

<span data-ttu-id="ab9c6-145">Поскольку для контроля даты поставки используется метод ATP, данные ATP рассчитываются для поиска самой ранней возможной даты отгрузки.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-145">Because the delivery date control is method is ATP, the ATP data is calculated to find the earliest possible ship date.</span></span> <span data-ttu-id="ab9c6-146">На основании настроек задержанные заказ на покупку и заказ на продажу учитываются, и мы получаем количество ATP на текущую дату равным 0.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-146">Based on the settings, the delayed purchase order and sales order are considered, and the resulting ATP quantity for the current date is 0.</span></span> <span data-ttu-id="ab9c6-147">Завтра, когда ожидается поступление задержанного заказа на покупку, количество ATP рассчитывается как больше 0 (в этом случае это 125).</span><span class="sxs-lookup"><span data-stu-id="ab9c6-147">Tomorrow, when the delayed purchase order is expected to be received, the ATP quantity is calculated as more than 0 (in this case, it's calculated as 125).</span></span> <span data-ttu-id="ab9c6-148">Однако через 10 дней с момента текущей даты, когда ожидается поступление дополнительного заказа на покупку 100 единиц, количество ATP становится больше 150.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-148">However, 10 days from now, when the additional purchase order for 100 pieces is expected to be received, the ATP quantity becomes more than 150.</span></span>  

<span data-ttu-id="ab9c6-149">Таким образом, в качестве даты отгрузки задается дата спустя 10 дней с текущей даты на основании расчета ATP.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-149">Therefore, the ship date is set to 10 days from now, based on the ATP calculation.</span></span> <span data-ttu-id="ab9c6-150">Следовательно, можно сообщить клиенту, что запрошенное количество может быть доставлено в течение 10 дней, начиная с сегодняшнего дня.</span><span class="sxs-lookup"><span data-stu-id="ab9c6-150">Therefore, you tell the customer that the requested quantity can be delivered 10 days from now.</span></span>



