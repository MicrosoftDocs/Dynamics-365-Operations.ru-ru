---
title: Синхронизация заказов на выполнение работ в Field Service с заказами на продажу в Supply Chain Management
description: В этом разделе описываются шаблоны и базовые задачи, которые используются для синхронизации заказов на выполнение работ в Field Service с заказами на продажу в Supply Chain Management.
author: ChristianRytt
manager: tfehr
ms.date: 04/09/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: crytt
ms.dyn365.ops.version: July 2017 update
ms.search.validFrom: 2017-07-8
ms.openlocfilehash: d8051e21c731213e2d74ab6eeb80c239ca9932e6
ms.sourcegitcommit: e89bb3e5420a6ece84f4e80c11e360b4a042f59d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/17/2020
ms.locfileid: "4528931"
---
# <a name="synchronize-work-orders-in-field-service-to-sales-orders-in-supply-chain-management"></a><span data-ttu-id="8c1d9-103">Синхронизация заказов на выполнение работ в Field Service с заказами на продажу в Supply Chain Management</span><span class="sxs-lookup"><span data-stu-id="8c1d9-103">Synchronize work orders in Field Service to sales orders in Supply Chain Management</span></span>

[!include[banner](../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]

<span data-ttu-id="8c1d9-104">В этой теме обсуждаются шаблоны и базовые задачи, которые используются для синхронизации заказов на выполнение работ в Dynamics 365 Field Service с заказами на продажу в Dynamics 365 Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-104">This topic discusses the templates and underlying tasks that are used to synchronize work orders in Dynamics 365 Field Service to sales order in Dynamics 365 Supply Chain Management.</span></span>

<span data-ttu-id="8c1d9-105">[![Синхронизация бизнес-процессов между Supply Chain Management и Field Service](./media/field-service-integration.png)](./media/field-service-integration.png)</span><span class="sxs-lookup"><span data-stu-id="8c1d9-105">[![Synchronization of business processes between Supply Chain Management and Field Service](./media/field-service-integration.png)](./media/field-service-integration.png)</span></span>


## <a name="templates-and-tasks"></a><span data-ttu-id="8c1d9-106">Шаблоны и задачи</span><span class="sxs-lookup"><span data-stu-id="8c1d9-106">Templates and tasks</span></span>

<span data-ttu-id="8c1d9-107">Следующие шаблоны и базовые задачи используются для выполнения синхронизации заказов на выполнение работ в Field Service с заказами на продажу в Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-107">The following templates and underlying tasks are used to run the synchronization of work orders in Field Service to sales orders in Supply Chain Management.</span></span>

### <a name="names-of-the-templates-in-data-integration"></a><span data-ttu-id="8c1d9-108">Имена шаблонов в интеграции данных</span><span class="sxs-lookup"><span data-stu-id="8c1d9-108">Names of the templates in Data integration</span></span>

<span data-ttu-id="8c1d9-109">Шаблон **Заказы на выполнение работ с заказами на продажу (Field Service с Supply Chain Management)** используется для выполнения синхронизации.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-109">The **Work orders to Sales orders (Field Service to Supply Chain Management)** template is used to run synchronization.</span></span>

### <a name="names-of-the-tasks-in-the-data-integration-project"></a><span data-ttu-id="8c1d9-110">Имена задач в проекте интеграции данных</span><span class="sxs-lookup"><span data-stu-id="8c1d9-110">Names of the tasks in the Data integration project</span></span>

- <span data-ttu-id="8c1d9-111">WorkOrderHeader</span><span class="sxs-lookup"><span data-stu-id="8c1d9-111">WorkOrderHeader</span></span>
- <span data-ttu-id="8c1d9-112">WorkOrderServiceLineEstimate</span><span class="sxs-lookup"><span data-stu-id="8c1d9-112">WorkOrderServiceLineEstimate</span></span>
- <span data-ttu-id="8c1d9-113">WorkOrderServiceLineUsed</span><span class="sxs-lookup"><span data-stu-id="8c1d9-113">WorkOrderServiceLineUsed</span></span>
- <span data-ttu-id="8c1d9-114">WorkOrderProductLineEstimate</span><span class="sxs-lookup"><span data-stu-id="8c1d9-114">WorkOrderProductLineEstimate</span></span>
- <span data-ttu-id="8c1d9-115">WorkOrderProductLineUsed</span><span class="sxs-lookup"><span data-stu-id="8c1d9-115">WorkOrderProductLineUsed</span></span>

<span data-ttu-id="8c1d9-116">Перед синхронизацией заголовков и строк заказов на продажу требуются следующие задачи синхронизации:</span><span class="sxs-lookup"><span data-stu-id="8c1d9-116">The following synchronization tasks are required before synchronization of sales order headers and lines can occur:</span></span>

- <span data-ttu-id="8c1d9-117">Продукты Field Service (из Supply Chain Management в Field Service)</span><span class="sxs-lookup"><span data-stu-id="8c1d9-117">Field Service Products (Supply Chain Management to Field Service)</span></span>
- <span data-ttu-id="8c1d9-118">Счета (из Sales в Supply Chain Management) — напрямую</span><span class="sxs-lookup"><span data-stu-id="8c1d9-118">Accounts (Sales to Supply Chain Management) – Direct</span></span>

## <a name="entity-set"></a><span data-ttu-id="8c1d9-119">Набор объектов</span><span class="sxs-lookup"><span data-stu-id="8c1d9-119">Entity set</span></span>

| <span data-ttu-id="8c1d9-120">**Field Service**</span><span class="sxs-lookup"><span data-stu-id="8c1d9-120">**Field Service**</span></span> | <span data-ttu-id="8c1d9-121">**Управление цепочкой поставок**</span><span class="sxs-lookup"><span data-stu-id="8c1d9-121">**Supply Chain Management**</span></span> |
|-------------------------|-------------------------|
| <span data-ttu-id="8c1d9-122">msdyn_workorders</span><span class="sxs-lookup"><span data-stu-id="8c1d9-122">msdyn_workorders</span></span>        | <span data-ttu-id="8c1d9-123">Заголовки заказов на продажу CDS</span><span class="sxs-lookup"><span data-stu-id="8c1d9-123">CDS sales order headers</span></span> |
| <span data-ttu-id="8c1d9-124">msdyn_workorderservices</span><span class="sxs-lookup"><span data-stu-id="8c1d9-124">msdyn_workorderservices</span></span> | <span data-ttu-id="8c1d9-125">Строки заказа на продажу CDS</span><span class="sxs-lookup"><span data-stu-id="8c1d9-125">CDS sales order lines</span></span>   |
| <span data-ttu-id="8c1d9-126">msdyn_workorderproducts</span><span class="sxs-lookup"><span data-stu-id="8c1d9-126">msdyn_workorderproducts</span></span> | <span data-ttu-id="8c1d9-127">Строки заказа на продажу CDS</span><span class="sxs-lookup"><span data-stu-id="8c1d9-127">CDS sales order lines</span></span>   |

## <a name="entity-flow"></a><span data-ttu-id="8c1d9-128">Поток объектов</span><span class="sxs-lookup"><span data-stu-id="8c1d9-128">Entity flow</span></span>

<span data-ttu-id="8c1d9-129">Заказы на выполнение работ создаются в Field Service.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-129">Work orders are created in Field Service.</span></span> <span data-ttu-id="8c1d9-130">Если заказы на выполнение работ включают только продукты, поддерживаемые извне, и если значение **Статус заказа на выполнение работ** отличается от **Открыто — Не запланировано** и **Закрыт — Отменен**, заказы на выполнение работ могут быть синхронизированы с Supply Chain Management через проект интеграции данных Common Data Service.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-130">If the work orders include only externally maintained products, and if the **Work order status** value differs from **Open-Unscheduled** and **Closed – Cancelled**, the work orders can be synchronized to Supply Chain Management via a Common Data Service Data integration project.</span></span> <span data-ttu-id="8c1d9-131">Обновления заказов на выполнение работ синхронизируются как заказы на продажу в Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-131">Updates on the work orders will be synchronized as sales orders in Supply Chain Management.</span></span> <span data-ttu-id="8c1d9-132">Эти обновления включают в себя информацию о типе источника и статус.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-132">These updates include the information about the origin type and status.</span></span>

## <a name="estimated-versus-used"></a><span data-ttu-id="8c1d9-133">Ожидаемые и использованные</span><span class="sxs-lookup"><span data-stu-id="8c1d9-133">Estimated versus Used</span></span>

<span data-ttu-id="8c1d9-134">В Field Service продукты и услуги в заказах на выполнение работ могут иметь значения **Оценка** и **Использовано** для количеств и сумм.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-134">In Field Service, products and services on work orders have both **Estimated** values and **Used** values for quantities and amounts.</span></span> <span data-ttu-id="8c1d9-135">Однако в Supply Chain Management заказы на продажу не имеют таких же понятий **Оценка** и **Использовано**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-135">However, in Supply Chain Management, sales orders don't have the same concept of **Estimated** and **Used** values.</span></span> <span data-ttu-id="8c1d9-136">Для поддержки распределения продукта, который использует ожидаемое количество по заказу на продажу в Supply Chain Management, но сохранить использованное количество, которое должно быть использовано и за которое должен быть выставлен счет, два набора задач синхронизируют продукты и услуги по заказу на выполнение работ.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-136">To support product allocation that uses the expected quantity on the sales order in Supply Chain Management, but to keep the used quantity that should be consumed and invoiced, two sets of tasks synchronize the products and services on the work order.</span></span> <span data-ttu-id="8c1d9-137">Один набор задач предназначен для значений **Оценка**, второй набор задач предназначен для значений **Использовано**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-137">One set of tasks is for **Estimated** values, and the other set of tasks is for **Used** values.</span></span>

<span data-ttu-id="8c1d9-138">Это поведение поддерживает сценарии, в которых оценочные значения используются для распределения или резервирования в Supply Chain Management, тогда как использованные значения используются для потребления и выставления счета.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-138">This behavior enables scenarios where estimated values are used for allocation or reservation in Supply Chain Management, whereas used values are used for consumption and invoicing.</span></span>

### <a name="estimated"></a><span data-ttu-id="8c1d9-139">Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-139">Estimated</span></span>

<span data-ttu-id="8c1d9-140">Для синхронизации строк продуктов значения **Оценочный** используются, когда значение **Статус строки** равно **Оценочный**, для параметра **Распределенный** установлено значение **Да**, а значение **Состояние системы** не равно **Закрыто — Разнесено**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-140">For synchronization of product lines, the **Estimated** values are used when the **Line Status** value is **Estimated**, the **Allocated** option is set to **Yes**, and **System Status** value isn't **Closed – Posted**.</span></span>

<span data-ttu-id="8c1d9-141">Для синхронизации строк услуг значения **Оценочный** используются, когда значение **Статус строки** равно **Оценочный**, а значение **Состояние системы** не равно **Закрыто — Разнесено**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-141">For synchronization of service lines, the **Estimated** values are used when the **Line Status** value is **Estimated** and the **System Status** value isn't **Closed – Posted**.</span></span>

### <a name="used"></a><span data-ttu-id="8c1d9-142">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-142">Used</span></span>

<span data-ttu-id="8c1d9-143">Значения **Использовано** используются для потребления и выставления счетов.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-143">The **Used** values are used for consumption and invoicing.</span></span> <span data-ttu-id="8c1d9-144">В этих случаях синхронизируются значения **Использовано**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-144">In these cases, the **Used** values are synchronized.</span></span>

<span data-ttu-id="8c1d9-145">В следующей таблице приведен обзор различных комбинаций для строк продуктов.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-145">The following table provides an overview of the various combinations for product lines.</span></span>

| <span data-ttu-id="8c1d9-146">Состояние системы</span><span class="sxs-lookup"><span data-stu-id="8c1d9-146">System Status</span></span> <br><span data-ttu-id="8c1d9-147">(Field Service)</span><span class="sxs-lookup"><span data-stu-id="8c1d9-147">(Field Service)</span></span> | <span data-ttu-id="8c1d9-148">Состояние строки</span><span class="sxs-lookup"><span data-stu-id="8c1d9-148">Line Status</span></span> <br><span data-ttu-id="8c1d9-149">(Field Service)</span><span class="sxs-lookup"><span data-stu-id="8c1d9-149">(Field Service)</span></span> | <span data-ttu-id="8c1d9-150">Распределено</span><span class="sxs-lookup"><span data-stu-id="8c1d9-150">Allocated</span></span> <br><span data-ttu-id="8c1d9-151">(Field Service)</span><span class="sxs-lookup"><span data-stu-id="8c1d9-151">(Field Service)</span></span> |<span data-ttu-id="8c1d9-152">Синхронизируемое значение</span><span class="sxs-lookup"><span data-stu-id="8c1d9-152">Synchronized value</span></span> <br><span data-ttu-id="8c1d9-153">(Supply Chain Management)</span><span class="sxs-lookup"><span data-stu-id="8c1d9-153">(Supply Chain Management)</span></span> |
|--------------------|-------------|-----------|---------------------------------|
| <span data-ttu-id="8c1d9-154">Открыто — Запланировано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-154">Open - Scheduled</span></span>   | <span data-ttu-id="8c1d9-155">Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-155">Estimated</span></span>   | <span data-ttu-id="8c1d9-156">Да</span><span class="sxs-lookup"><span data-stu-id="8c1d9-156">Yes</span></span>       | <span data-ttu-id="8c1d9-157">Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-157">Estimated</span></span>                       |
| <span data-ttu-id="8c1d9-158">Открыто — Запланировано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-158">Open - Scheduled</span></span>   | <span data-ttu-id="8c1d9-159">Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-159">Estimated</span></span>   | <span data-ttu-id="8c1d9-160">Нет</span><span class="sxs-lookup"><span data-stu-id="8c1d9-160">No</span></span>        | <span data-ttu-id="8c1d9-161">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-161">Used</span></span>                            |
| <span data-ttu-id="8c1d9-162">Открыто — Запланировано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-162">Open - Scheduled</span></span>   | <span data-ttu-id="8c1d9-163">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-163">Used</span></span>        | <span data-ttu-id="8c1d9-164">Да</span><span class="sxs-lookup"><span data-stu-id="8c1d9-164">Yes</span></span>       | <span data-ttu-id="8c1d9-165">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-165">Used</span></span>                            |
| <span data-ttu-id="8c1d9-166">Открыто — Запланировано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-166">Open - Scheduled</span></span>   | <span data-ttu-id="8c1d9-167">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-167">Used</span></span>        | <span data-ttu-id="8c1d9-168">Нет</span><span class="sxs-lookup"><span data-stu-id="8c1d9-168">No</span></span>        | <span data-ttu-id="8c1d9-169">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-169">Used</span></span>                            |
| <span data-ttu-id="8c1d9-170">Открыто — В работе</span><span class="sxs-lookup"><span data-stu-id="8c1d9-170">Open - In Progress</span></span> | <span data-ttu-id="8c1d9-171">Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-171">Estimated</span></span>   | <span data-ttu-id="8c1d9-172">Да</span><span class="sxs-lookup"><span data-stu-id="8c1d9-172">Yes</span></span>       | <span data-ttu-id="8c1d9-173">Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-173">Estimated</span></span>                       |
| <span data-ttu-id="8c1d9-174">Открыто — В работе</span><span class="sxs-lookup"><span data-stu-id="8c1d9-174">Open - In Progress</span></span> | <span data-ttu-id="8c1d9-175">Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-175">Estimated</span></span>   | <span data-ttu-id="8c1d9-176">Нет</span><span class="sxs-lookup"><span data-stu-id="8c1d9-176">No</span></span>        | <span data-ttu-id="8c1d9-177">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-177">Used</span></span>                            |
| <span data-ttu-id="8c1d9-178">Открыто — В работе</span><span class="sxs-lookup"><span data-stu-id="8c1d9-178">Open - In Progress</span></span> | <span data-ttu-id="8c1d9-179">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-179">Used</span></span>        | <span data-ttu-id="8c1d9-180">Да</span><span class="sxs-lookup"><span data-stu-id="8c1d9-180">Yes</span></span>       | <span data-ttu-id="8c1d9-181">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-181">Used</span></span>                            |
| <span data-ttu-id="8c1d9-182">Открыто — В работе</span><span class="sxs-lookup"><span data-stu-id="8c1d9-182">Open - In Progress</span></span> | <span data-ttu-id="8c1d9-183">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-183">Used</span></span>        | <span data-ttu-id="8c1d9-184">Нет</span><span class="sxs-lookup"><span data-stu-id="8c1d9-184">No</span></span>        | <span data-ttu-id="8c1d9-185">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-185">Used</span></span>                            |
| <span data-ttu-id="8c1d9-186">Открыто — Завершено</span><span class="sxs-lookup"><span data-stu-id="8c1d9-186">Open - Completed</span></span>   | <span data-ttu-id="8c1d9-187">Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-187">Estimated</span></span>   | <span data-ttu-id="8c1d9-188">Да</span><span class="sxs-lookup"><span data-stu-id="8c1d9-188">Yes</span></span>       | <span data-ttu-id="8c1d9-189">Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-189">Estimated</span></span>                       |
| <span data-ttu-id="8c1d9-190">Открыто — Завершено</span><span class="sxs-lookup"><span data-stu-id="8c1d9-190">Open - Completed</span></span>   | <span data-ttu-id="8c1d9-191">Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-191">Estimated</span></span>   | <span data-ttu-id="8c1d9-192">Нет</span><span class="sxs-lookup"><span data-stu-id="8c1d9-192">No</span></span>        | <span data-ttu-id="8c1d9-193">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-193">Used</span></span>                            |
| <span data-ttu-id="8c1d9-194">Открыто — Завершено</span><span class="sxs-lookup"><span data-stu-id="8c1d9-194">Open - Completed</span></span>   | <span data-ttu-id="8c1d9-195">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-195">Used</span></span>        | <span data-ttu-id="8c1d9-196">Да</span><span class="sxs-lookup"><span data-stu-id="8c1d9-196">Yes</span></span>       | <span data-ttu-id="8c1d9-197">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-197">Used</span></span>                            |
| <span data-ttu-id="8c1d9-198">Открыто — Завершено</span><span class="sxs-lookup"><span data-stu-id="8c1d9-198">Open - Completed</span></span>   | <span data-ttu-id="8c1d9-199">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-199">Used</span></span>        | <span data-ttu-id="8c1d9-200">Нет</span><span class="sxs-lookup"><span data-stu-id="8c1d9-200">No</span></span>        | <span data-ttu-id="8c1d9-201">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-201">Used</span></span>                            |
| <span data-ttu-id="8c1d9-202">Закрыто — Разнесено</span><span class="sxs-lookup"><span data-stu-id="8c1d9-202">Closed - Posted</span></span>    | <span data-ttu-id="8c1d9-203">Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-203">Estimated</span></span>   | <span data-ttu-id="8c1d9-204">Да</span><span class="sxs-lookup"><span data-stu-id="8c1d9-204">Yes</span></span>       | <span data-ttu-id="8c1d9-205">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-205">Used</span></span>                            |
| <span data-ttu-id="8c1d9-206">Закрыто — Разнесено</span><span class="sxs-lookup"><span data-stu-id="8c1d9-206">Closed - Posted</span></span>    | <span data-ttu-id="8c1d9-207">Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-207">Estimated</span></span>   | <span data-ttu-id="8c1d9-208">Нет</span><span class="sxs-lookup"><span data-stu-id="8c1d9-208">No</span></span>        | <span data-ttu-id="8c1d9-209">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-209">Used</span></span>                            |
| <span data-ttu-id="8c1d9-210">Закрыто — Разнесено</span><span class="sxs-lookup"><span data-stu-id="8c1d9-210">Closed - Posted</span></span>    | <span data-ttu-id="8c1d9-211">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-211">Used</span></span>        | <span data-ttu-id="8c1d9-212">Да</span><span class="sxs-lookup"><span data-stu-id="8c1d9-212">Yes</span></span>       | <span data-ttu-id="8c1d9-213">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-213">Used</span></span>                            |
| <span data-ttu-id="8c1d9-214">Закрыто — Разнесено</span><span class="sxs-lookup"><span data-stu-id="8c1d9-214">Closed - Posted</span></span>    | <span data-ttu-id="8c1d9-215">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-215">Used</span></span>        | <span data-ttu-id="8c1d9-216">Нет</span><span class="sxs-lookup"><span data-stu-id="8c1d9-216">No</span></span>        | <span data-ttu-id="8c1d9-217">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-217">Used</span></span>                            |

<span data-ttu-id="8c1d9-218">В следующей таблице приведен обзор различных комбинаций для строк услуг.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-218">The following table provides an overview of the various combinations for service lines.</span></span>

| <span data-ttu-id="8c1d9-219">Состояние системы</span><span class="sxs-lookup"><span data-stu-id="8c1d9-219">System Status</span></span> <br><span data-ttu-id="8c1d9-220">(Field Service)</span><span class="sxs-lookup"><span data-stu-id="8c1d9-220">(Field Service)</span></span> | <span data-ttu-id="8c1d9-221">Состояние строки</span><span class="sxs-lookup"><span data-stu-id="8c1d9-221">Line Status</span></span> <br><span data-ttu-id="8c1d9-222">(Field Service)</span><span class="sxs-lookup"><span data-stu-id="8c1d9-222">(Field Service)</span></span> | <span data-ttu-id="8c1d9-223">Синхронизируемое значение</span><span class="sxs-lookup"><span data-stu-id="8c1d9-223">Synchronized value</span></span> <br><span data-ttu-id="8c1d9-224">(Supply Chain Management)</span><span class="sxs-lookup"><span data-stu-id="8c1d9-224">(Supply Chain Management)</span></span> |
|--------------------|-------------|-----------|
| <span data-ttu-id="8c1d9-225">Открыто — Запланировано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-225">Open - Scheduled</span></span>   | <span data-ttu-id="8c1d9-226">Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-226">Estimated</span></span>   | <span data-ttu-id="8c1d9-227">Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-227">Estimated</span></span> |
| <span data-ttu-id="8c1d9-228">Открыто — Запланировано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-228">Open - Scheduled</span></span>   | <span data-ttu-id="8c1d9-229">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-229">Used</span></span>        | <span data-ttu-id="8c1d9-230">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-230">Used</span></span>      |
| <span data-ttu-id="8c1d9-231">Открыто — В работе</span><span class="sxs-lookup"><span data-stu-id="8c1d9-231">Open - In Progress</span></span> | <span data-ttu-id="8c1d9-232">Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-232">Estimated</span></span>   | <span data-ttu-id="8c1d9-233">Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-233">Estimated</span></span> |
| <span data-ttu-id="8c1d9-234">Открыто — В работе</span><span class="sxs-lookup"><span data-stu-id="8c1d9-234">Open - In Progress</span></span> | <span data-ttu-id="8c1d9-235">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-235">Used</span></span>        | <span data-ttu-id="8c1d9-236">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-236">Used</span></span>      |
| <span data-ttu-id="8c1d9-237">Открыто — Завершено</span><span class="sxs-lookup"><span data-stu-id="8c1d9-237">Open - Completed</span></span>   | <span data-ttu-id="8c1d9-238">Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-238">Estimated</span></span>   | <span data-ttu-id="8c1d9-239">Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-239">Estimated</span></span> |
| <span data-ttu-id="8c1d9-240">Открыто — Завершено</span><span class="sxs-lookup"><span data-stu-id="8c1d9-240">Open - Completed</span></span>   | <span data-ttu-id="8c1d9-241">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-241">Used</span></span>        | <span data-ttu-id="8c1d9-242">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-242">Used</span></span>      |
| <span data-ttu-id="8c1d9-243">Закрыто — Разнесено</span><span class="sxs-lookup"><span data-stu-id="8c1d9-243">Closed - Posted</span></span>    | <span data-ttu-id="8c1d9-244">Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-244">Estimated</span></span>   | <span data-ttu-id="8c1d9-245">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-245">Used</span></span>      |
| <span data-ttu-id="8c1d9-246">Закрыто — Разнесено</span><span class="sxs-lookup"><span data-stu-id="8c1d9-246">Closed - Posted</span></span>    | <span data-ttu-id="8c1d9-247">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-247">Used</span></span>        | <span data-ttu-id="8c1d9-248">Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-248">Used</span></span>      |

<span data-ttu-id="8c1d9-249">Управление синхронизацией значений **Оценочный** или значений **Использовано** осуществляется с помощью двух наборов задач для строк продуктов и строк услуг.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-249">Synchronization of **Estimated** values versus **Used** values is managed through the two sets of tasks for product lines and service lines.</span></span> <span data-ttu-id="8c1d9-250">Встроенные фильтры запускают правильную задачу, а соответствующее сопоставление помогает гарантировать, что синхронизируются правильные значения для **Ожидалось** и **Использовано**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-250">Predefined filters trigger the correct task, and the underlying mapping helps guarantee that the correct values for **Expected** versus **Used** are synchronized.</span></span>

### <a name="example"></a><span data-ttu-id="8c1d9-251">Пример</span><span class="sxs-lookup"><span data-stu-id="8c1d9-251">Example</span></span>

1. <span data-ttu-id="8c1d9-252">Заказ на выполнение работ создается и планируется в Field Service.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-252">A work order is created and scheduled in Field Service.</span></span>

    <span data-ttu-id="8c1d9-253">Значение **Состояния системы** равно **Открыто — Запланировано**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-253">The **System Status** value is **Open – Scheduled**.</span></span>

    - <span data-ttu-id="8c1d9-254">**Строка продукта:** Оценочное кол-во = 5 шт., Использованное кол-во = 0 шт., Состояние строки = Оценочный, Распределенный = Нет</span><span class="sxs-lookup"><span data-stu-id="8c1d9-254">**Product line:** Estimated Qty = 5ea, Used Qty = 0ea, Line Status = Estimated, Allocated = No</span></span>
    - <span data-ttu-id="8c1d9-255">**Строка услуги:** Оценочное кол-во = 2 часа, Использованное кол-во = 0 часов, Состояние строки = Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-255">**Service line:** Estimated Qty = 2h, Used Qty = 0h, Line Status = Estimated</span></span>

    <span data-ttu-id="8c1d9-256">В этом примере значение продукта **Использованное кол-во**, равное **0** (ноль), и значение услуги **Оценочное кол-во**, равное **2 ч**, синхронизируются с Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-256">In this example, the product's **Used Qty** value of **0** (zero) and the service's **Estimated Qty** value of **2h** are synchronized to Supply Chain Management.</span></span>

2. <span data-ttu-id="8c1d9-257">Продукты распределяются в Field Service.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-257">Products are allocated in Field Service.</span></span>

    <span data-ttu-id="8c1d9-258">Значение **Состояния системы** равно **Открыто — Запланировано**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-258">The **System Status** value is **Open – Scheduled**.</span></span>

    - <span data-ttu-id="8c1d9-259">**Строка продукта:** Оценочное кол-во = 5 шт., Использованное кол-во = 0 шт., Состояние строки = Оценочный, Распределенный = Да</span><span class="sxs-lookup"><span data-stu-id="8c1d9-259">**Product line:** Estimated Qty = 5ea, Used Qty = 0ea, Line Status = Estimated, Allocated = Yes</span></span>
    - <span data-ttu-id="8c1d9-260">**Строка услуги:** Оценочное кол-во = 2 часа, Использованное кол-во = 0 часов, Состояние строки = Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-260">**Service line:** Estimated Qty = 2h, Used Qty = 0h, Line Status = Estimated</span></span>

    <span data-ttu-id="8c1d9-261">В этом примере значение продукта **Оценочное кол-во**, равное **5 шт.**, и значение услуги **Оценочное кол-во**, равное **2 ч**, синхронизируются с Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-261">In this example, the product's **Estimated Qty** value of **5ea** and the service's **Estimated Qty** value of **2h** are synchronized to Supply Chain Management.</span></span>

3. <span data-ttu-id="8c1d9-262">Сервисный специалист начинает работу над заказом на выполнение работ и регистрирует расход материала 6.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-262">The service technician starts to work on the work order and registers material usage of 6.</span></span>

    <span data-ttu-id="8c1d9-263">Значение **Состояния системы** равно **Открыто — В работе**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-263">The **System Status** value is **Open – In Progress**.</span></span>

    - <span data-ttu-id="8c1d9-264">**Строка продукта:** Оценочное кол-во = 5 шт., Использованное кол-во = 6 шт., Состояние строки = Использовано, Распределенный = Да</span><span class="sxs-lookup"><span data-stu-id="8c1d9-264">**Product line:** Estimated Qty = 5ea, Used Qty = 6ea, Line Status = Used, Allocated = Yes</span></span>
    - <span data-ttu-id="8c1d9-265">**Строка услуги:** Оценочное кол-во = 2 часа, Использованное кол-во = 0 часов, Состояние строки = Оценочный</span><span class="sxs-lookup"><span data-stu-id="8c1d9-265">**Service line:** Estimated Qty = 2h, Used Qty = 0h, Line Status = Estimated</span></span>

    <span data-ttu-id="8c1d9-266">В этом примере значение продукта **Использованное кол-во**, равное **6**, и значение услуги **Оценочное кол-во**, равное **2 ч**, синхронизируются с Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-266">In this example, the product's **Used Qty** value of **6** and the service's **Estimated Qty** value of **2h** are synchronized to Supply Chain Management.</span></span>

4. <span data-ttu-id="8c1d9-267">Сервисный специалист выполняет заказ на выполнение работ и регистрирует затраченное время 1,5 часа.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-267">The service technician completes the work order and registers used time of 1.5 hours.</span></span>

    <span data-ttu-id="8c1d9-268">Значение **Состояния системы** равно **Открыто — Завершено**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-268">The **System Status** value is **Open – Completed**.</span></span>

    - <span data-ttu-id="8c1d9-269">**Строка продукта:** Оценочное кол-во = 5 шт., Использованное кол-во = 6 шт., Состояние строки = Использовано, Распределенный = Да</span><span class="sxs-lookup"><span data-stu-id="8c1d9-269">**Product line:** Estimated Qty = 5ea, Used Qty = 6ea, Line Status = Used, Allocated = Yes</span></span>
    - <span data-ttu-id="8c1d9-270">**Строка услуги:** Оценочное кол-во = 2 часа, Использованное кол-во = 1,5 часа, Состояние строки = Использовано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-270">**Service line:** Estimated Qty = 2h, Used Qty = 1.5h, Line Status = Used</span></span>

    <span data-ttu-id="8c1d9-271">В этом примере значение продукта **Использованное кол-во**, равное **6**, и значение услуги **Использованное кол-во**, равное **1,5 ч**, синхронизируются с Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-271">In this example, the product's **Used Qty** value of **6** and the service's **Used Qty** of **1.5h** are synchronized to Supply Chain Management.</span></span>

## <a name="sales-order-origin-and-status"></a><span data-ttu-id="8c1d9-272">Происхождение и статус заказа на продажу</span><span class="sxs-lookup"><span data-stu-id="8c1d9-272">Sales order origin and status</span></span>

### <a name="sales-origin"></a><span data-ttu-id="8c1d9-273">Происхождение заказа на продажу</span><span class="sxs-lookup"><span data-stu-id="8c1d9-273">Sales origin</span></span>

<span data-ttu-id="8c1d9-274">Для отслеживания заказов на продажу, источником которых были заказы на выполнение работ, можно создать происхождение продаж, где для параметра **Назначение типа источника** задано значение **Да**, а в поле **Тип источника продаж** задано значение **Интеграция заказов на выполнение работ**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-274">To keep track of sales orders that originate from work orders, you can create a sales origin where the **Origin type assignment** option is set to **Yes** and the **Sales origin type** field is set to **Work order integration**.</span></span>

<span data-ttu-id="8c1d9-275">По умолчанию сопоставление выбирает происхождения продажи для типа происхождения продаж **Интеграция заказов на выполнение работ** для всех заказов на продажу, созданных из заказов на выполнение работ.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-275">By default, the mapping selects the sales origin for the **Work order integration** sales origin type for all sales orders that are created from work orders.</span></span> <span data-ttu-id="8c1d9-276">Это поведение может быть полезно при работе с заказом на продажу в Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-276">This behavior can be useful when you work with the sales order in Supply Chain Management.</span></span> <span data-ttu-id="8c1d9-277">Необходимо убедиться, что заказы на продажу, созданные на основе заказов на выполнение работ, не синхронизируются обратно в Field Service как заказы на выполнение работ.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-277">You must make sure that sales orders that originate from work orders aren't synchronized back to Field Service as work orders.</span></span>

<span data-ttu-id="8c1d9-278">Сведения о том, как создать правильную настройку происхождения продаж в Supply Chain Management, см. в пункте "Предварительные условия и настройка сопоставления" этого раздела.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-278">For details about how to create the correct sales origin setup in Supply Chain Management, see the "Preconditions and mapping setup" section of this topic.</span></span>

### <a name="status"></a><span data-ttu-id="8c1d9-279">Состояние</span><span class="sxs-lookup"><span data-stu-id="8c1d9-279">Status</span></span>

<span data-ttu-id="8c1d9-280">Когда заказ на продажу происходит из заказа на выполнение работ, поле **Статус внешнего заказа на выполнение работ** появляется на вкладке **Настройка** в заголовке заказа на продажу.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-280">When the sales order originates from a work order, the **External work order status** field appears on the **Setup** tab on the sales order header.</span></span> <span data-ttu-id="8c1d9-281">Это поле показывает состояние системы из заказа на выполнение работ в Field Service, чтобы помочь отслеживать состояние синхронизации заказов на выполнение работ для заказов на продажу в Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-281">This field shows the system status from the work order in Field Service, to help track the synchronized work order status of sales orders in the Supply Chain Management.</span></span> <span data-ttu-id="8c1d9-282">Это поле также может помочь пользователю определить, когда заказ на продажу должен быть отгружен или за него должен быть выставлен счет.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-282">This field can also help the user determine when the sales order should be shipped or invoiced.</span></span>

<span data-ttu-id="8c1d9-283">Поле **Статус внешнего заказа на выполнение работ** может иметь следующие значения:</span><span class="sxs-lookup"><span data-stu-id="8c1d9-283">The **External work order status** field can have the following values:</span></span>

- <span data-ttu-id="8c1d9-284">Открыто — Запланировано</span><span class="sxs-lookup"><span data-stu-id="8c1d9-284">Open - Scheduled</span></span>
- <span data-ttu-id="8c1d9-285">Открыто — В работе</span><span class="sxs-lookup"><span data-stu-id="8c1d9-285">Open - In Progress</span></span>
- <span data-ttu-id="8c1d9-286">Открыто — Завершено</span><span class="sxs-lookup"><span data-stu-id="8c1d9-286">Open - Completed</span></span>
- <span data-ttu-id="8c1d9-287">Закрыто — Разнесено</span><span class="sxs-lookup"><span data-stu-id="8c1d9-287">Closed - Posted</span></span>

## <a name="field-service-crm-solution"></a><span data-ttu-id="8c1d9-288">Решение Field Service CRM</span><span class="sxs-lookup"><span data-stu-id="8c1d9-288">Field Service CRM solution</span></span>

<span data-ttu-id="8c1d9-289">Для поддержки интеграции между Field Service и Supply Chain Management требуется дополнительная функциональная возможность решения Field Service CRM.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-289">To support the integration between Field Service and Supply Chain Management, additional functionality from the Field Service CRM solution is required.</span></span> <span data-ttu-id="8c1d9-290">Это решение включает в себя следующие изменения.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-290">The solution includes the following changes.</span></span>

### <a name="work-order-entity"></a><span data-ttu-id="8c1d9-291">Объект заказа на выполнение работ</span><span class="sxs-lookup"><span data-stu-id="8c1d9-291">Work Order entity</span></span>

<span data-ttu-id="8c1d9-292">Поле **Имеет только управляемые извне продукты** было добавлено в объект **Заказ на выполнение работ** и отображается на странице.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-292">The **Has Externally Maintained Products Only** field has been added to the **Work Order** entity and appears on the page.</span></span> <span data-ttu-id="8c1d9-293">Оно используется для постоянного отслеживания того, состоит ли заказ на выполнение работ только из управляемых извне продуктов.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-293">It's used to consistently track whether a work order consists entirely of externally maintained products.</span></span> <span data-ttu-id="8c1d9-294">Заказ на выполнение работ состоит исключительно из управляемых извне продуктов, когда все соответствующие продукты управляются в Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-294">A work order consists entirely of externally maintained products when all the related products are maintained in Supply Chain Management.</span></span> <span data-ttu-id="8c1d9-295">Это поле помогает гарантировать, что пользователи не будут синхронизировать заказы на выполнение работ, содержащие продукты, которые неизвестны.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-295">This field helps guarantee that users don't synchronize work orders that have products that are unknown.</span></span>

### <a name="work-order-product-entity"></a><span data-ttu-id="8c1d9-296">Объект продукта заказа на выполнение работ</span><span class="sxs-lookup"><span data-stu-id="8c1d9-296">Work Order Product entity</span></span>

- <span data-ttu-id="8c1d9-297">Поле **Заказ имеет только управляемые извне продукты** было добавлено в объект **Продукт заказа на выполнение работ** и отображается на странице.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-297">The **Order Has Externally Maintained Products Only** field has been added to the **Work Order Product** entity and appears on the page.</span></span> <span data-ttu-id="8c1d9-298">Оно используется для постоянного отслеживания того, управляется ли продукт заказа на выполнение работ в Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-298">It's used to consistently track whether the work order product is maintained in Supply Chain Management.</span></span> <span data-ttu-id="8c1d9-299">Это поле помогает гарантировать, что пользователи не будут синхронизировать продукты заказа на выполнение работ, которые неизвестны для Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-299">This field helps guarantee that users don't synchronize work order products that are unknown to Supply Chain Management.</span></span>
- <span data-ttu-id="8c1d9-300">Поле **Состояние системы заголовка** было добавлено в объект **Продукт заказа на выполнение работ** и отображается на странице.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-300">The **Header System Status** field has been added to the **Work Order Product** entity and appears on the page.</span></span> <span data-ttu-id="8c1d9-301">Оно используется для постоянного отслеживания статуса системы для заказа на выполнение работ и помогает гарантировать правильную фильтрацию, когда продукты заказа на выполнение работ синхронизируются с Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-301">It's used to consistently track the system status of the work order and helps guarantee correct filtering when work order products are synchronized to Supply Chain Management.</span></span> <span data-ttu-id="8c1d9-302">Если фильтры настроены для задач интеграции, информация **Состояние системы заголовка** также используется для определения того, какие значения требуется синхронизировать: оценочные или использованные.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-302">When filters are set on the integration tasks, **Header System Status** information is also used to determine whether the estimated or used values should be synchronized.</span></span>
- <span data-ttu-id="8c1d9-303">Поле **Сумма единиц измерения, за которые выставлен счет** показывает сумму, на которую выставлен счет на фактически использованную единицу измерения.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-303">The **Invoiced Unit Amount** field shows the amount that is invoiced per actual unit that is used.</span></span> <span data-ttu-id="8c1d9-304">Это значение рассчитывается как значение **Общая сумма**, деленное на значение **Фактическое количество**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-304">The value is calculated as the **Total Amount** value divided by the **Actual Quantity** value.</span></span> <span data-ttu-id="8c1d9-305">Это поле используется для интеграции с системами, которые не поддерживают различные значения для использованного количества и количества в счете.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-305">The field is used for integration to systems that don't support different values for the used quantity and the billed quantity.</span></span> <span data-ttu-id="8c1d9-306">Это поле не отображается в пользовательском интерфейсе (UI).</span><span class="sxs-lookup"><span data-stu-id="8c1d9-306">This field doesn't appear in the user interface (UI).</span></span> 
- <span data-ttu-id="8c1d9-307">Поле **Сумма скидки по выставленным счетам** рассчитывается как значение **Сумма скидки** плюс округление из расчета значения **Сумма единиц измерения, за которые выставлен счет**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-307">The **Invoiced Discount Amount** field is calculated as the **Discount Amount** value plus the rounding from the calculation of the **Invoiced Unit Amount** value.</span></span> <span data-ttu-id="8c1d9-308">Это поле используется для интеграции и не отображается в пользовательском интерфейсе.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-308">This field is used for integration and doesn't appear in the UI.</span></span>
- <span data-ttu-id="8c1d9-309">В поле **Десятичное количество** хранится значение из поля **Количество** в виде десятичного числа.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-309">The **Decimal Quantity** field stores the value from the **Quantity** field as a decimal number.</span></span> <span data-ttu-id="8c1d9-310">Это поле используется для интеграции и не отображается в пользовательском интерфейсе.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-310">This field is used for integration and doesn't appear in the UI.</span></span> 
- <span data-ttu-id="8c1d9-311">Значение в полях **Использовано** сбрасывается на **0** (нуль), если значение **Статус строки** продукта из заказа на выполнение работ изменяется с **Использовано** на **Оценочный**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-311">The value in **Used** fields is reset to **0** (zero) if the **Line Status** value of the work order product is changed from **Used** to **Estimated**.</span></span> <span data-ttu-id="8c1d9-312">Это изменение позволяет избежать ситуаций, в которых использованное количество, которое было введено по ошибке, используется для синхронизации, когда значение **Статус строки** равно **Оценочный** и параметр **Распределенный** имеет значение **Нет**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-312">This change helps prevent situations where a used quantity that is mistakenly entered is used for synchronization when the **Line Status** value is **Estimated** and the **Allocated** option is set to **No**.</span></span>

### <a name="work-order-service-entity"></a><span data-ttu-id="8c1d9-313">Объект услуги из заказа на выполнение работ</span><span class="sxs-lookup"><span data-stu-id="8c1d9-313">Work Order Service entity</span></span>

- <span data-ttu-id="8c1d9-314">Поле **Заказ имеет только управляемые извне продукты** было добавлено в объект **Услуга заказа на выполнение работ** и отображается на странице.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-314">The **Order Has Externally Maintained Products Only** field has been added to the **Work Order Service** entity and appears on the page.</span></span> <span data-ttu-id="8c1d9-315">Оно используется для постоянного отслеживания того, управляется ли сервис заказа на выполнение работ в Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-315">It's used to consistently track whether the work order service is maintained in Supply Chain Management.</span></span> <span data-ttu-id="8c1d9-316">Это поле помогает гарантировать, что пользователи не будут синхронизировать сервисы заказа на выполнение работ, которые неизвестны для Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-316">This field helps guarantee that users don't synchronize work order services that are unknown to Supply Chain Management.</span></span>
- <span data-ttu-id="8c1d9-317">Поле **Состояние системы заголовка** было добавлено в объект **Услуга заказа на выполнение работ** и отображается на странице.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-317">The **Header System Status** field has been added to the **Work Order Service** entity and appears on the page.</span></span> <span data-ttu-id="8c1d9-318">Оно используется для постоянного отслеживания статуса системы для заказа на выполнение работ и помогает гарантировать правильную фильтрацию, когда сервисы заказа на выполнение работ синхронизируются с Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-318">It's used to consistently track the system status of the work order and helps guarantee correct filtering when work order services are synchronized to Supply Chain Management.</span></span> <span data-ttu-id="8c1d9-319">Если фильтры настроены для задач интеграции, информация **Состояние системы заголовка** также используется для определения того, какие значения требуется синхронизировать: оценочные или использованные.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-319">When filters are set on the integration tasks, **Header System Status** information is also used to determine whether the estimated or used values should be synchronized.</span></span>
- <span data-ttu-id="8c1d9-320">В поле **Длительность в часах** хранится значение из поля **Длительность** после преобразования этого значения из минут в часы.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-320">The **Duration In Hours** field stores the value from the **Duration** field after that value is converted from minutes to hours.</span></span> <span data-ttu-id="8c1d9-321">Это поле используется для интеграции и не отображается в пользовательском интерфейсе.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-321">This field is used for integration and doesn't appear in the UI.</span></span>
- <span data-ttu-id="8c1d9-322">В поле **Оценочная длительность в часах** хранится значение из поля **Оценочная длительность** после преобразования этого значения из минут в часы.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-322">The **Estimated Duration In Hours** field stores the value from the **Estimated Duration** field after that value is converted from minutes to hours.</span></span> <span data-ttu-id="8c1d9-323">Это поле используется для интеграции и не отображается в пользовательском интерфейсе.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-323">This field is used for integration and doesn't appear in the UI.</span></span>
- <span data-ttu-id="8c1d9-324">Поле **Сумма единиц измерения, за которые выставлен счет** хранит сумму, на которую выставлен счет на фактически использованную единицу измерения.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-324">The **Invoiced Unit Amount** field stores the amount that is invoiced per actual unit that is used.</span></span> <span data-ttu-id="8c1d9-325">Это значение рассчитывается как значение **Общая сумма**, деленное на значение **Фактическое количество**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-325">The value is calculated as the **Total Amount** value divided by the **Actual Quantity** value.</span></span> <span data-ttu-id="8c1d9-326">Это поле используется для интеграции с системами, которые не поддерживают различные значения для использованного количества и количества в счете.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-326">This field is used for integration to systems that don't support different values for the used quantity and the billed quantity.</span></span> <span data-ttu-id="8c1d9-327">Это поле не отображается в пользовательском интерфейсе.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-327">The field doesn't appear in the UI.</span></span>
- <span data-ttu-id="8c1d9-328">Поле **Сумма скидки по выставленным счетам** рассчитывается как значение **Сумма скидки** плюс округление из расчета значения **Сумма единиц измерения, за которые выставлен счет**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-328">The **Invoiced Discount Amount** field is calculated as the **Discount Amount** value plus the rounding from the calculation of the **Invoiced Unit Amount** value.</span></span> <span data-ttu-id="8c1d9-329">Это поле используется для интеграции и не отображается в пользовательском интерфейсе.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-329">This field is used for integration and doesn't appear in the UI.</span></span>
- <span data-ttu-id="8c1d9-330">Поле **Заказ внешней строки** представляет собой расчетный отрицательный номер заказа строки, который может использоваться во внешних системах, где объединяются продукт заказа на выполнение работ и строки услуг.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-330">The **External Line Order** field is a calculated negative line order number that can be used in external systems where work order product and service lines are combined.</span></span> <span data-ttu-id="8c1d9-331">Это поле обеспечивает, что вставленные продукты заказа на выполнение работ имеют положительное номера строк, а услуги заказа на выполнение работ имеют отрицательные номера строк.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-331">This field enables work order products that are inserted to have positive line numbers and work order services to have negative line numbers.</span></span> <span data-ttu-id="8c1d9-332">Значение этого поля рассчитывается как значение **Заказ строки**, умноженное -1.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-332">The value of this this field is calculated as the **Line Order** value multiplied by -1.</span></span> <span data-ttu-id="8c1d9-333">Это поле не отображается в пользовательском интерфейсе.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-333">This field doesn't appear in the UI.</span></span>
- <span data-ttu-id="8c1d9-334">Значение в полях **Использовано** сбрасывается на **0** (нуль), если значение **Статус строки** услуги из заказа на выполнение работ изменяется с **Использовано** на **Оценочный** по какой-то причине.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-334">The value in **Used** fields is reset to **0** (zero) if the **Line Status** value of the work order service is changed from **Used** to **Estimated** for some reason.</span></span> <span data-ttu-id="8c1d9-335">Это изменение позволяет избежать ситуаций, в которых использованное количество, которое было введено по ошибке, используется для синхронизации, когда значение **Статус строки** равно **Оценочный** и параметр **Состояние системы заголовка** имеет значение **Закрыто — Разнесено**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-335">This change helps prevent situations where a used quantity that is mistakenly entered is used for synchronization when the **Line Status** value is **Estimated** and the **Header System Status** value is **Closed – Posted**.</span></span>

## <a name="preconditions-and-mapping-setup"></a><span data-ttu-id="8c1d9-336">Предварительные условия и настройка сопоставления</span><span class="sxs-lookup"><span data-stu-id="8c1d9-336">Preconditions and mapping setup</span></span>

<span data-ttu-id="8c1d9-337">Перед синхронизацией заказов на выполнение работ необходимо обновить следующие параметры в системах.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-337">Before you synchronize work orders, it's important that you update the following settings in the systems.</span></span>

### <a name="setup-in-field-service"></a><span data-ttu-id="8c1d9-338">Настройка в Field Service</span><span class="sxs-lookup"><span data-stu-id="8c1d9-338">Setup in Field Service</span></span>

- <span data-ttu-id="8c1d9-339">Убедитесь в том, что номерные серии, используемые для заказов на выполнение работ в Field Service, не пересекаются с номерной серией, которая используется для заказов на продажу в Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-339">Make sure that the number series that is used for work orders in Field Service doesn't overlap the number sequence that is used for sales orders in Supply Chain Management.</span></span> <span data-ttu-id="8c1d9-340">В противном случае существующие заказы на продажу могут быть неправильно обновлены в Field Service или Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-340">Otherwise, existing sales orders can be incorrectly updated in Field Service or Supply Chain Management.</span></span>
- <span data-ttu-id="8c1d9-341">В поле **Создания накладной для заказа на выполнение работ** должно быть установлено значение **Никогда**, потому что выставление накладных будет выполнено из Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-341">The **Work Order Invoice Creation** field must be set to **Never**, because the invoicing will be done from Supply Chain Management.</span></span> <span data-ttu-id="8c1d9-342">Перейдите в **Field Service** \> **Настройки** \> **Администрирование** \> **Настройки Field Service**, затем убедитесь, что в поле **Создания накладной для заказа на выполнение работ** задано значение **Никогда**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-342">Go to **Field Service** \> **Settings** \> **Administration** \> **Field Service Settings**, and make sure that the **Work Order Invoice Creation** field is set to **Never**.</span></span>

### <a name="setup-in-supply-chain-management"></a><span data-ttu-id="8c1d9-343">Настройка в Supply Chain Management</span><span class="sxs-lookup"><span data-stu-id="8c1d9-343">Setup in Supply Chain Management</span></span>

<span data-ttu-id="8c1d9-344">Для интеграции заказов на выполнение работа требуется, чтобы вы настроили происхождение заказов на продажу.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-344">Work order integration requires that you set up the sales origin.</span></span> <span data-ttu-id="8c1d9-345">Происхождение заказов на продажу используется для различения заказов на продажу в Supply Chain Management, которые были созданы на основе заказов на выполнение работ в Field Service.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-345">The sales origin is used to distinguish sales orders in Supply Chain Management that were created from work orders in Field Service.</span></span> <span data-ttu-id="8c1d9-346">Когда заказ на продажу имеет происхождение продаж типа **Интеграция заказов на выполнение работ**, поле **Статус внешнего заказа на выполнение работ** появляется в заголовке заказа на продажу.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-346">When a sales order has a sales origin of the **Work order integration** type, the **External work order status** field appears on the sales order header.</span></span> <span data-ttu-id="8c1d9-347">Кроме того, происхождение заказов на продажу помогает гарантировать, что заказы на продажу, которые были созданы на основе заказов на выполнение работ в Field Service, исключаются при фильтрации во время синхронизации заказов на продажу из Supply Chain Management в Field Service.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-347">Additionally, the sales origin helps guarantee that sales orders that were created from work orders in Field Service are filtered out during sales order synchronization from Supply Chain Management to Field Service.</span></span>

1. <span data-ttu-id="8c1d9-348">Перейдите в раздел **Продажи и маркетинг** \> **Настройка** \> **Заказы на продажу** \> **Происхождение заказа на продажу**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-348">Go to **Sales and marketing** \> **Setup** \> **Sales orders** \> **Sales origin**.</span></span>
2. <span data-ttu-id="8c1d9-349">Выберите **Создать** для создания нового происхождения заказов на продажу.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-349">Select **New** to create a new sales origin.</span></span>
3. <span data-ttu-id="8c1d9-350">В поле **Происхождение заказа на продажу** введите имя происхождения заказа на продажу, например **WorkOrder**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-350">In the **Sales origin** field, enter a name for the sales origin, such as **WorkOrder**.</span></span>
4. <span data-ttu-id="8c1d9-351">В поле **Описание** введите описание, например **Заказ на выполнение работ из Field Service**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-351">In the **Description** field, enter a description, such as **Field Service Work Order**.</span></span>
5. <span data-ttu-id="8c1d9-352">Установите флажок **Назначение типа источника**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-352">Select the **Origin type assignment** check box.</span></span>
6. <span data-ttu-id="8c1d9-353">Задайте в поле **Тип источника продаж** значение **Интеграция заказов на выполнение работ**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-353">Set the **Sales origin type** field to **Work order integration**.</span></span>
7. <span data-ttu-id="8c1d9-354">Выберите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-354">Select **Save**.</span></span>


### <a name="setup-in-data-integration"></a><span data-ttu-id="8c1d9-355">Настройка в интеграции данных</span><span class="sxs-lookup"><span data-stu-id="8c1d9-355">Setup in Data integration</span></span>

<span data-ttu-id="8c1d9-356">Проверьте, что значение **Ключ интеграции** существует для **msdyn_workorders**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-356">Ensure the **Integration key** exist for **msdyn_workorders**</span></span>
1. <span data-ttu-id="8c1d9-357">Перейдите в раздел "Интеграция данных".</span><span class="sxs-lookup"><span data-stu-id="8c1d9-357">Go to Data Integration</span></span>
2. <span data-ttu-id="8c1d9-358">Перейдите на вкладку **Набор подключений**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-358">Select **Connection Set** tab</span></span>
3. <span data-ttu-id="8c1d9-359">Выберите набор подключений, используемый для синхронизации заказа на выполнение работ.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-359">Select the Connection set used for Work order synchronization</span></span>
4. <span data-ttu-id="8c1d9-360">Перейдите на вкладку **Ключ интеграции**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-360">Select **Integration key** tab</span></span>
5. <span data-ttu-id="8c1d9-361">Найдите msdyn_workorders и проверьте, что добавлен ключ **msdyn_name (номер заказа на выполнение работ)**.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-361">Find msdyn_workorders and check that the key **msdyn_name (Work Order Number)** is added.</span></span> <span data-ttu-id="8c1d9-362">Если ключ не отображается, добавьте его с помощью команды **Добавить ключ** и нажмите кнопку **Сохранить** вверху страницы.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-362">If it is not shown, add it by click **Add key** and click **Save** in the top of the page</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="8c1d9-363">Сопоставление шаблона в интеграции данных</span><span class="sxs-lookup"><span data-stu-id="8c1d9-363">Template mapping in Data integration</span></span>

<span data-ttu-id="8c1d9-364">На следующем рисунке показано сопоставление шаблона в интеграции данных.</span><span class="sxs-lookup"><span data-stu-id="8c1d9-364">The following illustrations show the template mapping in Data integration.</span></span>

### <a name="work-orders-to-sales-orders-field-service-to-supply-chain-management-workorderheader"></a><span data-ttu-id="8c1d9-365">Заказы на работу с заказами на продажу (из Field Service в Supply Chain Management): WorkOrderHeader</span><span class="sxs-lookup"><span data-stu-id="8c1d9-365">Work orders to Sales orders (Field Service to Supply Chain Management): WorkOrderHeader</span></span>

<span data-ttu-id="8c1d9-366">Фильтр: (msdyn_systemstatus ne 690970005) and (msdyn_systemstatus ne 690970000) and (msdynce_hasexternallymaintainedproductsonly eq true)</span><span class="sxs-lookup"><span data-stu-id="8c1d9-366">Filter: (msdyn_systemstatus ne 690970005) and (msdyn_systemstatus ne 690970000) and (msdynce_hasexternallymaintainedproductsonly eq true)</span></span>

<span data-ttu-id="8c1d9-367">[![Сопоставление шаблона в интеграции данных](./media/FSWorkOrder1.png )](./media/FSWorkOrder1.png)</span><span class="sxs-lookup"><span data-stu-id="8c1d9-367">[![Template mapping in Data integration](./media/FSWorkOrder1.png )](./media/FSWorkOrder1.png)</span></span>

### <a name="work-orders-to-sales-orders-field-service-to-supply-chain-management-workorderservicelineestimate"></a><span data-ttu-id="8c1d9-368">Заказы на работу с заказами на продажу (из Field Service в Supply Chain Management): WorkOrderServiceLineEstimate</span><span class="sxs-lookup"><span data-stu-id="8c1d9-368">Work orders to Sales orders (Field Service to Supply Chain Management): WorkOrderServiceLineEstimate</span></span>

<span data-ttu-id="8c1d9-369">Фильтр: (msdynce_headersystemstatus ne 690970005) and (msdynce_headersystemstatus ne 690970000) and (msdynce_orderhasexternalmaintainedproductsonly eq true) and (msdyn_linestatus eq 690970000) and (msdynce_headersystemstatus ne 690970004)</span><span class="sxs-lookup"><span data-stu-id="8c1d9-369">Filter: (msdynce_headersystemstatus ne 690970005) and (msdynce_headersystemstatus ne 690970000) and (msdynce_orderhasexternalmaintainedproductsonly eq true) and (msdyn_linestatus eq 690970000) and (msdynce_headersystemstatus ne 690970004)</span></span>

<span data-ttu-id="8c1d9-370">[![Сопоставление шаблона в интеграции данных](./media/FSWorkOrder2.png )](./media/FSWorkOrder2.png)</span><span class="sxs-lookup"><span data-stu-id="8c1d9-370">[![Template mapping in Data integration](./media/FSWorkOrder2.png )](./media/FSWorkOrder2.png)</span></span>

### <a name="work-orders-to-sales-orders-field-service-to-supply-chain-management-workorderservicelineused"></a><span data-ttu-id="8c1d9-371">Заказы на работу с заказами на продажу (из Field Service в Supply Chain Management): WorkOrderServiceLineUsed</span><span class="sxs-lookup"><span data-stu-id="8c1d9-371">Work orders to Sales orders (Field Service to Supply Chain Management): WorkOrderServiceLineUsed</span></span>

<span data-ttu-id="8c1d9-372">Фильтр: (msdynce_headersystemstatus ne 690970005) and (msdynce_headersystemstatus ne 690970000) and (msdynce_orderhasexternalmaintainedproductsonly eq true) and ((msdyn_linestatus eq 690970001) or (msdynce_headersystemstatus eq 690970004))</span><span class="sxs-lookup"><span data-stu-id="8c1d9-372">Filter: (msdynce_headersystemstatus ne 690970005) and (msdynce_headersystemstatus ne 690970000) and (msdynce_orderhasexternalmaintainedproductsonly eq true) and ((msdyn_linestatus eq 690970001) or (msdynce_headersystemstatus eq 690970004))</span></span>

<span data-ttu-id="8c1d9-373">[![Сопоставление шаблона в интеграции данных](./media/FSWorkOrder3.png )](./media/FSWorkOrder3.png)</span><span class="sxs-lookup"><span data-stu-id="8c1d9-373">[![Template mapping in Data integration](./media/FSWorkOrder3.png )](./media/FSWorkOrder3.png)</span></span>

### <a name="work-orders-to-sales-orders-field-service-to-supply-chain-management-workorderproductlineestimate"></a><span data-ttu-id="8c1d9-374">Заказы на работу с заказами на продажу (из Field Service в Supply Chain Management): WorkOrderProductLineEstimate</span><span class="sxs-lookup"><span data-stu-id="8c1d9-374">Work orders to Sales orders (Field Service to Supply Chain Management): WorkOrderProductLineEstimate</span></span>

<span data-ttu-id="8c1d9-375">Фильтр: (msdynce_headersystemstatus ne 690970005) and (msdynce_headersystemstatus ne 690970000) and (msdynce_orderhasexternalmaintainedproductsonly eq true) and (msdyn_linestatus eq 690970000) and (msdynce_headersystemstatus ne 690970004) and (msdyn_allocated eq true)</span><span class="sxs-lookup"><span data-stu-id="8c1d9-375">Filter: (msdynce_headersystemstatus ne 690970005) and (msdynce_headersystemstatus ne 690970000) and (msdynce_orderhasexternalmaintainedproductsonly eq true) and (msdyn_linestatus eq 690970000) and (msdynce_headersystemstatus ne 690970004) and (msdyn_allocated eq true)</span></span>

<span data-ttu-id="8c1d9-376">[![Сопоставление шаблона в интеграции данных](./media/FSWorkOrder4.png )](./media/FSWorkOrder4.png)</span><span class="sxs-lookup"><span data-stu-id="8c1d9-376">[![Template mapping in Data integration](./media/FSWorkOrder4.png )](./media/FSWorkOrder4.png)</span></span>

### <a name="work-orders-to-sales-orders-field-service-to-supply-chain-management-workorderproductlineused"></a><span data-ttu-id="8c1d9-377">Заказы на работу с заказами на продажу (из Field Service в Supply Chain Management): WorkOrderProductLineUsed</span><span class="sxs-lookup"><span data-stu-id="8c1d9-377">Work orders to Sales orders (Field Service to Supply Chain Management): WorkOrderProductLineUsed</span></span>

<span data-ttu-id="8c1d9-378">Фильтр: (msdynce_headersystemstatus ne 690970005) and (msdynce_headersystemstatus ne 690970000) and (msdynce_orderhasexternalmaintainedproductsonly eq true) and ((msdyn_linestatus eq 690970001) or (msdynce_headersystemstatus eq 690970004) or (msdyn_allocated ne true))</span><span class="sxs-lookup"><span data-stu-id="8c1d9-378">Filter: (msdynce_headersystemstatus ne 690970005) and (msdynce_headersystemstatus ne 690970000) and (msdynce_orderhasexternalmaintainedproductsonly eq true) and ((msdyn_linestatus eq 690970001) or (msdynce_headersystemstatus eq 690970004) or (msdyn_allocated ne true))</span></span>

<span data-ttu-id="8c1d9-379">[![Сопоставление шаблона в интеграции данных](./media/FSWorkOrder5.png )](./media/FSWorkOrder5.png)</span><span class="sxs-lookup"><span data-stu-id="8c1d9-379">[![Template mapping in Data integration](./media/FSWorkOrder5.png )](./media/FSWorkOrder5.png)</span></span>
