---
title: Синхронизация накладных договора в Field Service с накладными с произвольным текстом в Supply Chain Management
description: В этой теме обсуждаются шаблоны и базовые задачи, которые используются для синхронизации накладных по соглашению в Dynamics 365 Field Service с накладными с произвольным текстом в Dynamics 365 Supply Chain Management.
author: ChristianRytt
ms.date: 04/10/2018
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: crytt
ms.dyn365.ops.version: July 2017 update
ms.search.validFrom: 2017-07-8
ms.openlocfilehash: f3066741781bd9058e09d7f577a35df4c9b453d4
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/01/2021
ms.locfileid: "5819216"
---
# <a name="synchronize-agreement-invoices-in-field-service-to-free-text-invoices-in-supply-chain-management"></a>Синхронизация накладных договора в Field Service с накладными с произвольным текстом в Supply Chain Management

[!include[banner](../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]

В этой теме обсуждаются шаблоны и базовые задачи, которые используются для синхронизации накладных по соглашению в Dynamics 365 Field Service с накладными с произвольным текстом в Dynamics 365 Supply Chain Management.

## <a name="templates-and-tasks"></a>Шаблоны и задачи

Следующий шаблон и базовые задачи используются для выполнения синхронизации накладных по соглашению из Field Service с накладными с произвольным текстом в Supply Chain Management.

**Имя шаблона в интеграции данных**

- Накладные по договору (из Field Service в Supply Chain Management)

**Имена задач в проекте интеграции данных**

- Заголовки накладной
- Строки накладной

Перед синхронизацией накладных по соглашению требуется следующая синхронизация:

- Счета (из Sales в Supply Chain Management) — напрямую

## <a name="entity-set"></a>Набор объектов

| Field Service  | Управление цепочкой поставок                 |
|----------------|----------------------------------------|
| накладные       | Заголовки накладных с произвольным текстом клиента Dataverse |
| invoicedetails | Строки накладных с произвольным текстом клиента Dataverse   |

## <a name="entity-flow"></a>Поток объектов

Накладные, которые создаются из соглашения в Field Service, можно синхронизировать с Supply Chain Management через проект интеграции данных службы Microsoft Dataverse. Обновления в этих накладных будут синхронизированы с накладными с произвольным текстом в Supply Chain Management, если накладные с произвольным текстом имеют состояние учета **В процессе**. После того как накладные с произвольным текстом разносятся в Supply Chain Management и статус учета обновляется на **Завершено**, вы больше не сможете синхронизировать обновления из Field Service.

## <a name="field-service-crm-solution"></a>Решение Field Service CRM

Столбец **Имеет строки с происхождением из соглашения** был добавлен в таблицу **Накладная**. Этот столбец помогает гарантировать, что синхронизируются только накладные, созданные из соглашения. Значение равно **true**, если накладная содержит по крайней мере одну строку накладной, которая происходит из соглашения.

Столбец **Имеет происхождение из соглашения** был добавлен в таблицу **Строка накладной**. Этот столбец помогает гарантировать, что синхронизируются только строки накладной, созданные из соглашения. Значение равно **true**, если строка накладной происходит из соглашения.

**Дата накладной** является обязательным полем в Supply Chain Management. Таким образом, этот столбец должен иметь какое-то значение в Field Service, прежде чем произойдет синхронизация. Для выполнения этого условия добавлена следующая логика:

- Если столбец **Дата накладной** не заполнен в таблице **Накладная** (то есть, если он не имеет никакого значения), для него задается текущая дата при добавлении строки накладной, происходящей из соглашения.
- Пользователь может изменить столбец **Дата накладной**. Тем не менее, когда пользователь пытается сохранить накладную, которая происходит из соглашения, он или она получает ошибку бизнес-процесса, если столбец **Дата накладной** не заполнен в накладной.

## <a name="prerequisites-and-mapping-setup"></a>Необходимые условия и настройка сопоставления

### <a name="in-supply-chain-management"></a>В Supply Chain Management

Исходная накладная должна быть настроена для интеграции, чтобы отличать накладные с произвольным текстом в Supply Chain Management, которые создаются из накладных по соглашениям в Field Service. Когда накладная имеет источник накладной типа **Интеграция накладных договора**, поле **Внешний номер накладной** будет отображаться в заголовке **Накладная заказа на продажу**.

Помимо появления в заголовке накладной, информация **Внешний номер накладной** может использоваться, чтобы помочь гарантировать, что накладные, которые созданы из накладных по договору Field Service, отфильтровывались во время синхронизации накладных из Supply Chain Management в Field Service.

1. Выберите **Расчеты с клиентами** \> **Настройка** \> **Коды источников накладных**.
2. Выберите **Создать** для создания нового происхождения накладных.
3. В поле **Источник накладной** введите имя источника накладной, например **FS**.
4. В поле **Описание** введите описание, например **Накладная по договору Field Service**.
5. Установите флажок **Назначение типа источника**.
6. Задайте в поле **Тип источника накладной** значение **Интеграция накладных договора**.
7. Выберите **Сохранить**.

### <a name="in-the-data-integration-project"></a>В проекте интеграции данных

Задача: **Строки накладной**  

Убедитесь, что значение по умолчанию для поля Supply Chain Management **Отображаемое значение счета ГК** обновлено в соответствии с нужным значением.

Значение шаблона по умолчанию — **401100**.

## <a name="template-mapping-in-data-integration"></a>Сопоставление шаблона в интеграции данных

На следующем рисунке показано сопоставление шаблона в интеграции данных.

### <a name="agreement-invoices-field-service-to-supply-chain-management-invoice-headers"></a>Накладные по договору (из Field Service в Supply Chain Management): заголовки накладных

[![Сопоставление шаблона в интеграции данных](./media/FSFreeTextInvoice1.png)](./media/FSFreeTextInvoice1.png)

### <a name="agreement-invoices-field-service-to-supply-chain-management-invoice-lines"></a>Накладные по договору (из Field Service в Supply Chain Management): строки накладных

[![Сопоставление шаблона в интеграции данных](./media/FSFreeTextInvoice2.png)](./media/FSFreeTextInvoice2.png)


[!INCLUDE[footer-include](../../includes/footer-banner.md)]