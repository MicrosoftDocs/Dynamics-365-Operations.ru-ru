---
title: Объекты создания поездок
description: В этой статье содержится информация об объектах данных создания поездки, которые группируют объекты данных, необходимые для создания рабочей поездки.
author: yufeihuang
ms.date: 05/27/2022
ms.topic: article
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: yufeihuang
ms.search.validFrom: 2022-05-27
ms.dyn365.ops.version: 10.0.28
ms.openlocfilehash: 6234dfa61a5859e2ecaca75594c69c49ba326629
ms.sourcegitcommit: 5b34b41ae74269ba639e2876bc5862ef468da1cc
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/15/2022
ms.locfileid: "9167682"
---
# <a name="voyage-creation-entities"></a>Объекты создания поездок

[!include [banner](../includes/banner.md)]

Объекты данных создания поездки объединяют объекты данных, необходимые для создания рабочей поездки. Вы или ваш экспедитор груза можете использовать эти объекты данных для создания записей поездки, грузового контейнера, листа и строки поездки, которые ссылаются на существующие строки заказа покупателя или заказа на перемещение.

## <a name="voyages-itmtableentity"></a>Поездки (ITMTableEntity)

Поездка представляет путь по входящим товарам и служит в качестве области затрат самого высокого уровня в стоимости на складе. Она содержит информацию на уровне заголовка, относящуюся к судну, порту происхождения и порту назначения. Эта функция поддерживается объектом `ITMTableEntity`. В следующей таблице перечислены поля и сопоставления, которые составляют данный объект.

| Имя | Сопоставление | Тип данных | Ключ | Обязательная аналитика |
|---|---|---|---|---|
| Способ поставки | ITMTable.DlvModeId | Nvarchar(10) | Нет | Нет |
| Рекомендуется брокером | ITMTable.ITMBrokerAdvised | Дата и время | Нет | Нет |
| Встреча клиента | ITMTable.ITMCustomerAppointment | Дата и время | Нет | Нет |
| Доставлено на склад | ITMTable.ITMDelAtWarehouse | Дата и время | Нет | Нет |
| Инструкции по доставке | ITMTable.ITMDeliveryInstructions | Дата и время | Нет | Нет |
| Дата отправления | ITMTable.ITMDepartureDate | Дата и время | Нет | Нет |
| Выпущенные товары | ITMTable.ITMGoodsReleased | Дата и время | Нет | Нет |
| Дата локальной транспортировки | ITMTable.ITMLocalTransportDate | Дата и время | Нет | Нет |
| Время локальной транспортировки | ITMTable.ITMLocalTransportTime | Int | Нет | Нет |
| Исходная транспортная накладная отправлена | ITMTable.ITMOriginalBOLSebt | Дата и время | Нет | Нет |
| Исходные документы получены | ITMTable.ITMOriginalDocsReceived | Дата и время | Нет | Нет |
| Статус заказа на покупку | ITMTable.ITMPurchStatus | Int | Нет | Нет |
| Дата проверки | ITMTable.ITMVerificationDate | Дата и время | Нет | Нет |
| Идентификатор таможенной записи | ITMTable.ShipCustomsEntryId | Nvarchar(20) | Нет | Нет |
| Дата отгрузки | ITMTable.ShipDate | Дата и время | Нет | Нет |
| Описание | ITMTable.ShipDescription | Nvarchar(60) | Нет | Нет |
| Документы получены | ITMTable.ShipDocReceived | Int | Нет | Нет |
| Предполагаемая дата доставки | ITMTable.ShipEstDlvDate | Дата и время | Нет | Нет |
| Ожидаемое время прибытия в порту отгрузки | ITMTable.ShipEstPortDate | Дата и время | Нет | Нет |
| Порт отправления | ITMTable.ShipFromPort | Nvarchar(20) | Нет | Нет |
| Авиационная грузовая накладная/транспортная накладная компании | ITMTable.ShipHAWB | Nvarchar(20) | Нет | Нет |
| Поездка | ITMTable.ShipId | Nvarchar(20) | **Да** | **Да** |
| Ссылка на резервирование | ITMTable.ShipIdExternal | Nvarchar(20) | Нет | Нет |
| Шаблон пути | ITMTable.ShipJourneyId | Nvarchar(20) | Нет | Нет |
| Локальный экспедитор | ITMTable.ShipLocalForwarder | Nvarchar(20) | Нет | Нет |
| Основная авиационная грузовая накладная/транспортная накладная | ITMTable.ShipMAWB | Nvarchar(20) | Нет | Нет |
| Измерение | ITMTable.ShipMeasurement | Числовое значение(32, 6) | Нет | Нет |
| Единица измерения | ITMTable.ShipMeasurementUnit | Int | Нет | Нет |
| Количество палет | ITMTable.ShipNoOfPallets | Int | Нет | Нет |
| Ожидающая поездка | ITMTable.ShipPending | Int | Нет | Нет |
| Примечания | ITMTable.ShipRemarks | Nvarchar(MAX) | Нет | Нет |
| Аренда | ITMTable.ShipRental | Int | Нет | Нет |
| Статус поездки | ITMTable.ShipStatusId | Nvarchar(20) | Нет | Нет |
| #номер бирки | ITMTable.ShipTallyInNumber | Nvarchar(20) | Нет | Нет |
| Порт назначения | ITMTable.ShipToPort | Nvarchar(20) | Нет | Нет |
| Дата оценки | ITMTable.ShipValuationDate | Дата и время | Нет | Нет |
| Компания по отгрузке | ITMTable.ShipVendAccount | Nvarchar(20) | Нет | Нет |
| Судно | ITMTable.ShipVesselId | Nvarchar(20) | Нет | **Да** |
| Внешний ИД поездки | ITMTable.ShipVoyage | Nvarchar(20) | Нет | Нет |

### <a name="number-sequences-for-voyages"></a>Номерные серии для поездок

Общая номерная серия для поездки управляет распределением идентификаторов поездки.

Значение, которое передается в объект данных в качестве значения **идентификатора поездки** (`ShipId`), используется для определения существующей записи для обновления. Если данная запись не существует, поведение зависит от того, разрешена ли для ручной записи назначенная номерная серия:

- Если разрешен ввод вручную, создается новая запись, которая использует передаваемое значение
- Если ручной ввод не разрешен, вместо переданного значения используется следующий номер в назначенной номерной серии.

Во время сеанса импорта сохраняется значение заполнителя, которое импортируется как идентификатор поездки. Это гарантирует, что грузовой контейнер и строки поездки, которые ссылаются на заполнитель, включаются в поездку, и они обновляются в соответствии со значением, назначенным из номерной серии.

### <a name="automatic-cost-transactions"></a>Автоматические проводки затрат

Автоматические затраты можно добавлять в поездку со страницы **Автозатраты** в Microsoft Dynamics 365 Supply Chain Management (**Стоимость на складе \> Настройка стоимости \> Автоматические затраты**). Записи для автоматических затрат могут также создаваться с помощью объектов данных проводок затрат для каждой области затрат, которая поддерживается стоимостью на складе.

Автоматические затраты, настроенные в Supply Chain Management, применяются к поездке при создании строки поездки. Никакие затраты не будут отображаться в записи до тех пор, пока запись заголовка не будет связана с информацией о строке.

## <a name="shipping-containers-itmcontainersentity"></a>Грузовые контейнеры (ITMContainersEntity)

Грузовой контейнер представляет физический контейнер, в котором перенесены товары. Этот физический контейнер может быть контейнером транспортировки для транспортировки по океану или одной палетой для перевозки в воздухе. Грузовой контейнер включает информацию на уровне заголовка, связанную с идентификатором грузового контейнера, номером печатки и типом грузового контейнера. (Тип грузового контейнера предоставляет информацию об измерении.) Эта функция поддерживается объектом `ITMContainersEntity`. В следующей таблице перечислены поля и сопоставления, которые составляют данный объект.

| Имя | Сопоставление | Тип данных | Ключ | Обязательная аналитика |
|---|---|---|---|---|
| Дата отправления | ITMContainers.ITMDepartureDate | Дата и время | Нет | Нет |
| Дата локальной транспортировки | ITMContainers.ITMLocalTransportDate | Дата и время | Нет | Нет |
| Время локальной транспортировки | ITMContainers.ITMLocalTransportTime | Int | Нет | Нет |
| Исходная поездка | ITMContainers.OrigShipId | Nvarchar(20) | Нет | Нет |
| Фактический вес | ITMContainers.ShipActualWeight | Числовое значение(32, 6) | Нет | Нет |
| Рекомендуется брокером | ITMContainers.ShipBrokerAdvised | Дата и время | Нет | Нет |
| Грузовой контейнер | ITMContainers.ShipContainerId | Nvarchar(20) | **Да** | **Да** |
| Тип грузового контейнера | ITMContainers.ShipContainerTypeId | Nvarchar(20) | Нет | Нет |
| Тип подразделения | ITMContainers.ShipContainerUnitTypeId | Nvarchar(10) | Нет | Нет |
| Преобразовано в аренду | ITMContainers.ShipConvertedToRental | Int | Нет | Нет |
| Встреча клиента | ITMContainers.ShipCustomerAppointment | Дата и время | Нет | Нет |
| Дата отгрузки | ITMContainers.ShipDate | Дата и время | Нет | Нет |
| Доставлено на склад | ITMContainers.ShipDelAtWarehouse | Дата и время | Нет | Нет |
| Инструкции по доставке | ITMContainers.ShipDeliveryInstructions | Дата и время | Нет | Нет |
| Дата применения сертификата проверки | ITMContainers.ShipECAppliedDate | Дата и время | Нет | Нет |
| Дата окончания срока действия сертификата проверки | ITMContainers.ShipECExpiryDate | Дата и время | Нет | Нет |
| Номер сертификата проверки | ITMContainers.ShipECNum | Nvarchar(20) | Нет | Нет |
| Дата получения сертификата проверки | ITMContainers.ShipECReceivedDate | Дата и время | Нет | Нет |
| Предполагаемая дата доставки | ITMContainers.ShipEstDlvDate | Дата и время | Нет | Нет |
| Ожидаемое время прибытия в порту отгрузки | ITMContainers.ShipEstPortDate | Дата и время | Нет | Нет |
| Ожидаемая дата загрузки | ITMContainers.ShipExpectedLoadingDate | Дата и время | Нет | Нет |
| Порт отправления | ITMContainers.ShipFromPort | Nvarchar(20) | Нет | Нет |
| Описание товаров | ITMContainers.ShipGoodsDesc | Nvarchar(60) | Нет | Нет |
| Выпущенные товары | ITMContainers.ShipGoodsReleased | Дата и время | Нет | Нет |
| Устройство отслеживания GPS | ITMContainers.ShipGPSUnit | Nvarchar(30) | Нет | Нет |
| Авиационная грузовая накладная/транспортная накладная компании | ITMContainers.ShipHAWB | Nvarchar(20) | Нет | Нет |
| Поездка | ITMContainers.ShipId | Nvarchar(20) | **Да** | **Да** |
| Шаблон пути | ITMContainers.ShipJourneyId | Nvarchar(20) | Нет | Нет |
| Локальный экспедитор | ITMContainers.ShipLocalForwarder | Nvarchar(20) | Нет | Нет |
| Измерение | ITMContainers.ShipMeasurement | Числовое значение(32, 6) | Нет | Нет |
| Единица измерения | ITMContainers.ShipMeasurementUnit | Int | Нет | Нет |
| Количество коробок | ITMContainers.ShipNoOfCartons | Числовое значение(32, 6) | Нет | Нет |
| Исходная транспортная накладная отправлена | ITMContainers.ShipOriginalBOLSebt | Дата и время | Нет | Нет |
| Исходные документы получены | ITMContainers.ShipOriginalDocsReceived | Дата и время | Нет | Нет |
| Наш номер печати | ITMContainers.ShipOurSealNum | Nvarchar(20) | Нет | Нет |
| Использовано | ITMContainers.ShipPendingUsed | Int | Нет | Нет |
| Статус заказа на покупку | ITMContainers.ShipPurchStatus | Int | Нет | Нет |
| Тип охлаждения | ITMContainers.ShipRefrigerationTypeId | Nvarchar(10) | Нет | Нет |
| Примечания | ITMContainers.ShipRemarks | Nvarchar(MAX) | Нет | Нет |
| Аренда | ITMContainers.ShipRental | Int | Нет | Нет |
| Возвращаемые | ITMContainers.ShipReturnable | Int | Нет | Нет |
| Статус поездки | ITMContainers.ShipStatusId | Nvarchar(20) | Нет | Нет |
| Номер печати компании по отгрузке | ITMContainers.ShipTheirSealNum | Nvarchar(20) | Нет | Нет |
| Порт назначения | ITMContainers.ShipToPort | Nvarchar(20) | Нет | Нет |
| Дата проверки | ITMContainers.ShipVerificationDate | Дата и время | Нет | Нет |
| Судно | ITMContainers.ShipVesselId | Nvarchar(20) | Нет | **Да** |

### <a name="voyage-id-validation"></a>Проверка идентификатора поездки

Идентификатор грузового контейнера не управляется номерной серией. Он является уникальным только в контексте поездки, в которой он используется.

Если объект грузового контейнера (`ITMContainersEntity`) используется независимо от объекта поездки (`ITMTableEntity`), значение **Идентификатора поездки** (`ShipId`) должно соответствовать существующей записи в таблице поездки. В противном случае импорт завершится с ошибкой.

Если объект грузового контейнера (`ITMContainersEntity`) и объект поездки (`ITMTableEntity`) используются как часть того же сеанса импорта, то созданию грузового контейнера должен предшествовать объект выполнения. В противном случае значение **Идентификатора поездки** (`ShipId` ) не может быть проверено. Если значение заполнителя используется для значения **Идентификатор поездки** (`ShipId`), связь может быть создана только в том случае, если один и тот же заполнитель используется в качестве значения **Идентификатора поездки** (`ShipId`) в грузовом контейнере.

### <a name="other-field-validations"></a>Другие проверки поля

В следующей таблице показаны поля в таблице грузового контейнера (`ITMContainers`), которые проверяются по таблицам настройки стоимости на складе. Кроме того, в ней показаны объекты данных о стоимости на скаладе, которые могут быть использованы экспедитором груза для чтения существующих значений и обеспечения получения допустимых значений в среде.

| Поле в таблице ITMContainers | Объект данных о стоимости на складе |
|---|---|
| Тип грузового контейнера | ITMShippingContainerTypeEntity |
| Описание товаров | ITMGoodsDescriptionEntity |
| Тип охлаждения | ITMShippingContainerRefrigerationTypeEntity |

## <a name="folios-itmfolioentity"></a>Листы (ITMFolioEntity)

Лист представляет собой группирование номенклатур в грузовом контейнере для таможенных деклараций. В лист включается информация на уровне заголовка, связанная с таможенным брокером, и описание товаров. Эта функция поддерживается объектом `ITMFolioEntity`. В следующей таблице перечислены поля и сопоставления, которые составляют данный объект.

| Имя | Сопоставление | Тип данных | Ключ | Обязательная аналитика |
|---|---|---|---|---|
| Рекомендуется брокером | ITMFolioTable.ShipBrokerAdvised | Дата и время | Нет | Нет |
| Контрольный номер груза | ITMFolioTable.ShipCargoControlNumber | Nvarchar(20) | Нет | Нет |
| Встреча клиента | ITMFolioTable.ShipCustomerAppointment | Дата и время | Нет | Нет |
| Таможенный брокер | ITMFolioTable.ShipCustomsBroker | Nvarchar(20) | Нет | Нет |
| ИД таможни | ITMFolioTable.ShipCustomsId | Nvarchar(60) | Нет | Нет |
| Компания | ITMFolioTable.ShipDataArea | Nvarchar(4) | Нет | **Да** |
| Доставлено на склад | ITMFolioTable.ShipDelAtWarehouse | Дата и время | Нет | Нет |
| Инструкции по доставке | ITMFolioTable.ShipDeliveryInstructions | Дата и время | Нет | Нет |
| Документы получены | ITMFolioTable.ShipDocReceived | Int | Нет | Нет |
| Предполагаемая дата доставки | ITMFolioTable.ShipEstDlvDate | Дата и время | Нет | Нет |
| Ожидаемое время прибытия в порту отгрузки | ITMFolioTable.ShipEstPortDate | Дата и время | Нет | Нет |
| Экспортер | ITMFolioTable.ShipExporterId | Nvarchar(20) | Нет | Нет |
| Имя | ITMFolioTable.ShipExporterName | Nvarchar(60) | Нет | Нет |
| Дата листа | ITMFolioTable.ShipFolioDate | Дата и время | Нет | Нет |
| Лист | ITMFolioTable.ShipFolioId | Nvarchar(20) | **Да** | **Да** |
| Порт отправления | ITMFolioTable.ShipFromPort | Nvarchar(20) | Нет | Нет |
| Описание товаров | ITMFolioTable.ShipGoodsDesc | Nvarchar(60) | Нет | Нет |
| Выпущенные товары | ITMFolioTable.ShipGoodsReleased | Дата и время | Нет | Нет |
| Авиационная грузовая накладная/транспортная накладная компании | ITMFolioTable.ShipHAWB | Nvarchar(20) | Нет | Нет |
| Поездка | ITMFolioTable.ShipId | Nvarchar(20) | Нет | **Да** |
| Измерение | ITMFolioTable.ShipMeasurement | Числовое значение(32, 6) | Нет | Нет |
| Единица измерения | ITMFolioTable.ShipMeasurementUnit | Int | Нет | Нет |
| Количество коробок | ITMFolioTable.ShipNoOfCartons | Числовое значение(32, 6) | Нет | Нет |
| Исходная транспортная накладная отправлена | ITMFolioTable.ShipOriginalBOLSebt | Дата и время | Нет | Нет |
| Исходные документы получены | ITMFolioTable.ShipOriginalDocsReceived | Дата и время | Нет | Нет |
| Статус заказа на покупку | ITMFolioTable.ShipPurchStatus | Int | Нет | Нет |
| Примечания | ITMFolioTable.ShipRemarks | Nvarchar(MAX) | Нет | Нет |
| Статус поездки | ITMFolioTable.ShipStatusId | Nvarchar(20) | Нет | Нет |
| Код тарифа | ITMFolioTable.ShipTariffCode | Nvarchar(10) | Нет | Нет |
| Порт назначения | ITMFolioTable.ShipToPort | Nvarchar(20) | Нет | Нет |
| Дата оценки | ITMFolioTable.ShipValuationDate | Дата и время | Нет | Нет |
| Дата проверки | ITMFolioTable.ShipVerificationDate | Дата и время | Нет | Нет |
| Счет поставщика | ITMFolioTable.VendAccount | Nvarchar(20) | Нет | Нет |

### <a name="number-sequences-for-folios"></a>Номерные серии для листов

Номерная серия для листов управляет распределением идентификаторов листа.

Значение, которое передается в объект данных в качестве значения **идентификатора листа** (`FolioId`), используется для определения существующей записи для обновления. Если данная запись не существует, поведение зависит от того, разрешена ли для ручной записи назначенная номерная серия:

- Если разрешен ввод вручную, создается новая запись, которая использует передаваемое значение
- Если ручной ввод не разрешен, вместо переданного значения используется следующий номер в назначенной номерной серии.

Во время сеанса импорта сохраняется значение заполнителя, которое импортируется как идентификатор листа. Это гарантирует, что строки поездки, которые ссылаются на заполнитель, правильно связаны, и они обновляются в соответствии со значением, назначенным из номерной серии.

### <a name="field-validations"></a>Проверки поля

Поле **Описание товаров** в таблице листов (`ITMFolioTable`) сверяется с одноименной таблицей установки стоимости доставки. Экспедитор груза может использовать объект данных о стоимости на складе `ITMGoodsDescriptionEntity` для чтения существующих значений и обеспечения получения допустимых значений в среде.

## <a name="voyage-lines-for-purchase-orders-itmpurchaselineentity"></a>Строки поездки для заказов на покупку (ITMPurchaseLineEntity)

Строка поездки представляет собой одну строку заказа на покупку, которая включается в поездку. Это отношение устанавливается с помощью полей **Номер заказа на покупку** и **Номер строки покупки**. Строка поездки ссылается на каждую предыдущую запись, которая была создана для поездки, грузового контейнера и листа. Эта функция поддерживается объектом `ITMPurchaseLineEntity`. В следующей таблице перечислены поля и сопоставления, которые составляют данный объект.

| Имя | Сопоставление | Тип данных | Ключ | Обязательная аналитика |
|---|---|---|---|---|
| Валюта | ITMLine.CurrencyCode | Nvarchar(3) | Нет | Нет |
| Чистая сумма | ITMLine.LineAmountMST | Числовое значение(32, 6) | Нет | Нет |
| Номер строки покупки | ITMLine.RefRecId | Числовое значение(32, 6) | **Да** | Нет |
| Грузовой контейнер | ITMLine.ShipContainerId | Int | Нет | Нет |
| Компания | ITMLine.ShipDataArea | Nvarchar(20) | **Да** | Нет |
| Объявленное количество | ITMLine.ShipDeclaredQty | Nvarchar(4) | Нет | Нет |
| Лист | ITMLine.ShipFolioId | Числовое значение(32, 6) | Нет | Нет |
| Поездка | ITMLine.ShipId | Nvarchar(20) | **Да** | Нет |
| Код номенклатуры | ITMLine.ShipItemId | Nvarchar(20) | Нет | Нет |
| Измерение | ITMLine.ShipMeasurement | Nvarchar(20) | Нет | Нет |
| Единица измерения | ITMLine.ShipMeasurementUnit | Числовое значение(32, 6) | Нет | Нет |
| Количество коробок | ITMLine.ShipNoOfCartons | Int | Нет | Нет |
| Положение | ITMLine.ShipPosition | Числовое значение(32, 6) | Нет | Нет |
| Количество | ITMLine.ShipQty | Int | Нет | Нет |
| Номер заказа на покупку | ITMLine.TransRefId | Числовое значение(32, 6) | **Да** | Нет |
| Единица измерения | ITMLine.UnitId | Int | Нет | Нет |
| Объем | ITMLine.Volume | Nvarchar(10) | Нет | Нет |
| Вес | ITMLine.Weight | Числовое значение(32, 6) | Нет | Нет |

## <a name="voyage-lines-for-transfer-orders-itmtransferlineentity"></a>Строки поездки для заказов на перемещение (ITMTransferLineEntity)

Строка поездки представляет собой одну строку заказа на перемещение, которая включается в поездку. Это отношение устанавливается с помощью полей **Номер заказа на перемещение** и **Номер строки перемещения**. Строка поездки ссылается на каждую предыдущую запись, которая была создана для поездки, грузового контейнера и листа. Эта функция поддерживается объектом `ITMTransferLineEntity`. В следующей таблице перечислены поля и сопоставления, которые составляют данный объект.

| Имя | Сопоставление | Тип данных | Ключ | Обязательная аналитика |
|---|---|---|---|---|
| Валюта | ITMLine.CurrencyCode | Nvarchar(3) | Нет | Нет |
| Чистая сумма | ITMLine.LineAmountMST | Числовое значение(32, 6) | Нет | Нет |
| Грузовой контейнер | ITMLine.ShipContainerId | Int | Нет | Нет |
| Компания | ITMLine.ShipDataArea | Nvarchar(20) | **Да** | Нет |
| Объявленное количество | ITMLine.ShipDeclaredQty | Nvarchar(4) | Нет | Нет |
| Лист | ITMLine.ShipFolioId | Числовое значение(32, 6) | Нет | Нет |
| Поездка | ITMLine.ShipId | Nvarchar(20) | **Да** | Нет |
| Код номенклатуры | ITMLine.ShipItemId | Nvarchar(20) | Нет | Нет |
| Измерение | ITMLine.ShipMeasurement | Nvarchar(20) | Нет | Нет |
| Единица измерения | ITMLine.ShipMeasurementUnit | Числовое значение(32, 6) | Нет | Нет |
| Количество коробок | ITMLine.ShipNoOfCartons | Int | Нет | Нет |
| Положение | ITMLine.ShipPosition | Числовое значение(32, 6) | Нет | Нет |
| Количество | ITMLine.ShipQty | Int | Нет | Нет |
| Номер строки перемещения | ITMLine.TransferLineNumber | Числовое значение(32, 6) | **Да** | Нет |
| Номер заказа на перемещение | ITMLine.TransRefId | Числовое значение(32, 6) | **Да** | Нет |
| Единица измерения | ITMLine.UnitId | Int | Нет | Нет |
| Объем | ITMLine.Volume | Nvarchar(10) | Нет | Нет |
| Вес | ITMLine.Weight | Числовое значение(32, 6) | Нет | Нет |

### <a name="reference-table"></a>Таблица ссылок

Строки поездки создаются с помощью связи с открытой строкой входящего заказа. Эта строка может находиться в заказе на покупку или быть проводкой приема в заказе на перемещение. Поле `RefTableId` в таблице строки поездки (`ITMLine`) указывает, с каким типом заказа связана строка, посредством ссылки на номер таблицы. Если в таблице, в которой создаются данные, есть ссылки на определенные номера таблиц, объекты разделяются на основе этих значений.

Значения для таблицы ссылок (`RefTableId`) и типа транзакции (`TransType`) являются неявными в выборе либо для строки покупки по стоимости на складе, либо для объекта строки перемещения по стоимости на складе.

### <a name="validation"></a>Проверка

Строка поездки напрямую ссылается на запись поездки, запись грузового контейнера и запись листа. Если объект строки покупки (`ITMPurchaseLinesEntity`) или объект строки перемещения (`ITMPurchaseLinesEntity`) используется независимо от объектов, используемых для создания этих ссылочных записей, значения **Идентификатор поездки** (`ShipId`) **Грузовой контейнер**(`ShipContainerId`) и **Лист** (`ShipFolioId`) должны соответствовать существующей записи в соответствующих таблицах. В противном случае импорт завершится с ошибкой.

Если какой-либо объект строки используется как часть одного и того же сеанса импорта, эти другие объекты должны предшествовать созданию линии поездки. В противном случае значения не могут быть проверены. Если значение заполнителя используется для номера поездки или листа, ассоциация может быть создана только в том случае, если тот же самый заполнитель используется для номера поездки или листа в объекте строки поездки.

Если заказ на покупку или строка заказа на перемещение уже назначена существующей строке поездки, новая строка поездки не будет создана. Прежде чем строка заказа может быть назначена новой поездке, она должна быть удалена из текущей поездки.

### <a name="order-line-identification"></a>Идентификация строки заказа

Строки поездки непосредственно ссылаются на значения ссылки **Идентификатор записи** (`RefRecId`), **Идентификатор складской аналитики** (`InventDimId`) и **Идентификатор складской проводки** (`InventTransId`) Эти значения больше не требуется включать при использовании объекта данных. Вместо этого необходимо включить номер строки заказа. Вместе номер строки заказа и номер заказа позволяют определять каждое из этих значений ссылки.

### <a name="voyage-line-quantity"></a>Количество в строке поездки

Так как строка поездки непосредственно связана со строкой заказа, значение **Количества** (`ShipQty`), введенное с помощью объекта, требует, чтобы эти значения совпадали. Проверка выполняется для количества в строке заказа на покупку или в строке перемещения. Если проверка завершилась с ошибкой, запись не будет обработана.

### <a name="calculated-fields"></a>Вычисляемые поля

Вычисляемые поля **Вес** и **Объем** принимают значения, полученные через объект данных. Если значения не указаны, системные значения используются для обновления этих полей, если доступны системные значения. Для стоимости на складе значения рассчитываются следующим образом:

- *Вес* = *Количество* × *Брутто-вес номенклатуры*
- *Объем* = *Количество* × (*Брутто-глубина номенклатуры* × *Брутто-высота номенклатуры* × *Брутто-ширина номенклатуры*)

## <a name="sequencing"></a>Последовательность

Из-за зависимостей между таблицами в первую очередь необходимо создать запись о поездке. Строку поездки можно создать только после создания поездки, грузового контейнера и листов.

Чтобы создать поездку без предупреждений о проверке, система должна обрабатывать объекты в следующем порядке:

1. Поездки (`ITMTableEntity`)
1. Грузовые контейнеры (`ITMContainersEntity`)
1. Листы (`ITMFolioTableEntity`)
1. Строки поездки (`ITMPurchaseLinesEntity` или `ITMTransferLinesEntity`)
