---
title: Скользящая средняя себестоимость
description: Процесс закрытия запасов сопоставляет проводки расходов с проводками приходов на основе метода оценки запасов, который выбирается в группе номенклатурной модели номенклатуры. Однако перед запуском закрытия запасов система вычисляет скользящую среднюю себестоимость, которая обычно используется при разноске проводок расхода.
author: AndersGirke
ms.date: 02/02/2022
ms.topic: article
ms.search.form: InventModelGroup, InventOnhandItem, InventTrans
audience: Application User
ms.reviewer: kamaybac
ms.custom: 79003
ms.search.region: Global
ms.author: aevengir
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 871b3ffce45848f95d132eff3fd327295bc5084c
ms.sourcegitcommit: fefe93f3f44d8aa0b7e6d54cc4a3e5eca6e64feb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/04/2022
ms.locfileid: "8092197"
---
# <a name="running-average-cost-price"></a>Скользящая средняя себестоимость

[!include [banner](../includes/banner.md)]

Процесс закрытия запасов сопоставляет проводки расходов с проводками приходов на основе метода оценки запасов, который выбирается в группе номенклатурной модели номенклатуры. Однако перед запуском закрытия запасов система вычисляет скользящую среднюю себестоимость, которая обычно используется при разноске проводок расхода.

Система выполняет оценку этой скользящей средней себестоимости номенклатуры при помощи следующей формулы:

Расчетная цена = (Физическая сумма + Финансовая сумма) / (Физическое количество + Финансовое количество)

## <a name="default-item-cost"></a>Стоимость номенклатуры по умолчанию

Стоимость номенклатуры по умолчанию для выпущенного продукта можно настроить одним из двух способов на странице **Сведения об используемом продукте**:

- Создайте стандартную себестоимость, выбрав **Цена номенклатуры** в группе **Настройка** на вкладке **Управление затратами** в области операций. При использовании этого метода необходимо использовать версию стандартной себестоимости, и затраты должны быть активированы.
- Определите себестоимость номенклатуры по умолчанию для выпущенного продукта, введя значение в поле **Цена** на экспресс-вкладке **Управление затратами**.

В дополнение к вводу или созданию цены можно установить флажок **Использовать последнюю себестоимость** на экспресс-вкладке **Управление затратами** на странице **Сведения о выпущенном продукте**. В этом случае система будет автоматически обновлять поле **Цена** при разноске финансового обновления. Например, при разноске накладной заказа на покупку в поле будет установлена цена покупки из этой накладной.

Если в активной версии затрат имеется себестоимость и введена цена на экспресс-вкладке **Управление затратами**, система будет использовать цену из активной версии затрат до использования цены, определенной на экспресс-вкладке **Управление затратами**.

## <a name="using-the-running-average-cost-price"></a>Использование скользящей средней себестоимости

В следующей таблице показано, когда система разносит складские проводки, используя скользящую среднюю себестоимость, а когда вместо этого используется себестоимость, определенная по главной записи номенклатуры.

| Условие | Система использует расчетную скользящую среднею себестоимость | Система использует себестоимость номенклатуры по умолчанию |
| --- | --- | --- |
| И числитель\*, и знаменатель\*\* положительные. | Да | Нет |
| Числитель\*, знаменатель\*\* или обе величины отрицательные. | Нет | Да |
| Знаменатель\*\* равен 0 (нулю). | Нет | Да |

\* Числитель = (физическая сумма + финансовая сумма)  
\*\* Знаменатель = (физическое количество + финансовое количество)

> [!NOTE]
> Если параметр **Включать физическую стоимость** для номенклатуры не выбран, то система использует 0 (ноль) как для физической суммы, так и для физического количества. Дополнительные сведения об этом параметре см. в разделе [Включать физическую стоимость](include-physical-value.md).

## <a name="avoiding-pricing-amplification"></a>Как избежать увеличения цены

В редких случаях система определяет себестоимость по нескольким расходам до получения достаточного количества приходов в качестве основы для расчета цены. В этом сценарии оценки скользящей средней себестоимости могут быть сильно преувеличены. Однако можно предпринять некоторые шаги, чтобы избежать завышенного ценообразования или смягчить его влияние, если оно все-таки происходит.

**Сценарий:** Следующие проводки происходят для номенклатуры, для которой выбран параметр **Включать физическую стоимость**:

1. Вы финансово получаете количество, равное 100, по цене USD 100,00.
2. Вы финансово расходуете количество, равное 200.
3. Вы физически получаете количество, равное 101, по цене USD 202,00.

При проверке расчетной скользящей средней себестоимости номенклатуры вы ожидаете себестоимость USD 1,51. Вместо этого вы обнаруживаете расчетное скользящее среднее равно 102,00 на основе следующей формулы:

Расчетная цена = \[202 + (-100)\] ÷ \[101 + (-100)\] = 102 ÷ 1 = 102

Увеличение цены происходит потому, что при финансовом расходе 200 единиц номенклатуры на шаге 2, система должна назначить 100 номенклатур до получения соответствующих приходов. Это приводит к отрицательной величине запасов. Затем система рассчитает цену за единицу равной USD 1,00, как и ожидалось. Однако при получении соответствующего прихода 100 единиц они имеют цену за единицу USD 2,00 каждая.

> [!NOTE]
> Хотя расходы создают отрицательный запас, запасы имеют положительное значение при вычислении цены расхода. Поэтому используется скользящая средняя себестоимость вместо цены по главной записи номенклатуры. В этой точке система имеет смещение величины стоимости запасов, равное USD 100,00. Хотя данное смещение было создано для 100 шт., там где была величина смещения по USD 1,00 для каждой единицы, мы теперь имеем только одну штуку в запасах. Поэтому смещение USD 100,00 распределяется в эту единственную штуку. В результате получается очень сильно преувеличенная расчетная себестоимость.
>
> Для сравнения обратите внимание, что если реверсировать шаги 2 и 3 в вышеприведенном сценарии, то 200 штук номенклатуры будут израсходованы при цене за единицу равной USD 1,51, и одна штука останется с ценой за единицу, равной USD 1,51. Поскольку данный сценарий увеличения цены может наблюдаться при отрицательном запасе, этого трудно избежать в следующих случаях:
>
> - Необходимо рассчитывать цены расхода по стоимости и количеству, имеющимся в наличии.
> - Необходимо корректировать имеющиеся в наличии стоимость и количество по расходам и приходам.
> - Используемая бизнес-модель допускает отправку или расчет цены большего количества штук, чем имеется.
> - Необходимо принимать любую представленную стоимость и количество прихода.

Однако если используемая бизнес-модель допускает следующие процедуры, они могут помочь при предотвращении таких отрицательных количеств, которые сделают возможным сценарий увеличения цены:

- Если выбран параметр **Включать физическую стоимость** для номенклатуры, снимите флажок **Физический отрицательный запас** на странице **Группы номенклатурных моделей**.
- Если **не** выбран параметр **Включать физическую стоимость** для номенклатуры, снимите флажок **Финансовый отрицательный запас** на странице **Группы номенклатурных моделей**.

Кроме того, следует также помнить о том, что максимальное смещение стоимости физических запасов ограничено количеством физических проводок и разницей между физической и финансовой ценами. Если все физические проводки в конечном итоге обновляются финансово, физическая стоимость не может подняться до экстремальных уровней. Наконец, обратите внимание, что эффект роста цены существенно ослабевает, когда накопленное смещение распределяется по нескольким товарам, а не по одному.

## <a name="avoid-a-zero-cost-price-on-issues"></a>Избежание нулевых себестоимостей по расходам

Если параметр **Включать физическую стоимость** не выбран на странице **Группа номенклатурных моделей**, расход из запасов может иметь нулевую себестоимость, если нет финансово обновленных приемок в запасах. Чтобы избежать возникновения такой ситуации, необходимо выполнить следующие действия:

- Выберите параметр **Включать физическую стоимость** на странице **Группа номенклатурных моделей**. При выборе этого параметра себестоимость по расходу не будет равняться нулю при условии, что поступление физически обновлено. Если не разрешается отрицательный физический запас, расходы будут рассчитывать скользящее среднее из физически обновленных проводок.
- Создайте себестоимость номенклатуры по умолчанию, активируя версию себестоимости со стандартной себестоимостью, или введите цену на экспресс-вкладке **Управление затратами** на странице **Сведения о выпущенном продукте**. Этот параметр лучше всего использовать, если параметр **Включать физическую стоимость** не выбран на странице **Группы номенклатурных моделей**, так как системе всегда придется использовать резервную цену.
- Выберите параметр **Использовать последнюю себестоимость** на экспресс-вкладке **Управление затратами** на странице **Сведения о выпущенном продукте**. При выборе этого варианта поле **Цена** будет обновляться каждый раз при финансовом обновлении поступления. Если выбрать этот параметр, но вводить цену по умолчанию или не активировать стоимость в версии стандартной себестоимости, по-прежнему можно использовать нулевые затраты на расход.

При наличии проводок расхода с нулевой себестоимостью процесс *Закрытие запасов и корректировка* исправит себестоимость путем создания корректировки после финансового обновления поступлений. Имейте в виду, что финансовый период, когда происходит это обновление, может отличаться от финансового периода, когда номенклатуры были физически получены или выпущены.

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
