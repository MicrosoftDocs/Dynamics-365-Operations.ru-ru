---
title: Устранение неполадок управления затратами
description: В этом разделе описывается устранение проблем, которые могут встретиться при работе с управлением затратами.
author: riluan
manager: tfehr
ms.date: 10/13/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: InventAgingStorage, InventAgingStorageChart, InventAgingStorageDetails, InventValueProcess, InventValueReportSetup, InventClosing
audience: Application User
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Manufacturing
ms.author: riluan
ms.search.validFrom: 2020-10-13
ms.dyn365.ops.version: Release 10.0.15
ms.openlocfilehash: b8c527e578fee6abfeeade99fba8070365c020bd
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/15/2021
ms.locfileid: "4983858"
---
# <a name="troubleshoot-cost-management"></a><span data-ttu-id="2962d-103">Устранение неполадок управления затратами</span><span class="sxs-lookup"><span data-stu-id="2962d-103">Troubleshoot cost management</span></span>

<span data-ttu-id="2962d-104">В этом разделе описывается устранение проблем, которые могут встретиться при работе с управлением затратами.</span><span class="sxs-lookup"><span data-stu-id="2962d-104">This topic describes how to fix issues that you might encounter while working with cost management.</span></span>

## <a name="functional-gaps-between-the-inventory-valueaging-reports-and-their-storage-versions"></a><span data-ttu-id="2962d-105">Функциональные разрывы между отчетами стоимости запасов/устаревания и их версиями хранилищ</span><span class="sxs-lookup"><span data-stu-id="2962d-105">Functional gaps between the inventory value/aging reports and their storage versions</span></span>

<span data-ttu-id="2962d-106">Функции [Хранилище отчетов о распределении запасов по срокам](inventory-aging-report-storage.md) и [Отчет о стоимости запасов по складам](inventory-value-report-storage.md) позволяют Supply Chain Management отображать большие объемы складских проводок.</span><span class="sxs-lookup"><span data-stu-id="2962d-106">The [Inventory aging report storage](inventory-aging-report-storage.md) and [Inventory value storage report](inventory-value-report-storage.md) features enable Supply Chain Management to display large volumes of inventory transactions.</span></span> <span data-ttu-id="2962d-107">В каждом случае результаты отчета сохраняются для просмотра и экспорта, в отличие от версий этих отчетов, не связанных с хранилищем.</span><span class="sxs-lookup"><span data-stu-id="2962d-107">In each case, the report results are saved for browsing and exporting, unlike with the non-storage versions of these reports.</span></span> <span data-ttu-id="2962d-108">Однако некоторые функциональные возможности, существующие в версиях этих отчетов, не связанных с хранилищем, в версиях с хранилищами отсутствуют.</span><span class="sxs-lookup"><span data-stu-id="2962d-108">However, some functionality that exists in the non-storage versions of these reports doesn't exist in the storage versions.</span></span> <span data-ttu-id="2962d-109">В следующих подразделах приведены различия и предлагаются способы их обхода.</span><span class="sxs-lookup"><span data-stu-id="2962d-109">The following subsections summarize the differences and provide workarounds.</span></span>

### <a name="storage-reports-dont-include-subtotals-even-if-they-are-enabled-in-the-report-layout"></a><span data-ttu-id="2962d-110">Отчеты с хранилищем не включают промежуточные суммы, даже если они включены в макете отчета</span><span class="sxs-lookup"><span data-stu-id="2962d-110">Storage reports don't include subtotals, even if they are enabled in the report layout</span></span>

<span data-ttu-id="2962d-111">Промежуточные суммы могут вызывать ошибки при экспорте результатов, особенно если пользователи изменяют последовательность записей.</span><span class="sxs-lookup"><span data-stu-id="2962d-111">Subtotals can cause issues when the result is exported, especially if users change the record sequence.</span></span>

<span data-ttu-id="2962d-112">Для проверки промежуточных сумм можно экспортировать результат в Microsoft Excel.</span><span class="sxs-lookup"><span data-stu-id="2962d-112">To check the subtotals, you can export the result into Microsoft Excel.</span></span> <span data-ttu-id="2962d-113">Кроме того, если необходимо проверить промежуточные суммы в Supply Chain Management, используйте раздел [Управление функциями](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md), чтобы включить функции *Новый элемент управления сетки* и *(Предварительная версия) Группировка в сетках*, которые обеспечивают более гибкий способ отображения промежуточных итогов для любого столбца, по которому производится группировка.</span><span class="sxs-lookup"><span data-stu-id="2962d-113">Alternatively, if you want to check subtotals within Supply Chain Management, use [Feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) to enable the *New grid control* and *(Preview) Grouping in grids* features, which provide a much more flexible way to see the subtotal for any group by column.</span></span> <span data-ttu-id="2962d-114">Дополнительные сведения см. в разделе [Возможности сетки](../../fin-ops-core/fin-ops/get-started/grid-capabilities.md).</span><span class="sxs-lookup"><span data-stu-id="2962d-114">For more information, see [Grid capabilities](../../fin-ops-core/fin-ops/get-started/grid-capabilities.md).</span></span>

### <a name="inventory-value-storage-report-doesnt-support-ledger-account-information"></a><span data-ttu-id="2962d-115">Отчет о стоимости запасов с хранилищем не поддерживает сведения о счетах ГК</span><span class="sxs-lookup"><span data-stu-id="2962d-115">Inventory value storage report doesn't support ledger account information</span></span>

<span data-ttu-id="2962d-116">Можно выполнить пробный баланс для того, чтобы получить сальдо по счетам запасов, и сравнить их с отчетом **стоимости запасов по складам**.</span><span class="sxs-lookup"><span data-stu-id="2962d-116">You can run the trial balance to get the inventory accounts balance and compare that to the **Inventory value storage** report.</span></span>

## <a name="warnings-or-errors-are-shown-when-changing-a-ledger-period-status-without-closing-inventory"></a><span data-ttu-id="2962d-117">Предупреждения и ошибки отображаются при изменении статуса периода главной книги без закрытия запасов</span><span class="sxs-lookup"><span data-stu-id="2962d-117">Warnings or errors are shown when changing a ledger period status without closing inventory</span></span>

<span data-ttu-id="2962d-118">Корпорация Майкрософт ввела следующие проверки, чтобы избежать проблем, вызванных неправильным процессом обработки затрат на конец периода.</span><span class="sxs-lookup"><span data-stu-id="2962d-118">Microsoft introduced the following validations to prevent issues caused by an incorrect period-end process around costing.</span></span> <span data-ttu-id="2962d-119">Если вы столкнетесь с одним из следующих сообщений об ошибках, см. статью базы знаний [KB 4561987](https://fix.lcs.dynamics.com/Issue/Details?kb=4561987&bugId=445351&dbType=3&qc=f514f2adcddcddceec43af58c26ae8a9020effdc7cdfe085d9d0deeb8cc7b6a3) для получения дополнительных сведений о том, как решить эти проблемы.</span><span class="sxs-lookup"><span data-stu-id="2962d-119">If you encounter any of the following error messages, refer to [KB 4561987](https://fix.lcs.dynamics.com/Issue/Details?kb=4561987&bugId=445351&dbType=3&qc=f514f2adcddcddceec43af58c26ae8a9020effdc7cdfe085d9d0deeb8cc7b6a3) for more information about how to resolve these issues.</span></span>

- <span data-ttu-id="2962d-120">Вы собираетесь выполнить пересчет с датой %1 (10-02-2019).</span><span class="sxs-lookup"><span data-stu-id="2962d-120">You are about to execute a Recalculation with a date %1 (10-02-2019).</span></span> <span data-ttu-id="2962d-121">Последний зарегистрированный пересчет был выполнен в предыдущем периоде с датой %2 (20-01-2019).</span><span class="sxs-lookup"><span data-stu-id="2962d-121">The last registered Recalculation was executed in a previous period with a date %2 (20-01-2019).</span></span> <span data-ttu-id="2962d-122">Не было зарегистрировано выполнение закрытия запасов с датой %3 (31-01-2019), соответствующее концу периода.</span><span class="sxs-lookup"><span data-stu-id="2962d-122">No execution of an inventory close with a date %3 (31-01-2019) matching period end has been registered.</span></span> <span data-ttu-id="2962d-123">Не забудьте выполнить закрытие запасов по состоянию на %3 (31-01-2019), соответствующее концу периода.</span><span class="sxs-lookup"><span data-stu-id="2962d-123">Please remember to execute an inventory close as of %3 (31-01-2019) matching the period end.</span></span> <span data-ttu-id="2962d-124">Оценка стоимости запасов, себестоимости проданных товаров и отклонений может быть неверна в субкниге или в главной книге до тех пор, пока оно не будет выполнено.</span><span class="sxs-lookup"><span data-stu-id="2962d-124">The valuation of inventories, cost of goods sold, and variances may not be correct in subledger or general ledger until this has been executed.</span></span>

- <span data-ttu-id="2962d-125">Вы собираетесь изменить статус периода ГК %1 на %2.</span><span class="sxs-lookup"><span data-stu-id="2962d-125">You are about to change the status of ledger period %1 to %2.</span></span> <span data-ttu-id="2962d-126">Не было зарегистрировано выполнение закрытия запасов с датой %3, соответствующее концу периода.</span><span class="sxs-lookup"><span data-stu-id="2962d-126">No execution of inventory close with a date %3 matching period end has been registered.</span></span> <span data-ttu-id="2962d-127">Выполните закрытие запасов по состоянию на %3, соответствующее концу периода, перед изменением статуса.</span><span class="sxs-lookup"><span data-stu-id="2962d-127">Please execute an inventory close as of %3 matching the period end before changing the status.</span></span> <span data-ttu-id="2962d-128">Оценка стоимости запасов, себестоимости проданных товаров и отклонений может быть неверна в субкниге или в главной книге до тех пор, пока оно не будет выполнено.</span><span class="sxs-lookup"><span data-stu-id="2962d-128">The valuation of inventories, cost of goods sold, and variances may not be correct in subledger or general ledger until this has been executed.</span></span> <span data-ttu-id="2962d-129">Получено от юридического лица %4.</span><span class="sxs-lookup"><span data-stu-id="2962d-129">Reported from legal entity %4.</span></span> <span data-ttu-id="2962d-130">На данный момент это просто информация, однако в будущем выполнение этого действия будет обязательным.</span><span class="sxs-lookup"><span data-stu-id="2962d-130">For now, it is informational, but you will be required to perform such action in future.</span></span>

- <span data-ttu-id="2962d-131">Структура счетов %1 была изменена.</span><span class="sxs-lookup"><span data-stu-id="2962d-131">The Account structure %1 has been changed.</span></span> <span data-ttu-id="2962d-132">Один или несколько счетов ГК %2 больше не существуют.</span><span class="sxs-lookup"><span data-stu-id="2962d-132">One or more main accounts %2 no longer exist.</span></span> <span data-ttu-id="2962d-133">Эти счета ГК необходимы для %3 с датой %4.</span><span class="sxs-lookup"><span data-stu-id="2962d-133">These Main accounts are required by the %3 with a date %4.</span></span> <span data-ttu-id="2962d-134">Добавьте эти счета ГК в структуру счетов %1, прежде чем можно будет возобновить выполнение задания %3.</span><span class="sxs-lookup"><span data-stu-id="2962d-134">Please add these Main accounts to the Account structure %1 before you can resume the %3 job.</span></span> <span data-ttu-id="2962d-135">На данный момент это просто информация, однако в будущем выполнение этого действия будет обязательным.</span><span class="sxs-lookup"><span data-stu-id="2962d-135">For now, it is informational, but you will be required to perform such action in future.</span></span>

- <span data-ttu-id="2962d-136">Вы собираетесь выполнить закрытие запасов с датой %1 (31-01-2019).</span><span class="sxs-lookup"><span data-stu-id="2962d-136">You are about to execute an inventory close with a date %1 (31-01-2019).</span></span> <span data-ttu-id="2962d-137">Не было зарегистрировано выполнение вычисления backflush-расчета себестоимости с датой %2 (31-01-2019), соответствующее концу периода.</span><span class="sxs-lookup"><span data-stu-id="2962d-137">No execution of backflush costing calculation with a date %2 (31-01-2019) matching period end has been registered.</span></span> <span data-ttu-id="2962d-138">Не забудьте выполнить вычисление backflush-расчета себестоимости с датой %3 (31-01-2019), соответствующее концу периода.</span><span class="sxs-lookup"><span data-stu-id="2962d-138">Please remember to execute a backflush costing calculation with a date of %3 (31-01-2019) matching period end.</span></span> <span data-ttu-id="2962d-139">Оценка стоимости запасов, себестоимости проданных товаров и отклонений может быть неверна в субкниге или в главной книге до тех пор, пока оно не будет выполнено.</span><span class="sxs-lookup"><span data-stu-id="2962d-139">The valuation of inventories, cost of goods sold, and variances may not be correct in subledger or general ledger until this has been executed.</span></span>

- <span data-ttu-id="2962d-140">Вы собираетесь выполнить вычисление backflush-расчета себестоимости с датой %1 (28-02-2019).</span><span class="sxs-lookup"><span data-stu-id="2962d-140">You are about to execute a backflush costing calculation with a date %1 (28-02-2019).</span></span> <span data-ttu-id="2962d-141">Последнее зарегистрированное вычисление backflush-расчета себестоимости было выполнено в предыдущем периоде с датой %2 (31-01-2019).</span><span class="sxs-lookup"><span data-stu-id="2962d-141">The last registered backflush costing calculation was executed in a previous period with a date %2 (31-01-2019).</span></span> <span data-ttu-id="2962d-142">Не было зарегистрировано выполнение закрытие запасов с датой %3 (31-01-2019), соответствующее концу периода.</span><span class="sxs-lookup"><span data-stu-id="2962d-142">No execution of an inventory close with a date %3 (31-01-2019) matching a period end has been registered.</span></span>
<span data-ttu-id="2962d-143">Не забудьте выполнить закрытие запасов по состоянию на %3 (31-01-2019), соответствующее концу периода.</span><span class="sxs-lookup"><span data-stu-id="2962d-143">Please remember to execute an inventory close as of %3 (31-01-2019) matching a period end.</span></span> <span data-ttu-id="2962d-144">Оценка стоимости запасов, себестоимости проданных товаров и отклонений может быть неверна в субкниге или в главной книге до тех пор, пока не будет выполнено закрытие запасов.</span><span class="sxs-lookup"><span data-stu-id="2962d-144">The valuation of inventories, cost of goods sold and variances may not be correct in subledger or general ledger until the inventory close has been executed.</span></span>

## <a name="inventory-aging-report-discrepancies"></a><span data-ttu-id="2962d-145">Несоответствия отчета о распределении запасов по срокам</span><span class="sxs-lookup"><span data-stu-id="2962d-145">Inventory aging report discrepancies</span></span>

<span data-ttu-id="2962d-146">В **отчете о распределении запасов по срокам** отображаются различные значения при просмотре в разной аналитике хранения (например, на сайте или складе).</span><span class="sxs-lookup"><span data-stu-id="2962d-146">The **Inventory aging report** shows different values when viewed at different storage dimensions (such as site or warehouse).</span></span> <span data-ttu-id="2962d-147">Дополнительные сведения о логике отчетности см. в разделе [Примеры и логика отчета о распределении запасов по срокам](inventory-aging-report.md).</span><span class="sxs-lookup"><span data-stu-id="2962d-147">For more information about the reporting logic, see [Inventory aging report examples and logic](inventory-aging-report.md).</span></span>

## <a name="an-update-conflict-occurs-when-the-inventory-valuation-method-is-either-standard-cost-or-moving-average"></a><span data-ttu-id="2962d-148">Конфликт обновления происходит, когда методом оценки запасов является или стандартная себестоимость, или скользящее среднее</span><span class="sxs-lookup"><span data-stu-id="2962d-148">An update conflict occurs when the inventory valuation method is either Standard cost or Moving average</span></span>

<span data-ttu-id="2962d-149">При разноске документов, таких как журналы запасов, накладные заказа на покупку или накладные заказа на продажу, параллельно для масштабируемости и производительности, может быть получено сообщение об ошибке, вызванной конфликтом обновления, и некоторые документы могут быть не разнесены.</span><span class="sxs-lookup"><span data-stu-id="2962d-149">When you post documents such as inventory journals, purchase order invoices, or sales order invoices in parallel for scalability and performance, you might receive an error message about an update conflict, and some of the documents might not be posted.</span></span> <span data-ttu-id="2962d-150">Эта проблема может возникать, когда методом оценки запасов является или *Стандартная себестоимость*, или *Скользящее среднее*.</span><span class="sxs-lookup"><span data-stu-id="2962d-150">This issue can occur when the inventory valuation method is either *Standard cost* or *Moving average*.</span></span> <span data-ttu-id="2962d-151">Оба этих метода являются бессрочными методами учета затрат.</span><span class="sxs-lookup"><span data-stu-id="2962d-151">Both these methods are perpetual costing methods.</span></span> <span data-ttu-id="2962d-152">Иными словами, окончательные затраты определяются во время разноски.</span><span class="sxs-lookup"><span data-stu-id="2962d-152">In other words, the final cost is determined at the time of posting.</span></span>

<span data-ttu-id="2962d-153">При использовании метода *Скользящее среднее* сообщение об ошибке выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="2962d-153">If you're using the *Moving average* method, the error message resembles this example:</span></span>

> <span data-ttu-id="2962d-154">Значение запасов xx,xx после пропорционального расчета расходов не ожидается</span><span class="sxs-lookup"><span data-stu-id="2962d-154">Inventory value xx.xx is not expected after the proportional expense calculation</span></span>

<span data-ttu-id="2962d-155">При использовании метода *Стандартная себестоимость* сообщение об ошибке выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="2962d-155">If you're using the *Standard cost* method, the error message resembles this example:</span></span>

> <span data-ttu-id="2962d-156">В результате обновления стандартные затраты не соответствуют финансовой величине запасов.</span><span class="sxs-lookup"><span data-stu-id="2962d-156">The standard cost does not match with the financial inventory value after the update.</span></span> <span data-ttu-id="2962d-157">Значение = xx,xx, Кол-во = yy,yy, Стандартная себестоимость = zz,zz</span><span class="sxs-lookup"><span data-stu-id="2962d-157">Value = xx.xx, Qty = yy.yy, Standard cost = zz.zz</span></span>

<span data-ttu-id="2962d-158">До тех пор, пока корпорация Майкрософт не выпустит решение для устранения проблемы, придерживайтесь следующих временных решений, чтобы избежать подобных ошибок:</span><span class="sxs-lookup"><span data-stu-id="2962d-158">Until Microsoft releases a solution to fix the issue, consider using the following workarounds to help avoid or reduce these errors:</span></span>

- <span data-ttu-id="2962d-159">Заново выполните разноску документов, для которых возникла ошибка.</span><span class="sxs-lookup"><span data-stu-id="2962d-159">Repost the failed documents.</span></span>
- <span data-ttu-id="2962d-160">Создайте документы, содержащие меньшее число строк.</span><span class="sxs-lookup"><span data-stu-id="2962d-160">Create documents that have fewer lines.</span></span>
- <span data-ttu-id="2962d-161">Избегайте использования десятичных значений в стандартных затратах.</span><span class="sxs-lookup"><span data-stu-id="2962d-161">Avoid decimal values in the standard cost.</span></span> <span data-ttu-id="2962d-162">Попробуйте определить стандартную себестоимость таким образом, чтобы в поле **Количество для цены** было установлено значение *1*.</span><span class="sxs-lookup"><span data-stu-id="2962d-162">Try to define the standard cost so that the **Price quantity** field is set to *1*.</span></span> <span data-ttu-id="2962d-163">Если необходимо указать значение **Количество для цены**, большее *1*, попробуйте минимизировать число десятичных разрядов в стандартной себестоимости единицы измерения.</span><span class="sxs-lookup"><span data-stu-id="2962d-163">If you must specify a **Price quantity** value that is more than *1*, try to minimize the number of decimal places in the unit standard cost.</span></span> <span data-ttu-id="2962d-164">(В идеале должно быть менее двух десятичных разрядов.) Например, не следует определять настройки стандартной себестоимости, такие как **Цена** = *10* и **Количество для цены** = *3*, так как они создают стандартную себестоимость 3,333333 (где десятичные знаки повторяются).</span><span class="sxs-lookup"><span data-stu-id="2962d-164">(Ideally, there should be fewer than two decimal places.) For example, avoid defining standard cost settings such as **Price** = *10* and **Price quantity** = *3*, because they will produce a unit standard cost of 3.333333 (where the decimal value repeats).</span></span>
- <span data-ttu-id="2962d-165">В большинстве документов следует избегать использования нескольких строк, содержащих одинаковое сочетание продуктов и финансовых складских аналитик.</span><span class="sxs-lookup"><span data-stu-id="2962d-165">In a majority of documents, avoid having multiple lines that hold the same combination of product and financial inventory dimensions.</span></span>
- <span data-ttu-id="2962d-166">Снизьте степень параллелизма.</span><span class="sxs-lookup"><span data-stu-id="2962d-166">Reduce the degree of parallelization.</span></span> <span data-ttu-id="2962d-167">(В этом случае система может начать работать быстрее, так как происходит меньше конфликтов обновления и повторных попыток.)</span><span class="sxs-lookup"><span data-stu-id="2962d-167">(In this case, your system might become faster, because fewer update conflicts and retries occur.)</span></span>
