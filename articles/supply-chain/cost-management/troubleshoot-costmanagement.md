---
title: Устранение неполадок управления затратами
description: В этом разделе описывается устранение проблем, которые могут встретиться при работе с управлением затратами.
author: riluan
manager: tfehr
ms.date: 10/13/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: InventAgingStorage, InventAgingStorageChart, InventAgingStorageDetails, InventValueProcess, InventValueReportSetup, InventClosing
audience: Application User
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Manufacturing
ms.author: riluan
ms.search.validFrom: 2020-10-13
ms.dyn365.ops.version: Release 10.0.15
ms.openlocfilehash: b8c527e578fee6abfeeade99fba8070365c020bd
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/15/2021
ms.locfileid: "4983858"
---
# <a name="troubleshoot-cost-management"></a>Устранение неполадок управления затратами

В этом разделе описывается устранение проблем, которые могут встретиться при работе с управлением затратами.

## <a name="functional-gaps-between-the-inventory-valueaging-reports-and-their-storage-versions"></a>Функциональные разрывы между отчетами стоимости запасов/устаревания и их версиями хранилищ

Функции [Хранилище отчетов о распределении запасов по срокам](inventory-aging-report-storage.md) и [Отчет о стоимости запасов по складам](inventory-value-report-storage.md) позволяют Supply Chain Management отображать большие объемы складских проводок. В каждом случае результаты отчета сохраняются для просмотра и экспорта, в отличие от версий этих отчетов, не связанных с хранилищем. Однако некоторые функциональные возможности, существующие в версиях этих отчетов, не связанных с хранилищем, в версиях с хранилищами отсутствуют. В следующих подразделах приведены различия и предлагаются способы их обхода.

### <a name="storage-reports-dont-include-subtotals-even-if-they-are-enabled-in-the-report-layout"></a>Отчеты с хранилищем не включают промежуточные суммы, даже если они включены в макете отчета

Промежуточные суммы могут вызывать ошибки при экспорте результатов, особенно если пользователи изменяют последовательность записей.

Для проверки промежуточных сумм можно экспортировать результат в Microsoft Excel. Кроме того, если необходимо проверить промежуточные суммы в Supply Chain Management, используйте раздел [Управление функциями](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md), чтобы включить функции *Новый элемент управления сетки* и *(Предварительная версия) Группировка в сетках*, которые обеспечивают более гибкий способ отображения промежуточных итогов для любого столбца, по которому производится группировка. Дополнительные сведения см. в разделе [Возможности сетки](../../fin-ops-core/fin-ops/get-started/grid-capabilities.md).

### <a name="inventory-value-storage-report-doesnt-support-ledger-account-information"></a>Отчет о стоимости запасов с хранилищем не поддерживает сведения о счетах ГК

Можно выполнить пробный баланс для того, чтобы получить сальдо по счетам запасов, и сравнить их с отчетом **стоимости запасов по складам**.

## <a name="warnings-or-errors-are-shown-when-changing-a-ledger-period-status-without-closing-inventory"></a>Предупреждения и ошибки отображаются при изменении статуса периода главной книги без закрытия запасов

Корпорация Майкрософт ввела следующие проверки, чтобы избежать проблем, вызванных неправильным процессом обработки затрат на конец периода. Если вы столкнетесь с одним из следующих сообщений об ошибках, см. статью базы знаний [KB 4561987](https://fix.lcs.dynamics.com/Issue/Details?kb=4561987&bugId=445351&dbType=3&qc=f514f2adcddcddceec43af58c26ae8a9020effdc7cdfe085d9d0deeb8cc7b6a3) для получения дополнительных сведений о том, как решить эти проблемы.

- Вы собираетесь выполнить пересчет с датой %1 (10-02-2019). Последний зарегистрированный пересчет был выполнен в предыдущем периоде с датой %2 (20-01-2019). Не было зарегистрировано выполнение закрытия запасов с датой %3 (31-01-2019), соответствующее концу периода. Не забудьте выполнить закрытие запасов по состоянию на %3 (31-01-2019), соответствующее концу периода. Оценка стоимости запасов, себестоимости проданных товаров и отклонений может быть неверна в субкниге или в главной книге до тех пор, пока оно не будет выполнено.

- Вы собираетесь изменить статус периода ГК %1 на %2. Не было зарегистрировано выполнение закрытия запасов с датой %3, соответствующее концу периода. Выполните закрытие запасов по состоянию на %3, соответствующее концу периода, перед изменением статуса. Оценка стоимости запасов, себестоимости проданных товаров и отклонений может быть неверна в субкниге или в главной книге до тех пор, пока оно не будет выполнено. Получено от юридического лица %4. На данный момент это просто информация, однако в будущем выполнение этого действия будет обязательным.

- Структура счетов %1 была изменена. Один или несколько счетов ГК %2 больше не существуют. Эти счета ГК необходимы для %3 с датой %4. Добавьте эти счета ГК в структуру счетов %1, прежде чем можно будет возобновить выполнение задания %3. На данный момент это просто информация, однако в будущем выполнение этого действия будет обязательным.

- Вы собираетесь выполнить закрытие запасов с датой %1 (31-01-2019). Не было зарегистрировано выполнение вычисления backflush-расчета себестоимости с датой %2 (31-01-2019), соответствующее концу периода. Не забудьте выполнить вычисление backflush-расчета себестоимости с датой %3 (31-01-2019), соответствующее концу периода. Оценка стоимости запасов, себестоимости проданных товаров и отклонений может быть неверна в субкниге или в главной книге до тех пор, пока оно не будет выполнено.

- Вы собираетесь выполнить вычисление backflush-расчета себестоимости с датой %1 (28-02-2019). Последнее зарегистрированное вычисление backflush-расчета себестоимости было выполнено в предыдущем периоде с датой %2 (31-01-2019). Не было зарегистрировано выполнение закрытие запасов с датой %3 (31-01-2019), соответствующее концу периода.
Не забудьте выполнить закрытие запасов по состоянию на %3 (31-01-2019), соответствующее концу периода. Оценка стоимости запасов, себестоимости проданных товаров и отклонений может быть неверна в субкниге или в главной книге до тех пор, пока не будет выполнено закрытие запасов.

## <a name="inventory-aging-report-discrepancies"></a>Несоответствия отчета о распределении запасов по срокам

В **отчете о распределении запасов по срокам** отображаются различные значения при просмотре в разной аналитике хранения (например, на сайте или складе). Дополнительные сведения о логике отчетности см. в разделе [Примеры и логика отчета о распределении запасов по срокам](inventory-aging-report.md).

## <a name="an-update-conflict-occurs-when-the-inventory-valuation-method-is-either-standard-cost-or-moving-average"></a>Конфликт обновления происходит, когда методом оценки запасов является или стандартная себестоимость, или скользящее среднее

При разноске документов, таких как журналы запасов, накладные заказа на покупку или накладные заказа на продажу, параллельно для масштабируемости и производительности, может быть получено сообщение об ошибке, вызванной конфликтом обновления, и некоторые документы могут быть не разнесены. Эта проблема может возникать, когда методом оценки запасов является или *Стандартная себестоимость*, или *Скользящее среднее*. Оба этих метода являются бессрочными методами учета затрат. Иными словами, окончательные затраты определяются во время разноски.

При использовании метода *Скользящее среднее* сообщение об ошибке выглядит следующим образом:

> Значение запасов xx,xx после пропорционального расчета расходов не ожидается

При использовании метода *Стандартная себестоимость* сообщение об ошибке выглядит следующим образом:

> В результате обновления стандартные затраты не соответствуют финансовой величине запасов. Значение = xx,xx, Кол-во = yy,yy, Стандартная себестоимость = zz,zz

До тех пор, пока корпорация Майкрософт не выпустит решение для устранения проблемы, придерживайтесь следующих временных решений, чтобы избежать подобных ошибок:

- Заново выполните разноску документов, для которых возникла ошибка.
- Создайте документы, содержащие меньшее число строк.
- Избегайте использования десятичных значений в стандартных затратах. Попробуйте определить стандартную себестоимость таким образом, чтобы в поле **Количество для цены** было установлено значение *1*. Если необходимо указать значение **Количество для цены**, большее *1*, попробуйте минимизировать число десятичных разрядов в стандартной себестоимости единицы измерения. (В идеале должно быть менее двух десятичных разрядов.) Например, не следует определять настройки стандартной себестоимости, такие как **Цена** = *10* и **Количество для цены** = *3*, так как они создают стандартную себестоимость 3,333333 (где десятичные знаки повторяются).
- В большинстве документов следует избегать использования нескольких строк, содержащих одинаковое сочетание продуктов и финансовых складских аналитик.
- Снизьте степень параллелизма. (В этом случае система может начать работать быстрее, так как происходит меньше конфликтов обновления и повторных попыток.)


[!INCLUDE[footer-include](../../includes/footer-banner.md)]