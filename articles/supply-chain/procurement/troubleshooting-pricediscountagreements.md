---
title: Устранение неполадок по ценам, скидкам, соглашениям и бонусам
description: В этой теме описывается, как устранять проблемы, которые могут встретиться при работе с ценами, скидками, соглашениями и бонусами.
author: SmithaNataraj
ms.date: 09/16/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: PurchTable, PurchTablePart, PurchRFQTable
audience: Application User
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Manufacturing
ms.author: smnatara
ms.search.validFrom: 2020-9-16
ms.dyn365.ops.version: Release 10.0.14
ms.openlocfilehash: 237ec60823eb5fded09c32d6a51b1eb504456a1dc666d7d6f2e6678382433de9
ms.sourcegitcommit: 42fe9790ddf0bdad911544deaa82123a396712fb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/05/2021
ms.locfileid: "6762850"
---
# <a name="troubleshoot-prices-discounts-agreements-and-rebates"></a>Устранение неполадок по ценам, скидкам, соглашениям и бонусам

В этой теме описывается, как устранять проблемы, которые могут встретиться при работе с ценами, скидками, соглашениями и бонусами.

## <a name="i-cant-link-a-purchase-agreement-to-a-purchase-order-line-after-the-purchase-order-is-created"></a>После создания заказа на покупку невозможно связать договор покупки со строкой заказа на покупку.

Договор покупки необходимо связать с заказом на покупку при создании заказа на покупку. В противном случае строки заказа на покупку не могут быть связаны со строками договора покупки.

## <a name="what-check-triggers-the-update-prices-and-discounts-entered-manually-or-external-document-message"></a>Какая проверка запускает сообщение "Обновите цены и скидки, введенные вручную, или внешний документ"?

При изменении даты отгрузки может быть получено сообщение, в котором говорится "Обновите цены и скидки, введенные вручную, или внешний документ". Это сообщение выводится из-за того, что при изменении даты отгрузки может быть запущено другое торговое соглашение или договор продажи, и это приводит к изменению цены. Изменение даты отгрузки также может повлиять на складские графики и другие связанные данные.

Сообщение запускается каждый раз, когда изменяются любые даты или другие параметры. Целью сообщения является обеспечение осведомленности об изменениях цены, которые могут возникнуть вследствие этих изменений.

Сообщение является запросом оценки коммерческого соглашения (TAE). Полное описание см. в разделе [Политики оценки коммерческих соглашений](/dynamicsax-2012/appuser-itpro/trade-agreement-evaluation-policies-white-paper).

## <a name="a-purchase-order-receipt-doesnt-include-all-charges"></a>В приходе по заказу на покупку не включаются все расходы.

### <a name="reproduce-the-issue"></a>Воспроизведение проблемы

Следующая процедура показывает один из способов воспроизведения проблемы.

1. На странице **Параметры модуля "Закупки и источники"** на вкладке **Доставка** убедитесь, что для параметра **Формировать накладные расходы при приходе продукта** установлено значение *Да*.
1. Создайте заказ на покупку, включающий накладные расходы.
1. Подтвердите заказ на покупку.
1. Получите заказ на покупку.
1. Просмотрите итоговую сумму прихода и сравните ее с ожидаемым итогом.
1. Обратите внимание, что не все накладные расходы включены в приход заказа на покупку.

### <a name="issue-resolution"></a>Устранение проблемы

Разрешение зависит от способа настройки накладных расходов. Сведения о порядке настройки накладных расходов, чтобы они удовлетворяли вашим требованиям, см. в следующей записи блога: [Разноска накладных расходов в момент поступления продуктов](https://cloudblogs.microsoft.com/dynamics365/no-audience/2014/11/11/post-misc-charges-at-time-of-product-receipt/).

## <a name="trade-agreement-prices-and-discounts-arent-applied-on-sales-or-purchase-order-lines-that-are-imported-through-data-management"></a>Цены и скидки коммерческого соглашения не применяются к строкам заказа на продажу или покупку, которые импортированы с применением управления данными.

### <a name="issue-description"></a>Описание проблемы

Коммерческие соглашения, которые применимы к строкам заказа на продажу или покупку, не применяются в строках, которые импортированы с применением управления данными. Однако те же коммерческие соглашения применяются к строкам заказа на продажу или покупку, созданным вручную.

### <a name="reason-for-the-issue"></a>Причина проблемы

Если строки заказа на покупку, импортируемые через управление данными, уже содержат информацию о цене, коммерческое соглашение не будет заново оцениваться для этих строк. Например, если в строке указан **процент скидки по строке** или какое-либо значение цены и скидки, коммерческие соглашения не будут проверяться для этой строки.

### <a name="issue-workaround"></a>Временное решение проблемы

Такое поведение является ожидаемым и аналогично для заказов на продажу и заказов на покупку.

В качестве временного решения импортируйте строки заказа на покупку, не задавая никакой информации о цене. Затем будут применяться коммерческие соглашения, и строки заказа на покупку будут обновлены на основе определенных коммерческих соглашений.

## <a name="a-vendor-rebate-isnt-cumulated-based-on-invoices"></a>Бонус поставщика не накапливается на основе накладных.

### <a name="issue-description"></a>Описание проблемы

Если накладные, которые разносятся, имеют разные сроки исполнения, эти накладные не отражаются в бонусах поставщика, которые создаются из них.

### <a name="issue-resolution"></a>Устранение проблемы

По дизайну срок выполнения не учитывается при расчете бонуса поставщика. Рассмотрите возможность настройки системы таким образом, чтобы дата исполнения и связь с накладной были более очевидны по отношению к фактической бонусу поставщика.

## <a name="unit-prices-on-purchase-orders-arent-calculated-based-on-the-unit-conversion"></a>Цены за единицу в заказах на покупку не рассчитываются на основе преобразования единиц измерения.

### <a name="issue-description"></a>Описание проблемы

При изменении единицы в заказе на покупку цены коммерческих соглашений не пересчитываются в соответствии с определениями пересчета единиц измерения.

### <a name="issue-resolution"></a>Устранение проблемы

Цены всегда извлекаются из коммерческих соглашениях (или других настроек цен в системе, таких как соглашения о продаже или цены номенклатур), и они настраиваются для единицы измерения.

Если единица измерения изменяется в строке заказа, система выполняет поиск цены для новой единицы измерения и применяет эту цену. Если для единицы измерения цена не найдена, система не применяет цену. Пересчет единиц измерения не может использоваться для пересчета цены в другую единицу измерения. Теоретически цена за один ящик с десятком может не быть равна десяти ценам одного ящика.

### <a name="issue-workaround"></a>Временное решение проблемы

Одним из способов обхода этой проблемы является обеспечение наличия коммерческих соглашений для единиц измерения, которые, как вы ожидаете, будут использоваться в строках заказа для данной номенклатуры.

## <a name="currency-conversion-issues-occur-with-trade-agreements"></a>В коммерческих соглашениях возникают проблемы при конвертации валют.

Цены коммерческого соглашения не пересчитываются в соответствии с валютой, когда валюта отличается в заказе на покупку.

Функция *Универсальная валюта* позволяет определять цены и скидки только в одной валюте. Затем можно выполнить преобразование в другие валюты по мере необходимости. Более того, после выполнения преобразования функция может автоматически применять психологическое округление.

## <a name="when-i-open-the-purchase-agreement-page-in-a-line-view-mode-i-cant-personalize-the-page-by-adding-the-price-unit-field-in-the-overview-of-the-line"></a>При открытии страницы договора покупки в режиме строкового вида невозможно настроить страницу, добавив поле "Единица измерения цены" в обзоре строки.

Некоторые общие поля в структуре соглашений не могут включаться в персонализации. Это ограничение происходит из-за реализованной модели данных. Таким образом, нельзя персонализировать поле **Единица измерения цены**.

## <a name="the-maximum-limit-from-a-purchase-agreement-isnt-effective-on-a-purchase-requisition"></a>Максимальное ограничение по договору покупки не эффективно для заявки на закупку.

### <a name="issue-description"></a>Описание проблемы

Когда заявка на закупку связана с договором покупки, максимальная граница из договора покупки не действует в отношении данной заявки на закупку. Сведения о цене по умолчанию введены правильно, но в заявке на закупку может быть заказано больше максимально допустимого лимита из договора покупки.

### <a name="issue-resolution"></a>Устранение проблемы

Это поведение является ожидаемым. Поскольку заявки не всегда утверждены, в договоре покупки не следует резервировать количество или сумму. Следовательно, максимальная граница из договора покупки не будет достигнута.

## <a name="trade-agreements-can-be-created-from-rejected-rfqs-therefore-the-system-doesnt-prevent-trade-agreement-journals-from-being-created-if-the-rfq-line-hasnt-been-accepted"></a>Торговые соглашения можно создавать из отклоненных запросов предложений. Поэтому система не препятствует созданию журналов коммерческих соглашений, если строка запроса предложения не была принята.

Торговые соглашения можно создавать для любых ответов на запрос предложения, независимо от того, были ли они приняты или отклонены. Дополнительные сведения см. в разделе [Обзор запросов предложений](request-quotations.md).



[!INCLUDE[footer-include](../../includes/footer-banner.md)]