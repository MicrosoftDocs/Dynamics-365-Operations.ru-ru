---
title: Устранение неполадок поступления продуктов и выставления накладных
description: В этой теме описывается, как устранять проблемы, которые могут встретиться при работе с поступлениями продуктов и выставлением накладных.
author: SmithaNataraj
manager: tfehr
ms.date: 09/16/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: PurchTable
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Manufacturing
ms.author: smnatara
ms.search.validFrom: 2020-9-16
ms.dyn365.ops.version: Release 10.0.14
ms.openlocfilehash: d86fa3df1de13cc0e0fb94449207a326069da25b
ms.sourcegitcommit: 91e101d7a51a8b63bd196ec80e9224e5e6e6fc95
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/22/2020
ms.locfileid: "3834418"
---
# <a name="troubleshoot-product-receipts-and-invoicing"></a>Устранение неполадок поступления продуктов и выставления накладных

В этой теме описывается, как устранять проблемы, которые могут встретиться при работе с поступлениями продуктов и выставлением накладных.

## <a name="i-cant-post-more-than-one-invoice-for-a-purchase-order-line-that-has-category-based-items"></a>Я не могу разнести более одной накладной для строки заказа на покупку, имеющей номенклатуры, основанные на категориях.

Если требуется разнести накладные, количество обязательно для заполнения. Таким образом, если для полного количества строки выставляется накладная только по частичной сумме, вы не сможете выставить накладную для оставшейся суммы в другой накладной.

## <a name="i-receive-an-object-reference-not-set-error-during-purchase-order-confirmation-or-an-exception-has-been-thrown-by-the-target-of-an-invocation-exception-occurs-during-vendor-invoice-posting"></a>Во время подтверждения заказа на покупку я получаю ошибку "Ссылка на объект не указывает" или при разноске накладной поставщика возникает исключение "Адресат вызова создал исключение".

Эта проблема может возникнуть из-за несогласованности в распределениях заказов на покупку.

Чтобы разблокировать эту проблему и сбросить заказ на покупку в состояние *Черновик*, перейдите в раздел **Закупки и источники \> Периодические задачи \> Очистка \> Сброс распределения заказов на покупку**. Дополнительные сведения см. в следующей записи блога: [Устранение ошибок распределения заказов на покупку в Dynamics 365 Supply Chain Management](https://cloudblogs.microsoft.com/dynamics365/it/2020/08/12/resolve-po-distribution-errors-in-dynamics-365-supply-chain-management/).

## <a name="i-cant-consolidate-multiple-product-receipts-into-a-single-purchase-order"></a>Невозможно консолидировать несколько поступлений продуктов в один заказ на покупку.

Невозможно консолидировать несколько поступлений продуктов в один заказ на покупку, если различные строки поступлений продуктов имеют различные учетные даты.

В предыдущих версиях Microsoft Dynamics 365 Supply Chain Management консолидация была разрешена в этой ситуации. Однако такая практика подвержена ошибкам. Дата учета в создаваемых строках заказа на покупку не должна отличаться от даты учета в строках прихода продуктов, из которых были созданы эти строки заказа на покупку. (Дата учета в строках заказа на покупку соответствует дате учета в заголовке заказа на покупку.) Таким образом, консолидация нескольких поступлений продуктов в один заказ на покупку больше не разрешена.

Дата учета используется, например, для резервирований бюджета и бюджетного обязательства. Поэтому она должна сохраняться во время перехода от прихода продукта к заказу на покупку.

## <a name="when-product-receipts-are-canceled-transactions-can-be-posted-to-a-suspended-ledger-account"></a>После отмены поступлений продуктов проводки могут разноситься на приостановленный счет ГК.

### <a name="issue-description"></a>Описание проблемы

Если поступление продуктов отменено, система разрешает разноску проводок в приостановленные счета ГК, даже если счета ГК приостановлены.

### <a name="reproduce-the-issue"></a>Воспроизведение проблемы

Следующая процедура показывает один из способов воспроизведения проблемы.

1. На странице **Параметры модуля расчетов с поставщиками** на вкладке **Общие** убедитесь, что для параметра **Разнести поступление продуктов в ГК** установлено значение *Да*.
1. Создайте заказ на покупку и добавьте строку заказа с количеством *1000* для продукта.
1. Подтвердите заказ на покупку.
1. Выполните разноску поступления продуктов и проверьте операции.
1. Приостановите соответствующие счета ГК, *200140* и *140200*.
1. Отмените разнесенное поступление продуктов.
1. Обратите внимание, что проводки могут разноситься по приостановленным счета книги учета.

### <a name="issue-resolution"></a>Устранение проблемы

Проводки могут быть разнесены по приостановленным счетам книги учета при отмене приемки продуктов, так как это поведение позволяет использовать правильные разноски.

## <a name="a-product-receipt-voucher-number-is-consumed-even-if-no-financial-voucher-is-generated-during-product-receipt"></a>Код операции прихода продукта потребляется даже в том случае, если финансовая операция во время поступления продуктов не создается.

Если для параметра **Начисление задолженности при поступлении продуктов** задано значение *Нет* для группы моделей номенклатуры, разноска в главную книгу производиться не будет. Однако для учета в субкниге регистрируется физическое событие, а для этого события требуется код операции. Этот код операции является кодом операции, на который имеются ссылки в складских проводках.

Рекомендуется установить для параметра **Начисление задолженности при поступлении продуктов** значение *Да*, как описано в следующей записи блога: [Разноска накладных расходов во время получения продукта](https://cloudblogs.microsoft.com/dynamics365/no-audience/2014/11/11/post-misc-charges-at-time-of-product-receipt/).

## <a name="the-post-to-charge-account-in-ledger-setting-isnt-turned-on"></a>Параметр "Выполнить разноску на счет накл. расходов в ГК" не включен.

### <a name="issue-description"></a>Описание проблемы

Эта проблема возникает, когда по заказу на покупку выставляется накладная, если параметр **Выполнить разноску на счет накл. расходов в ГК** имеет значение *Да* на вкладке **Накладная** на странице **Параметры модуля расчетов с поставщиками**.

### <a name="reproduce-the-issue"></a>Воспроизведение проблемы

Следующая процедура показывает один из способов воспроизведения проблемы.

1. Перейдите в раздел **Расчеты с поставщиками \> Настройка \> Параметры расчетов с поставщиками**.
1. На вкладке **Накладная** установите для параметра **Выполнить разноску на счет накл. расходов в ГК** значение *Да*.
1. Выберите **Управление запасами \> Настройка \> Разноска \> Разноска**.
1. На вкладке **Заказ на покупку** убедитесь, что удалены все строки в расходах на покупку для продукта.
1. Перейдите в раздел **Расчеты с поставщиками \> Заказы на покупку \> Все заказы на покупку**.
1. Создание заказа на покупку. В поле **Счет поставщика** выберите *1001 Офисные принадлежности ACME*.
1. Добавьте строку заказа на покупку со следующими параметрами:

    - **Код номенклатуры:** *D0011 лазерный проектор*
    - **Сайт:** *1*
    - **Склад:** *11*
    - **Количество:** *4*

1. В области действий на вкладке **Покупка** в группе **Действие** выберите **Подтвердить**.
1. В области действий на вкладке **Получить** в группе **Создать** выберите **Поступление продуктов**.
1. В диалоговом окне **Разноска поступления продуктов** в поле **Поступление продукта** введите произвольный номер, затем выберите **ОК**.
1. На панели операций на вкладке **Накладная** в группе **Создать** выберите **Накладная**.
1. В поле **Номер** введите произвольный номер в качестве номера накладной.
1. Обновите статус сопоставления и выполните разноску.
1. Обратите внимание, что теперь при создании накладной из заказа на покупку появляется следующая ошибка: "Номер счета для типа проводки расходов на закупку продукта не существует".

### <a name="issue-resolution"></a>Устранение проблемы

Это зависит от настроек параметров для накладных и групп накладных. Дополнительные сведения см. в следующей записи блога: [Учет накладных расходов на покупку и изменение запасов](https://cloudblogs.microsoft.com/dynamics365/no-audience/2014/12/15/accounting-for-purchase-charge-and-stock-variation/).
