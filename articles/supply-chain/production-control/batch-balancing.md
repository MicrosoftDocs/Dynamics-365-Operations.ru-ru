---
title: Балансировка партий
description: В этом разделе описывается процесс балансировки партий.
author: johanhoffmann
manager: tfehr
ms.date: 01/04/2021
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: BOMTable, WHSReservationHierarchy, WHSInventTableReservationHierarchy
audience: Application User
ms.reviewer: kamaybac
ms.custom: 1705903
ms.assetid: 427e01b3-4968-4cff-9b85-1717530f72e4
ms.search.region: Global
ms.author: johanho
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 8.0.0
ms.openlocfilehash: f9216a77ebcf23ef3f732a8c3cb17a911f8a3851
ms.sourcegitcommit: eaf330dbee1db96c20d5ac479f007747bea079eb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/15/2021
ms.locfileid: "5246461"
---
# <a name="batch-balancing"></a>Балансировка партий

[!include [banner](../includes/banner.md)]

В этом разделе описывается, как поддерживается процесс балансировки партий.

Дополнительные сведения см. в [видео по балансировке партий](https://www.youtube.com/watch?v=4SNLWsU9KyI&feature=youtu.be).

В процессе балансировки партий рассчитывается количество ингредиентов, которые будут использоваться в производственной партии, на основе концентрации активных ингредиентов в выбранных партиях продукта.

## <a name="products-that-have-an-active-ingredient"></a>Продукты, которые имеют активный ингредиент

Продукт может быть определен с помощью концентрации его активного ингредиента. Активный ингредиент продукта моделируется с помощью атрибута партии конкретного продукта, который имеет минимальное значение, максимальное значение и целевой уровень.

Целевой уровень атрибута партии представляет расчетный процент активного ингредиента в продукте. Минимальное и максимальное значения представляют допустимое отклонение от целевого уровня. Они могут использоваться, например, как допустимое отклонение для пакетов в поступлении продукта.

Продукт может иметь только один активный ингредиент. Чтобы задать активный ингредиент продукта, сначала нужно определить атрибут партии конкретного продукта. Затем необходимо связать этот атрибут как базовый атрибут продукта.

На уровне продукции необходимо также указать, как уровень активного ингредиента для партии продукта должен быть записан: как часть процесса прихода покупки или как часть процесса заказа для контроля качества.

Чтобы связать базовый атрибут с продуктом необходима следующая настройка:

- Продукт должен быть контролируемым по партиям. Чтобы сделать продукт контролируемым по партиям, необходимо назначить группу аналитик отслеживания для продукта с активной аналитикой партии.

- Атрибут, который показывает уровни ингредиента, должен быть определен как атрибут партии конкретного продукта для продукта.

Чтобы найти и изменить фактическое значение активного ингредиента для партии:
1. Перейдите в раздел **Управление запасами \> Запросы и отчеты \> Аналитики отслеживания \> Партии**.
1. Выберите номер партии из сетки.
1. На панели действий откройте вкладку **Просмотр** и затем выберите **Атрибуты складской партии**.

## <a name="ingredient-types-and-how-they-interact-in-the-batch-balancing-process"></a>Типы ингредиентов и их взаимодействие в процессе балансировки партий

Строка формулы, которая создается, может иметь один из этих типов ингредиента:

- None
- Активен
- Компенсация
- Заполнил

В оставшейся части этого раздела приводятся примеры, которые показывают, как работает каждый тип ингредиента. Примеры основаны на следующей формуле, в которой общий размер партии равен 100 литрам.

| Тип ингредиента | Номер номенклатуры | Количество в строке формулы | Единица |
|---|---|---|---|
| None | A | 20 | Литры |
| Активные сотрудники | млрд | 30 | Литры |
| Компенсация | C | 10 | Литры |
| Заполнил | Д | 40 | Литры |

В следующей таблице представлен обзор результатов каждого примера.

| Номер номенклатуры | Тип ингредиента | Предп. количество | Сбалансированное количество | Активное количество | Единица | Базовое значение |
|---|---|---|---|---|---|---|
| A | None | 20 | 20 | | Литры | |
| Б | Активен | 30 | 25,71 | 9,00 | Литры | 30.00 |
| C | Компенсация | 10 | 14.72 | | Литры | |
| Д | Заполнил | 40 | 39.57 | | Литры | |

### <a name="active-ingredients"></a>Активные ингредиенты

При добавлении продукта, имеющего базовый атрибут, в строку формулы он называется *активным ингредиентом* формулы. Заказы партий, содержащие формулы, которые включают активные ингредиенты, могут использоваться для процесса балансировки партий. Для каждого ингредиента в формуле процесс балансировки партий оценивает количество, необходимое для производства продукта. Оценка количеств основана на концентрации активных ингредиентов в выбранных партиях.

#### <a name="active-ingredient-example"></a>Пример активного ингредиента

Ингредиент B имеет базовый атрибут X и целевой уровень 30, и он включен в формулу, которая требует 30 литров ингредиента B на каждые 100 литров продукта. Создается заказ партии, который имеет размер партии, равный 100 литрам. Запускается заказ партии, и во время процесса балансировки партий пользователь выбирает партию ингредиента B с уровнем удельной активности 35. Поскольку уровень удельной активности, равный 35, выше, чем целевой уровень 30, сбалансированное количество ингредиента B уменьшается на основе отношения уровня удельной активности к целевому уровню партии, который умножается на оцененное количество. Расчет сбалансированного количества выглядит следующим образом:

(30 ÷ 35) × 30 литров = 25,71 литров

### <a name="none-ingredients"></a>Нет ингредиентов

Если при применении процесса балансировки партии **Тип ингредиента** имеет значение *Нет*, оцененное количество и сбалансированное количество в строке формулы и в заказе партии совпадают.

#### <a name="none-ingredient-example"></a>Нет активного ингредиента

Ингредиент A назначается ингредиенту типа *Нет* и добавляется в формулу для готовой продукции. Формула требует 10 литров ингредиента A на каждые 100 литров готового продукта. Если заказ партии требует 200 литров, оцененное количество и сбалансированное количество ингредиента A рассчитываются как 20 литров.

### <a name="compensating-ingredients"></a>Компенсирующие ингредиенты

Компенсирующий ингредиент может смещать или дополнять эффект активного ингредиента в продукте. Таким образом, количество компенсирующего ингредиента, которое будет потреблено, зависит от доли продукта:

- **Противоположный эффект** — если количество активного ингредиента больше, чем ожидалось, необходимо добавить меньше компенсирующего ингредиента.

- **Дополняющий эффект** — если количество активного ингредиента меньше, чем ожидалось, необходимо добавить больше компенсирующего ингредиента.

Связь между активным ингредиентом и дополняющим ингредиентом настраивается на странице **Принцип компенсации**.

Выполните эти шаги для настройки связей между ингредиентами.

1. Выберите **Управление сведениями о продукте \> Спецификации и формулы \> Формулы**.
1. Откройте строку формулы, а затем выберите **Ингредиенты**, чтобы открыть страницу **Принцип компенсации**.
1. Выберите строку, которая представляет принцип компенсации, затем выберите активный ингредиент для компенсации.

В принципе компенсации также вводится положительный или отрицательный коэффициент компенсации, чтобы указать степень компенсации и принцип компенсации: противоположный или дополняющий. Положительный коэффициент означает дополняющий эффект, а отрицательный коэффициент означает противоположный эффект.

#### <a name="compensating-ingredient-example"></a>Пример компенсирующего ингредиента

Ингредиент B является активным ингредиентом с базовым атрибутом X и целевым уровнем 30. Он входит в формулу, которая требует 30 литров ингредиента B на каждые 100 литров продукта. Ингредиент C является компенсирующим ингредиентом, и количество 10 единиц входит в эту же формулу. Настроен коэффициент компенсации 1,10 для принципа компенсации. Таким образом, сбалансированное количество компенсирующего ингредиента будет уменьшено на разницу между сбалансированным количеством активного ингредиента и оценкой требуемого количества, умноженной на 1,10.

В примере для типа ингредиента *Активный* сбалансированное количество необходимого активного ингредиента было рассчитано как 25,71, а оценка требуемого количества была вычислена как 30. В этом случае сбалансированное количество компенсирующего ингредиента будет рассчитываться следующим образом:

1. Определяется разница между оценкой и сбалансированным количеством:  
    25,71 – 30 = –4,29

1. Результат умножается на коэффициент компенсации:  
    4,29 × 1,10 = –4,72

1. Оцененное количество компенсации уменьшается на –4,72, чтобы определить сбалансированное компенсирующее количество:  
    10 – (–4,72) = 14,72

Поскольку 1,10 — это положительный коэффициент компенсации, этот принцип компенсации действует дополняющий эффект. В этом случае активный ингредиент обладает большей удельной активностью, чем ожидалось. Поэтому требуется больше компенсирующего ингредиента.

### <a name="filler-ingredients"></a>Ингредиент-наполнитель

*Ингредиент-наполнитель* — это нейтральный ингредиент, который используется для достижения желаемого выходного количества готового продукта. Корректировки количества наполнителя вычисляются на основании отклонений количества активного ингредиента и компенсирующего ингредиента по сравнению со стандартным количеством.

#### <a name="filler-ingredient-example"></a>Пример ингредиента-наполнителя

Вы задали формулу продукта, которая включает в себя ингредиенты A, B, C и D для размера формулы 100 литров. Вы рассчитали сбалансированное количество всех типов ингредиентов, кроме типа ингредиента *Наполнитель*, используемого в одной строке.
Сбалансированное количество ингредиента-наполнителя вычисляется как разница между объемом партии в 100 литров и суммой ингредиентов A, B и C:

100 – (20 + 25,71 + 14,72) = 39,57

## <a name="the-batch-balancing-process"></a>Процесс балансировки партии

Процесс балансировки партий выполняется со страницы **Балансировка партии**.
Выберите **Управление затратами \> Партионные заказы**, затем на вкладке **Процесс** выберите **Балансировка партий**. Балансировка партий доступна для заказов партий, которые имеют статус **Начато**.

В общем случае балансировка партий может применяться к заказам партий, если в формуле содержится хотя бы одна строка формулы, где **Тип ингредиента** имеет значение *Активный*. (Исключение из этого правила см. в разделе "Заказы партии, к которым не применяется балансировка партий" далее в этом разделе.)

Процесс балансировки партий можно разделить на два подпроцесса:

1. Балансировать составляющие партии
1. Проверка и запуск формулы в производство

### <a name="balance-batch-ingredients"></a>Балансировать составляющие партии

В подпроцессе балансировки ингредиентов в партии рассчитывается количество ингредиентов, которые будут использоваться в производственной партии, на основе выбранных партий, имеющих активные ингредиенты. Как правило, расчет может быть выполнен только в том случае, если существует полное покрытие для всех ингредиентов. Невозможно выполнить балансировку только части партии, производство которой задано в заказе партии.

> [!NOTE]
> Невозможно сохранять вычисление и затем выполнить процесс балансировки партии позже. Если закрыть страницу **Балансировка партий**, необходимо повторить расчет для завершения процесса.

### <a name="confirm-and-release-the-formula"></a>Проверка и запуск формулы в производство

После расчета количеств ингредиентов можно проверить формулу и запустить ее в производство. Процесс запуска в производство различается в зависимости от того, включены ли для продуктов процессы управления складом:

- Если продукт активирован для процессов управления складом, строка формулы запускается в производство на склад в соответствии с принципами процесса управления складом. Строка формулы будет запущена в производство в количествах, которые соответствуют сбалансированным количествам, и она запускается в производство для определенных партий, которые выбраны для активных ингредиентов.

    > [!NOTE]
    > Строки формулы могут быть запущены в производство на склад только как часть процесса балансировки партий. Хотя существуют другие параметры для выпуска материалов для производства на склад, эти параметры не могут использоваться для строк формулы.

- Если продукт не поддерживает процессы управления складом, после подтверждения и запуск в производство формулы для продукта создается отгрузочная накладная для производства.

В одной формуле можно объединить продукты, для которых включены процессы управления складом, и продукты, для которых процессы управления складом не включены. Когда два вида продуктов включены в одну формулу, продукты, для которых включены процессы управления складом, запускаются в производство для склада. Для продуктов, для которых не включены процессы управления складом, после подтверждения и запуска в производство создается отгрузочная накладная.

### <a name="batch-orders-that-arent-applicable-for-batch-balancing"></a>Заказы партий, для которых не применяется балансировка партий

Существует два исключения из правила, что к заказам партий применима балансировка партий, если в формуле содержится хотя бы одна строка формулы, где **Тип ингредиента** имеет значение *Активный*.

1. Если формула содержит активный ингредиент для продукта, для которого включены процессы управления складом, но номер партии меньше значения местоположения в иерархии резервирования, к заказу партии не применима балансировка партий.
1. Если единица измерения формулы отлична от единицы измерения запасов для активного ингредиента, заказ партии не применяется для балансировки партий.

Заказ партии, к которому не применима балансировки партий, проходит через обычный цикл процесса для заказов партий.


[!INCLUDE[footer-include](../../includes/footer-banner.md)]