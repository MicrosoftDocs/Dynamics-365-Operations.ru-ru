---
title: Конструктор формул
description: В этом разделе описывается использование конструктора формул для анализа и поддержания формул в виде дерева.
author: cvocph
manager: tfehr
ms.date: 06/01/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: PlanActivity, ReqSupplyDemandSchedule
audience: Application User
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: ''
ms.author: kamaybac
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: f14a536cd2860a290ac90469907ded5de26e1991
ms.sourcegitcommit: eaf330dbee1db96c20d5ac479f007747bea079eb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/15/2021
ms.locfileid: "5246221"
---
# <a name="formula-designer"></a>Конструктор формул

[!include [banner](../includes/banner.md)]

В этом разделе описывается использование конструктора формул для анализа и поддержания формул в виде дерева.

При открытии страницы **Конструктор формул** со страницы **Выпущенные продукты** дерево в левой области отображает список побочных продуктов и иерархию ингредиентов для выпущенного продукта. Структура является производной от иерархии формул, которые активны и утверждены для выбранной номенклатуры и ее ингредиентов, сайта заказа по умолчанию для номенклатуры и фактической даты.

Щелкните **Настройка**, чтобы выбрать различных конфигураций и определить, какие сведения отображать на ветках дерева.

Щелкните **Фильтр**, чтобы изменить изначальный выбор в представлении. Если задан принцип отображения как **Выбрано/активно** или **Выбрано**, вы можете выбрать отдельную формулу или версии маршрута для использования в представлении. Вы можете выбрать неодобренные и неактивные версии формул, чтобы показывать или вести конструктор формул.  

> [!NOTE]
> Если вы откроете страницу **Конструктор формул** на странице со списком **Спецификации**, в нем не будет показаны сведения по маршруту. В настоящее время выбор версии формулы или маршрута применяется ко всем экземплярам конструктора формул.  

Следующие разделы описывают функциональность, которая доступна в Конструкторе спецификаций.

## <a name="analyze-a-formula-structure-by-using-the-formula-designer"></a>Анализ структуры формулы с помощью конструктора формул
Конструктор формул имеет два раздела:

-   Древовидное представление структуры формулы.
-   Раздел сведений, в котором показаны сведения выбранных данных. Когда вы выберете узел в древовидном представлении, экспресс-вкладки в разделе сведений обновляются в соответствии с этим узлом:
    -   **Сведения строки формулы** — сведения о строке формулы, выбранной в древовидном представлении.
    -   **Данные номенклатуры** — сведения о главной номенклатуре или номенклатуре, которая используется в выбранном узле. Вы можете щелкнуть **Изменить выпущенный продукт** для ведения выбранной номенклатуры.
    -   **Формула** — заголовок формулы, связанной с выбранным узлом.
    -   **Маршрут** — заголовок маршрута, который относится к выбранному узлу.
    -   **Операции маршрута** — предварительный просмотр операций для маршрута. Когда выбрана строка спецификации (BOM), назначенная для конкретной операции, операция помечается как **Компонент, необходимый для операций**.

## <a name="select-a-formula-and-route"></a>Выбор формулы и маршрута
Фильтр, который применяется для формулы и маршрута, показан в заголовке конструктора формул. Вы можете изменить фильтр в диалоговом окне **Фильтр**. Следующая таблица описывает поля в диалоговом этом окне.

<table>
<thead>
<tr class="header">
<th>Поле</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Аналитики продуктов</td>
<td>Если выбранный готовый продукт является шаблоном продукта, можно определить активные аналитики продукта для главного выделения. Обратите внимание, что при открытии конструктора формул для продукта, который не является шаблоном продукта, аналитики продукта не могут быть выбраны в диалоговом окне <strong>Фильтр</strong>.</p></td>
</tr>
<tr class="even">
<td>Узел</td>
<td>Измените сайт, для которого отображается дерево ингредиента. Сайт по умолчанию — является сайтом запасов по умолчанию для складируемой номенклатуры.</td>
</tr>
<tr class="odd">
<td>Принцип отображения</td>
<td><p>Выберите принцип отображения версии, применимый для текущей структуры формулы и текущего маршрута.</p>
<ul>
<li>Если в качестве принципа отображения установлено значение <strong>Активно</strong> или <strong>Выбрано/активно</strong>, ищется допустимая версия формулы или маршрута для данной даты.</li>
<li>Когда принцип задан как <strong>Выбрано/активно</strong> или <strong>выбрано</strong>, вы можете выбрать версию формулы или версию маршрута, щелкнув <strong>Формула</strong> &gt; <strong>Версии формулы</strong> или <strong>Маршрут</strong> &gt; <strong>Версии маршрута</strong>.</li>
</ul></td>
</tr>
<tr class="even">
<td>Дата версии</td>
<td>Ввод даты версии для формулы и маршрута. Версия служит для идентификации версии формулы, которая должна использоваться на конкретную дату в соответствии с тем, как это определено датами версий в настройке версий-формул.</td>
</tr>
<tr class="odd">
<td>Количество "От"</td>
<td>Фильтруйте версии путем выбора конкретного количества &quot;от&quot;. Если задано значение, можно выбрать разные версии формулы и маршрута.</td>
</tr>
<tr class="even">
<td>Показывать действительные</td>
<td>Если этот флажок установлен, в древовидной структуре отображаются только строки формулы с допустимыми датами. Щелкните правой кнопкой мыши или выполните двойной щелчок на строке формулы, чтобы открыть страницу <strong>Изменить строку формулы</strong>, где можно увидеть даты допустимости для этой строки формулы.</td>
</tr>
</tbody>
</table>

Когда вы используете конструктор формул для того, чтобы просмотреть или редактировать формулы, которые состоят из одного или нескольких уровней виртуализации, маршрут, который связан с верхней номенклатурой, обычно распространяется на всю иерархию формулы. Чтобы упростить обзор, вы можете зафиксировать маршрут высшего уровня, щелкнув **Вид** &gt; **Блокир. маршрут**. Чтобы разблокировать маршрут, щелкните **Вид** &gt; **Разблокировать маршрут**.

## <a name="add-and-edit-formulas-and-formula-lines"></a>Добавление и изменение формул и строк формул
Используйте функции **Строки спецификации** или **Формула**, чтобы изменить строки формулы или формулу. Когда вы выбираете узел в дереве, тип узла определяет, какие функции доступны.

| Функция                            | описание                                                                                               | Тип и условия узла |
|-------------------------------------|-----------------------------------------------------------------------------------------------------------|--------------------------|
| Строки спецификации &gt; Изменить                 | Раскройте диалоговое окно, где вы можете редактировать атрибуты строк формулы.                                         | Эта функция доступна, когда выбран узел строки формулы. |
| Строки спецификации &gt; Удалить               | Удалите строку формулы для выбранной формулы.                                                          | Эта функция доступна, когда строка формулы выбрана и формула не заблокирована для редактирования. |
| Строки спецификации &gt; Добавить перед строкой      | Откройте диалоговое окно, где вы можете выбрать вариант продукта для того, чтобы включить перед выбранной строкой формулы.     | Эта функция доступна, когда выбран узел строки формулы. |
| Строки спецификации &gt; Добавить в спецификацию компонента | Откройте диалоговое окно, где вы можете выбрать вариант продукта для того, чтобы включить в конце выбранной формулы.   | Эта функция доступна, когда у выбранного узла есть выбранная формула. Если эта функция недоступна, то версия формулы может отсутствовать для выбранного варианта номенклатуры. В этом случае вы можете щелкнуть **Формула** &gt; **Создать версию**, чтобы создать отсутствующую версию для выбранного узла. |
| Строки спецификации &gt; Добавить после строки       | Откройте диалоговое окно, где вы можете выбрать вариант продукта для того, чтобы включить после выбранной строки формулы.      | Эта функция доступна, когда выбран узел строки формулы. |
| Формула &gt;Создание версии         | Создайте новую версию формулы или формулу для варианта продукта выбранного узла.                     | Эта функция доступна, когда выбранная строка формулы связана с номенклатурой с типом продукции **Спецификация** или **Формула**. |
| Формула &gt; Расчет            | Раскройте диалоговое окно, где вы можете выполнить расчет стоимости или цены продажи для выбранного варианта продукта. | Эта функция доступна, когда выбранный узел связан с версией формулы. |
| Формула &gt; Проверка                  | Утвердите и проверьте выбранную формулу.                                                                  | Эта функция доступна, когда выбранный узел связан с версией формулы. |

## <a name="configuring-the-tree-view"></a>Настройка древовидного представления
Щелкните **Настройка** для настройки информации, отображаемой в древовидном представлении конструктора формулы.


| Группа полей |                                                                          описание                                                                          |
|-------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------|
|     Спецификация     | Используйте флажки, чтобы выбрать критерии, которые показываются в древовидной структуре. Выбранные критерии отображаются в нижней части обеих вкладок конструктора формул. |
|    Маршрут    |                                           Используйте флажки, чтобы выбрать критерии, которые показываются для маршрутов.                                           |



[!INCLUDE[footer-include](../../includes/footer-banner.md)]