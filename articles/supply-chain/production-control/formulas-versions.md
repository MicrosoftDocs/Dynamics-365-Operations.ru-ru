---
title: "Формулы и версии формул"
description: "В этой теме приведена информация о формулах и версиях формул. Формула определяет материалы, ингредиенты и результаты определенного процесса в процессе производства. Формулы используются для планирования и производства продуктов в непрерывном производстве."
author: cvocph
manager: AnnBe
ms.date: 09/12/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
ms.search.form: PlanActivity, ReqSupplyDemandSchedule
audience: Application User
ms.reviewer: yuyus
ms.search.scope: Core, Operations
ms.custom: 
ms.assetid: 
ms.search.region: Global
ms.search.industry: Manufacturing
ms.author: conradv
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.translationtype: HT
ms.sourcegitcommit: ceea24519d641c676521771cee274feb64ca7783
ms.openlocfilehash: 4cb9d1389dc2b1d71b9b18f755bbddc8e799f7ef
ms.contentlocale: ru-ru
ms.lasthandoff: 01/19/2018

---

# <a name="formulas-and-formula-versions"></a><span data-ttu-id="332d1-105">Формулы и версии формул</span><span class="sxs-lookup"><span data-stu-id="332d1-105">Formulas and formula versions</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="332d1-106">Формула определяет материалы, ингредиенты и результаты определенного процесса в процессе производства.</span><span class="sxs-lookup"><span data-stu-id="332d1-106">A formula defines the materials, ingredients, and outcomes of a specific process in process manufacturing.</span></span> <span data-ttu-id="332d1-107">Вместе с соответствующим маршрутом формула определяет весь процесс в непрерывном производстве.</span><span class="sxs-lookup"><span data-stu-id="332d1-107">Together with the corresponding route, the formula defines the whole process in process manufacturing.</span></span> <span data-ttu-id="332d1-108">Формулы используются для планирования и производства продуктов в непрерывном производстве.</span><span class="sxs-lookup"><span data-stu-id="332d1-108">Formulas are used to plan and produce products in process manufacturing.</span></span>

<span data-ttu-id="332d1-109">Формула состоит из ингредиентов и количеств, которые необходимы для производства конкретного количества номенклатуры-формулы.</span><span class="sxs-lookup"><span data-stu-id="332d1-109">A formula consists of the ingredients and quantities that are required in order to produce a specific quantity of a formula item.</span></span> <span data-ttu-id="332d1-110">В зависимости от выполняемой задачи доступ к функциональным возможностям формулы открывается с формы Управление запасами и складом или Управление сведениями о продукте.</span><span class="sxs-lookup"><span data-stu-id="332d1-110">Depending on the task that you perform, you can access formula functionality from Inventory and warehouse management or Product information management.</span></span>

## <a name="formulas-and-formula-lines"></a><span data-ttu-id="332d1-111">Формулы и строки формул</span><span class="sxs-lookup"><span data-stu-id="332d1-111">Formulas and formula lines</span></span>
<span data-ttu-id="332d1-112">Формула состоит из одной или нескольких строк формулы, которые определяют компоненты или номенклатуры, составляющие формулу.</span><span class="sxs-lookup"><span data-stu-id="332d1-112">A formula consists of one or more formula lines that identify the ingredients or items that make up the formula.</span></span> <span data-ttu-id="332d1-113">В строке формулы могут содержаться номенклатуры-спецификации, номенклатуры-формулы, номенклатуры, учитываемые в двух единицах измерения, приобретаемые номенклатуры, сопутствующие или побочные продукты.</span><span class="sxs-lookup"><span data-stu-id="332d1-113">A formula line can contain Bill of materials (BOM) items, formula items, catch-weight items, purchased items, co-products, or by-products.</span></span> <span data-ttu-id="332d1-114">Поскольку многие номенклатуры используются в нескольких продуктах, одна и та же номенклатура может использоваться во многих формулах.</span><span class="sxs-lookup"><span data-stu-id="332d1-114">Because many items are used in multiple products, an item can be used in more than one formula.</span></span>

<span data-ttu-id="332d1-115">Примером формулы может служить формула печенья с шоколадной крошкой.</span><span class="sxs-lookup"><span data-stu-id="332d1-115">An example of a formula is the formula for a chocolate chip cookie.</span></span> <span data-ttu-id="332d1-116">В этой формуле используется несколько строк ингредиентов, таких как мука, сахар, яйца, масло и шоколадная крошка.</span><span class="sxs-lookup"><span data-stu-id="332d1-116">The ingredients for this formula use multiple lines, such as flour, sugar, eggs, butter, and chocolate chips.</span></span> <span data-ttu-id="332d1-117">Формула печенья с шоколадной крошкой содержит ингредиенты, которые, весьма вероятно, используются и в других формулах.</span><span class="sxs-lookup"><span data-stu-id="332d1-117">The formula for the chocolate chip cookie contains ingredients that are likely used in other formulas.</span></span> <span data-ttu-id="332d1-118">В процессе изготовления печенья с шоколадной крошкой возможны остатки, такие как крошки либо отдельные недопеченные или перепеченные печенья.</span><span class="sxs-lookup"><span data-stu-id="332d1-118">While you make the chocolate chip cookies, there might be leftovers, such as crumbs, or some of the cookies might be overbaked or undercooked.</span></span> <span data-ttu-id="332d1-119">Эти номенклатуры могут быть настроены как сопутствующие или побочные продукты в зависимости от производственных операций.</span><span class="sxs-lookup"><span data-stu-id="332d1-119">These items can be set up as co-products or by-products, depending on the production operations.</span></span>

<span data-ttu-id="332d1-120">При создании строки формулы вы используете тип строки, чтобы указать, как система должна обрабатывать строку при запуске сводного планирования и производстве партионных заказов.</span><span class="sxs-lookup"><span data-stu-id="332d1-120">When you create a formula line, you use the line type to indicate how the system should handle the line when you run master planning and produce batch orders.</span></span> <span data-ttu-id="332d1-121">Каждый тип строки дает различные результаты.</span><span class="sxs-lookup"><span data-stu-id="332d1-121">Each line type gives a different result.</span></span> <span data-ttu-id="332d1-122">Следующая таблица содержит описание типов строк, которые вы можете выбирать:</span><span class="sxs-lookup"><span data-stu-id="332d1-122">The following table describes the line types that you can select.</span></span> 

| <span data-ttu-id="332d1-123">Tип строки</span><span class="sxs-lookup"><span data-stu-id="332d1-123">Line type</span></span>     | <span data-ttu-id="332d1-124">описание</span><span class="sxs-lookup"><span data-stu-id="332d1-124">Description</span></span>  |
|---------------|--------------|
| <span data-ttu-id="332d1-125">Элемент</span><span class="sxs-lookup"><span data-stu-id="332d1-125">Item</span></span>          | <span data-ttu-id="332d1-126">Выберите значение **Номенклатура**, когда номенклатура представляет собой сырье или полуфабрикат, отбираемые со склада или когда номенклатура является услугой.</span><span class="sxs-lookup"><span data-stu-id="332d1-126">Select **Item** when the item is a raw material or a semi-finished item that is picked from inventory or when the item is a service.</span></span> |
| <span data-ttu-id="332d1-127">Искусственный</span><span class="sxs-lookup"><span data-stu-id="332d1-127">Phantom</span></span>       | <span data-ttu-id="332d1-128">Выберите значение **Искусственный**, если вы хотите развернуть номенклатуры-формулы более низкого уровня, содержащиеся в строках формулы.</span><span class="sxs-lookup"><span data-stu-id="332d1-128">Select **Phantom** when you want to explode any lower-level formula items that are contained on formula lines.</span></span> <span data-ttu-id="332d1-129">При оценке партионного заказа и развертывании номенклатур-формул номенклатуры компонентов перечисляются как строки формулы в партионном заказе.</span><span class="sxs-lookup"><span data-stu-id="332d1-129">When you estimate the batch order, and the formula items are exploded, the component items are listed as formula lines on the batch order.</span></span> <span data-ttu-id="332d1-130">К тому же, в маршрут производства добавляются соответствующие маршруты.</span><span class="sxs-lookup"><span data-stu-id="332d1-130">Additionally, the corresponding routes are added to the production route.</span></span> <span data-ttu-id="332d1-131">Номенклатуры-формулы разворачиваются с использованием текущей конфигурации.</span><span class="sxs-lookup"><span data-stu-id="332d1-131">Formula items are exploded by using the current configuration.</span></span> <span data-ttu-id="332d1-132">При использовании строк типа **Искусственный** можно работать с конфигурациями производства и измерений, встречающимися на разных уровнях формулы.</span><span class="sxs-lookup"><span data-stu-id="332d1-132">When you use the **Phantom** line type, you can handle production and measurement configurations that occur at different formula levels.</span></span> <span data-ttu-id="332d1-133">Если выбрать значение **Искусственный** для продукта на экспресс-вкладке **Инжиниринг** страницы **Сведения об используемом продукте** и затем использовать этот продукт в формуле, тип строки формулы изменится на **Искусственный**.</span><span class="sxs-lookup"><span data-stu-id="332d1-133">If you select **Phantom** for a product on the **Engineer** FastTab of the **Released product details** page and then use this product in a formula, the line type of the formula line is changed to **Phantom**.</span></span> <span data-ttu-id="332d1-134">Невозможно выбрать значение **Искусственный** для номенклатуры, учитываемой в двух единицах измерения, или для номенклатур с типом производства **Сопутствующий продукт**, **Побочный продукт** или **Планирование номенклатуры**.</span><span class="sxs-lookup"><span data-stu-id="332d1-134">You can't select **Phantom** for a catch-weight item, or for items where the production type is **Co-product**, **By-product**, or **Planning item**.</span></span> |
| <span data-ttu-id="332d1-135">Фиксированное снабжение</span><span class="sxs-lookup"><span data-stu-id="332d1-135">Pegged supply</span></span> | <span data-ttu-id="332d1-136">Выберите **Фиксированное снабжение**, чтобы создать партионный заказ, производственный заказ, заказ на перемещение или заказ на покупку для ингредиента, содержащегося в строке формулы.</span><span class="sxs-lookup"><span data-stu-id="332d1-136">Select **Pegged supply** to create a batch order, production order, kanban, transfer order, or purchase order for the ingredient that is contained on the formula line.</span></span> <span data-ttu-id="332d1-137">Связанный заказ создается определяется на основании параметров заказа по умолчанию и типа производства ингредиента и создается при оценке партионного заказа.</span><span class="sxs-lookup"><span data-stu-id="332d1-137">The related order is determined based on the default order settings and the production type of the ingredient, and is created when you estimate the batch order.</span></span> <span data-ttu-id="332d1-138">Для партионного заказа резервируются требуемые количества ингредиентов.</span><span class="sxs-lookup"><span data-stu-id="332d1-138">The required ingredient quantities are reserved for the batch order.</span></span> |
| <span data-ttu-id="332d1-139">Поставщик</span><span class="sxs-lookup"><span data-stu-id="332d1-139">Vendor</span></span>        | <span data-ttu-id="332d1-140">Выберите значение **Поставщик**, если в производственном процессе используется субподрядчик и требуется создать вспомогательное производство или заказ на покупку для субподрядчика.</span><span class="sxs-lookup"><span data-stu-id="332d1-140">Select **Vendor** if the production process uses a subcontractor, and you want to create a sub-production or purchase order for the subcontractor.</span></span> <span data-ttu-id="332d1-141">Услуга или работа, выполняемая субподрядчиком, должна быть создана с использованием номенклатуры-формулы или номенклатуры-услуги.</span><span class="sxs-lookup"><span data-stu-id="332d1-141">The service or work that the subcontractor performs must be created by using a formula item or service item.</span></span> <span data-ttu-id="332d1-142">Эту номенклатуру можно присоединить к родительской номенклатуре в качестве строки формулы.</span><span class="sxs-lookup"><span data-stu-id="332d1-142">You can attach the item to the parent item as a formula line.</span></span> <span data-ttu-id="332d1-143">Маршрут должен содержать операцию, назначенную операционному ресурсу субподрядчика.</span><span class="sxs-lookup"><span data-stu-id="332d1-143">The route must contain an operation that is assigned to the subcontractor's operations resource.</span></span> <span data-ttu-id="332d1-144">Эта операция присоединяется к строке формулы с помощью поля **Номер операции**.</span><span class="sxs-lookup"><span data-stu-id="332d1-144">This operation is attached to the formula line by using the **Oper. No.**</span></span> <span data-ttu-id="332d1-145">.</span><span class="sxs-lookup"><span data-stu-id="332d1-145">field.</span></span> |

## <a name="formula-versions"></a><span data-ttu-id="332d1-146">Версии формулы</span><span class="sxs-lookup"><span data-stu-id="332d1-146">Formula versions</span></span>
<span data-ttu-id="332d1-147">При создании новой формулы необходимо сначала создать версию формулы, прежде чем добавлять номенклатуры строк формулы с их особыми характеристиками.</span><span class="sxs-lookup"><span data-stu-id="332d1-147">When you create a new formula, you must first create a formula version before you add the formula line items and their specific characteristics.</span></span> <span data-ttu-id="332d1-148">Каждая формула должна иметь хотя бы одну версию.</span><span class="sxs-lookup"><span data-stu-id="332d1-148">Every formula must have at least one version.</span></span> <span data-ttu-id="332d1-149">Кнопка **Утверждено** для версии формулы становится доступной только после успешного сохранения записи версии.</span><span class="sxs-lookup"><span data-stu-id="332d1-149">The **Approved** button on a formula version becomes available only after a version record has been successfully saved.</span></span> <span data-ttu-id="332d1-150">Каждая запись версии формулы связана с одним или несколькими сопутствующими и побочными продуктами, которые могут изготавливаться в процессе производства конечного продукта.</span><span class="sxs-lookup"><span data-stu-id="332d1-150">Each formula version record is associated with one or many co-products and by-products that can be produced as you produce the finished product.</span></span> <span data-ttu-id="332d1-151">Многие продукты могут изготавливаться из одних и тех же ингредиентов с разными размерами партий, с кратными количествами или с разным выходом.</span><span class="sxs-lookup"><span data-stu-id="332d1-151">Many products can be made from the same ingredients in different batch sizes, in multiples, or by using different yields.</span></span> <span data-ttu-id="332d1-152">Можно создать столько версий формулы, сколько нужно.</span><span class="sxs-lookup"><span data-stu-id="332d1-152">You can create as many versions of a formula as you require.</span></span>

<span data-ttu-id="332d1-153">Для управления несколькими активными версиями формулы используются диапазоны дат "действует с" или поля количества "с".</span><span class="sxs-lookup"><span data-stu-id="332d1-153">To manage multiple active formula versions, use effective date ranges or "from" quantity fields.</span></span> <span data-ttu-id="332d1-154">Несколько активных версий формулы может существовать только в том случае, если диапазон дат и количество "с" не перекрываются.</span><span class="sxs-lookup"><span data-stu-id="332d1-154">Multiple active formula versions can exist only if the date range and "from" quantity don't overlap.</span></span>

<span data-ttu-id="332d1-155">В отличие от спецификаций, где одна спецификация часто связана с множеством версий спецификации, обычно существует только по одной версии формулы на формулу.</span><span class="sxs-lookup"><span data-stu-id="332d1-155">Unlike BOMs, where one BOM is often associated with many BOM versions, only one formula version typically exists per formula.</span></span> <span data-ttu-id="332d1-156">Помните, что только одна версия формулы может быть активирована для аналитик покрытия и количества для данного продукта.</span><span class="sxs-lookup"><span data-stu-id="332d1-156">Remember that only one formula version can be activated for the coverage dimensions and quantity for a given product.</span></span> <span data-ttu-id="332d1-157">Однако может существовать несколько версий формулы по другим причинам, и вы можете вручную выбирать их при создании партионного заказа.</span><span class="sxs-lookup"><span data-stu-id="332d1-157">However, many formula versions might exist for other reasons, and you can manually select them when you create a batch order.</span></span>

## <a name="approve-and-activate-formulas-and-formula-versions"></a><span data-ttu-id="332d1-158">Утверждение и активация формул и версий формул</span><span class="sxs-lookup"><span data-stu-id="332d1-158">Approve and activate formulas and formula versions</span></span>
<span data-ttu-id="332d1-159">Формулы и версии формул должны быть утверждены, прежде чем их можно будет использовать для планирования и производства.</span><span class="sxs-lookup"><span data-stu-id="332d1-159">Formulas and formula versions must be approved before they can be used for planning and production.</span></span> <span data-ttu-id="332d1-160">Формулы обычно активируются перед их использованием.</span><span class="sxs-lookup"><span data-stu-id="332d1-160">Formulas are usually activated before they are used.</span></span> <span data-ttu-id="332d1-161">Тем не менее во время производства вы можете выбрать версию формулы, которая утверждена, но не активирована.</span><span class="sxs-lookup"><span data-stu-id="332d1-161">However, during production, you can select a formula version that is approved, but that isn't activated.</span></span>

<span data-ttu-id="332d1-162">Чтобы защитить формулу или версию формулы, можно установить параметры **Заблокировать изменение** и **Запретить отмену утверждения** на странице **Параметры управления производством**.</span><span class="sxs-lookup"><span data-stu-id="332d1-162">To help secure a formula or formula version, you can set the **Block editing** and **Block removal of approval** parameters on the **Production control parameters** page.</span></span>

<span data-ttu-id="332d1-163">Если установлен флажок **Заблокировать изменение** и формула утверждена, никакие поля в строках формулы не будут доступны для удаления и изменения.</span><span class="sxs-lookup"><span data-stu-id="332d1-163">If you select **Block editing**, and the formula is approved, no fields on the formula lines can be deleted or edited.</span></span> <span data-ttu-id="332d1-164">Однако если удалить утверждение формулы, строки формулы можно будет удалять и изменять.</span><span class="sxs-lookup"><span data-stu-id="332d1-164">However, if you remove the approval of the formula, you can delete and modify the formula lines.</span></span> <span data-ttu-id="332d1-165">Можно также создать новые формулы и новые версии формул.</span><span class="sxs-lookup"><span data-stu-id="332d1-165">You can also create new formulas and new formula versions.</span></span>

<span data-ttu-id="332d1-166">Если установить флажок **Запретить отмену утверждения**, отменить утверждение утвержденной формулы или версии формулы будет невозможно.</span><span class="sxs-lookup"><span data-stu-id="332d1-166">If you select **Block removal of approval**, you can't remove the approval of an approved formula or formula version.</span></span> <span data-ttu-id="332d1-167">Однако можно создать новые формулы и новые версии формул, а также можно отменить активацию версии формулы.</span><span class="sxs-lookup"><span data-stu-id="332d1-167">However, you can create new formulas and new formula versions, and you can remove the activation of the formula version.</span></span>

<span data-ttu-id="332d1-168">Можно добавить дополнительные уровни контроля, используя для этого возможности электронной подписи.</span><span class="sxs-lookup"><span data-stu-id="332d1-168">You can add more levels of control by using the electronic signature functionality.</span></span> <span data-ttu-id="332d1-169">Если пользователь настроен так, что во время утверждения формулы требуется электронная подпись, при активации формулы открывается страница **Подпись**.</span><span class="sxs-lookup"><span data-stu-id="332d1-169">When a user is set up so that an electronic signature is required at the time of formula approval, a **Signature** page appears when the formula is activated.</span></span> <span data-ttu-id="332d1-170">Пользователь должен пройти авторизацию, чтобы поставить электронную подпись, и сертификат должен успешно пройти проверку, прежде чем изменение будет зафиксировано.</span><span class="sxs-lookup"><span data-stu-id="332d1-170">The user must be authorized to sign electronically, and the certificate must be successfully validated before the change can be committed.</span></span> <span data-ttu-id="332d1-171">Если проверка подлинности подписи не может быть выполнена, утверждение или удаление утверждения отклоняется, и изменение, которое инициировало утверждение или удаление утверждения, возвращается в исходное состояние.</span><span class="sxs-lookup"><span data-stu-id="332d1-171">If the signature can't be authenticated, the approval or removal of approval is denied, and the change that initiated the approval or removal of approval is returned to its original state.</span></span>

## <a name="use-the-scalable-feature"></a><span data-ttu-id="332d1-172">Использование свойства масштабируемости</span><span class="sxs-lookup"><span data-stu-id="332d1-172">Use the Scalable feature</span></span>
<span data-ttu-id="332d1-173">Свойство масштабируемости доступно только в том случае, если для всех номенклатур-компонентов в формуле установлена настройка **Переменное потребление**.</span><span class="sxs-lookup"><span data-stu-id="332d1-173">The Scalable feature is available only if all the item components in the formula are set to **Variable consumption**.</span></span> <span data-ttu-id="332d1-174">Это свойство недоступно, если для номенклатур-компонентов установлена настройка **Фиксированное потребление** или **Потребление на шаге**.</span><span class="sxs-lookup"><span data-stu-id="332d1-174">The feature isn't available if item components are set to **Fixed consumption** or **Step consumption**.</span></span> <span data-ttu-id="332d1-175">При использовании свойства масштабируемости при изменении какого-либо ингредиента в формуле количество других выбранных ингредиентов корректируется.</span><span class="sxs-lookup"><span data-stu-id="332d1-175">When the Scalable feature is used, if you change an ingredient in a formula, the quantity of the other ingredients that you select is adjusted.</span></span> <span data-ttu-id="332d1-176">Размер формулы также регулируется.</span><span class="sxs-lookup"><span data-stu-id="332d1-176">The size of the formula is also adjusted.</span></span> <span data-ttu-id="332d1-177">Аналогично, если изменить размер формулы, количество всех масштабируемых ингредиентов изменится.</span><span class="sxs-lookup"><span data-stu-id="332d1-177">Likewise, if you change the formula size, the quantity of all scalable ingredients is changed.</span></span> <span data-ttu-id="332d1-178">Это свойство предназначено именно для создания и ведения формул.</span><span class="sxs-lookup"><span data-stu-id="332d1-178">This feature is intended specifically for formula creation and maintenance.</span></span> <span data-ttu-id="332d1-179">Оно не указывает, будет ли количество ингредиента масштабироваться вверх или вниз в партионном заказе.</span><span class="sxs-lookup"><span data-stu-id="332d1-179">It doesn't indicate whether the quantity of an ingredient will be scaled up or down on a batch order.</span></span>

## <a name="use-step-consumption"></a><span data-ttu-id="332d1-180">Использование ступенчатого потребления</span><span class="sxs-lookup"><span data-stu-id="332d1-180">Use Step consumption</span></span>
<span data-ttu-id="332d1-181">Ступенчатое потребление шаге исключает необходимость ввода для ингредиента количества на вкладке **Строка формулы**.</span><span class="sxs-lookup"><span data-stu-id="332d1-181">Step consumption eliminates the requirement that you must enter a quantity on the **Formula line** tab for an ingredient.</span></span> <span data-ttu-id="332d1-182">Вместо этого ступенчатое потребление настраивается так, что у него есть значение **Из серии** и значение **Количество**.</span><span class="sxs-lookup"><span data-stu-id="332d1-182">Instead, Step consumption is configured so that it has a **From series** value and a **Quantity** value.</span></span> <span data-ttu-id="332d1-183">Выбирается та информация из записи ступенчатого потребления для серии, которая удовлетворяет количеству в партионном заказе.</span><span class="sxs-lookup"><span data-stu-id="332d1-183">The information from the Step consumption per series record that satisfies the quantity on the batch order is selected.</span></span> <span data-ttu-id="332d1-184">Ступенчатое потребление удобно использовать, когда темп потребления не изменяется линейно с размером партионного заказа, и потребность увеличивается только при достижении определенного порогового количества.</span><span class="sxs-lookup"><span data-stu-id="332d1-184">Step consumption is useful when the consumption rate isn't linear with respect to the batch order size and only increases the requirement when a specific quantity threshold is met.</span></span> <span data-ttu-id="332d1-185">Чтобы включить эту функцию для новой формулы, в группе **Расчет потребления** измените настройку формулы для соответствующего ингредиента со значения **Стандартная** на значение **Шаг**.</span><span class="sxs-lookup"><span data-stu-id="332d1-185">To enable this feature for a new formula, under the **Consumption calculation** group, change the formula setting for the applicable ingredient from **Standard** to **Step**.</span></span> <span data-ttu-id="332d1-186">Этот метод потребления задается на вкладке **Настройка** страницы **Строка формулы**.</span><span class="sxs-lookup"><span data-stu-id="332d1-186">You specify this consumption method on the **Setup** tab of the **Formula line** page.</span></span>

