---
title: Формулы и версии формул
description: В этой теме приведена информация о формулах и версиях формул. Формула определяет материалы, ингредиенты и результаты определенного процесса в процессе производства. Формулы используются для планирования и производства продуктов в непрерывном производстве.
author: cvocph
manager: AnnBe
ms.date: 09/12/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: PlanActivity, ReqSupplyDemandSchedule
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Manufacturing
ms.author: conradv
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: bbffc298ff5d2442092f8f0c987b7e79a7934a84
ms.sourcegitcommit: 0f530e5f72a40f383868957a6b5cb0e446e4c795
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/29/2019
ms.locfileid: "350121"
---
# <a name="formulas-and-formula-versions"></a>Формулы и версии формул

[!include [banner](../includes/banner.md)]

Формула определяет материалы, ингредиенты и результаты определенного процесса в процессе производства. Вместе с соответствующим маршрутом формула определяет весь процесс в непрерывном производстве. Формулы используются для планирования и производства продуктов в непрерывном производстве.

Формула состоит из ингредиентов и количеств, которые необходимы для производства конкретного количества номенклатуры-формулы. В зависимости от выполняемой задачи доступ к функциональным возможностям формулы открывается с формы Управление запасами и складом или Управление сведениями о продукте.

## <a name="formulas-and-formula-lines"></a>Формулы и строки формул
Формула состоит из одной или нескольких строк формулы, которые определяют компоненты или номенклатуры, составляющие формулу. В строке формулы могут содержаться номенклатуры-спецификации, номенклатуры-формулы, номенклатуры, учитываемые в двух единицах измерения, приобретаемые номенклатуры, сопутствующие или побочные продукты. Поскольку многие номенклатуры используются в нескольких продуктах, одна и та же номенклатура может использоваться во многих формулах.

Примером формулы может служить формула печенья с шоколадной крошкой. В этой формуле используется несколько строк ингредиентов, таких как мука, сахар, яйца, масло и шоколадная крошка. Формула печенья с шоколадной крошкой содержит ингредиенты, которые, весьма вероятно, используются и в других формулах. В процессе изготовления печенья с шоколадной крошкой возможны остатки, такие как крошки либо отдельные недопеченные или перепеченные печенья. Эти номенклатуры могут быть настроены как сопутствующие или побочные продукты в зависимости от производственных операций.

При создании строки формулы вы используете тип строки, чтобы указать, как система должна обрабатывать строку при запуске сводного планирования и производстве партионных заказов. Каждый тип строки дает различные результаты. Следующая таблица содержит описание типов строк, которые вы можете выбирать: 

| Tип строки     | описание  |
|---------------|--------------|
| Элемент          | Выберите значение **Номенклатура**, когда номенклатура представляет собой сырье или полуфабрикат, отбираемые со склада или когда номенклатура является услугой. |
| Искусственный       | Выберите значение **Искусственный**, если вы хотите развернуть номенклатуры-формулы более низкого уровня, содержащиеся в строках формулы. При оценке партионного заказа и развертывании номенклатур-формул номенклатуры компонентов перечисляются как строки формулы в партионном заказе. К тому же, в маршрут производства добавляются соответствующие маршруты. Номенклатуры-формулы разворачиваются с использованием текущей конфигурации. При использовании строк типа **Искусственный** можно работать с конфигурациями производства и измерений, встречающимися на разных уровнях формулы. Если выбрать значение **Искусственный** для продукта на экспресс-вкладке **Инжиниринг** страницы **Сведения об используемом продукте** и затем использовать этот продукт в формуле, тип строки формулы изменится на **Искусственный**. Невозможно выбрать значение **Искусственный** для номенклатуры, учитываемой в двух единицах измерения, или для номенклатур с типом производства **Сопутствующий продукт**, **Побочный продукт** или **Планирование номенклатуры**. |
| Фиксированное снабжение | Выберите **Фиксированное снабжение**, чтобы создать партионный заказ, производственный заказ, заказ на перемещение или заказ на покупку для ингредиента, содержащегося в строке формулы. Связанный заказ создается определяется на основании параметров заказа по умолчанию и типа производства ингредиента и создается при оценке партионного заказа. Для партионного заказа резервируются требуемые количества ингредиентов. |
| Поставщик        | Выберите значение **Поставщик**, если в производственном процессе используется субподрядчик и требуется создать вспомогательное производство или заказ на покупку для субподрядчика. Услуга или работа, выполняемая субподрядчиком, должна быть создана с использованием номенклатуры-формулы или номенклатуры-услуги. Эту номенклатуру можно присоединить к родительской номенклатуре в качестве строки формулы. Маршрут должен содержать операцию, назначенную операционному ресурсу субподрядчика. Эта операция присоединяется к строке формулы с помощью поля **Номер операции**. . |

## <a name="formula-versions"></a>Версии формулы
При создании новой формулы необходимо сначала создать версию формулы, прежде чем добавлять номенклатуры строк формулы с их особыми характеристиками. Каждая формула должна иметь хотя бы одну версию. Кнопка **Утверждено** для версии формулы становится доступной только после успешного сохранения записи версии. Каждая запись версии формулы связана с одним или несколькими сопутствующими и побочными продуктами, которые могут изготавливаться в процессе производства конечного продукта. Многие продукты могут изготавливаться из одних и тех же ингредиентов с разными размерами партий, с кратными количествами или с разным выходом. Можно создать столько версий формулы, сколько нужно.

Для управления несколькими активными версиями формулы используются диапазоны дат "действует с" или поля количества "с". Несколько активных версий формулы может существовать только в том случае, если диапазон дат и количество "с" не перекрываются.

В отличие от спецификаций, где одна спецификация часто связана с множеством версий спецификации, обычно существует только по одной версии формулы на формулу. Помните, что только одна версия формулы может быть активирована для аналитик покрытия и количества для данного продукта. Однако может существовать несколько версий формулы по другим причинам, и вы можете вручную выбирать их при создании партионного заказа.

## <a name="approve-and-activate-formulas-and-formula-versions"></a>Утверждение и активация формул и версий формул
Формулы и версии формул должны быть утверждены, прежде чем их можно будет использовать для планирования и производства. Формулы обычно активируются перед их использованием. Тем не менее во время производства вы можете выбрать версию формулы, которая утверждена, но не активирована.

Чтобы защитить формулу или версию формулы, можно установить параметры **Заблокировать изменение** и **Запретить отмену утверждения** на странице **Параметры управления производством**.

Если установлен флажок **Заблокировать изменение** и формула утверждена, никакие поля в строках формулы не будут доступны для удаления и изменения. Однако если удалить утверждение формулы, строки формулы можно будет удалять и изменять. Можно также создать новые формулы и новые версии формул.

Если установить флажок **Запретить отмену утверждения**, отменить утверждение утвержденной формулы или версии формулы будет невозможно. Однако можно создать новые формулы и новые версии формул, а также можно отменить активацию версии формулы.

Можно добавить дополнительные уровни контроля, используя для этого возможности электронной подписи. Если пользователь настроен так, что во время утверждения формулы требуется электронная подпись, при активации формулы открывается страница **Подпись**. Пользователь должен пройти авторизацию, чтобы поставить электронную подпись, и сертификат должен успешно пройти проверку, прежде чем изменение будет зафиксировано. Если проверка подлинности подписи не может быть выполнена, утверждение или удаление утверждения отклоняется, и изменение, которое инициировало утверждение или удаление утверждения, возвращается в исходное состояние.

## <a name="use-the-scalable-feature"></a>Использование свойства масштабируемости
Свойство масштабируемости доступно только в том случае, если для всех номенклатур-компонентов в формуле установлена настройка **Переменное потребление**. Это свойство недоступно, если для номенклатур-компонентов установлена настройка **Фиксированное потребление** или **Потребление на шаге**. При использовании свойства масштабируемости при изменении какого-либо ингредиента в формуле количество других выбранных ингредиентов корректируется. Размер формулы также регулируется. Аналогично, если изменить размер формулы, количество всех масштабируемых ингредиентов изменится. Это свойство предназначено именно для создания и ведения формул. Оно не указывает, будет ли количество ингредиента масштабироваться вверх или вниз в партионном заказе.

## <a name="use-step-consumption"></a>Использование ступенчатого потребления
Ступенчатое потребление шаге исключает необходимость ввода для ингредиента количества на вкладке **Строка формулы**. Вместо этого ступенчатое потребление настраивается так, что у него есть значение **Из серии** и значение **Количество**. Выбирается та информация из записи ступенчатого потребления для серии, которая удовлетворяет количеству в партионном заказе. Ступенчатое потребление удобно использовать, когда темп потребления не изменяется линейно с размером партионного заказа, и потребность увеличивается только при достижении определенного порогового количества. Чтобы включить эту функцию для новой формулы, в группе **Расчет потребления** измените настройку формулы для соответствующего ингредиента со значения **Стандартная** на значение **Шаг**. Этот метод потребления задается на вкладке **Настройка** страницы **Строка формулы**.
