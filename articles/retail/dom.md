---
title: Распределенное управление заказами (DOM)
description: Этот раздел содержит сведения о функции распределенного управления заказами (DOM) в Dynamics 365 Retail.
author: josaw1
manager: AnnBe
ms.date: 10/14/2019
ms.topic: index-page
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.custom: ''
ms.assetid: ed0f77f7-3609-4330-bebd-ca3134575216
ms.search.region: global
ms.search.industry: Retail
ms.author: josaw
ms.search.validFrom: 2018-11-15
ms.dyn365.ops.version: ''
ms.openlocfilehash: 0ebac1c3f9f79ee49ae11a121a4a0dd3bd456c8f
ms.sourcegitcommit: bdbca89bd9b328c282ebfb681f75b8f1ed96e7a8
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/14/2019
ms.locfileid: "2578492"
---
# <a name="distributed-order-management-dom"></a><span data-ttu-id="47b45-103">Распределенное управление заказами (DOM)</span><span class="sxs-lookup"><span data-stu-id="47b45-103">Distributed order management (DOM)</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="47b45-104">В наше время предприятия розничной торговли стремятся находить индивидуальный подход к каждому клиенту, использовать различные каналы и делать процесс покупки максимально простым для клиента.</span><span class="sxs-lookup"><span data-stu-id="47b45-104">In the new paradigm for retail operations, retailers strive to provide personalized customer engagement, omni-channel experiences, and frictionless interactions.</span></span> <span data-ttu-id="47b45-105">Широкий выбор возможностей позволяет клиентам совершать покупки там, где им удобно.</span><span class="sxs-lookup"><span data-stu-id="47b45-105">Because so many choices are available, consumers will shop wherever they can have the most favorable experience.</span></span> <span data-ttu-id="47b45-106">Такие факторы, как наличие товара и цена, стали менее значимыми для многих покупателей.</span><span class="sxs-lookup"><span data-stu-id="47b45-106">In many cases, prices and products are no longer the top deciding factors for consumers.</span></span>

<span data-ttu-id="47b45-107">Чтобы процесс покупки был более удобным, предприятия розничной торговли должны в любой момент иметь полную информацию обо всех своих товарных запасах, по каким бы каналам ни продавались эти товары.</span><span class="sxs-lookup"><span data-stu-id="47b45-107">To help improve the customer experience, retailers must have visibility into their inventory in real time, across all their channels.</span></span> <span data-ttu-id="47b45-108">Целостное представление о запасах помогает оптимизировать выполнение заказов и логистику.</span><span class="sxs-lookup"><span data-stu-id="47b45-108">A single, holistic view of all the inventory can help optimize order fulfillment, allocation, and distribution.</span></span> <span data-ttu-id="47b45-109">Поэтому переход на систему распределенного управления заказами (DOM) становится все более важным шагом для предприятий розничной торговли.</span><span class="sxs-lookup"><span data-stu-id="47b45-109">Therefore, adoption and implementation of a distributed order management (DOM) system are becoming more imperative for retailers.</span></span>

<span data-ttu-id="47b45-110">Модель DOM позволяет оптимизировать выполнение заказов в рамках сложной сети систем и процессов.</span><span class="sxs-lookup"><span data-stu-id="47b45-110">DOM optimizes order fulfillment across a complex network of systems and processes.</span></span> <span data-ttu-id="47b45-111">В ее основе лежит единое глобальное представление запасов в пределах всей организации, помогающее эффективно управлять заказами, чтобы они доставлялись в срок и с минимальными затратами.</span><span class="sxs-lookup"><span data-stu-id="47b45-111">It relies on a single, global view of inventory across the whole organization to intelligently manage orders, so that they are fulfilled accurately and in a more cost-effective manner.</span></span> <span data-ttu-id="47b45-112">Благодаря большей эффективности цепочки поставок система DOM позволяет организации лучше удовлетворять ожидания клиентов.</span><span class="sxs-lookup"><span data-stu-id="47b45-112">By improving the efficiency of a retailer's supply chain, DOM helps the retailer better meet customer expectations.</span></span>

<span data-ttu-id="47b45-113">На следующем рисунке показан жизненный цикл заказа на продажу в системе DOM.</span><span class="sxs-lookup"><span data-stu-id="47b45-113">The following illustration shows the lifecycle of a sales order in a DOM system.</span></span>

<span data-ttu-id="47b45-114">![Жизненный цикл заказа на продажу в контексте DOM](./media/flow.png "Жизненный цикл заказа на продажу в контексте DOM")</span><span class="sxs-lookup"><span data-stu-id="47b45-114">![Sales order lifecycle in the context of DOM](./media/flow.png "Sales order lifecycle in the context of DOM")</span></span>

## <a name="set-up-dom"></a><span data-ttu-id="47b45-115">Настройка DOM</span><span class="sxs-lookup"><span data-stu-id="47b45-115">Set up DOM</span></span>

1. <span data-ttu-id="47b45-116">Перейдите в раздел **Администрирование системы \> Настройка \> Конфигурация лицензии**.</span><span class="sxs-lookup"><span data-stu-id="47b45-116">Go to **System administration \> Setup \> License configuration**.</span></span>
2. <span data-ttu-id="47b45-117">На вкладке **Конфигурационные ключи** разверните узел **Retail** узел, а затем установите флажок **Распределенное управление заказами**.</span><span class="sxs-lookup"><span data-stu-id="47b45-117">On the **Configuration keys** tab, expand the **Retail** node, and then select the **Distributed Order Management** check box.</span></span>
3. <span data-ttu-id="47b45-118">Последовательно выберите **Розничная торговля \> Распределенное управление заказами \> Настройка \> Параметры DOM**.</span><span class="sxs-lookup"><span data-stu-id="47b45-118">Go to **Retail \> Distributed order management \> Setup \> DOM parameters**.</span></span>
4. <span data-ttu-id="47b45-119">На вкладке **Общие** установите следующие значения.</span><span class="sxs-lookup"><span data-stu-id="47b45-119">On the **General** tab, set the following values:</span></span>

    - <span data-ttu-id="47b45-120">**Включить распределенное управление заказами** — **Да**.</span><span class="sxs-lookup"><span data-stu-id="47b45-120">**Enable distributed order management** – Set this option to **Yes**.</span></span>
    - <span data-ttu-id="47b45-121">**Подтвердить использование Карт Bing для DOM** — **Да**.</span><span class="sxs-lookup"><span data-stu-id="47b45-121">**Confirm Bing Maps usage for DOM** – Set this option to **Yes**.</span></span>

        > [!NOTE]
        > <span data-ttu-id="47b45-122">Для этого параметра можно установить значение **Да**, только если параметр **Включить Карты Bing** на вкладке **Карты Bing** страницы **Общие параметры розничной торговли** (**Розничная торговля \> Настройка центрального офиса \> Параметры \> Общие параметры розничной торговли**) также имеет значение **Да** и если в поле **Ключ карт Bing** указан действующий ключ.</span><span class="sxs-lookup"><span data-stu-id="47b45-122">You can set this option to **Yes** only if the **Enable Bing Maps** option on the **Bing Maps** tab of the **Retail shared parameters** page (**Retail \> Headquarters setup \> Parameters \> Retail shared parameters**) is also set to **Yes**, and if a valid key is entered in the **Bing Maps key** field.</span></span>

    - <span data-ttu-id="47b45-123">**Период хранения в днях** — укажите, как долго в системе должны сохранять планы выполнения, сгенерированные при запуске DOM.</span><span class="sxs-lookup"><span data-stu-id="47b45-123">**Retention period in days** – Specify how long the fulfillment plans that DOM runs generate are kept in the system.</span></span> <span data-ttu-id="47b45-124">Пакетное задание **Настройка задания удаления данных выполнения DOM** удаляет все планы выполнения, созданные ранее указанного здесь числа дней.</span><span class="sxs-lookup"><span data-stu-id="47b45-124">The **DOM fulfillment data deletion job setup** batch job will delete any fulfillment plan that is older than the number of days that you specify here.</span></span>
    - <span data-ttu-id="47b45-125">**Период отклонения (в днях)**  — укажите, сколько времени должно пройти, прежде чем отклоненную строку заказа можно будет назначить той же точке выполнения.</span><span class="sxs-lookup"><span data-stu-id="47b45-125">**Rejection period (in days)** – Specify how much time must pass before a rejected order line can be assigned to the same location.</span></span>

5. <span data-ttu-id="47b45-126">На вкладке **Решатель** установите следующие значения.</span><span class="sxs-lookup"><span data-stu-id="47b45-126">On the **Solver** tab, set the following values:</span></span>

    - <span data-ttu-id="47b45-127">**Максимальное число попыток автоматического выполнения** — укажите, сколько раз система DOM будет обработать строку заказа с помощью конкретной точки выполнения.</span><span class="sxs-lookup"><span data-stu-id="47b45-127">**Max auto-fulfillment attempts** – Specify how many times the DOM engine will try to broker an order line to a location.</span></span> <span data-ttu-id="47b45-128">Если обработать строку заказа с помощью точки выполнения за указанное число раз не удастся, эта строка будет помечена как исключение.</span><span class="sxs-lookup"><span data-stu-id="47b45-128">If the DOM engine can't broker an order line to a location in the specified number of attempts, it will flag the order line as an exception.</span></span> <span data-ttu-id="47b45-129">После этого строка будет пропускаться, пока ее статус не будет изменен вручную.</span><span class="sxs-lookup"><span data-stu-id="47b45-129">It will then skip that line in future runs until the status is manually reset.</span></span>
    - <span data-ttu-id="47b45-130">**Радиус области локального магазина** — введите значение.</span><span class="sxs-lookup"><span data-stu-id="47b45-130">**Local store region radius** – Enter a value.</span></span> <span data-ttu-id="47b45-131">Это поле помогает определить, как точки выполнения группируются, чтобы считаться одинаковыми с точки зрения расстояния.</span><span class="sxs-lookup"><span data-stu-id="47b45-131">This field helps determine how locations are grouped and considered equal in terms of distance.</span></span> <span data-ttu-id="47b45-132">Например, если ввести в это поле значение **100**, то каждый магазин или центр распределения в пределах 100 миль от адреса выполнения, будет считаться одинаковым по расстоянию.</span><span class="sxs-lookup"><span data-stu-id="47b45-132">For example, if you enter **100**, every store or distribution center within a 100-mile radius of the fulfillment address is considered equal in terms of distance.</span></span>
    - <span data-ttu-id="47b45-133">**Тип решателя** — выберите значение.</span><span class="sxs-lookup"><span data-stu-id="47b45-133">**Solver type** – Select a value.</span></span> <span data-ttu-id="47b45-134">В Retail доступно два типа решателя: **Рабочий решатель** и **Упрощенный решатель**.</span><span class="sxs-lookup"><span data-stu-id="47b45-134">Two solver types are released with Retail: **Production Solver** and **Simplified Solver**.</span></span> <span data-ttu-id="47b45-135">Для всех компьютеров, которые используются DOM (все серверы, входящие в группу DOMBatch) , следует выбирать **Рабочий решатель**.</span><span class="sxs-lookup"><span data-stu-id="47b45-135">For all machines that will run DOM (that is, all servers that are part of the DOMBatch group), **Production Solver** must be selected.</span></span> <span data-ttu-id="47b45-136">Для рабочего решателя требуется специальный лицензионный ключ, который по умолчанию развертывается в производственных средах.</span><span class="sxs-lookup"><span data-stu-id="47b45-136">The Production Solver requires the special license key that, by default, is licensed and deployed in production environments.</span></span> <span data-ttu-id="47b45-137">Для непроизводственных сред этот лицензионный ключ необходимо развертывать вручную.</span><span class="sxs-lookup"><span data-stu-id="47b45-137">For non-production environments, this license key must be manually deployed.</span></span> <span data-ttu-id="47b45-138">Чтобы развернуть лицензионный ключ вручную, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="47b45-138">To manually deploy the license key, follow these steps:</span></span>

        1. <span data-ttu-id="47b45-139">В Microsoft Dynamics Lifecycle Services откройте общую библиотеку активов, выберите тип актива **Модель** и загрузите файл **лицензии DOM**.</span><span class="sxs-lookup"><span data-stu-id="47b45-139">In Microsoft Dynamics Lifecycle Services, open the Shared asset library, select **Model** as the asset type, and download the **DOM license** file.</span></span>
        2. <span data-ttu-id="47b45-140">Запустите диспетчер служб IIS, щелкните правой кнопкой мыши **Веб-сайт AOSService** и выберите **Обзор**.</span><span class="sxs-lookup"><span data-stu-id="47b45-140">Start Microsoft Internet Information Services (IIS) Manager, right-click **AOSService website**, and then select **Explore**.</span></span> <span data-ttu-id="47b45-141">В проводнике Windows будет открыта папка **\<Корневая папку службы AOS\>\\webroot**.</span><span class="sxs-lookup"><span data-stu-id="47b45-141">A Windows Explorer window is opened at **\<AOS service root\>\\webroot**.</span></span> <span data-ttu-id="47b45-142">Запишите или скопируйте путь \<Корневая папка службы AOS\>, поскольку он понадобится на следующем шаге.</span><span class="sxs-lookup"><span data-stu-id="47b45-142">Make a note of the \<AOS Service root\> path, because you will use it in the next step.</span></span>
        3. <span data-ttu-id="47b45-143">Скопируйте файл конфигурации в папку **\<AOS Service root\>\\PackagesLocalDirectory\\DOM\\bin**.</span><span class="sxs-lookup"><span data-stu-id="47b45-143">Copy the configuration file in the **\<AOS Service root\>\\PackagesLocalDirectory\\DOM\\bin** directory.</span></span>
        4. <span data-ttu-id="47b45-144">Перейдите в клиент Retail Headquarters и откройте страницу **Параметры DOM**.</span><span class="sxs-lookup"><span data-stu-id="47b45-144">Go to the Retail Headquarters client, and open the **DOM parameters** page.</span></span> <span data-ttu-id="47b45-145">На вкладке **Решатель** в поле **Тип решателя** выберите **Рабочий решатель** и убедитесь, что никакие сообщения об ошибках не появляются.</span><span class="sxs-lookup"><span data-stu-id="47b45-145">On the **Solver** tab, in the **Solver type** field, select **Production solver**, and confirm that no error messages appear.</span></span>

        > [!NOTE]
        > <span data-ttu-id="47b45-146">Упрощенный решатель позволяет познакомиться с функциями DOM без развертывания специальной лицензии.</span><span class="sxs-lookup"><span data-stu-id="47b45-146">The Simplified Solver is provided so that retailers can try out the DOM feature without having to deploy the special license.</span></span> <span data-ttu-id="47b45-147">Организации не должны использовать упрощенный решатель в производственных средах.</span><span class="sxs-lookup"><span data-stu-id="47b45-147">Organizations should not use the Simplified Solver in production environments.</span></span>
        >
        > <span data-ttu-id="47b45-148">Возможности упрощенного решателя не отличаются от возможностей рабочего решателя, однако есть определенные ограничения по производительности (число обрабатываемых за один раз заказов или строк заказов) и оптимальности результатов (в некоторых случаях результаты для пакета заказов могут отличаться от оптимальных).</span><span class="sxs-lookup"><span data-stu-id="47b45-148">Although the Simplified Solver provides the same set of capabilities as the Production Solver, there are limitations as to performance (the number of orders and order lines that can be handled in a run) and convergence of results (a batch of orders might not yield the best result in some scenarios).</span></span>
     
6. <span data-ttu-id="47b45-149">Снова выберите **Розничная торговля \> Распределенное управление заказами \> Настройка \> Параметры DOM**.</span><span class="sxs-lookup"><span data-stu-id="47b45-149">Go back to **Retail \> Distributed order management \> Setup \> DOM parameters**.</span></span>
7. <span data-ttu-id="47b45-150">На вкладке **Номерные серии** назначьте нужные номерные серии различным объектам DOM.</span><span class="sxs-lookup"><span data-stu-id="47b45-150">On the **Number sequences** tab, assign the required number sequences to the various DOM entities.</span></span>

    > [!NOTE]
    > <span data-ttu-id="47b45-151">Чтобы это можно было сделать, необходимо предварительно определить номерные серии на странице **Номерные серии** (**Управление организацией \> Номерные серии \> Номерные серии**).</span><span class="sxs-lookup"><span data-stu-id="47b45-151">Before the number sequences can be assigned to the entities, they must be defined on the **Number sequences** page (**Organization administration \> Number sequences \> Number sequences**).</span></span>

8. <span data-ttu-id="47b45-152">Функция DOM поддерживает определение различных типов правил DOM, и организация может несколько правил в зависимости от своих бизнес-потребностей.</span><span class="sxs-lookup"><span data-stu-id="47b45-152">The DOM feature supports the definition of various types of DOM rules, and organizations can configure multiple rules, depending on their business needs.</span></span> <span data-ttu-id="47b45-153">Правила DOM можно определить для группы точек выполнения или отдельных точек выполнения, а также для конкретных продуктов, категорий продуктов и вариантов.</span><span class="sxs-lookup"><span data-stu-id="47b45-153">DOM rules can be defined for a group of locations or individual locations, and for a specific product category, product, or variant.</span></span> <span data-ttu-id="47b45-154">Чтобы создать группировку точек выполнения для правил DOM, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="47b45-154">To create the grouping of locations that must be used for the DOM rules, follow these steps:</span></span>

    1. <span data-ttu-id="47b45-155">Выберите **Розничная торговля \> Настройка канала \> Группы выполнения**.</span><span class="sxs-lookup"><span data-stu-id="47b45-155">Go to **Retail \> Channel setup \> Fulfillment groups**.</span></span>
    2. <span data-ttu-id="47b45-156">Выберите **Создать**, а затем введите название и описание новой группы.</span><span class="sxs-lookup"><span data-stu-id="47b45-156">Select **New**, and enter a name and description for the new group.</span></span>
    3. <span data-ttu-id="47b45-157">Нажмите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="47b45-157">Select **Save**.</span></span>
    4. <span data-ttu-id="47b45-158">Выберите **Добавить строку**, чтобы добавить в группу отдельную точку выполнения.</span><span class="sxs-lookup"><span data-stu-id="47b45-158">Select **Add line** to add a single location to the group.</span></span> <span data-ttu-id="47b45-159">Чтобы добавить несколько точек выполнения, выберите **Добавить строки**.</span><span class="sxs-lookup"><span data-stu-id="47b45-159">Alternatively, select **Add lines** to add multiple locations.</span></span>

9. <span data-ttu-id="47b45-160">Чтобы определить правила, выберите **Розничная торговля \> Распределенное управление заказами \> Настройка \> Управление правилами**.</span><span class="sxs-lookup"><span data-stu-id="47b45-160">To define rules, go to **Retail \> Distributed order management \> Setup \> Manage rules**.</span></span> <span data-ttu-id="47b45-161">В настоящее время поддерживаются следующие правила DOM.</span><span class="sxs-lookup"><span data-stu-id="47b45-161">The following DOM rules are currently supported:</span></span>

    - <span data-ttu-id="47b45-162">**Правило минимальных запасов** — это правило позволяет организации резервировать определенное количество продукта для целей, отличных от выполнения заказов.</span><span class="sxs-lookup"><span data-stu-id="47b45-162">**Minimum inventory rule** – This rule type lets organizations "ring fence" a specific quantity of a product for purposes other than order fulfillment.</span></span> <span data-ttu-id="47b45-163">Например, можно сделать так, чтобы система DOM учитывала при выполнении заказов не все запасы, находящиеся на складе,</span><span class="sxs-lookup"><span data-stu-id="47b45-163">For example, organizations might not want DOM to consider all the inventory that is available in a store for order fulfillment.</span></span> <span data-ttu-id="47b45-164">чтобы часть запасов оставалась для посетителей обычных магазинов.</span><span class="sxs-lookup"><span data-stu-id="47b45-164">Instead, they might want to reserve some inventory for walk-in customers.</span></span> <span data-ttu-id="47b45-165">Если используется такое правило, вы можете определить минимальные запасы для категории продуктов, конкретного продукта или варианта продукта в конкретной точке выполнения или группе точек.</span><span class="sxs-lookup"><span data-stu-id="47b45-165">When this rule type is used, you can define the minimum inventory to keep for a category of products, an individual product, or a product variant per location or group of locations.</span></span>
    - <span data-ttu-id="47b45-166">**Правило для приоритета точки выполнения** — это правило позволяет организации определять иерархию приоритета точек выполнения, которая будет использоваться при выполнении системой DOM заказов конкретных продуктов.</span><span class="sxs-lookup"><span data-stu-id="47b45-166">**Fulfillment location priority rule** – This rule type lets organizations define a hierarchy of locations to establish the priority that the DOM engine considers when it tries to identify fulfillment locations for specific products.</span></span> <span data-ttu-id="47b45-167">Допустимый диапазон приоритетов: от 1 до 10, где 1 — самый высокий, а 10 — самый низкий приоритет.</span><span class="sxs-lookup"><span data-stu-id="47b45-167">The valid range of priorities is 1 through 10, where 1 is the highest priority and 10 is the lowest priority.</span></span> <span data-ttu-id="47b45-168">Точки выполнения с более высоким приоритетом рассматриваются в первую очередь.</span><span class="sxs-lookup"><span data-stu-id="47b45-168">Locations that have higher priority are considered before locations that have lower priority.</span></span> <span data-ttu-id="47b45-169">Если правило установлено как жесткое ограничение, заказы выполняются только из тех точек выполнения, которые заданы в правиле.</span><span class="sxs-lookup"><span data-stu-id="47b45-169">If the rule is defined as a hard constraint rule, orders are brokered only to locations that priorities are defined for.</span></span>
    - <span data-ttu-id="47b45-170">**Правило для частичных заказов** — это правило позволяет организации определить, возможно ли частичное выполнения заказов или строк заказов.</span><span class="sxs-lookup"><span data-stu-id="47b45-170">**Partial orders rule** – This rule lets organizations define whether an order or order lines can be partially fulfilled.</span></span> <span data-ttu-id="47b45-171">Доступны следующие параметры:</span><span class="sxs-lookup"><span data-stu-id="47b45-171">The following parameters are available:</span></span>

        - <span data-ttu-id="47b45-172">**Выполнять частичные заказы?**</span><span class="sxs-lookup"><span data-stu-id="47b45-172">**Fulfill partial orders?**</span></span> <span data-ttu-id="47b45-173">— Если этот параметр имеет значение **Да**, система DOM может выполнить только часть количества в строке заказа.</span><span class="sxs-lookup"><span data-stu-id="47b45-173">– If this option is set to **Yes**, DOM can fulfill only part of the quantity on an order line.</span></span> <span data-ttu-id="47b45-174">При этом происходит разделение строки заказа.</span><span class="sxs-lookup"><span data-stu-id="47b45-174">This partial fulfillment is achieved by splitting the order line.</span></span>
        - <span data-ttu-id="47b45-175">**Выполнять частичные строки?**</span><span class="sxs-lookup"><span data-stu-id="47b45-175">**Fulfill partial lines?**</span></span> <span data-ttu-id="47b45-176">— Если этот параметр имеет значение **Да**, система DOM может выполнять частичные количества в строках заказов.</span><span class="sxs-lookup"><span data-stu-id="47b45-176">– If this option is set to **Yes**, DOM can fulfill a partial quantity of order lines.</span></span> <span data-ttu-id="47b45-177">При этом происходит разделение строки заказа.</span><span class="sxs-lookup"><span data-stu-id="47b45-177">This partial fulfillment is achieved by splitting the order line.</span></span>
        - <span data-ttu-id="47b45-178">**Выполнить заказ только с одного склада?**  — Если этот параметр имеет значение **Да**, система DOM гарантирует, что все строки заказа будут выполнены с одного склада.</span><span class="sxs-lookup"><span data-stu-id="47b45-178">**Fulfill order from one location only** – If this option is set to **Yes**, DOM makes sure that all lines on an order are fulfilled from a single location.</span></span>


        <span data-ttu-id="47b45-179">В следующей таблице описана работа системы DOM для различных комбинаций этих параметров.</span><span class="sxs-lookup"><span data-stu-id="47b45-179">The following table explains the behavior when a combination of these parameters is defined.</span></span>

        |      | <span data-ttu-id="47b45-180">Выполнять частичные заказы</span><span class="sxs-lookup"><span data-stu-id="47b45-180">Fulfill partial orders</span></span> | <span data-ttu-id="47b45-181">Выполнять частичные строки</span><span class="sxs-lookup"><span data-stu-id="47b45-181">Fulfill partial lines</span></span> | <span data-ttu-id="47b45-182">Выполнить заказ только с одного склада</span><span class="sxs-lookup"><span data-stu-id="47b45-182">Fulfill order from one location only</span></span> | <span data-ttu-id="47b45-183">Описание</span><span class="sxs-lookup"><span data-stu-id="47b45-183">Description</span></span> |
        |------|------------------------|-----------------------|--------------------------------------|-------------|
        | <span data-ttu-id="47b45-184">1</span><span class="sxs-lookup"><span data-stu-id="47b45-184">1</span></span>    | <span data-ttu-id="47b45-185">Да</span><span class="sxs-lookup"><span data-stu-id="47b45-185">Yes</span></span>                    | <span data-ttu-id="47b45-186">Да</span><span class="sxs-lookup"><span data-stu-id="47b45-186">Yes</span></span>                   | <span data-ttu-id="47b45-187">Да</span><span class="sxs-lookup"><span data-stu-id="47b45-187">Yes</span></span>                                  | <span data-ttu-id="47b45-188">Можно выполнить несколько строк заказа; отдельные строки могут быть выполнены частично, но все строки должны быть выполнены с одного склада в рамках одного запуска DOM.</span><span class="sxs-lookup"><span data-stu-id="47b45-188">A few lines of the order can be fulfilled, and individual lines can be partially fulfilled, but all the lines must be from the same location in an instance of the DOM run.</span></span> <span data-ttu-id="47b45-189">(Эта комбинация в настоящий момент не поддерживается.)</span><span class="sxs-lookup"><span data-stu-id="47b45-189">(This combination isn't currently supported.)</span></span> |
        | <span data-ttu-id="47b45-190">2</span><span class="sxs-lookup"><span data-stu-id="47b45-190">2</span></span>    | <span data-ttu-id="47b45-191">Да</span><span class="sxs-lookup"><span data-stu-id="47b45-191">Yes</span></span>                    | <span data-ttu-id="47b45-192">Нет</span><span class="sxs-lookup"><span data-stu-id="47b45-192">No</span></span>                    | <span data-ttu-id="47b45-193">Да</span><span class="sxs-lookup"><span data-stu-id="47b45-193">Yes</span></span>                                  | <span data-ttu-id="47b45-194">Можно выполнить несколько строк заказа; но отдельные строки не могут быть выполнены частично и все строки должны быть выполнены с одного склада в рамках одного запуска DOM.</span><span class="sxs-lookup"><span data-stu-id="47b45-194">A few lines of the order can be fulfilled, but individual lines can't be partially fulfilled, and all the fulfilled lines must be from the same location in an instance of the DOM run.</span></span> <span data-ttu-id="47b45-195">(Эта комбинация в настоящий момент не поддерживается.)</span><span class="sxs-lookup"><span data-stu-id="47b45-195">(This combination isn't currently supported.)</span></span> |
        | <span data-ttu-id="47b45-196">3</span><span class="sxs-lookup"><span data-stu-id="47b45-196">3</span></span>    | <span data-ttu-id="47b45-197">Да</span><span class="sxs-lookup"><span data-stu-id="47b45-197">Yes</span></span>                    | <span data-ttu-id="47b45-198">Да</span><span class="sxs-lookup"><span data-stu-id="47b45-198">Yes</span></span>                   | <span data-ttu-id="47b45-199">Нет</span><span class="sxs-lookup"><span data-stu-id="47b45-199">No</span></span>                                   | <span data-ttu-id="47b45-200">Можно выполнить несколько строк заказа; отдельные строки могут быть выполнены частично и каждую строку можно выполнить с более чем одного склада в рамках одного запуска DOM.</span><span class="sxs-lookup"><span data-stu-id="47b45-200">A few lines of the order can be fulfilled, individual lines can be partially fulfilled, and each line can be fulfilled from more than one location in an instance of the DOM run.</span></span> |
        | <span data-ttu-id="47b45-201">4\*</span><span class="sxs-lookup"><span data-stu-id="47b45-201">4\*</span></span>  | <span data-ttu-id="47b45-202">Нет</span><span class="sxs-lookup"><span data-stu-id="47b45-202">No</span></span>                     | <span data-ttu-id="47b45-203">Неприменимо</span><span class="sxs-lookup"><span data-stu-id="47b45-203">Not applicable</span></span>        | <span data-ttu-id="47b45-204">Нет</span><span class="sxs-lookup"><span data-stu-id="47b45-204">No</span></span>                                   | <span data-ttu-id="47b45-205">Должны быть выполнены все строки заказа, отдельные строки не могут быть выполнены частично, каждую строку можно выполнять со своего склада.</span><span class="sxs-lookup"><span data-stu-id="47b45-205">All order lines must be fulfilled, individual lines can't be partially fulfilled, and each order line can be fulfilled from a different location.</span></span> |
        | <span data-ttu-id="47b45-206">5\*</span><span class="sxs-lookup"><span data-stu-id="47b45-206">5\*</span></span>  | <span data-ttu-id="47b45-207">Нет</span><span class="sxs-lookup"><span data-stu-id="47b45-207">No</span></span>                     | <span data-ttu-id="47b45-208">Неприменимо</span><span class="sxs-lookup"><span data-stu-id="47b45-208">Not applicable</span></span>        | <span data-ttu-id="47b45-209">Да</span><span class="sxs-lookup"><span data-stu-id="47b45-209">Yes</span></span>                                  | <span data-ttu-id="47b45-210">Должны быть выполнены все строки заказа, отдельные строки не могут быть выполнены частично, все строки должны быть выполнены только с одного склада.</span><span class="sxs-lookup"><span data-stu-id="47b45-210">All order lines must be fulfilled, individual lines can't be partially fulfilled, and all the order lines can be delivered from one location only.</span></span> |
        | <span data-ttu-id="47b45-211">6\*</span><span class="sxs-lookup"><span data-stu-id="47b45-211">6\*</span></span>  | <span data-ttu-id="47b45-212">Нет</span><span class="sxs-lookup"><span data-stu-id="47b45-212">No</span></span>                     | <span data-ttu-id="47b45-213">Неприменимо</span><span class="sxs-lookup"><span data-stu-id="47b45-213">Not applicable</span></span>        | <span data-ttu-id="47b45-214">Нет</span><span class="sxs-lookup"><span data-stu-id="47b45-214">No</span></span>                                   | <span data-ttu-id="47b45-215">Эта комбинация работает так же, как комбинация 4, поскольку правило **Выполнять частичные строки** не может иметь значение **Да**, если правило **Выполнять частичные заказы** имеет значение **Нет**.</span><span class="sxs-lookup"><span data-stu-id="47b45-215">This combination works like combination 4, because **Fulfill partial lines** can't be set to **Yes** when **Fulfill partial orders** is set to **No**.</span></span> |
        | <span data-ttu-id="47b45-216">7\*</span><span class="sxs-lookup"><span data-stu-id="47b45-216">7\*</span></span>  | <span data-ttu-id="47b45-217">Нет</span><span class="sxs-lookup"><span data-stu-id="47b45-217">No</span></span>                     | <span data-ttu-id="47b45-218">Неприменимо</span><span class="sxs-lookup"><span data-stu-id="47b45-218">Not applicable</span></span>        | <span data-ttu-id="47b45-219">Да</span><span class="sxs-lookup"><span data-stu-id="47b45-219">Yes</span></span>                                  | <span data-ttu-id="47b45-220">Эта комбинация работает так же, как комбинация 5, поскольку правило **Выполнять частичные строки** не может иметь значение **Да**, если правило **Выполнять частичные заказы** имеет значение **Нет**.</span><span class="sxs-lookup"><span data-stu-id="47b45-220">This combination works like combination 5, because **Fulfill partial lines** can't be **Yes** when **Fulfill partial orders** is **No**.</span></span> |
        | <span data-ttu-id="47b45-221">8</span><span class="sxs-lookup"><span data-stu-id="47b45-221">8</span></span>    | <span data-ttu-id="47b45-222">Да</span><span class="sxs-lookup"><span data-stu-id="47b45-222">Yes</span></span>                    | <span data-ttu-id="47b45-223">Нет</span><span class="sxs-lookup"><span data-stu-id="47b45-223">No</span></span>                    | <span data-ttu-id="47b45-224">Нет</span><span class="sxs-lookup"><span data-stu-id="47b45-224">No</span></span>                                   | <span data-ttu-id="47b45-225">Можно выполнить несколько строк заказа, но отдельные строки не могут быть выполнены частично, а разные строки можно выполнять с разных складов в рамках одного запуска DOM.</span><span class="sxs-lookup"><span data-stu-id="47b45-225">A few lines of the order can be fulfilled, but individual lines can't be partially fulfilled, and the various order lines can be fulfilled from more than one location in an instance of the DOM run.</span></span> |
        | <span data-ttu-id="47b45-226">9\*</span><span class="sxs-lookup"><span data-stu-id="47b45-226">9\*</span></span>  | <span data-ttu-id="47b45-227">Нет</span><span class="sxs-lookup"><span data-stu-id="47b45-227">No</span></span>                     | <span data-ttu-id="47b45-228">Неприменимо</span><span class="sxs-lookup"><span data-stu-id="47b45-228">Not applicable</span></span>        | <span data-ttu-id="47b45-229">Да</span><span class="sxs-lookup"><span data-stu-id="47b45-229">Yes</span></span>                                  | <span data-ttu-id="47b45-230">Должны быть выполнены все строки заказа; все они должны быть выполнены с одного склада.</span><span class="sxs-lookup"><span data-stu-id="47b45-230">All order lines must be fulfilled, and all the order lines must be fulfilled from one location only.</span></span> |

        <span data-ttu-id="47b45-231">\* Если правило **Выполнять частичные заказы** имеет значение **Нет**, то правило **Выполнять частичные строки** также считается имеющим значение **Нет**, какое бы значение ни было для него фактически установлено.</span><span class="sxs-lookup"><span data-stu-id="47b45-231">\* If **Fulfill partial orders** is set to **No**, **Fulfill partial lines** is always considered to be set to **No**, regardless of how it's actually set.</span></span>

> [!NOTE]
> <span data-ttu-id="47b45-232">В Retail версии 10.0.5 параметр **Выполнить заказ только с одного склада** был заменен на **Максимум складов для выполнения**.</span><span class="sxs-lookup"><span data-stu-id="47b45-232">In Retail version 10.0.5, the pararmeter **Fulfill order from one location only** was changed to **Maximum fulfilling locations**.</span></span> <span data-ttu-id="47b45-233">Вместо того чтобы выбирать между выполнением заказов только с одного склада или с максимального количества складов, теперь пользователи могут задать конкретный набор складов (до 5) или максимальное количество складов.</span><span class="sxs-lookup"><span data-stu-id="47b45-233">Instead of allowing a user to configure whether orders can be fulfilled from one location only or fufilled from as many locations as it can be, users can now specify whether the fullfilment can be from a definite set of locations (up to 5) or from as many locations as it can be.</span></span> <span data-ttu-id="47b45-234">Это позволяет более гибко управлять складами при выполнении заказов.</span><span class="sxs-lookup"><span data-stu-id="47b45-234">This provides more flexibility in terms of how many locations the order can be fulfilled from.</span></span>

   - <span data-ttu-id="47b45-235">**Правило для офлайн-точки выполнения заказов** — это правило позволяет организации задать склад или группу складов в качестве офлайн-точек выполнения или сделать их недоступным для DOM, чтобы заказы не назначались этим складам.</span><span class="sxs-lookup"><span data-stu-id="47b45-235">**Offline fulfillment location rule** – This rule lets organizations specify a location or group of locations as offline or unavailable to DOM, so that orders can't be assigned to those locations for fulfillment.</span></span>
    - <span data-ttu-id="47b45-236">**Правило максимального числа отклонений** — это правило позволяет организации определять порог отклонений.</span><span class="sxs-lookup"><span data-stu-id="47b45-236">**Maximum rejects rule** – This rule lets organizations define a threshold for rejections.</span></span> <span data-ttu-id="47b45-237">По достижении этого порога система DOM помечает заказ или строку заказа как исключение и больше не обрабатывает.</span><span class="sxs-lookup"><span data-stu-id="47b45-237">When the threshold is reached, the DOM processor will mark an order or order line as an exception, and exclude it from further processing.</span></span>

        <span data-ttu-id="47b45-238">После назначения строк заказа определенной точке выполнения эта точка выполнения может отклонить назначенную строку, если по тем или иным причинам выполнение заказа в ней невозможно.</span><span class="sxs-lookup"><span data-stu-id="47b45-238">After order lines are assigned to a location, the location can reject an assigned order line, because it might not be able to fulfill that line for some reasons.</span></span> <span data-ttu-id="47b45-239">Отклоненные строки помечаются как исключения и возвращаются в общий пул для обработке при следующем запуске.</span><span class="sxs-lookup"><span data-stu-id="47b45-239">Rejected lines are marked as an exception and put back into the pool for processing in the next run.</span></span> <span data-ttu-id="47b45-240">При следующем запуске система DOM пытается назначить отклоненную строку другой точке.</span><span class="sxs-lookup"><span data-stu-id="47b45-240">During the next run, DOM will try to assign the rejected line to a different location.</span></span> <span data-ttu-id="47b45-241">Новая точка может также отклонить назначенную строку заказа.</span><span class="sxs-lookup"><span data-stu-id="47b45-241">The new location can also reject the assigned order line.</span></span> <span data-ttu-id="47b45-242">Этот цикл назначения и отклонения может повториться несколько раз.</span><span class="sxs-lookup"><span data-stu-id="47b45-242">This cycle of assignment and rejection can occur multiple times.</span></span> <span data-ttu-id="47b45-243">По достижении порога отклонения система DOM пометит строку заказа ка постоянное исключение и больше не будет пытаться ее назначать.</span><span class="sxs-lookup"><span data-stu-id="47b45-243">When the rejection count hits the threshold that is defined, DOM will mark the order line as a permanent exception and won't pick the line for assignment again.</span></span> <span data-ttu-id="47b45-244">Строка может быть заново назначена, только если пользователь вручную изменит ее статус.</span><span class="sxs-lookup"><span data-stu-id="47b45-244">DOM will consider the order line again for reassignment only if a user manually resets the status of the order line.</span></span>

   - <span data-ttu-id="47b45-245">**Правило максимального расстояния** — это правило позволяет организации определить максимальное расстояние, на котором может находиться точка или группа точек выполнения.</span><span class="sxs-lookup"><span data-stu-id="47b45-245">**Maximum distance rule** – This rule lets organizations define the maximum distance that a location or group of locations can be to fulfill the order.</span></span> <span data-ttu-id="47b45-246">Если для точки выполнения заданы пересекающиеся правила максимального расстояния, система DOM будет использовать то из них, в котором задано меньшее расстояние.</span><span class="sxs-lookup"><span data-stu-id="47b45-246">If overlapping maximum distance rules are defined for a location, DOM will apply the lowest maximum distance that is defined for that location.</span></span>
    - <span data-ttu-id="47b45-247">**Правило максимума заказов** — это правило позволяет организации определить максимальное количество заказов, которое может быть обработано в точке или группе точек выполнения за один календарный день.</span><span class="sxs-lookup"><span data-stu-id="47b45-247">**Maximum orders rule** – This rule lets organizations define the maximum number of orders that a location or group of locations can process during a calendar day.</span></span> <span data-ttu-id="47b45-248">Если в течение дня точке выполнения уже назначено максимальное число заказов, система DOM прекращает назначение заказов этой точке до конца дня.</span><span class="sxs-lookup"><span data-stu-id="47b45-248">If the maximum number of orders is assigned to a location in a single day, DOM won't assign any more orders to that location for the rest of that calendar day.</span></span>

   <span data-ttu-id="47b45-249">Ниже перечислены некоторые общие атрибуты, которые обычно задаются для всех описанных выше правил.</span><span class="sxs-lookup"><span data-stu-id="47b45-249">Here are some of the common attributes that can be defined for all the preceding rule types:</span></span>

   - <span data-ttu-id="47b45-250">**Дата начала** и **Дата окончания** — с помощью этих полей можно ограничить срок действия каждого из правил.</span><span class="sxs-lookup"><span data-stu-id="47b45-250">**Start date** and **End date** – Every rule can be made date-effective by using the these fields.</span></span>
   - <span data-ttu-id="47b45-251">**Отключено** — система DOM учитывает только те правила, у которых в этом поле установлено значение **Нет**.</span><span class="sxs-lookup"><span data-stu-id="47b45-251">**Disabled** – Only rules that have a value of **No** for this field are considered in a DOM run.</span></span>
   - <span data-ttu-id="47b45-252">**Жесткое ограничение** — правила можно определять в качестве жестких и нежестких ограничений.</span><span class="sxs-lookup"><span data-stu-id="47b45-252">**Hard constraint** – A rule can be defined as either a hard constraint or not a hard constraint.</span></span> <span data-ttu-id="47b45-253">Каждый запуск DOM проходит через два этапа.</span><span class="sxs-lookup"><span data-stu-id="47b45-253">Every DOM run goes through two iterations.</span></span> <span data-ttu-id="47b45-254">На первом этапе каждое правило считается жестким ограничением независимо от состояния этого поля.</span><span class="sxs-lookup"><span data-stu-id="47b45-254">In the first iteration, every rule is treated as a hard constraint rule, regardless of the setting of this field.</span></span> <span data-ttu-id="47b45-255">Иными словами, применяются все правила.</span><span class="sxs-lookup"><span data-stu-id="47b45-255">In other words, every rule is applied.</span></span> <span data-ttu-id="47b45-256">Единственное исключение — правило **Приоритет точки**.</span><span class="sxs-lookup"><span data-stu-id="47b45-256">The only exception is the **Location priority** rule.</span></span> <span data-ttu-id="47b45-257">На втором этапе правила, которые не были выбраны в качестве жестких, исключаются, и происходит назначение ранее не назначенных заказов и строк заказов.</span><span class="sxs-lookup"><span data-stu-id="47b45-257">In the second iteration, the rules that weren't defined as hard constraint rules are removed, and the order or order lines that weren't assigned to locations when all the rules were applied are assigned to locations.</span></span>

10. <span data-ttu-id="47b45-258">Профили выполнения служат для группировки коллекций правил, юридических лиц, происхождений заказов на продажу и режимов доставки.</span><span class="sxs-lookup"><span data-stu-id="47b45-258">Fulfillment profiles are used to group a collection of rules, legal entities, sales order origins, and modes of delivery.</span></span> <span data-ttu-id="47b45-259">В каждом запуске DOM обрабатывается только один профиль выполнения.</span><span class="sxs-lookup"><span data-stu-id="47b45-259">Every DOM run is for a specific fulfillment profile.</span></span> <span data-ttu-id="47b45-260">Поэтому организация может определить набор правил для отдельной группы юридических лиц, для заказов с определенным происхождением и с определенным режимом доставки.</span><span class="sxs-lookup"><span data-stu-id="47b45-260">In this way, organizations can define and run a set of rules for a set of legal entities, on orders that have specific sales order origins and modes of delivery.</span></span> <span data-ttu-id="47b45-261">Если к разным наборам происхождений заказов на продажу или режимам доставки нужно применять разные правила, можно определить несколько профилей выполнения.</span><span class="sxs-lookup"><span data-stu-id="47b45-261">Therefore, if different set of rules must be run for different sets of sales order origins or modes of delivery, the fulfillment profiles can be defined accordingly.</span></span> <span data-ttu-id="47b45-262">Чтобы настроить профили выполнения, сделайте следующее.</span><span class="sxs-lookup"><span data-stu-id="47b45-262">To set up fulfillment profiles, follow these steps:</span></span>  

    1. <span data-ttu-id="47b45-263">Выберите **Розничная торговля \> Распределенное управление заказами \> Настройка \> Профили выполнения**.</span><span class="sxs-lookup"><span data-stu-id="47b45-263">Go to **Retail \> Distributed order management \> Setup \> Fulfillment profiles**.</span></span>
    2. <span data-ttu-id="47b45-264">Выберите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="47b45-264">Select **New**.</span></span>
    3. <span data-ttu-id="47b45-265">Заполните поля **Профиль** и **Описание**.</span><span class="sxs-lookup"><span data-stu-id="47b45-265">Enter values in the **Profile** and **Description** fields.</span></span>
    4. <span data-ttu-id="47b45-266">Задайте параметр **Результат автоматического применения**.</span><span class="sxs-lookup"><span data-stu-id="47b45-266">Set the **Auto apply result** option.</span></span> <span data-ttu-id="47b45-267">Если задать для этого параметра значение **Да**, результаты запуска DOM для профиля будут автоматически применены к строкам заказов на продажу.</span><span class="sxs-lookup"><span data-stu-id="47b45-267">If you set this option to **Yes**, the results of the DOM run for the profile will be automatically applied to the sales order lines.</span></span> <span data-ttu-id="47b45-268">Если задать значение **Нет**, результаты можно будет просматривать только в плане выполнения.</span><span class="sxs-lookup"><span data-stu-id="47b45-268">If you set it to **No**, the results can only be viewed in the fulfillment plan.</span></span> <span data-ttu-id="47b45-269">Они не будут применены к строкам заказов на продажу.</span><span class="sxs-lookup"><span data-stu-id="47b45-269">They won't be applied to the sales order lines.</span></span>
    5. <span data-ttu-id="47b45-270">Если профиль DOM должен применяться к заказам на продажу с любым происхождением, даже если происхождение не определено, установите для параметра **Обработать заказы с пустым происхождением заказа на продажу** значение **Да**.</span><span class="sxs-lookup"><span data-stu-id="47b45-270">If you want the DOM profile to be run for orders that have every sales order origin, even orders where the sales order origin is undefined, set the **Process orders with empty sales origin** option to **Yes**.</span></span> <span data-ttu-id="47b45-271">Чтобы применить профиль только к заказам с определенным происхождением, воспользуйтесь страницей **Происхождение заказов**, как описано ниже.</span><span class="sxs-lookup"><span data-stu-id="47b45-271">To run the profile for only a few sales order origins, you can define them on the **Sales origins** page, as explained later.</span></span>
    6. <span data-ttu-id="47b45-272">На экспресс-вкладке **Юридические лица** нажмите **Добавить**, а затем выберите юридическое лицо.</span><span class="sxs-lookup"><span data-stu-id="47b45-272">On the **Legal entities** FastTab, select **Add**, and then select a legal entity.</span></span>
    7. <span data-ttu-id="47b45-273">На экспресс-выберите **Правила** нажмите **Добавить**, а затем выберите правило, которое нужно связать с профилем.</span><span class="sxs-lookup"><span data-stu-id="47b45-273">On the **Rules** FastTab, select **Add**, and then select the rule to link to the profile.</span></span>
    8. <span data-ttu-id="47b45-274">Повторяйте эти два шага, пока в профиль не будут добавлены все нужные правила.</span><span class="sxs-lookup"><span data-stu-id="47b45-274">Repeat the previous two steps until all the required rules are associated with the profile.</span></span>
    9. <span data-ttu-id="47b45-275">Нажмите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="47b45-275">Select **Save**.</span></span>
    10. <span data-ttu-id="47b45-276">На панели операций откройте вкладку **Настройка** и выберите **Режимы доставки**.</span><span class="sxs-lookup"><span data-stu-id="47b45-276">On the Action Pane, on the **Setup** tab, select **Modes of delivery**.</span></span>
    11. <span data-ttu-id="47b45-277">На странице **Режимы доставки** нажмите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="47b45-277">On the **Modes of delivery** page, select **New**.</span></span>
    12. <span data-ttu-id="47b45-278">В поле **Компания** выберите юридическое лицо.</span><span class="sxs-lookup"><span data-stu-id="47b45-278">In the **Company** field, select the legal entity.</span></span> <span data-ttu-id="47b45-279">Вы можете выбирать только из тех компаний, которые добавили ранее.</span><span class="sxs-lookup"><span data-stu-id="47b45-279">The list of companies is limited to the legal entities that you added earlier.</span></span>
    13. <span data-ttu-id="47b45-280">В поле **Режим доставки** выберите режим доставки, который будет связан с этим профилем.</span><span class="sxs-lookup"><span data-stu-id="47b45-280">In the **Mode of delivery** field, select the mode of delivery to associate with this profile.</span></span> <span data-ttu-id="47b45-281">Один режим доставки невозможно связать с несколькими активными профилями.</span><span class="sxs-lookup"><span data-stu-id="47b45-281">A mode of delivery can't be associated with multiple active profiles.</span></span>
    14. <span data-ttu-id="47b45-282">Повторяйте эти два шага, пока с профилем не будут связаны все нужные режимы доставки.</span><span class="sxs-lookup"><span data-stu-id="47b45-282">Repeat the previous two steps until all the required modes of delivery are associated with the profile.</span></span>
    15. <span data-ttu-id="47b45-283">Закройте страницу **Режимы доставки**.</span><span class="sxs-lookup"><span data-stu-id="47b45-283">Close the **Modes of delivery** page.</span></span>
    16. <span data-ttu-id="47b45-284">На панели операций откройте вкладку **Настройка** и выберите **Происхождения заказов на продажу**.</span><span class="sxs-lookup"><span data-stu-id="47b45-284">On the Action Pane, on the **Setup** tab, select **Sales order origins**.</span></span>
    17. <span data-ttu-id="47b45-285">На странице **Происхождения заказов на продажу** нажмите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="47b45-285">On the **Sales origins** page, select **New**.</span></span>
    18. <span data-ttu-id="47b45-286">В поле **Компания** выберите юридическое лицо.</span><span class="sxs-lookup"><span data-stu-id="47b45-286">In the **Company** field, select the legal entity.</span></span> <span data-ttu-id="47b45-287">Вы можете выбирать только из тех компаний, которые добавили ранее.</span><span class="sxs-lookup"><span data-stu-id="47b45-287">The list of companies is limited to the legal entities that you added earlier.</span></span>
    19. <span data-ttu-id="47b45-288">В поле **Происхождение заказа на продажу** выберите происхождение, которое нужно связать с этим профилем.</span><span class="sxs-lookup"><span data-stu-id="47b45-288">In the **Sales origin** field, select the sales origin to associate with this profile.</span></span> <span data-ttu-id="47b45-289">Одно происхождение заказов на продажу нельзя связать с несколькими активными профилями.</span><span class="sxs-lookup"><span data-stu-id="47b45-289">A sales origin can't be associated with multiple active profiles.</span></span>
    20. <span data-ttu-id="47b45-290">Повторяйте эти два шага, пока в профиль не будут добавлены все нужные происхождения заказов на продажу.</span><span class="sxs-lookup"><span data-stu-id="47b45-290">Repeat the previous two steps until all the required sales origins are associated with the profile.</span></span>
    21. <span data-ttu-id="47b45-291">Закройте страницу **Происхождения заказов на продажу**.</span><span class="sxs-lookup"><span data-stu-id="47b45-291">Close the **Sales origins** page.</span></span>
    22. <span data-ttu-id="47b45-292">Для параметра **Включить профиль** выберите значение **Да**.</span><span class="sxs-lookup"><span data-stu-id="47b45-292">Set the **Enable profile** option to **Yes**.</span></span> <span data-ttu-id="47b45-293">Если в конфигурации есть ошибки, появится предупреждение.</span><span class="sxs-lookup"><span data-stu-id="47b45-293">If there are any errors in the setup, you receive a warning message.</span></span>

## <a name="dom-processing"></a><span data-ttu-id="47b45-294">Обработка DOM</span><span class="sxs-lookup"><span data-stu-id="47b45-294">DOM processing</span></span>

<span data-ttu-id="47b45-295">DOM запускается только в рамках пакетных заданий.</span><span class="sxs-lookup"><span data-stu-id="47b45-295">DOM will run only in a batch job.</span></span> <span data-ttu-id="47b45-296">Чтобы настроить пакетное задание для DOM, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="47b45-296">To configure the batch job for DOM runs, follow these steps.</span></span>

1. <span data-ttu-id="47b45-297">Выберите **Розничная торговля \> Распределенное управление заказами \> Пакетная обработка \> Настройка задания обработчика DOM**.</span><span class="sxs-lookup"><span data-stu-id="47b45-297">Go to **Retail \> Distributed order management \> Batch processing \> DOM processor job setup**.</span></span>
1. <span data-ttu-id="47b45-298">На экспресс-вкладке **Параметры** в поле **Профиль выполнения** выберите профиль, для которого нужно запустить DOM.</span><span class="sxs-lookup"><span data-stu-id="47b45-298">On the **Parameters** FastTab, in the **Fulfillment profile** field, select a profile that DOM must be run for.</span></span>
1. <span data-ttu-id="47b45-299">На экспресс-вкладке **Выполнять в фоновом режиме** в поле **Группа пакетов** выберите настроенную группу пакетов.</span><span class="sxs-lookup"><span data-stu-id="47b45-299">On the **Run in the background** FastTab, in the **Batch group** field, select a configured batch group.</span></span>
1. <span data-ttu-id="47b45-300">В поле **Описание задачи** введите наименование пакетного задания.</span><span class="sxs-lookup"><span data-stu-id="47b45-300">In the **Task description** field, enter a name for the batch job.</span></span>
1. <span data-ttu-id="47b45-301">Выберите **Повторение**и определите режим повторного запуска пакетного задания.</span><span class="sxs-lookup"><span data-stu-id="47b45-301">Select **Recurrence**, and define the recurrence of the batch job.</span></span>
1. <span data-ttu-id="47b45-302">Нажмите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="47b45-302">Select **OK**.</span></span>

<span data-ttu-id="47b45-303">Во время обработки система DOM будет учитывать заказы и строки заказов, указанные ниже.</span><span class="sxs-lookup"><span data-stu-id="47b45-303">At the time of processing, DOM will consider the order and order lines as described here:</span></span>

- <span data-ttu-id="47b45-304">Строки заказов, удовлетворяющие заданным в профиле DOM критериям по происхождению, режимам доставки и юридическим лицам, а также следующим критериям:</span><span class="sxs-lookup"><span data-stu-id="47b45-304">Order lines that meet the criteria for sales order origins, modes of delivery, and legal entity as defined in the DOM profile, and that also meet any of these criteria:</span></span>

    - <span data-ttu-id="47b45-305">созданы в каналах розничной торговли;</span><span class="sxs-lookup"><span data-stu-id="47b45-305">They are created from retail channels.</span></span>
    - <span data-ttu-id="47b45-306">никогда не обрабатывались DOM;</span><span class="sxs-lookup"><span data-stu-id="47b45-306">They have never been brokered by DOM.</span></span>
    - <span data-ttu-id="47b45-307">ранее обрабатывались DOM, но помечены как исключения, а максимальное число попыток еще не достигнуто;</span><span class="sxs-lookup"><span data-stu-id="47b45-307">They have been brokered by DOM before, but they are marked as exceptions and are below the maximum threshold for attempts.</span></span>
    - <span data-ttu-id="47b45-308">режим доставки: не самовывоз и не электронный;</span><span class="sxs-lookup"><span data-stu-id="47b45-308">The mode of delivery isn't pick-up or electronic delivery.</span></span>
    - <span data-ttu-id="47b45-309">не отмечены для поставки;</span><span class="sxs-lookup"><span data-stu-id="47b45-309">They aren't marked for delivery.</span></span>
    - <span data-ttu-id="47b45-310">не исключены вручную.</span><span class="sxs-lookup"><span data-stu-id="47b45-310">They aren't manually excluded.</span></span>

- <span data-ttu-id="47b45-311">Заказы, которые не заблокированы.</span><span class="sxs-lookup"><span data-stu-id="47b45-311">Orders that aren't on hold</span></span>

<span data-ttu-id="47b45-312">После применения правил, ограничений по запасам и оптимизации система DOM выберет точку выполнения, которая находится ближе всего к адресу поставки.</span><span class="sxs-lookup"><span data-stu-id="47b45-312">After it applies the rules, inventory constraints, and optimization, DOM picks the location that is closest to the customer's delivery address.</span></span>

<span data-ttu-id="47b45-313">![Критерии по заказам на продажу](./media/ordercriteria.png "Критерии по заказам на продажу")</span><span class="sxs-lookup"><span data-stu-id="47b45-313">![Sales order criteria](./media/ordercriteria.png "Sales order criteria")</span></span>

## <a name="results-of-dom-runs"></a><span data-ttu-id="47b45-314">Результаты запуска DOM</span><span class="sxs-lookup"><span data-stu-id="47b45-314">Results of DOM runs</span></span>

<span data-ttu-id="47b45-315">Если в профиле выполнения установлен параметр **Автоматическое применение**, результаты выполнения будут автоматически применены к строкам заказов на продажу. План выполнения можно будет посмотреть отдельно.</span><span class="sxs-lookup"><span data-stu-id="47b45-315">If the fulfillment profile is set to **Auto apply**, the results of the run will be automatically applied to the sales order lines, and the fulfillment plan can be viewed separately.</span></span> <span data-ttu-id="47b45-316">Если же в профиле выполнения параметр **Автоматическое применение** не установлен, результаты можно будет видеть только в представлении плана выполнения.</span><span class="sxs-lookup"><span data-stu-id="47b45-316">However, if the fulfillment profile isn't set to **Auto apply**, the results of the run can be seen only from the fulfillment plan view.</span></span> 

<span data-ttu-id="47b45-317">Чтобы открыть все сформированные планы выполнения, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="47b45-317">To view all the fulfillment plans that are generated, follow these steps.</span></span>

1. <span data-ttu-id="47b45-318">Выберите **Розничная торговля \> Распределенное управление заказами \> Распределенное управление заказами**.</span><span class="sxs-lookup"><span data-stu-id="47b45-318">Go to **Retail \> Distributed order management \> Distributed order management**.</span></span>
2. <span data-ttu-id="47b45-319">В рабочей области **Распределенное управление заказами** выберите плитку **Планы выполнений**.</span><span class="sxs-lookup"><span data-stu-id="47b45-319">In the **Distributed order management** workspace, select the **Fulfillment Plans** tile.</span></span>
3. <span data-ttu-id="47b45-320">Выберите идентификатор нужного плана выполнения заказов.</span><span class="sxs-lookup"><span data-stu-id="47b45-320">Select the ID of the relevant order fulfillment plan to view the fulfillment plan.</span></span>

    <span data-ttu-id="47b45-321">В разделе сведений о заказе представления плана выполнения можно видеть исходные строки заказа на продажу, для которых подготовлен план.</span><span class="sxs-lookup"><span data-stu-id="47b45-321">The order details section of the fulfillment plan shows the original sales order lines that were part of the run.</span></span> <span data-ttu-id="47b45-322">Помимо стандартных полей строк заказа на продажу, в разделе сведений также приведены следующие три поля, связанные с DOM.</span><span class="sxs-lookup"><span data-stu-id="47b45-322">Besides the standard sales order line fields, the order details section also includes the following three DOM-related fields:</span></span>

    - <span data-ttu-id="47b45-323">**Тип выполнения** — это поле показывает, была строка заказа обработана полностью, частично или вообще не обработана для конкретной точки выполнения.</span><span class="sxs-lookup"><span data-stu-id="47b45-323">**Fulfillment type** – This field indicates whether the sales order line is fully brokered, partially brokered, or not brokered at all to a location.</span></span>
    - <span data-ttu-id="47b45-324">**Разбиение** — это поле показывает, была ли строка заказа на продажу разбита между несколькими точками выполнения.</span><span class="sxs-lookup"><span data-stu-id="47b45-324">**Split** – This field indicates whether one sales order line has been split and brokered to different locations.</span></span>
    - <span data-ttu-id="47b45-325">**Число точек выполнения** — это поле показывает, сколько строк выполнения было создано для одной строки заказа на продажу (в зависимости от числа точек выполнения, между которыми была разбита исходная строка заказа на продажу).</span><span class="sxs-lookup"><span data-stu-id="47b45-325">**Number of fulfillment locations** – This field indicates how many fulfillment lines were created for one sales order line (based on the number of locations that the original sales order line was brokered to).</span></span>

    <span data-ttu-id="47b45-326">В разделе сведений о выполнении можно видеть назначение исходных строк заказа на продажу разным точкам выполнения, а также соответствующие количества.</span><span class="sxs-lookup"><span data-stu-id="47b45-326">The order fulfillment details section shows the assignment of the original sales order lines to different locations, together with their quantities.</span></span>

## <a name="order-line-actions-and-statuses"></a><span data-ttu-id="47b45-327">Действия и статусы строк заказов</span><span class="sxs-lookup"><span data-stu-id="47b45-327">Order line actions and statuses</span></span>

<span data-ttu-id="47b45-328">Ниже перечислены параметры строк заказов.</span><span class="sxs-lookup"><span data-stu-id="47b45-328">The following describes settings on the order line.</span></span> <span data-ttu-id="47b45-329">Чтобы открыть строку заказа, выберите **Розничная торговля \> Клиенты \> Все заказы на продажу**.</span><span class="sxs-lookup"><span data-stu-id="47b45-329">To open the order line, go to **Retail \> Customers \> All sales orders**.</span></span>
- <span data-ttu-id="47b45-330">Если для параметра **Исключить из обработки DOM** на вкладке **Общие** строки заказа на продажу выбрано значение **Да**, заказ или строка заказа не будут обрабатываться системой DOM.</span><span class="sxs-lookup"><span data-stu-id="47b45-330">If you set the **Exclude from DOM processing** option on the **General** tab of the sales order line to **Yes**, the order or order line will be excluded from DOM processing.</span></span>
- <span data-ttu-id="47b45-331">Поле **Статус DOM** на вкладке **Общие** строки заказа на продажу может иметь одно из следующих значений.</span><span class="sxs-lookup"><span data-stu-id="47b45-331">The **DOM status** field on the **General** tab of the sales order line can be set to one of the following values:</span></span>

    - <span data-ttu-id="47b45-332">**Нет** — строка заказа никогда не обрабатывалась.</span><span class="sxs-lookup"><span data-stu-id="47b45-332">**None** – The order line has never been brokered.</span></span>
    - <span data-ttu-id="47b45-333">**Выполнено** — строка заказа успешно обработана и назначена точке выполнения.</span><span class="sxs-lookup"><span data-stu-id="47b45-333">**Complete** – The order line has been successfully brokered and assigned to a location.</span></span>
    - <span data-ttu-id="47b45-334">**Исключение** — строка заказа обработана, не ее не удалось назначить точке выполнения.</span><span class="sxs-lookup"><span data-stu-id="47b45-334">**Exception** – The order line has been brokered but can't be assigned to a location.</span></span> <span data-ttu-id="47b45-335">У исключений есть несколько подтипов, которые доступны в рабочей области DOM:</span><span class="sxs-lookup"><span data-stu-id="47b45-335">Exceptions have multiple subtypes that can be viewed from the DOM workspace:</span></span>

        - <span data-ttu-id="47b45-336">**Количество недоступно** — нет доступных запасов для назначения заказа точке выполнения;</span><span class="sxs-lookup"><span data-stu-id="47b45-336">**No quantity available** – There is no available inventory to assign the order to in the locations.</span></span>
        - <span data-ttu-id="47b45-337">**Максимальное число отклонений** — для строки заказа достигнуто максимальное число отклонений;</span><span class="sxs-lookup"><span data-stu-id="47b45-337">**Maximum rejections** – The order line has reached the maximum threshold for rejections.</span></span>
        - <span data-ttu-id="47b45-338">**Конфликт изменения данных** — строки заказа на продажу была изменен после обработки заказа DOM.</span><span class="sxs-lookup"><span data-stu-id="47b45-338">**Data modification conflict** – The sales order line has been changed since the order was brokered.</span></span> <span data-ttu-id="47b45-339">Поэтому применить к заказу план выполнения невозможно;</span><span class="sxs-lookup"><span data-stu-id="47b45-339">Therefore, the fulfillment plan can't be applied to the order.</span></span>
        - <span data-ttu-id="47b45-340">**Исключение для конкретной строки заказа** — в строке заказа есть более одного исключения.</span><span class="sxs-lookup"><span data-stu-id="47b45-340">**Order line specific exception** – There are multiple exceptions on the order line.</span></span>

- <span data-ttu-id="47b45-341">Во время ввода заказа на продажу система DOM может работать интерактивном режиме.</span><span class="sxs-lookup"><span data-stu-id="47b45-341">During the sales order entry, DOM can be run in an interactive mode.</span></span> <span data-ttu-id="47b45-342">При вводе строки заказа после указания продукта и количества можно выбрать команду **Обновить строку**, а затем в разделе **DOM** выбрать **Предложить точку выполнения**.</span><span class="sxs-lookup"><span data-stu-id="47b45-342">While you're entering an order line, after you specify the product and quantity, you can select **Update line** and then, under **DOM**, select **Suggest fulfillment location**.</span></span> <span data-ttu-id="47b45-343">Будет открыт основанный на правилах DOM список точек выполнения, в которых возможно выполнение строки заказа с нужным количеством.</span><span class="sxs-lookup"><span data-stu-id="47b45-343">You then see a list of locations that is based on DOM rules that can fulfill the quantity on the order line.</span></span> <span data-ttu-id="47b45-344">Этот список будет отсортирован по расстоянию.</span><span class="sxs-lookup"><span data-stu-id="47b45-344">This list is sorted by distance.</span></span> <span data-ttu-id="47b45-345">Выберите точку выполнения (объект или склад) для строки заказа на продажу.</span><span class="sxs-lookup"><span data-stu-id="47b45-345">Select a location to set the relevant site and warehouse on the sales order line.</span></span> <span data-ttu-id="47b45-346">Чтобы можно было пользоваться этой функцией, должен существовать активный профиль выполнения, соответствующий происхождению и режиму доставки строки заказа на продажу.</span><span class="sxs-lookup"><span data-stu-id="47b45-346">For this functionality to work, there must be an existing, active fulfillment profile that matches the sales origin and delivery mode on the sales line.</span></span>
- <span data-ttu-id="47b45-347">Чтобы открыть журналы запуска DOM для строки заказа на продажу, выберите **строку заказа на продажу**, а затем в разделе **DOM** выберите **Просмотр журналов DOM**.</span><span class="sxs-lookup"><span data-stu-id="47b45-347">To view the DOM run logs for a sales order line, select **Sales order line**, and then, under **DOM**, select **View DOM Logs**.</span></span> <span data-ttu-id="47b45-348">В журналах DOM можно видеть все события и журналы, сформированные во время выполнения DOM.</span><span class="sxs-lookup"><span data-stu-id="47b45-348">The DOM logs show all the events and logs that were generated by the DOM run.</span></span> <span data-ttu-id="47b45-349">С их помощью вы можете лучше понять, какие точки выполнения были назначены конкретной строке заказа, а также какие правила и ограничения при этом учитывались.</span><span class="sxs-lookup"><span data-stu-id="47b45-349">The logs can help you understand why a specific location was assigned to the order line, and what rules and constraints were considered as a part of the assignment.</span></span> <span data-ttu-id="47b45-350">На вкладке **Управление** журналы DOM также доступны на уровне заголовка заказа на продажу.</span><span class="sxs-lookup"><span data-stu-id="47b45-350">On the **Manage** tab, the DOM logs are also available at the level of the sales order header.</span></span>

## <a name="run-a-clean-up-job-for-dom-fulfillment-plans"></a><span data-ttu-id="47b45-351">Запуск задания очистки для планов выполнения DOM</span><span class="sxs-lookup"><span data-stu-id="47b45-351">Run a clean-up job for DOM fulfillment plans</span></span>

<span data-ttu-id="47b45-352">Во время работы системы DOM создаются планы выполнения.</span><span class="sxs-lookup"><span data-stu-id="47b45-352">As DOM processing is run, fulfillment plans are created.</span></span> <span data-ttu-id="47b45-353">С течением времени в системе накапливается очень большое число таких планов.</span><span class="sxs-lookup"><span data-stu-id="47b45-353">Over time, the system will keep numerous fulfillment plans.</span></span> <span data-ttu-id="47b45-354">Для управления хранящимися в системе планами можно настроить пакетное задание, которое будет удалять старые планы в соответствии со значением **Период хранения в днях**.</span><span class="sxs-lookup"><span data-stu-id="47b45-354">To manage the number of fulfillment plans that the system keeps, you can configure a batch job that deletes older fulfillment plans, based on the **Retention period in days** value.</span></span>

1. <span data-ttu-id="47b45-355">Выберите **Розничная торговля \> Распределенное управление заказами \> Пакетная обработка \> Настройка задания удаления данных выполнения DOM**.</span><span class="sxs-lookup"><span data-stu-id="47b45-355">Go to **Retail \> Distributed order management \> Batch processing \> DOM fulfillment data deletion job setup**.</span></span> 
1. <span data-ttu-id="47b45-356">В поле **Группа пакетов** выберите настроенную группу пакетов.</span><span class="sxs-lookup"><span data-stu-id="47b45-356">In the **Batch group** field, select a configured batch group.</span></span>
1. <span data-ttu-id="47b45-357">Выберите **Повторение**и определите режим повторного запуска пакетного задания.</span><span class="sxs-lookup"><span data-stu-id="47b45-357">Select **Recurrence**, and define the recurrence of the batch job.</span></span>
1. <span data-ttu-id="47b45-358">Нажмите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="47b45-358">Select **OK**.</span></span>

## <a name="more-information"></a><span data-ttu-id="47b45-359">Дополнительные сведения</span><span class="sxs-lookup"><span data-stu-id="47b45-359">More information</span></span>

<span data-ttu-id="47b45-360">При использовании функции DOM следует учитывать следующие обстоятельства.</span><span class="sxs-lookup"><span data-stu-id="47b45-360">Here are some things to consider when you use the DOM feature:</span></span>

- <span data-ttu-id="47b45-361">в настоящее время система DOM обрабатывает только заказы, созданные в каналах розничной торговли.</span><span class="sxs-lookup"><span data-stu-id="47b45-361">Currently, DOM looks only at orders that are created from retail channels.</span></span> <span data-ttu-id="47b45-362">Заказы на продажу считаются розничными, если параметр **Розничные продажи** в них имеет значение **Да**.</span><span class="sxs-lookup"><span data-stu-id="47b45-362">Sales orders are identified as retail sales orders when the **Retail sale** option is set to **Yes**.</span></span>
- <span data-ttu-id="47b45-363">Корпорация Майкрософт еще не протестирована DOM с расширенными процессами управления складом.</span><span class="sxs-lookup"><span data-stu-id="47b45-363">Microsoft hasn't tested DOM with advanced warehouse management features.</span></span> <span data-ttu-id="47b45-364">Клиенты и партнеры должны критически оценивать совместимость DOM с расширенными процессами управления складом.</span><span class="sxs-lookup"><span data-stu-id="47b45-364">Customers and partners must be careful to determine whether DOM is compatible with the advanced warehouse management capabilities and processes that are relevant to them.</span></span>
- <span data-ttu-id="47b45-365">Система DOM доступна только для облачной версии Retail.</span><span class="sxs-lookup"><span data-stu-id="47b45-365">DOM is available only on the cloud version of Retail.</span></span> <span data-ttu-id="47b45-366">Она не поддерживается в локальных развертываниях.</span><span class="sxs-lookup"><span data-stu-id="47b45-366">It isn't supported in on-premises deployments.</span></span>
