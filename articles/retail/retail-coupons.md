---
title: "Создание купонов для розничных продаж"
description: "В этой теме приводятся обзорные сведения о купонах розничной торговли и описывается порядок их настройки."
author: scott-tucker
manager: AnnBe
ms.date: 05/22/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-365-retail
ms.technology: 
ms.search.form: RetailCoupon, RetailParameters, RetailSharedParameters
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.custom: 
ms.search.region: Global
ms.search.industry: retail
ms.author: scotttuc
ms.search.validFrom: 2017-06-30
ms.dyn365.ops.version: July 2017 update
ms.translationtype: HT
ms.sourcegitcommit: a8b5a5af5108744406a3d2fb84d7151baea2481b
ms.openlocfilehash: 9b4e792cae66e38546b3bdfdfbd59a2e36d891c2
ms.contentlocale: ru-ru
ms.lasthandoff: 04/13/2018

---

# <a name="create-coupons-for-retail-sales"></a>Создание купонов для розничных продаж

[!INCLUDE [banner](includes/banner.md)]

## <a name="overview-of-coupons"></a>О купонах

Купоны — это коды и штрих-коды, используемые для добавления розничных скидок к проводкам. У каждого купона может быть несколько кодов, и у каждого кода может быть своя собственная дата вступления в силу. 

Каждый купон связан с одной розничной скидкой. Ценовые группы, которые связаны со скидкой, определяют, какие клиенты могут использовать купон, или в каких каналах купон действителен. 

По сути купоны представляют собой дополнительную проверку поверх розничных скидок. Купон предоставляет необходимые коды и штрих-коды купона вместе с диапазонами дат для этих кодов. Купон также предоставляет необязательные лимиты использования и свойства, необходимые клиенту. Скидка предоставляет набор продуктов, для которых действителен купон. Ценовые группы для скидки предоставляют набор клиентов, каналов или каталогов, для которых действителен купон.

Для создания купона необходимо отдельно создать скидку и купон. Затем их необходимо связать путем выбора скидки на странице купона в Microsoft Dynamics 365 for Retail. 

> [!NOTE]
> После связывания купона со скидкой несколько полей на странице скидки в Microsoft Dynamics 365 for Retail становятся доступными только для чтения, поскольку их значения определяются настройками купона. К этим полям относятся поля для статуса и стандартных диапазонов дат.

### <a name="limited-use-coupons"></a>Купоны с лимитом использования

Купоны можно настроить как купоны с лимитом использования. Лимит использования можно задать по клиенту или по каналу, а также как глобальный лимит. Этот лимит применяется, когда код или штрих-код вводится или сканируется на POS или во время ввода заказа на продажу.

Лимит применяется к коду купона на купоне. Например, купон однократного использования, имеющий два кода купона, можно использовать два раза, по одному разу для каждого кода купона. Каждый код на купоне можно перевести в активное состояние независимо от второго кода.

> [!NOTE]
> Как только код купона достиг своего предела использования, система *не* выполняет автоматически изменение статуса кода купона на "Использовано". Система, тем не менее, не допускает дальнейшего использования кода купона, который достиг своего предела использования. Если для статуса кода купона вручную задано любое другое значение, кроме "Активно", то этот код купона не может использоваться ни в одном из каналов.

## <a name="managing-coupons"></a>Работа с купонами

Создавать скидку и купон необходимо отдельно. Затем их необходимо связать путем выбора скидки на странице купона. После связывания купона со скидкой несколько полей на странице скидки становятся доступными только для чтения, поскольку их значения определяются настройками купона. К этим полям относятся поля для статуса и стандартных диапазонов дат.  

По сути купоны теперь представляют собой дополнительную проверку поверх розничных скидок. Купон предоставляет коды и штрих-коды купона вместе с диапазонами дат, лимитами использования, а также свойством, необходимым клиенту. Скидка предоставляет набор продуктов, для которых действителен купон. Ценовые группы скидки предоставляют набор клиентов, каналов или каталогов, для которых действителен купон.

## <a name="system-setup-for-coupons"></a>Настройка системы для работы с купонами 

Прежде чем настраивать купоны, необходимо настроить штрих-код купона и две номерные серии купонов. 

1.  На странице **Символы маски** создайте новый символ маски для кода купона. Можно выбрать любой неиспользуемый символ.
2.  На странице **Настройка маски штрих-кода** создайте новую маску штрих-кода. Задайте в поле **Тип** значение **Купон**.
3.  На странице **Настройка штрих-кода** создайте новый штрих-код с использованием только что созданной маски штрих-кода.
4.  На странице **Номерные серии** создайте две новые номерные серии. Одна последовательность необходима для идентификатора кода купона, а вторая — для номера купона. Идентификатор кода купона — это уникальный идентификатор для каждого кода купона на купоне. Номер купона — это уникальный идентификатор купона. Каждый купон может иметь несколько кодов и штрих-кодов, которые инициируют срабатывание купона.

    > [!NOTE]
    > Для обеих номерных серий необходимо установить в поле **Область действия** значение **Компания**. В большинстве случаев оба порядковых номера следует генерировать автоматически.

5.  На странице **Параметры розничной торговли** на вкладке **Штрих-коды** выберите ранее созданный штрих-код.
6.  На странице **Общие параметры розничной торговли** на вкладке **Номерная серия** выберите номерные серии, созданные для номера купона и идентификатора кода купона.
7.  Теперь можно открыть страницу **Купоны** и создать новый купоны.

## <a name="the-effect-of-partial-updates-on-coupons"></a>Влияние частичных обновления на купоны

Функциональность купонов основывается на нескольких отдельных элементах Dynamics 365 for Retail. Центральный офис Microsoft Dynamics 365 for Retail и канал могут быть частично обновлены в различных компонентах. Таким образом, важно понимать, как частичное обновление влияет на функциональность купонов в целом.

- **Центральный офис частично обновлен, но сервер Retail и POS не обновлены.** При обновлении центрального офиса страницы купонов и скидок обновляются, а также обновляется подсистема розничного ценообразования. Если обновлен только один из этих двух компонентов, некоторые страницы в Retail не будут соответствовать данным расчета цен. Таким образом, при расчете скидок могут возникать неожиданные значения скидок или ошибки.
- **Центральный офис обновлен, но сервер Retail и POS не обновлены (N-1).** Поскольку не все розничные магазины могут быть обновлены в одно и то же время, рекомендуется обновить центральный офис, прежде чем обновлять розничные магазины. В сценарии N-1 новая функциональность, связанная с купонами, не будет доступна в магазинах, которые еще не были обновлены. Например, в функциональности купонов предусмотрены строки "исключения". Если использовать строки исключения в скидке, они не будет применены в розничном магазине, где используется более ранняя версия.
- **Центральный офис не обновлен, но сервер Retail и POS обновлены (N+1).** Поскольку подсистема ценообразования на сервере Retail способна обрабатывать старые коды скидок при расчете цен, в этом сценарии обновление не должно никак сказаться на функциональности.

