---
title: Программа проверки согласованности проводок розничной торговли
description: В этом разделе описываются функции программы проверки согласованности проводок розничной торговли в Microsoft Dynamics 365 for Retail.
author: josaw1
manager: AnnBe
ms.date: 01/08/2019
ms.topic: index-page
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.custom: ''
ms.assetid: ed0f77f7-3609-4330-bebd-ca3134575216
ms.search.region: global
ms.search.industry: Retail
ms.author: josaw
ms.search.validFrom: 2019-01-15
ms.dyn365.ops.version: 10
ms.openlocfilehash: 972c4d6b244eebc85cc801353ce8fb25ecbc0655
ms.sourcegitcommit: 2b890cd7a801055ab0ca24398efc8e4e777d4d8c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/07/2019
ms.locfileid: "1517153"
---
# <a name="retail-transaction-consistency-checker"></a>Программа проверки согласованности проводок розничной торговли


[!include [banner](includes/banner.md)]
[!include [preview banner](includes/preview-banner.md)]

В этом разделе описываются функции программы проверки согласованности проводок розничной торговли, появившейся в Microsoft Dynamics 365 for Finance and Operations версии 8.1.3. Программа проверки согласованности обнаруживает и отделяет противоречивые проводки до их передачи в процесс разноски операций.

При разноске операции в Retail может произойти сбой из-за несогласованности данных в таблицах проводок розничной торговли. Ошибка данных может быть связана с непредвиденными проблемами в приложении POS или с неправильным импортом проводок из систем POS других разработчиков. Ниже приведены возможные примеры несогласованности. 

  - Общая сумма проводки в таблице заголовков не соответствует общей сумме проводок в строках.
  - Количество строк в таблице заголовков не соответствует количеству строк в таблице проводок.
  - Сумма налога в таблице заголовков не соответствует сумме налога в строках. 
  
Если в процесс разноски операций передаются несогласованные проводки, создаются противоречивые накладные по продажам и журналы платежей, что в результате приводит к сбою всего процесса разноски операций. Восстановление журналов операций из подобного состояния сопряжено со сложными исправлениями данных в нескольких таблицах проводок. Программа проверки согласованности проводок розничной торговли предотвращает подобные проблемы.

На следующей диаграмме представлен процесс разноски с использованием программы проверки согласованности проводок.

![Процесс разноски журналов операций с использованием программы проверки согласованности проводок розничной торговли](./media/validchecker.png "Процесс разноски журналов операций с использованием программы проверки согласованности проводок розничной торговли")

Процесс пакетной обработки **Проверить проводки магазина** проверяет согласованность таблиц проводок розничной торговли для следующих сценариев.

- Счет клиента — проверяется, что счет клиента в таблицах проводок розничной торговли присутствует в справочнике клиентов в головном офисе.
- Количество строк — проверяется соответствие количества строк, указанного в таблице заголовков проводок, количеству строк в таблицах проводок продаж.

## <a name="set-up-the-consistency-checker"></a>Настройка программы проверки согласованности
Процесс пакетной обработки "Проверить проводки магазина" в разделе **Розничная торговля \> ИТ розничной торговли \> Разноска POS**, для периодического выполнения. Пакетное задание можно запланировать на основе организационной иерархии магазина, аналогично тому, как настраиваются процессы "Пакетный расчет журналов операций" и "Пакетная разноска журналов операций". Рекомендует настроить этот процесс пакетной обработки таким образом, чтобы он выполнялся несколько раз в день, и запланировать его выполнение на конец каждого выполнения P-задания.

## <a name="results-of-validation-process"></a>Результаты выполнения процесса проверки
Результаты проверки, выполненной процессом пакетной обработки, отмечаются в соответствующей проводке розничной торговли. В поле **Статус проверки** в записи проводки розничной торговли отображается значение **Успешно** или **Ошибка**, а дата последнего выполнения проверки отображается в поле **Время последней проверки**.

Для просмотра более подробного описательного текста ошибки проверки выберите соответствующую запись проводки магазина розничной торговли и нажмите кнопку **Ошибки проверки**.

Проводки, которые не прошли проверку, и еще не проверенные проводки не передаются в журналы операций. Во время выполнения процесса "Создать строки журнала операций" пользователи будут получать уведомления о проводках, которые могли бы быть включены в журнал операций, но не были включены.

Если обнаружена ошибка проверки, ее можно исправить, только обратившись в службу поддержки Майкрософт. В будущих выпусках для пользователей будет добавлен возможность исправлять записи, вызвавшие сбой, в интерфейсе пользователя. Также будут предусмотрены возможности ведения журнала и аудита для отслеживания истории таких изменений.

> [!NOTE]
> В будущих выпусках будут добавлены дополнительные правила проверки для поддержки других сценариев.
