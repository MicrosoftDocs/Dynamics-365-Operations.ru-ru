---
title: Настройка признания выручки
description: В этой теме описываются параметры настройки для признания выручки и их влияние.
author: kweekley
ms.date: 04/28/2022
ms.topic: index-page
ms.prod: ''
ms.technology: ''
ms.search.form: Customer
audience: Application User
ms.reviewer: roschlom
ms.search.region: Global
ms.author: kweekley
ms.search.validFrom: 2018-08-30
ms.dyn365.ops.version: 8.0.4
ms.openlocfilehash: 5f72ebd743763db7c68340a833c2501d47d27081
ms.sourcegitcommit: 0abc777986112ea2332f5bf0e815b303b952356c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/29/2022
ms.locfileid: "8656731"
---
# <a name="revenue-recognition-setup"></a>Настройка признания выручки
[!include [banner](../includes/banner.md)]

Добавлен новый модуль **Признание выручки**, включающий пункты меню для любой необходимой настройки. В этом разделе описываются параметры настройки и особенности их использования.

> [!NOTE]
> Функция признания выручки теперь включена по умолчанию через механизм управления функциями. Если организация не использует эту функцию, ее можно отключить в рабочей области **Управление функциями**.
>
> Признание выручки, включая функции набора, не поддерживается в каналах Commerce (электронная коммерция, POS и центр обработки вызовов). Номенклатуры, настроенные для признания выручки, не должны быть добавлены к заказам или проводкам, созданным в каналах Commerce.

В модуле **Признание выручки** имеются следующие параметры настройки:

- Журналы признания выручки
- Параметры для признания выручки
- Графики признания выручки 
- Настройка запасов

    - Номенклатурные группы и выпущенные продукты
    - Определение графика признания выручки
    - Определение цены в выручке
    - Настройка запасов

        - Определение графика признания выручки
        - Определение цены в выручке

    - Профили разноски
    - Наборы

        - Компоненты набора
        - Номенклатура набора

- Настройки проектов

## <a name="revenue-recognition-journals"></a>Журналы признания выручки

Для признания выручки был введен новый тип журнала. Этот журнал необходим и используется в двух сценариях.

Первый сценарий происходит после выполнения всех контрактных обязательств, когда отложенная выручка рассчитывается путем создания журнала признания выручки, который основан на данных графика признания выручки. Журнал содержит запись учета, которая переносит сальдо со счета учета отложенной выручки на счет учета выручки.

Второй сценарий происходит, когда журнал создается после того, как происходит перераспределение. Перераспределение происходит, когда строка заказа на продажу добавляется к ранее созданному заказу на продажу с накладной, или когда создается новый заказ на продажу, содержащий строку, которая является частью исходного контракта. Если накладная была разнесена до добавления новой строки заказа на продажу, необходимо создать правильную запись учета для разнесенной накладной клиента.

Журнал настраивается на странице **Наименования журналов** (**Признание выручки \> Настройка \> Наименования журнала**). Тип журнала должен быть установлен как **Признание выручки**. 

## <a name="parameters-for-revenue-recognition"></a>Параметры для признания выручки

Параметры признания выручки настраиваются на вкладке **Признание выручки** на странице **Параметры главной книги** (**Признание выручки \> Настройка \> Параметры главной книги**). Доступны следующие параметры:

- **Имя журнала признания выручки** — выберите журнал, который был создан для признания выручки. Журнал требуется, когда выручка признается из графика признания выручки, или когда выполняется перераспределение для заказа на продажу, для которого уже была выставлена накладная.
- **Включить метод распределения скидки** — установите для этого параметра значение **Да**, чтобы определить цену в выручке путем распределения рыночной стоимости, которая определена в цене в выручке для каждого выпущенного продукта. Это распределение включает распределение любых скидок по строке по номенклатурам. Если для этого параметра установлено значение **Нет**, система использует медианную стоимость, которая определена в цене в выручке для каждого выпущенного продукта. Если для этого параметра установлено значение **Нет**, но для выпущенных продуктов не настроена медианная стоимость, распределение цены в выручке производиться не будет.
- **Включить скидки заголовка** — установите этот параметр на значение **Да**, чтобы определить цену в выручке путем распределения скидок заголовка по продуктам. Если этот параметр имеет значение **Нет**, скидка заголовка не включается в распределение цены в выручке.
- **Отключить условия контракта** — установите этот параметр в значение **Да**, если для продуктов, имеющих тип выручки **Поддержка после заключения контракта** могут быть выпущены, даже если для них не определены даты начала и окончания контракта. Обычно даты начала и окончания контракта являются обязательными для номенклатур с типом выручки **Поддержка после заключения контракта**. Когда даты начала и окончания контракта не определены, сведения о графике признания выручки для разноски рассчитываются с использованием количества событий и даты накладной.
- **Разноска корректировок накладных в модуле Расчеты с клиентами при перераспределении** — когда выполняется перераспределение для накладных, которые уже были разнесены, запись учета для разнесенной накладной должна быть исправлена. Используйте этот параметр, чтобы указать, как выполняется корректировка.

    - Установите для этого параметра значение **Нет**, чтобы ограничить разноску корректирующей проводки в главную книгу. Если этот параметр имеет значение **Нет**, дополнительные документы в модуле "Расчеты с клиентами" для внутренней корректировки учета не будут созданы. Когда накладная оплачивается, процесс сопоставления использует старую запись учета для разноски любых скидок по оплате, любых реализованных прибылей или убытков.
    - Установите для этого параметра значение **Да**, чтобы автоматически создать документ сторнирования и новую накладную для корректирующей проводки в расчетах с клиентами. Поскольку эта корректировка является внутренней корректировкой учета, новые документы не отправляются и не передаются клиенту. Сторнированный документ сопоставляется с исходной накладной, а новая исправленная накладная оплачивается клиентом. Обратите внимание, что все три документа отображаются в отчетах, например в выписке по клиенту.

[![Информация о настройке.](./media/revenue-recognition-setup-info.png)](./media/revenue-recognition-setup-info.png)

## <a name="revenue-schedules"></a>Графики признания выручки

График признания выручки должен создаваться для каждого из случаев, когда выручка может быть отсрочена. Например, если ваша организация предлагает поддержку в течение 6-месячного, 12-месячного, 18-месячного и 24-месячного периодов, необходимо создать график признания выручки для каждого периода. Настройка графика признания выручки определяет, каким образом цена в выручке распределяется по выбранному числу периодов. Она также определяет даты по умолчанию, которые вводятся для графика признания выручки, создаваемого при разноске накладной.

Если выручка признается поэтапно, рекомендуется создать график признания выручки для количества этапов, независимо от дат признания. После создания графиков их можно изменить таким образом, чтобы они соответствовали ожидаемым датам этапов. Эти записи могут быть заблокированы до тех пор, пока не будет получено уведомление о том, что этап завершен и доступно признание выручки.

Графики признания выручки создаются на странице **Графики признания выручки** (**Признание выручки \> Настройка \> Графики признания выручки**).

[![Графики признания выручки.](./media/revenue-recognition-revenue-schedules.png)](./media/revenue-recognition-revenue-schedules.png)

Введите описательные значения в поля **График признания выручки** и **Описание**. Следующие дополнительные параметры используются для создания графика признания выручки при разноске накладной.

- **Вхождения** — введите число месяцев или вхождений для выручки будущих периодов.
- **Автоматическая блокировка** — установите этот флажок, если требуется, чтобы все строки графика признания выручки автоматически блокировались при разноске накладной. Блокировка должна быть снята вручную в каждой строке графика до того, как будет признана выручка будущих периодов по строке.
- **Автоматические условия контракта** — этот флажок устанавливается, если даты начала и окончания срока действия контракта должны быть установлены автоматически. Эти даты автоматически устанавливаются только для выпущенных продуктов с типом выручки **Поддержка после заключения контракта**. Дата начала контракта автоматически устанавливается равной запрошенной дате отгрузки для строки заказа на продажу, а дата окончания контракта автоматически устанавливается равной дате начала плюс количество месяцев или вхождений, которое определено в настройке графика признания выручки. Например, продукт в строке заказа на продажу относится к годовой гарантии. График признания выручки по умолчанию составляет **12M** — (12 месяцев), и для этого графика признания выручки установлен флажок **Автоматические условия контракта**. Если в строке заказа на продажу установлена запрошенная дата отгрузки 16 декабря 2019г., по умолчанию используется дата начала контракта, соответствующая 16 декабря 2019г., а дата окончания контракта по умолчанию — 15 декабря 2020г.
- **Основа признания** — основа признания определяет, каким образом цена в выручке распределяется по всем вхождениям.

    - **Ежемесячно по дням** — сумма распределяется на основе фактических дней в каждом календарном месяце.
    - **Ежемесячно** — сумма распределяется поровну в числе месяцев, которое определено во вхождениях.
    - **Вхождения** — сумма распределяется поровну между вхождениями, но она может включать дополнительный период, если в качестве соглашения о признании выбрана **Фактическая дата начала**.
    - **Финансовый период по дням** — сумма распределяется на основе фактических дней в каждом финансовом периоде. 

         - Результаты параметров **Ежемесячно по дням** и **Финансовый период по дням** будут одинаковы, если финансовые периоды соответствуют календарным месяцам. Единственным исключением является ситуация, когда для соглашения о признании задано значение **Конец месяца/периода**, а поля **Дата начала контракта** и **Дата окончания** оставлены пустыми в строке заказа на продажу.

- **Соглашение о признании** — соглашение о признании определяет даты, которые устанавливаются в графике признания выручки для накладной.

    - **Фактическая дата начала** — график создается с использованием либо даты начала контракта (для номенклатур с поддержкой после заключения контракта \[PCS\]), либо даты накладной (для обязательных и необязательных номенклатур).
    - **1-й день месяца/периода** — дата в первой строке графика является датой начала контракта (или датой накладной). Однако все последующие строки графиков создаются для первого числа месяца или финансового периода.
    - **15-е число месяца** — дата в первой строке графика зависит от даты накладной. Если накладная разносится в период с первого по пятнадцатое число месяца, график признания выручки создается с учетом первого числа месяца. Если накладная разносится с шестнадцатого числа месяца или позднее, график признания выручки создается с учетом первого числа следующего месяца.

        - Параметр **15-е число месяца** невозможно выбрать, если для основы признания задано значение **Финансовый период по дням**.

    - **1-й день следующего месяца/периода** — дата, с которой начинается график, является первым днем следующего месяца или финансового периода.
    - **Конец месяца/периода** — дата в первой строке графика является датой начала контракта (или датой накладной). Однако все последующие строки графика создаются для последнего дня месяца или финансового периода. 

Выберите кнопку **Подробные сведения о графике признания выручки**, чтобы просмотреть общие периоды и проценты, признаваемые в каждом периоде. По умолчанию значение **Процент признания** равномерно распределяется по количеству периодов. Если для основы признания задано значение **Ежемесячно**, процент признания можно изменить. При изменении процента признания выводится предупреждение о том, что сумма не равна 100 процентам. После получении этого сообщения можно продолжить редактирование строк. Однако общий процент должен равняться 100 перед закрытием страницы.

[![Подробные сведения о графике признания выручки.](./media/revenue-schedule-details-2nd-scrn.png)](./media/revenue-schedule-details-2nd-scrn.png)

## <a name="inventory-setup"></a>Настройка запасов

Можно признать выручку для выпущенных продуктов в заказах на продажу, но не категориями продаж в заказах на продажу или накладными с произвольным текстом, если в документ не включено ни одной номенклатуры. Выбор, сделанный при настройке выпущенных продуктов, определяет, как будет признаваться выручка по номенклатуре. Например, выбранные параметры определяют, будет ли цена в выручке распределена, и откладывается ли выручка с использованием графика признания выручки.

Настройка может начинаться на экспресс-вкладке **Признание выручки** на странице **Номенклатурная группа** (**Признание выручки \> Настройка \> Настройка запасов и продукта \> Номенклатурная группа**). Эта страница содержит несколько полей настройки. Эти поля используются для установки значений по умолчанию только для новых выпущенных продуктов, созданных в системе. По мере создания новых продуктов значения, установленные здесь, вводятся по умолчанию для данной номенклатурной группы. Можно переопределить значения по умолчанию для выпущенных продуктов на странице **Выпущенные продукты** (**Признание выручки \> Настройка \> Настройка запасов и продукта \> Выпущенные продукты**). Значения по умолчанию, заданные для выпущенных продуктов, затем переносятся в заказ на продажу.

## <a name="item-groups-and-released-products"></a>Номенклатурные группы и выпущенные продукты

### <a name="define-the-revenue-schedule"></a>Определение графика признания выручки

Выручка по строке заказа на продажу откладывается, если график признания выручки определен для выпущенного продукта и используется по умолчанию в строке заказа на продажу. Если этот параметр должен использоваться по умолчанию для продукта, можно определить график признания выручки на экспресс-вкладке **Признание выручки** на странице **Номенклатурная группа** (**Признание выручки \> Настройка \> Настройка запасов и продукта \> Номенклатурная группа**). Можно также определить параметр для выпущенного продукта на экспресс-вкладке **Признание выручки** на странице **Выпущенные продукты** (**Признание выручки \> Настройка \> Настройка запасов \> Выпущенные продукты**).

В поле **График признания выручки** выберите график признания выручки, представляющий период, на который выручка должна быть отложена. График признания выручки автоматически вводится в строку заказа на продажу, а сведения о графике создаются при разноске накладной по заказу на продажу.

### <a name="define-the-revenue-price"></a>Определение цены в выручке

Для настройки номенклатурных групп и выпущенных продуктов используется метод медианной стоимости или метод распределения скидки. Оба метода требуют наличия различных настроек на странице **Выпущенные продукты**:

- **Распределение выручки активно** — установите этот параметр на **Да**, чтобы включить выпущенный продукт в расчет распределения выручки. Если для этого параметра установлено значение **Нет**, для выпущенного продукта используется метод медианной стоимости, если она определена. Если медианная стоимость не определена, то для разноски выручки или выручки будущих периодов используется цена за единицу в строке заказа на продажу.
- **Тип выручки** — выберите тип выручки, определяющий выпущенный продукт:

    - **Обязательная** — номенклатура является первичным источником выручки организации. Это значение является настройкой по умолчанию.
    - **Необязательная** — номенклатура не является первичным источником выручки организации. При использовании параметров медианной стоимости цена "урезается" до медианой стоимости, а затем распределяется. Например, обязательная номенклатура имеет фиксированную цену, которая должна быть признана для выручки. Если имеется скидка, скидка может быть выделена из выручки по обязательной номенклатуре, но **только** до суммы фиксированной цены. Оставшаяся часть скидки выводится из выручки для необязательных номенклатур. В противном случае скидка может не выделяться из выручки для обязательной номенклатуры.
    - **Поддержка после заключения контракта** — номенклатура поддерживает другие элементы, включенные в продажу для клиента. Цена в выручке распределяется по обязательным и необязательным продуктам, включенным в продажу. В зависимости от настройки, номенклатуры PCS могут не требовать, чтобы даты начала и окончания контракта были определены в строке заказа на продажу.

- **Исключить из выделения** — установите для этого параметра значение **Да**, чтобы указать, что медианная стоимость номенклатуры не может быть настроена ниже определенного минимального процентного значения или выше максимального процентного значения. Любая цена в выручке будет производной от цены в выручке другого выпущенного продукта, включенного в заказ на продажу. Если этот параметр имеет значение **Нет**, медианная стоимость номенклатуры может быть скорректирована или урезана. Обратите внимание, что при продаже более одной номенклатуры, настроенной в качестве медианной стоимости, необходимо настроить по крайней мере один выпущенный продукт, где параметр **Исключить из выделения** установлен на значение **Нет**. Таким образом, существует по крайней мере одна номенклатура, в которую может быть распределена любая разница в цене в выручке.
- **Медианная стоимость** — установите для этого параметра значение **Да**, чтобы указать, что цена в выручке по номенклатуре должна быть скорректирована таким образом, чтобы она совпадала с медианной стоимостью, если она ниже минимального допустимого отклонения, указанного пользователем или выше максимального отклонения, и что выделенная сумма должна быть распределена по строкам, имеющим продукты, для которых параметр **Исключить из выделения** установлен на значение **Нет**.

    - **Максимальное отклонение** — введите процентное значение выше допустимой медианной стоимости.
    - **Минимальное отклонение** — введите процентное значение ниже допустимой медианной стоимости.

После завершения настройки параметров для выпущенного продукта необходимо вручную определить цену в выручке путем ввода справедливой стоимости или медианной стоимости (если используется метод медианной стоимости) на странице **Цены в выручке** (перейдите к пункту **Принятие выручки \> Настройка \> Настройка запасов \> Выпущенные продукты**, а затем в области действий на вкладке **Продажи** в группе **Признание выручки** выберите **Цены в выручке**).

[![Цены в выручке.](./media/revenue-recognition-revenue-prices.png)](./media/revenue-recognition-revenue-prices.png)

Цена в выручке, определяемая вручную на этой странице, используется для определения распределения цены в выручке по каждому заказу на продажу на основе определенных критериев. Каждый критерий соответствует строке заказа на продажу, чтобы определить цену в выручке, которая должна использоваться в процессе распределения.

- **Код номенклатуры** и **Связь номенклатуры** — цена в выручке может быть определена для отдельного продукта или группы продуктов. Если выбрано значение **Таблица** в поле **Код номенклатуры**, выберите выпущенный продукт в поле **Связь номенклатуры**. Если выбрано значение **Группа** в поле **Код номенклатуры**, выберите группу продуктов в поле **Связь номенклатуры**.
- **Код счета** и **Номер счета/группы** — цена в выручке может быть определена для всех клиентов, отдельного клиента или группы клиентов. Если выбрано значение **Все** в поле **Код счета**, цена используется для всех клиентов. Если выбрано значение **Таблица** в поле **Код счета**, выберите клиента в поле **Номер счета/группы**. Если выбрано значение **Группа** в поле **Код счета**, выберите группу клиентов в поле **Номер счета/группы**.
- **Валюта** — необходимо ввести отдельную цену в выручке для каждой валюты, в которую введен заказ на продажу. Например, если в настоящее время выполняется продажа в долларах США, канадских долларах и евро, необходимо определить цену в выручке во всех трех валютах. Цена в выручке не переводится из одной валюты, например, валюты учета, в другие валюты проводок, которые вы используете.
- **Сумма или процент от цены** — указывается, должна ли цена в выручке настраиваться как сумма или как процент от цены по прейскуранту. Если выбрано значение **Процент от цены**, пользователи могут ввести медианную стоимость как процент от цены по прейскуранту вместо суммы. Значение **Процент от цены** используется только для выпущенных продуктов, которые настроены как номенклатуры PCS.
- **Цена распределения выручки** — в зависимости от значения, выбранного в поле **Сумма или процент от цены**, введите сумму или процент для представления цены в выручке, которая используется для распределения выручки между элементами по заказу на продажу.
- **Начальная дата** и **Конечная дата** — введите диапазон дат, в течение которого активна данная цена в выручке. Эти поля являются необязательными.

Если параметр **Включить метод распределения скидки** на странице **Параметры главной книги** имеет значение **Да**, и если в поле **Тип выручки** для выпущенного продукта указано значение **Поддержка после заключения контракта**, необходимо также указать номенклатуры, которые поддерживаются выпущенным продуктом. Эта настройка выполняется на странице **Основа настройки** (перейдите к пункту **Признание выручки \> Настройка \> Настройка запасов \> Выпущенные продукты**, а затем в области действий на вкладке **Продажи** в группе **Признание выручки**, выберите **Основа настройки**).

На странице **Основа настройки** добавьте запись для каждой группы номенклатур, которую поддерживает номенклатура. При распределении выручки цена в выручке будет распределяться по обязательным и необязательным элементам для номенклатуры PCS.

### <a name="posting-profiles"></a>Профили разноски

Три дополнительных типа разноски поддерживают возможность отсрочки выручки. Эти типы разноски настраиваются на вкладке **Заказ на продажу** на странице **Разноска** (**Признание выручки \> Настройка \> Настройка запасов и продукта \> Разноска**).

- **Выручка будущих периодов** — введите счет ГК для цены в выручке, которая будет разносится в выручку будущих периодов (вместо выручки). Цена в выручке откладывается, если в строке заказа на продажу указан график признания выручки.
- **Отложенная себестоимость проданных товаров** — введите счет ГК для суммы себестоимости проданных товаров, которая разносится на отложенную себестоимость проданных товаров, если выручка также отложена.
- **Частичное удаление выручки по накладной** — введите счет ГК для клирингового счета, который используется, когда по заказу на продажу частично выставлены накладные или когда происходит перераспределение. Сальдо по этому счету возвращается к 0 (нулю), если по заказам на продажу полностью выставлены накладные.

### <a name="bundles"></a>Наборы

Номенклатуры набора являются уникальными выпущенными продуктами, которые настроены таким образом, чтобы они включали компоненты. Эта настройка выполняется с помощью функции спецификации (BOM). Когда в заказ на продажу вводится номенклатура набора, отдельные компоненты используются для определения цен в выручке и графиков признания выручки. Однако распечатанные документы для клиента, такие как заказ на продажу и накладная, соответствуют номенклатуре набора.

#### <a name="bundle-components"></a>Компоненты набора

Компоненты, включенные в набор, должны быть настроены на странице **Выпущенные продукты** (**Признание выручки \> Настройка \> Настройка запасов и продукта \> Выпущенные продукты**). Эти компоненты представляют собой выпущенные продукты, которые должны быть настроены таким же образом, как и продукты, включенные в спецификацию. Например, выпущенный продукт может быть номенклатурой типа **Номенклатура** или типа **Услуга**, но она должна быть назначена группе номенклатурных моделей, для которой параметр **Учитываемый в запасах продукт** имеет значение **Да**. Дополнительные сведения см. в документации по настройке для номенклатур спецификации.

Компоненты также должны быть настроены для признания выручки, как если бы они были продуктами, которые могут быть проданы по отдельности в заказе на продажу. Например, убедитесь, что для каждого компонента определена правильная цена в выручке, и что для номенклатур PCS настроена базисная цена.

#### <a name="bundle-items"></a>Номенклатуры набора

При настройке номенклатуры набора следует задать два поля на странице **Выпущенные продукты** (**Признание выручки \> Настройка \> Настройка запасов и продукта \> Выпущенные продукты**):

- На экспресс-вкладке **Инженер** в поле **Тип производства** номенклатура должна быть настроена как номенклатура спецификации.
- На экспресс-вкладке **Общие** в поле **Набор** номенклатура должна быть помечена как номенклатура набора.

Компоненты должны быть назначены родительской номенклатуре набора/спецификации на странице **Версии спецификаций** (перейдите к пункту **Признание выручки \> Настройка \> Настройка запасов и продукта \> Выпущенные продукты**, а затем в области действий на вкладке **Инженер** в группе **Спецификация** выберите **Версии спецификаций**). Дополнительные сведения см. в документации по настройке для спецификаций.

[![Выпущенные продукты, графики спецификации.](./media/revenue-recognition-bom-scheduleds.jpg)](./media/revenue-recognition-bom-scheduleds.jpg)

Если родительская номенклатура набора и компоненты набора настроены на распределение, цена в выручке для набора будет распределяться по компонентам на основе их процентного вклада в выручку.

## <a name="project-setup"></a>Настройки проектов

Признание выручки также может использоваться для заказов на продажу, созданных с помощью проекта "Время и расходы". Для заказов на продажу, созданных на основе проектов, достаточно определить счета ГК в профилях разноски проекта, которые используются для разноски накладных по проекту. Счета ГК определяются на странице **Настройка разноски ГК** (**Признание выручки \> Настройка \> Настройка проекта \> Настройка разноски ГК**).

- **Выручка по накладной будущих периодов** (в разделе **Счета выручки**) — введите счет ГК для цены в выручке, которая будет разносится в выручку будущих периодов (вместо выручки). Цена в выручке откладывается, если в строке заказа на продажу указан график признания выручки.
- **Отложенная себестоимость** (в разделе **Счета затрат**) — введите счет ГК для суммы себестоимости проданных товаров, которая разносится на отложенную себестоимость проданных товаров, если выручка также отложена.


[!INCLUDE[footer-include](../../includes/footer-banner.md)]
