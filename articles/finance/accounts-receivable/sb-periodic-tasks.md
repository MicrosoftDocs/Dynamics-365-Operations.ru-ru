---
title: Периодические задачи в повторяющемся выставление счетов по контракту
description: В этой статье описываются периодические задачи, доступные в повторяющемся выставлении счетов по контракту.
author: JodiChristiansen
ms.date: 04/29/2022
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: twheeloc
ms.search.scope: Core, Operations
ms.custom: 539093
ms.search.region: Global
ms.author: jchrist
ms.search.validFrom: 2021-11-05
ms.dyn365.ops.version: 10.0.24
ms.openlocfilehash: d834d1d7aa34448b4ef21606974538eb294b5d7d
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/03/2022
ms.locfileid: "8904798"
---
# <a name="periodic-tasks-in-recurring-contract-billing"></a>Периодические задачи в повторяющемся выставление счетов по контракту

В этой статье описываются периодические задачи, доступные в повторяющемся выставлении счетов по контракту.

## <a name="generate-invoice"></a>Создать накладную

Используйте страницу **Создание счета** для создания массовых ежемесячных повторяющихся счетов на основе информации, которую вы настроили на страницах **Все графики выставления счетов** и **Просмотр сведений о платежах**. При создании накладной описание номенклатуры для строки обработки заказа на продажу обновляется с описанием номенклатуры и датами начала и окончания выставления счетов для строки графика, по которой выставлена накладная.

## <a name="generate-invoice-batch-processing"></a>Создать пакетную обработку накладных

Страница **Создать пакетную обработку накладной** используется для создания накладных для регулярных платежей через процесс пакетной обработки регулярных платежей. Доступные параметры одинаковы для параметров на странице **Создать накладную**, но они могут быть сохранены в пакетном процессе, который может быть выполнен несколько раз.

## <a name="price-update"></a>Обновить цену

Используйте утилиту обновления цен для обновления цен нескольких номенклатур в нескольких графиках выставления счетов в одном действии. Цены могут быть обновлены на основе указанного процента или указанной суммы. В списке строк отображаются только текущие цены за единицу номенклатуры. Цены после обновления цены не отображаются.

Обратите внимание на следующие моменты, связанные с утилитой обновления цен:

- Если заказ на продажу для определенного года уже был создан (то есть на номенклатуру выставлен счет), цена номенклатуры строки не изменяется.
- Утилиту обновления цен можно использовать для номенклатур строки, имеющих статус **Активный** или **Заблокированный**. Для заблокированных номенклатур, параметр **Изменить план** должен быть установлен в значение **нет**, когда удерживается блокировка.
- Утилиту обновления цен нельзя использовать для номенклатур строки, которые являются элементами использования, которые используют эскалацию, выставление счетов по этапам или разбиение выручки.

### <a name="price-update-example"></a>Пример обновления цены

Создается график выставления счетов и добавляется номенклатура возобновления. Цена за единицу составляет $750. Первый год номенклатуры оплачивается 15 декабря 2021 г.. График выставления счетов создается для периода с 1 декабря до 31 декабря 2022 года.

Во время обновления процесс **создания накладной** создает заказ на продажу для 2022 года. После запуска утилиты обновления цен цена обновляется с $750 на $800.

Заказ на продажу и график выставления счетов на 2022 г. не затрагиваются, и цена за единицу остается $750, так как график выставления счетов на 2022 уже был выписан. Строка графика выставления счетов и сведения о строке на 2023 год обновлены до 800 долларов США, поскольку график выставления счетов за 2023 год еще не выставлен.

### <a name="update-prices--flat-pricing-method"></a>Обновить цены — фиксированный метод ценообразования

Когда вы обновляете цены на номенклатуры, для которых используется фиксированный метод ценообразования, вы можете указать процент или сумму для увеличения цены.

Чтобы запустить утилиту обновления цен для номенклатур, использующих фиксированный метод ценообразования, выполните следующие действия.

1. На странице утилиты **обновления цен** выберите **фиксированный** метод ценообразования.
2. В поле **Метод увеличения** выберите метод увеличения, который используется для обновления цены номенклатур.
3. В зависимости от выбранного метода увеличения, укажите процент в поле **Процент** или сумму в поле **Сумма**.
4. На экспресс-вкладке **Включаемые записи** выберите кнопку **Фильтр**, чтобы добавить фильтры для отчета.
5. Выберите **Предварительный просмотр** для просмотра диапазона записей.
6. Если вы не хотите обрабатывать некоторые строки, отметьте их, а затем выберите **Удалить**.
7. Нажмите **ОК**.

### <a name="update-prices--standard-pricing-method"></a>Обновить цены — метод плоской цены

Если цена номенклатуры была изменена в записи номенклатуры, она может быть обновлена для всех строк графика выставления счетов, если номенклатура использует стандартный метод ценообразования.

1. На странице утилиты **обновления цен** выберите **стандартный** метод ценообразования.
2. На экспресс-вкладке **Включаемые записи** выберите кнопку **Фильтр**, чтобы добавить фильтры для отчета.
3. Выберите **Предварительный просмотр** для просмотра диапазона записей.
4. Если вы не хотите обрабатывать некоторые строки, отметьте их, а затем выберите **Удалить**.
5. Нажмите **ОК**.

## <a name="mass-hold-processing"></a>Обработка массовой блокировки

Используйте страницу **Массовое удержание**, чтобы применить варианты удержания к нескольким графикам выставления счетов одновременно.

Чтобы поместить только одно расписание выставления счетов или одну строку графика выставления счетов на блокировке, откройте страницу **Все графики выставления счетов** и выберите пункт **Заблокировать**. Чтобы удалить блокировку, используйте страницу **Удалить блокировку**.

### <a name="put-billing-schedules-on-hold"></a>Заблокировать график выставления счетов.

Чтобы приостановить несколько графиков выставления счетов, выполните следующие действия.

1. На странице **Массовая блокировка** задайте для поля **Параметр процесса** значение **Блокировка**.
2. В поле **Код основания** выберите код основания.
3. Настройте параметр **Корректировка графика**

    - **Да** — если выбрано значение **Да**, укажите дату блокировки в поле **Дата блокировки**. Все строки графика выставления счетов после даты блокировки удаляются.
    - **Нет** — строки графика выставления счетов не изменяются. Изменяется только статус. Он будет обновлен до значения **Заблокировано**.

4. На экспресс-вкладке **Включаемые записи** выберите кнопку **Фильтр**, чтобы добавить фильтры для отчета.
5. Выберите **Предварительный просмотр** для просмотра диапазона записей.
6. Если вы не хотите обрабатывать некоторые строки, отметьте их, а затем выберите **Удалить**.
7. Нажмите **ОК**.

При возврате к списку графиков выставления счетов вы увидите, что статус графиков выставления счетов был изменен на **Заблокировано**.

### <a name="remove-a-hold-from-several-billing-schedules"></a>Удаление блокировки из нескольких графиков выставления счетов

1. На странице **Массовая блокировка** задайте для поля **Параметр процесса** значение **Удалить блокировку**.
2. В поле **Код основания** введите код основания.
3. В поле **Удалить дата** выберите дату, когда должна быть удалена блокировка.
4. Обновите поля **Дата возобновления** и **Дата расхода будущего периода** по мере необходимости. Дата расхода будущего времени добавляется ко всем строкам расчета будущего времени.
5. На экспресс-вкладке **Включаемые записи** выберите кнопку **Фильтр**, чтобы добавить фильтры для отчета.
6. Выберите **Предварительный просмотр** для просмотра диапазона записей.
7. Если вы не хотите обрабатывать некоторые строки, отметьте их, а затем выберите **Удалить**.
8. Нажмите **ОК**.

> [!NOTE]
> Чтобы удалить блокировку, необходимо установить значение **Переопределение группы пользователей снятия блокировки** на странице **Параметры повторяющегося выставления счетов по контракту**.

Например, в строке выставления счетов имеется Дата начала 1 февраля 2022 г., а дата окончания — 28 февраля 2022 г.. Сумма счета 200 дол. США. В поле **Дата блокировка** установлено значение 10 февраля 2022 г.. Таким образом, период февраля корректируется, чтобы исключить дату после 10 февраля. Новый период берется с 1 февраля по 9 февраля, а сумма 64,29 дол.США (по ежедневному распределению). Удаляются все строки графика выставления счетов на или после 10 февраля.

Если процесс **снятия блокировки** завершен, а поле **Дата удаления** имеет значение 10 февраля 2022, то будут выставляться два платежных периода. Первый период берется с 1 февраля по 9 февраля, а сумма 64,29 дол.США. Второй период берется с 10 февраля по 28 февраля, а сумма 135,71 дол.США.

## <a name="mass-termination-processing"></a>Обработка массового завершения

Страница **Массовое завершение** используется для завершения строк графика выставления счетов, которые в настоящее время отображаются путем указания даты завершения.

Если вы используете выручку и расходы, графики выставления счетов, для которых в поле **Дата завершения** установлено значение **Настроить график** на странице **Все графики выставления счетов**, подлежат возмещению.

Графики выставления счетов, в которых используется функция распределения нескольких элементов (МЕА), не появляются на **странице массового завершения**. Можно также прервать индивидуальный график выставления счетов, используя функцию прекращения графика выставления счетов.

> [!NOTE]
> Строки графика выставления счетов, которые в настоящее время включены в партию **Создать накладную**, недоступны для этого процесса.

Сведения о каждом поле и процессе см. в разделе [Завершение графиков выставления счетов](terminate-billing-schedule.md).

## <a name="mass-archive-process"></a>Процесс массовой архивации

Страница **Массовый архив** используется для архивирования нескольких графиков выставления счетов Заархивированы могут быть только завершенные графики выставления счетов.

После архивирования графика выставления счетов происходят следующие события:

- Статус изменится на **Архивировано**.
- График выставления счетов постоянно заблокирован.
- Строки графика выставления счетов более недоступны на страницах запроса.

> [!NOTE]
> Архивирование графика выставления счетов является постоянным действием и не может быть отменено.

Для архивирования графика выставления счетов выполните следующие действия.

1. На странице **Массовый архив** в поле **Дата окончания выставления счетов** укажите дату окончания выставления счетов. Для просмотра всех завершенных графиков выставления счетов оставьте это поле пустым.
2. Чтобы ограничить набор записей, которые должны быть включены в обновление, на экспресс-вкладке **Включаемые записи** нажмите кнопку **Фильтр**.
3. Выберите **Просмотр предварительной версии**.
4. Если вы не хотите архивировать некоторые записи, отметьте их, а затем выберите **Удалить**.
5. Нажмите кнопку **ОК**, чтобы заархивировать записи на странице.

## <a name="mass-stubbing-process"></a>Процесс массового создания расчетных листов

Страница **массового создания расчетных листов** используется, чтобы пометить все выбранные строки графика выставления счетов как оплаченные (расчетный лист) или неоплаченные (Реверсировать расчетный лист). Создание расчетного листа или реверсированного расчетного листа часто выполняются для импортированных строк графика оплаты, ранее выписанных в другую систему. Строки графика выставления реверсированных счетов отображаются как реверсированные и не создают накладную для клиента.

### <a name="stub-records"></a>Записи расчетных листов

1. На странице **Массовые расчетные листы** в поле **Параметры процесса** выберите **Расчетный лист**.
2. В поле **Дата прекращения** задайте дату прекращения, чтобы указать, к каким строкам должен применяться процесс. Будут отображены только записи, для которых дата начала выставления счетов равно указанной дате.
3. Выберите **Просмотр предварительной версии**, чтобы отобразить строки, которые необходимо сделать расчетными листами.
4. Чтобы исключить строку из процесса, установите ее метку, а затем выберите команду **Удалить**.
5. Выберите **Процесс**, чтобы создать для строк расчетные листы.

### <a name="reverse-stub-records"></a>Записи реверсирования расчетных листов

1. На странице **Массовые расчетные листы** в поле **Параметры процесса** выберите **Реверсивный расчетный лист**.
2. В поле **Дата прекращения** задайте дату прекращения, чтобы указать, к каким строкам должен применяться процесс. Будут отображены только записи, для которых дата начала выставления счетов равно указанной дате.
3. Выберите **Просмотр предварительной версии**, чтобы отобразить строки, которые необходимо сделать реверсированными расчетными листами.
4. Чтобы исключить строку из процесса, установите ее метку, а затем выберите команду **Удалить**.
5. Выберите **Процесс**, чтобы создать для строк реверсированные расчетные листы.

## <a name="update-completion-date-process"></a>Процесс обновления даты завершения

Страница **Дата завершения обновления** используется для обновления даты завершения для определённых элементов этапа для нескольких графиков выставления счетов или для пользователей. Можно также обновить процент завершения для номенклатур в шаблонах этапов, использующих **метод процента завершения**.

1. На странице **Дата завершения обновления** перейдите к **этапной обработке** и выберите **Обновление процента обновления**.
2. В поле **Процентная сумма** введите суммарный процент, который был завершен.
3. Выберите код номенклатуры, который относиться к шаблону этапа.
4. На экспресс-вкладке **Записи для включения** выберите **Фильтр**, чтобы выбрать определенное значение **Учетная запись конечного пользователя**, **Номер графика выставления счетов** или **Номер номенклатуры** в качестве критерия фильтрации.
5. Выберите **ОК**, чтобы обработать изменение. После завершения обработки в распределение этапа добавляется новая строка. Эта строка представляет процент, который был завершен для шаблона этапа.

## <a name="unbilled-revenue-mass-processing"></a>Массовая обработка выручки по невыставленным счетам

Используйте страницу **Массовая обработка доходов без выставления счетов**, чтобы создать запись в журнале доходов без выставления счетов или создать расчетный лист для записи журнала для одного или нескольких выбранных графиков выставления счетов или строк сведений о выставлении счетов.

- **Создать запись в журнале** — Создание записей журнала доходов без выставления счетов для нескольких строк графика выставления счетов.. Чтобы выбрать диапазон записей, которые должны быть включены в обновление, на экспресс-вкладке **Включаемые записи** нажмите кнопку **Фильтр**. В списке отображаются только те строки графика выставления накладных, для которых не были созданы записи по журналу выручки. Создаются исходные записи журнала. Для номенклатур РБП также создаются графики РБП.
- **Запись в журнале расчетного листа** — отметьте строки графика выставления счетов, для которых уже созданы неоплачиваемые записи журнала. Этот параметр используется, если запись невыставленного журнала уже была разнесена в другую систему. Он помечает неоплаченный журнал доходов как незавершенный и не публикует транзакцию в главной книге.
- **Реверсировать запись в журнале расчетного листа** — Обратные записи журнала расчетных листов, которые были обработаны. Если во время обработки **записи в журнале расчетных листов** была допущена ошибка, этот параметр очистит флажок **расчетных листов** для строки графика выставления счетов.
- **Строка сведений о выставлении счетов по расчетных листах** — используйте этот процесс, когда невыставленный доход был обработан во внешней системе, а некоторые из строк сведений о выставлении счетов уже выставлены в счет. Этот процесс обеспечит отображение правильной суммы в счетах доходов без выставления счетов.
- **Реверсировать строку сведений о выставлении счетов по расчетному листу** — реверсирование действий **Строки сведений о выставлении счетов по расчетному листу**.

Поле **Наименование журнала** используется для разноски **создания записи журнала** в главную книгу.

> [!NOTE]
> Процесс создания расчетных листов не разносит суммы в главную книгу. Поле **Имя журнала** недоступно для всех процессов создания расчетных листов и реверсирования.

### <a name="unbilled-revenue-stub-example"></a>Пример создания расчетного листа по доходу без выставления счета

График выставления счетов настраивается на один год, начиная с октября 2021 г. до сентября 2022 г. Выручка по невыставленным счетам уже была обработана во внешней системе. Девять месяцев графика выставления счетов уже были выставлены на счет. Сумма каждого платежного периода составляет 250 дол. США в месяц. В начале года общая сумма, разнесенная на выручку без выставления счета 3000 дол. США. По прошествии девяти месяцев уже был выставлен счет на 2250 дол. США, а 750 дол. США выручки остается неоплаченной.

Чтобы настроить график выставления счетов, при котором остается невыставленный доход только за три месяца, выполните следующие действия.

1. На странице **Просмотр сведений о выставлении счетов** создайте график выставления счетов за период с октября 2021 года до сентября 2022 года, код номенклатуры S0001 и сумму 250 дол. США в месяц.
2. Выберите **Создать запись в журнале** для графика выставления счетов. Сумма 3000 дол.США разносится на выручку без выставленного счета.
3. Выберите **строку сведений о выставлении счетов по расчётным листам** и укажите дату проводки (июнь 2022 года, девять месяцев). Строки графика выставления счетов не будут отображаться в предварительной версии. Затрагиваемые строки основаны на дате проводки.
4. Нажмите **ОК**.

Первые девять месяцев, по которым выставлен счет, являются расчетными листами.

[![Просмотр расчетных листов с информацией по выставлению счетов](./media/01_View-billing-detail-stub.png)](./media/01_View-billing-detail-stub.png)

3000 долл. США реверсируются из невыставленного дохода, а оставшиеся 750 долларов США незачтенного дохода разносятся. Чтобы просмотреть разноски выручки без выработки по оплате, выберите **Аудит записи в журнал выручки без выставления счетов** на вкладке **Продления** на странице сведения о строке

[![Аудит записи невыставленной выручки в журнале](./media/02_Unbilled-rev-journal-audit.png)](./media/02_Unbilled-rev-journal-audit.png)

> [!NOTE]
> Запись в журнале доходов без выставления счетов может быть создана для любого срока продления при условии, что все строки сведений о выставлении счетов за предыдущий срок были выставлены. Например, строка графика выставления счетов имеет месячную частоту выставления счетов в течение 12-месячного периода, начиная с января по декабрь 2021 года. Строка имеет три условия: начальный термин, второй термин (с января по декабрь 2022 года) и третий термин (с января по декабрь 2023 г.). После создания накладной для всех строк сведений о выставлении счетов из начальных 12 месяцев в 2021 году, для второго члена можно создать запись журнала для выручки без создания счета.
>
> Для номенклатур РБП, использующих функцию выручки без выставления счетов, будет обработана строка оплаты и строки скидки. Для этих номенклатур создаются запись в журнале выручки без выставления счетов, план РБП для строки выставления накладных и строки скидки.
>
> Записи журнала, созданные для номенклатур которые нельзя отложить, и номенклатур, которые можно отложить, разносят кредит на разные счета выручки.
