---
title: Шаблоны разделения выручки в выставлении счетов по подпискам
description: В этой статье описан порядок настройки шаблонов расщепления выручки для номенклатур, которые продаются как наборы.
author: JodiChristiansen
ms.date: 04/21/2022
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: twheeloc
ms.search.scope: Core, Operations
ms.custom: 539093
ms.search.region: Global
ms.author: jchrist
ms.search.validFrom: 2021-11-05
ms.dyn365.ops.version: 10.0.24
ms.openlocfilehash: 145ca6e6f0673a5a09fe9a23cf5e163421617fd9
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/03/2022
ms.locfileid: "8904769"
---
# <a name="revenue-split-templates-in-subscription-billing"></a>Шаблоны разделения выручки в выставлении счетов по подпискам

Страница **Шаблон разделения выручки** используется для настройки шаблонов для разделения выручки. Разделения выручки состоит из родительской номенклатуры, имеющей дочерние номенклатуры. Этот тип номенклатуры часто продается клиентам как единая номенклатура или набор.

Например, номенклатура компьютера может быть создана следующим образом:

- **Родительская номенклатура:** Серебряная подписка
- **Номенклатуры строк (дочерние):**

    - Поддержка
    - Поддержка
    - Лицензия

При создании родительской номенклатуры помните о соблюдении следующих ограничений:

- Номенклатура может быть указана как родительская номенклатура только один раз.
- Родительская номенклатура может быть выбрана в качестве дочерней номенклатуры в том же шаблоне.
- Для допустимого шаблона требуется хотя бы одна дочерняя номенклатура.
- Номенклатура может быть указана как дочерняя номенклатура для нескольких номенклатур из набора.
- Каждое отношение "родитель-потомок" должно быть уникальным.

## <a name="create-a-parent-item-that-has-child-items"></a>Создание родительской номенклатуры, имеющей дочерние номенклатуры

Выполните эти шаги, чтобы создать родительскую номенклатуру, у которой имеются дочерние номенклатуры.

1. На странице **Шаблон разделения выручки** выберите **Создать**.
1. В поле **Родительская номенклатура** выберите родительскую номенклатуру. Поле **Номер варианта** обновляется автоматически. Если требуется, это значение можно изменить.
1. В поле **Метод распределения** выберите метод распределения.
1. В списке **Компонентные номенклатуры** выберите **Добавить** для добавления дочерних номенклатур.
1. Если выбрано значение **Процент** в поле **Метод распределения**, укажите процентное значение в поле **Процент**.

    - Если в поле **Метод распределения** выбрано значение **Равная сумма**, поле **Процент** автоматически обновляется таким образом, чтобы у каждой номенклатуры был одинаковый процент.
    - Если вы выбрали значение **Переменная сумма**, **Нулевая родительская сумма** или **Нулевая сумма** в поле **Метод распределения**, значение поля **Процент** остается равным **0** (нулю) и не может быть изменено.

1. Нажмите **Сохранить**.

## <a name="fields"></a>Поля

Страница **Шаблон разделения выручки** содержит следующие поля.

| Поле | Описание |
|-------|-------------|
| Родительская номенклатура | Выберите код номенклатуры. Эта номенклатура становится родительской номенклатурой для создаваемой номенклатуры набора. |
| Имя продукта | Имя продукта. |
| Метод распределения | <p>Выберите метод распределения:</p><ul><li>**Равная сумма** — проценты распределения автоматически рассчитываются и равномерно распределяются между всеми номенклатурами в шаблоне.</li><li>**Процент** — можно указать процентную сумму для распределения. Сумма всех процентов должна равняться 100.</li><li>**Переменная сумма** — добавляемые дочерние номенклатуры имеют чистую сумму 0 (ноль). Цена дочерних номенклатур должна быть указана на уровне проводок.</li><li>**Нулевая сумма** — родительская номенклатура сохраняет свою цену за единицу и чистую сумму. Все дочерние номенклатуры имеют чистую сумму 0 (ноль).</li><li>**Нулевая родительская сумма** — родительская номенклатура имеет фиксированную чистую сумму 0 (ноль). Все дочерние номенклатуры обрабатываются как стандартные номенклатуры. Проверка того, что сумма дочерних номенклатур равна сумме родительской номенклатуры, не выполняется.</li></ul> |
| **Компонентные номенклатуры** | |
| Компонентная номенклатура | Выберите код номенклатуры. Эта номенклатура является дочерней номенклатурой. |
| Номер варианта | Выберите номер варианта для номенклатуры. |
| Имя продукта | Имя продукта. |
| Процент | <p>Процент распределения для этапа:</p><ul><li>Если для поля **Метод распределения** установлено значение **Процент**, можно указать процент.</li><li>Если в поле **Метод распределения** задано значение **Равная сумма**, процент автоматически вычисляется таким образом, чтобы каждая номенклатура в шаблоне имела равное процентное значение.</li><li>Если для поля **Метод распределения** установлено значение **Переменная сумма**, **Нулевая родительская сумма** или **Нулевая сумма**, процент равен 0 (нулю) и не может быть изменен.</li></ul><p>Значением этого поля может быть любое положительное число от 0 (нуля) до 100. Сумма всех процентов должна равняться 100.</p> |
| Общий процент | <p>Сумма значений в столбце **Процент**.</p><ul><li>Если для поля **Метод распределения** установлено значение **Равная сумма** или **Процент**, сумма всех процентов должна быть равна 100.</li><li>Если для поля **Метод распределения** установлено значение **Переменная сумма**, **Нулевая родительская сумма** или **Нулевая сумма**, общий процент равен 0 (нулю).</li></ul> |

## <a name="revenue-split-on-a-sales-order"></a>Разделение выручки для заказа на продажу

Чтобы создать заказ на продажу, содержащий номенклатуру, настроенную для разделения выручки, выполните следующие действия.

1. На странице **Заказ на продажу** создайте заказ на продажу.
2. В строке для каждой номенклатуры, настроенной для разделения выручки, установите флажок **Разделение выручки**. Эта номенклатура становится родительской номенклатурой. Если шаблон уже настроен, дочерние номенклатуры автоматически отображаются в списке.
3. Чтобы добавить еще дочерние номенклатуры, выберите **Добавить дочерний объект разделения выручки** и выберите дочернюю номенклатуру, которую требуется добавить.
4. Сохраните заказ.

## <a name="revenue-split-with-billing-schedules"></a>Разделение выручки с графиками выставления счетов

Чтобы создать график выставления счетов, содержащий номенклатуру, настроенную для разделения выручки, выполните следующие действия.

1. На странице **Все/активные графики выставления счетов** создайте график выставления счетов.
2. В строке для каждой номенклатуры, настроенной для разделения выручки, установите флажок **Разделение выручки**. Эта номенклатура становится родительской номенклатурой. Если шаблон уже настроен, дочерние номенклатуры автоматически отображаются в списке.
3. Чтобы добавить еще дочерние номенклатуры, выберите **Добавить дочерний объект разделения выручки** и выберите дочернюю номенклатуру, которую требуется добавить.
4. Продолжите выполнение шагов по работе с графиком выставления счетов.

> [!NOTE]
> Если параметр **Автоматически создать разделение выручки** имеет значение **Да** на странице **Параметры повторяющегося выставления счетов по контракту**, выполняются следующие действия:
>
> - Если номенклатура строки настроена как родительская номенклатура в шаблоне разделения выручки, флажок **Разделение выручки** будет автоматически установлен.
> - Дочерние номенклатуры автоматически вводятся в заказ на продажу или в строку графика выставления счетов.
>
> Если для параметра **Автоматически создать разделение выручки** задано значение **Нет**, поведение объясняется ранее.

## <a name="additional-revenue-split-information"></a>Сведения о дополнительных разбивках дохода

При добавлении номенклатуры, которая является частью разбивки выручки, обратите внимание на следующую информацию: 

- Родительская сумма не может быть отложенной.
- Дата начала, дата окончания, количество, единица измерения, место и склад для дочерних номенклатур основаны на родительской номенклатуре. Эти значения для дочерних элементов изменить нельзя. Все изменения должны быть внесены в родительский элемент номенклатуры. 
- Метод ценообразования является **Фиксированным** и не может быть изменен.
- Дочерние номенклатуры можно добавлять или удалять.
- Родительские и дочерние номенклатуры должны использовать одну и ту же номенклатурную группу. 
- Дочерние номенклатуры могут иметь одну из следующих настроек:

    - Поля **Частота выставления счетов** и **Интервалы выставления счетов** устанавливаются равными значению родительской номенклатуры. 
    - В поле **Частота выставления счетов** установлено значение **Однократно**. В этом случае в поле **Интервал выставления счетов** автоматически устанавливается значение **1**. 

- Сумма чистых сумм дочерних номенклатур равна родительской сумме. Если метод распределения равен **нулю**, суммы дочерних номенклатур и родительской суммы равны 0 (нулю). 

    > [!NOTE]
    > Если метод распределения имеет **нулевую родительскую сумму**, (ненулевая) сумма дочерних элементов не равна родительской сумме, равной 0 (нулю). Этот метод распределения используется для внутренних целей, чтобы сотрудники могли видеть дочерние номенклатуры. Однако клиенты могут только видеть родительскую номенклатуру.

- Если тип упорядочения нескольких элементов (МЕА) для заказа на продажу **Одиночный**, то при добавлении родительской и дочерней номенклатур создается соответствующая строка проводки распределения выручки по нескольким элементам. 
- Если метод распределения для разбиения выручки имеет **равные суммы**, а родительская сумма изменяется, суммы пересчитываются для всех дочерних строк. 
- Для выручки с разбиением, когда метод распределения является **переменной суммой**, происходит следующее:

    - Чистая сумма родительской номенклатуры отображается в столбце **Родительская сумма**. Это значение можно редактировать. Однако цена за единицу, чистая сумма и скидка равны 0 (нулю) и не могут быть изменены.
    - Цена за единицу дочернего элемента равна 0 (нулю). Можно изменить цену за единицу или чистую сумму. При изменении одного значения другое значение обновляется автоматически.

- Для выручки с разбиением, когда метод распределения является **Процентом**, происходит следующее:

    - Чистая сумма родительской номенклатуры отображается в столбце **Родительская сумма**. Это значение можно редактировать. Однако цена за единицу, чистая сумма и скидка равны 0 (нулю) и не могут быть изменены. 
    - Чистая сумма дочерних номенклатур рассчитывается как *процент* &times; от *родительской суммы*.

- Для выручки с разбиением, когда метод распределения является **равной суммой**, происходит следующее:

    - Чистая сумма родительской номенклатуры отображается в столбце **Родительская сумма**. Это значение можно редактировать. Однако цена за единицу, чистая сумма и скидка равны 0 (нулю) и не могут быть изменены. 
    - Чистая сумма дочерних номенклатур рассчитывается путем деления родительской суммы поровну между всеми дочерними номенклатурами. 
    - Если удаляются или добавляются дочерние номенклатуры, чистая сумма и цены за единицу пересчитываются, чтобы все дочерние строки имели равные суммы. 
    - Если родительская сумма не может быть разделена поровну, чистая сумма и цена за единицу для последней дочерней номенклатуры могут быть несколько больше или меньше чистой суммы и цены за единицу других дочерних номенклатур. 

- Для выручки с разбиением, когда метод распределения является **нулем**, происходит следующее:

    - Цену за единицу, чистую сумму и скидку можно изменить. Родительская сумма равна 0 (нулю) и не может быть изменена. 
    - Количество, единица измерения, место и склад для дочерних номенклатур основаны на родительской номенклатуре. Эти значения для дочерних элементов можно изменять. Все изменения должны быть внесены в родительский элемент номенклатуры. 
    - Цена за единицу и чистая цена дочерних номенклатур равна 0 (нулю) и не может быть изменена. 

- Для выручки с разбиением, когда метод распределения является **Нулевое родительские количество**, происходит следующее:

    - Цена за единицу, родительская сумма и чистая сумма родительской позиции равны 0 (ноль).
    - В графике выставления счетов дочерние строки отображаются так, как если бы они были добавлены вручную, а все значения обновляются на основе выбранной группы графиков выставления счетов. Эти значения можно изменить. Для дочерних номенклатур можно получить доступ к параметрам **Эскалация и скидка** и **Расширенное ценообразование** , используя поля **Введенного количества**, **Цена за единицу**, **Скидка** и **Чистая сумма** для **просмотра подробных сведений о выставлении счетов**. 
    - Для заказа на продажу дочерние строки имеют процент скидки и скидки, равные 0 (нулю). 
    - Можно изменить частоту выставления счетов родительской и дочерней номенклатуры, и каждая строка может иметь разную частоту. Однако родительская номенклатура автоматически обновляется, чтобы использовать ее в качестве кратчайшей частоты между дочерними строками. Например, разбиение выручки содержит две дочерние номенклатуры, одна из которых использует **месячную** частоту выставления счетов, а другая использует **ежегодную** частоту выставления счетов. В этом случае частота выставления счетов для родительской номенклатуры обновляется до **ежемесячно**
