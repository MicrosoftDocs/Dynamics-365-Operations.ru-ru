---
title: Наборы признаний выручки
description: В этом разделе описываются функции набора, включенные в функцию признания выручки в модуле "Расчеты с клиентами". В набор входят родительская номенклатура и номенклатуры с несколькими компонентами.
author: kweekley
ms.date: 01/04/2021
ms.topic: index-page
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kfend
ms.search.region: Global
ms.author: kweekley
ms.search.validFrom: 2021-01-04
ms.dyn365.ops.version: 10.0.7
ms.openlocfilehash: 62a4d7f36ad0b36edeaec75e9b670e2aad143703
ms.sourcegitcommit: 631d2cea52590af15f208e9af584446e85540fcf
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/07/2022
ms.locfileid: "8725829"
---
# <a name="revenue-recognition-bundles"></a>Наборы признаний выручки

[!include [banner](../includes/banner.md)]

В этом разделе описываются функции набора, включенные в функцию признания выручки в модуле "Расчеты с клиентами". В набор входят родительская номенклатура и номенклатуры с несколькими компонентами. Родительская номенклатура вводится в заказ на продажу, чтобы ввод заказа был более эффективным. Однако она разворачивается в компонентные номенклатуры. Внутренние документы, такие как отборочная накладная, содержат список компонентных номенклатур. Однако внешние документы будут показывать только родительскую номенклатуру.

> [!NOTE]
> Каналы Microsoft Dynamics 365 Commerce, такие как интерактивные, POS-терминалы и центры обработки вызовов, не поддерживают признание выручки (в том числе функции набора). Сюда также входит решение "Перспективный клиент в наличные деньги" для Dynamics 365 Supply Chain Management и Dynamics 365 Sales. Номенклатуры, которые настроены на использование признания выручки, не должны добавляться к заказам или проводкам, созданным в каналах Commerce или в решении "Перспективный клиент в наличные деньги".

Для настройки наборов необходимо ввести конфигурационные ключи для признания выручки. Однако можно использовать наборы, даже если признание выручки не настроено. Таким же образом можно использовать признание выручки, если наборы не настроены. Если настраивается признание выручки, компонентные номенклатуры определяют цену в выручке и график признания выручки, которые используются для признания выручки или РБП при выставлении накладной по заказу на продажу.

Эта настройка для наборов использует функцию спецификации (BOM). Сведения о настройке номенклатуры набора см. в разделе [Настройка признания выручки](revenue-recognition-setup.md). Если родительская номенклатура помечена как набор, она обрабатывается иначе, нежели другие номенклатуры спецификации. Ниже представлен список различий:

- Наборы должны разворачиваться с помощью подтверждения заказа на продаж. Для этого следует выбрать **Подтверждение заказа на продажу** на вкладке **Продажи** области действий на странице заказа на продажу. Номенклатуры набора не должны разворачиваться путем выбора **строки спецификации** в разделе **Развертывание** в меню **Строка заказа на продажу** на экспресс-вкладке **Строки заказа на продажу**. В противном случае номенклатура будет обрабатываться как спецификация, а не как набор.
- Заказ на продажу, содержащий номенклатуру набора, должен быть подтвержден до создания отборочной накладной или счета-фактуры.
- Когда набор разворачивается с помощью подтверждения заказа на продажу, родительская номенклатура отменяется, и цена за единицу и скидки распределяются на компонентные номенклатуры набора.
- Сумма компонентных номенклатур должна быть всегда равна цене в родительской номенклатуре. Таким образом, существуют ограничения на поля, которые можно обновить или изменить для компонентных номенклатур. Например, цену за единицу нельзя изменить вручную. Ее также нельзя косвенно изменить, обеспечив вступление в силу нового ценового соглашения. Для предотвращения наличия нового ценового соглашения складские аналитики в компонентных номенклатурах невозможно изменить.
- При печати внешнего документа, такого как подтверждение заказа на продажу или накладная, выполняется печать родительской номенклатуры, а не компонентных номенклатур.

## <a name="bundles-on-sales-orders"></a>Наборы по заказам на продажу

Демонстрационная компания USMF содержит следующую настройку набора. Обратите внимание, что все настройки для признания выручки, такие как настройка графиков признания выручки, были удалены из номенклатур, включенных в этот сценарий.

**Родительская номенклатура:** набор для переносного компьютера

- **Компонентная номенклатура:** количество 1 номенклатуры 1000
- **Компонентная номенклатура:** количество 1 номенклатуры S0021
- **Компонентная номенклатура:** количество 1 номенклатуры Поддержка

*Базовая цена продажи* компонентных номенклатур является важной частью настройки компонентов. Базовая цена продажи определяется на экспресс-вкладке **Продажи** номенклатуры. Она используется для расчета коэффициента распределения, когда цена за единицу родительской номенклатуры распределяется по компонентным номенклатурам. Цены продажи коммерческого соглашения никогда не используются для этой цели.

Для компонентных номенклатур определены следующие базовые цены продажи:

- **1000:** 1900 долларов США
- **S0021:** 150 долларов США
- **Поддержка:** 500 долларов США

Заказ на продажу вводится для клиентов US-004, Cave Wholesales. Вводится только строка для номенклатуры набора для переносного компьютера. Цена единицы по умолчанию для родительской строки может быть взята из множества мест, таких как коммерческое соглашение или базовая цена продажи. В этом примере сумма в 2300 долларов США была введена вручную в качестве цены за единицу.

[![Номенклатура набора для переносного компьютера по заказу на продажу.](./media/bundle-01.png)](./media/bundle-01.png)

Так как заказ на продажу содержит набор, он должен быть подтвержден. В диалоговом окне подтверждения отображаются компоненты набора.

[![Диалоговое окно "Подтверждение заказа на продажу", в котором отображаются компонентные номенклатуры.](./media/bundle-02.png)](./media/bundle-02.png)

Однако напечатанный отчет о подтверждении будет содержать только родительскую номенклатуру набора, поскольку этот отчет является внешним документом для клиента.

[![Отчет о подтверждении, содержащий только родительскую номенклатуру.](./media/bundle-03.png)](./media/bundle-03.png)

После подтверждения заказа на продажу родительская номенклатура все равно отображается в заказе на продажу, но его статус изменяется на **Отменено**. Кроме того, чистая сумма отслеживается в поле **Чистая сумма набора**. Эта сумма требуется для печати накладной, так как накладная отображает родительскую номенклатуру, а не компонентные номенклатуры.

Сумма компонентных номенклатур должна равняться значению **Чистая сумма набора** родительской номенклатуры, поскольку это значение является суммой, которая представлена клиенту в распечатанной накладной. Чтобы гарантировать, что накладная соответствует суммам, разнесенным в главную книгу, изменения в компонентных номенклатурах будут ограничены. Например, нельзя изменить сайт и склад, поскольку эти изменения могут привести к изменению цены на основе коммерческого соглашения.

Цена за единицу из строки для родительской номенклатуры распределяется по компонентам следующим образом:

**Общая базовая цена продажи из компонентов:** 1900 + 500 + 150 = 2550 долларов США

- **Компонент 1:** 2300 × (1900 ÷ 2550) = 1713,73 долларов США
- **Компонент 2:** 2300 × (500 ÷ 2550) = 450,98 долларов США
- **Компонент 3:** 2300 × (150 ÷ 2550) = 135,29 долларов США

Сумма компонентов должна составлять 2300 долларов США и она равна: (1713,73 + 450,98 + 135,29 = 2300 долларов США).

Если необходимо внести изменения для всех компонентных номенклатур, родительская номенклатура может быть удалена. В этом случае компонентные номенклатуры также удаляются. Затем родительскую номенклатуру можно добавить снова, а необходимые изменения могут быть выполнены до подтверждения заказа на продажу.

[![Номенклатура набора, содержащая изменения компонентных номенклатур.](./media/bundle-04.png)](./media/bundle-04.png)

Когда заказ на продажу скомплектован и упакован, в документы войдут только компоненты набора. Отборочная накладная и накладная должны содержать полный набор. В противном случае они не могут быть разнесены. Например, в диалоговом окне показаны три компонентные номенклатуры. При попытке удалить одну из них будет выведено сообщение об ошибке, в котором говорится, что все продукты в наборе должны быть отгружены до того, как по ним можно будет выставить накладную.

Набор должен быть отгружен, затем выставляется накладная для полного набора. К примеру, при изменении количества номенклатуры 1000 на 4, а количества других компонентных номенклатур осталось равно 5, отборочная накладная и накладная не могут быть разнесены.

Частичный объем можно отгружать и выставлять по нему накладную только в том случае, если это количество уменьшается для всех компонентов набора. Например, количество 5 номенклатуры набора для переносного компьютера вводится в заказ на продажу. После подтверждения заказа на продажу в нем отображаются три компонентных номенклатуры, а количество каждой из них равно 5. По умолчанию при отгрузке и выставлении накладных количество для каждого компонента будет установлено равным 5. Однако можно скорректировать количество до 3 для всех трех компонентных номенклатур. В этом случае будут отгружены три полных набора и по ним выставлены накладные. Оставшиеся две номенклатуры набора (количество, равное 2 для каждого из трех компонентных номенклатур) можно отгружать и выставлять по ним накладные позднее.

Последний шаг — выставить накладную по заказу на продажу. При выставлении накладных в диалоговом окне отобразятся компонентные номенклатуры.

[![Диалоговое окно выставления накладной, в котором отображаются компонентные номенклатуры.](./media/bundle-06.png)](./media/bundle-06.png)

Однако распечатанная накладная будет отображать только родительскую номенклатуру.
 
[![Распечатанная накладная, отображающая только родительскую номенклатуру.](./media/bundle-07.png)](./media/bundle-07.png)

Журнал накладных, созданный после разноски, не включает родительскую номенклатуру из набора, поскольку эта номенклатура имеет статус **Отменено**.

[![Журнал накладных, не включающий родительскую номенклатуру.](./media/bundle-08.png)](./media/bundle-08.png)

Важно, чтобы журнал накладных не включал родительскую номенклатуру из набора, так как все процессы, выполняемые после разноски накладной, основываются на этом журнале накладных. Например, если создать кредит-ноту на вкладке **Продажи** в области действий, создается кредит-нота, которая будет включать компонентные номенклатуры, но не родительскую номенклатуру.

[![Кредит-нота, отображающая компонентные номенклатуры, но не родительскую номенклатуру.](./media/bundle-09.png)](./media/bundle-09.png)


[!INCLUDE[footer-include](../../includes/footer-banner.md)]
