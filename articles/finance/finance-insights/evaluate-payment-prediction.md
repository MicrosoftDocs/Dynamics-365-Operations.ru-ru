---
title: Оценка модели прогнозирования первоначальных платежей клиента (предварительная версия)
description: В этой теме описываются шаги, которые можно предпринять для понимания модели прогнозирования платежей клиентов и оценки ее эффективности.
author: ShivamPandey-msft
manager: AnnBe
ms.date: 05/28/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: roschlom
ms.custom: 14151
ms.assetid: 3d43ba40-780c-459a-a66f-9a01d556e674
ms.search.region: Global
ms.author: shpandey
ms.search.validFrom: 2020-05-28
ms.dyn365.ops.version: AX 10.0.8
ms.openlocfilehash: ef0daec6153405fc064b1185ba7067796ff5bb45
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/15/2021
ms.locfileid: "4995123"
---
# <a name="evaluate-the-initial-customer-payment-prediction-model-preview"></a><span data-ttu-id="26ce0-103">Оценка модели прогнозирования первоначальных платежей клиента (предварительная версия)</span><span class="sxs-lookup"><span data-stu-id="26ce0-103">Evaluate the initial customer payment prediction model (preview)</span></span>

[!include [banner](../includes/banner.md)]
[!include [preview banner](../includes/preview-banner.md)]

<span data-ttu-id="26ce0-104">В этой теме объясняется, как оценить прогнозную модель после включения финансового анализа и последующего создания и обучения первой модели.</span><span class="sxs-lookup"><span data-stu-id="26ce0-104">This topic explains how to evaluate a prediction model after you've turned on Finance Insights and then generated and trained your first model.</span></span> <span data-ttu-id="26ce0-105">В этой теме рассматриваются модели для прогнозирования платежей клиентов.</span><span class="sxs-lookup"><span data-stu-id="26ce0-105">This topic addresses models for predicting customer payments.</span></span> <span data-ttu-id="26ce0-106">В ней описываются шаги, которые можно предпринять для понимания модели прогнозирования платежей клиентов и оценки ее эффективности.</span><span class="sxs-lookup"><span data-stu-id="26ce0-106">It describes the steps that you can take to understand the customer payment prediction model and evaluate its effectiveness.</span></span>

## <a name="getting-details-about-the-model"></a><span data-ttu-id="26ce0-107">Получение сведений о модели</span><span class="sxs-lookup"><span data-stu-id="26ce0-107">Getting details about the model</span></span>

<span data-ttu-id="26ce0-108">На странице **Параметры финансового анализа** в Microsoft Dynamics 365 Finance рядом с показателем точности появляется ссылка **Улучшить точность модели**.</span><span class="sxs-lookup"><span data-stu-id="26ce0-108">On the **Finance Insights parameters** page in Microsoft Dynamics 365 Finance, an **Improve model accuracy** link appears next to the accuracy score.</span></span>

<span data-ttu-id="26ce0-109">[![Ссылка улучшения точности модели](./media/prediction-model.png)](./media/prediction-model.png)</span><span class="sxs-lookup"><span data-stu-id="26ce0-109">[![Improve model accuracy link](./media/prediction-model.png)](./media/prediction-model.png)</span></span>

<span data-ttu-id="26ce0-110">Эта ссылка переводит вас в AI Builder, где можно узнать больше о текущей модели, а также предпринять шаги по ее совершенствованию.</span><span class="sxs-lookup"><span data-stu-id="26ce0-110">This link takes you to AI Builder, where you can learn more about the current model and also take steps to improve it.</span></span> <span data-ttu-id="26ce0-111">На следующем рисунке показана открытая страница.</span><span class="sxs-lookup"><span data-stu-id="26ce0-111">The following illustration shows the page that is opened.</span></span>

<span data-ttu-id="26ce0-112">[![AI Builder](./media/what-to-predict.png)](./media/what-to-predict.png)</span><span class="sxs-lookup"><span data-stu-id="26ce0-112">[![AI Builder](./media/what-to-predict.png)](./media/what-to-predict.png)</span></span>

<span data-ttu-id="26ce0-113">На открытой странице показаны следующие сведения:</span><span class="sxs-lookup"><span data-stu-id="26ce0-113">The page that is opened shows the following information:</span></span>

- <span data-ttu-id="26ce0-114">В разделе **Производительность** оценка производительности модели обеспечивает перспективу качества модели.</span><span class="sxs-lookup"><span data-stu-id="26ce0-114">In the **Performance** section, the model performance grade provides perspective on the quality of the model.</span></span> <span data-ttu-id="26ce0-115">Дополнительные сведения об этой оценке см. в разделе [Производительность модели прогнозирования](https://docs.microsoft.com/ai-builder/prediction-performance) в документации по AI Builder.</span><span class="sxs-lookup"><span data-stu-id="26ce0-115">For more information about this grade, see [Prediction model performance](https://docs.microsoft.com/ai-builder/prediction-performance) in the AI Builder documentation.</span></span>
- <span data-ttu-id="26ce0-116">В разделе **Самые влиятельные данные** показано, как важны для модели были данные различных входных типов.</span><span class="sxs-lookup"><span data-stu-id="26ce0-116">The **Most influential data** section shows how important different input types of data were for your model.</span></span> <span data-ttu-id="26ce0-117">Можно оценить этот список и соответствующие процентные доли, чтобы определить, согласованы ли сведения с тем, что вам известно о вашем бизнесе и рынке.</span><span class="sxs-lookup"><span data-stu-id="26ce0-117">You can evaluate this list and the corresponding percentages to determine whether the information is consistent with what you know about your business and market.</span></span>

    <span data-ttu-id="26ce0-118">[![Разделы производительности и самых влиятельных данных для модели прогноза](./media/models.png)](./media/models.png)</span><span class="sxs-lookup"><span data-stu-id="26ce0-118">[![Performance and Most influential data sections for the prediction model](./media/models.png)](./media/models.png)</span></span>

- <span data-ttu-id="26ce0-119">В разделе **Производительность** выберите **См. сведения** для получения дополнительных сведений о классе и других вопросах.</span><span class="sxs-lookup"><span data-stu-id="26ce0-119">In the **Performance** section, select **See details** to learn more about the grade and other considerations.</span></span> <span data-ttu-id="26ce0-120">На следующем рисунке сведения показывают, что модель использует меньше сведений, чем рекомендуется.</span><span class="sxs-lookup"><span data-stu-id="26ce0-120">In the following illustration, the details show that the model uses less information than is recommended.</span></span> <span data-ttu-id="26ce0-121">Таким образом, система создала предупреждающее сообщение.</span><span class="sxs-lookup"><span data-stu-id="26ce0-121">Therefore, the system has generated a warning message.</span></span>

    <span data-ttu-id="26ce0-122">[![Предупреждения о производительности модели](./media/details.png)](./media/details.png)</span><span class="sxs-lookup"><span data-stu-id="26ce0-122">[![Warnings about the model's performance](./media/details.png)](./media/details.png)</span></span>

## <a name="digging-deeper"></a><span data-ttu-id="26ce0-123">Более подробный анализ</span><span class="sxs-lookup"><span data-stu-id="26ce0-123">Digging deeper</span></span>

<span data-ttu-id="26ce0-124">Хотя точность является хорошей отправной точкой для оценки модели, а уровень производительности обеспечивает перспективу, AI Builder предоставляет более подробные показатели, которые можно использовать для оценки.</span><span class="sxs-lookup"><span data-stu-id="26ce0-124">Although accuracy is a good starting point for evaluating a model, and the performance grade provides perspective, AI Builder provides more detailed metrics that you can use for your evaluation.</span></span> <span data-ttu-id="26ce0-125">Чтобы загрузить сведения, в разделе **Производительность** выберите кнопку с многоточием (**...**) рядом с кнопкой **Использовать модель**, а затем выберите **Загрузить подробные метрики**.</span><span class="sxs-lookup"><span data-stu-id="26ce0-125">To download the details, in the **Performance** section, select the ellipsis button (**...**) next to the **Use model** button, and then select **Download detailed metrics**.</span></span>

<span data-ttu-id="26ce0-126">[![Команда "Загрузить подробные метрики"](./media/performance.png)](./media/performance.png)</span><span class="sxs-lookup"><span data-stu-id="26ce0-126">[![Download detailed metrics command](./media/performance.png)](./media/performance.png)</span></span>

<span data-ttu-id="26ce0-127">На следующем рисунке показан формат, в котором можно загрузить данные.</span><span class="sxs-lookup"><span data-stu-id="26ce0-127">The following illustration shows the format that you can download the data in.</span></span>

<span data-ttu-id="26ce0-128">[![Формат загруженных данных](./media/data-format.png)](./media/data-format.png)</span><span class="sxs-lookup"><span data-stu-id="26ce0-128">[![Format of downloaded data](./media/data-format.png)](./media/data-format.png)</span></span>

<span data-ttu-id="26ce0-129">Для более глубокого анализа результатов хорошей отправной точкой является проверка метрики "Матрица ошибок".</span><span class="sxs-lookup"><span data-stu-id="26ce0-129">For a deeper analysis of the results, a good starting point is to review the "Confusion Matrix" metric.</span></span> <span data-ttu-id="26ce0-130">Например, здесь представлены данные, которые отображаются для данной метрики на предыдущем рисунке.</span><span class="sxs-lookup"><span data-stu-id="26ce0-130">For example, here is the data that is shown for this metric in the previous illustration.</span></span>

`{"name": "Confusion Matrix", "value": {"schema_type": "confusion_matrix", "schema_version": "1.0.0", "data": {"class_labels": ["0", "1", "2"], "matrix": [[71, 9, 21], [5, 0, 27], [2, 0, 45]]}}, "type": "dictionaryNumericalList", "isGlobalScore": false}`

<span data-ttu-id="26ce0-131">Эти данные можно расширить следующим образом:</span><span class="sxs-lookup"><span data-stu-id="26ce0-131">You can expand this data in the following way.</span></span>

|                          | <span data-ttu-id="26ce0-132">Прогноз "Вовремя"</span><span class="sxs-lookup"><span data-stu-id="26ce0-132">Predicted On time</span></span> | <span data-ttu-id="26ce0-133">Прогноз "Поздно"</span><span class="sxs-lookup"><span data-stu-id="26ce0-133">Predicted Late</span></span> | <span data-ttu-id="26ce0-134">Прогноз "Очень поздно"</span><span class="sxs-lookup"><span data-stu-id="26ce0-134">Predicted Very late</span></span> |
|--------------------------|-------------------|----------------|---------------------|
| <span data-ttu-id="26ce0-135">Фактический платеж вовремя</span><span class="sxs-lookup"><span data-stu-id="26ce0-135">Actual on time payment</span></span>   | <span data-ttu-id="26ce0-136">**71**</span><span class="sxs-lookup"><span data-stu-id="26ce0-136">**71**</span></span>            | <span data-ttu-id="26ce0-137">0</span><span class="sxs-lookup"><span data-stu-id="26ce0-137">0</span></span>              | <span data-ttu-id="26ce0-138">21</span><span class="sxs-lookup"><span data-stu-id="26ce0-138">21</span></span>                  |
| <span data-ttu-id="26ce0-139">Фактический просроченный платеж</span><span class="sxs-lookup"><span data-stu-id="26ce0-139">Actual late payment</span></span>      | <span data-ttu-id="26ce0-140">5</span><span class="sxs-lookup"><span data-stu-id="26ce0-140">5</span></span>                 | <span data-ttu-id="26ce0-141">**0**</span><span class="sxs-lookup"><span data-stu-id="26ce0-141">**0**</span></span>          | <span data-ttu-id="26ce0-142">27</span><span class="sxs-lookup"><span data-stu-id="26ce0-142">27</span></span>                  |
| <span data-ttu-id="26ce0-143">Фактический сильно просроченный платеж</span><span class="sxs-lookup"><span data-stu-id="26ce0-143">Actual very late payment</span></span> | <span data-ttu-id="26ce0-144">2</span><span class="sxs-lookup"><span data-stu-id="26ce0-144">2</span></span>                 | <span data-ttu-id="26ce0-145">0</span><span class="sxs-lookup"><span data-stu-id="26ce0-145">0</span></span>              | <span data-ttu-id="26ce0-146">**45**</span><span class="sxs-lookup"><span data-stu-id="26ce0-146">**45**</span></span>              |

<span data-ttu-id="26ce0-147">В матрице ошибок показаны результаты случайно выбранного тестового набора данных из процесса обучения.</span><span class="sxs-lookup"><span data-stu-id="26ce0-147">The confusion matrix shows the results of a randomly selected test dataset from the training process.</span></span> <span data-ttu-id="26ce0-148">Так как эти закрытые накладные не использовались для обучения модели, они являются хорошими тестовыми случаями для модели.</span><span class="sxs-lookup"><span data-stu-id="26ce0-148">Because these closed invoices weren't used to train the model, they are good test cases for the model.</span></span> <span data-ttu-id="26ce0-149">Кроме того, поскольку фактическое состояние накладной известно, производительность модели также можно увидеть.</span><span class="sxs-lookup"><span data-stu-id="26ce0-149">Additionally, because the actual state of the invoice is known, the model's performance can also be seen.</span></span>

<span data-ttu-id="26ce0-150">Первое, что нужно искать — это самое обычное фактическое значение.</span><span class="sxs-lookup"><span data-stu-id="26ce0-150">The first thing to look for is the most common actual value.</span></span> <span data-ttu-id="26ce0-151">Хотя это значение может не быть идеально выровнено с общим набором данных, это разумная аппроксимация.</span><span class="sxs-lookup"><span data-stu-id="26ce0-151">Although this value might not be perfectly aligned with the overall dataset, it's a reasonable approximation.</span></span> <span data-ttu-id="26ce0-152">В этом случае **Фактический платеж вовремя** выполняется для 92 из общего количества 171 накладной и является наиболее распространенным фактическим значением.</span><span class="sxs-lookup"><span data-stu-id="26ce0-152">In this case, **Actual on time payment** occurs for 92 of the 171 total invoices and is the most common actual value.</span></span> <span data-ttu-id="26ce0-153">Таким образом, это хорошая база для вашей модели.</span><span class="sxs-lookup"><span data-stu-id="26ce0-153">Therefore, it's a good baseline for your model.</span></span> <span data-ttu-id="26ce0-154">Если вы просто предположите, что все накладные будут оплачены вовремя, необходимо было бы исправить 92 из 171 (то есть, 54 процента времени).</span><span class="sxs-lookup"><span data-stu-id="26ce0-154">If you just guessed that all invoices would be on time, you would be correct 92 out of 171 times (that is, 54 percent of the time).</span></span>

<span data-ttu-id="26ce0-155">Важно понимать, насколько сбалансирован набор данных.</span><span class="sxs-lookup"><span data-stu-id="26ce0-155">It's important that you understand how balanced your dataset is.</span></span> <span data-ttu-id="26ce0-156">В этом случае 92 из 171 накладных были оплачены вовремя, 32 были оплачены с опозданием, а 47 — с очень большим опозданием.</span><span class="sxs-lookup"><span data-stu-id="26ce0-156">In this case, 92 out of 171 invoices were paid on time, 32 were paid late, and 47 were paid very late.</span></span> <span data-ttu-id="26ce0-157">Эти значения указывают на разумно сбалансированный набор данных, поскольку в каждой классификации имеются нетривиальные результаты.</span><span class="sxs-lookup"><span data-stu-id="26ce0-157">These values indicate a reasonably balanced dataset, because there are non-trivial results in each classification.</span></span> <span data-ttu-id="26ce0-158">Ситуация, когда одно из состояний имеет очень мало результатов, может быть непростой для модели машинного обучения.</span><span class="sxs-lookup"><span data-stu-id="26ce0-158">A situation where one of the states has very few results can be challenging for a machine learning model.</span></span>

<span data-ttu-id="26ce0-159">Точность модели указывает количество правильных прогнозов для проверочного набора данных.</span><span class="sxs-lookup"><span data-stu-id="26ce0-159">The accuracy of the model indicates the number of correct predictions for the test dataset.</span></span> <span data-ttu-id="26ce0-160">Эти правильные прогнозы представляют собой значения, которые отображаются полужирным шрифтом в предыдущем примере.</span><span class="sxs-lookup"><span data-stu-id="26ce0-160">These correct predictions are the values that are shown in bold in the preceding example.</span></span> <span data-ttu-id="26ce0-161">В этом случае значения создают вычисленную точность 67,8 процента (= \[71 + 0 + 45\] ÷ 171).</span><span class="sxs-lookup"><span data-stu-id="26ce0-161">In this case, the values produce a calculated accuracy of 67.8 percent (= \[71 + 0 + 45\] ÷ 171).</span></span> <span data-ttu-id="26ce0-162">Это значение представляет собой усовершенствование на 14% от простого предположения с 54 процентами и является одним индикатором качества модели.</span><span class="sxs-lookup"><span data-stu-id="26ce0-162">This value represents an improvement of 14 percent over the baseline guess of 54 percent and is one indicator of the model's quality.</span></span>

<span data-ttu-id="26ce0-163">Если взглянуть более внимательно на матрицу ошибок, вы увидите, что модель работает хорошо для прогноза оплаты накладных вовремя и с большой задержкой.</span><span class="sxs-lookup"><span data-stu-id="26ce0-163">If you look more closely at the confusion matrix, you will notice that the model does a good job of predicting on-time and very late invoice payments.</span></span> <span data-ttu-id="26ce0-164">Однако она неверна для всех 32 накладных, которые фактически были оплачены поздно (но не очень поздно).</span><span class="sxs-lookup"><span data-stu-id="26ce0-164">However, it's wrong about all 32 invoices that were actually paid late (but not very late).</span></span> <span data-ttu-id="26ce0-165">Этот результат предполагает, что потребуется дополнительное исследование и усовершенствование модели.</span><span class="sxs-lookup"><span data-stu-id="26ce0-165">This result suggests that additional exploration and improvement of the model are required.</span></span>

<span data-ttu-id="26ce0-166">Число, представляющее производительность модели лучше, чем точность, — это показатель макро F1.</span><span class="sxs-lookup"><span data-stu-id="26ce0-166">A number that represents the performance of the model better than accuracy is the F1 Macro score.</span></span> <span data-ttu-id="26ce0-167">Этот показатель учитывает результаты каждого состояния классификации (вовремя, поздно и очень поздно).</span><span class="sxs-lookup"><span data-stu-id="26ce0-167">This score considers the results of each classification state (on-time, late, and very late).</span></span> <span data-ttu-id="26ce0-168">Например, здесь представлены данные, которые отображаются для метрики "Макро F1" на предыдущем рисунке.</span><span class="sxs-lookup"><span data-stu-id="26ce0-168">For example, here is the data that is shown for the "F1 Macro" metric in the previous illustration.</span></span>

`{"name": "F1 Macro", "value": 0.4927170868347339, "type": "percentage", "isGlobalScore": false}`

<span data-ttu-id="26ce0-169">В этом случае оценка макро F1, равная приблизительно 49,3 процентам, указывает на то, что модель не предоставляет эффективные прогнозы по каждому из состояний, несмотря на общую оценку точности, которая кажется довольно высокой</span><span class="sxs-lookup"><span data-stu-id="26ce0-169">In this case, the F1 Macro score of approximately 49.3 percent indicates that the model doesn't provide effective predictions across each state, despite an overall accuracy score that seems reasonably high.</span></span>

## <a name="improving-the-model"></a><span data-ttu-id="26ce0-170">Совершенствование модели</span><span class="sxs-lookup"><span data-stu-id="26ce0-170">Improving the model</span></span>

<span data-ttu-id="26ce0-171">Поняв результаты первой модели лучше, возможно, потребуется улучшить модель путем добавления или удаления столбцов функций или путем фильтрации всех частей набора данных, которые не поддерживают точные прогнозы.</span><span class="sxs-lookup"><span data-stu-id="26ce0-171">After you understand the results of your first model better, you might want to improve the model by adding or removing feature columns, or by filtering any parts of the dataset that don't support accurate predictions.</span></span> <span data-ttu-id="26ce0-172">Закройте AI Builder, а затем воспользуйтесь ссылкой **Улучшить модель** в Dynamics 365 Finance для перезапуска процесса AI Builder.</span><span class="sxs-lookup"><span data-stu-id="26ce0-172">Close AI Builder, and then use the **Improve model** link in Dynamics 365 Finance to restart the AI Builder process.</span></span> <span data-ttu-id="26ce0-173">Можно экспериментировать с различными характеристиками без воздействия на опубликованную модель.</span><span class="sxs-lookup"><span data-stu-id="26ce0-173">You can experiment with different characteristics without affecting the published model.</span></span> <span data-ttu-id="26ce0-174">Опубликованная модель затрагивается только в том случае, если выбрано значение **Опубликовать**.</span><span class="sxs-lookup"><span data-stu-id="26ce0-174">The published model is affected only when you select **Publish**.</span></span> <span data-ttu-id="26ce0-175">Помните, что одна модель используется для вашего экземпляра Dynamics 365 Finance.</span><span class="sxs-lookup"><span data-stu-id="26ce0-175">Remember that a single model is used for your instance of Dynamics 365 Finance.</span></span> <span data-ttu-id="26ce0-176">Поэтому перед публикацией следует внимательно просмотреть любую новую модель.</span><span class="sxs-lookup"><span data-stu-id="26ce0-176">Therefore, you should carefully review any new model before you publish it.</span></span>

## <a name="for-more-information"></a><span data-ttu-id="26ce0-177">Дополнительные сведения</span><span class="sxs-lookup"><span data-stu-id="26ce0-177">For more information</span></span>

<span data-ttu-id="26ce0-178">Дополнительные сведения об оценке моделей прогнозирования см. в разделе [Результаты моделей машинного обучения](/confusion-matrix.md)</span><span class="sxs-lookup"><span data-stu-id="26ce0-178">For more information about how to evaluate prediction models, [Results of machine learning models](/confusion-matrix.md)</span></span>

#### <a name="privacy-notice"></a><span data-ttu-id="26ce0-179">Уведомление о конфиденциальности</span><span class="sxs-lookup"><span data-stu-id="26ce0-179">Privacy notice</span></span>
<span data-ttu-id="26ce0-180">Предварительные версии (1) могут использовать меньшую степень конфиденциальности и безопасности, чем сервис Dynamics 365 Finance and Operations, (2) не включаются в соглашение об уровне обслуживания (SLA) для этого сервиса, (3), не должны использоваться для обработки личных данных или других данных, являющихся объектом соответствия юридическим или нормативным требованиям и (4) имеет ограниченную поддержку.</span><span class="sxs-lookup"><span data-stu-id="26ce0-180">Previews (1) might use less privacy and fewer security measures than the Dynamics 365 Finance and Operations service, (2) aren't included in the service level agreement (SLA) for this service, (3) should not be used to process personal data or other data that is subject to legal or regulatory compliance requirements, and (4) have limited support.</span></span>
