---
title: Настройка процесса расширенного импорта банковских выверок
description: Функция расширенной банковской выверки позволяет импортировать электронные банковские выписки и автоматически выверять их с банковскими проводками в Microsoft Dynamics 365 Finance. В этой статье объясняется, как настроить функцию импорта для банковских выписок.
author: panolte
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: BankStatementFormat
audience: Application User
ms.reviewer: roschlom
ms.custom: 106853
ms.assetid: 45dae275-ea45-4c7e-b38f-89297c7b5352
ms.search.region: Global
ms.author: panolte
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 70a12148ca324e1e7e1f90d29d46f68cb4144438
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/15/2021
ms.locfileid: "4995323"
---
# <a name="set-up-the-advanced-bank-reconciliation-import-process"></a><span data-ttu-id="3d13f-104">Настройка процесса расширенного импорта банковских выверок</span><span class="sxs-lookup"><span data-stu-id="3d13f-104">Set up the advanced bank reconciliation import process</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="3d13f-105">Функция расширенной банковской выверки позволяет импортировать электронные банковские выписки и автоматически выверять их с банковскими проводками в Dynamics 365 Finance.</span><span class="sxs-lookup"><span data-stu-id="3d13f-105">The Advanced bank reconciliation feature lets you import electronic bank statements and automatically reconcile them with bank transactions in Dynamics 365 Finance.</span></span> <span data-ttu-id="3d13f-106">В этой статье объясняется, как настроить функцию импорта для банковских выписок.</span><span class="sxs-lookup"><span data-stu-id="3d13f-106">This article explains how to set up the import functionality for your bank statements.</span></span> 

<span data-ttu-id="3d13f-107">Настройка импорта банковской выписки зависит от формата электронной банковской выписки.</span><span class="sxs-lookup"><span data-stu-id="3d13f-107">The setup for bank statement import varies, depending on the format of your electronic bank statement.</span></span> <span data-ttu-id="3d13f-108">Finance поддерживает три готовых формата банковской выписки: ISO20022, MT940 и BAI2.</span><span class="sxs-lookup"><span data-stu-id="3d13f-108">Finance supports three bank statement formats out of the box: ISO20022, MT940, and BAI2.</span></span>

## <a name="set-time-zone-preference"></a><span data-ttu-id="3d13f-109">Задание предпочтительного часового пояса</span><span class="sxs-lookup"><span data-stu-id="3d13f-109">Set time zone preference</span></span>
<span data-ttu-id="3d13f-110">При настройке параметров импорта банковских выписок может быть важно учитывать часовой пояс данных даты и времени в файлах банковских выписок, которые будут импортированы.</span><span class="sxs-lookup"><span data-stu-id="3d13f-110">When you configure the bank statement import settings, it can be important to consider the time zone of the date-time data within the bank statement files that will be imported.</span></span> <span data-ttu-id="3d13f-111">По умолчанию предполагается, что все значения даты и времени уже заданы в формате UTC, поэтому при импорте данных не будет применяться преобразование часового пояса.</span><span class="sxs-lookup"><span data-stu-id="3d13f-111">The default is to assume any date and time values are already in Coordinated Universal Time (UTC) and so no time zone conversion will be applied when you import the data.</span></span> 

<span data-ttu-id="3d13f-112">Нет доступного варианта для указания часового пояса, используемого для импорта данных.</span><span class="sxs-lookup"><span data-stu-id="3d13f-112">There is an option available to specify a time zone to use for importing data.</span></span> <span data-ttu-id="3d13f-113">Этот параметр доступен в поле **Предпочтительный часовой пояс** на каждой странице **Сведения о формате исходных данных** (экспресс-вкладка **Рабочая область управления данными > Настройка источника данных > Выберите формат данных > Язык и стандарты**).</span><span class="sxs-lookup"><span data-stu-id="3d13f-113">This option is available in the **Time zone preference** field on each **Source data format details** page (**Data management workspace > Configure data sources > Select a data format > Regional settings** FastTab).</span></span> <span data-ttu-id="3d13f-114">Введенный здесь предпочтительный часовой пояс будет применяться ко всем операциям импорта, которые используют этот формат исходных данных.</span><span class="sxs-lookup"><span data-stu-id="3d13f-114">This time zone preference you enter will apply to all the imports that use that source data format.</span></span> <span data-ttu-id="3d13f-115">Можно создать столько форматов источника данных, сколько необходимо для импорта данных из нескольких часовых поясов.</span><span class="sxs-lookup"><span data-stu-id="3d13f-115">You can create as many data source formats as needed for importing data from multiple time zones.</span></span>  

<span data-ttu-id="3d13f-116">Этот часовой пояс может отличаться от часового пояса пользователя или компании, поэтому необходимо уточнить, какой часовой пояс используется данными даты и времени.</span><span class="sxs-lookup"><span data-stu-id="3d13f-116">This time zone might not be the same as a user’s or company’s time zone, so be sure to clarify what time zone the date and time data is using.</span></span> <span data-ttu-id="3d13f-117">При настройке предпочтительного часового пояса рекомендуется учитывать следующие моменты.</span><span class="sxs-lookup"><span data-stu-id="3d13f-117">We recommend that you consider the following points when setting a time zone preference.</span></span> 

 - <span data-ttu-id="3d13f-118">Предпочтительный часовой пояс будет применяться ко всем операциям импорта с использованием этого формата исходных данных.</span><span class="sxs-lookup"><span data-stu-id="3d13f-118">The time zone preference will apply to all imports using that source data format.</span></span> <span data-ttu-id="3d13f-119">Можно создать столько форматов источника данных, сколько необходимо для обработки импорта данных из нескольких часовых поясов.</span><span class="sxs-lookup"><span data-stu-id="3d13f-119">You can create as many data source formats as needed to handle importing data from multiple time zones.</span></span> 
 
 - <span data-ttu-id="3d13f-120">Предпочтительный часовой пояс должно быть локальным часовым поясом данных даты и времени в файле импорта.</span><span class="sxs-lookup"><span data-stu-id="3d13f-120">The time zone preference should be the local time zone of the date and time data in the import file.</span></span> 
 
 - <span data-ttu-id="3d13f-121">Часовой пояс для данных даты и времени может отличаться от часового пояса пользователя или компании.</span><span class="sxs-lookup"><span data-stu-id="3d13f-121">The time zone of the date and time data might not be the same as a user’s or company’s time zone.</span></span>
 
 - <span data-ttu-id="3d13f-122">Пользователи могут настроить собственный часовой пояс, используя **Параметры пользователя**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-122">Users can adjust their own time zone using their **User options**.</span></span>

<span data-ttu-id="3d13f-123">Обратите внимание, что перечисленные ниже действия помогут минимизировать возможные потенциальные конфликты даты и времени при импорте банковских выписок.</span><span class="sxs-lookup"><span data-stu-id="3d13f-123">Note that the following actions can help minimize potential date and time conflicts when you import bank statements.</span></span> 

 - <span data-ttu-id="3d13f-124">Не изменяйте предпочтительный часовой пояс для любых банковских счетов, для которых уже были импортированы выписки.</span><span class="sxs-lookup"><span data-stu-id="3d13f-124">Avoid changing the time zone preferences for any bank accounts that have already had statements imported.</span></span> <span data-ttu-id="3d13f-125">Изменение предпочтительного часового пояса может повлиять на порядок новых выписок относительно существующих выписок из-за корректировки часового пояса.</span><span class="sxs-lookup"><span data-stu-id="3d13f-125">Changing the time zone preference could impact the ordering of new statements relative to existing statements due to the time zone adjustment.</span></span> 
 
 - <span data-ttu-id="3d13f-126">Просмотрите все операции импорта, использующие выбранный формат источника данных.</span><span class="sxs-lookup"><span data-stu-id="3d13f-126">Review all the imports that use the selected data source format.</span></span> <span data-ttu-id="3d13f-127">Предпочтительный часовой пояс, указанный для формата, будет применяться ко всем проектам импорта, использующим этот формат.</span><span class="sxs-lookup"><span data-stu-id="3d13f-127">The time zone preference specified for the format will apply to all the import projects that use that format.</span></span> <span data-ttu-id="3d13f-128">Убедитесь, что предпочтительный часовой пояс подходит для всех проектов импорта, использующих этот формат.</span><span class="sxs-lookup"><span data-stu-id="3d13f-128">Verify that the time zone preference is appropriate for all the import projects that use that format.</span></span>

## <a name="sample-files"></a><span data-ttu-id="3d13f-129">Образцы файлов</span><span class="sxs-lookup"><span data-stu-id="3d13f-129">Sample files</span></span>
<span data-ttu-id="3d13f-130">Для всех трех форматов вы должны иметь файлы, которые преобразуют электронную банковскую выписку из исходного формата в формат, который можно использовать в Finance.</span><span class="sxs-lookup"><span data-stu-id="3d13f-130">For all three formats, you must have files that translate the electronic bank statement from the original format to a format that Finance can use.</span></span> <span data-ttu-id="3d13f-131">Требуемые исходные файлы находятся в узле **Ресурсы** в обозревателе приложений в Microsoft Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="3d13f-131">You can find the required resource files under the **Resources** node in Application Explorer in Microsoft Visual Studio.</span></span> <span data-ttu-id="3d13f-132">После обнаружения файлов скопируйте их в одно известное расположение, чтобы их было легче отправить во время настройки.</span><span class="sxs-lookup"><span data-stu-id="3d13f-132">After you find the files, copy them to a single known location, so that you can more easily upload them during the setup process.</span></span>

| <span data-ttu-id="3d13f-133">Имя ресурса</span><span class="sxs-lookup"><span data-stu-id="3d13f-133">Resource name</span></span>                                           | <span data-ttu-id="3d13f-134">Имя файла</span><span class="sxs-lookup"><span data-stu-id="3d13f-134">File name</span></span>                            |
|---------------------------------------------------------|--------------------------------------|
| <span data-ttu-id="3d13f-135">BankStmtImport\_BAI2CSV\_to\_BAI2XML\_xslt</span><span class="sxs-lookup"><span data-stu-id="3d13f-135">BankStmtImport\_BAI2CSV\_to\_BAI2XML\_xslt</span></span>              | <span data-ttu-id="3d13f-136">BAI2CSV-to-BAI2XML.xslt</span><span class="sxs-lookup"><span data-stu-id="3d13f-136">BAI2CSV-to-BAI2XML.xslt</span></span>              |
| <span data-ttu-id="3d13f-137">BankStmtImport\_BAI2XML\_to\_Reconciliation\_xslt</span><span class="sxs-lookup"><span data-stu-id="3d13f-137">BankStmtImport\_BAI2XML\_to\_Reconciliation\_xslt</span></span>       | <span data-ttu-id="3d13f-138">BAI2XML-to-Reconciliation.xslt</span><span class="sxs-lookup"><span data-stu-id="3d13f-138">BAI2XML-to-Reconciliation.xslt</span></span>       |
| <span data-ttu-id="3d13f-139">BankStmtImport\_BankReconciliation\_to\_Composite\_xslt</span><span class="sxs-lookup"><span data-stu-id="3d13f-139">BankStmtImport\_BankReconciliation\_to\_Composite\_xslt</span></span> | <span data-ttu-id="3d13f-140">BankReconciliation-to-Composite.xslt</span><span class="sxs-lookup"><span data-stu-id="3d13f-140">BankReconciliation-to-Composite.xslt</span></span> |
| <span data-ttu-id="3d13f-141">BankStmtImport\_ISO20022XML\_to\_Reconciliation\_xslt</span><span class="sxs-lookup"><span data-stu-id="3d13f-141">BankStmtImport\_ISO20022XML\_to\_Reconciliation\_xslt</span></span>   | <span data-ttu-id="3d13f-142">ISO20022XML-to-Reconciliation.xslt</span><span class="sxs-lookup"><span data-stu-id="3d13f-142">ISO20022XML-to-Reconciliation.xslt</span></span>   |
| <span data-ttu-id="3d13f-143">BankStmtImport\_MT940TXT\_to\_MT940XML\_xslt</span><span class="sxs-lookup"><span data-stu-id="3d13f-143">BankStmtImport\_MT940TXT\_to\_MT940XML\_xslt</span></span>            | <span data-ttu-id="3d13f-144">MT940TXT-to-MT940XML.xslt</span><span class="sxs-lookup"><span data-stu-id="3d13f-144">MT940TXT-to-MT940XML.xslt</span></span>            |
| <span data-ttu-id="3d13f-145">BankStmtImport\_MT940XML\_to\_Reconciliation\_xslt</span><span class="sxs-lookup"><span data-stu-id="3d13f-145">BankStmtImport\_MT940XML\_to\_Reconciliation\_xslt</span></span>      | <span data-ttu-id="3d13f-146">MT940XML-to-Reconciliation.xslt</span><span class="sxs-lookup"><span data-stu-id="3d13f-146">MT940XML-to-Reconciliation.xslt</span></span>      |
| <span data-ttu-id="3d13f-147">BankStmtImport\_SampleBankCompositeEntity\_xml</span><span class="sxs-lookup"><span data-stu-id="3d13f-147">BankStmtImport\_SampleBankCompositeEntity\_xml</span></span>          | <span data-ttu-id="3d13f-148">SampleBankCompositeEntity.xml</span><span class="sxs-lookup"><span data-stu-id="3d13f-148">SampleBankCompositeEntity.xml</span></span>        |

## <a name="examples-of-bank-statement-formats-and-technical-layouts"></a><span data-ttu-id="3d13f-149">Примеры форматов банковской выписки и технических макетов</span><span class="sxs-lookup"><span data-stu-id="3d13f-149">Examples of bank statement formats and technical layouts</span></span>
<span data-ttu-id="3d13f-150">Ниже приводятся примеры определений технических макетов для расширенных файлов импорта банковской выписки и трех связанных примеров файлов банковской выписки: https://mbs.microsoft.com/customersource/northamerica/AX/learning/documentation/how-to-articles/exofbankstfotechlayouts</span><span class="sxs-lookup"><span data-stu-id="3d13f-150">Below are examples of the advanced bank reconciliation import file technical layout definitions and three related bank statement example files: https://mbs.microsoft.com/customersource/northamerica/AX/learning/documentation/how-to-articles/exofbankstfotechlayouts</span></span>  

| <span data-ttu-id="3d13f-151">Определение технического макета</span><span class="sxs-lookup"><span data-stu-id="3d13f-151">Technical layout definition</span></span>                             | <span data-ttu-id="3d13f-152">Пример файла банковской выписки</span><span class="sxs-lookup"><span data-stu-id="3d13f-152">Bank statement example file</span></span>          |
|---------------------------------------------------------|--------------------------------------|
| <span data-ttu-id="3d13f-153">DynamicsAXMT940Layout</span><span class="sxs-lookup"><span data-stu-id="3d13f-153">DynamicsAXMT940Layout</span></span>                                   | <span data-ttu-id="3d13f-154">MT940StatementExample</span><span class="sxs-lookup"><span data-stu-id="3d13f-154">MT940StatementExample</span></span>                |
| <span data-ttu-id="3d13f-155">DynamicsAXISO20022Layout</span><span class="sxs-lookup"><span data-stu-id="3d13f-155">DynamicsAXISO20022Layout</span></span>                                | <span data-ttu-id="3d13f-156">ISO20022StatementExample</span><span class="sxs-lookup"><span data-stu-id="3d13f-156">ISO20022StatementExample</span></span>             |
| <span data-ttu-id="3d13f-157">DynamicsAXBAI2Layout</span><span class="sxs-lookup"><span data-stu-id="3d13f-157">DynamicsAXBAI2Layout</span></span>                                    | <span data-ttu-id="3d13f-158">BAI2StatementExample</span><span class="sxs-lookup"><span data-stu-id="3d13f-158">BAI2StatementExample</span></span>                 |



## <a name="set-up-the-import-of-iso20022-bank-statements"></a><span data-ttu-id="3d13f-159">Настройка импорта банковских выписок ISO20022</span><span class="sxs-lookup"><span data-stu-id="3d13f-159">Set up the import of ISO20022 bank statements</span></span>
<span data-ttu-id="3d13f-160">Во-первых, необходимо определить группу обработки формата банковской выписки для банковских выписок ISO20022 с помощью структуры информационного объекта.</span><span class="sxs-lookup"><span data-stu-id="3d13f-160">First, you must define the bank statement format processing group for ISO20022 bank statements by using the data entity framework.</span></span>

1.  <span data-ttu-id="3d13f-161">Перейдите в раздел **Рабочие области** &gt; **Управление данными**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-161">Go to **Workspaces** &gt; **Data management**.</span></span>
2.  <span data-ttu-id="3d13f-162">Нажмите кнопку **Импорт**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-162">Click **Import**.</span></span>
3.  <span data-ttu-id="3d13f-163">Введите имя формата, например **ISO20022**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-163">Enter a name for the format, such as **ISO20022**.</span></span>
4.  <span data-ttu-id="3d13f-164">В поле **Формат исходных данных** установите значение **XML-элемент**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-164">Set the **Source data format** field to **XML-Element**.</span></span>
5.  <span data-ttu-id="3d13f-165">В поле **Имя объекта** установите значение **Банковские выписки**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-165">Set the **Entity name** field to **Bank statements**.</span></span>
6.  <span data-ttu-id="3d13f-166">Чтобы отправить файлы импорта, нажмите кнопку **Отправить** и перейдите к файлу **SampleBankCompositeEntity.xml**, сохраненному ранее.</span><span class="sxs-lookup"><span data-stu-id="3d13f-166">To upload the import files, click **Upload**, and then browse to select the **SampleBankCompositeEntity.xml** file that you saved earlier.</span></span>
7.  <span data-ttu-id="3d13f-167">После отправки объекта банковских выписок и завершения сопоставления выберите действие **Просмотр карты** для объекта.</span><span class="sxs-lookup"><span data-stu-id="3d13f-167">After the Bank statements entity is uploaded and the mapping is completed, click the **View map** action for the entity.</span></span>
8.  <span data-ttu-id="3d13f-168">Объект банковских выписок является составным объектом, состоящим из четырех отдельных объектов.</span><span class="sxs-lookup"><span data-stu-id="3d13f-168">The Bank statements entity is a composite entity that consists of four separate entities.</span></span> <span data-ttu-id="3d13f-169">В списке выберите **BankStatementDocumentEntity**, а затем нажмите кнопку **Просмотр карты**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-169">In the list, select **BankStatementDocumentEntity**, and then click the **View map** action.</span></span>
9.  <span data-ttu-id="3d13f-170">На вкладке **Преобразования** щелкните **Создать**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-170">On the **Transformations** tab, click **New**.</span></span>
10. <span data-ttu-id="3d13f-171">Для порядкового номера 1 щелкните **Отправить файл** и выберите файл **ISO20022XML-Reconciliation.xslt**, сохраненный ранее.</span><span class="sxs-lookup"><span data-stu-id="3d13f-171">For sequence number 1, click **Upload file**, and select the **ISO20022XML-to-Reconciliation.xslt** file that you saved earlier.</span></span> <span data-ttu-id="3d13f-172">**Примечание.** Файлы преобразования создаются для стандартного формата.</span><span class="sxs-lookup"><span data-stu-id="3d13f-172">**Note:** Transformation files are built for the standard format.</span></span> <span data-ttu-id="3d13f-173">Поскольку банки часто отклоняются от этого формата, может потребоваться обновить файл преобразования, чтобы он соответствовал формату банковской выписки.</span><span class="sxs-lookup"><span data-stu-id="3d13f-173">Because banks often diverge from this format, you may have to update the transformation file to map to your bank statement format.</span></span> <!-- For details about the expected format for ISO20022, see [Dynamics AX ISO20022 Layout](./media/dynamicsaxiso20022layout1.xlsx).-->
11. <span data-ttu-id="3d13f-174">Нажмите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-174">Click **New**.</span></span>
12. <span data-ttu-id="3d13f-175">Для порядкового номера 2 щелкните **Отправить файл** и выберите файл **BankReconciliation-to-Composite.xslt**, сохраненный ранее.</span><span class="sxs-lookup"><span data-stu-id="3d13f-175">For sequence number 2, click **Upload file**, and select the **BankReconciliation-to-Composite.xslt** file that you saved earlier.</span></span>
13. <span data-ttu-id="3d13f-176">Щелкните **Применить преобразования**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-176">Click **Apply transforms**.</span></span>

<span data-ttu-id="3d13f-177">После настройки группы обработки формата следующим шагом является определение правил формат банковской выписки для банковских выписок ISO20022.</span><span class="sxs-lookup"><span data-stu-id="3d13f-177">After the format processing group is set up, the next step is to define the bank statement format rules for ISO20022 bank statements.</span></span>

1.  <span data-ttu-id="3d13f-178">Перейдите в раздел **Управление банком и кассовыми операциями** &gt; **Настройка** &gt; **Настройка расширенной банковской выверки** &gt; **Формат банковской выписки**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-178">Go to **Cash and bank management** &gt; **Setup** &gt; **Advanced bank reconciliation setup** &gt; **Bank statement format**.</span></span>
2.  <span data-ttu-id="3d13f-179">Нажмите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-179">Click **New**.</span></span>
3.  <span data-ttu-id="3d13f-180">Укажите формат выписки, например **ISO20022**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-180">Specify a statement format, such as **ISO20022**.</span></span>
4.  <span data-ttu-id="3d13f-181">Вводится имя формата.</span><span class="sxs-lookup"><span data-stu-id="3d13f-181">Enter a name for the format.</span></span>
5.  <span data-ttu-id="3d13f-182">Выберите в поле **Группа обработки** группу, определенную ранее, например **ISO20022**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-182">Set the **Processing group** field to the group that you defined earlier, such as **ISO20022**.</span></span>
6.  <span data-ttu-id="3d13f-183">Установите флажок **XML-файл**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-183">Select the **XML file** check box.</span></span>

<span data-ttu-id="3d13f-184">Последним шагом является включение расширенной банковской выверки и задание формата выписки в банковском счете.</span><span class="sxs-lookup"><span data-stu-id="3d13f-184">The last step is to enable Advanced bank reconciliation and set the statement format on the bank account.</span></span>

1.  <span data-ttu-id="3d13f-185">Перейдите в раздел **Управление банком и кассовыми операциями** &gt; **Банковские счета**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-185">Go to **Cash and bank management** &gt; **Bank accounts**.</span></span>
2.  <span data-ttu-id="3d13f-186">Выберите банковский счет и откройте его, чтобы просмотреть подробные сведения.</span><span class="sxs-lookup"><span data-stu-id="3d13f-186">Select the bank account, and open it to view the details.</span></span>
3.  <span data-ttu-id="3d13f-187">На вкладке **Выверка** задайте для параметра **Расширенная банковская выверка** значение **Да**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-187">On the **Reconciliation** tab, set the **Advanced bank reconciliation** option to **Yes**.</span></span>
4.  <span data-ttu-id="3d13f-188">Выберите в поле **Формат выписки** формат, созданный ранее, например **ISO20022**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-188">Set the **Statement format** field to the format that you created earlier, such as **ISO20022**.</span></span>

## <a name="set-up-the-import-of-mt940-bank-statements"></a><span data-ttu-id="3d13f-189">Настройка импорта банковских выписок MT940</span><span class="sxs-lookup"><span data-stu-id="3d13f-189">Set up the import of MT940 bank statements</span></span>
<span data-ttu-id="3d13f-190">Во-первых, необходимо определить группу обработки формата банковской выписки для банковских выписок MT940 с помощью структуры информационного объекта.</span><span class="sxs-lookup"><span data-stu-id="3d13f-190">First, you must define the bank statement format processing group for MT940 bank statements by using the data entity framework.</span></span>

1.  <span data-ttu-id="3d13f-191">Перейдите в раздел **Рабочие области** &gt; **Управление данными**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-191">Go to **Workspaces** &gt; **Data management**.</span></span>
2.  <span data-ttu-id="3d13f-192">Нажмите кнопку **Импорт**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-192">Click **Import**.</span></span>
3.  <span data-ttu-id="3d13f-193">Введите имя формата, например **MT940**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-193">Enter a name for the format, such as **MT940**.</span></span>
4.  <span data-ttu-id="3d13f-194">В поле **Формат исходных данных** установите значение **XML-элемент**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-194">Set the **Source data format** field to **XML-Element**.</span></span>
5.  <span data-ttu-id="3d13f-195">В поле **Имя объекта** установите значение **Банковские выписки**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-195">Set the **Entity name** field to **Bank statements**.</span></span>
6.  <span data-ttu-id="3d13f-196">Чтобы отправить файлы импорта, нажмите кнопку **Отправить** и перейдите к файлу **SampleBankCompositeEntity.xml**, сохраненному ранее.</span><span class="sxs-lookup"><span data-stu-id="3d13f-196">To upload import files, click **Upload**, and then browse to select the **SampleBankCompositeEntity.xml** file that you saved earlier.</span></span>
7.  <span data-ttu-id="3d13f-197">После отправки объекта банковских выписок и завершения сопоставления выберите действие **Просмотр карты** для объекта.</span><span class="sxs-lookup"><span data-stu-id="3d13f-197">After the Bank statements entity is uploaded and the mapping is completed, click the **View map** action for the entity.</span></span>
8.  <span data-ttu-id="3d13f-198">Объект банковских выписок является составным объектом, состоящим из четырех отдельных объектов.</span><span class="sxs-lookup"><span data-stu-id="3d13f-198">The Bank statements entity is a composite entity that consists of four separate entities.</span></span> <span data-ttu-id="3d13f-199">В списке выберите **BankStatementDocumentEntity**, а затем нажмите кнопку **Просмотр карты**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-199">In the list, select **BankStatementDocumentEntity**, and then click the **View map** action.</span></span>
9.  <span data-ttu-id="3d13f-200">На вкладке **Преобразования** щелкните **Создать**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-200">On the **Transformations** tab, click **New**.</span></span>
10. <span data-ttu-id="3d13f-201">Для порядкового номера 1 щелкните **Отправить файл** и выберите файл **MT940TXT-to-MT940XML.xslt**, сохраненный ранее.</span><span class="sxs-lookup"><span data-stu-id="3d13f-201">For sequence number 1, click **Upload file**, and select the **MT940TXT-to-MT940XML.xslt** file that you saved earlier.</span></span>
11. <span data-ttu-id="3d13f-202">Нажмите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-202">Click **New**.</span></span>
12. <span data-ttu-id="3d13f-203">Для порядкового номера 2 щелкните **Отправить файл** и выберите файл **MT940XML-Reconciliation.xslt**, сохраненный ранее.</span><span class="sxs-lookup"><span data-stu-id="3d13f-203">For sequence number 2, click **Upload file**, and select the **MT940XML-to-Reconciliation.xslt** file that you saved earlier.</span></span> <span data-ttu-id="3d13f-204">**Примечание.** Файлы преобразования создаются для стандартного формата.</span><span class="sxs-lookup"><span data-stu-id="3d13f-204">**Note:** Transformation files are built for the standard format.</span></span> <span data-ttu-id="3d13f-205">Поскольку банки часто отклоняются от этого формата, может потребоваться обновить файл преобразования, чтобы он соответствовал формату банковской выписки.</span><span class="sxs-lookup"><span data-stu-id="3d13f-205">Because banks often diverge from this format, you may have to update the transformation file to map to your bank statement format.</span></span> <!--- For details about the expected format for MT940, see [Dynamics AX MT940 Layout](./media/dynamicsaxmt940layout1.xlsx)-->
13. <span data-ttu-id="3d13f-206">Нажмите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-206">Click **New**.</span></span>
14. <span data-ttu-id="3d13f-207">Для порядкового номера 3 щелкните **Отправить файл** и выберите файл **BankReconciliation-to-Composite.xslt**, сохраненный ранее.</span><span class="sxs-lookup"><span data-stu-id="3d13f-207">For sequence number 3, click **Upload file**, and select the **BankReconciliation-to-Composite.xslt** file that you saved earlier.</span></span>
15. <span data-ttu-id="3d13f-208">Щелкните **Применить преобразования**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-208">Click **Apply transforms**.</span></span>

<span data-ttu-id="3d13f-209">После настройки группы обработки формата следующим шагом является определение правил формат банковской выписки для банковских выписок MT940.</span><span class="sxs-lookup"><span data-stu-id="3d13f-209">After the format processing group is set up, the next step is to define the bank statement format rules for MT940 bank statements.</span></span>

1.  <span data-ttu-id="3d13f-210">Перейдите в раздел **Управление банком и кассовыми операциями** &gt; **Настройка** &gt; **Настройка расширенной банковской выверки** &gt; **Формат банковской выписки**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-210">Go to **Cash and bank management** &gt; **Setup** &gt; **Advanced bank reconciliation setup** &gt; **Bank statement format**.</span></span>
2.  <span data-ttu-id="3d13f-211">Нажмите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-211">Click **New**.</span></span>
3.  <span data-ttu-id="3d13f-212">Укажите формат выписки, например **MT940**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-212">Specify a statement format, such as **MT940**.</span></span>
4.  <span data-ttu-id="3d13f-213">Вводится имя формата.</span><span class="sxs-lookup"><span data-stu-id="3d13f-213">Enter a name for the format.</span></span>
5.  <span data-ttu-id="3d13f-214">Выберите в поле **Группа обработки** группу, определенную ранее, например **MT940**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-214">Set the **Processing group** field to the group that you defined earlier, such as **MT940**.</span></span>
6.  <span data-ttu-id="3d13f-215">Задайте в поле **Тип файла** значение **TXT**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-215">Set the **File type** field to **txt**.</span></span>

<span data-ttu-id="3d13f-216">Последним шагом является включение расширенной банковской выверки и задание формата выписки в банковском счете.</span><span class="sxs-lookup"><span data-stu-id="3d13f-216">The last step is to enable Advanced bank reconciliation and set the statement format on the bank account.</span></span>

1.  <span data-ttu-id="3d13f-217">Перейдите в раздел **Управление банком и кассовыми операциями** &gt; **Банковские счета**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-217">Go to **Cash and bank management** &gt; **Bank accounts**.</span></span>
2.  <span data-ttu-id="3d13f-218">Выберите банковский счет и откройте его, чтобы просмотреть подробные сведения.</span><span class="sxs-lookup"><span data-stu-id="3d13f-218">Select the bank account, and open it to view the details.</span></span>
3.  <span data-ttu-id="3d13f-219">На вкладке **Выверка** задайте для параметра **Расширенная банковская выверка** значение **Да**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-219">On the **Reconciliation** tab, set the **Advanced bank reconciliation** option to **Yes**.</span></span>
4.  <span data-ttu-id="3d13f-220">При появлении запроса на подтверждение выбора и включение расширенной банковской выверки нажмите кнопку **OK**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-220">When you're prompted to confirm your selection and enable Advanced bank reconciliation, click **OK**.</span></span>
5.  <span data-ttu-id="3d13f-221">Выберите в поле **Формат выписки** формат, созданный ранее, например **MT940**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-221">Set the **Statement format** field to the format that you created earlier, such as **MT940**.</span></span>

## <a name="set-up-the-import-of-bai2-bank-statements"></a><span data-ttu-id="3d13f-222">Настройка импорта банковских выписок BAI2</span><span class="sxs-lookup"><span data-stu-id="3d13f-222">Set up the import of BAI2 bank statements</span></span>
<span data-ttu-id="3d13f-223">Во-первых, необходимо определить группу обработки формата банковской выписки для банковских выписок BAI2 с помощью структуры информационного объекта.</span><span class="sxs-lookup"><span data-stu-id="3d13f-223">First, you must define the bank statement format processing group for BAI2 bank statements by using the data entity framework.</span></span>

1.  <span data-ttu-id="3d13f-224">Перейдите в раздел **Рабочие области** &gt; **Управление данными**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-224">Go to **Workspaces** &gt; **Data management**.</span></span>
2.  <span data-ttu-id="3d13f-225">Нажмите кнопку **Импорт**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-225">Click **Import**.</span></span>
3.  <span data-ttu-id="3d13f-226">Введите имя формата, например **BAI2**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-226">Enter a name for the format, such as **BAI2**.</span></span>
4.  <span data-ttu-id="3d13f-227">В поле **Формат исходных данных** установите значение **XML-элемент**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-227">Set the **Source data format** field to **XML-Element**.</span></span>
5.  <span data-ttu-id="3d13f-228">В поле **Имя объекта** установите значение **Банковские выписки**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-228">Set the **Entity name** field to **Bank statements**.</span></span>
6.  <span data-ttu-id="3d13f-229">Чтобы отправить файлы импорта, нажмите кнопку **Отправить** и перейдите к файлу **SampleBankCompositeEntity.xml**, сохраненному ранее.</span><span class="sxs-lookup"><span data-stu-id="3d13f-229">To upload import files, click **Upload**, and then browse to select the **SampleBankCompositeEntity.xml** file that you saved earlier.</span></span>
7.  <span data-ttu-id="3d13f-230">После отправки объекта банковских выписок и завершения сопоставления выберите действие **Просмотр карты** для объекта.</span><span class="sxs-lookup"><span data-stu-id="3d13f-230">After the Bank statements entity is uploaded and the mapping is completed, click the **View map** action for the entity.</span></span>
8.  <span data-ttu-id="3d13f-231">Объект банковских выписок является составным объектом, состоящим из четырех отдельных объектов.</span><span class="sxs-lookup"><span data-stu-id="3d13f-231">The Bank statements entity is a composite entity that consists of four separate entities.</span></span> <span data-ttu-id="3d13f-232">В списке выберите **BankStatementDocumentEntity**, а затем нажмите кнопку **Просмотр карты**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-232">In the list, select **BankStatementDocumentEntity**, and then click the **View map** action.</span></span>
9.  <span data-ttu-id="3d13f-233">На вкладке **Преобразования** щелкните **Создать**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-233">On the **Transformations** tab, click **New**.</span></span>
10. <span data-ttu-id="3d13f-234">Для порядкового номера 1 щелкните **Отправить файл** и выберите файл **BAI2CSV-to-BAI2XML.xslt**, сохраненный ранее.</span><span class="sxs-lookup"><span data-stu-id="3d13f-234">For sequence number 1, click **Upload file**, and select the **BAI2CSV-to-BAI2XML.xslt** file that you saved earlier.</span></span>
11. <span data-ttu-id="3d13f-235">Нажмите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-235">Click **New**.</span></span>
12. <span data-ttu-id="3d13f-236">Для порядкового номера 2 щелкните **Отправить файл** и выберите файл **BAI2XML-Reconciliation.xslt**, сохраненный ранее.</span><span class="sxs-lookup"><span data-stu-id="3d13f-236">For sequence number 2, click **Upload file**, and select the **BAI2XML-to-Reconciliation.xslt** file that you saved earlier.</span></span> <span data-ttu-id="3d13f-237">**Примечание.** Файлы преобразования создаются для стандартного формата.</span><span class="sxs-lookup"><span data-stu-id="3d13f-237">**Note:** Transformation files are built for the standard format.</span></span> <span data-ttu-id="3d13f-238">Поскольку банки часто отклоняются от этого формата, может потребоваться обновить файл преобразования, чтобы он соответствовал формату банковской выписки.</span><span class="sxs-lookup"><span data-stu-id="3d13f-238">Because banks often diverge from this format, and you may have to update the transformation file to map to your bank statement format.</span></span> <!--- For details about the expected format for BAI2, see [Dynamics AX BAI2 Layout](./media/dynamicsaxbai2layout1.xlsx).-->
13. <span data-ttu-id="3d13f-239">Нажмите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-239">Click **New**.</span></span>
14. <span data-ttu-id="3d13f-240">Для порядкового номера 3 щелкните **Отправить файл** и выберите файл **BankReconciliation-to-Composite.xslt**, сохраненный ранее.</span><span class="sxs-lookup"><span data-stu-id="3d13f-240">For sequence number 3, click **Upload file**, and select the **BankReconciliation-to-Composite.xslt** file that you saved earlier.</span></span>
15. <span data-ttu-id="3d13f-241">Щелкните **Применить преобразования**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-241">Click **Apply transforms**.</span></span>

<span data-ttu-id="3d13f-242">После настройки группы обработки формата следующим шагом является определение правил формат банковской выписки для банковских выписок BAI2.</span><span class="sxs-lookup"><span data-stu-id="3d13f-242">After the format processing group is set up, the next step is to define the bank statement format rules for BAI2 bank statements.</span></span>

1.  <span data-ttu-id="3d13f-243">Перейдите в раздел **Управление банком и кассовыми операциями** &gt; **Настройка** &gt; **Настройка расширенной банковской выверки** &gt; **Формат банковской выписки**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-243">Go to **Cash and bank management** &gt; **Setup** &gt; **Advanced bank reconciliation setup** &gt; **Bank statement format**.</span></span>
2.  <span data-ttu-id="3d13f-244">Нажмите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-244">Click **New**.</span></span>
3.  <span data-ttu-id="3d13f-245">Укажите формат выписки, например **BAI2**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-245">Specify a statement format, such as **BAI2**.</span></span>
4.  <span data-ttu-id="3d13f-246">Вводится имя формата.</span><span class="sxs-lookup"><span data-stu-id="3d13f-246">Enter a name for the format.</span></span>
5.  <span data-ttu-id="3d13f-247">Выберите в поле **Группа обработки** группу, определенную ранее, например **BAI2**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-247">Set the **Processing group** field to the group that you defined earlier, such as **BAI2**.</span></span>
6.  <span data-ttu-id="3d13f-248">Задайте в поле **Тип файла** значение **TXT**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-248">Set the **File type** field to **txt**.</span></span>

<span data-ttu-id="3d13f-249">Последним шагом является включение расширенной банковской выверки и задание формата выписки в банковском счете.</span><span class="sxs-lookup"><span data-stu-id="3d13f-249">The last step is to enable Advanced bank reconciliation and set the statement format on the bank account.</span></span>

1.  <span data-ttu-id="3d13f-250">Перейдите в раздел **Управление банком и кассовыми операциями** &gt; **Банковские счета**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-250">Go to **Cash and bank management** &gt; **Bank accounts**.</span></span>
2.  <span data-ttu-id="3d13f-251">Выберите банковский счет и откройте его, чтобы просмотреть подробные сведения.</span><span class="sxs-lookup"><span data-stu-id="3d13f-251">Select the bank account, and open it to view the details.</span></span>
3.  <span data-ttu-id="3d13f-252">На вкладке **Выверка** задайте для параметра **Расширенная банковская выверка** значение **Да**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-252">On the **Reconciliation** tab, set the **Advanced bank reconciliation** option to **Yes**.</span></span>
4.  <span data-ttu-id="3d13f-253">При появлении запроса на подтверждение выбора и включение расширенной банковской выверки нажмите кнопку **OK**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-253">When you're prompted to confirm your selection and enable Advanced bank reconciliation, click **OK**.</span></span>
5.  <span data-ttu-id="3d13f-254">Выберите в поле **Формат выписки** формат, созданный ранее, например **BAI2**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-254">Set the **Statement format** field to the format that you created earlier, such as **BAI2**.</span></span>

## <a name="test-the-bank-statement-import"></a><span data-ttu-id="3d13f-255">Проверка импорта банковской выписки</span><span class="sxs-lookup"><span data-stu-id="3d13f-255">Test the bank statement import</span></span>
<span data-ttu-id="3d13f-256">Последним шагом является проверка импорта банковской выписки.</span><span class="sxs-lookup"><span data-stu-id="3d13f-256">The final step is to test that you can import your bank statement.</span></span>

1.  <span data-ttu-id="3d13f-257">Перейдите в раздел **Управление банком и кассовыми операциями** &gt; **Банковские счета**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-257">Go to **Cash and bank management** &gt; **Bank accounts**.</span></span>
2.  <span data-ttu-id="3d13f-258">Выберите банковский счет, для которого включена расширенная банковская выверка.</span><span class="sxs-lookup"><span data-stu-id="3d13f-258">Select the bank account that Advanced bank reconciliation functionality is enabled for.</span></span>
3.  <span data-ttu-id="3d13f-259">На вкладке **Выверять** щелкните **Банковские выписки**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-259">On the **Reconcile** tab, click **Bank statements**.</span></span>
4.  <span data-ttu-id="3d13f-260">На странице **Банковская выписка** щелкните **Импортировать выписку**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-260">On the **Bank statement** page, click **Import statement**.</span></span>
5.  <span data-ttu-id="3d13f-261">В поле **Банковский счет** выберите банковский счет.</span><span class="sxs-lookup"><span data-stu-id="3d13f-261">Set the **Bank account** field to the selected bank account.</span></span> <span data-ttu-id="3d13f-262">Сведения в поле **Формат выписки** будут введены автоматически на основании параметров в банковском счете.</span><span class="sxs-lookup"><span data-stu-id="3d13f-262">The **Statement format** field will be set automatically, based on the setting on the bank account.</span></span>
6.  <span data-ttu-id="3d13f-263">Нажмите кнопку **Обзор** и выберите файл электронной банковской выписки.</span><span class="sxs-lookup"><span data-stu-id="3d13f-263">Click **Browse**, and select your electronic bank statement file.</span></span>
7.  <span data-ttu-id="3d13f-264">Щелкните **Загрузить**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-264">Click **Upload**.</span></span>
8.  <span data-ttu-id="3d13f-265">Нажмите кнопку **OК**.</span><span class="sxs-lookup"><span data-stu-id="3d13f-265">Click **OK**.</span></span>

<span data-ttu-id="3d13f-266">Если импорт прошел успешно, вы получите сообщение о том, что выписка была импортирована.</span><span class="sxs-lookup"><span data-stu-id="3d13f-266">If the import is successful, you will receive a message that states that your statement was imported.</span></span> <span data-ttu-id="3d13f-267">Если импорт завершился ошибкой, в рабочей области **Управление данными** в разделе **Журнал заданий** найти задание.</span><span class="sxs-lookup"><span data-stu-id="3d13f-267">If the import wasn't successful, in the **Data management** workspace, in the **Job history** section, find the job.</span></span> <span data-ttu-id="3d13f-268">Щелкните **Сведения о выполнении** для задания, чтобы открыть страницу **Сводка по выполнению**, и щелкните **Просмотр журнала выполнения**, чтобы просмотреть ошибки импорта.</span><span class="sxs-lookup"><span data-stu-id="3d13f-268">Click **Execution details** for the job to open the **Execution summary** page, and then click **View execution log** to view the import errors.</span></span>



