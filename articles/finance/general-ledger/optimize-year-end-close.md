---
title: Оптимизация закрытия года
description: В этой статье описывается надстройка службы оптимизации закрытия на конец года, которая доступна для процесса закрытия главной книги на конец года.
author: moaamer
ms.date: 12/02/2022
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: LedgerClosingSheet
audience: Application User
ms.reviewer: twheeloc
ms.custom: 14091
ms.assetid: c64eed1d-df17-448e-8bb6-d94d63b14607
ms.search.region: Global
ms.author: moaamer
ms.search.validFrom: 2022-11-28
ms.dyn365.ops.version: AX 10.0.0
ms.openlocfilehash: bc6ab7e36f37707442f8d5d5b6e0d5f5d42e2171
ms.sourcegitcommit: 0c927fcb3afd34d870391f05b5393a4673d916e5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/08/2022
ms.locfileid: "9831538"
---
# <a name="optimize-year-end-close"></a>Оптимизация закрытия года 

Надстройка оптимизации закрытия на конец года для Microsoft Dynamics 365 Finance позволяет выполнять обработку закрытия года вне экземпляра сервера прикладных объектов (AOS) для ресурсов Dynamics 365 Finance. Она использует технологию микрослужбы. Преимущества, связанные с функциональными возможностями оптимизации закрытия на конец года, включают улучшенную производительность и минимальное воздействие на базу данных SQL во время выполнения обработки закрытия на конец года.

>[!NOTE]
> Оптимизированное закрытие года доступно в Microsoft Dynamics 365 Finance версия 10.0.31. Эта функция была обратно адаптирована в Dynamics Finance версий 10.0.30 и 10.0.29, и вам потребуется получить последнее обновление качества.   

Чтобы использовать функциональность закрытия на конец года, вы должны завершить следующие задачи:

1. Установите надстройку оптимизации закрытия на конец года из вашего проекта в службе Microsoft Dynamics Lifecycle Service.
2. Включите функцию **Оптимизация закрытия года** в модуле "Управление функциями".

> [!NOTE]
> Можно по-прежнему использовать текущую функцию закрытия года для Finance, отключив функцию **Оптимизация закрытия года** в управлении функциями.

## <a name="improved-performance"></a>Улучшение производительности

Функция **Оптимизация закрытия года** предназначена для ускорения обработки закрытия на конец года, особенно для клиентов с большими объемами данных. Когда закрытие года выполняется в службе, интенсивная обработка разгружается из ресурсов Finance, что позволяет сократить время обработки и освободить ресурсы, которые могут повлиять на ежедневные операции других пользователей.

Функция **Оптимизация закрытия года** может помочь в достижении следующих целей:

- Увеличение производительности закрытия года за счет сокращения времени выполнения.
- Снижение воздействия на другие процессы в ходе выполнения закрытия года.
- Улучшение отчетности и корректировки для результатов на конец года, так как закрытие на конец года занимает меньше времени.

## <a name="new-options-and-visibility"></a>Новые параметры и видимость

Когда активирована функция **Оптимизация закрытия года**, в следующих местах добавляются два новых столбца, **Результаты** и **Состояние**:

- На странице **Закрытие года**
- В диалоговом окне **Результаты закрытия года**
- В параметрах **Перенос финансовой аналитики балансового отчета** на странице **Шаблон закрытия года**

На следующем рисунке показан пример столбцов **Результаты** и **Состояние** на странице **Закрытие года**. Можно выбрать ссылку **Просмотр результатов** в столбце **Результаты**, чтобы открыть результаты закрытия года. В столбце **Состояние** отображается текущее состояние процесса закрытия года. Таким образом, новые столбцы обеспечивают отображение хода выполнения процесса закрытия года.

[![Столбцы результатов и состояния на странице закрытия года.](./media/Optimize-year-end-close-Image3.png)](./media/Optimize-year-end-close-Image3.png)

Кроме того, когда активирована функция **Оптимизация закрытия года**, на странице **Шаблон закрытия года** становится доступна экспресс-вкладка **Финансовые аналитики по балансовому отчету**. Эту экспресс-вкладку можно использовать для детального указания финансовой аналитики балансового отчета при закрытии года. Эта возможность параллельна возможности, уже доступной для счетов прибылей и убытков

[![Экспресс-вкладка финансовых аналитик по балансовому отчету.](./media/Optimize-year-end-close-Image4.png)](./media/Optimize-year-end-close-Image4.png)

## <a name="architecture-and-data-flow"></a>Архитектура и поток данных

Чтобы использовать функцию **Оптимизация закрытия года** и выполнить закрытие года в микрослужбе, необходимо установить **надстройку службы оптимизации закрытия года** из служб Lifecycle Services, а затем включить функцию **Оптимизация закрытия года** в модуле "Управление функциями".

Как показано на следующем рисунке, обработка закрытия года проверяет, установлена ли надстройка и включена ли функция. Если выполняются оба необходимых условия, закрытие года выполняется на микрослужбе.

[![Схема потока данных.](./media/Optimize-year-end-close-Image5.png)](./media/Optimize-year-end-close-Image5.png)

## <a name="high-level-flow-for-year-end-close-processing"></a>Поток высокого уровня для обработки закрытия года

1. Процесс закрытия года начинается в Finance, см. раздел **Главная книга \> Закрытие периода \> Закрытие года**. Процесс создает закрывающие пакетные задания и задачи для тех юридических лиц, для которых выполняется закрытие.
2. Закрытие года определяет, следует ли выполнять закрытие года на микрослужбе или в текущей логике закрытия.

    - Если **надстройка службы оптимизации закрытия года** установлена в Lifecycle Services и функция **Оптимизация закрытия года** включена в модуле "Управление функциями", закрытие года будет выполняться в микрослужбе.

        1. Функция оптимизации закрытия года создает задание службы по закрытию года для каждого из юридических лиц, для которых выполняется закрытие, затем запускает логику закрытия года. Микрослужба выполняет закрытие года.
        2. Приложение Finance прослушивает микрослужбу закрытия года, чтобы определить, когда микрослужба закончит работу. Затем результаты закрытия года обновляются на странице **Закрытие года** в Finance.

    - В противном случае закрытие года выполняется в текущей логике закрытия.
