---
title: Использование службы электронных накладных для импорта накладных поставщиков
description: В этой теме приводятся сведения об импорте накладных поставщиков с использованием службы электронных накладных.
author: gionoder
ms.date: 09/03/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kfend
ms.custom:
- "97423"
- intro-internal
ms.assetid: ''
ms.search.region: Global
ms.author: janeaug
ms.search.validFrom: 2020-07-08
ms.dyn365.ops.version: AX 10.0.12
ms.openlocfilehash: c28adbfe532e77a52cab7625b9539d1e8e528bea
ms.sourcegitcommit: 19f0e69a131e9e4ff680eac13efa51b04ad55a38
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/22/2022
ms.locfileid: "7983831"
---
# <a name="use-the-electronic-invoicing-service-to-import-vendor-invoices"></a>Использование службы электронных накладных для импорта накладных поставщиков

[!include [banner](../includes/banner.md)]

[!include [banner](../includes/preview-banner.md)]

В этой теме приводятся сведения, которые помогут приступить к импорту накладных поставщиков с помощью службы электронного выставления накладных. Это поможет вам выполнить этапы настройки в Regulatory Configuration Services (RCS), Dynamics 365 Finance и Dynamics 365 Supply Chain Management, которым необходимо следовать для получения электронных накладных поставщиков от поставщиков.

## <a name="set-up-vendor-invoice-import-in-rcs"></a>Настройка импорта накладных поставщиков в RCS
Чтобы настроить импорт накладных поставщиков в RCS, выполните следующие действия:

1. Обратитесь к списку [общедоступных функций электронных накладных](e-invoicing-configuration-rcs.md#generally-available-features).
2. Выберите и импортируйте функцию электронного выставления накладных. Дополнительные сведения см. в [Импорт функции электронного выставления накладных из поставщика конфигурации Microsoft](e-invoicing-get-started.md#import-an-electronic-invoicing-feature-from-the-microsoft-configuration-provider).
3. Создание функции электронного выставления накладных для вашей организации. Дополнительные сведения см. в [Создание функции электронного выставления накладных для поставщика вашей организации](e-invoicing-get-started.md#create-an-electronic-invoicing-feature-under-your-organization-provider).

## <a name="configure-an-email-account-channel"></a>Настройка канала учетной записи электронной почты

Настройте канал учетной записи электронной почты, если созданная функция выставления накладных импортирует электронные накладные поставщиков из вложенных файлов, полученных по электронной почте.

1. В RCS выберите созданную функцию электронного выставления накладных. Убедитесь, что выбрана версия со статусом **Черновик**.
2. На вкладке **Настройки** в сетке выберите настройку функции, а затем выберите **Изменить**.
3. На вкладке **канал данных** в группе полей **параметры** в поле **канал данных** введите имя канала. Имя канала должно состоять не более чем из десяти символов.
4. В поле **Адрес сервера** введите поставщика учетных записей электронной почты. Например, адрес сервера **https://outlook.live.com/** — **imap-mail.outlook.com**.
5. В поле **Порт сервера** введите порт, используемый поставщиком учетных записей электронной почты. Например, порт сервера для **https://outlook.live.com/** — **993**.
6. В поле **Секрет имени пользователя** введите имя секрета Key Vault, которое содержит идентификатор учетной записи пользователя электронной почты. Этот секрет должен быть создан в хранилище ключей Azure и настроен в среде службы. 
7. В поле **Секрет пароля пользователя** введите имя секрета Key Vault, которое содержит пароль учетной записи пользователя электронной почты.
8. Необязательное — введите значения в полях **фильтр из**, **фильтр по темам** и **Фильтр по дате**.
9. Введите имена папок почтового ящика, в которых будут находиться письма:

    - Импортировано из: **Главная папка**
    - Сохранено после успешной обработки: **папка архива**
    - Сохранено после неудачной обработки: **Папка ошибок** Создание этих папок в почтовом ящике не требуется. Папки создаются автоматически после первого импорта и обработки электронной накладной. 
   
10. В группе полей **фильтра вложений** добавьте данные фильтрации файлов. Обрабатываются только вложения, удовлетворяющие определенному фильтру. Например, можно настроить "\*.xml" для вложений с расширением XML. Имя вложения используется в Dynamics 365 Finance или Dynamics 365 Supply Chain Management во время установки. 
11. На вкладке **Правила применимости** проверьте и обновите критерии, если необходимо. Поле **Канал** должно быть равно указанному ранее **Каналу данных**. Дополнительные сведения см. в разделе [Правила применимости](e-invoicing-configuration-rcs.md#applicability-rules).
12. Выберите **Сохранить** и закройте страницу.

### <a name="configure-a-microsoft-sharepoint-channel"></a>Настройка канала Microsoft SharePoint

Настройте канал Microsoft SharePoint, если функция электронного выставления накладных импортирует накладные поставщиков из файлов, помещенных в папки SharePoint.

1. В RCS выберите созданную функцию электронного выставления накладных. Убедитесь, что выбрана **Версия** со статусом **Черновик**.
2. На вкладке **Настройки** в сетке выберите настройку функции, а затем выберите **Изменить**.
3. На вкладке **Канал данных** в группе полей **Параметры** выберите **Адрес SharePoint** и введите URL-адрес SharePoint.
4. Выберите **Порт сервера** и введите порт, используемый поставщиком учетных записей электронной почты.
5. Выберите **Код приложения** и введите имя секрета Key Vault, которое содержит идентификатор клиента SharePoint.
6. Выберите **Секрет приложения** и введите имя секрета Key Vault, которое содержит пароль клиента SharePoint.
7. Выберите **Фильтр файла**. Просмотрите и обновите маску для фильтрации файлов, содержащих электронную накладную поставщика для импорта.
8. На вкладке **Правила применимости** проверьте и обновите критерии, если необходимо. Дополнительные сведения см. в разделе [Правила применимости](e-invoicing-configuration-rcs.md#applicability-rules).
9. Выберите **Сохранить** и закройте страницу.

### <a name="deploy-an-electronic-invoicing-feature"></a>Развертывание функции электронного выставления накладных

Для развертывания функции электронного выставления накладных см. [Развертывание функции электронного выставления накладных в среде обслуживания](e-invoicing-get-started.md#deploy-the-electronic-invoicing-feature-to-service-environment).

## <a name="set-up-vendor-invoice-import-in-finance-or-supply-chain-management"></a>Настройка импорта накладных поставщиков в Finance или Supply Chain Management
Выполните шаги в следующих двух разделах, чтобы настроить различные типы импорта накладных поставщика.

### <a name="import-brazilian-nf-e-from-email"></a>Импортировать бразильский NF-e из сообщения электронной почты

1. Выполните вход в среду Finance или Supply Chain Management и убедитесь, что вы находитесь в правильном юридическом лице.
2. Перейдите в раздел **Администрирование организации** > **Настройка** > **Параметры электронных документов**.
3. На вкладке **Функции** убедитесь, что выбрано **Федеральный NF-e — электронный счет для Бразилии**.
4. На вкладке **Внешние каналы** в группе полей **Каналы** выберите **Добавить**.
5. В поле **Канал** введите **NFe** (имя канала, заданное в конфигурации канала данных для функции электронного выставления накладных в RCS).
6. В поле **Описание** введите описание. В поле **Компания** выберите юридическое лицо.
7. В поле **Контекст документа** выберите **Модель контекста финансового документа — контекст накладных клиента**.
8. В группе полей **Импорт источников** выберите **Добавить**.
9. В поле **Имя** введите **XmlFile** (имя **Фильтр вложения**, заданное в конфигурации канала данных для функции электронного выставления накладных в RCS).
10. В поле **Описание** введите описание, а в поле **Имя сущности данных** выберите **Полученные документы NF-e XML**.
11. В поле **Сопоставление моделей** выберите **Импорт электронной почты NF-e – импорт электронной почты NF-e (BR)**, а затем выберите **Сохранить**.
12. На вкладке **Электронный документ** в группе полей **Электронная отчетность** выберите **Добавить**, а в поле **Имя таблицы** выберите **Полученный документ XML NF-e**.
13. В поле **Контекст документа** выберите **Запрос контекста финансового документа — контекст накладных клиента**.
14. В поле **Сопоставление модели электронного документа** выберите **Запрос сопоставления — сопоставление финансового документа**.
15. Выберите **типы откликов**, а затем выберите **Создать**.
16. В поле **Тип ответа** введите **Ответ**. В поле **Статус отправки** введите **Запланировано**.
17. В поле **Сопоставление моделей** выберите **Формат сопоставления модели из ответного сообщения — импорт ответного сообщения**.
18. Выберите **Сохранить** и закройте страницу.

### <a name="import-peppol-electronic-vendor-invoices"></a>Импорт электронных накладных поставщиков PEPPOL

1. Перейдите в раздел рабочей области **Электронная отчетность** и выберите **Конфигурации отчетности**.
2. Выберите **Модель контекста накладной клиента**, а затем выберите **создать конфигурацию** > **Производное от имени: модель контекста накладной клиента, Microsoft** для создания производной конфигурации.
3. В версии **Черновик** выберите **Конструктор** и в дереве **Модель данных** выберите **Сопоставить модель с источником данных**.
4. В дереве **Определения** выберите **DataChannel**, а затем **Конструктор**.
5. В дереве **источников данных** разверните контейнер **$Context\_Channel**. В поле **значение** выберите **Правка** и введите имя канала данных. Это имя канала, заданное в конфигурации канала данных для функции электронного выставления накладных в RCS. 
7. Выберите **Сохранить** и закройте страницу.
8. Закройте страницу.
9. Выберите производную конфигурацию, только что созданную в **модели контекста накладной клиента** и на экспресс-вкладке **версии** выберите **изменить статус** > **завершено**.
10. Перейдите **Администрирование организации** > **Настройка** > **Параметры электронного документа** и на вкладке **Функции** убедитесь, что выбрано **PEPPOL — международные электронные счета**. 
11. На вкладке **Внешние каналы** в группе полей **Каналы** выберите **Добавить**.
12. В поле **Канал** введите имя канала данных, а в поле **Описание** введите описание.
13. В поле **Компания** выберите юридическое лицо. 
14. В поле **контекст документа** выберите новую производную конфигурацию из **модели контекста накладной клиента**. Описание сопоставления должно быть **контекстом канала данных**.
15. В группе полей **Импорт источников** выберите **Добавить**.
16. В поле **имя** введите **имя фильтра вложений** и в поле **Имя объекта данных** выберите **заголовок накладной поставщика**.
17. В поле **сопоставление моделей** выберите **импорт накладной поставщика — импорт накладной поставщика**.
18. Щелкните **Сохранить** и закройте страницу.


## <a name="receive-electronic-invoices"></a>Получение электронных накладных

Служба электронного выставления накладных выполняет два шага при импорте накладных из каналов данных:

1. Доступ к почтовому ящику и чтение электронной почты.
2. Обработка сообщений электронной почты. 
    
Для выполнения этих двух шагов клиент должен вручную вызывать службу для каждого шага. Однако рекомендуется настроить пакет для получения электронных документов.

Чтобы получать электронные накладные, выполните следующие действия:

1. Перейдите в раздел **Администрирование организации** > **Периодические задачи** > **Электронные документы** > **Получение электронных документов**.
2. Выберите **ОК** и закройте страницу.


## <a name="view-receive-logs-for-electronic-invoices"></a>Просмотр журналов получения для электронных накладных

Чтобы просмотреть журналы получения для электронных накладных, перейдите на страницу **Администрирование организации** > **Периодические задачи** > **Электронные документы** > **Журнал получений электронных документов**.
Если не удается увидеть успешно обработанных накладные, удалите фильтр таблицы.


[!INCLUDE[footer-include](../../includes/footer-banner.md)]
