---
title: Настройка канала электронной почты
description: В этой статье объясняется, как настроить канал электронной почты для получения электронных накладных.
author: gionoder
ms.date: 02/09/2022
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: kfend
ms.search.region: Global
ms.author: gionoder
ms.search.validFrom: ''
ms.dyn365.ops.version: ''
ms.custom: ''
ms.assetid: ''
ms.search.form: ''
ms.openlocfilehash: 19339cbcc59e93289609690363b0dd9195a66f6e
ms.sourcegitcommit: 87e727005399c82cbb6509f5ce9fb33d18928d30
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/12/2022
ms.locfileid: "9279881"
---
# <a name="configure-an-email-channel"></a>Настройка канала электронной почты

[!include [banner](../includes/banner.md)]

Если созданная функция электронного выставления накладных импортирует электронные накладные поставщиков из вложенных файлов, полученных по электронной почте, необходимо настроить канал учетной записи электронной почты.

1. В службе Regulatory Configuration Service (RCS) выберите созданную вами функцию электронного выставления накладных. Убедитесь, что выбрана версия со статусом **Черновик**.
2. На вкладке **Настройки** выберите **Добавить**.
3. В раскрывающемся диалоговом окне **Создать настройку функции** в группе полей **Создать** выберите параметр **Пользовательская настройка**.
4. В группе полей **Тип настройки** выберите параметр **Канал данных**.
5. В поле **Выберите канал данных** введите **Входящая электронная почта**.
6. Выберите **Создать**.
7. Выберите созданную строку, затем выберите **Изменить**.
8. На вкладке **Канал данных** в разделе **Параметры** задайте следующие обязательные поля.

    | Поле                | Описание |
    |----------------------|-------------|
    | Канал данных         | Введите уникальное имя для обозначения канала данных. Имя может содержать не более 10 символов. На него будут ссылаться правила применимости и связанные приложения в процессе обмена данными. |
    | Адрес сервера       | Введите адрес сервера поставщика учетных записей электронной почты. Например, адрес сервера для поставщика `https://outlook.live.com` — imap-mail.outlook.com. |
    | Порт сервера          | Ввод номера порта, используемого поставщиком учетных записей электронной почты. Например, порт сервера для поставщика `https://outlook.live.com` — 993. |
    | Секрет имени пользователя     | Введите имя секрета Microsoft Azure Key Vault, который содержит ИД учетной записи пользователя электронной почты. Этот секрет должен быть создан в хранилище ключей Key Vault и настроен в среде службы. |
    | Секрет пароля пользователя | Введите имя секрета Key Vault, который содержит пароль учетной записи пользователя электронной почты. |
    | Таймаут              | Предельное максимальное время в миллисекундах (мс), в течение которого система должна ожидать отклика. Значение по умолчанию составляет 10 000 мс (10 секунд). |
    | Главная папка          | Укажите источник импорта электронной почты или папку, из которой служба должна обрабатывать сообщения электронной почты. |
    | Папка архива       | Указывается папка, в которой должны храниться обработанные сообщения электронной почты. Если эта папка не указана, она будет создана системой автоматически. |
    | Папка ошибок         | Укажите папку, в которую система должна перемещать сообщения электронной почты в случае ошибки обработки. Если эта папка не указана, она будет создана системой автоматически. |
    | Максимальный размер сообщения     | Введите максимальный размер (в байтах) одного обрабатываемого сообщения. Значение по умолчанию — 20 000 000 байт. |
    | Максимальное количество сообщений   | Введите максимальное количество сообщений для обработки за одно действие. Если не требуется ограничивать количество сообщений, установите значение равным **0** (нулю). |
    | Фильтр "С"          | Введите строку для фильтрации по адресу отправителя. Будут обработаны только те сообщения электронной почты, в которых адрес отправителя совпадает с фильтром. Это поле является необязательным. Чтобы указать несколько адресов отправителя, используйте точку с запятой (;) как разделители. |
    | Фильтр по теме       | Введите строку для фильтрации по теме. Будут обработаны только те сообщения электронной почты, в которых тема совпадает с фильтром. Это поле является необязательным. Поддерживается простая маска, такая как **\*smth\*.ext**, где каждая звездочка (\*) представляет ноль или более вхождений любого символа. |
    | Фильтр дат          | Укажите дату для определения максимальной давности (в днях) сообщений, которые должны обрабатываться. Это поле является необязательным. Значение по умолчанию — 30 дней. |
    | Режим обработки      | <p>Выберите один из следующих параметров, чтобы указать, могут ли все вложения в сообщении электронной почты обрабатываться вместе или каждое вложение должно обрабатываться отдельно:</p><ul><li><b>По вложениям</b> — для каждого вложения в сообщении будет создан новый электронный документ. Например, если одно сообщение электронной почты содержит несколько файлов, содержащих данные электронных накладных, каждый файл будет рассматриваться как новая электронная накладная в системе.</li><li><b>По сообщению электронной почты</b> — одно вложение считается базовым вложением, и в системе будет создана одна электронная накладная. Другие вложения могут использоваться в качестве файлов поддержки.</li></ul> |

9. В разделе **Фильтр вложений** добавьте данные фильтрации файлов. Будут обрабатываться только вложения, удовлетворяющие определенному фильтру. Например, **\*.xml** будет фильтровать вложения, имеющие расширение имени файла XML. Имя вложения используется в Dynamics 365 Finance или Dynamics 365 Supply Chain Management во время установки.

    - Если в поле **Режим обработки** было задано значение **По сообщению электронной почты** на предыдущем шаге, можно добавить здесь несколько фильтров. Имя будет определять конкретный документ.
    - Если для поля **Режим обработки** установлено значение **По вложениям**, можно добавить только один фильтр.

10. На вкладке **Правила применимости** проверьте и обновите критерии, если требуется. Значение поля **Канал** должно быть равно значению, введенному в поле **Канал данных** на шаге 8.
11. Выберите **Сохранить** и закройте страницу.
