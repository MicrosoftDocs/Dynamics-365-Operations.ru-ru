---
title: Настройка электронного выставления накладных в службах Regulatory Configuration Services (RCS)
description: В этой теме объясняется, как настроить электронное выставление накладных в Dynamics 365 Regulatory Configuration Services (RCS).
author: gionoder
ms.date: 03/29/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kfend
ms.custom: 97423
ms.assetid: ''
ms.search.region: Global
ms.author: janeaug
ms.search.validFrom: 2020-07-08
ms.dyn365.ops.version: AX 10.0.12
ms.openlocfilehash: 9958091db4a3d7ce0b625e5adc8e2a6b37878618
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/01/2021
ms.locfileid: "5840252"
---
# <a name="configure-electronic-invoicing-in-regulatory-configuration-services-rcs"></a>Настройка электронного выставления накладных в службах Regulatory Configuration Services (RCS)

[!include [banner](../includes/banner.md)]

В этой теме приводятся сведения о возможностях настройки электронного выставления накладных в Dynamics 365 Regulatory Configuration Services (RCS).

С помощью возможностей настройки электронного выставления накладных поможет вам обеспечить выполнение бизнес-требований и нормативных требований для электронных накладных без написания кода. И в сценариях, в которых электронные накладные должны быть электронно утверждены веб-службами, функции конфигурации также помогают выполнить требования для обмена сообщениями с веб-службами без написания какого-либо кода.

## <a name="electronic-reporting"></a>Электронная отчетность

Электронная отчетность (ER) поддерживает электронное выставление накладных.

Сопоставление и форматы модели данных являются настраиваемыми компонентами, которые создаются и обслуживаются с помощью электронной отчетности и используются в электронном выставлении накладных. Конструктор форматов электронной отчетности — это инструмент для создания и сопровождения форматов файлов. Он используется для настройки функций электронного выставления счетов.

Дополнительные сведения см. в разделе [Обзор электронной отчетности (ER)](../../fin-ops-core/dev-itpro/analytics/general-electronic-reporting.md).

## <a name="electronic-invoicing-features"></a>Функции электронного выставления счетов

Функции электронного выставления счетов отвечают за создание электронных накладных через электронного выставления счетов. Они инкапсулируют правила конфигурации и используют их для обработки данных, которые Microsoft Dynamics 365 Finance и Dynamics 365 Supply Chain Management посылают в модуль электронного выставления счетов и в электронные накладные.

Эти функции также поддерживают сценарии, в которых необходимо соответствие спецификациям формата файла, а вывод является отдельным электронным файлом. В большинстве случаев спецификации формата файла публикуются налоговыми органами.

Наконец, функции поддерживают обмен сообщениями с внешними веб-службами, которые размещены либо налоговым органом, либо аккредитированной стороной, и требуют авторизации или отметок утверждения в электронной накладной.

### <a name="availability-of-electronic-invoicing-features"></a>Доступность функций электронного выставления накладных

Доступность функций электронного выставления накладных зависит от страны или региона. Хотя некоторые функции общедоступны, другие находятся на этапе предварительной версии.

#### <a name="preview-features"></a>Предварительные версии функций

В следующей таблице показаны функции электронного выставления накладных, которые в настоящее время доступны в режиме предварительной версии.

| Страна или регион | Имя функции                         | Бизнес-документ |
|----------------|--------------------------------------|-------------------|
| Австрия        | Электронные накладные для Австрии (AT)    | Накладные по продаже и по проекту |
| Бельгия        | Электронная накладная для Бельгии (BE)      | Накладные по продаже и по проекту |
| Бразилия         | Бразильский NF-e (BR)                  | Модель финансового документа 55, корректирующие письма, отмены и удаления |
| Бразилия         | Бразильский NFS-e ABRASF Куритиба (BR) | Финансовые документы сервиса |
| Дания        | Электронная накладная для Дании (DK)       | Накладные по продаже и по проекту |
| Египет          | Электронная накладная для Египта (EG) | Накладные по продаже и по проекту |
| Эстония        | Электронная накладная для Эстонии (EE)     | Накладные по продаже и по проекту |
| Финляндия        | Электронная накладная для Финляндии (FI)      | Накладные по продаже и по проекту |
| Франция         | Электронная накладная для Франции (FR)       | Накладные по продаже и по проекту |
| Германия        | Электронная накладная для Германии (DE)       | Накладные по продаже и по проекту |
| Италия          | FatturaPA (IT)                       | Накладные по продаже и по проекту |
| Мексика         | Мексиканский CFDI (MX)                    | Накладные на продажу, отборочные накладные, перемещения запасов, дополнения к оплате и отмены |
| Голландия    | Электронная накладная для Нидерландов (NL)        | Накладные по продаже и по проекту |
| Норвегия         | Электронная накладная для Норвегии (NO)    | Накладные по продаже и по проекту |
| Испания          | Электронная накладная для Испании (ES)      | Накладные по продаже и по проекту |
| Европа         | Электронная накладная PEPPOL            | Накладные PEPPOL по продаже и по проекту |

### <a name="configurable-components-of-electronic-invoicing-features"></a>Настраиваемые компоненты функций электронного выставления накладных

Функции электронного выставления накладных состоят из следующих групп настраиваемых компонентов:

- **Форматы** — форматы позволяют настроить, что модуль электронного выставления накладных должен создавать, когда электронный документ становится электронной накладной. Форматы включают конфигурацию формата для электронной накладной, а также для файлов и сообщений, которые используются для отправки запросов и получения ответов, когда требуется связь с внешней веб-службой.
- **Действия** — действия позволяют настроить, как модуль электронного выставления накладных создает преобразование электронного документа, который Finance и Supply Chain Management отправили в электронную накладную.
- **Правила применимости** — правила применимости позволяют настраивать контекст, который модуль электронного выставления накладных должен учитывать для обработки функции электронного выставления накладных.
- **Переменные** — переменные позволяют настраивать поддержку конструирования логики конфигурации. Переменные могут использоваться в качестве входных значений для выполнения определенного действия. Кроме того, они могут работать в качестве обмена значениями между Finance и Supply Chain Management и модулем электронного выставления накладных.
- **Сопоставление модели электронного документа** — сопоставление модели электронного документа позволяет настраивать сопоставление модели электронной отчетности. Сопоставление модели определяет сопоставление данных абстрактной накладной, которая интегрируется в модуль электронного выставления накладных при отправке электронных документов.
- **Модель контекста накладной** — модель контекста накладной позволяет настроить модель контекста накладных электронной отчетности и определить контекст функции электронного выставления накладных.
- **Типы откликов** — типы откликов позволяют настроить, что модуль электронного выставления накладных должен обновлять в Finance и Supply Chain Management в результате обработки электронной накладной.

### <a name="formats"></a>Форматы

В следующих списках показаны конфигурации формата электронной отчетности, доступные для функциях электронного выставления накладных.

#### <a name="austrian-at-electronic-invoices-sales-and-project-invoices-for-austria"></a>Австрийские (AT) электронные накладные: накладные по продаже и накладные по проектам для Австрии

- OIOUBL накладной по продаже
- OIOUBL накладной по проекту
- OIOUBL кредит-ноты по продажам
- OIOUBL кредит-ноты по проекту

#### <a name="belgian-be-electronic-invoice-sales-and-project-invoices-for-belgium"></a>Бельгийская (BE) электронная накладная: накладные по продаже и накладные по проектам для Бельгии

- UBL накладная по продаже BE
- UBL накладная по проекту BE
- UBL кредит-ноты по проекту BE
- UBL кредит-ноты по продаже BE

#### <a name="brazilian-br-nf-e-nf-e-federal-brazil"></a>Бразильский (BR) NF-e: федеральный NF-e (Бразилия)

- Формат экспорта отправки NF-e (BR)
- Формат экспорта письма-корректировки NF-e (BR)
- Формат экспорта отмены NF-e (BR)
- Формат экспорта удаления NF-e (BR)

#### <a name="brazilian-nfs-e-br-nfs-e-abrasf-curitiba-city"></a>Бразильский NFS-e (BR): NFS-e ABRASF, город Куритиба

- NFS-e ABRASF Куритиба (BR)
- NFS-e ABRASF запрос Куритиба (BR)

#### <a name="danish-dk-electronic-invoice-sales-and-project-invoices-for-denmark"></a>Датская (DK) электронная накладная: накладные по продаже и накладные по проектам для Дании

- OIOUBL накладной по продаже
- OIOUBL накладной по проекту
- OIOUBL кредит-ноты по продажам
- OIOUBL кредит-ноты по проекту

#### <a name="dutch-nl-electronic-invoice-sales-and-project-invoices-for-netherlands"></a>Нидерландская (NL) электронная накладная: накладные по продаже и накладные по проектам для Нидерландов

- UBL накладная по продаже NL
- UBL накладная по проекту NL
- UBL кредит-ноты по проекту NL
- UBL кредит-ноты по продаже NL

#### <a name="egyptian-eg-electronic-invoice-sales-and-project-invoices-for-egypt"></a>Египетская (EG) электронная накладная: накладные по продаже и накладные по проектам для Египта

- Накладная по продаже (EG) (выставление накладных)
- Накладная по проекту (EG) (выставление накладных)

#### <a name="estonian-ee-electronic-invoice-sales-and-project-invoices-for-estonia"></a>Эстонская (EE) электронная накладная: накладные по продаже и накладные по проектам для Эстонии

- Накладная по продаже (EE)
- Накладная по проекту (EE)

#### <a name="finnish-fi-electronic-invoice-sales-and-project-invoices-for-finland"></a>Финская (FI) электронная накладная: накладные по продаже и накладные по проектам для Финляндии

- Накладная по продаже (FI)
- Накладная по проекту (FI)

#### <a name="french-fr-electronic-invoice-sales-and-project-invoices-for-france"></a>Французская (FR) электронная накладная: накладные по продаже и накладные по проектам для Франции

- UBL накладная по продаже FR
- UBL накладная по проекту FR
- UBL кредит-ноты по проекту FR
- UBL кредит-ноты по продаже FR

#### <a name="german-de-electronic-invoice-sales-and-project-invoices-for-germany"></a>Немецкая (DE) электронная накладная: накладные по продаже и накладные по проектам для Германии

- Накладная по продаже (DE)
- Накладная по проекту (DE)

#### <a name="italian-it-electronic-invoice-sales-and-project-invoices-for-italy"></a>Итальянская (IT) электронная накладная: накладные по продаже и накладные по проектам для Италии

- Накладная по продаже (IT)
- Накладная по проекту (IT)

#### <a name="mexican-mx-cfdi-cfdi-for-mexico"></a>Мексиканский (MX) CFDI: CFDI для Мексики

- Формат накладной CFDI (MX)
- Отборочная накладная CFDI (MX)
- Перемещение запасов CFDI (MX)
- Формат платежа CFDI (MX)
- Формат отмены накладной CFDI (MX)

#### <a name="norwegian-no-electronic-invoice-sales-and-project-invoices-for-norway"></a>Норвежская (NO) электронная накладная: накладные по продаже и накладные по проектам для Норвегии

- OIOUBL накладной по продаже
- OIOUBL накладной по проекту
- OIOUBL кредит-ноты по продажам
- OIOUBL кредит-ноты по проекту

#### <a name="peppol-electronic-invoice-peppol-sales-and-project-invoices"></a>Электронная накладная PEPPOL: накладные PEPPOL на продажу и по проектам

- PEPPOL накладная по продаже
- PEPPOL накладная по проекту
- PEPPOL кредит-ноты по продажам
- PEPPOL кредит-ноты по проекту

#### <a name="spanish-es-electronic-invoice-sales-and-project-invoices-for-spain"></a>Испанская (ES) электронная накладная: накладные по продаже и накладные по проектам для Испании

- Накладная по продаже (ES)
- Накладная по проекту (ES)

### <a name="actions"></a>Действия

В приведенной ниже таблице перечислены доступные действия, а также являются ли они в настоящее время общедоступными или все еще предварительной версией.

| Действие                                        | описание                                                                  | Доступность         |
|-----------------------------------------------|------------------------------------------------------------------------------|----------------------|
| Преобразование документа                            | Запуск формата электронной отчетности для преобразования документа.                   | Общедоступно  |
| Подпись документа xml                             | Подписание XML-документов цифровой подписью.                                   | В режиме предварительного просмотра           |
| Подписание документа JSON для налогового органа Египта | Подписание документов JSON цифровой подписью для налогового органа Египта.       | Общедоступно  |
| Интеграция с египетской службой ETA           | Связь с налоговыми органами Египта.                                     | Общедоступно  |
| Вызов бразильской службы SEFAZ                  | Интеграция с бразильской службой SEFAZ для отправки финансовых документов.       | В режиме предварительного просмотра           |
| Вызов мексиканской службы PAC                      | Интеграция с мексиканской службой PAC для отправки CFDI.                      | В режиме предварительного просмотра           |
| Обработка ответа                              | Анализ ответа, полученного от вызова веб-службы.                     | Общедоступно  |
| Использование MS Power Automate                         | Интеграция с потоком, встроенным в Microsoft Power Automate.                       | В режиме предварительного просмотра           |

## <a name="configuration-providers"></a>Поставщики конфигураций

Поставщики конфигураций предоставляют функции электронного выставления накладных и их компоненты электронной отчетности, такие как сопоставление моделей, конфигурация формата и контекстная модель. Они публикуют функции электронного выставления накладных и компоненты электронной отчетности в соответствующем глобальном репозитории. Отсюда другие организации могут загрузить их.

Прежде чем настраивать функции электронного выставления накладных через RCS, необходимо настроить собственную организацию в качестве поставщика конфигурации в модуле **Электронная отчетность**. Дополнительные сведения о том, как задать для поставщика конфигурации состояние **Активный** см. в разделе [Создание поставщиков конфигураций и пометка их как активных](../../fin-ops-core/dev-itpro/analytics/tasks/er-configuration-provider-mark-it-active-2016-11.md).

## <a name="viewing-electronic-invoicing-features-in-the-global-repository"></a>Просмотр функций электронного выставления накладных в глобальном репозитории

Чтобы просмотреть функции электронного выставления накладных, доступные в глобальном репозитории для конкретного поставщика конфигурации, необходимо выполнить синхронизацию экземпляра RCS организации. После завершения синхронизации будет обновлен список доступных функций электронного выставления накладных.

## <a name="importing-electronic-invoicing-features"></a>Импорт функций электронного выставления накладных

Перед использованием или настройкой функций электронного выставления накладных необходимо импортировать их в экземпляр RCS организации. Операция импорта создает локальную копию функций и копирует все артефакты электронной отчетности, которые используются функциями (например, конфигурации форматов и конфигураций моделей) в экземпляре RCS организации.

Можно импортировать функции электронного выставления накладных из любого поставщика конфигурации.

## <a name="creating-electronic-invoicing-features"></a>Создание функций электронного выставления накладных

Можно создать функцию электронного выставления накладных с нуля или можно наследовать ее из другой функции электронного выставления накладных.

При создании функции электронного выставления накладных с нуля необходимо вручную добавлять компоненты электронной отчетности (например, конфигурации версий функций и другие конфигурации, такие как установка версии функции и настройка приложения). При создании функции путем наследования из другой функции новая функция наследует все конфигурации из оригинала. 

## <a name="electronic-invoicing-feature-version"></a>Версия функции электронного выставления счетов

Функции электронного выставления счетов управляются версиями. При создании новой версии номер версии автоматически увеличивается на единицу. Для новой версии можно определить дату "начала действия".

Версии функции электронного выставления накладных следуют жизненному циклу, имеющему три состояния:

- **Черновик** — если версия функции имеет этот статус, можно изменить ее атрибуты конфигурации и любые ее артефакты (например, конфигурации формата файла).
- **Завершено** — если версия функции имеет этот статус, она была опубликована в глобальном репозитории, связанном с вашей организацией. Изменить версию функции или какие-либо компоненты электронной отчетности нельзя.
- **Опубликовано** — если версия функции имеет этот статус, она была опубликована в модуле электронного выставления накладных. Изменить версию функции или какие-либо компоненты электронной отчетности нельзя.

### <a name="feature-configurations"></a>Конфигурации функции

Конфигурации функций содержат все конфигурации формата электронной отчетности, которые используются в функциях электронного выставления накладных. Все электронные файлы, используемые функцией электронного выставления накладных в процессе обработки, поступают из конфигураций форматов, которые были добавлены в конфигурации функций этой функции.

Из конфигураций функций можно получить доступ к конструктору формата электронной отчетности, который является средством электронной отчетности, используемым для создания конфигураций формата.

### <a name="feature-setup"></a>Настройка функции

Настройки функций используются в сочетании с конфигурациями функций. Каждая настройка функций включает набор действий, правил применимости и переменных, которые обеспечивают ожидаемое поведение, чтобы функция электронного выставления накладных могла отвечать определенным требования в электронной накладной.

### <a name="application-setup"></a>Настройка приложения

Настройка приложения должна быть связана с ранее созданным подключенным приложением.

С помощью настройки приложения можно настроить часть функции электронного выставления накладных, которая должна быть выполнена в Finance и Supply Chain Management. По крайней мере три настраиваемых компонента являются обязательными, независимо от функции электронного выставления накладных:

- **Имя таблицы** — сущность в Finance и Supply Chain Management, в которой содержатся разнесенные накладные, и на которой основана функция электронного выставления накладных.
- **Контекст** — имя модели контекста накладной, которая была настроена в электронной отчетности.
- **Сопоставление бизнес-документов** — имя модели сопоставления накладных, которая была настроена в электронной отчетности.

> [!IMPORTANT]
> Конфигурация, введенная в настройке приложения, может просматриваться в Finance и Supply Chain Management. Перейдите в раздел **Администрирование организации \> Настройка \> Параметр электронных документов**. На вкладке **Электронный документ** выберите **Развернуть**, затем выберите параметр **Подключенное приложение**.

### <a name="deploying-feature-versions"></a>Развертывание версий функций

В RCS используйте команду **Развернуть** для целевой публикации версии функции электронного выставления накладных. Выберите **Развернуть**, затем выберите один из следующих вариантов, чтобы определить цель развертывания: 

- **Среда службы** — когда целью развертывания является среда службы, версия функции электронного выставления накладных публикуется в среде службы. После этого модуль электронного выставления накладных готов к получению и обработке электронных документов, которые отправляются из Finance и Supply Chain Management.
- **Подключенное приложение** — когда целью развертывания является подключенное приложение, конфигурация, предоставляемая настройкой приложения, записывается в экземпляр Finance и Supply Chain Management, который ранее был связан с ним.

Только версии функции электронного выставления накладных, которые имеют статус **Выполнено**, могут быть развернуты в среде службы или в подключенном приложении.

### <a name="removing-feature-versions"></a>Удаление версий функций

В RCS можно использовать команду **Отменить развертывание** для удаления определенной версии функции электронного выставления накладных из среды службы в модуле электронного выставления накладных.

> [!IMPORTANT]
> Команда **Отменить развертывание** применяется только в средах службы. Она не удаляет версии функции электронного выставления накладных из подключенных приложений.

### <a name="rebasing-electronic-invoicing-features"></a>Повторное размещение функций электронного выставления накладных

Если одна функция электронного выставления накладных является производной от другой, команда **Повторно разместить** обновляет производную функцию с изменениями, которые были введены в исходной функции.

## <a name="additional-resources"></a>Дополнительные ресурсы

- [Выпуск электронных накладных в Finance и Supply Chain Management](e-invoicing-issuing-electronic-invoices-finance-supply-chain-management.md)


[!INCLUDE[footer-include](../../includes/footer-banner.md)]
