---
title: Создание учетной записи хранилища в Azure и хранилища ключей
description: В этом разделе объясняется, как создать учетную запись хранилища Azure и хранилище ключей.
author: gionoder
manager: AnnBe
ms.date: 09/22/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 97423
ms.assetid: ''
ms.search.region: Global
ms.author: janeaug
ms.search.validFrom: 2020-07-08
ms.dyn365.ops.version: AX 10.0.12
ms.openlocfilehash: b8e39539f767cc2944a9a7fdda09121921c64763
ms.sourcegitcommit: 025561f6a21fe8705493daa290f3f6bfb9f1b962
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/23/2020
ms.locfileid: "3836026"
---
# <a name="create-an-azure-storage-account-and-a-key-vault"></a>Создание учетной записи хранилища в Azure и хранилища ключей

[!include [banner](../includes/banner.md)]
[!include [banner](../includes/preview-banner.md)]


Дополнительная служба электронных накладных несет ответственность за хранение всех ваших деловых данных в ресурсах Microsoft Azure, принадлежащих вашей компании. Для обеспечения правильной работы службы и того, что все деловые данные, необходимые для дополнения электронных накладных и создаваемые этим дополнением, доступны только для этого дополнения, необходимо создать два основных ресурса Azure:

- Учетная запись хранилища Azure (хранилище BLOB-объектов) для хранения электронных накладных
- Хранилище ключей Azure для хранения сертификатов и универсального кода ресурса (URI) учетной записи хранилища

> [!NOTE]
> Выделенный ресурсы хранилища ключей и хранилища BLOB-объектов клиента должны быть выделены специально для использования с дополнением электронных накладных.

## <a name="prerequisites"></a>Необходимые условия

Перед выполнением шагов из данного раздела необходимо убедиться, что были выполнены следующие задачи:

- Создайте ресурс хранилища ключей в Azure. Дополнительные сведения см. в разделе [Об Azure Key Vault](https://docs.microsoft.com/azure/key-vault/general/overview).
- Создайте учетную запись хранилища Azure (хранилище BLOB-объектов). Дополнительные сведения см. в разделе [Управление учетной записью хранилища Azure](https://docs.microsoft.com/azure/storage/blobs/).

## <a name="overview"></a>Обзор

В этом разделе выполняются два основных шага:

- Настройте учетную запись хранилища Azure, чтобы получить URI учетной записи хранилища.
- Настройте хранилище ключей для хранения URI учетной записи хранения.

## <a name="set-up-the-azure-storage-account-to-get-the-storage-account-uri"></a>Настройка учетной записи хранилища Azure для получения URI учетной записи хранилища

1. Открывает учетную запись хранения, которую планируется использовать в дополнении электронных накладных.
2. Перейдите в раздел **Служб BLOB-объектов** \> **Контейнеры** и создайте новый контейнер.
3. Введите имя контейнера и задайте для поля **Уровень открытого доступа** значение **Частный (нет анонимного доступа)**.
4. Откройте контейнер и перейдите в раздел **Параметры \> Политика доступа**.
5. Выберите **Добавить политику**, чтобы добавить сохраненную политику доступа.
6. Задайте требуемые значения в полях **Идентификатор** и **Разрешения**. В поле **Разрешения** следует выбрать все разрешения.

    ![Предоставление разрешения для хранилища BLOB-объектов](media/e-Invoicing-services-create-azure-resources-grant-blob-permissions.png)

7. Введите даты начала и окончания срока действия. Дата истечения срока действия должна быть в будущем.
8. Выберите **ОК**, чтобы сохранить политику, затем сохраните изменения в контейнере.
9. Вернитесь к учетной записи хранения и откройте **Обозреватель службы хранилища (предварительная версия)**.
10. Щелкните контейнер правой кнопкой мыши и выберите **Получить подписанный URL-адрес**.
11. В диалоговом окне **Подписанный URL-адрес** скопируйте и сохраните значение в поле **URI**. Это значение будет использоваться в следующей процедуре и будет называться *URI подписанного URL-адреса*.

    ![Выбор и копирование значения URI](media/e-Invoicing-services-create-azure-resources-select-and-copy-uri.png)

## <a name="set-up-the-key-vault-to-store-the-storage-account-uri"></a>Настройка хранилища ключей для хранения URI учетной записи хранения

1. Откройте хранилище ключей, которое планируется использовать в дополнении электронных накладных.
2. Перейдите в раздел **Параметры** \> **Секреты** и выберите **Создать/импортировать**, чтобы создать новый секрет.
3. На странице **Создание секрета** в поле **Параметры отправки** выберите **Вручную**.
4. Введите имя секрета. Это имя будет использоваться во время настройки службы в Regulatory Configuration Service (RCS) и будет называться *имя секрета хранилища ключей*.
5. В поле **Значение** выберите **URI подписанного URL-адреса**, затем выберите **Создать**.
6. Настройте политику доступа, чтобы предоставить дополнению электронных накладных уровень безопасного доступа для созданного вами секрета. Перейдите в раздел **Параметры \> Политика доступа** и выберите команду **Добавить политику доступа**.
7. Задайте разрешения секрета для операций **Получить** и **Список**.

    ![Предоставление доступа к службе](media/e-Invoicing-services-create-azure-resources-grant-service-access.png)

8. Задайте разрешения сертификата для операций **Получить** и **Список**.

    ![Предоставление разрешения сертификата](media/e-Invoicing-services-create-azure-resources-grant-certificate-permission.png)

9. В диалоговом окне **Субъект** выберите субъект, добавив **Дополнение электронных накладных**.
10. Выберите **Добавить**, затем выберите **Сохранить изменения Key Vault**.
11. На странице **Обзор** скопируйте значение **Имя DNS** для хранилища ключей. Это значение будет использоваться во время настройки службы в RCS и будет называться *URI хранилища ключей*.
