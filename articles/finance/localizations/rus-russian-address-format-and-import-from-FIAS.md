---
title: Российские форматы адреса
description: В этом разделе содержатся сведения о российских форматах адресов и импорте из FIAS.
author: v-nadyuz
manager: AnnBe
ms.date: 11/05/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.search.region: Russia
ms.author: shylaw
ms.search.validFrom: 2019-03-01
ms.dyn365.ops.version: 8.0999999999999996
ms.openlocfilehash: c6b31571e2385ba28f39732f8f0ba739978949a9
ms.sourcegitcommit: fbc106af09bdadb860677f590464fb93223cbf65
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/06/2019
ms.locfileid: "2774077"
---
# <a name="russian-address-formats"></a>Российские форматы адреса
[!include [banner](../includes/banner.md)]

Форматы адресов определяют, как будут выглядеть данные адреса при печати. В системе можно настроить форматы адресов для каждой страны или региона, в котором работает организация. В России адреса имеют стандартную форму. Однако могут быть включены дополнительные сведения, такие как район, код улицы, дополнение здания, здание, квартира, группа домов, группа квартир и земельный участок.

База данных адресов Федеральной информационной системы адресов (или FIAS) может потребоваться для предприятий в Российской Федерации. Можно использовать специализированные средства для импорта FIAS в систему и поддержания ее актуальности. В этом разделе описывается, как настроить и использовать механизмы импорта FIAS.

## <a name="set-up-russian-address-formats"></a>Настройка российских форматов адресов

### <a name="set-up-the-address-format-country-or-region-state-or-province-county-city-and-postal-code"></a>Настройка формата адреса, страны или региона, региона или области, города и почтового кода

1. Перейдите **Администрирование организации** \> **Глобальная адресная книга** \> **Адреса** \> **Настройка адреса**, чтобы открыть страницу **Настройка адреса**.
2. На вкладках **Формат адреса**, **Страна/регион**, **Область/край**, **Район**, **Город** и **Почтовый индекс** можно настроить формат адреса, страну/регион, область/край, район, город и почтовый индекс.

### <a name="set-up-a-new-district"></a>Настройка нового района

1. На странице **Настройка адреса** на вкладке **Район** выберите страну или регион, область или край, код района и код города.
2. Выберите **Создать**, чтобы создать новый район для выбранной страны или региона, области или края, района и города.
3. В поле **Район** введите уникальный код для района.
4. В поле **Описание** введите официальное название района.
5. В поле **Почтовый индекс** выберите почтовый индекс.

    ![Вкладка "Район" на странице "Настройка адреса"](media/1%20Address%20setup.jpg)

6. Нажмите **Сохранить**.

### <a name="set-up-a-street-code"></a>Настройка кода улицы

1. На странице **Настройка адреса** на вкладке **Улица** убедитесь, что в поле **Страна/регион** выбран параметр **RUS**.
2. Выберите область или край, код района, код города и код района.
3. Выберите **Создать**, чтобы создать новую улицу для выбранной страны или региона, области или края, района, города и микрорайона.
4. В поле **Код улицы** введите уникальный код для улицы.
5. В поле **Улица** введите официальное название улицы.
6. В поле **Почтовый индекс** выберите почтовый индекс.

    ![Вкладка "Улица" на странице "Настройка адреса"](media/2%20Address%20setup.jpg)

7. Нажмите **Сохранить**.

### <a name="set-up-a-group-of-houses"></a>Настройка группы домов

1. На странице **Настройка адреса** на вкладке **Группа домов** убедитесь, что в поле **Страна/регион** выбран параметр **RUS**.
2. Выберите область или край, код района, код города, код микрорайона и код улицы.
3. Выберите **Создать**, чтобы создать новую группу домов для выбранной страны или региона, области или края, района, города, микрорайона и улицы.
4. В поле **Код группы домов** введите уникальный код для группы домов.
5. В поле **Номера зданий** введите разделенный запятыми список номеров домов в группе.
6. В поле **Почтовый индекс** выберите почтовый индекс.

    ![Вкладка "Группа домов" на страниц "Настройка адреса"](media/3%20Address%20setup.jpg)

7. Нажмите **Сохранить**.

### <a name="set-up-a-group-of-flats"></a>Настройка группы квартир

1. На странице **Настройка адреса** на вкладке **Группа квартир** убедитесь, что в поле **Страна/регион** выбран параметр **RUS**.
2. Выберите область или край, код района, код города, код микрорайона, код улицы и код группы домов.
3. Выберите **Создать**, чтобы создать новую группу квартир для выбранной страны или региона, области или края, района, города, микрорайона, улицы и группы домов.
4. В поле **Код группы квартир** введите уникальный код для группы квартир.
5. В поле **Группа квартир** введите разделенный запятыми список номеров квартир в группе.
6. В поле **Почтовый индекс** выберите почтовый индекс.

    ![Вкладка "Группа квартир" на страниц "Настройка адреса"](media/4%20Address%20setup.jpg)

7. Нажмите **Сохранить**.

### <a name="set-up-land-plots"></a>Настройка земельных участков

1. На странице **Настройка адреса** на вкладке **Земельные участки** убедитесь, что в поле **Страна/регион** выбран параметр **RUS**.
2. Выберите область или край, код района, код города, код микрорайона и код улицы.
3. Выберите **Создать**, чтобы создать новый земельный участок для выбранной страны или региона, области или края, района, города, микрорайона и улицы.
4. В поле **Код земельного участка** введите уникальный код для земельного участка.
5. В поле **Номера земельных участков** введите список разделенных запятой номеров земельных участков.
6. В поле **Почтовый индекс** выберите почтовый индекс.

    ![Вкладка "Земельные участки" на странице "Настройка адреса"](media/5%20Address%20setup.jpg)

7. Нажмите **Сохранить**.

## <a name="create-an-address-for-a-customer"></a>Создание адреса для клиента

1. Перейдите в раздел **Расчеты с клиентами** \> **Клиенты** \> **Все клиенты**.
2. Откройте запись клиента, а затем на экспресс-вкладке **Адреса** выберите **Дополнительные параметры \> Дополнительно**, чтобы открыть страницу **Управление адресами**.

    ![Экспресс-вкладка "Адреса" в записи клиента](media/6%20All%20customers.jpg)

3. На экспресс- вкладке **Адрес** в поле **Страна/регион** выберите **RUS**.
4. В поле **Почтовый индекс** выберите почтовый индекс. После выбора почтового индекса в поле **Район** отображается код и название района.
5. В поле **Код улицы** выберите код улицы. Название улицы отображается в правой части поля **Код улицы** и в поле **Улица**.
6. В поле **Дополнение здания** введите название здания. Название здания также вводится в поле **Улица**.
7. В поле **Здание** введите номер здания. Номер здания также вводится в поле **Улица**.
8. В поле **Квартира** введите номер квартиры. Номер квартиры также вводится в поле **Улица**.
9. В поле **Группа домов** выберите код группы домов. Отображаются соответствующие номера зданий.
10. В поле **Группа квартир** выберите код группы квартир. Отображаются соответствующие номера квартир.

    ![Экспресс-вкладка "Адреса" на странице "Управление адресами"](media/7%20Manage%20addresses.jpg)

11. Нажмите **Сохранить**.

## <a name="import-from-fias"></a>Импорт из FIAS

### <a name="import-an-fias-metadata-package"></a>Импорт пакета метаданных FIAS

1. Загрузите файл **RU FIAS – FiasMetadataPackage** на вкладке **Пакет данных** в общей библиотеке активов в Microsoft Dynamics Lifecycle Services (LCS). Этот пакетный файл содержит необходимые данные для выполнения заданий импорта.

    ![Общая библиотека активов в LCS](media/8%20Shared%20asset%20library.jpg)

2. Перейдите **Администрирование системы** \> **Рабочие области** \> **Управление данными**.
3. В разделе **Импорт/экспорт** выберите плитку **Импорт**, чтобы создать новое задание импорта.
    
    ![Снимок экрана поста в социальной сети, автоматически создается описание](media/9%20Data%20management.jpg)

4. В поле **Имя группы** введите **ImportFiasMetadata**.
5. В поле **Описание** введите описание.
6. На экспресс-вкладке **Выбранные объекты** выберите **Добавить файл** для добавления следующих файлов из скачанного ранее файла пакета:

    - Сокращения адресов
    - FiasEstateStatusEntity
    - FiasFlatTypeEntity
    - FIASOperationStatusesEntity
    - FiasStructureStatusEntity
  
   После выбора каждого файла выберите **Отправить и добавить**.

7. Нажмите **Сохранить**.

    ![Снимок экрана поста в социальной сети, автоматически создается описание](media/10%20Import.jpg)

### <a name="set-up-a-template-to-import-fias-data"></a>Настройка шаблона для импорта данных FIAS

1. Перейдите в раздел **Администрирование системы \> Рабочие области \> Управление данными**.
2. В разделе **Импорт/экспорт** выберите плитку **Шаблоны**, чтобы открыть страницу **Шаблон**.
3. Выберите **Создать** для создания нового шаблона.
4. В поле **Код шаблона** введите уникальный идентификационный номер шаблона.
5. В поле **Описание** введите описание.
6. В поле **Статус шаблона** выберите **Проверен**.
7. На экспресс-вкладке **Объекты** выберите **Добавить объект** для добавления следующих объектов данных:

    - FiasAddressObjectEntity
    - FiasHouseEntity
    - FiasSteadEntity
    - FiasRoomEntity

    После выбора каждого объекта в поле **Имя объекта** выберите **Добавить объект**.

8. Нажмите **Сохранить**.

    ![Снимок экрана поста в социальной сети, автоматически создается описание](media/11%20Template.jpg)

### <a name="set-up-a-job-for-a-full-fias-import"></a>Настройка задания для полного импорта FIAS

При первом импорте данных FIAS в систему следует создать задание для полного импорта FIAS.

1. Перейдите в раздел **Администрирование системы \> Рабочие области \> Управление данными**.
2. В разделе **Импорт/экспорт** выберите плитку **Импорт**, чтобы создать новое задание импорта.
3. В поле **Имя группы** введите **FiasFullImportJob**.
4. В поле **Описание** введите описание.
5. На экспресс-вкладке **Выбранные объекты** выберите **Добавить шаблон**, чтобы добавить ранее созданный шаблон.
6. В группе полей **Замена или объединение объекта** выберите **Объединить**.
7. В поле **Формат исходных данных** выберите **VerticalBarSeparated-Unicode**.
8. Выберите **ОК**, затем выберите **Сохранить**.

    ![Снимок экрана поста в социальной сети, автоматически создается описание](media/12%20Import.jpg)

### <a name="set-up-a-job-to-import-fias-delta"></a>Настройка задания для импорта дельты FIAS

Для обновления существующих данных адреса следует создать задание для импорта дельты FIAS.

1. Загрузите файл **RU FIAS – FiasTransformations** на вкладке **Пакет данных** в общей библиотеке активов в LCS.
2. Перейдите в раздел **Администрирование системы \> Рабочие области \> Управление данными**.
3. В разделе **Импорт/экспорт** выберите плитку **Импорт**, чтобы создать новое задание импорта.
4. В поле **Имя группы** введите **FiasDeltaImportJob**.
5. В поле **Описание** введите описание.
6. На экспресс-вкладке **Выбранные объекты** выберите **Добавить шаблон**, чтобы добавить ранее созданный шаблон.
7. В группе полей **Замена или объединение объекта** выберите **Объединить**.
8. В поле **Формат исходных данных** выберите **XML-Attribute**.
9. Нажмите **ОК**.

    ![Автоматически создается снимок экрана описания мобильного телефона](media/13%20Import.jpg)

10. Для каждого объекта выберите кнопку в столбце **Просмотр карты**, чтобы открыть страницу **Сопоставить исходные данные с промежуточными**.

    ![Автоматически создается снимок экрана описания мобильного телефона](media/14%20Map%20source%20to%20staging.jpg)

11. На вкладке **Преобразования** выберите **Создать**, а затем выберите **Отправить файл**, чтобы открыть диалоговое окно **Выбор файла**.
12. Выберите **Обзор** и выберите следующие преобразования:

    - Для объекта **FiasAddressObjectEntity** выберите преобразование **fiasAddrObjTrans**.
    - Для объекта **FiasHouseEntity** выберите преобразование **fiasHousesTrans**.
    - Для объекта **FiasSteadEntity** выберите преобразование **fiasSteadsTrans**.
    - Для объекта **FiasRoomEntity** выберите преобразование **fiasRoomsTrans**.

## <a name="fias-import"></a>Импорт FIAS

### <a name="do-a-full-fias-import-to-an-empty-database"></a>Выполнение полного импорта FIAS в пустую базу данных

Так как полная база данных FIAS содержит очень большое число записей, при импорте могут возникнуть некоторые проблемы с производительностью. Чтобы предотвратить возникновение этих неполадок, при первом импорте следует использовать файл базы данных FIAS в формате TXT. Этот файл можно найти в общей библиотеке ресурсов LCS. Он содержит базу данных FIAS на 1 декабря, 2018 г.

1. Загрузите файл **RU FIAS - addrObjCSV** на вкладке **Пакет данных** в общей библиотеке активов в LCS. Убедитесь, что файл содержит файл AS_ADDROBJ_20181216_\<number of state\>. txt и при необходимости файлы House, Stead и Room.
2. Создайте ZIP-архив, содержащий файлы из загруженного пакета для одного или нескольких состояний.
3. Перейдите в раздел **Администрирование организации \> Глобальная адресная книга \> Импорт из FIAS**.
4. Выберите **Импорт FIAS**, чтобы открыть диалоговое окно **Импорт данных**.
5. На экспресс-вкладке **Параметры** выберите **Обзор**, чтобы выбрать архив ZIP, созданный ранее.
6. Для параметра **Полный импорт** выберите значение **Да**.
7. Если планируется импорт домов и участков, установите для параметра **Включает дома** значение **Да**.
8. Если планируется импорт помещений, установите для параметра **Включает помещения** значение **Да**.

    ![Область импорта данных](media/15%20Import%20of%20data.jpg)

9. Выберите **ОК**, чтобы начать импорт.
10. Выберите **Обновить** в правом верхнем углу страницы, чтобы просмотреть строку вместе с результатами полного импорта.
    
    ![Вкладка "Параметры"](media/16%20Import%20from%20FIAS.jpg)

### <a name="update-addresses-from-fias"></a>Обновление адресов из FIAS

1. Загрузите базу данных с даты последнего обновления из <https://fias.nalog.ru/>.
2.  Выберите загруженную базу данных в формате ZIP и выполните импорт так же, как и в предыдущем разделе Однако в диалоговом окне **Импорт данных** задайте для параметра **Полный импорт** значение **Нет**.

### <a name="tips-for-speeding-up-the-import-process"></a>Советы по ускорению процесса импорта

Время, необходимое для импорта данных FIAS, зависит от объема импортируемых данных и настройки системы. Ниже приведены несколько советов, которые могут помочь ускорить процесс импорта.

Попробуйте следующую процедуру:

1. Перейдите в раздел **Администрирование системы \> Рабочие области \> Управление данными**.
2. В разделе **Импорт/экспорт** выберите плитку **Параметры структуры**, чтобы открыть страницу **Параметры структуры импорта и экспорта данных**.
3. На вкладке **Параметры объекта** выберите **Настройка параметров выполнения объекта**, чтобы открыть страницу **Параметры выполнения импорта объектов**.
4. Задайте следующие поля для настройки многопоточности для объектов FIAS, используемых в заданиях импорта:

    - В поле **Объект** выберите объект FIAS.
    - В поле **Счетчик пороговых записей импорта** введите пороговое количество записей для импорта.
    - В поле **Счетчик задач импорта** введите количество задач импорта.

      ![Параметры выполнения импорта объекта](media/17%20Entity%20import%20execution%20parameters.jpg)

При выполнении задания полного импорта необходимо одновременно указать несколько регионов, но не все регионы.
