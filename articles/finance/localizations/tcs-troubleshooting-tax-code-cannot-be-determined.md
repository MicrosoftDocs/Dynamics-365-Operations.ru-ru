---
title: Невозможно определить налоговый код
description: В этой теме объясняется, как устранить ошибку "Невозможно определить налоговый код" в службе расчета налогов.
author: hangwan
ms.date: 03/25/2022
ms.topic: business-process
ms.prod: ''
ms.technology: ''
ms.search.form: TaxIntegrationTaxServiceParameters
audience: Application User
ms.reviewer: kfend
ms.search.region: Global
ms.author: hangwan
ms.search.validFrom: 03/23/2022
ms.dyn365.ops.version: Version 10.0.21
ms.openlocfilehash: 3c0914f0013ad2de61cd5a59e3092fef149742e4
ms.sourcegitcommit: d715e44b92b84b1703f5915d15d403ccf17c6606
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/27/2022
ms.locfileid: "8645434"
---
# <a name="tax-code-cannot-be-determined"></a>Невозможно определить налоговый код

[!include [banner](../includes/banner.md)]

В этой теме объясняется порядок устранения неполадок, если вы получаете ошибку "Невозможно определить налоговый код" в службе расчета налогов.

## <a name="symptom"></a>Проблема

Появляется следующее сообщение об ошибке: "Заголовок/строки - 1, невозможно определить налоговый код". В качестве альтернативы можно найти ошибку в файле устранения неполадок, как показано в следующем примере. Дополнительные сведения см. в разделе [Включение режима отладки для устранения неполадок](tcs-troubleshooting-enable-debug-mode.md).

```json
======================Tax service calculation result JSON:===========================
{
    "taxDocument": {
        "Header": [
            {
                "Lines": [
                    {
                        ...
                        "Errors": [
                            {
                                "Code": "TaxSetup20001",
                                "Message": "Header/Lines - 1, tax code cannot be determined."
                            }
                        ],
                        "Adjustment": null
                    }
                ],
                "Measures": {
                    ...
                },
                ...
            }
        ]
    },
    ...
}
```

## <a name="cause"></a>Причина

Возможно, причина проблемы заключается в том, что налоговая группа и налоговая группа номенклатур не пересекаются.

## <a name="troubleshoot"></a>Устранение неполадок

Чтобы устранить неполадку, выполните следующие действия.

1. В файле устранения неполадок проверьте, чтобы налоговая группа и налоговая группа номенклатур были определены. Если значения для параметров **Налоговая группа** и **Налоговая группа номенклатур** пусты, налоговая группа и налоговая группа номенклатур не были определены. Если они были определены, результаты могут быть неправильными.

    Ниже приведен пример файла устранения неполадок.

    ```json
    ======================Tax service calculation result JSON:===========================
    {
        "taxDocument": {
            "Header": [
                {
                    "Lines": [
                        {
                            "Tax Codes": {},
                            "Measures": {
                                "Tax Group": "Group A",
                                "Item Tax Group": "Group B"
                            },
                            "Adjustment": null
                        }
                    ],
                    "Measures": {
                        ...
                    },
                    ...
                }
            ]
        },
        ...
    }
    ```

2. Убедитесь, что параметр **Переопределение налога** на вкладке **Настройка** сведений строки заказа на продажу включен.

    - Если он включен, налоговые коды определяются значениями параметров **Налоговая группа** и **Налоговая группа номенклатур**, введенных в строке проводки. Убедитесь, что эти значения введены правильно.
    - Если он не включен, убедитесь, что установлены правильные значения для полей **Применимость налоговой группы** и **Применимость налоговой группы номенклатур**. Дополнительные сведения см. в разделе [Соответствующий результат не найден](tcs-troubleshooting-no-matching-result.md).

3. Если налоговая группа и налоговая группа номенклатур были определены правильно, определите, имеется ли пересечение для них.

    1. В RCS перейдите в раздел **Налоговые функции** \> **Налоговые коды и группы** \> **Налоговая группа**.

        | Строка.Налоговая группа | Налоговые коды |
        |----------------|-----------|
        | Группа A        | A         |

    2. Перейдите в раздел **Налоговые функции** \> **Налоговые коды и группы** \> **Налоговая группа номенклатур**.

        | Строка.Налоговая группа номенклатур | Налоговые коды |
        |---------------------|-----------|
        | Группа B             | млрд         |

    Если для налоговой группы и налоговой группы номенклатур нет пересечения, налоговый код определить нельзя.

## <a name="mitigation"></a>Снижение риска

1. Пройдите все этапы в разделе [Устранение неполадок](#troubleshoot) данной темы и исправьте настройку нужным образом. Если налоговая группа и налоговая группа номенклатур не были определены правильно, см. раздел [Соответствующий результат не найден](tcs-troubleshooting-no-matching-result.md).
2. Если для налоговой группы и налоговой группы номенклатур нет пересечения, создайте новую версию функции в RCS и исправьте настройку.

    - Перейдите в раздел **Налоговые функции** \> **Налоговые коды и группы** > **Налоговая группа номенклатур**.

        | Строка.Налоговая группа номенклатур | Налоговые коды |
        |---------------------|-----------|
        | Группа B             | A;B       |

    Налоговый код будет определен как **A**.

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
