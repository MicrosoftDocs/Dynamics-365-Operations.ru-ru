---
title: Встроенный Power Apps
description: В этом разделе описывается, как внедрить Power Apps в клиент для расширения функциональных возможностей продукта.
author: jasongre
manager: AnnBe
ms.date: 09/20/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: FormRunConfigurationAddPAControl, FormRunConfigurationEditPAControl
audience: Application User, Developer, IT Pro
ms.reviewer: sericks
ms.search.scope: Operations, Core
ms.search.region: Global
ms.author: jasongre
ms.search.validFrom: 2018-02-28
ms.dyn365.ops.version: Platform update 14
ms.openlocfilehash: 755a30f89725ca0a7e1c14252984c617d6ba280e
ms.sourcegitcommit: 4162d9ef4239c9d4e5297b8aaa903dd54f9cafc3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2019
ms.locfileid: "2824501"
---
# <a name="embed-microsoft-power-apps"></a>Встроенный Microsoft Power Apps

[!include [banner](../includes/banner.md)]

Обновление платформы 14 поддерживает интеграцию с Microsoft Power Apps, службой, которая позволяет разработчикам и обычным пользователям создавать пользовательские бизнес-приложения для мобильных устройств, планшетов и интернета без написания кода. Затем приложения Power Apps, разработанные вами, вашей организации или более широкой экосистемой можно внедрить в приложения Finance and Operations для расширения функциональности продукта. Например, можно построить приложение Power App для дополнения приложений Finance and Operations информацией, извлеченной из другой системы.

Для получения дополнительных сведений о внедрении Power Apps посмотрите короткое видео [Как внедрить Power Apps](https://www.youtube.com/watch?v=x3qyA1bH-NY).

## <a name="adding-an-embedded-power-app-to-a-page"></a>Добавление внедренного приложения Power App на страницу

### <a name="overview"></a>Обзор

Перед внедрением приложения Power App в клиент необходимо сначала найти или построить приложение Power App с требуемыми визуальными элементами и/или функциональными возможностями. Мы не будет здесь подробно описывать процесс построения приложения Power App. Раздел [Знакомство с Power Apps](https://docs.microsoft.com/powerapps/getting-started) является хорошей начальной точкой, если вы не знакомы с Power Apps.

Когда вы готовы для внедрения определенного приложения Power App, можно выбрать один из двух способов доступа к приложению Power App на странице, который лучше подходит для вашего сценария. Первый способ — через кнопку Power Apps, которая была добавлена в стандартной области действий. Добавленные с помощью этого механизма приложения Power Apps будут отображаться как пункты меню внутри меню кнопки Power Apps. При выборе каждый их этих пунктов меню открывает боковую область, содержащую внедренное приложение Power App. Можно также выбрать отображение приложения Power App непосредственно на странице в виде новой вкладки, экспресс-вкладки, колонки или нового раздела в рабочей области.

При настройке вашего внедренного приложения Power App можно выбрать одно поле, которое необходимо отправить в качестве входных данных в приложение Power App. Это позволяет приложению Power App реагировать на основе данных, просматриваемых в данный момент.

### <a name="details"></a>Подробно

Приведенные ниже инструкции демонстрируют, как внедрить в веб-клиент приложение Power App.

1. Перейдите на страницу, на которой вы хотите внедрить приложение Power App. Это будет та же страница, которая содержит любые данные, который должны быть переданы в приложение Power App в качестве входных данных.
2. Откройте область **Вставить Power App**:

    - Щелкните **Параметры**, затем выберите **Персонализировать эту форму**. В меню **Вставить** выберите **Power App**. Наконец, выберите область, в которой вы хотите добавить приложение Power App. Если требуется внедрить приложение Power App в меню кнопки Power Apps, выберите область действий. Если требуется внедрить приложение Power App непосредственно на страницу, выберите соответствующую вкладку, экспресс-вкладку, колонку или раздела (если вы находитесь в рабочей области).
    - Если доступ к приложению Power App будет осуществляться с помощью меню кнопки Power Apps, можно также щелкнуть кнопку меню **Power Apps** на стандартной панели действий, а затем выбрать **Вставить Power App**.

3. Настройка внедренного приложения Power App:

    - Поле **Имя** показывает текст, отображаемый для кнопки или вкладки, которая будет содержать внедренное приложение Power App. Часто требуется повторить имя приложения Power App в этом поле.
    - **Код приложения** — это идентификатор GUID для приложения Power App, которое требуется внедрить. Чтобы получить это значение, найдите приложение Power App на сайте [web.powerapps.com](https://web.powerapps.com), затем найдите поле **Код приложения** в разделе **Сведения**.
    - Для **Входные данные для Power App** можно при необходимости выбрать поле, которое содержит данные, которые необходимо передать приложению Power App в качестве входных данных. См. пункт ниже в этом разделе под названием [Построение приложения Power App, которое использует данные из приложений Finance and Operations](#building-a-powerapp-that-leverages-data-sent-from-finance-and-operations-apps) для получения сведений о том, как приложение Power App может получить доступ к данным, отправленным из приложений Finance and Operations.
    - Выберите **Размер приложения**, соответствующий типу внедряемого приложения Power App. Выберите **Узкий** для приложений Power Apps, созданного для мобильных устройств, и **Широкий** для приложений Power Apps, созданных для планшетов. Это гарантирует, что достаточное количество места будет выделено для внедренного приложения Power App.
    - Экспресс-вкладка **Юридические лица** предоставляет возможность выбора, для какого юридического лица доступно приложение Power App. По умолчанию приложение Power App отображается во всех юридических лицах.

4. После подтверждения, что настройка выполнена верно, нажмите кнопку **Вставить** для внедрения приложения Power App на страницу. Будет предложено обновить браузер, чтобы появилось внедренное приложение Power App.

## <a name="sharing-an-embedded-power-app"></a>Совместное использование внедренного приложения Power App

После внедрения приложения Power App на страницу и проверки правильности его работы с любым контекстом данных, которые передаются со страницы, можно предоставить доступ к этому внедренному приложению Power App другим пользователям в системе. Это можно сделать двумя разными способами с помощью функций персонализации продукта:

- Рекомендуется делать это через системного администратора, который может принудительно отправлять персонализации всеми пользователями или части пользователей.
- Кроме того, можно экспортировать персонализации страницы, отправить их одному или нескольким пользователям, и каждый из этих пользователей может импортировать эти изменения. Параметр Управление на панели инструментов персонализации позволяет экспортировать и импортировать персонализации.

См. раздел [Персонализация работы пользователя](personalize-user-experience.md), в котором приведены более подробных сведения о возможностях персонализации в продукте и порядке их использования.

## <a name="building-a-power-app-that-leverages-data-sent-from-finance-and-operations-apps"></a>Создание приложения Power App, которое использует данные, отправляемые из приложений Finance and Operations

Важная часть построения приложения Power App, которое будет внедрено в приложения Finance and Operations, — это использования входных данных из приложений Finance and Operations. Внутри приложения Power App доступ к этим данным можно получить с помощью переменной Param("EntityId").

Например, в функции OnStart приложения Power App можно задать входные данные из приложений Finance and Operations для переменной следующим образом:

```
If(!IsBlank(Param("EntityId")), Set(FinOpsInput, Param("EntityId")), Set(FinOpsInput, ""));
```

## <a name="viewing-an-embedded-power-app"></a>Просмотр внедренного приложения Power App

Для просмотра внедренного приложения Power App на странице в приложениях Finance and Operations просто перейдите на страницу с внедренным приложением Power App. Помните, что приложения Power Apps можно открывать с помощью кнопки Power Apps на стандартной панели действий или они могут отображаться прямо на странице как новая вкладка, экспресс-вкладка, колонка или новый раздел в рабочей области. Когда пользователь в первый раз пытается загрузить приложение Power App на странице, ему или ей будет предложено выполнить вход в Power Apps, чтобы убедиться, что пользователь имеет соответствующие разрешения для использования приложения Power App.

## <a name="editing-an-embedded-power-app"></a>Изменение внедренного приложения Power App

После того как приложение Power App внедрено на страницу, может потребоваться внести изменения в конфигурацию этого приложения Power App. Например, может потребоваться изменить метку, связанную с внедренным приложением Power App, или была создана новая версии приложения Power App и необходимо обновить идентификатор приложения для указания в последней версии приложения Power App.

Выполните следующие действия, чтобы изменить конфигурацию внедренного приложения Power App.

1. Перейдите в область **Редактировать Power App**.

    - Если доступ к внедренному приложению Power App осуществляется с помощью кнопки меню Power Apps, щелкните правой кнопкой мыши кнопку меню Power Apps и выберите **Персонализация**. Выберите приложение Power App, которое требуется настроить, в раскрывающемся меню **Выбрать Power App**.
    - Если внедренное приложение Power App отображается непосредственно на странице, выберите **Параметры**, затем выберите **Персонализировать эту форму**. С помощью инструмента **Выбрать** щелкните внедренное приложение Power App.

2. Внесите необходимые изменения в конфигурацию Power Apps, затем щелкните **Сохранить**.

## <a name="removing-an-embedded-power-app"></a>Удаление внедренного приложения Power App

После того как приложение Power App было внедрено на страницу, существует два способа удаления его при необходимости:

- Перейдите в область **Редактировать Power App**, используя инструкции из пункта [Изменение внедренного приложения Power App](#editing-an-embedded-powerapp) ранее в этом разделе. Убедитесь, что в области отображается информация для внедренного приложения Power App, которое вы хотите удалить, затем нажмите кнопку **Удалить**.
- Поскольку внедренное приложение Power App сохраняется как данные персонализации, очистка персонализации страницы также приведет к удалению всех внедренных приложений Power Apps на этой странице. Обратите внимание, что очистка персонализации страницы является необратимой и не может быть отменена. Чтобы удалить вашу персонализацию на странице, выберите **Параметры**, затем щелкните **Персонализировать эту форму**. В меню **Управление** выберите пункт **Очистить**. После обновления браузера все предыдущие персонализации для этой страницы будут удалены. Дополнительные сведения об оптимизации страниц с помощью персонализации см. в разделе [Персонализация работы пользователя](personalize-user-experience.md).

## <a name="appendix"></a>Приложение

### <a name="developer-control-over-where-a-power-app-can-be-embedded"></a>Контроль разработчика над тем, где возможно внедрение приложения Power App

По умолчанию пользователи могут внедрять приложения Power Apps на любой странице, как в кнопку меню Power Apps, так и непосредственно на страницу в виде вкладки, экспресс-вкладки, колонки или нового раздела в рабочей области. Тем не менее при необходимости разработчики также могут настроить эту возможность, чтобы разрешить только внедрение приложений Power Apps на некоторых страницах путем реализации следующих методов:

- **isPowerAppPersonalizationEnabled** — если этот метод возвращает значение false для конкретной страницы, то кнопка меню Power Apps не будет отображаться и пользователи не смогут внедрять приложения Power Apps ни в каком месте на этой странице, в том числе в виде вкладки.
- **isPowerAppTabPersonalizationEnabled** — если этот метод возвращает значение false для конкретной страницы, то пользователи не смогут внедрять приложения Power Apps непосредственно на странице в качестве вкладки, экспресс-вкладки или раздела панорамы. Пользователи по-прежнему будут иметь возможность внедрять приложения Power Apps через кнопку меню Power Apps, если внедрение разрешено на странице.

Следующий пример показывает новый класс с двумя методами, необходимый для настройки того, где могут быть внедрены приложения Power Apps.

```
[ExtensionOf(classStr(FormRunConfigurationPowerAppsConfiguration))]

public final class ClassTest_Extension
{
    public static boolean isPowerAppPersonalizationEnabled(str pageName)
    {
        var result = next isPowerAppPersonalizationEnabled(pageName);
        return result;
    }
    
    public static boolean isPowerAppTabPersonalizationEnabled(str pageName)
    {
        var result = next isPowerAppTabPersonalizationEnabled(pageName);
        return result;
    }
}
```
