---
title: Встроенный Power Apps
description: В этом разделе описывается, как внедрить Power Apps в клиент для расширения функциональных возможностей продукта.
author: jasongre
manager: AnnBe
ms.date: 12/02/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: FormRunConfigurationAddPAControl, FormRunConfigurationEditPAControl
audience: Application User, Developer, IT Pro
ms.reviewer: sericks
ms.search.scope: Operations, Core
ms.search.region: Global
ms.author: jasongre
ms.search.validFrom: 2018-02-28
ms.dyn365.ops.version: Platform update 14
ms.openlocfilehash: 90422a34499dab7302ad7722cf84d40e1815991c
ms.sourcegitcommit: 3c1eb3d89c6ab9bd70b806ca42ef9df74cf850bc
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/12/2020
ms.locfileid: "3042950"
---
# <a name="embed-microsoft-power-apps"></a>Встроенный Microsoft Power Apps

[!include [banner](../includes/banner.md)]

Finance and Operations поддерживает интеграцию с Microsoft Power Apps, службой, которая позволяет разработчикам и обычным пользователям создавать пользовательские бизнес-приложения для мобильных устройств, планшетов и интернета без написания кода. Затем приложения Power Apps, разработанные вами, вашей организации или более широкой экосистемой можно внедрить в приложения Finance and Operations для расширения функциональности продукта. Например, можно создать приложение Power Apps, которое дополняет приложение Finance and Operations информацией, извлеченной из другой системы.

Для получения дополнительных сведений о внедрении Power Apps посмотрите короткое видео [Как внедрить Power Apps](https://www.youtube.com/watch?v=x3qyA1bH-NY).

## <a name="adding-an-embedded-app-from-power-apps-to-a-page"></a>Добавление внедренного приложения Power Apps на страницу

### <a name="overview"></a>Обзор

Перед внедрением приложения Power Apps в клиент необходимо сначала найти или построить приложение с требуемыми визуальными элементами и/или функциональными возможностями. Мы не будем здесь подробно описывать процесс построения приложения. Раздел [Знакомство с Power Apps](https://docs.microsoft.com/powerapps/getting-started) является хорошей начальной точкой, если вы не знакомы с Power Apps.

Когда вы готовы для внедрения определенного приложения, можно выбрать один из двух способов доступа к приложению на странице, который лучше подходит для вашего сценария. Первый способ — через кнопку Power Apps, которая была добавлена в стандартной области действий. Добавленные с помощью этого механизма приложения будут отображаться как пункты меню внутри меню кнопки Power Apps. При выборе каждый их этих пунктов меню открывает боковую область, содержащую внедренное приложение. Можно также выбрать встраивание приложения непосредственно на странице в виде новой вкладки, экспресс-вкладки, колонки или нового раздела в рабочей области.

При настройке вашего внедренного приложения можно выбрать одно поле, которое необходимо отправить в качестве контекста в приложение. Это позволяет приложению реагировать на основе данных, просматриваемых в данный момент.

### <a name="details"></a>Подробно

Приведенные ниже инструкции демонстрируют, как внедрить в веб-клиент приложение Power Apps.

1. Перейдите на страницу, на которой вы хотите внедрить приложение. Это будет та же страница, которая содержит любые данные, который должны быть переданы в приложение в качестве входных данных.
2. Откройте область **Добавить приложение из Power Apps**:

    - Щелкните **Параметры**, затем выберите **Персонализировать эту страницу**. В меню **Вставить** выберите **Power Apps**. Наконец, выберите область, в которой вы хотите добавить приложение. Если требуется внедрить приложение в меню кнопки Power Apps, выберите область действий. Если требуется внедрить приложение непосредственно на страницу, выберите соответствующую вкладку, экспресс-вкладку, колонку или раздела (если вы находитесь в рабочей области).
    - Если доступ к приложению будет осуществляться с помощью меню кнопки Power Apps, можно также щелкнуть кнопку меню **Power Apps** на стандартной панели действий, а затем выбрать **Добавить приложение**.

3. Настройка внедренного приложения:

    - Поле **Имя** показывает текст, отображаемый для кнопки или вкладки, которая будет содержать внедренное приложение. Часто требуется повторить имя приложения в этом поле.
    - **Код приложения** — это идентификатор GUID для приложения, которое требуется внедрить. Чтобы получить это значение, найдите приложение на сайте [web.powerapps.com](https://web.powerapps.com), затем найдите поле **Код приложения** в разделе **Сведения**.
    - Для **Входные данные для приложения** можно при необходимости выбрать поле, которое содержит данные, которые необходимо передать приложению в качестве входных данных. См. пункт ниже в этом разделе под названием [Построение приложения, которое используют данные, посылаемые из приложений Finance and Operations](#building-an-app-that-leverages-data-sent-from-finance-and-operations-apps) для получения сведений о том, как приложение может получить доступ к данным, отправленным из приложений Finance and Operations.
    - Выберите **Размер приложения**, соответствующий типу внедряемого приложения. Выберите **Узкий** для приложений, созданного для мобильных устройств, и **Широкий** для приложений, созданных для планшетов. Это гарантирует, что достаточное количество места будет выделено для внедренного приложения.
    - Экспресс-вкладка **Юридические лица** предоставляет возможность выбора, для какого юридического лица доступно приложение. По умолчанию приложение отображается во всех юридических лицах. Этот параметр доступен только в том случае, если функция [Сохраненные представления](saved-views.md) отключена. 

4. После подтверждения, что настройка выполнена верно, нажмите кнопку **Вставить** для внедрения приложения Power App на страницу. Будет предложено обновить браузер, чтобы появилось внедренное приложение.

## <a name="sharing-an-embedded-app"></a>Совместное использование внедренного приложения

После внедрения приложения на страницу и проверки правильности его работы с любым контекстом данных, которые передаются со страницы, можно предоставить доступ к этому приложению другим пользователям в системе. Это можно сделать двумя разными способами с помощью функций персонализации продукта:

- Рекомендуется делать это через системного администратора, который может принудительно отправлять персонализации всеми пользователями или части пользователей.
- Кроме того, можно экспортировать персонализации страницы, отправить их одному или нескольким пользователям, и каждый из этих пользователей может импортировать эти изменения. Панель инструментов персонализации содержит действия, которые позволяют экспортировать и импортировать персонализации.

См. раздел [Персонализация работы пользователя](personalize-user-experience.md), в котором приведены более подробных сведения о возможностях персонализации в продукте и порядке их использования.

## <a name="building-an-app-that-leverages-data-sent-from-finance-and-operations-apps"></a>Создание приложения, использующего данные, отправляемые из приложений Finance and Operations

Важная часть создания приложения из Power Apps, которое будет внедрено в приложение Finance and Operations, использующее входные данные из этого приложения. Из процесса разработки Power Apps входные данные передаются из приложения Finance and Operations, к которому можно получить доступ с помощью переменной Param("EntityId").

Например, в функции OnStart приложения можно задать входные данные из приложений Finance and Operations для переменной следующим образом:

```powerapps
If(!IsBlank(Param("EntityId")), Set(FinOpsInput, Param("EntityId")), Set(FinOpsInput, ""));
```

## <a name="viewing-an-app"></a>Просмотр приложения

Для просмотра внедренного приложения на странице в приложениях Finance and Operations просто перейдите на страницу с внедренным приложением. Помните, что приложения можно открывать с помощью кнопки Power Apps на стандартной панели действий или они могут отображаться прямо на странице как новая вкладка, экспресс-вкладка, колонка или новый раздел в рабочей области. Когда пользователь в первый раз пытается загрузить приложение на странице, ему или ей будет предложено выполнить вход в , чтобы убедиться, что пользователь имеет соответствующие разрешения для использования приложения.

## <a name="editing-an-embedded-app"></a>Изменение внедренного приложения

После того как приложение внедрено на страницу, может потребоваться внести изменения в конфигурацию этого приложения. Например, может потребоваться изменить метку, связанную с внедренным приложением, или была создана новая версии приложения и необходимо обновить идентификатор приложения для указания в последней версии приложения.

Выполните следующие действия, чтобы изменить конфигурацию внедренного приложения.

1. Перейдите в область **Редактировать приложение**.

    - Если доступ к внедренному приложению осуществляется с помощью кнопки меню Power Apps, щелкните правой кнопкой мыши кнопку меню Power Apps и выберите **Персонализация**. Выберите приложение, которое требуется настроить, в раскрывающемся меню **Выбрать приложение**.
    - Если внедренное приложение отображается непосредственно на странице, выберите **Параметры**, затем выберите **Персонализировать эту страницу**. С помощью инструмента **Выбрать** щелкните внедренное приложение.

2. Внесите необходимые изменения в конфигурацию приложения, затем щелкните **Сохранить**.

## <a name="removing-an-app"></a>Удаление приложения

После того как приложение было внедрено на страницу, существует два способа удаления его при необходимости:

- Перейдите в область **Редактировать приложение**, используя инструкции из пункта [Изменение внедренного приложения](#editing-an-embedded-app) ранее в этом разделе. Убедитесь, что в области отображается информация для внедренного приложения, которое вы хотите удалить, затем нажмите кнопку **Удалить**.
- Поскольку внедренное приложение сохраняется как данные персонализации, очистка персонализации страницы также приведет к удалению всех внедренных приложений на этой странице. Обратите внимание, что очистка персонализации страницы является необратимой и не может быть отменена. Чтобы удалить вашу персонализацию на странице, выберите **Параметры**, затем щелкните **Персонализировать эту страницу**, затем **Очистить**. После обновления браузера все предыдущие персонализации для этой страницы будут удалены. Дополнительные сведения об оптимизации страниц с помощью персонализации см. в разделе [Персонализация работы пользователя](personalize-user-experience.md).

## <a name="appendix"></a>Приложение

### <a name="developer-control-over-where-an-app-can-be-embedded"></a>Контроль разработчика над тем, где возможно внедрение приложения

По умолчанию пользователи могут внедрять приложения на любой странице, как в кнопку меню Power Apps, так и непосредственно на страницу в виде вкладки, экспресс-вкладки, колонки или нового раздела в рабочей области. Тем не менее при необходимости разработчики также могут настроить эту возможность, чтобы разрешить только внедрение приложений на некоторых страницах путем реализации следующих методов:

- **isPowerAppPersonalizationEnabled** — если этот метод возвращает значение false для конкретной страницы, то кнопка меню Power Apps не будет отображаться и пользователи не смогут внедрять приложения ни в каком месте на этой странице, в том числе в виде вкладки.
- **isPowerAppTabPersonalizationEnabled** — если этот метод возвращает значение false для конкретной страницы, то пользователи не смогут внедрять приложения непосредственно на странице в качестве вкладки, экспресс-вкладки или раздела панорамы. Пользователи по-прежнему будут иметь возможность внедрять приложения через кнопку меню Power Apps, если внедрение разрешено на странице.

Следующий пример показывает новый класс с двумя методами, необходимый для настройки того, где могут быть внедрены приложения.

```powerapps
[ExtensionOf(classStr(FormRunConfigurationPowerAppsConfiguration))]

public final class ClassTest_Extension
{
    public static boolean isPowerAppPersonalizationEnabled(str pageName)
    {
        var result = next isPowerAppPersonalizationEnabled(pageName);
        return result;
    }
    
    public static boolean isPowerAppTabPersonalizationEnabled(str pageName)
    {
        var result = next isPowerAppTabPersonalizationEnabled(pageName);
        return result;
    }
}
```
