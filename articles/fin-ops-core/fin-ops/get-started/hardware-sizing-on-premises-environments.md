---
title: Требования к определению параметров оборудования для локальных сред
description: Требования к определению параметров оборудования для локальных сред
author: sericks007
manager: AnnBe
ms.date: 11/27/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
audience: Application User, Developer, IT Pro
ms.reviewer: sericks
ms.custom: 55651
ms.assetid: ''
ms.search.region: Global
ms.author: chwolf
ms.search.validFrom: 2016-08-30
ms.dyn365.ops.version: Platform update 8
ms.openlocfilehash: 9d4f2e59d4dd78d15d561ff0da47e4b9b1a2fce3
ms.sourcegitcommit: b112925c389a460a98c3401cc2c67df7091b066f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/19/2020
ms.locfileid: "4798312"
---
# <a name="hardware-sizing-requirements-for-on-premises-environments"></a>Требования к определению параметров оборудования для локальных сред

[!include [banner](../includes/banner.md)]

Прежде чем начать процесс определения параметров оборудования и инфраструктуры для локальной среды, ознакомьтесь с разделами [Требования к системе для облачных развертываний](system-requirements.md) и [Инструкции по настройке и развертыванию](../../dev-itpro/deployment/setup-deploy-on-premises-environments.md), чтобы получить четкое представление о базовой инфраструктуре.

> [!NOTE]
> Обратите особое внимание на рекомендации по настройке системы для достижения оптимальной производительности.

После просмотра документации можно начать процесс оценки объема проводок и одновременных пользователей и определения параметров среды на основании средней пропускной способности ядра.

## <a name="factors-that-affect-sizing"></a>Факторы, влияющие на определение параметров

Все факторы, которые показаны на следующем рисунке, влияют на определение параметров. Чем более подробны собранные сведения, тем можно более точно определить параметры. Определение параметров оборудования без вспомогательных данных, скорее всего, будет неточным. Абсолютное минимальное требование к необходимым данным является максимальная нагрузка строки проводки в час.

[![Определение параметров оборудования для локальных сред](./media/lbd-sizing-01.png)](./media/lbd-sizing-01.png)

Если смотреть слева направо, первым и важнейшим фактором, необходимым для точного определения параметров, является профиль проводки или характеристика проводки. Важно всегда находить пиковый объем проводок в час. При наличии нескольких пиковых периодов эти периоды необходимо точно определить.

После того, как вы будете иметь представление о нагрузке, которая влияет на инфраструктуру, вам необходимо также разобраться со следующими факторами:

- **Проводки** — обычно проводки имеют определенные пики в течение дня или недели. Это главным образом зависит от типа проводки. Записи времени и расходов обычно отображают пики один раз в неделю, в то время как записи заказа на продаже часто поступают в пакетном режиме путем интеграции или отправки в течение дня.
- **Число одновременных пользователей** — число одновременных пользователей является вторым самым важным фактором определения параметров. Вы не можете надежно получить оценки определения паромеров на основе числа одновременных пользователей, если это единственные доступные данные. Выполните оценку приблизительного числа, а затем вернитесь в ним при наличии дополнительных данных. Точное определение одновременных пользователей означает, что:

    - Именованные пользователи не являются одновременными пользователями.
    - Одновременные пользователи всегда представляют собой подмножество именованных пользователей. 
    - Пиковая рабочая нагрузка определяет максимальный параллелизм для определения параметров.

    Критерии для одновременных пользователей — пользователь отвечает следующим критериям:

    - Выполнил вход в систему.
    - Работает с проводками/запросами во время расчета.
    - Сеанс не в режиме ожидания.

- **Состав данных** — это, главным образом, способ настройки и конфигурации системы. Например, количество имеющихся юридических лиц, количество номенклатур, количество уровней спецификации и уровень сложности параметров безопасности. Каждый из этих факторов может иметь незначительное влияние на производительность, поэтому эти факторы можно нейтрализовать, делая правильный выбор в отношении инфраструктуры.
- **Расширения** — настройки могут быть простыми или сложными. Количество настроек и характер сложности и использования оказывают различное влияние на размер инфраструктуры. В случае сложных настроек рекомендуется провести оценку производительности, чтобы убедиться, что они не только проверены на эффективность, но и помогают понять требования инфраструктуры. Это еще более важно, когда расширения не кодируются согласно рекомендациям по производительности и масштабируемости.
- **Отчеты и аналитика** — обычно эти факторы включают выполнение больших запросов к различным базам данных в системе. Понимание и уменьшение частоты выполнения ресурсоемких отчетов поможет понять их влияние.
- **Решения третьих сторон** — эти решения, такие как поставщики программного обеспечения, имеют тот же смысл и рекомендации, что и расширения.

## <a name="sizing-your-environment"></a>Определение размера среды

Для понимания требований к параметрам необходимо знать пиковый объем проводок, которые необходимо обработать. Большинство вспомогательных систем, например Management Reporter или SSRS, являются менее критически важными. В результате этот документ посвящен, главным образом, AOS и SQL Server.

> [!NOTE]
> В общем, случае уровни подсчета расширяются и должны быть настроены в формате N+1, т.е. если вы оцениваете, что нужно три сервера AOS, добавьте четвертый сервер AOS. На уровне баз данных следует выполнить настройку высокой доступности Always On.

## <a name="sql-server-oltp"></a>SQL Server (OLTP)

### <a name="sizing"></a>Определение параметров

- 3 000–15 000 строк проводок в час на ядро на сервере базы данных.
- Стандартный коэффициент ядра AOS-к-SQL 3:1 для основного сервера SQL Server. Дополнительные ядра требуются на основании выбранной конфигурации высокой доступности.

    - Обработка ресурсоемких операций базы данных может понизить это до 2:1.

- Следующие факторы влияют на варианты:

    - Используемые настройки параметров.
    - Уровни расширений.
    - Использование дополнительных функций, таких как журнал базы данных и оповещения. Чрезмерная регистрация в журнале базы данных дополнительно снизит пропускную способность в час на ядро менее чем до 3 000 строк.
    - Сложность состава данных — простой план счетов и детализированные подробного планы счетов влияют на пропускную способность (в качестве примера).
    - Характеристики проводок.
    - 2–16 ГБ памяти на каждое ядро.
    - Вспомогательные базы данных на сервере базы данных, например базы данных Management Reporter и SSRS.
    - Временная база данных = 15 % от размера базы данных с тем же количеством файлов, что и физические процессоры.
    - Размер и пропускная способность SAN на основе всего объема/использования одновременных проводок.

### <a name="high-availability"></a>Высокая доступность

Рекомендуется всегда использовать SQL Server при настройке кластера или зеркального отображения. Второй узел SQL должен иметь то же количество ядер, что и основной узел.

### <a name="active-directory-federation-services-ad-fs"></a>Службы федерации Active Directory (AD FS)

Сведения об определении параметров AD FS см. в [документации по планированию мощности сервера AD FS](/windows-server/identity/ad-fs/design/planning-for-ad-fs-server-capacity).

[Электронная таблица определения параметров](https://adfsdocs.blob.core.windows.net/adfs/ADFSCapacity2016.xlsx) доступна для планирования числа экземпляров в развертывании.

## <a name="aos-online-and-batch"></a>AOS (Online и пакет)

### <a name="sizing"></a>Определение параметров

- Определение параметров по объему проводок/использованию

    - 2000–6000 строк на ядро
    - 16 ГБ на экземпляр
    - Коробка — от 4 до 24 ядер
    - 10–15 пользователей Enterprise на ядро
    - 15–25 пользователей Activity на ядро
    - 25–50 участников групп на ядро

- Пакет

    - 1–4 потока в пакетном задании на ядро
    - Размер на основании характеристик окна пакета

- Обратите внимание, что AOS, управление данными и пакет принадлежат к одной и той же роли в Service Fabric. Необходимо определить размер этих трех рабочих нагрузок вместе, а не разделять их как в Microsoft Dynamics AX 2012.
- Здесь применяются те же факторы изменчивости для SQL Server.

### <a name="high-availability"></a>Высокая доступность

- Убедитесь, что у вас есть хотя бы 1–2 доступных AOS при оценке.
- Убедитесь, что доступно по крайней мере 3–4 виртуальных узла.

## <a name="management-reporter"></a>Management Reporter

В большинстве случаев, если отсутствует чрезмерная нагрузка, рекомендуемых минимальных требований использовать два узла должно быть достаточно. Только при высокой нагрузке необходимо более двух узлов. Выполните масштабирование при необходимости.

## <a name="sql-server-reporting-services"></a>Службы SQL Server Reporting Services

В общедоступном выпуске можно развернуть только один узел SSRS. Отслеживайте узел SSRS при тестировании и увеличьте число ядер, доступных для SSRS, при необходимости. Убедитесь, что имеется предварительно настроенный дополнительный узел, доступный в виртуальном узле, отличном от виртуальной машины SSRS. Это важно при наличии проблемы с виртуальной машиной, на которой размещены службы SSRS, или виртуальным узлом. В этом случае их необходимо заменить.

## <a name="environment-orchestrator"></a>Orchestrator среды

Orchestrator — это служба, управляющая развертыванием и связанным обменом данными с LCS. Эта служба развертывается как основная служба Service Fabric и требует по крайней мере трех виртуальных машин. Эта служба размещается совместно со службами оркестрации Service Fabric. Ее параметры должны определять согласно пиковой нагрузке кластера. Дополнительные сведения см. в разделе [Планирование и подготовка развертывания изолированного кластера Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-standalone-deployment-preparation).

## <a name="virtualization-and-oversubscription"></a>Виртуализация и превышение лимита

Критически важные службы, такие как AOS, должны размещаться на виртуальных узлах с выделенными ресурсами: ядрами, памятью и диском.
