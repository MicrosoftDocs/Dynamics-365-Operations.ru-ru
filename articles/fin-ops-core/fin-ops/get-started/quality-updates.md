---
title: Упреждающие обновления качества
description: В этой статье приводятся сведения о упреждающей поставке обновлений качества.
author: rashmansur
ms.date: 09/12/2022
ms.topic: article
audience: Application User, Developer, IT Pro
ms.reviewer: sericks
ms.search.region: Global
ms.author: rashmim
ms.search.validFrom: 2022-08-19
ms.search.form: ''
ms.dyn365.ops.version: 10.0.29
ms.openlocfilehash: 25306a8ccebb5cd01debc90cf497d4a942840ef4
ms.sourcegitcommit: 43a0fb019bc67c00c39c2778343ba89924c3322c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/12/2022
ms.locfileid: "9671434"
---
# <a name="proactive-quality-updates"></a>Упреждающие обновления качества

[!include[banner](../includes/banner.md)]

В течение последних нескольких лет корпорация Microsoft выполнила непрерывное развитие того, что мы называем как [Одна версия](../../dev-itpro/lifecycle-services/oneversion-overview.md). Идея одной версии проста: чем ближе мы будем к ситуации, когда все клиенты используют одну и ту же версию программного обеспечения, тем выше качество, которое мы можем доставить. Мы находим и исправляем проблемы один раз, и эти решения быстрее попадают в руки большего количества клиентов.

Эти идея подтверждается результатами: снижение количества инцидентов по нашим продуктам. Когда клиенты работают не в одной версии, мы постоянно видим, что они подвержены проблемам, для которых уже имеется решение. Мы уже добились большого прогресса с Dynamics 365 Finance, Dynamics 365 Supply Chain, Dynamics 365 Project Operations и Dynamics 365 Commerce, и благодаря последним техническим усовершенствованиям, теперь можно сделать следующий шаг. Ниже представлены сведения о том, что мы собираемся делать, что уже сделали для настройки этого этапа, и как и когда мы будем вводить новые возможности без перерыва в работе.

## <a name="focus-on-quality-updates"></a>Фокус на обновлениях качества

В настоящее время мы предлагаем семь [сервисных обновлений](public-preview-releases.md) в год. Например, версия 10.0.29 является сервисным обновлением. До недавнего времени было 8 обновлений в год. Однако мы отбросили одно обновление в ответ на отзывы клиентов, которые продемонстрировали желание избежать изменений ближе к концу календарного года.

Мы не будем менять ритмичность сервисных обновлений. Вместо этого наш следующий шаг к одной версии будет сосредоточен на *обновлениях качества*. Обновления качества являются накопительными сборками исправлений. Они не включают новых функций. В любой момент времени все сообщество клиентов распределяется между тремя или четырьмя последними сервисными обновлениями. Однако для любого данного сервисного обновления могут использоваться десятки версий обновлений качества в рамках группы, в зависимости от даты развертывания у пользователей. На нашем следующем шаге мы будем упреждающе транслировать обновления качества. Мы уже используем эту модель для наших приложений на основе Dataverse и увидели ожидаемые результаты улучшения качества и уменьшения обращений в службу технической поддержки.

Разумеется, уменьшение дефектов может позволить уменьшить количество или полностью отказаться от необходимости в обновлениях качества. У нас есть несколько работающих инициатив, чтобы уменьшить количество дефектов, требующих обновлений качества. Даже в том случае, когда полезные данные уменьшаются в обновлении качества, согласованность во всей клиентской базе увеличит уровень поддержки, позволит клиентам быстрее получать улучшения и снизит частоту, с которой клиенты сталкиваются с проблемами, для которых уже существуют решения.

## <a name="making-proactive-distribution-possible"></a>Обеспечение возможности упреждающего распределения

Несколько усовершенствований уже развернуты, что позволяет выполнять упреждающую поставку обновлений качества:

- **Обновление почти с нулевым временем простоя** — для отправки более частых сред важно снизить влияние на доступность среды, чтобы сохранить соглашения об уровне обслуживания Dynamics 365 (SLA). Обновление с почти нулевым временем простоя было изначально введено для улучшения ежемесячного исправления операционной системы с помощью отказоустойчивости кластера для активации обновленного образа с минимальным перерывом в работе. Механизм применения обновлений совершенствуется, так что он еще больше уменьшает перерывы в работе, и он будет охватывать развертывание исправлений для операционных систем и обновлений качества.

    Для интерактивных пользователей может прерываться активный сеанс, и повторная попытка будет переведена в уже обновленную среду. С появлением [планирования партий на основе приоритета](../../dev-itpro/sysadmin/priority-based-batch-scheduling.md), которое в данный момент доступно на основе согласия, планирование и обработка партий восстанавливаются и возобновляются сразу же после обновления. Планирование партий на основе приоритета будет введено для клиентов до того, как они начнут участвовать в упреждающем распространении обновлений качества для их рабочих сред.

- **Темные часы** — темные часы определяются для каждой области Azure, и обновления с почти нулевым временем простоя будут выполняться в течение темного периода времени.

## <a name="the-proactive-update-process"></a>Процесс упреждающего обновления

Развертывание обновлений качество должно следовать процессу безопасного развертывания (SDP). Особенности SDP будут развиваться, но обновления качества первоначально будут развертываться в средах "песочниц". Процесс будет начинаться в средах, для которых получено согласие для раннего развертывания. При увеличении процентного значения успешно развернутых "песочниц" будет начато развертывание в производственные среды. Опять же, процесс будет начинаться в средах, для которых получено согласие для раннего развертывания. Прослушивающие систем будет отслеживать телеметрические данные системы и инциденты активных сайтов, а также останавливать развертывание определенной версии в случае обнаружения какой-либо регрессии Клиенты по-прежнему смогут получать обновления качества до упреждающего развертывания, если они этого хотят.

В текущих данных управления выпуском показано, что обновления качества дают менее 3 процентов регрессий. Со все большим смещением фокуса на устранение регрессии и улучшение SDP, потенциальное воздействие регрессий будет значительно ниже, чем увеличение качества, которое достигается в результате более быстрого получения исправлений для широкого круга клиентов.

## <a name="process-changes"></a>Обработать изменения

Набор изменений процесса развертывается до активации упреждающего развертывания обновлений качества:

- **Схема** — инструментарий гарантирует, что в сборки обновления качества будут включены только те изменения схемы, которые могут быть применены, когда служба находится в оперативном режиме. Этот подход поможет сохранить возможность применения обновления с почти нулевым временем простоя.
- **Более тщательная проверка изменений** — в настоящее время уже существует дополнительный этап процесса для утверждения изменений для включения в обновление качества. Тщательная проверка на дополнительном шаге будет увеличен, чтобы уменьшить потенциал регрессий. Критические изменения не допускаются в обновлениях качества, а усиленная проверка изменений поможет гарантировать соответствие этой цели.
- **Видимость** — уведомления будут отправляться по электронной почте и в Lifecycle Services (LCS) для предстоящих упреждающих обновлений качества. Кроме того, рабочие группы поддержки и руководители по работе с инцидентами будут видеть, где обновления качества были упреждающе развернуты.
- **Отказоустойчивость за счет фокус-тестирования** — фокус-тестирование будет использоваться для защиты от изменений кода везде, где применимо в исправлении ошибок обновления качества или использоваться фокус-тестирование существующей функции, имеющей отношение к данному исправлению. Если после проактивного развертывания требуется откатить или отключить изменение, это может быть сделано с помощью системы фокус-тестирования, чтобы избежать дальнейших сбоев.
- **Назначение синхронизации "песочницы"** — менее 20 процентов клиентов в настоящее время имеют несколько "песочниц" и держат одну песочницу развернутой, версия которой соответствует производственной среде, чтобы помочь в устранении неполадок. Если клиент использует песочницу для проверки более поздней версии, чем ее производственная версия, эта песочница будет получать обновления качества до более новой версии.

## <a name="what-is-the-rollout-roadmap-for-quality-updates"></a>Что такое план выпуска для обновлений качества?

Предполагается, что распределение упреждающих обновлений качества в средах "песочницы" должно начаться в конце сентября или в октябре 2022 г. для клиентов общедоступного облака Azure. Пробные среды также начнут получать упреждающее развертывание обновлений в это время. В сентябре уведомление будет отправлено каждому клиенту, чтобы сообщить об ожидаемом расписании для среды. Исключениями для процесса распространения упреждающих обновлений будут разрешены только для клиентов, контролируемых FDA. Мы все еще работаем над тем, как будут управляться регулируемые среды и клиенты суверенного и правительственного облака.

В течение следующего периода в шесть месяцев мы будем постепенно увеличивать процент сред "песочниц", которые получают упреждающие обновления, до тех пор, пока все назначенные среды не будут включены, затем перейдем к обновлению производственных сред. В течение этого периода мы будем следить, чтобы обеспечить бесперебойность процесса развертывания и достижение нашей цели полезных данных без перерывов в работе.

Так как клиенты будут регулярно получать небольшие полезные данные, ожидается, что процесс обновления станет более простым. Частота развертывания обновлений будет настраиваться по мере того, как мы продемонстрируем способность выполнять процесс без нарушения функциональности. Этот процесс уже работает эффективно для наших платформ и приложений Dataverse и предоставляет ожидаемые улучшения качества обслуживания. Мы стремимся выполнить тот же шаг вперед для приложений для управления финансами и операциями.

## <a name="when-will-quality-updates-start-for-production-environments"></a>Когда начнутся обновления качества для рабочих сред?
На этом этапе обновления качества нацелены только на песочницы. Эта область будет обновляться с датой начала для производственных сред, когда у нас имеются более конкретные данные и метрики от упреждающего обновления для "песочниц" для оценки готовности для производства.

## <a name="what-is-the-schedule-for-sandbox-proactive-quality-updates"></a>Какой график упреждающих обновлений качества для песочниц?
Сведения о темных часах для каждого региона см. в разделе [Каковы окна планового обслуживания по регионам?](../../dev-itpro/deployment/plannedmaintenance-selfservice.md#windows).

### <a name="proactive-quality-update-release-10028"></a>Упреждающее обновление качества, версия 10.0.28
**Версия приложения: 10.0.1265.89**
**Соответствующая актуальная статья базы знаний: 745340**

| Станция | Регионы | Завершенный график| Предстоящий график песочницы
|---|---|---|---|
| Станция 1 | Центральная Канада, восточная Канада, центральная Франция, центральная Индия, восточная Норвегия, западная Швейцария | С 15 сентября по 18 сентября 2022 г. и с 19 сентября по 22 сентября 2022 г. | С 7 октября по 10 октября 2022 г. |
| Станция 2 | Южная Франция, южная Индия, западная Норвегия, северная Швейцария, север Южно-Африканской Республики, восточная Австралия, южное Соединенное Королевство, север ОАЭ, восточная Япония, юго-восточная Австралия, юго-восточная Азия | С 25 сентября по 28 сентября 2022 г. | С 7 октября по 10 октября 2022 г. |
| Станция 3 | Восточная Азия, западное Соединенное Королевство, западная Япония, южная Бразилия, западная Европа, восточная Европа, центр ОАЭ | С 26 сентября по 29 сентября 2022 г. | С 7 октября по 10 октября 2022 г. |
| Станция 4 | Северная Европа, центр США, запад США | С 28 сентября по 1 октября 2022 г. | С 7 октября по 10 октября 2022 г. |
| Станция 5 | DoD,облако сообщества для государственных организаций, Китай | Не запланировано | Не запланировано |

### <a name="proactive-quality-update-release-10029"></a><a name="schedule"></a> Упреждающее обновление качества, версия 10.0.29
**Версия приложения: 10.0.1326.70**
**Соответствующая актуальная статья базы знаний: 748926**

| Станция | Регионы | Предстоящий график песочницы
|---|---|---|
| Станция 1 | Центральная Канада, восточная Канада, центральная Франция, центральная Индия, восточная Норвегия, западная Швейцария | С 14 октября по 17 октября 2022 г. |
| Станция 2 | Южная Франция, южная Индия, западная Норвегия, северная Швейцария, север Южно-Африканской Республики, восточная Австралия, южное Соединенное Королевство, север ОАЭ, восточная Япония, юго-восточная Австралия, юго-восточная Азия | С 15 октября по 18 октября 2022 г. |
| Станция 3 | Восточная Азия, западное Соединенное Королевство, западная Япония, южная Бразилия, западная Европа, восточная Европа, центр ОАЭ | С 16 октября по 19 октября 2022 г. |
| Станция 4 | Северная Европа, центр США, запад США | С 17 октября по 20 октября 2022 г. |
| Станция 5 | DoD,облако сообщества для государственных организаций, Китай | Не запланировано |

> [!IMPORTANT] 
> Майкрософт заранее, за пять дней, обновит прежний график и отправит по электронной почте уведомления для набора сред, у которых запланировано получение обновлений качества. Прежний график применяется только для сред, которые получили уведомления о предстоящем обновлении. Сведения о темных часах для каждого региона см. в разделе [Каковы окна планового обслуживания по регионам?](../../dev-itpro/deployment/plannedmaintenance-selfservice.md#windows).
>
> Для каждой группы регионов или *станции*, где запланирован выпуск обновления качества, в графике указывается диапазон четырех дней. Обновления качества начнутся только для сред в песочнице. Затем, при увеличении процентного значения успешно развернутых "песочниц" будет начато развертывание в производственные среды, о котором клиенты будут уведомлены заблаговременно.
> 
> Обновления качеств всегда происходят циклически, что позволяет нам планировать их по графику для определенного набора сред и завершить обновление для всех наборов к концу четвертого дня для станции. Однако это не означает, что обновление среды будет выполняться в течение четырех дней. Это лишь означает, что мы можем предопределить, какой набор сред будет обновлен в конкретный день в рамках четырехдневного интервала. Все обновления будут выполнены в темные часы, что обеспечит почти нулевой простой. Обновления точно закончатся в течение окна темного времени суток для данного региона.

## <a name="how-are-the-dark-hours-handled-for-customers-that-have-one-finance-and-operations-apps-instance-but-are-active-in-multiple-time-zones"></a>Как темные часы обрабатываются для клиентов, у которых имеется один экземпляр приложений для управления финансами и операциями, но они активны в нескольких часовых поясах? 
Не предусмотрены особые графики с выходом за пределы темных часов для тех случаев, когда существует экземпляр приложений для управления финансами и операциями, поскольку планируется выпускать обновления качества с минимальными помехами для работы при помощи [nZDT](../../dev-itpro/deployment/plannedmaintenance-selfservice.md#what-does-near-zero-downtime-maintenance-mean).

## <a name="what-is-the-current-rollout-cadence-for-proactive-quality-updates"></a>Что такое ритмичность текущего выпуска для упреждающих обновлений качества?
Упреждающие обновления качества (PQUs) в настоящее время выполняются ежемесячно для каждой поддерживаемой версии обновления службы. Только одно обновление в месяц выполняется для отдельных сред в песочнице кроме случаев, когда клиенты перешли на новую версия обновления службы. В этом случае они могут получить запланированное обновление PQU в рамках существующей очереди для нового обновления службы. После того как глобальный выпуск завершится в 2023 г., частота этих обновлений увеличится. Вы будете всегда получать минимум одно уведомление в месяц в случае изменения периодичности выпуска.

## <a name="how-will-microsoft-ensure-the-quality-of-these-updates"></a>Каким образом корпорация Майкрософт обеспечит качество этих обновлений?
Корпорация Майкрософт стремится обеспечить достаточную эффективность конвейера выпуска для предоставления небольших объемов полезных данных, чтобы обеспечить низкие затраты на проверку. Каждое исправление в обновлении качества проходит через строгий и безопасный процесс развертывания, что помогает повысить качество и надежность, тем самым сокращая неудобства для клиентов. Развертывание будет сначала выполняться поэтапно в средах песочниц, а затем в рабочих средах. Поэтапные развертывания позволяют тщательно контролировать процесс и определять, является ли дальнейшее развертывание безопасным. Мы прекратим выпуск при обнаружении ошибок в каждой группа клиентов, где производится развертывание, и обеспечим достаточное время для выявления ошибок на каждом этапе процесса выпуска. Для каждого предстоящего обновления качества будет представлена информация о графике путем обновления общедоступной документации и в сообщениях электронной почты, чтобы клиенты могли планировать свои действия наперед.

## <a name="can-customers-delay-reschedule-or-pause-a-quality-update"></a>Могут ли клиенты отложить, перенести или приостановить обновление качества?
Нет. Основной целью обновлений качества является непрерывное обеспечение основных потребностей наших клиентов, таких как безопасность, конфиденциальность, надежность, доступность и производительность. Откладывание или приостановка обновлений приведет к возможному снижению безопасности, доступности и надежности.

## <a name="how-do-i-know-what-set-of-changes-went-into-a-quality-update-payload"></a>Как можно узнать о том, какие изменения вошли в состав обновления качества?
Следующие шаги являются временным решением, пока мы продолжаем разрабатывать более качественное решение для определения списка изменений, который войдут в состав обновления качества. 

Используйте статью базы данных № 745340 выпуска обновлений 10.0.28 и связанной версии приложения 10.0.1265.89.

1. В LCS откройте страницу **Сведения о среде** для своей песочницы. 
2. В разделе **Доступные обновления** выберите **Просмотр обновления** для последней сборки обновлений качества. 
3. Экспортируйте сборку в файл CSV или Microsoft Excel .
4. В экспортированном файле отсортируйте информацию по времени (сначала самые старые), а затем выполните поиск по номеру статьи 745340 в столбце **ИД обновления**. Теперь вы должны увидеть список статей базы знаний.
 
 > [!NOTE]
 > Экспорт в файл CSV или Excel должен произойти до обновления среды. В противном случае вы можете использовать среду с подобной конфигурацией, для которой не требуется обновление, и следовать инструкциям выше.

[![Пример среды с обновлением качества.](./media/how-to-get-kb-list-pqu.png)](./media/how-to-get-kb-list-pqu.png)

## <a name="what-is-the-process-if-a-critical-issue-is-found-after-a-quality-update"></a>Какая процедура используется при обнаружении критической проблемы после обновления качества?
Критическая проблема или регрессия являются одним или несколькими событиями, которые обычно приводят к ухудшению работы у нескольких клиентов при использовании одной или нескольких наших услуг. Эти проблемы могут привести к незапланированному времени простоя, включая недоступность, снижение производительности и сложности в управлении услугами. Если в связи с подобными регрессиями возникает большое влияние на клиентов, мы остановим выпуск обновления качества, пока не сможем связаться с ними и устранить проблему. Обычно следующее обновление качества будет иметь необходимое исправление для возобновления выпуска.

Если возникают проблемы в одной пользовательской среде, обратитесь в службу поддержки Майкрософт, чтобы создать заявку. На основании обоснования мы прекратим выпуск обновления качества для всех остальных сред данного проекта до тех пор, пока проблема не будет устранена.

## <a name="can-customers-still-manually-apply-hotfix-updates-from-lcs"></a>Могут ли клиенты по-прежнему вручную применять обновления и исправления из LCS?
Да. Чтобы обеспечить постоянную надежность в работе исправлений, обновления с исправлениями все еще можно применять к клиентским средам в LCS. Однако важно отметить, что исправления, развернутые в рамках обновления качества, проходят через стандартную процедуру SDP перед развертыванием обновления. Это снижает риск возможной регрессии за счет более высокого качества. Рекомендуется использовать обновление качества вместо ручной установки исправлений для повышения надежности.

## <a name="can-customers-proactively-install-a-quality-update-build-ahead-of-the-schedule"></a>Могут ли клиенты заблаговременно установить сборку обновления раньше графика?
Да. Можно выполнить раннюю установку обновления качества. Корпорация Майкрософт пропустит обновление, если текущая версия сборки среды равна или выше версии соответствующего обновления качества.

## <a name="if-an-environment-has-an-upcoming-scheduled-monthly-service-update-within-a-week-will-it-still-receive-quality-updates"></a>Если в среде запланировано ежемесячное обновление службы в течение недели, она все равно будет получать обновления качества?
- Обновления качества не применяются к рабочим средам, если запланировано обновление службы в течение одной недели с даты плановой установки обновление качества.
- Если в среде песочницы установлена та же самая или более поздняя версия сборки, чем предусмотренная в обновлении качества, оно будет пропущено.
- Если в рабочей среде установлена та же самая или более поздняя версия сборки, чем предусмотренная в обновлении качества, оно будет пропущено.
- Если в песочнице установлена такая же или более поздняя версия сборки за счет обновления качества или ручного обновления рабочей среды, рабочая среда по-прежнему получит запланированную версию ежемесячного обновления службы. Если вы не хотите, чтобы запланированное обновление рабочей среды до версии обновления службы, можно приостановить обновление службы в LCS. 
- Чтобы протестировать изменения для предстоящего обновления службы с целью улучшения стабильности и результатов, рекомендуется использовать новейшую версию обновления качества.

## <a name="if-an-environment-has-an-upcoming-scheduled-action-and-a-scheduled-quality-update-in-the-same-maintenance-window-will-it-still-receive-the-quality-update"></a>Если в среде запланировано действие и обновление качества в одном окне обслуживания, она все равно получит обновление качества?
В случае конфликта с запланированным действием, например для восстановления на момент времени (PITR), обновление качества будет запланировано на другое доступное окно обслуживания в рамках четырехдневного интервала. Для получения дополнительных сведений о графике см. раздел [Какой график для упреждающих обновлений качества?](#schedule). 

## <a name="can-an-environment-be-brought-back-to-its-previous-state-if-there-are-issues-after-a-quality-update-is-applied"></a>Можно ли вернуть среду в прежнее состояние, если после применения обновления качества возникли ошибки?
После применения обновления качества возможность отката ни в каких обстоятельствах не предусмотрена. Для устранения проблем доступны только варианты с дальнейшей установкой исправлений.

## <a name="what-about-fda-regulation-and-gpx"></a>Что насчет правил FDA и GPX?
План для клиентов, на которых распространяются требования и проверки FDA, еще находится в разработке. В ближайшее время ожидается обновление в этой сфере. Пока все подобные клиенты не получают обновления качества. Чтобы обеспечить соблюдение норм FDA клиентом, посетите страницу [Microsoft Azure Предложение GPX](/azure/compliance/offerings/offering-gxp).

## <a name="what-versions-of-service-updates-are-supported-for-these-quality-updates"></a>Какие версии обновлений служб поддерживаются для этих обновлений качества?
Клиенты по всем поддерживаемым версиям обновления службы могут получать обновления качества. 

## <a name="finance-and-operations-apps-deployments-with-retail-components-typically-require-additional-work-in-addition-to-having-to-redeploy-mpos-how-will-these-quality-updates-impact-the-retailsdk"></a>Для развертывания приложений для управления финансами и операциями с компонентами розничной торговли обычно требуется дополнительная работа помимо необходимости повторного развертывания MPOS. Как эти обновления качества будут влиять на RetailSDK? 
Поскольку сама суть исправлений не изменяется в отношении содержимого обновлений качества, в настоящее время мы не ожидаем какого-либо дополнительного влияния, связанного с компонентами розничной торговли.

## <a name="is-there-any-impact-to-cloud-hosted-environments-che"></a>Есть ли какое-либо воздействие на размещенные в облаке среды (CHE)? 
Среды CHE не входят в состав обновлений качества, так как они не включены в предварительную версию Майкрософт

## <a name="are-there-any-integration-issues-with-microsoft-dataverse"></a>Имеются ли проблемы с интеграцией Microsoft Dataverse? 
Отсутствуют известные проблемы с интеграцией для обновлений качества с Dataverse.

