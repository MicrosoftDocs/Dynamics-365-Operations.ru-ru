---
title: Создание правил оповещения
description: В этом разделе представлена информация о предупреждениях и объясняется, как создать правило генерации оповещений, чтобы получать уведомления о событиях, таких как наступление даты или определенного изменения.
author: tjvass
manager: AnnBe
ms.date: 10/08/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: EventCreateRule
audience: Application user
ms.reviewer: sericks
ms.search.region: Global
ms.author: tjvass
ms.search.validFrom: 2018-3-30
ms.dyn365.ops.version: Platform update 15
ms.openlocfilehash: b0c37c1f948b072c64c54308cb85c90cfa248700
ms.sourcegitcommit: 6cb174d1ec8b55946dca4db03d6a3c3f4c6fa2df
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/09/2021
ms.locfileid: "5559416"
---
# <a name="create-alert-rules"></a><span data-ttu-id="79e6f-103">Создание правил оповещения</span><span class="sxs-lookup"><span data-stu-id="79e6f-103">Create alert rules</span></span>

[!include [banner](../includes/banner.md)]

## <a name="getting-started"></a><span data-ttu-id="79e6f-104">Начало работы</span><span class="sxs-lookup"><span data-stu-id="79e6f-104">Getting started</span></span>

<span data-ttu-id="79e6f-105">Перед созданием правила оповещения необходимо определить когда или в каких ситуациях получать оповещение.</span><span class="sxs-lookup"><span data-stu-id="79e6f-105">Before you set up an alert rule, decide when or in what situations you want to receive alerts.</span></span> <span data-ttu-id="79e6f-106">Если уже известно, о каких событиях необходимо оповещать, найдите страницу, на которой будут отображены данные, вызвавшие появление оповещения.</span><span class="sxs-lookup"><span data-stu-id="79e6f-106">When you know which event you want to be notified about, find the page where the data that causes that event appears.</span></span> <span data-ttu-id="79e6f-107">Событие может быть датой, которая наступила, или определенным изменением, которое произошло.</span><span class="sxs-lookup"><span data-stu-id="79e6f-107">The event can be a date that arrives or a specific change that occurs.</span></span> <span data-ttu-id="79e6f-108">Поэтому необходимо найти страницу, где эта дата определяется, или на которой отображаются поле, которое изменилось, или созданная новая запись.</span><span class="sxs-lookup"><span data-stu-id="79e6f-108">Therefore, you must find the page where the date is specified, or where the field that changes or the new record that is created appears.</span></span> <span data-ttu-id="79e6f-109">После получения этой информации можно создать правило оповещения.</span><span class="sxs-lookup"><span data-stu-id="79e6f-109">After you have this information, you can create the alert rule.</span></span>

<span data-ttu-id="79e6f-110">При создании правила оповещения, можно определить критерии, которые должны быть выполнены, прежде чем запускается оповещение.</span><span class="sxs-lookup"><span data-stu-id="79e6f-110">When you create an alert rule, you define the criteria that must be met before an alert is triggered.</span></span> <span data-ttu-id="79e6f-111">Критерии — это, в основном, совпадение между наличием события и выполнением определенных условий.</span><span class="sxs-lookup"><span data-stu-id="79e6f-111">Criteria is basically the match between the occurrence of an event and the fulfillment of specific conditions.</span></span> <span data-ttu-id="79e6f-112">Когда происходит событие, система начинает проверять в соответствии с указанными условиями.</span><span class="sxs-lookup"><span data-stu-id="79e6f-112">When an event occurs, the system starts to perform a check according to the conditions that are set up.</span></span>

## <a name="ensure-the-alert-batch-jobs-are-running"></a><span data-ttu-id="79e6f-113">Убедитесь, что пакетные задания оповещения выполняются</span><span class="sxs-lookup"><span data-stu-id="79e6f-113">Ensure the alert batch jobs are running</span></span>

<span data-ttu-id="79e6f-114">Для обработки условий оповещения и отправки уведомлений необходимо выполнить пакетные задания для изменения данных и оповещений о сроке выполнения.</span><span class="sxs-lookup"><span data-stu-id="79e6f-114">The batch jobs for data change and due date alerts need to be running for the alert conditions to be processed and the notifications to be sent.</span></span> <span data-ttu-id="79e6f-115">Для выполнения пакетных заданий перейдите в **Администрирование системы** > **Периодические задачи** > **Оповещения** и добавьте новое пакетное задание **Оповещений на основе изменений** и/или **Оповещений о сроке выполнения**.</span><span class="sxs-lookup"><span data-stu-id="79e6f-115">To run batch jobs, go to **System administration** > **Periodic tasks** > **Alerts** and add a new batch job for **Change based alerts** and/or **Due date alerts**.</span></span> <span data-ttu-id="79e6f-116">Если требуется длительное и часто выполняемое пакетное задание, выберите **Повторение** и установите **Дата завершения не указана** с **Шаблон повторения** для **Минуты** и **Подсчет** на **1**.</span><span class="sxs-lookup"><span data-stu-id="79e6f-116">If a long and frequently running batch job is needed, select **Recurrence** and set **No end date** with a **Recurrence pattern** of **Minutes** and a **Count** of **1**.</span></span>

## <a name="events"></a><span data-ttu-id="79e6f-117">События</span><span class="sxs-lookup"><span data-stu-id="79e6f-117">Events</span></span>

<span data-ttu-id="79e6f-118">Событие, запускающее правило оповещений, может быть датой, которая наступила или определенное изменение, которое произошло.</span><span class="sxs-lookup"><span data-stu-id="79e6f-118">The event that triggers an alert rule can be a date that arrives or a specific change that occurs.</span></span> <span data-ttu-id="79e6f-119">Триггеры для событий определяются на экспресс-вкладке **Оповещать меня, когда** в диалоговом окне **Создать правило генерации оповещений**.</span><span class="sxs-lookup"><span data-stu-id="79e6f-119">Triggers for events are defined on the **Alert me when** FastTab of the **Create alert rule** dialog box.</span></span> <span data-ttu-id="79e6f-120">События, доступные для указанного поля, зависят от выбранного триггера.</span><span class="sxs-lookup"><span data-stu-id="79e6f-120">The events that are available for a particular field depend on the trigger that is selected.</span></span>

<span data-ttu-id="79e6f-121">Например, если вы настраиваете правило оповещений для поля **Дата начала**, подходят события "Срок выполнения".</span><span class="sxs-lookup"><span data-stu-id="79e6f-121">For example, if you're setting up an alert rule for the **Start date** field, due date events are appropriate.</span></span> <span data-ttu-id="79e6f-122">Поэтому тип события `is due in` доступен для этого поля.</span><span class="sxs-lookup"><span data-stu-id="79e6f-122">Therefore, the `is due in` event type is available for that field.</span></span> <span data-ttu-id="79e6f-123">Однако для такого поля, как **Центр затрат**, событие срока выполнения не подходит.</span><span class="sxs-lookup"><span data-stu-id="79e6f-123">However, for a field such as **Cost center**, a due date event isn't appropriate.</span></span> <span data-ttu-id="79e6f-124">Поэтому тип события `is due in` недоступен.</span><span class="sxs-lookup"><span data-stu-id="79e6f-124">Therefore, the `is due in` event type isn't available.</span></span> <span data-ttu-id="79e6f-125">Вместо этого тип события `has changed` доступен.</span><span class="sxs-lookup"><span data-stu-id="79e6f-125">Instead, the `has changed` event type is available.</span></span>

## <a name="event-types"></a><span data-ttu-id="79e6f-126">Типы событий</span><span class="sxs-lookup"><span data-stu-id="79e6f-126">Event types</span></span>

<span data-ttu-id="79e6f-127">Три Типа событий могут возникать:</span><span class="sxs-lookup"><span data-stu-id="79e6f-127">Three types of events can occur:</span></span>

- <span data-ttu-id="79e6f-128">**События "создание типа" и "удаление типа"** — эти события создают оповещение при создании или удалении записи.</span><span class="sxs-lookup"><span data-stu-id="79e6f-128">**Create-type and delete-type events** – These events trigger an alert when a record is created or deleted.</span></span>
- <span data-ttu-id="79e6f-129">**События "обновление типа"** — эти события создают оповещение при изменении данных в конкретном поле.</span><span class="sxs-lookup"><span data-stu-id="79e6f-129">**Update-type events** – These events trigger an alert when the data in a specific field changes.</span></span>
- <span data-ttu-id="79e6f-130">**События типа "срок выполнения"** — эти события запускают оповещения, когда наступает дата.</span><span class="sxs-lookup"><span data-stu-id="79e6f-130">**Due date-type events** – These events trigger an alert when a date arrives.</span></span>
    
<span data-ttu-id="79e6f-131">Изменения, которые происходит, может быть начато пользователем.</span><span class="sxs-lookup"><span data-stu-id="79e6f-131">Changes that occur can be initiated by a user.</span></span> <span data-ttu-id="79e6f-132">Например, пользователь изменил даты поставки заказа на покупку.</span><span class="sxs-lookup"><span data-stu-id="79e6f-132">For example, a user changes the delivery date of a purchase order.</span></span> <span data-ttu-id="79e6f-133">Кроме того, изменения могут выполняться как часть процесса.</span><span class="sxs-lookup"><span data-stu-id="79e6f-133">Alternatively, changes can occur as part of a process.</span></span> <span data-ttu-id="79e6f-134">Например, поле **Статус** на странице изменяется, чтобы отразить жизненный цикл различных процессов в системе.</span><span class="sxs-lookup"><span data-stu-id="79e6f-134">For example, the **Status** field on a page changes to reflect the life cycle of various processes in the system.</span></span>

## <a name="conditions"></a><span data-ttu-id="79e6f-135">Условия</span><span class="sxs-lookup"><span data-stu-id="79e6f-135">Conditions</span></span>

<span data-ttu-id="79e6f-136">На экспресс-вкладке **Оповестить меня** в диалоговом окне **Создать правило генерации оповещений** можно использовать условия, чтобы контролировать, когда вы получаете оповещения о событиях.</span><span class="sxs-lookup"><span data-stu-id="79e6f-136">On the **Alert me for** FastTab in the **Create alert rule** dialog box, you can use conditions to control when you're alerted about events.</span></span>

<span data-ttu-id="79e6f-137">Например, можно указать, что система должна оповещать, когда статус заказов на покупку изменяется, но только если статус соответствует определенному набору условий.</span><span class="sxs-lookup"><span data-stu-id="79e6f-137">For example, you can specify that the system should alert you when the status of purchase orders changes, but only if the status matches a specific set of conditions.</span></span> <span data-ttu-id="79e6f-138">А именно, вы хотите получать оповещение, когда устанавливается статус заказа на покупку **Получен**.</span><span class="sxs-lookup"><span data-stu-id="79e6f-138">Specifically, you want to be alerted when the status of a purchase order is set to **Received**.</span></span> <span data-ttu-id="79e6f-139">Это изменения статуса — событие, которое запускает оповещение.</span><span class="sxs-lookup"><span data-stu-id="79e6f-139">This change in status is the event that triggers the alert.</span></span>

<span data-ttu-id="79e6f-140">Далее необходимо решить, про какие заказы на покупку вы хотите получать оповещения.</span><span class="sxs-lookup"><span data-stu-id="79e6f-140">Next, you must decide which purchase orders you want to be alerted about.</span></span> <span data-ttu-id="79e6f-141">Например, Возможные варианты выбора:</span><span class="sxs-lookup"><span data-stu-id="79e6f-141">For example, you can select one of the following options.</span></span> <span data-ttu-id="79e6f-142">Эти параметры определяют условия для правила оповещения.</span><span class="sxs-lookup"><span data-stu-id="79e6f-142">These options define the conditions for the alert rule.</span></span>

- <span data-ttu-id="79e6f-143">**Текущая выбранная запись** — вы получаете оповещения, когда статус определенного заказа на покупку изменяется на **Получен**.</span><span class="sxs-lookup"><span data-stu-id="79e6f-143">**Current selected record** – You receive an alert when the status of a specific purchase order changes to **Received**.</span></span>
- <span data-ttu-id="79e6f-144">**Все записи** — вы получаете оповещение при изменении статуса заказа на покупку для номенклатуры в представлении активной страницы.</span><span class="sxs-lookup"><span data-stu-id="79e6f-144">**All records** – You receive an alert when the status of a purchase order is changed for an item in the active page view.</span></span> <span data-ttu-id="79e6f-145">Можно использовать расширенную фильтрацию, доступную на странице, чтобы создать правила для определенного набора записей.</span><span class="sxs-lookup"><span data-stu-id="79e6f-145">You can use the advanced filtering that is available on the page to create rules for a specific set of records.</span></span> <span data-ttu-id="79e6f-146">Например, можно создать оповещения, которое запускается для всех заказов на покупку для клиентов в определенной группе клиентов.</span><span class="sxs-lookup"><span data-stu-id="79e6f-146">For example, you can create an alert that is triggered for all purchase orders for the customers in a specific customer group.</span></span>
    
## <a name="expiry-of-rule"></a><span data-ttu-id="79e6f-147">Срок действия правила</span><span class="sxs-lookup"><span data-stu-id="79e6f-147">Expiry of rule</span></span>

<span data-ttu-id="79e6f-148">На экспресс-вкладке **Оповестить меня** диалогового окна **Создать правило генерации оповещений** можно указать, как долго должно действовать правило генерации оповещений.</span><span class="sxs-lookup"><span data-stu-id="79e6f-148">On the **Alert me until** FastTab of the **Create alert rule** dialog box, you can specify how long the alert rule should be active.</span></span>

## <a name="alert-contents"></a><span data-ttu-id="79e6f-149">Содержание оповещения</span><span class="sxs-lookup"><span data-stu-id="79e6f-149">Alert contents</span></span>

<span data-ttu-id="79e6f-150">На экспресс-вкладке **Оповещать меня с** диалогового окна **Создать правило генерации оповещений можно** указать текст темы и текст сообщения, которые должны использоваться в сообщении оповещения.</span><span class="sxs-lookup"><span data-stu-id="79e6f-150">On the **Alert me with** FastTab of the **Create alert rule** dialog box, you can specify the subject text and message text that the alert messages should use.</span></span>

## <a name="user-id"></a><span data-ttu-id="79e6f-151">Идентификатор пользователя</span><span class="sxs-lookup"><span data-stu-id="79e6f-151">User ID</span></span>

<span data-ttu-id="79e6f-152">На экспресс-вкладке **Оповещать меня с** диалогового окна **Создать правило генерации оповещений** можно указать, какой пользователь должен получать сообщения оповещения.</span><span class="sxs-lookup"><span data-stu-id="79e6f-152">On the **Alert me with** FastTab of the **Create alert rule** dialog box, you can specify which user should receive the alert messages.</span></span> <span data-ttu-id="79e6f-153">По умолчанию, ваш идентификатор пользователя выбирается.</span><span class="sxs-lookup"><span data-stu-id="79e6f-153">By default, your user ID is selected.</span></span> <span data-ttu-id="79e6f-154">Возможность изменения пользователя, получающего оповещение, ограничена администраторами организации.</span><span class="sxs-lookup"><span data-stu-id="79e6f-154">The ability to change the user receiving the alert is restricted to organization administrators.</span></span>

## <a name="alerts-as-business-events"></a><span data-ttu-id="79e6f-155">Оповещения как бизнес-события</span><span class="sxs-lookup"><span data-stu-id="79e6f-155">Alerts as business events</span></span>

<span data-ttu-id="79e6f-156">Оповещения можно отправлять извне с помощью структуры бизнес-событий.</span><span class="sxs-lookup"><span data-stu-id="79e6f-156">You can send alerts externally using the business events framework.</span></span> <span data-ttu-id="79e6f-157">При создании оповещения установите **Для всей организации** на **нет** и настройте **Послать извне** на **Да**.</span><span class="sxs-lookup"><span data-stu-id="79e6f-157">When creating an alert, set **Organization-wide** to **No** and set **Send externally** to **Yes**.</span></span> <span data-ttu-id="79e6f-158">После того как оповещение запущено в бизнес-событии, можно запустить поток, встроенный в Power Automate, с помощью триггера **Когда бизнес-событие происходит** на соединителе Finance and Operations, или явным образом отправить событие в конечную точку бизнес-событий через **Каталог бизнес-событий**.</span><span class="sxs-lookup"><span data-stu-id="79e6f-158">After you have the alert triggering the business event, you can trigger a flow built in Power Automate using the **When a business event occurs** trigger on the Finance and Operations connector, or explicitly send the event to a business events endpoint via the **Business events catalog**.</span></span>

## <a name="create-an-alert-rule"></a><span data-ttu-id="79e6f-159">Создание правила оповещения</span><span class="sxs-lookup"><span data-stu-id="79e6f-159">Create an alert rule</span></span>

0. <span data-ttu-id="79e6f-160">Убедитесь, что пакетные задания оповещения выполняются (см. выше).</span><span class="sxs-lookup"><span data-stu-id="79e6f-160">Ensure the alert batch jobs are running (see above).</span></span>
1. <span data-ttu-id="79e6f-161">Откройте страницу, содержащую данные для отслеживания.</span><span class="sxs-lookup"><span data-stu-id="79e6f-161">Open the page that contains the data to monitor.</span></span>
2. <span data-ttu-id="79e6f-162">В области действий на вкладке **Параметры** в группе **Поделиться** выберите **Создать правило генерации оповещений**.</span><span class="sxs-lookup"><span data-stu-id="79e6f-162">On the Action Pane, on the **Options** tab, in the **Share** group, select **Create alert rule**.</span></span>
3. <span data-ttu-id="79e6f-163">В диалоговом окне **Создать правило генерации оповещений** в поле **Поле** выберите поле, чтобы отслеживать.</span><span class="sxs-lookup"><span data-stu-id="79e6f-163">In the **Create alert rule** dialog box, in the **Field** field, select the field to monitor.</span></span>
4. <span data-ttu-id="79e6f-164">В поле **Событие** выберите тип события.</span><span class="sxs-lookup"><span data-stu-id="79e6f-164">In the **Event** field, select the type of event.</span></span>
5. <span data-ttu-id="79e6f-165">На экспресс-вкладке **Оповестить меня для** выберите требуемый вариант.</span><span class="sxs-lookup"><span data-stu-id="79e6f-165">On the **Alert me for** FastTab, select the desired option.</span></span> <span data-ttu-id="79e6f-166">Если оповещение должно быть отправлено как бизнес-событие, задайте для параметра **Для всей организации** значение **Нет**.</span><span class="sxs-lookup"><span data-stu-id="79e6f-166">If you want to send the alert as a business event, set the **Organization-wide** value to **No**.</span></span>
6. <span data-ttu-id="79e6f-167">Если требуется, чтобы в определенную дату правило генерации оповещений стало неактивным, на экспресс-вкладке **Оповестить меня до** выберите дату окончания.</span><span class="sxs-lookup"><span data-stu-id="79e6f-167">If the alert rule should become inactive on a specific date, on the **Alert me until** FastTab, select an end date.</span></span>
7. <span data-ttu-id="79e6f-168">На экспресс-вкладке **Оповещать меня с** в поле **Тема** примите тему по умолчанию для сообщения электронной почты или введите новую тему.</span><span class="sxs-lookup"><span data-stu-id="79e6f-168">On the **Alert me with** FastTab, in the **Subject** field, accept the default subject heading for the email message, or enter a new subject.</span></span> <span data-ttu-id="79e6f-169">Текст становится заголовком темы для сообщения электронной почты, которое вы получаете при запуске оповещения.</span><span class="sxs-lookup"><span data-stu-id="79e6f-169">The text becomes the subject heading for the email message that you receive when an alert is triggered.</span></span> <span data-ttu-id="79e6f-170">Если оповещение должно быть отправлено как бизнес-событие, установите **Послать извне** на **Да**.</span><span class="sxs-lookup"><span data-stu-id="79e6f-170">If you want to send the alert as a business event, set **Send externally** to **Yes**.</span></span>
8. <span data-ttu-id="79e6f-171">В поле **Сообщение** введите необязательное сообщение.</span><span class="sxs-lookup"><span data-stu-id="79e6f-171">In the **Message** field, enter an optional message.</span></span> <span data-ttu-id="79e6f-172">Текст становится сообщением, получаемым при запуске оповещения.</span><span class="sxs-lookup"><span data-stu-id="79e6f-172">The text becomes the message that you receive when an alert is triggered.</span></span>
9. <span data-ttu-id="79e6f-173">Выберите **ОК** для сохранения настроек и создания правила оповещения.</span><span class="sxs-lookup"><span data-stu-id="79e6f-173">Select **OK** to save the settings and create the alert rule.</span></span>

## <a name="limitations-and-workarounds"></a><span data-ttu-id="79e6f-174">Ограничения и методы обхода</span><span class="sxs-lookup"><span data-stu-id="79e6f-174">Limitations and workarounds</span></span>

### <a name="workaround-for-creating-alerts-for-the-secondary-data-sources-of-a-form"></a><span data-ttu-id="79e6f-175">Обход для создания оповещений для дополнительных источников данных формы</span><span class="sxs-lookup"><span data-stu-id="79e6f-175">Workaround for creating alerts for the secondary data sources of a form</span></span>
<span data-ttu-id="79e6f-176">Вы не можете создавать оповещения для некоторых дополнительных источников данных в формах.</span><span class="sxs-lookup"><span data-stu-id="79e6f-176">You can't create alerts for some secondary data sources on forms.</span></span> <span data-ttu-id="79e6f-177">Например, при создании оповещений в форме профилей разности клиента или поставщика доступны только поля в заголовке (CustLedger или VendLedger), но не счета аналитики.</span><span class="sxs-lookup"><span data-stu-id="79e6f-177">For example, when creating alerts on the customer or vendor posting profiles form, only the fields on the header (CustLedger or VendLedger) are available and not the dimension accounts.</span></span> <span data-ttu-id="79e6f-178">Обход этого ограничения заключается в использовании **SysTableBrowser** для открытия этой таблицы в качестве первичного источника данных.</span><span class="sxs-lookup"><span data-stu-id="79e6f-178">The workaround for this limitation is to use **SysTableBrowser** to open that table as primary data source.</span></span> 
1. <span data-ttu-id="79e6f-179">Откройте таблицу в форме **SysTableBrowser**.</span><span class="sxs-lookup"><span data-stu-id="79e6f-179">Open the table in the **SysTableBrowser** form.</span></span>
    ```
        https://<EnvironmentURL>/?cmp=USMF&mi=SysTableBrowser&TableName=<TableName>
    ```
2. <span data-ttu-id="79e6f-180">Создайте оповещение из формы SysTableBrowser.</span><span class="sxs-lookup"><span data-stu-id="79e6f-180">Create an alert from the SysTableBrowser form.</span></span>

### <a name="change-based-alerts-do-not-work-for-batch-status-changes"></a><span data-ttu-id="79e6f-181">Для изменения статуса пакета не работают оповещения на основе изменений</span><span class="sxs-lookup"><span data-stu-id="79e6f-181">Change based alerts do not work for batch status changes</span></span>
<span data-ttu-id="79e6f-182">Оповещения на основе изменений не работает при изменении статуса пакета, поскольку оно отключено из соображений производительности.</span><span class="sxs-lookup"><span data-stu-id="79e6f-182">Change based Alerts does not work with batch status changes because it is turned off for performance reasons.</span></span> <span data-ttu-id="79e6f-183">Вместо этого следует настроить функцию **Пакетные оповещения**.</span><span class="sxs-lookup"><span data-stu-id="79e6f-183">Instead, you should set up the **Batch alerts** capability.</span></span> <span data-ttu-id="79e6f-184">Дополнительные сведения см. в разделе [Настройка оповещений для расширенных форм пакета](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/sysadmin/alerts#set-up-alerts-for-batch-enhanced-forms).</span><span class="sxs-lookup"><span data-stu-id="79e6f-184">For more information, see [Set up alerts for batch enhanced forms](https://docs.microsoft.com/dynamics365/fin-ops-core/dev-itpro/sysadmin/alerts#set-up-alerts-for-batch-enhanced-forms).</span></span>


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
