---
title: Настройка этапов утверждения в workflow-процессе
description: В этом разделе описывается, как настроить свойства шага утверждения.
author: ChrisGarty
ms.date: 08/23/2017
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User, IT Pro
ms.reviewer: sericks
ms.custom: 192161
ms.assetid: 8b478e3d-d6b4-403b-aae0-f639a71ca36c
ms.search.region: Global
ms.author: cgarty
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 84ff82dcb9f4ce930b4f1122790f7989c56fac35
ms.sourcegitcommit: 3a7f1fe72ac08e62dda1045e0fb97f7174b69a25
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/31/2022
ms.locfileid: "8070785"
---
# <a name="configure-approval-steps-in-a-workflow"></a>Настройка этапов утверждения в workflow-процессе

[!include [banner](../includes/banner.md)]


[!INCLUDE [PEAP](../../../includes/peap-1.md)]

В этом разделе описывается, как настроить свойства шага утверждения.

Чтобы настроить шаг утверждения, в редакторе workflow-процессов щелкните правой кнопкой мыши шаг утверждения и выберите **Свойства**, чтобы открыть страницу **Свойства**. Затем используйте следующие процедуры для настройки свойств шага утверждения.

## <a name="name-the-step"></a>Создание названия шага
Чтобы ввести имя шаг утверждения, необходимо выполнить следующие действия.

1. В левой области нажмите **Основные настройки**.
2. В поле **Имя** введите уникальное имя шага утверждения.

## <a name="enter-a-subject-line-and-instructions"></a>Ввод строки темы и инструкций

Пользователям, назначенным этой шагу утверждения, должны быть предоставлены строка темы и инструкции. Например, при настройке шага утверждения для заявок на покупку, пользователь, который назначается шагу, увидит строку темы и инструкции на странице **Заявки на покупку**. Строка темы будет отображаться в строке сообщений на странице. Пользователь может щелкнуть значок в строке сообщений, чтобы просмотреть инструкции. Чтобы ввести строку темы и инструкции, необходимо выполнить следующие действия.

1. В левой области нажмите **Основные настройки**.
2. В поле **Тема рабочего элемента** введите строку темы.
3. Для того, чтобы персонализовать строку уведомления можно вставить заполнители. Заполнители заменяются соответствующей информацией, когда строка темы отображается пользователям. Выполните следующие действия, чтобы вставить заполнитель:

    1. В текстовом поле щелкните в том месте, в котором должен находиться заполнитель.
    2. Щелкните **Вставить заполнитель**.
    3. В открывшемся списке выберите заполнитель, который необходимо вставить.
    4. Нажмите **Вставить**.

4. Для добавления переводов строки темы выполните следующие действия:

    1. Щелкните **Переводы**.
    2. На открывшейся странице щелкните **Добавить**.
    3. В отображаемом списке выберите язык, на котором будет вводиться текст.
    4. В поле **Переведенный текст** введите текст.
    5. Чтобы персонализировать текст, можно вставить заполнители, как описано на шаге 3.
    6. Нажмите кнопку **Закрыть**.

5. В поле **Инструкции рабочего элемента** введите инструкции.
6. Для того, чтобы персонализовать инструкции можно вставить заполнители. Заполнители заменяются соответствующей информацией, когда инструкции отображаются пользователям. Выполните следующие действия, чтобы вставить заполнитель:

    1. В текстовом поле щелкните в том месте, в котором должен находиться заполнитель.
    2. Щелкните **Вставить заполнитель**.
    3. В открывшемся списке выберите заполнитель, который необходимо вставить.
    4. Нажмите **Вставить**.

7. Для добавления переводов инструкций выполните следующие действия:

    1. Щелкните **Переводы**.
    2. На открывшейся странице щелкните **Добавить**.
    3. В отображаемом списке выберите язык, на котором будет вводиться текст.
    4. В поле **Переведенный текст** введите текст.
    5. Чтобы персонализировать текст, можно вставить заполнители, как описано на шаге 6.
    6. Нажмите кнопку **Закрыть**.

## <a name="assign-the-approval-step"></a>Назначение шага утверждения

Чтобы указать, кому требуется назначить шаг утверждения, необходимо выполнить следующие действия.

1. В левой области щелкните **Назначение**.
2. Во вкладке **Тип назначения** выберите один из параметров в следующей таблице, а затем выполните дополнительные шаги для этого параметра, перед тем как перейти к шагу 3.

    <table>
    <thead>
    <tr>
    <th>Параметр</th>
    <th>Пользователи, которым назначается шаг утверждения</th>
    <th>Дополнительные шаги</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>Участник</td>
    <td>Пользователи, назначенные для конкретной группы или роли</td>
    <td>
    <ol>
    <li>После выбора значения в поле <strong>Участник</strong> на вкладке <strong>На основе роли</strong> в списке <strong>Тип участника</strong> выберите тип группы или роли, которой требуется назначить шаг.</li>
    <li>В списке <strong>Участник</strong> выберите группу или роль, которой требуется назначить шаг.</li>
    </ol>
    </td>
    </tr>
    <tr>
    <td>Иерархия</td>
    <td>Пользователи в определенной организационной иерархии</td>
    <td>
    <ol>
    <li>После выбора значения в поле <strong>Иерархия</strong> на вкладке <strong>Выбор иерархии</strong> в списке <strong>Тип иерархии</strong> выберите тип иерархии, которой требуется назначить шаг.</li>
    <li>Система должна выполнить поиск по диапазону имен пользователей в иерархии. Эти имена представляют пользователей, которым можно назначить шаг. Выполните следующие действия, чтобы указать начальную и конечную точку диапазона имен пользователей, которые извлекает система. <ol>
    <li>Для указания начальной точки выберите человека в списке <strong>Начать с</strong>.</li>
    <li>Для определения конечной точки щелкните <strong>Добавить условие</strong>. Введите условие для указания места в иерархии, в котором система должна остановить извлечение имен.</li>
    </ol>
    </li>
    <li>На вкладке <strong>Параметры иерархии</strong> укажите, каким пользователям в диапазоне должен быть назначен шаг: <ul>
    <li><strong>Назначить всем найденным пользователям</strong> — шаг назначается всем пользователям в диапазоне.</li>
    <li><strong>Назначить только последнему найденному пользователю</strong> — шаг назначается только последнему пользователю в диапазоне.</li>
    <li><strong>Исключить пользователей, для которых выполняется следующее</strong> — шаг не назначается пользователям в диапазоне, отвечающим определенному условию. Чтобы указать условие, щелкните <strong>Добавить условие</strong>.</li>
    </ul>
    </li>
    </ol>
    </td>
    </tr>
    <tr>
    <td>Пользователь workflow-процесса</td>
    <td>Пользователи в текущем workflow-процессе</td>
    <td>
    <ul>
    <li>После выбора значения в поле <strong>Пользователь workflow-процесса</strong> на вкладке <strong>Пользователь workflow-процесса</strong> в списке <strong>Пользователь workflow-процесса</strong> выберите пользователя, который будет участвовать в workflow-процессе.</li>
    </ul>
    </td>
    </tr>
    <tr>
    <td>Пользователь</td>
    <td>Определенные пользователи</td>
    <td>
    <ol>
    <li>После выбора параметра <strong>Пользователь</strong> перейдите на вкладку <strong>Пользователь</strong>.</li>
    <li>Список <strong>Доступные пользователи</strong> включает всех пользователей системы. Выберите пользователей, которым требуется назначить шаг, а затем переместите этих пользователей в список <strong>Выбранные пользователи</strong>.</li>
    </ol>
    </td>
    </tr>
    </tbody>
    </table>

3. На вкладке **Ограничение по времени** в поле **Продолжительность** укажите, сколько времени пользователь может потратить на обработку документов, поступивших на этом шаге утверждения. Выберите один из следующих вариантов:

    - **Часы** — введите число часов, предоставляются пользователю на ответ. Затем выберите календарь, который используется в организации и введите информацию о рабочей неделе организации.
    - **Дни** — введите число дней, которые предоставляются пользователю на ответ. Затем выберите календарь, который используется в организации и введите информацию о рабочей неделе организации.
    - **Недели** — введите число недель, которые предоставляются пользователю на ответ.
    - **Месяцы** — выберите день и неделю, к которым должен ответить пользователь. Например, вам необходимо, чтобы пользователь ответил к пятнице третьей недели месяца.
    - **Годы** — выберите день, неделю и месяц, к которым должен ответить пользователь. Например, вам необходимо, чтобы пользователь ответил к пятнице третьей недели декабря.

    Если пользователь не предпринимает действие с документом за выделенное время, документ считается просроченным. Просроченный документ эскалируется на основе параметров, выбранных в области **Эскалация** этой страницы.

4. Если шаг утверждения назначен нескольким пользователям или группе пользователей, перейдите на вкладку **Политика выполнения** и затем выберите один из следующих вариантов:

    - **Один утверждающий** — Действие в отношении этого документа определяется первым отвечающим лицом. Например, Сэм подал отчет по расходам на сумму 15 000 долларов США. Отчет по расходам в настоящее время назначен Сью, Джо и Биллу. Если Сью является первым отвечающим лицом для данного документа, действие, которое она совершает, применяется к документу. Если Сью отклоняет документ, документ не утверждается и направляется назад Сэму. Если Сью утверждает документ, он направляется Анне для утверждения.

        ![Workflow-процесс с процессом утверждения.](./media/workflow_multipleusersinstep.gif)

    - **Большинство утверждающих** — Действие в отношении этого документа определяется, когда отвечает большинство утверждающих лиц. Например, Сэм подал отчет по расходам на сумму 15 000 долларов США. Отчет по расходам в настоящее время назначен Сью, Джо и Биллу. Если первые отвечающие утверждающие лица - Сью и Джо, их действие применяется к документу.

        - Если Сью утверждает документ, а Джо - нет, документ не утверждается и направляется назад к Сэму.
        - Если Сью и Джо утверждают документ, он направляется Анне для утверждения.

    - **Процент от утверждающих** — Действие в отношении этого документа определяется, когда отвечает определенный процент утверждающих лиц. Например, Сэм подал отчет по расходам на сумму 15 000 долларов США. Отчет по расходам сейчас назначен Сью, Джо и Биллу и вы ввели как процент **50**. Если первые отвечающие утверждающие лица — Сью и Джо, их действие применяется к документу, так как они соответствуют требованию в 50 процентов утверждающих.

        - Если Сью утверждает документ, а Джо - нет, документ не утверждается и направляется назад к Сэму.
        - Если Сью и Джо утверждают документ, он направляется Анне для утверждения.

    - **Все утверждающие** - все утверждающие лица должны утвердить документ. В противном случае workflow-процесс невозможно продолжить. Например, Сэм подал отчет по расходам на сумму 15 000 долларов США. Отчет по расходам в настоящее время назначен Сью, Джо и Биллу. Если Сью и Джо утверждает документ, а Билл - нет, документ не утверждается и направляется назад к Сэму. Если Сью, Джо и Билл утверждают документ, он направляется Анне для утверждения.

## <a name="specify-when-the-approval-step-is-required"></a>Задание условий использования для данного шага утверждения

Можно задать условий использования для данного шага утверждения Шаг утверждения может быть обязательным всегда или только при определенных условиях.

### <a name="the-approval-step-is-always-required"></a>Шаг утверждения Требуется всегда

Выполните следующие действия, если шаг утверждения Требуется всегда.

1. В левой области щелкните **Условие**.
2. Установите переключатель в положение **Всегда выполнять этот шаг**.

### <a name="the-approval-step-is-required-in-specific-conditions"></a>шаг утверждения должен использоваться при соблюдении определенных условий

Настраиваемый шаг утверждения может быть обязательным только при выполнении определенных условий. Например, если вы настраиваете шаг утверждения для workflow-процесса заявки на покупку, вам может потребоваться, чтобы этот шаг утверждения выполнялся, только если сумма в заявке на покупку превышает 10 000 долларов США. Выполните следующие действия, чтобы указать если шаг утверждения Требуется.

1. В левой области щелкните **Условие**.
2. Установите переключатель в положение **Выполнять этот шаг только при соблюдении следующего условия**.
3. Введите условие.
4. Введите все необходимые дополнительные условия.
5. Чтобы убедиться, что введенные условия настроены верно, выполните следующие действия.

    1. Щелкните **Тест**.
    2. На странице **Проверить условие workflow-процесса** в области **Проверить условие** выберите запись.
    3. Щелкните **Тест**. Система оценит запись и определит, соответствует ли она определенным вами условиям.
    4. Нажмите кнопку **OK** или **Отмена** для возврата на страницу **Свойства**.

## <a name="specify-what-happens-when-the-document-is-overdue"></a>Задание действий в случае, если документ просрочен

Если пользователь не предпринимает действие с документом за выделенное время, документ считается просроченным. Просроченный документ можно эскалировать или автоматически назначить другому пользователю для утверждения. Выполните следующие шаги, чтобы эскалировать документ, если он просрочен.

1. В левой области щелкните **Эскалация**.
2. Установите флажок **Использовать маршрут эскалации**, чтобы создать маршрут эскалации. Документ будет автоматически назначена пользователям, перечисленным в маршруте эскалации. Например, в следующей таблице представляет собой маршрут эскалации.

    | Последовательность | Путь эскалации      |
    |----------|----------------------|
    | 1        | Назначит: Дарье     |
    | 2        | Назначить: Ирине      |
    | 3        | Конечное действие: отклонить |

    В этом примере просроченный документ будет автоматически назначена Дарье. Если Дарья не ответит в отведенные сроки, система назначит документ Ирине. Если Ирина не ответит в отведенные сроки, система отклонит документ.

3. Чтобы добавить пользователя в маршрут эскалации, щелкните **Добавить эскалирование**. Во вкладке **Тип назначения** выберите один из параметров в следующей таблице, а затем выполните дополнительные шаги для этого параметра, перед тем как перейти к шагу 4.

    <table>
    <thead>
    <tr>
    <th>Параметр</th>
    <th>Пользователи, которым эскалируется документ</th>
    <th>Дополнительные шаги</th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td>Иерархия</td>
    <td>Пользователи в определенной организационной иерархии</td>
    <td>
    <ol>
    <li>После выбора значения в поле <strong>Иерархия</strong> на вкладке <strong>Выбор иерархии</strong> в списке <strong>Тип иерархии</strong> выберите тип иерархии, в которую требуется эскалировать документ.</li>
    <li>Система должна выполнить поиск по диапазону имен пользователей в иерархии. Эти имена представляют пользователей, которым может быть эскалирован документ. Выполните следующие действия, чтобы указать начальную и конечную точку диапазона имен пользователей, которые извлекает система. <ol>
    <li>Для указания начальной точки выберите человека в списке <strong>Начать с</strong>.</li>
    <li>Для определения конечной точки щелкните <strong>Добавить условие</strong>. Введите условие для указания места в иерархии, в котором система должна остановить извлечение имен.</li>
    </ol>
    </li>
    <li>На вкладке <strong>Параметры иерархии</strong> укажите, каким пользователям в диапазоне должен быть эскалирован документ: <ul>
    <li><strong>Назначить всем найденным пользователям</strong> — документ эскалируется всем пользователям в диапазоне.</li>
    <li><strong>Назначить только последнему найденному пользователю</strong> — документ эскалируется только последнему пользователю в диапазоне.</li>
    <li><strong>Исключить пользователей, для которых выполняется следующее:</strong> — документ не эскалируется пользователям в диапазоне, отвечающим определенному условию. Чтобы указать условие, щелкните <strong>Добавить условие</strong>.</li>
    </ul>
    </li>
    </ol>
    </td>
    </tr>
    <tr>
    <td>Пользователь workflow-процесса</td>
    <td>Пользователи в текущем workflow-процессе</td>
    <td>
    <ul>
    <li>После выбора значения в поле <strong>Пользователь workflow-процесса</strong> на вкладке <strong>Пользователь workflow-процесса</strong> в списке <strong>Пользователь workflow-процесса</strong> выберите пользователя, который будет участвовать в workflow-процессе.</li>
    </ul>
    </td>
    </tr>
    <tr>
    <td>Пользователь</td>
    <td>Определенные пользователи</td>
    <td>
    <ol>
    <li>После выбора параметра <strong>Пользователь</strong> перейдите на вкладку <strong>Пользователь</strong>.</li>
    <li>Список <strong>Доступные пользователи</strong> включает всех пользователей. Выберите пользователей, которым требуется эскалировать документ, а затем переместите этих пользователей в список <strong>Выбранные пользователи</strong>.</li>
    </ol>
    </td>
    </tr>
    </tbody>
    </table>

4. На вкладке **Ограничение по времени** в поле **Продолжительность** укажите, сколько времени пользователь может потратить на обработку документов. Выберите один из следующих вариантов:

    - **Часы** — введите число часов, предоставляются пользователю на ответ. Затем выберите календарь, который используется в организации и введите информацию о рабочей неделе организации.
    - **Дни** — введите число дней, которые предоставляются пользователю на ответ. Затем выберите календарь, который используется в организации и введите информацию о рабочей неделе организации.
    - **Недели** — введите число недель, которые предоставляются пользователю на ответ.
    - **Месяцы** — выберите день и неделю, к которым должен ответить пользователь. Например, вам необходимо, чтобы пользователь ответил к пятнице третьей недели месяца.
    - **Годы** — выберите день, неделю и месяц, к которым должен ответить пользователь. Например, вам необходимо, чтобы пользователь ответил к пятнице третьей недели декабря.

5. Повторите шаги с 3 по 4 для каждого пользователя, которого следует добавить в маршрут эскалации. можно изменить порядок пользователей.
6. Если пользователи, перечисленные в маршруте эскалации, не отвечают за отведенное время, система автоматически выполняет действие с документом. Чтобы указать действие, которое будет выполнять система, выберите строку **Действие** и на вкладке **Конечное действие** выберите действие.


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]