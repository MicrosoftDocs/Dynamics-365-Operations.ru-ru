---
title: Синхронизация по требованию с механизмом ценообразования Supply Chain Management
description: В этой статье описывается, как использовать механизм ценообразования в Microsoft Dynamics 365 Supply Chain Management из Microsoft Dynamics 365 Sales.
author: RamaKrishnamoorthy
ms.date: 03/10/2019
ms.topic: article
audience: Application User, IT Pro
ms.reviewer: tfehr
ms.search.region: global
ms.author: ramasri
ms.search.validFrom: 2020-01-06
ms.openlocfilehash: 259bdd5f868945c3857b045fbd3cbd4fceb26951
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/03/2022
ms.locfileid: "8862229"
---
# <a name="sync-on-demand-with-the-supply-chain-management-pricing-engine"></a>Синхронизация по требованию с механизмом ценообразования Supply Chain Management

[!include [banner](../../includes/banner.md)]

Microsoft Dynamics 365 Supply Chain Management включает в себя механизм ценообразования, который обрабатывает торговые договора, прайс-листы, программы лояльности клиентов, рекламные акции и скидки. Механизм ценообразования использует сложные правила для определения наилучшей цены для данного предложения или заказа. При использовании двойной записи можно использовать как статическое ценообразование, так и механизм ценообразования из Supply Chain Management на страницах **Предложение с расценками** и **Заказ** в Microsoft Dynamics 365 Sales.

## <a name="use-the-pricing-engine-from-supply-chain-management-in-sales"></a>Использование механизма ценообразования из Supply Chain Management в Sales

1. В Sales выберите **Продажи \> Заказы**.
1. Выберите **Создать**, чтобы создать новый заказ, или выберите существующий заказ в списке **Мои заказы**.
1. Добавьте новую строку заказа.
1. При создании нового заказа выберите **Рассчитать цену заказа** на панели операций. При обновлении существующего заказа выберите **Пересчитать** на панели операций.
1. Следующие столбцы автоматически заполняются:

    - Детальная сумма
    - % скидки
    - Скидка
    - Сумма без фрахта
    - Сумма фрахта
    - Общий налог
    - Общая сумма

> [!NOTE]
> Аналогичный процесс применяется при создании предложений.

## <a name="how-it-works"></a>Как это работает

При создании заказа в модуле Sales немедленно выполняется синхронизация заказа с Supply Chain Management с использованием значений, введенных в Sales. Когда вы выбираете пункт **Рассчитать цену заказа** или **Рассчитать цену предложения** в модуле Sales, Supply Chain Management рассчитывает цену для каждой строки заказа, и общий заказ на основе правил коммерческого соглашения, которые определены в Supply Chain Management. Затем новые рассчитанные значения синхронизируются обратно с Sales.

## <a name="set-trade-agreement-evaluation-options-in-supply-chain-management"></a>Задание параметров оценки коммерческого соглашения в Supply Chain Management

Можно настроить Supply Chain Management для учета или игнорирования коммерческих соглашений при расчете цены заказа, созданного в модуле Sales. Выполните следующие шаги для настройки этого параметра.

1. Войдите в свою среду Supply Chain Management.
1. Перейдите в раздел **Расчеты с клиентами \> Настройка \> Параметры модуля расчетов с клиентами**.
1. На вкладке **Цены** на экспресс-вкладке **Оценка коммерческого договора** добавьте или удалите строку для политики **Ручной ввод**, как требуется. Наличие или отсутствие данной политики определяет, будет ли модуль ценообразования для Supply Chain Management автоматически отменять цену продажи, введенную в модуле Sales.

    - Если политика **Ручной ввод** *отсутствует* в настройке **Оценка коммерческого соглашения**, Supply Chain Management определяет цены. Когда пользователь выбирает **Рассчитать цену заказа** или **Рассчитать цену предложения** на панели операций в Sales, вызывается модуль ценообразования Supply Chain Management, и цена продажи, введенная в модуле Sales, перезаписывается, если только она не равна цене продажи, рассчитанной в Supply Chain Management.
    - Если политика **Ручной ввод** *присутствует* в настройке **Оценка коммерческого соглашения**, Sales определяет цены. Цена продажи, введенная в модуле Sales, не перезаписывается автоматически, когда пользователь выбирает **Рассчитать цену заказа** или **Рассчитать цену предложения** на панели операций в модуле Sales.
    - Строки заказа и строки предложения, имеющие значение **Цена за единицу** и/или **Скидка**, равное *0* (нулю) в Sales, рассматриваются как особый случай. Если доступна соответствующая цена коммерческого соглашения, Supply Chain Management *всегда* будет применять ее к этим полям независимо от настройки параметра **Оценка коммерческого соглашения**.

    Пример каждого из этих вариантов см. в следующих сценариях.

## <a name="example-scenario-1-trade-agreement-evaluation-without-the-manual-entry-option"></a>Пример сценария 1. Оценка коммерческого соглашения без параметра "Ручной ввод"

В этом сценарии настройка **Оценка коммерческого соглашения** в Supply Chain Management *не* включает политику **Ручной ввод**. Пользователь Sales вводит строку заказа с ненулевой ценой продажи в Sales, а цена продажи для номенклатуры не определена в Supply Chain Management.

1. В Sales пользователь создает строку заказа, имеющую значение **Цена за единицу**, равное 1 доллару США (USD).
1. Строка заказа синхронизируется с Supply Chain Management с ценой продажи 1 доллар США.
1. В Sales пользователь выбирает **Рассчитать цену заказа** на панели операций.
1. Supply Chain Management выполняет поиск соответствующих цен и скидок, а затем рассчитывает итоговые значения. Поскольку у номенклатуры нет цены продажи в Supply Chain Management, расчет обновляет строку таким образом, чтобы ее цена продажи была 0 долларов США.
1. Новая цена продажи по строке синхронизируется обратно с Sales.
1. Результатом является строка заказа в Sales, имеющая цену продажи 0 долларов США.

## <a name="example-scenario-2-trade-agreement-evaluation-with-the-manual-entry-option"></a>Пример сценария 2. Оценка коммерческого соглашения с параметром "Ручной ввод"

В этом сценарии настройка **Оценка коммерческого соглашения** в Supply Chain Management *включает* политику **Ручной ввод**. Пользователь Sales вводит строку заказа с ненулевой ценой продаж в Sales. Supply Chain Management включает торговое соглашение, которое задает цену продажи 2 доллара США для заказанной номенклатуры.

1. В Sales пользователь создает строку заказа для номенклатуры, имеющую значение **Цена за единицу**, равное 1 доллару США.
1. Строка заказа синхронизируется с Supply Chain Management с ценой продажи 1 доллар США.
1. В Sales пользователь выбирает **Рассчитать цену заказа** на панели операций.
1. Так как настройка **Оценка коммерческого соглашения** в Supply Chain Management включает политику **Ручной ввод**, цена продажи не изменяется, даже если соответствующее коммерческое соглашение определяет другую цену продажи.
1. Цена продажи остается неизменной в Sales и Supply Chain Management.

## <a name="example-scenario-3-trade-agreement-evaluation-for-an-item-that-has-a-sales-price-of-zero-in-sales"></a>Пример сценария 3. Оценка коммерческого соглашения для номенклатуры, имеющей нулевую цену продажи ноль в Sales

В этом сценарии настройка **Оценка коммерческого соглашения** в Supply Chain Management *включает* политику **Ручной ввод**. Пользователь Sales вводит строку заказа с нулевой (0) ценой продаж в Sales. Supply Chain Management включает торговое соглашение, которое задает цену продажи 2 доллара США для заказанной номенклатуры.

1. В Sales пользователь создает строку заказа, имеющую значение **Цена за единицу**, равное 0 долларов США, и значение **Скидка по строке**, равное 0 долларов США.
1. Строка заказа синхронизируется с Supply Chain Management с ценой продажи 0 долларов США.
1. Поскольку полученная строка заказа имеет цену продажи, равную 0 (нолю), Supply Chain Management вызывает механизм ценообразования, даже если включен параметр **Ручной ввод**. Механизм ценообразования возвращает цену продажи 2 доллара США, установленного коммерческим соглашением, и обновляет строку заказа в Supply Chain Management.
1. Обновленная цена продажи еще не синхронизирована со строкой заказа в Sales.
1. В Sales пользователь выбирает **Рассчитать цену заказа** на панели операций.
1. Строка заказа в Supply Chain Management сохранит свою цену продажи 2 доллара США, которая в данный случае синхронизируется обратно с Sales. Поэтому значение **Цена за единицу** для строки заказа в Sales обновляется с 0 долларов США на 2 доллара США.
1. В Sales пользователь вводит новое значение **Скидка по строке**, равное 0,50 доллара США. Sales теперь рассчитывает, что значение **Расширенная сумма** для этой строки равно 1,50 доллара США.
1. Строка заказа синхронизируется с Supply Chain Management со значением **Скидка по строке**, равным 0,50 доллара США.
1. В Sales пользователь выбирает **Рассчитать цену заказа** на панели операций.
1. Цены или скидки для строки заказа в Sales не изменяются.

## <a name="limitations"></a>Ограничения

Когда столбцы в Sales заполнены, действуют следующие ограничения:

- Настройка накладных расходов и распределения расходов в Supply Chain Management не воспроизводится в Sales.
- В ценах не учитывается специальная розничная цена, указанная в столбце **Канал розничной торговли** на странице строки заказа на продажу в Supply Chain Management.
- Скидки, которые определены в разделе **Управление торговыми скидками** Supply Chain Management не рассматриваются.
- Цены не учитывают соглашения по продажам.

[!INCLUDE[footer-include](../../../../includes/footer-banner.md)]
