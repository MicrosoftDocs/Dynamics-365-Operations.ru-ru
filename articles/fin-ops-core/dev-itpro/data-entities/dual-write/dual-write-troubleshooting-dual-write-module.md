---
title: Устранение проблем с двойной записью в приложениях для управления финансами и операциями
description: В этой статье содержатся сведения об устранении неполадок, которые могут полезны при разрешении проблем, связанных с модулем двойной записи в приложениях для управления финансами и операциями.
author: RamaKrishnamoorthy
ms.date: 04/18/2022
ms.topic: article
audience: Application User, IT Pro
ms.reviewer: tfehr
ms.search.region: global
ms.author: ramasri
ms.search.validFrom: 2020-03-16
ms.openlocfilehash: 36f7969eb0bdbc64ade14a5bb97b4b708486d226
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/03/2022
ms.locfileid: "8864582"
---
# <a name="troubleshoot-dual-write-issues-in-finance-and-operations-apps"></a>Устранение проблем с двойной записью в приложениях для управления финансами и операциями

[!include [banner](../../includes/banner.md)]



Эта статья предоставляет информацию по устранению неполадок для интеграции двойной записи между приложениями для управления финансами и операциями и Dataverse. А именно, в нем содержатся сведения об устранении неполадок, связанных с модулем **Двойная запись** в приложениях Финансы и операции.

> [!IMPORTANT]
> Для устранения некоторых проблем, рассмотренных в этой статье, может потребоваться роль системного администратора или учетные данные администратора клиента Microsoft Azure Active Directory (Azure AD). В разделе для каждого выпуска объясняется, требуются ли конкретная роль или учетные данные.

## <a name="you-cant-load-the-dual-write-module-in-a-finance-and-operations-app"></a>Вы не можете загрузить модуль двойной записи в приложении Финансы и операции

Если не удается открыть страницу **Двойная запись** путем выбора плитки **Двойная запись** в рабочей области **Управление данными**, возможно, служба интеграции данных не работает. Создайте запрос в службу поддержки для запроса перезапуска службы интеграции данных.

## <a name="error-when-you-try-to-create-a-new-table-map"></a>Ошибка при попытке создания нового сопоставления таблицы

**Необходимые учетные данные для устранения проблемы:** тот же пользователь, который настроил двойную запись.

При попытке настроить новую таблицу для двойной записи может появиться следующее сообщение об ошибке. Единственным пользователем, который может создать сопоставление, является пользователь, который настроил подключение с двойной записью.

*Код статуса отклика не указывает на успешное выполнение: 401 (Unauthorized).*

## <a name="error-when-you-open-the-dual-write-user-interface"></a>Ошибка при открытии интерфейса пользователя двойной записи

При попытке доступа к двойной записи из рабочей области **Управление данными** может появиться следующее сообщение об ошибке:

*login.microsoftonline.com отклонил попытку подключения.*

Чтобы устранить эту проблему, выполните вход, используя окно InPrivate в Microsoft Edge, окно инкогнито окно в Chromium или окно инкогнито в Google Chrome. Кроме того, необходимо разблокировать или удалить сторонние файлы cookie.

## <a name="error-when-you-link-the-environment-for-dual-write-or-add-a-new-table-mapping"></a>Ошибка при связи среды для двойной записи или добавлении нового сопоставления таблицы

**Роль, требуемая для исправления ошибки:** системный администратор в приложениях Финансы и операции и Dataverse.

При связывании или создании карт может возникнуть следующая ошибка:

```dos
Response status code does not indicate success: 403 (tokenexchange).
Session ID: \<your session id\>
Root activity ID: \<your root activity\> id
```

Эта ошибка может возникнуть, если у вас нет достаточных прав для связывания двойной записи для создания карт. Эта ошибка может также возникать, если среда Dataverse была сброшена без отключения двойной записи. Любой пользователь с ролью системного администратора как в приложениях Финансы и операции, так и в Dataverse, может связать эти среды. Новые сопоставления таблиц может добавлять только пользователь, который настроил подключение с двойной записью. После настройки любой пользователь с ролью системного администратора может отслеживать статус и изменять сопоставления.

## <a name="error-when-you-stop-the-table-mapping"></a>Ошибка при остановке сопоставления таблицы

При попытке остановки сопоставлений таблиц может появиться следующее сообщение об ошибке:

*\[Запрещено\], \[{"статус":403,"источник":"","сообщение":"Ошибка от обмена токенами: пользователю не разрешен доступ к подключению dynamicscrmonline/xxxxxx-xxxx-xxxx-xxxxxxxx"}\], Удаленный сервер вернул ошибку: (403) Запрещено.*

Эта ошибка возникает, когда связанная среда Dataverse недоступна.

Чтобы устранить эту проблему, создайте заявку в рабочую группу интеграции данных. Приложите трассировку сети, чтобы рабочая группа интеграции данных могла отметить карты как **Не выполняются** в серверной системе.

## <a name="enable-parallel-processing-in-finance-and-operations-apps-to-improve-performance"></a>Включение параллельной обработки в приложениях для управления финансами и операциями для повышения производительности

Включение параллельной обработки может сократить время, необходимое для импорта данных из приложений Dynamics 365 для взаимодействия с клиентами и Microsoft Dataverse в приложения для управления финансами и операциями. 

Для включения параллельной обработки в приложениях для управления финансами и операциями выполните следующие действия.

1. Войдите в среду для управления финансами о операциями.
2. Перейдите в раздел **Управление данными > Параметры структуры**.
3. Выберите **Параметры сущности** и выберите **Настройка параметров выполнения сущности**.
4. Добавьте параметры для параллельной обработки:
    - **Счетчик пороговых записей импорта** — число записей, которые должны быть выполнены до включения параллельной обработки.
    - **Счетчик задач импорта** — число потоков (задач) для параллельного выполнения.
5. Нажмите **Сохранить**.


## <a name="errors-while-trying-to-start-a-table-mapping"></a>Ошибки при попытке запуска сопоставления таблиц

### <a name="unable-to-complete-initial-data-sync"></a>Не удалось выполнить начальную синхронизацию данных

При попытке запуска начальной синхронизации данных может появиться следующее сообщение об ошибке:

*Не удалось выполнить начальную синхронизацию данных. Ошибка: сбой двойной записи — не удалось зарегистрировать подключаемый модуль: невозможно построить метаданные поиска двойной записи. Ссылка на объект ошибке не установлена на экземпляр объекта.*

При попытке установить это состояние сопоставления на **Выполняется** может появиться эта ошибка. Исправление зависит от причины ошибки:

+ Если сопоставление имеет зависимые сопоставления, убедитесь, что разрешены зависимые сопоставления для этого сопоставления таблиц.
+ Возможно, в сопоставлении отсутствуют столбцы источника или назначения. Если столбец в приложении Финансы и операции отсутствует, следуйте указаниям в разделе [Отсутствующие столбцы таблицы в сопоставлениях](dual-write-troubleshooting-finops-upgrades.md#missing-table-columns-issue-on-maps). Если отсутствует столбец в Dataverse, нажмите кнопку **Обновить таблицы** на сопоставлении, чтобы эти столбцы автоматически вводились в сопоставление.

### <a name="version-mismatch-error-and-upgrading-dual-write-solutions"></a>Ошибка несоответствия версий и обновление решений двойной записи

При попытке выполнения сопоставлений таблиц могут появиться следующие сообщения об ошибке:

+ *Группы клиентов (msdyn_customergroups): сбой при двойной записи — решение Dynamics 365 for Sales "Dynamics365Company" имеет несоответствие версий. Версия: "2.0.2.10" Требуемая версия: "2.0.133"*
+ *В решении Dynamics 365 for Sales "Dynamics365FinanceExtended" есть несоответствие версии Версия: 1.0.0.0 Требуемая версия 2.0.227*
+ *В решении Dynamics 365 for Sales "365FinanceAndOperationsCommon" есть несоответствие версии Версия: 1.0.0.0 Требуемая версия 2.0.133*
+ *В решении Dynamics 365 for Sales "CurrencyExchangeRates" есть несоответствие версии Версия: 1.0.0.0 Требуемая версия 2.0.133*
+ *В решении Dynamics 365 for Sales "Dynamics365SupplyChainExtended" есть несоответствие версии Версия: 1.0.0.0 Требуемая версия 2.0.227*

Чтобы устранить проблемы, обновите решения двойной записи в Dataverse. Обязательно обновите решение до новейшего, соответствующего требуемой версии решения.

[!INCLUDE[footer-include](../../../../includes/footer-banner.md)]
