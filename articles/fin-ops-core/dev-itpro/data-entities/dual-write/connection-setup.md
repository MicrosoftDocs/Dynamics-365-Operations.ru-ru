---
title: Руководство по настройке двойной записи
description: В этом разделе описываются сценарии, поддерживаемые для настройки с двойной записью.
author: RamaKrishnamoorthy
manager: AnnBe
ms.date: 10/12/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: rhaertle
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: ramasri
ms.dyn365.ops.version: ''
ms.search.validFrom: 2020-01-06
ms.openlocfilehash: 2d77a1458f3f4c79b231e6a6d7cc320b8ee1fad9
ms.sourcegitcommit: ee643d651d57560bccae2f99238faa39881f5c64
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/21/2020
ms.locfileid: "4088514"
---
# <a name="guidance-for-how-to-set-up-dual-write"></a>Руководство по настройке двойной записи

[!include [banner](../../includes/banner.md)]

[!include [preview-banner](../../includes/preview-banner.md)]

Можно настроить подключение с двойной записью между средой Finance and Operations и средой Common Data Service.

+ **Среда Finance and Operations** предоставляет основную платформу для **приложений Finance and Operations** (например, Microsoft Dynamics 365 Finance, Dynamics 365 Supply Chain Management и Dynamics 365 Retail).
+ **Среда Common Data Service** предоставляет основную платформу для **приложений взаимодействия с клиентами** (Dynamics 365 Sales, Dynamics 365 Customer Service, Dynamics 365 Field Service, Dynamics 365 Marketing и Dynamics 365 Project Service Automation).

>[!IMPORTANT]
>Модуль Human Resources в Finance and Operations поддерживает подключения с двойной записью, но приложение Dynamics 365 Human Resources не поддерживает.

Механизм настройки различается в зависимости от подписки и среды.

+ Для новых экземпляров приложений Finance and Operations настройка подключения с двойной записью начинается с Microsoft Dynamics Lifecycle Services (LCS). Если у вас есть лицензия на Power Platform, вы получите новую среду Common Data Service, если у клиента ее нет.
+ Для существующих экземпляров приложений Finance and Operations настройка подключения двойной записи начинается со среды Finance and Operations.

Прежде чем начать двойную запись по сущности, можно выполнить начальную синхронизацию для обработки существующих данных на обеих сторонах приложений Finance and Operations и приложений для взаимодействия с клиентами. Исходную синхронизацию можно пропустить, если не требуется синхронизация данных между этими двумя средами.

Исходная синхронизация позволяет копировать существующие данные из одного приложения в другое двунаправленно. Существует несколько различных сценариев настройки, в зависимости от того, какие среды уже имеются в системе, и какие типы данных имеются в средах.

Поддерживаются следующие сценарии настройки:

+ [Новый экземпляр приложения Finance and Operations и новый экземпляр приложения взаимодействия с клиентами](#new-new)
+ [Новый экземпляр приложения Finance and Operations и существующий экземпляр приложения взаимодействия с клиентами](#new-existing)
+ [Новый экземпляр приложения Finance and Operations с данными и новый экземпляр приложения взаимодействия с клиентами](#new-data-new)
+ [Новый экземпляр приложения Finance and Operations с данными и существующий экземпляр приложения взаимодействия с клиентами](#new-data-existing)
+ [Существующий экземпляр приложения Finance and Operations и новый экземпляр приложения взаимодействия с клиентами](#existing-new)
+ [Существующий экземпляр приложения Finance and Operations и существующий экземпляр приложения взаимодействия с клиентами](#existing-existing)

## <a name="a-new-finance-and-operations-app-instance-and-a-new-customer-engagement-app-instance"></a><a id="new-new"></a>Новый экземпляр приложения Finance and Operations и новый экземпляр приложения взаимодействия с клиентами

Для настройки подключения с двойной записью между новым экземпляром приложения Finance and Operations, в котором отсутствуют данные, и новым экземпляром приложения взаимодействия с клиентами, выполните действия, указанные в разделе [Настройка двойной записи из Lifecycle Services](lcs-setup.md). После завершения настройки подключения выполняются следующие действия автоматически:

- Подготавливается новая пустая среда Finance and Operations.
- Будет подготовлен новый пустой экземпляр приложения взаимодействия с клиентами, в котором устанавливается простое решение CRM.
- Для данных компании DAT устанавливается подключение с двойной записью.
- Сопоставления объектов включаются для синхронизации в реальном времени.

Обе среды затем готовы для синхронизации данных в режиме реального времени.

## <a name="a-new-finance-and-operations-app-instance-and-an-existing-customer-engagement-app-instance"></a><a id="new-existing"></a>Новый экземпляр приложения Finance and Operations и существующий экземпляр приложения взаимодействия с клиентами

Для настройки подключения с двойной записью между новым экземпляром приложения Finance and Operations, в котором отсутствуют данные, и существующим экземпляром приложения взаимодействия с клиентами, выполните действия, указанные в разделе [Настройка двойной записи из Lifecycle Services](lcs-setup.md). После завершения настройки подключения выполняются следующие действия автоматически:

- Подготавливается новая пустая среда Finance and Operations.
- Для данных компании DAT устанавливается подключение с двойной записью.
- Сопоставления объектов включаются для синхронизации в реальном времени.

Обе среды затем готовы для синхронизации данных в режиме реального времени.

Чтобы синхронизировать существующие данные Common Data Service с приложением Finance and Operations, выполните следующие действия.

1. Создайте новую компанию в приложении Finance and Operations.
2. Добавьте эту компанию в настройку подключения двойной записи.
3. [Выполните начальную загрузку](bootstrap-company-data.md) данных Common Data Service с помощью трехбуквенного кода ISO компании.
4. Выполните функцию **Начальная синхронизация** для тех объектов, для которых требуется синхронизировать данные.

Пример и альтернативный подход см. в разделе [Пример](#example).

## <a name="a-new-finance-and-operations-app-instance-that-has-data-and-a-new-customer-engagement-app-instance"></a><a id="new-data-new"></a>Новый экземпляр приложения Finance and Operations с данными и новый экземпляр приложения взаимодействия с клиентами

Чтобы настроить подключение с двойной записью между новым экземпляром приложения Finance and Operations, в котором имеются данные, и новым экземпляром приложения взаимодействия с клиентами, следуйте указаниям из раздела [Новый экземпляр приложения Finance and Operations и новый экземпляр приложения взаимодействия с клиентами](#new-new) ранее в этом разделе. Если после завершения настройки подключения требуется синхронизировать данные с приложением взаимодействия с клиентами, выполните следующие действия.

1. Откройте приложение Finance and Operations на странице LCS, войдите в систему, затем откройте **Управление данными \> Двойная запись**.
2. Выполните функцию **Начальная синхронизация** для тех объектов, для которых требуется синхронизировать данные.

Пример и альтернативный подход см. в разделе [Пример](#example).

## <a name="a-new-finance-and-operations-app-instance-that-has-data-and-an-existing-customer-engagement-app-instance"></a><a id="new-data-existing"></a>Новый экземпляр приложения Finance and Operations с данными и существующий экземпляр приложения взаимодействия с клиентами

Чтобы настроить подключение с двойной записью между новым экземпляром приложения Finance and Operations, в котором имеются данные, и существующим экземпляром приложения взаимодействия с клиентами, следуйте указаниям из раздела [Новый экземпляр приложения Finance and Operations и существующий экземпляр приложения взаимодействия с клиентами](#new-existing) ранее в этом разделе. Если после завершения настройки подключения требуется синхронизировать данные с приложением взаимодействия с клиентами, выполните следующие действия.

1. Откройте приложение Finance and Operations на странице LCS, войдите в систему, затем откройте **Управление данными \> Двойная запись**.
2. Выполните функцию **Начальная синхронизация** для тех объектов, для которых требуется синхронизировать данные.

Чтобы синхронизировать существующие данные Common Data Service с приложением Finance and Operations, выполните следующие действия.

1. Создайте новую компанию в приложении Finance and Operations.
2. Добавьте эту компанию в настройку подключения двойной записи.
3. [Выполните начальную загрузку](bootstrap-company-data.md) данных Common Data Service с помощью трехбуквенного кода ISO компании.
4. Выполните функцию **Начальная синхронизация** для тех объектов, для которых требуется синхронизировать данные.

Пример и альтернативный подход см. в разделе [Пример](#example).

## <a name="an-existing-finance-and-operations-app-instance-and-a-new-customer-engagement-app-instance"></a><a id="existing-new"></a>Существующий экземпляр приложения Finance and Operations и новый экземпляр приложения взаимодействия с клиентами

Настройка подключения двойной записи между существующим экземпляром приложения Finance and Operations и новым экземпляром приложения взаимодействия с клиентами производится в среде Finance and Operations.

1. [Настройте подключение из приложения Finance and Operations](enable-dual-write.md).
2. Выполните функцию **Начальная синхронизация** для тех объектов, для которых требуется синхронизировать данные.

Пример и альтернативный подход см. в разделе [Пример](#example).

## <a name="an-existing-finance-and-operations-app-instance-and-an-existing-customer-engagement-app-instance"></a><a id="existing-existing"></a>Существующий экземпляр приложения Finance and Operations и существующий экземпляр приложения взаимодействия с клиентами

Настройка подключения двойной записи между существующим экземпляром приложения Finance and Operations и существующим экземпляром приложения взаимодействия с клиентами производится в среде Finance and Operations.

1. Настройте подключение из приложения Finance and Operations.
2. Чтобы синхронизировать существующие данные Common Data Service с приложением Finance and Operations, необходимо [выполнить загрузку](bootstrap-company-data.md) данных Common Data Service, используя трехбуквенный код компании ISO.
3. Выполните функцию **Начальная синхронизация** для тех объектов, для которых требуется синхронизировать данные.

Пример и альтернативный подход см. в разделе [Пример](#example).

## <a name="example"></a>Пример

Пример см. в разделе [Включение сопоставления сущностей "Клиенты v3" — "Контакты"](enable-entity-map.md#example-enabling-the-customers-v3contacts-entity-map)

Для альтернативного подхода, основанного на томах данных в каждой сущности, требующих выполнения первоначальной синхронизации, см. в разделе [Рекомендации по первоначальной синхронизации](initial-sync-guidance.md).
