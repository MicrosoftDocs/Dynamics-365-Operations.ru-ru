---
title: Руководство по настройке двойной записи
description: В этой статье описываются сценарии, поддерживаемые для настройки двойной записи.
author: RamaKrishnamoorthy
ms.date: 06/28/2022
ms.topic: article
audience: Application User, IT Pro
ms.reviewer: sericks
ms.search.region: global
ms.author: ramasri
ms.search.validFrom: 2020-01-06
ms.openlocfilehash: b27cabf495448fcd82edd374bb59e6e5a664c7e9
ms.sourcegitcommit: 87e727005399c82cbb6509f5ce9fb33d18928d30
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/12/2022
ms.locfileid: "9289755"
---
# <a name="guidance-for-dual-write-setup"></a>Руководство по настройке двойной записи

[!include [banner](../../includes/banner.md)]

[!include [preview-banner](../../includes/preview-banner.md)]



Можно настроить подключение с двойной записью между средой для управления финансами и операциями и средой Dataverse.

+ **Среда для управления финансами и операциями** предоставляет основную платформу для **приложений для управления финансами и операциями** (например, Microsoft Dynamics 365 Finance, Dynamics 365 Supply Chain Management, Dynamics 365 Commerce и Dynamics 365 Human Resources).
+ **Среда Dataverse** предоставляет основную платформу для **приложений для взаимодействия с клиентами** (Dynamics 365 Sales, Dynamics 365 Customer Service, Dynamics 365 Field Service, Dynamics 365 Marketing и Dynamics 365 Project Service Automation).


> [!IMPORTANT]
> Модуль "Управление персоналом" в Dynamics 365 Finance поддерживает подключения двойной записи, но приложение Dynamics 365 Human Resources их не поддерживает.

Механизм настройки различается в зависимости от подписки и среды:

+ Для новых экземпляров приложений для управления финансами и операциями настройка подключения с двойной записью начинается с Microsoft Dynamics Lifecycle Services (LCS). Если у вас есть лицензия на Microsoft Power Platform, вы получите новую среду Dataverse, если у клиента ее нет.
+ Для существующих экземпляров приложений для управления финансами и операциями настройка подключения с двойной записью начинается в среде для управления финансами и операциями.

Прежде чем начать двойную запись по сущности, можно выполнить начальную синхронизацию для обработки существующих данных на обеих сторонах: приложений для управления финансами и операциями и приложений для взаимодействия с клиентами. Исходную синхронизацию можно пропустить, если не требуется синхронизация данных между этими двумя средами.

Исходная синхронизация позволяет копировать существующие данные из одного приложения в другое двунаправленно. Существует несколько сценариев настройки, в зависимости от того, какие среды уже имеются, и какие типы данных имеются в них.

Поддерживаются следующие сценарии настройки:

+ [Новый экземпляр приложения для управления финансами и операциями и новый экземпляр приложения взаимодействия с клиентами](#new-new)
+ [Новый экземпляр приложения для управления финансами и операциями и существующий экземпляр приложения взаимодействия с клиентами](#new-existing)
+ [Новый экземпляр приложения для управления финансами и операциями с данными и новый экземпляр приложения для взаимодействия с клиентами](#new-data-new)
+ [Новый экземпляр приложения для управления финансами и операциями с данными и существующий экземпляр приложения для взаимодействия с клиентами](#new-data-existing)
+ [Существующий экземпляр приложения для управления финансами и операциями и новый экземпляр приложения для взаимодействия с клиентами](#existing-new)
+ [Существующий экземпляр приложения для управления финансами и операциями и существующий экземпляр приложения для взаимодействия с клиентами](#existing-existing)

## <a name="a-new-finance-and-operations-app-instance-and-a-new-customer-engagement-app-instance"></a><a id="new-new"></a>Новый экземпляр приложения для управления финансами и операциями и новый экземпляр приложения для взаимодействия с клиентами

Для настройки подключения с двойной записью между новым экземпляром приложения для управления финансами и операциями, в котором отсутствуют данные, и новым экземпляром приложения для взаимодействия с клиентами, выполните действия, указанные в разделе [Настройка двойной записи из Lifecycle Services](lcs-setup.md). После завершения настройки подключения выполняются следующие действия автоматически:

- Подготовлена новая, пустая среда для управления финансами и операциями.
- Будет подготовлен новый пустой экземпляр приложения взаимодействия с клиентами, в котором устанавливается простое решение CRM.
- Для данных компании DAT устанавливается подключение с двойной записью.
- Сопоставления таблиц включаются для синхронизации в реальном времени.

Обе среды затем готовы для синхронизации данных в режиме реального времени.

## <a name="a-new-finance-and-operations-app-instance-and-an-existing-customer-engagement-app-instance"></a><a id="new-existing"></a>Новый экземпляр приложения для управления финансами и операциями и существующий экземпляр приложения для взаимодействия с клиентами

Для настройки подключения с двойной записью между новым экземпляром приложения для управления финансами и операциями, в котором отсутствуют данные, и существующим экземпляром приложения для взаимодействия с клиентами, выполните действия, указанные в разделе [Настройка двойной записи из Lifecycle Services](lcs-setup.md). После завершения настройки подключения выполняются следующие действия автоматически:

- Подготовлена новая, пустая среда для управления финансами и операциями.
- Для данных компании DAT устанавливается подключение с двойной записью.
- Сопоставления таблиц включаются для синхронизации в реальном времени.

Обе среды затем готовы для синхронизации данных в режиме реального времени.

Для синхронизации существующих данных Dataverse с приложением для управления финансами и операциями выполните следующие действия.

1. Создайте новую компанию в приложении для управления финансами и операциями.
2. Добавьте эту компанию в настройку подключения двойной записи.
3. [Выполните начальную загрузку](bootstrap-company-data.md) данных Dataverse с помощью трехбуквенного кода ISO компании.
4. Выполните функцию **Начальная синхронизация** для тех таблиц, для которых требуется синхронизировать данные.

Ссылки на пример и альтернативный подход см. в разделе [Пример](#example) ниже в этой статье.

## <a name="a-new-finance-and-operations-app-instance-that-has-data-and-a-new-customer-engagement-app-instance"></a><a id="new-data-new"></a>Новый экземпляр приложения для управления финансами и операциями с данными и новый экземпляр приложения для взаимодействия с клиентами

Чтобы настроить подключение двойной записи между новым экземпляром приложения для управления финансами и операциями, в котором имеются данные, и новым экземпляром приложения для взаимодействия с клиентами, выполните шаги, приведенные в разделе [Новый экземпляр приложения для управления финансами и операциями и новый экземпляр приложения для взаимодействия с клиентами](#new-new) ранее в этой статье. Если после завершения настройки подключения требуется синхронизировать данные с приложением взаимодействия с клиентами, выполните следующие действия.

1. Откройте приложение для управления финансами и операциями на странице LCS, войдите в систему, затем откройте **Управление данными \> Двойная запись**.
2. Выполните функцию **Начальная синхронизация** для тех таблиц, для которых требуется синхронизировать данные.

Ссылки на пример и альтернативный подход см. в разделе [Пример](#example).

## <a name="a-new-finance-and-operations-app-instance-that-has-data-and-an-existing-customer-engagement-app-instance"></a><a id="new-data-existing"></a>Новый экземпляр приложения для управления финансами и операциями с данными и существующий экземпляр приложения для взаимодействия с клиентами

Чтобы настроить подключение двойной записи между новым экземпляром приложения для управления финансами и операциями, в котором имеются данные, и существующим экземпляром приложения для взаимодействия с клиентами, выполните шаги, приведенные в разделе [Новый экземпляр приложения для управления финансами и операциями и существующий экземпляр приложения для взаимодействия с клиентами](#new-existing) ранее в этой статье. Если после завершения настройки подключения требуется синхронизировать данные с приложением взаимодействия с клиентами, выполните следующие действия.

1. Откройте приложение для управления финансами и операциями на странице LCS, войдите в систему, затем откройте **Управление данными \> Двойная запись**.
2. Выполните функцию **Начальная синхронизация** для тех таблиц, для которых требуется синхронизировать данные.

Для синхронизации существующих данных Dataverse с приложением для управления финансами и операциями выполните следующие действия.

1. Создайте новую компанию в приложении для управления финансами и операциями.
2. Добавьте эту компанию в настройку подключения двойной записи.
3. [Выполните начальную загрузку](bootstrap-company-data.md) данных Dataverse с помощью трехбуквенного кода ISO компании.
4. Выполните функцию **Начальная синхронизация** для тех таблиц, для которых требуется синхронизировать данные.

Ссылки на пример и альтернативный подход см. в разделе [Пример](#example).

## <a name="an-existing-finance-and-operations-app-instance-and-a-new-customer-engagement-app-instance"></a><a id="existing-new"></a>Существующий экземпляр приложения для управления финансами и операциями и новый экземпляр приложения для взаимодействия с клиентами

Настройка подключения двойной записи между существующим экземпляром приложения для управления финансами и операциями и новым экземпляром приложения для взаимодействия с клиентами производится в среде для управления финансами и операциями.

1. [Настройка подключения из приложения для управления финансами и операциями](enable-dual-write.md).
2. Выполните функцию **Начальная синхронизация** для тех таблиц, для которых требуется синхронизировать данные.

Ссылки на пример и альтернативный подход см. в разделе [Пример](#example).

## <a name="an-existing-finance-and-operations-app-instance-and-an-existing-customer-engagement-app-instance"></a><a id="existing-existing"></a>Существующий экземпляр приложения для управления финансами и операциями и существующий экземпляр приложения для взаимодействия с клиентами

Настройка подключения двойной записи между существующим экземпляром приложения для управления финансами и операциями и существующим экземпляром приложения для взаимодействия с клиентами производится в среде для управления финансами и операциями.

1. [Настройка подключения из приложения для управления финансами и операциями](enable-dual-write.md).
2. Чтобы синхронизировать существующие данные Dataverse с приложением для управления финансами и операциями, необходимо выполнить [загрузку данных](bootstrap-company-data.md) Dataverse, используя трехбуквенный код компании ISO.
3. Выполните функцию **Начальная синхронизация** для тех таблиц, для которых требуется синхронизировать данные.

Ссылки на пример и альтернативный подход см. в разделе [Пример](#example).

## <a name="example"></a>Пример

Пример см. в разделе [Включение сопоставления таблиц "Клиенты v3" — "Контакты"](enable-entity-map.md#enable-table-map)

Для альтернативного подхода, основанного на томах данных в каждой сущности, требующих выполнения первоначальной синхронизации, см. в разделе [Рекомендации по первоначальной синхронизации](initial-sync-guidance.md).


[!INCLUDE[footer-include](../../../../includes/footer-banner.md)]
