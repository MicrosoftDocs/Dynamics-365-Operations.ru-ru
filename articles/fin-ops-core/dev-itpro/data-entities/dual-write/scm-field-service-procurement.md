---
title: Интеграция закупок между Supply Chain Management и Field Service
description: В этой теме описывается, как интеграция двойной записи поддерживает создание и обновления заказов на покупку из Supply Chain Management и Field Service.
author: RichardLuan
ms.date: 11/11/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: rhaertle
ms.search.region: Global
ms.author: rhaertle
ms.search.validFrom: 2020-11-11
ms.dyn365.ops.version: Release 10.0.17
ms.openlocfilehash: c50aabf94ae37b7b7b214699160bf958ad3ea9fd
ms.sourcegitcommit: 2cc14f6c537628e79ad2dd17dabf2c246deaa40d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/09/2021
ms.locfileid: "6219795"
---
# <a name="integrate-procurement-between-supply-chain-management-and-field-service"></a><span data-ttu-id="d3b8c-103">Интеграция закупок между Supply Chain Management и Field Service</span><span class="sxs-lookup"><span data-stu-id="d3b8c-103">Integrate procurement between Supply Chain Management and Field Service</span></span>

[!include [banner](../../includes/banner.md)]

[!include [banner](../../includes/preview-banner.md)]

<span data-ttu-id="d3b8c-104">Microsoft Dynamics 365 Supply Chain Management предоставляет надежные функции закупок.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-104">Microsoft Dynamics 365 Supply Chain Management provides robust procurement functionality.</span></span> <span data-ttu-id="d3b8c-105">Dynamics 365 Field Service предлагает аналогичные функции, поддерживающие процессы закупок, связанные с процессом обслуживания.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-105">Dynamics 365 Field Service offers similar functionality that supports the purchasing processes that are associated with the service process.</span></span> <span data-ttu-id="d3b8c-106">Функциональные возможности этих двух приложений интегрированы через двойную запись, и в результирующих вариантах перекрестного функционального использования могут быть включены через сопоставления таблиц, логику решений, представления и формы.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-106">The functionality in these two apps is integrated through dual-write, and the resulting cross-functional use cases are enabled through table mappings, solution logic, views, and forms.</span></span>

<span data-ttu-id="d3b8c-107">Эта интеграция поддерживает создание заказов на покупку и, в большинстве случаев, обновления из обоих приложений.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-107">This integration supports purchase order creation and, in most cases, updates from both apps.</span></span> <span data-ttu-id="d3b8c-108">Однако Supply Chain Management управляет ценами, адресами и поступлением продуктов.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-108">However, Supply Chain Management controls pricing, addresses, and product receipt.</span></span> <span data-ttu-id="d3b8c-109">Для организаций, использующих как Field Service, так и Supply Chain Management, включены некоторые мощные варианты перекрестного функционального использоватия.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-109">Several powerful cross-functional use cases are enabled for organizations that use both Field Service and Supply Chain Management.</span></span> <span data-ttu-id="d3b8c-110">Эти случаи использования позволяют инициировать закупки и отслеживать их в обеих системах.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-110">These use cases enable procurements to be initiated and tracked across both systems.</span></span>

<span data-ttu-id="d3b8c-111">На следующем рисунке показаны таблицы в обеих системах и они сопоставляются друг с другом.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-111">The following illustration shows the tables in both systems and how they are mapped to each other.</span></span> <span data-ttu-id="d3b8c-112">Заказы на покупку в Field Service ссылаются на строку *счета*, тогда как заказы на покупку в Supply Chain Management ссылаются на строку *поставщика*.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-112">Purchase orders in Field Service reference an *account* row, whereas purchase orders in Supply Chain Management reference a *vendor* row.</span></span> <span data-ttu-id="d3b8c-113">Для разрешения интеграции двойная запись использует ссылку, чтобы связать строки *поставщика* со строками *счетов*.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-113">To resolve the integration, dual-write uses a reference to link *vendor* rows with *account* rows.</span></span> <span data-ttu-id="d3b8c-114">Дополнительные сведения см. в разделе [Интегрированный справочник поставщиков](vendor-mapping.md).</span><span class="sxs-lookup"><span data-stu-id="d3b8c-114">For more information, see [Integrated vendor master](vendor-mapping.md).</span></span>

![Сопоставления для закупки](media/scm-field-service-tables.png)

## <a name="prerequisites"></a><span data-ttu-id="d3b8c-116">Необходимые условия</span><span class="sxs-lookup"><span data-stu-id="d3b8c-116">Prerequisites</span></span>

<span data-ttu-id="d3b8c-117">Чтобы интегрировать Supply Chain Management с Field Service, необходимо установить следующие компоненты:</span><span class="sxs-lookup"><span data-stu-id="d3b8c-117">To integrate Supply Chain Management with Field Service, you must install the following components:</span></span>

- <span data-ttu-id="d3b8c-118">Field Service версии 8.8.31.60 или более поздней, для комплексной интеграции заказов на покупку</span><span class="sxs-lookup"><span data-stu-id="d3b8c-118">Field Service version 8.8.31.60 or later, for comprehensive purchase order integration</span></span>
- <span data-ttu-id="d3b8c-119">Supply Chain Management версии 10.0.14 или новее</span><span class="sxs-lookup"><span data-stu-id="d3b8c-119">Supply Chain Management version 10.0.14 or later</span></span>
- <span data-ttu-id="d3b8c-120">Двойная запись для запуска решения OneFSSCM</span><span class="sxs-lookup"><span data-stu-id="d3b8c-120">Dual-write, to run the OneFSSCM solution</span></span>

## <a name="installation-guidelines"></a><span data-ttu-id="d3b8c-121">Руководства по установке</span><span class="sxs-lookup"><span data-stu-id="d3b8c-121">Installation guidelines</span></span>

### <a name="prerequisites"></a><span data-ttu-id="d3b8c-122">Необходимые условия</span><span class="sxs-lookup"><span data-stu-id="d3b8c-122">Prerequisites</span></span>

- <span data-ttu-id="d3b8c-123">**Двойная запись** — дополнительные сведения см. в разделе [Главная страница двойной записи](dual-write-home-page.md#dual-write-setup).</span><span class="sxs-lookup"><span data-stu-id="d3b8c-123">**Dual-write** – For more information, see the [Dual-write home page](dual-write-home-page.md#dual-write-setup).</span></span>
- <span data-ttu-id="d3b8c-124">**Dynamics 365 Field Service** — дополнительные сведения см. в разделе [Как установить Dynamics 365 Field Service](/dynamics365/field-service/install-field-service#step-1-install-dynamics-365-field-service).</span><span class="sxs-lookup"><span data-stu-id="d3b8c-124">**Dynamics 365 Field Service** – For more information, see [How to install Dynamics 365 Field Service](/dynamics365/field-service/install-field-service#step-1-install-dynamics-365-field-service).</span></span>

<span data-ttu-id="d3b8c-125">Когда они включены в Microsoft Dataverse, двойная запись и Field Service обеспечивают несколько слоев решений, расширяющих среду новыми метаданными, формами, представлениями и логикой.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-125">When they are enabled in Microsoft Dataverse, dual-write and Field Service introduce several solution layers that extend the environment with new metadata, forms, views, and logic.</span></span> <span data-ttu-id="d3b8c-126">Эти решения могут быть включены в любом порядке, но обычно они устанавливаются в указанном здесь порядке:</span><span class="sxs-lookup"><span data-stu-id="d3b8c-126">These solutions can be enabled in any order, though you typically install in the order that is given here:</span></span>

1. <span data-ttu-id="d3b8c-127">**Field Service Common** — Field Service Common устанавливается, когда Field Service установлено в среде.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-127">**Field Service Common** – Field Service Common is installed when Field Service is installed in the environment.</span></span>
2. <span data-ttu-id="d3b8c-128">**Field Service (Anchor)** — Field Service (Anchor) устанавливается, когда Field Service установлено в среде.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-128">**Field Service (Anchor)** – Field Service (Anchor) is installed when Field Service is installed in the environment.</span></span> 
3. <span data-ttu-id="d3b8c-129">**Supply Chain Management Extended** — Supply Chain Management Extended устанавливается автоматически, когда в среде включена двойная запись.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-129">**Supply Chain Management Extended** – Supply Chain Management Extended is automatically installed when dual-write is enabled in an environment.</span></span> 
4. <span data-ttu-id="d3b8c-130">**Решение OneFSSCM** — OneFSSCM автоматически устанавливается в зависимости от того, какое решение (Field Service или Supply Chain Management) устанавливается последним.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-130">**OneFSSCM solution** – OneFSSCM is automatically installed by whichever solution (Field Service or Supply Chain Management) is installed last.</span></span>

    - <span data-ttu-id="d3b8c-131">Если решение Field Service уже установлено в среде, и включается двойная запись, которая устанавливает Supply Chain Management Extended, устанавливается OneFSSCM.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-131">If Field Service is already installed in the environment, and you enable dual-write, which installs Supply Chain Management Extended, OneFSSCM is installed.</span></span>
    - <span data-ttu-id="d3b8c-132">Если решение Supply Chain Management Extended уже установлено в среде, и вы устанавливаете Field Service, устанавливается OneFSSCM.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-132">If Supply Chain Management Extended is already installed in the environment, and you install Field Service, OneFSSCM is installed.</span></span>

## <a name="initial-synchronization"></a><span data-ttu-id="d3b8c-133">Начальная синхронизация</span><span class="sxs-lookup"><span data-stu-id="d3b8c-133">Initial synchronization</span></span>

<span data-ttu-id="d3b8c-134">Чтобы создать новые заказы на покупку и работать с существующими заказами на покупку, необходимо синхронизировать ссылочные данные между Supply Chain Management и Dataverse.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-134">To create new purchase orders and work with existing purchase orders, you must sync the reference data between Supply Chain Management and Dataverse.</span></span> <span data-ttu-id="d3b8c-135">Функция первоначальной записи используется для обнаружения отношений таблиц и для поиска таблиц, которые необходимо включить для данной карты.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-135">You use the initial write functionality to detect the table relationships and find the tables that you must enable for a given map.</span></span>

<span data-ttu-id="d3b8c-136">Необходимо выполнить синхронизацию следующих таблиц:</span><span class="sxs-lookup"><span data-stu-id="d3b8c-136">You must sync the following tables:</span></span>

- <span data-ttu-id="d3b8c-137">Шаблоны продуктов</span><span class="sxs-lookup"><span data-stu-id="d3b8c-137">Product templates</span></span>

    <span data-ttu-id="d3b8c-138">При выполнении первоначальной записи вы получите полный список необходимых таблиц.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-138">When you run the initial write, you get a full list of the tables that are required.</span></span> <span data-ttu-id="d3b8c-139">Ниже приведены несколько примеров таких шаблонов:</span><span class="sxs-lookup"><span data-stu-id="d3b8c-139">Here are some examples of these templates:</span></span>

    - <span data-ttu-id="d3b8c-140">Все продукты</span><span class="sxs-lookup"><span data-stu-id="d3b8c-140">All products</span></span>
    - <span data-ttu-id="d3b8c-141">Выпущенные продукты V2</span><span class="sxs-lookup"><span data-stu-id="d3b8c-141">Released products V2</span></span>
    - <span data-ttu-id="d3b8c-142">Уникально идентифицируемые продукты, выпущенные Dataverse</span><span class="sxs-lookup"><span data-stu-id="d3b8c-142">Dataverse released distinct products</span></span>

- <span data-ttu-id="d3b8c-143">Сайты</span><span class="sxs-lookup"><span data-stu-id="d3b8c-143">Sites</span></span>
- <span data-ttu-id="d3b8c-144">Склады</span><span class="sxs-lookup"><span data-stu-id="d3b8c-144">Warehouses</span></span>
- <span data-ttu-id="d3b8c-145">Шаблоны категорий закупок</span><span class="sxs-lookup"><span data-stu-id="d3b8c-145">Procurement categories templates</span></span>

    <span data-ttu-id="d3b8c-146">Ниже приведены несколько примеров таких шаблонов:</span><span class="sxs-lookup"><span data-stu-id="d3b8c-146">Here are some examples of these templates:</span></span>

    - <span data-ttu-id="d3b8c-147">Категории закупаемой продукции</span><span class="sxs-lookup"><span data-stu-id="d3b8c-147">Procurement categories</span></span>
    - <span data-ttu-id="d3b8c-148">Pro</span><span class="sxs-lookup"><span data-stu-id="d3b8c-148">Pro</span></span>
    - <span data-ttu-id="d3b8c-149">Иерархия категорий продуктов</span><span class="sxs-lookup"><span data-stu-id="d3b8c-149">Product category hierarchy</span></span>
    - <span data-ttu-id="d3b8c-150">Назначения категорий продуктов</span><span class="sxs-lookup"><span data-stu-id="d3b8c-150">Product category assignments</span></span>

- <span data-ttu-id="d3b8c-151">Шаблоны поставщиков, такие как "Поставщик V2"</span><span class="sxs-lookup"><span data-stu-id="d3b8c-151">Vendor templates, such as Vendor V2</span></span>
- <span data-ttu-id="d3b8c-152">Шаблоны контактного лица, например, Контакты Dataverse V2</span><span class="sxs-lookup"><span data-stu-id="d3b8c-152">Contact person templates, such as Dataverse Contacts V2</span></span>
- <span data-ttu-id="d3b8c-153">Шаблоны работников, например "Работник"</span><span class="sxs-lookup"><span data-stu-id="d3b8c-153">Worker templates, such as Worker</span></span>

<span data-ttu-id="d3b8c-154">Синхронизация таблиц гарантирует, что все документы (заказы на покупку и поступления продуктов) в Supply Chain Management доступны в Dataverse.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-154">Synchronization of the tables ensures that all documents (purchase orders and product receipts) in Supply Chain Management are available in Dataverse.</span></span>

### <a name="account-and-vendor-tables"></a><span data-ttu-id="d3b8c-155">Таблицы организаций и поставщиков</span><span class="sxs-lookup"><span data-stu-id="d3b8c-155">Account and Vendor tables</span></span>

<span data-ttu-id="d3b8c-156">Заказы на покупку в Field Service полагаются на талицу организаций для отслеживания поставщиков.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-156">Purchase orders in Field Service rely on the Account table to track vendors.</span></span> <span data-ttu-id="d3b8c-157">Таким образом, таблицы Dataverse для заказов на покупку используют организации для отслеживания поставщиков.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-157">Therefore, the Dataverse tables for purchase orders use accounts to track vendors.</span></span> <span data-ttu-id="d3b8c-158">Чтобы учесть эти ключевые различия, необходимо активировать четыре следующих рабочих процесса, чтобы обеспечить синхронизацию организаций и поставщиков:</span><span class="sxs-lookup"><span data-stu-id="d3b8c-158">To accommodate this key difference, the following four workflows must be activated to keep the accounts and vendors in sync:</span></span> 

- <span data-ttu-id="d3b8c-159">Создание поставщиков в таблице "Организации"</span><span class="sxs-lookup"><span data-stu-id="d3b8c-159">Create Vendors in Accounts table</span></span>
- <span data-ttu-id="d3b8c-160">Создание поставщиков в таблице "Поставщики"</span><span class="sxs-lookup"><span data-stu-id="d3b8c-160">Create Vendors in Vendors table</span></span>
- <span data-ttu-id="d3b8c-161">Обновление поставщиков в таблице "Организации"</span><span class="sxs-lookup"><span data-stu-id="d3b8c-161">Update Vendors in Accounts table</span></span>
- <span data-ttu-id="d3b8c-162">Обновление поставщиков в таблице "Поставщики"</span><span class="sxs-lookup"><span data-stu-id="d3b8c-162">Update Vendors in Vendors table</span></span>

<span data-ttu-id="d3b8c-163">Если решение OneFSSCM установлено, так как установлены Field Service и Supply Chain Management Extended, эти рабочие процессы автоматически активируются.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-163">If OneFSSCM is installed, because both Field Service and Supply Chain Management Extended are installed, these workflows are automatically activated.</span></span> <span data-ttu-id="d3b8c-164">Если решение Field Service не установлено, но необходимо интегрировать таблицы заказов на покупку с Dataverse, необходимо активировать эти рабочие процессы.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-164">If Field Service isn't installed, but you want to integrate the purchase order tables with Dataverse, you must activate these workflows.</span></span> <span data-ttu-id="d3b8c-165">В обоих случаях, если вы не начнете с нуля, вам, возможно, придется обеспечить, чтобы все поставщики были созданы как организации в Dataverse перед созданием заказов на покупку.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-165">In both cases, unless you start from scratch, you might have to ensure that all vendors are created as accounts in Dataverse before you create purchase orders.</span></span> <span data-ttu-id="d3b8c-166">В противном случае может произойти ошибка.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-166">Otherwise, errors might occur.</span></span>

### <a name="initial-synchronization"></a><span data-ttu-id="d3b8c-167">Начальная синхронизация</span><span class="sxs-lookup"><span data-stu-id="d3b8c-167">Initial synchronization</span></span>

<span data-ttu-id="d3b8c-168">После выполнения всех необходимых условий, если необходимо, чтобы существующие заказы на покупку и поступления продуктов были доступны в обеих системах, необходимо выполнить начальную синхронизацию следующих шаблонов:</span><span class="sxs-lookup"><span data-stu-id="d3b8c-168">After all the prerequisites are in place, if you want existing purchase orders and product receipts to be available in both systems, you must do an initial synchronization of the following templates:</span></span>

- <span data-ttu-id="d3b8c-169">Заголовок заказа на покупку V2</span><span class="sxs-lookup"><span data-stu-id="d3b8c-169">Purchase Order Header V2</span></span>
- <span data-ttu-id="d3b8c-170">Строка заказа на покупку CDS</span><span class="sxs-lookup"><span data-stu-id="d3b8c-170">CDS Purchase Order Line</span></span>
- <span data-ttu-id="d3b8c-171">Мягкое удаление строки заказа на покупку CDS</span><span class="sxs-lookup"><span data-stu-id="d3b8c-171">CDS Purchase Order Line soft delete</span></span>
- <span data-ttu-id="d3b8c-172">Приход по заказу на покупку</span><span class="sxs-lookup"><span data-stu-id="d3b8c-172">Purchase Order Receipt</span></span>
- <span data-ttu-id="d3b8c-173">Продукт поступления по заказу на покупку</span><span class="sxs-lookup"><span data-stu-id="d3b8c-173">Purchase Order Receipt Product</span></span>

## <a name="mappings-with-logic"></a><span data-ttu-id="d3b8c-174">Сопоставления с логикой</span><span class="sxs-lookup"><span data-stu-id="d3b8c-174">Mappings with logic</span></span>

<span data-ttu-id="d3b8c-175">Интеграция закупок расширяет сопоставление продуктов со следующей логикой, чтобы убедиться в том, что столбец **Тип продукта Field Service** правильно установлен в таблице продуктов в Dataverse:</span><span class="sxs-lookup"><span data-stu-id="d3b8c-175">The procurement integration extends the product mapping with the following logic to ensure that the **Field Service Product Type** column is correctly set in the products table in Dataverse:</span></span>

- <span data-ttu-id="d3b8c-176">Если для параметра **Тип продукта** выбрано значение *Продукт*, для параметра **Группа номенклатурных моделей, Учитываемый в запасах** задано значение *True*, а для параметра **Тип продукта Field Service** задано значение *Запасы*.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-176">If **Product Type** is set to *Product*, and **Item model group, Stocked product** is set to *True*, **Field Service Product Type** is set to *Inventory*.</span></span>
- <span data-ttu-id="d3b8c-177">Если для параметра **Тип продукта** выбрано значение *Продукт*, для параметра **Группа номенклатурных моделей, Учитываемый в запасах** задано значение *False*, а для параметра **Тип продукта Field Service** задано значение *Нескладские*.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-177">If **Product Type** is set to *Product*, and **Item model group, Stocked product** is set to *False*, **Field Service Product Type** is set to *Non-Inventory*.</span></span>
- <span data-ttu-id="d3b8c-178">Если для параметра **Тип продукта** установлено значение *Сервис*, а в поле **Тип продукта Field Service** задано значение *Сервис*.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-178">If **Product Type** is set to *Service*, **Field Service Product Type** is set to *Service*.</span></span>

<span data-ttu-id="d3b8c-179">Кроме того, Dataverse включает в себя логику, сопоставляющую поставщиков со связанными организациями.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-179">In addition, Dataverse includes logic that maps vendors with their related accounts.</span></span> <span data-ttu-id="d3b8c-180">Эта логика устанавливает организацию поставщика накладной по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-180">This logic sets the default invoice vendor account.</span></span> <span data-ttu-id="d3b8c-181">При создании подключаемая логика на стороне сервера устанавливает организацию поставщика накладной по умолчанию от поставщика, который связан с этой организацией.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-181">On create, server-side plug-in logic sets the default invoice vendor account from the vendor that is related to the account.</span></span> <span data-ttu-id="d3b8c-182">Поставщик имеет ссылку на счет накладной, используемый для задания этого значения.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-182">The vendor has a reference to the invoice account that is used to set this value.</span></span>

## <a name="supported-scenarios"></a><span data-ttu-id="d3b8c-183">Поддерживаемые сценарии</span><span class="sxs-lookup"><span data-stu-id="d3b8c-183">Supported scenarios</span></span>

- <span data-ttu-id="d3b8c-184">Заказы на покупку могут создаваться и обновляться пользователями Dataverse.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-184">Purchase orders can be created and updated by Dataverse users.</span></span> <span data-ttu-id="d3b8c-185">Однако процесс и данные контролируются через Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-185">However, the process and data are controlled by Supply Chain Management.</span></span> <span data-ttu-id="d3b8c-186">Ограничения на обновления столбцов заказов на покупку в Supply Chain Management применяются, когда обновления поступают из Field Service.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-186">The constraints on updates to purchase order columns in Supply Chain Management apply when updates come from Field Service.</span></span> <span data-ttu-id="d3b8c-187">Например, невозможно обновить заказ на покупку, если он был завершен.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-187">For example, you can't update a purchase order if it has been finalized.</span></span> 
- <span data-ttu-id="d3b8c-188">Если заказ на покупку контролируется управлением изменениями в Supply Chain Management, пользователь Field Service может обновлять заказ на покупку только тогда, когда статус утверждения Supply Chain Management имеет значение *Черновик*.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-188">If the purchase order is controlled by change management in Supply Chain Management, a Field Service user can update the purchase order only when the Supply Chain Management approval status is *Draft*.</span></span>
- <span data-ttu-id="d3b8c-189">Несколько столбцов управляются только Supply Chain Management и не могут быть обновлены в Field Service.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-189">Several columns are managed only by Supply Chain Management and can't be updated in Field Service.</span></span> <span data-ttu-id="d3b8c-190">Чтобы узнать, какие столбцы невозможно обновить, просмотрите таблицы сопоставления в продукте.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-190">To learn which columns can't be updated, review the mapping tables in the product.</span></span> <span data-ttu-id="d3b8c-191">Для простоты большая часть этих столбцов устанавливается как только для чтения на страницах Dataverse.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-191">For the sake of simplicity, most of these columns are set to read-only on Dataverse pages.</span></span> 

    <span data-ttu-id="d3b8c-192">Например, столбцы сведений о ценах управляются Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-192">For example, the columns for price information are managed by Supply Chain Management.</span></span> <span data-ttu-id="d3b8c-193">Supply Chain Management имеет торговые соглашения, из которых может извлекаться выгода для Field Service.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-193">Supply Chain Management has trade agreements that Field Service can benefit from.</span></span> <span data-ttu-id="d3b8c-194">Такие столбцы , как **Цена за единицу**, **Скидка** и **Чистая сумма**, берутся только из Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-194">columns such as **Unit price**, **Discount**, and **Net amount** come only from Supply Chain Management.</span></span> <span data-ttu-id="d3b8c-195">Чтобы гарантировать синхронизацию цены с Field Service, следует использовать функцию **Синхронизировать** на страницах **Заказ на покупку** и **Продукт заказа на покупку** в Dataverse, когда данные заказа на покупку были введены.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-195">To ensure that the price is synced to Field Service, you should use the **Sync** feature on the **Purchase Order** and **Purchase Order Product** pages in Dataverse when purchase order data has been entered.</span></span> <span data-ttu-id="d3b8c-196">Дополнительные сведения см. в разделе [Синхронизация с данными о закупках по требованию Dynamics 365 Supply Chain Management](#sync-procurement).</span><span class="sxs-lookup"><span data-stu-id="d3b8c-196">For more information, see [Sync with the Dynamics 365 Supply Chain Management procurement data on demand](#sync-procurement).</span></span>

- <span data-ttu-id="d3b8c-197">Столбец **Итоги** доступен только в Field Service, поскольку в Supply Chain Management отсутствуют актуальные итоговые суммы по заказу на покупку.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-197">The **Totals** column is available only in Field Service, because there are no up-to-date totals of the purchase order in Supply Chain Management.</span></span> <span data-ttu-id="d3b8c-198">Итоги в Supply Chain Management рассчитываются на основе нескольких параметров, которые недоступны в Field Service.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-198">The totals in Supply Chain Management are calculated based on multiple parameters that aren't available in Field Service.</span></span>
- <span data-ttu-id="d3b8c-199">Строки заказа на покупку, для которых указана только категория закупаемой продукции или указанный продукт является номенклатурой с типом продукта *Сервис* или типом продукта Field Service, могут быть инициированы только в Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-199">Purchase order lines where only a procurement category is specified, or where the product that is specified is an item of the *Service* product type or Field Service product type, can be initiated only in Supply Chain Management.</span></span> <span data-ttu-id="d3b8c-200">Затем строки синхронизируются с Dataverse и отображаются в Field Service.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-200">The lines are then synced to Dataverse and are visible in Field Service.</span></span>
- <span data-ttu-id="d3b8c-201">Если установлено только решение Field Service, но не Supply Chain Management, столбец **Склад** обязателен в заказе на покупку.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-201">If only Field Service is installed, not Supply Chain Management, the **Warehouse** column is mandatory on the purchase order.</span></span> <span data-ttu-id="d3b8c-202">Однако, если решение Supply Chain Management установлено, это требование ослабляется, поскольку Supply Chain Management допускает строки заказов на покупку, для которых в некоторых ситуациях не указан склад.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-202">However, if Supply Chain Management is installed, this requirement is relaxed, because Supply Chain Management allows for purchase order lines where no warehouse is specified in certain situations.</span></span>
- <span data-ttu-id="d3b8c-203">Поступления продуктов (приходы по заказу на покупку в Dataverse) управляются с помощью Supply Chain Management и не могут быть созданы из Dataverse, если решение Supply Chain Management установлено.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-203">Product receipts (purchase order receipts in Dataverse) are managed by Supply Chain Management and can't be created from Dataverse if Supply Chain Management is installed.</span></span> <span data-ttu-id="d3b8c-204">Поступления продуктов из Supply Chain Management синхронизируются из Supply Chain Management с Dataverse.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-204">The product receipts from Supply Chain Management are synced from Supply Chain Management to Dataverse.</span></span>
- <span data-ttu-id="d3b8c-205">Недопоставка разрешена в Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-205">Under-delivery is allowed in Supply Chain Management.</span></span> <span data-ttu-id="d3b8c-206">Решение OneFSSCM добавляет логику таким образом, чтобы после создания или обновления строки прихода продукта (или продукта прихода заказа на покупку в Dataverse) создается строка журнала запасов в Dataverse для корректировки оставшегося количества, которое находится в заказе для сценариев недопоставки.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-206">The OneFSSCM solution adds logic so that, when the product receipt line (or purchase order receipt product in Dataverse) is created or updated, an inventory journal row is created in Dataverse to adjust the remaining quantity that is on order for under-delivery scenarios.</span></span>

## <a name="unsupported-scenarios"></a><span data-ttu-id="d3b8c-207">Неподдерживаемые сценарии</span><span class="sxs-lookup"><span data-stu-id="d3b8c-207">Unsupported scenarios</span></span>

- <span data-ttu-id="d3b8c-208">Field Service предотвращает добавление строк в отмененный заказ на покупку в Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-208">Field Service prevents lines from being added to a canceled purchase order in Supply Chain Management.</span></span> <span data-ttu-id="d3b8c-209">В качестве временного решения можно изменить статус системы для заказа на покупку в Field Service, а затем добавить новую строку в Field Service или Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-209">As a workaround, you can change the system status of the purchase order in Field Service, and then add the new line in either Field Service or Supply Chain Management.</span></span>
- <span data-ttu-id="d3b8c-210">Хотя строки закупок влияют на уровни складских запасов в обеих системах, эта интеграция не гарантирует выравнивание запасов между Supply Chain Management и Field Service.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-210">Although procurement rows affect inventory levels in both systems, this integration doesn't ensure inventory alignment across Supply Chain Management and Field Service.</span></span> <span data-ttu-id="d3b8c-211">В Field Service и Supply Chain Management имеются другие процессы, которые обновляют уровни запасов.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-211">Both Field Service and Supply Chain Management have other processes that update inventory levels.</span></span> <span data-ttu-id="d3b8c-212">Эти процессы выходят за рамки закупок.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-212">Those processes are outside the scope of procurement.</span></span>

## <a name="status-management"></a><span data-ttu-id="d3b8c-213">Управление состоянием</span><span class="sxs-lookup"><span data-stu-id="d3b8c-213">Status management</span></span>

<span data-ttu-id="d3b8c-214">Состояния заказов на покупку в Field Service отличается от состояний в Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-214">The statuses of purchase orders in Field Service differ from the statuses in Supply Chain Management.</span></span>

### <a name="field-service-purchase-order-and-purchase-order-product-statuses"></a><span data-ttu-id="d3b8c-215">Состояния заказа на покупку и продукта заказа на покупку в Field Service</span><span class="sxs-lookup"><span data-stu-id="d3b8c-215">Field Service purchase order and purchase order product statuses</span></span>

| <span data-ttu-id="d3b8c-216">Заголовок — статус системы</span><span class="sxs-lookup"><span data-stu-id="d3b8c-216">Header – System status</span></span> | <span data-ttu-id="d3b8c-217">Заголовок — статус утверждения</span><span class="sxs-lookup"><span data-stu-id="d3b8c-217">Header - Approval status</span></span> | <span data-ttu-id="d3b8c-218">Статус номенклатуры</span><span class="sxs-lookup"><span data-stu-id="d3b8c-218">Item status</span></span> |
|---|---|---|
| <ul><li><span data-ttu-id="d3b8c-219">Черновой</span><span class="sxs-lookup"><span data-stu-id="d3b8c-219">Draft</span></span></li><li><span data-ttu-id="d3b8c-220">Отправлена</span><span class="sxs-lookup"><span data-stu-id="d3b8c-220">Submitted</span></span></li><li><span data-ttu-id="d3b8c-221">Отменено</span><span class="sxs-lookup"><span data-stu-id="d3b8c-221">Cancelled</span></span></li><li><span data-ttu-id="d3b8c-222">Продукт получен</span><span class="sxs-lookup"><span data-stu-id="d3b8c-222">Product received</span></span></li><li><span data-ttu-id="d3b8c-223">Счет выставлен</span><span class="sxs-lookup"><span data-stu-id="d3b8c-223">Billed</span></span></li></ul> | <ul><li><span data-ttu-id="d3b8c-224">NULL</span><span class="sxs-lookup"><span data-stu-id="d3b8c-224">Null</span></span></li><li><span data-ttu-id="d3b8c-225">Одобрено</span><span class="sxs-lookup"><span data-stu-id="d3b8c-225">Approved</span></span></li><li><span data-ttu-id="d3b8c-226">Аннулировано</span><span class="sxs-lookup"><span data-stu-id="d3b8c-226">Rejected</span></span></li></ul> | <ul><li><span data-ttu-id="d3b8c-227">Ожидает</span><span class="sxs-lookup"><span data-stu-id="d3b8c-227">Pending</span></span></li><li><span data-ttu-id="d3b8c-228">Получение</span><span class="sxs-lookup"><span data-stu-id="d3b8c-228">Received</span></span></li><li><span data-ttu-id="d3b8c-229">Отменено</span><span class="sxs-lookup"><span data-stu-id="d3b8c-229">Cancelled</span></span></li></ul> |

### <a name="supply-chain-management-purchase-order-and-purchase-order-line-statuses"></a><span data-ttu-id="d3b8c-230">Состояния заказа на покупку и строки заказа на покупку в Supply Chain Management</span><span class="sxs-lookup"><span data-stu-id="d3b8c-230">Supply Chain Management purchase order and purchase order line statuses</span></span>

<span data-ttu-id="d3b8c-231">Статусы утверждения строки активны только в том случае, если имеется рабочий процесс строки.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-231">Line approval statuses are active only when there is a line workflow.</span></span>

| <span data-ttu-id="d3b8c-232">Заголовок — статус документов</span><span class="sxs-lookup"><span data-stu-id="d3b8c-232">Header – documents status</span></span> | <span data-ttu-id="d3b8c-233">Заголовок — статус утверждения</span><span class="sxs-lookup"><span data-stu-id="d3b8c-233">Header - Approval status</span></span> | <span data-ttu-id="d3b8c-234">Статус строки</span><span class="sxs-lookup"><span data-stu-id="d3b8c-234">Line status</span></span> | <span data-ttu-id="d3b8c-235">Статус утверждения строки</span><span class="sxs-lookup"><span data-stu-id="d3b8c-235">Line approval status</span></span> |
|---|---|---|---|
| <ul><li><span data-ttu-id="d3b8c-236">Открытый заказ (Невыполненный заказ)</span><span class="sxs-lookup"><span data-stu-id="d3b8c-236">Open Order (Back order)</span></span></li><li><span data-ttu-id="d3b8c-237">Получение</span><span class="sxs-lookup"><span data-stu-id="d3b8c-237">Received</span></span></li><li><span data-ttu-id="d3b8c-238">Оприходовано</span><span class="sxs-lookup"><span data-stu-id="d3b8c-238">Invoiced</span></span></li><li><span data-ttu-id="d3b8c-239">Отменено</span><span class="sxs-lookup"><span data-stu-id="d3b8c-239">Cancelled</span></span></li></ul> | <ul><li><span data-ttu-id="d3b8c-240">Черновой</span><span class="sxs-lookup"><span data-stu-id="d3b8c-240">Draft</span></span></li><li><span data-ttu-id="d3b8c-241">На рассмотрении</span><span class="sxs-lookup"><span data-stu-id="d3b8c-241">In Review</span></span></li><li><span data-ttu-id="d3b8c-242">Одобрено</span><span class="sxs-lookup"><span data-stu-id="d3b8c-242">Approved</span></span></li><li><span data-ttu-id="d3b8c-243">Аннулировано</span><span class="sxs-lookup"><span data-stu-id="d3b8c-243">Rejected</span></span></li><li><span data-ttu-id="d3b8c-244">На внешнем рассмотрении</span><span class="sxs-lookup"><span data-stu-id="d3b8c-244">In External Review</span></span></li><li><span data-ttu-id="d3b8c-245">Подтверждено</span><span class="sxs-lookup"><span data-stu-id="d3b8c-245">Confirmed</span></span></li><li><span data-ttu-id="d3b8c-246">Завершенo</span><span class="sxs-lookup"><span data-stu-id="d3b8c-246">Finalized</span></span></li></ul> | <ul><li><span data-ttu-id="d3b8c-247">Открытый заказ (невыполненный заказ)</span><span class="sxs-lookup"><span data-stu-id="d3b8c-247">Open Order (back order)</span></span></li><li><span data-ttu-id="d3b8c-248">Получение</span><span class="sxs-lookup"><span data-stu-id="d3b8c-248">Received</span></span></li><li><span data-ttu-id="d3b8c-249">Оприходовано</span><span class="sxs-lookup"><span data-stu-id="d3b8c-249">Invoiced</span></span></li><li><span data-ttu-id="d3b8c-250">Отменено</span><span class="sxs-lookup"><span data-stu-id="d3b8c-250">Cancelled</span></span></li></ul> | <ul><li><span data-ttu-id="d3b8c-251">Не отправлено</span><span class="sxs-lookup"><span data-stu-id="d3b8c-251">Not Submitted</span></span></li><li><span data-ttu-id="d3b8c-252">На рассмотрении</span><span class="sxs-lookup"><span data-stu-id="d3b8c-252">In Review</span></span></li><li><span data-ttu-id="d3b8c-253">Одобрено</span><span class="sxs-lookup"><span data-stu-id="d3b8c-253">Approved</span></span></li><li><span data-ttu-id="d3b8c-254">Аннулировано</span><span class="sxs-lookup"><span data-stu-id="d3b8c-254">Rejected</span></span></li></ul> |

<span data-ttu-id="d3b8c-255">К столбцам состояния применяются следующие правила:</span><span class="sxs-lookup"><span data-stu-id="d3b8c-255">The following rules are applied to the status columns:</span></span>

- <span data-ttu-id="d3b8c-256">Статус в Supply Chain Management невозможно обновить из Field Service.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-256">The status in Supply Chain Management can't be updated from Field Service.</span></span> <span data-ttu-id="d3b8c-257">Однако в некоторых случаях статус в Field Service будет обновляться при изменении статуса заказа на покупку в Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-257">However, in some cases, the status in Field Service will be updated when the purchase order status in Supply Chain Management is changed.</span></span>
- <span data-ttu-id="d3b8c-258">Если заказ на покупку в Supply Chain Management находится под управлением изменениями, а изменение обрабатывается, статус утверждения — *Черновик* или *На рассмотрении*.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-258">If a purchase order in Supply Chain Management is under change management, and a change is being processed, the approval status is *Draft* or *In Review*.</span></span> <span data-ttu-id="d3b8c-259">В этом случае статус утверждения в Field Service будет иметь значение *Null*.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-259">In this case, the Field Service approval status will be set to *Null*.</span></span>
- <span data-ttu-id="d3b8c-260">Если статус утверждения заказа на покупку в Supply Chain Management имеет значение *Утверждено*, *На внешнем рассмотрении*, *Подтверждено* или *Завершено*, статус утверждения заказа на покупку в Field Service будет установлен как *Утверждено*.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-260">If the purchase order approval status in Supply Chain Management is set to *Approved*, *In External review*, *Confirmed*, or *Finalized*, the Field Service purchase order approval status will be set to *Approved*.</span></span>
- <span data-ttu-id="d3b8c-261">Если статус утверждения заказа на покупку в Supply Chain Management имеет значение *Отклонено*, , статус утверждения заказа на покупку в Field Service будет установлен как *Отклонено*.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-261">If the purchase order approval status in Supply Chain Management is set to *Rejected*, the Field Service purchase order approval status will be set to *Rejected*.</span></span>
- <span data-ttu-id="d3b8c-262">Если статус заголовка документа в Supply Chain Management изменяется на *Открытый заказ (Невыполненный заказ)*, а заказ на покупку в Field Service имеет статус *Черновик* или *Отменено*, статус заказа на покупку в Field Service будет изменен на *Отправлено*.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-262">If the document header status in Supply Chain Management is changed to *Open order (Back order)*, and the Field Service purchase order status is *Draft* or *Cancelled*, the Field Service purchase order status will be changed to *Submitted*.</span></span>
- <span data-ttu-id="d3b8c-263">Если статус заголовка документа в Supply Chain Management изменяется на *Отменено*, и продукты прихода заказа на покупку в Field Service связаны с заказом на покупку (с помощью продуктов заказа на покупку), поле статуса системы Field Service имеет значение *Отменено*.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-263">If the document header status in Supply Chain Management is changed to *Cancelled*, and no purchase order receipt products in Field Service are associated with the purchase order (via purchase order products), the Field Service system status is set to *Cancelled*.</span></span>
- <span data-ttu-id="d3b8c-264">Если статус строки заказа на покупку в Supply Chain Management имеет значение *Отменено*, статус продукта заказа на покупку в Field Service устанавливается на *Отменено*.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-264">If purchase order line status in Supply Chain Management is *Cancelled*, the purchase order product status in Field Service is set to *Cancelled*.</span></span> <span data-ttu-id="d3b8c-265">Кроме того, если статус строки заказа на покупку в Supply Chain Management изменяется с *Отменено* на *Невыполненный заказ*, статус номенклатуры продукта заказа на покупку в Field Service устанавливается как *Ожидание*.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-265">In addition, if the purchase order line status in Supply Chain Management is changed from *Cancelled* to *Back Order*, the purchase order product item status in Field Service is set to *Pending*.</span></span>

## <a name="sync-with-the-supply-chain-management-procurement-data-on-demand"></a><a id="sync-procurement"></a><span data-ttu-id="d3b8c-266">Синхронизация с данными о закупках Supply Chain Management по требованию</span><span class="sxs-lookup"><span data-stu-id="d3b8c-266">Sync with the Supply Chain Management procurement data on demand</span></span>

<span data-ttu-id="d3b8c-267">Supply Chain Management включает в себя данные о закупках, которые обрабатывают торговые соглашения, скидки и другие сценарии, полагающиеся на вторичные процессы в Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-267">Supply Chain Management includes procurement data that handles trade agreements, discounts, and other scenarios that rely on secondary processes in Supply Chain Management.</span></span> <span data-ttu-id="d3b8c-268">Механизм закупок использует сложные правила для определения наилучшей цены для данного заказа на покупку.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-268">The procurement engine uses complex rules to determine the best price for a given purchase order.</span></span> <span data-ttu-id="d3b8c-269">При использовании двойной записи данные не всегда хранятся синхронно в двух средах, особенно в сценариях, в которых строка была создана или обновлена из Dataverse, и могут запускать дальнейшие процессы в Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-269">When you use dual-write, data isn't always kept synchronous across the two environments, especially in scenarios where the row was created or updated from Dataverse and might trigger follow-on processes in Supply Chain Management.</span></span>

## <a name="sync-the-procurement-data-from-supply-chain-management"></a><span data-ttu-id="d3b8c-270">Синхронизация данных о закупках из Supply Chain Management</span><span class="sxs-lookup"><span data-stu-id="d3b8c-270">Sync the procurement data from Supply Chain Management</span></span>

1. <span data-ttu-id="d3b8c-271">В Dataverse перейдите в раздел **Запасы \> Заказ на покупку**.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-271">In Dataverse, go to **Inventory \> Purchase Order**.</span></span>
2. <span data-ttu-id="d3b8c-272">Выберите **Создать**, чтобы создать новый заказ на покупку, или выберите строку для существующего заказа на покупку.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-272">Select **New** to create a new purchase order, or select the row for an existing purchase order.</span></span>
3. <span data-ttu-id="d3b8c-273">Из заказа на покупку или из строки заказа на покупку.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-273">From the purchase order or purchase order line.</span></span>
4. <span data-ttu-id="d3b8c-274">На панели операций выберите **Синхронизировать**.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-274">On the Action Pane, select **Sync**.</span></span>

<span data-ttu-id="d3b8c-275">Синхронизируются все столбцы из Dataverse и Field Service, к которым предоставлен общий доступ из Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-275">All columns from Dataverse and Field Service that are shared by Supply Chain Management are synced.</span></span>

<span data-ttu-id="d3b8c-276">Ниже приведены ситуации, в которых можно использовать функцию **Синхронизировать**:</span><span class="sxs-lookup"><span data-stu-id="d3b8c-276">Here are the situations where you might use the **Sync** function:</span></span>

- <span data-ttu-id="d3b8c-277">Если выполняется несколько последовательных изменений в одной строке из Dataverse, запустите функцию **Синхронизировать**.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-277">If you make multiple successive changes to the same row from Dataverse, run the **Sync** function.</span></span>
- <span data-ttu-id="d3b8c-278">Если нет уверенности в том, что изменение может быть вторым последовательным изменением из Dataverse, может иметь смысл выполнить функцию **Синхронизировать**.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-278">If you aren't sure whether a change might be the second successive change from Dataverse, it might make sense to run the **Sync** function.</span></span>
- <span data-ttu-id="d3b8c-279">Если получено сообщение об ошибке обновления значения из Supply Chain Management, запустите функцию **Синхронизировать** и повторите попытку обновления в Dataverse.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-279">If you receive an error message about updating a value from Supply Chain Management, run the **Sync** function, and then retry the update in Dataverse.</span></span>

## <a name="cancelling-the-posting-process"></a><span data-ttu-id="d3b8c-280">Отмена процесса разноски</span><span class="sxs-lookup"><span data-stu-id="d3b8c-280">Cancelling the posting process</span></span>

<span data-ttu-id="d3b8c-281">Если процесс разноски поступления продуктов отменен во время обработки, то при двойной записи может быть создана строка поступления продуктов в Dataverse, но не создана строка поступления продуктов в Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-281">If the product receipt posting process is cancelled during processing, then dual-write might create a product receipt row in Dataverse, but not create a product receipt row in Supply Chain Management.</span></span> <span data-ttu-id="d3b8c-282">Такая ситуация возникает потому, что двойная запись не поддерживает распределенные транзакции.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-282">This situation happens because dual-write does not support distributed transactions.</span></span>

## <a name="templates"></a><span data-ttu-id="d3b8c-283">Шаблоны</span><span class="sxs-lookup"><span data-stu-id="d3b8c-283">Templates</span></span>

<span data-ttu-id="d3b8c-284">Следующие шаблоны доступны для интеграции документов, связанных с закупками.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-284">The following templates are available for the integration of procurement-related documents.</span></span>

| <span data-ttu-id="d3b8c-285">Управление цепочкой поставок</span><span class="sxs-lookup"><span data-stu-id="d3b8c-285">Supply Chain Management</span></span> | <span data-ttu-id="d3b8c-286">Field Service</span><span class="sxs-lookup"><span data-stu-id="d3b8c-286">Field Service</span></span> | <span data-ttu-id="d3b8c-287">описание</span><span class="sxs-lookup"><span data-stu-id="d3b8c-287">Description</span></span> |
|---|---|---|
| [<span data-ttu-id="d3b8c-288">Заголовок заказа на покупку V2</span><span class="sxs-lookup"><span data-stu-id="d3b8c-288">Purchase order header V2</span></span>](mapping-reference.md#183) | <span data-ttu-id="d3b8c-289">msdyn\_Purchaseorders</span><span class="sxs-lookup"><span data-stu-id="d3b8c-289">msdyn\_Purchaseorders</span></span> | <span data-ttu-id="d3b8c-290">Эта таблица содержит столбцы, представляющие заголовок заказа на покупку.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-290">This table contains the columns that represent the purchase order header.</span></span> |
| [<span data-ttu-id="d3b8c-291">Объект строки заказа на покупку</span><span class="sxs-lookup"><span data-stu-id="d3b8c-291">Purchase order line entity</span></span>](mapping-reference.md#181) | <span data-ttu-id="d3b8c-292">msdyn\_PurchaseOrderProducts</span><span class="sxs-lookup"><span data-stu-id="d3b8c-292">msdyn\_PurchaseOrderProducts</span></span> | <span data-ttu-id="d3b8c-293">Эта таблица содержит строки, представляющие строки заказа на покупку.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-293">This table contains the rows that represent lines on a purchase order.</span></span> <span data-ttu-id="d3b8c-294">Номер продукта используется для синхронизации.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-294">The product number is used for synchronization.</span></span> <span data-ttu-id="d3b8c-295">Он определяет продукт как единицу хранения запасов (SKU), включая аналитики продукта.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-295">This identifies the product as a stock keeping unit (SKU), including product dimensions.</span></span> <span data-ttu-id="d3b8c-296">Дополнительные сведения об интеграции продукта с Dataverse см. в разделе [Единый подход к работе с продуктами](product-mapping.md).</span><span class="sxs-lookup"><span data-stu-id="d3b8c-296">For more information about product integration with Dataverse, see [Unified product experience](product-mapping.md).</span></span> |
| [<span data-ttu-id="d3b8c-297">Заголовок поступления продуктов</span><span class="sxs-lookup"><span data-stu-id="d3b8c-297">Product receipt header</span></span>](mapping-reference.md#185) | <span data-ttu-id="d3b8c-298">msdyn\_purchaseorderreceipts</span><span class="sxs-lookup"><span data-stu-id="d3b8c-298">msdyn\_purchaseorderreceipts</span></span> | <span data-ttu-id="d3b8c-299">Эта таблица содержит заголовки поступлений продуктов, которые создаются при разноске поступления продуктов в Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-299">This table contains the product receipt headers that are created when a product receipt is posted in Supply Chain Management.</span></span> |
| [<span data-ttu-id="d3b8c-300">Строка поступления продуктов</span><span class="sxs-lookup"><span data-stu-id="d3b8c-300">Product receipt line</span></span>](mapping-reference.md#184) | <span data-ttu-id="d3b8c-301">msdyn\_purchaseorderreceiptproducts</span><span class="sxs-lookup"><span data-stu-id="d3b8c-301">msdyn\_purchaseorderreceiptproducts</span></span> | <span data-ttu-id="d3b8c-302">Эта таблица содержит строки поступлений продуктов, которые создаются при разноске поступления продуктов в Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-302">This table contains the product receipt lines that are created when a product receipt is posted in Supply Chain Management.</span></span> |
| [<span data-ttu-id="d3b8c-303">Объект обратимо удаленной строки заказа на покупку</span><span class="sxs-lookup"><span data-stu-id="d3b8c-303">Purchase order line soft deleted entity</span></span>](mapping-reference.md#182) | <span data-ttu-id="d3b8c-304">msdyn\_purchaseorderproducts</span><span class="sxs-lookup"><span data-stu-id="d3b8c-304">msdyn\_purchaseorderproducts</span></span> | <span data-ttu-id="d3b8c-305">Данная таблица содержит информацию о строках заказа на покупку, которые были обратимо удалены.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-305">This table contains information about purchase order lines that are soft-deleted.</span></span> <span data-ttu-id="d3b8c-306">Строка заказа на покупку в Supply Chain Management может быть обратимо удалена только в том случае, если заказ на покупку был подтвержден или утвержден, если включено управление изменениями.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-306">A purchase order line in Supply Chain Management can be soft-deleted only when the purchase order has been confirmed or approved, if change management is turned on.</span></span> <span data-ttu-id="d3b8c-307">Строка существует в базе данных Supply Chain Management и помечена как **Удалена**.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-307">The row exists in the Supply Chain Management database and is marked as **IsDeleted**.</span></span> <span data-ttu-id="d3b8c-308">Поскольку в Dataverse нет концепции обратимого удаления, важно, чтобы эти данные были синхронизированы с Dataverse.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-308">Because Dataverse doesn't have a concept of soft-deletion, it's important that this information be synced to Dataverse.</span></span> <span data-ttu-id="d3b8c-309">Таким образом, строки с обратимым удалением в Supply Chain Management могут быть автоматически удалены из Dataverse.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-309">In this way, lines that are soft-deleted in Supply Chain Management can automatically be deleted from Dataverse.</span></span> <span data-ttu-id="d3b8c-310">В этом случае логика для удаления строки в Dataverse находится в модуле Supply Chain Management Extended.</span><span class="sxs-lookup"><span data-stu-id="d3b8c-310">In this case, the logic for deleting a line in Dataverse is located in Supply Chain Management Extended.</span></span> |

[!INCLUDE[footer-include](../../../../includes/footer-banner.md)]
