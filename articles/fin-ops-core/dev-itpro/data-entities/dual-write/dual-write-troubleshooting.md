---
title: Общие рекомендации по устранению неполадок
description: Эта тема предоставляет общую информацию по устранению неполадок для интеграции войной записи между приложениями Финансы и операции и Dataverse.
author: RamaKrishnamoorthy
ms.date: 04/07/2020
ms.topic: article
audience: Application User, IT Pro
ms.reviewer: tfehr
ms.search.region: global
ms.author: ramasri
ms.search.validFrom: 2020-03-16
ms.openlocfilehash: 8b5951f9f40179ca0bf31f5cccf1f05a0f968213
ms.sourcegitcommit: 1843235766b6f8cf950a13a310e9f4f2f53c59a4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/07/2022
ms.locfileid: "8554609"
---
# <a name="general-troubleshooting"></a>Общие рекомендации по устранению неполадок

[!include [banner](../../includes/banner.md)]



Эта тема предоставляет общую информацию по устранению неполадок для интеграции войной записи между приложениями Финансы и операции и Dataverse.

> [!IMPORTANT]
> Для некоторых вопросов, связанных с этим разделом, может потребоваться роль системного администратора или учетные данные администратора клиента Microsoft Azure Active Directory (Azure AD). В разделе для каждого выпуска объясняется, требуются ли конкретная роль или учетные данные.

## <a name="enable-and-view-the-plug-in-trace-log-in-dataverse-to-view-error-details"></a><a id="enable-view-trace"></a>Включение и просмотр журнала трассировки подключаемого модуля в Dataverse для просмотра подробных сведений об ошибке

Журналы трассировки могут быть полезны при устранении проблем синхронизации с двойной записью в реальном времени между финансовыми операциями Finance & Operations и Dataverse. Журналы могут предоставлять подробные сведения рабочим группам, которые предоставляют техническую и инженерную поддержку для Dynamics 365. В этой статье описывается, как включить журналы трассировки и как их просматривать. Управление журналами трассировки осуществляется на странице параметров Dynamics 365, и для их просмотра требуются привилегии администратора. 

**Роль, необходимая для включения журнала трассировки и просмотра ошибок:** системный администратор

### <a name="turn-on-the-trace-log"></a>Включение журнала трассировки
Чтобы включить журнал трассировки, выполните следующие действия.

1.  Войдите в Dynamics 365, затем выберите **Параметры** на верхней панели навигации. На странице параметров щелкните **Администрирование**.
2.  На странице администрирования щелкните **Параметры системы**.
3.  Выберите вкладку **Настройка** и подключаемый модуль, затем в разделе трассировки действия пользовательского рабочего потока измените значение в раскрывающемся списке на **Все**. При этом отслеживаются все действия и предоставляется полный набор данных для рабочих групп, которые должны просматривать потенциальные проблемы.

> [!NOTE]
> Если задать в раскрывающемся списке значение **Исключение**, будет предоставляться информация трассировки только при возникновении исключений (ошибок).

После включения данные в журналы трассировки подключаемых модулей будут продолжать собираться до тех пор, пока они не будут отключены вручную путем возврата в это местоположение и выбора значения **Откл.**

### <a name="view-the-trace-log"></a>Просмотр журнала трассировки
Чтобы просмотреть журнал трассировки, выполните следующие действия.

1. На странице параметров Dynamics 365 выберите **Параметры** на верхней панели навигации. 
2. Выберите пункт **Журнал трассировки подключаемых модулей** в разделе **Настройки** страницы.
3. Можно найти записи в списке журналов трассировки на основе имени типа и/или имя сообщения.
4. Откройте нужную запись, чтобы просмотреть полный журнал. Раздел блока сообщений в разделе выполнения обеспечит доступную информацию для подключаемого модуля. Если доступны, также будут предоставлены сведения об исключении. 

Можно скопировать содержимое журналов трассировки и вставить его в другое приложение, например в Блокнот или другие средства для просмотра журналов или текстовых файлов, чтобы было удобно просматривать все содержимое. 

## <a name="enable-debug-mode-to-troubleshoot-live-synchronization-issues-in-finance-and-operations-apps"></a>Включение режима отладки для устранения проблем с синхронизацией приложений Финансы и операции в режиме реального времени

**Роль, требуемая для просмотра ошибок:** системный администратор

Ошибки двойной записи, возникающие в Dataverse, могут проявляться в приложении Финансы и операции. Чтобы включить подробное протоколирование ошибок, выполните следующие действия:

1. Для всех конфигураций проектов в приложении Финансы и операции есть флаг **IsDebugMode** в таблице **DualWriteProjectConfiguration**.
2. Откройте **DualWriteProjectConfiguration** с помощью надстройки Excel. Чтобы использовать надстройку, включите режим конструктора в надстройке Финансы и операции Excel и добавьте **DualWriteProjectConfiguration** на лист. Дополнительные сведения см. в разделе [Просмотр и обновление данных сущностей с помощью Excel](../../office-integration/use-excel-add-in.md).
3. Установите для **IsDebugMode** в проекте значение **Да**.
4. Выполните сценарий, создающий ошибки.
5. Подробные журналы хранятся в таблице **DualWriteErrorLog**.
6. Для поиска данных в обозревателе таблиц используется следующая ссылка: `https://999aos.cloudax.dynamics.com/?mi=SysTableBrowser&tableName=DualWriteErrorLog` с заменой `999` при необходимости.
7. Снова обновите после [KB 4595434](https://fix.lcs.dynamics.com/Issue/Details?kb=4595434&bugId=527820&dbType=3&qc=98e5dc124ac125c57ad633d885ac612aea3ddb8f4abf9d71ab3aa354f2e06cbe), которое доступно для обновлений платформы 37 и более поздних версий. Если это исправление установлено, в режиме отладки будут записаны дополнительные журналы.  

## <a name="check-synchronization-errors-on-the-virtual-machine-for-the-finance-and-operations-app"></a>Проверка ошибок синхронизации на виртуальной машине для приложения Финансы и операции

**Роль, требуемая для просмотра ошибок:** системный администратор

1. Выполните вход в Microsoft Dynamics Lifecycle Services (LCS).
2. Откройте проект LCS, который вы выбрали для выполнения тестирования двойной записи.
3. Выберите плитку **Размещенные в облаке среды**.
4. Используйте удаленный рабочий стол для входа в виртуальную машину для приложения Финансы и операции. Используйте локальную учетную запись, отображаемую в LCS.
5. Откройте средство просмотра событий.
6. Выберите **Журналы приложений и служб \> Microsoft \> Dynamics \> AX-DualWriteSync \> Операционные**.
7. Просмотрите список недавних ошибок.

## <a name="dual-write-ui-landing-page-showing-blank"></a>Целевая страница пользовательского интерфейса двойной записи отображается пустой
При открытии страницы двойной записи в браузере Microsoft Edge или Google Chrome домашняя страница не загружается, и отображается пустая страница или ошибка, например "Что-то пошло не так".
В инструментах разработчика появляется сообщение об ошибке в журналах консоли:

>bundle.eed39124e62c58ef34d2.js:37 DOMException: Не удалось прочитать свойство 'sessionStorage' из 'Window': Доступ запрещен для этого документа. в t.storeInSessionStorage (https://dataintegrator.trafficmanager.net/bundle.eed39124e62c58ef34d2.js:16:136860 ) в новом t (https://dataintegrator.trafficmanager.net/bundle.eed39124e62c58ef34d2.js:69:20103 ) в ci (https://dataintegrator.trafficmanager.net/bundle.eed39124e62c58ef34d2.js:37:44115 ) в Eo (https://dataintegrator.trafficmanager.net/bundle.eed39124e62c58ef34d2.js:37:58728 ) в jo (https://dataintegrator.trafficmanager.net/bundle.eed39124e62c58ef34d2.js:37:65191 ) в Nr (https://dataintegrator.trafficmanager.net/bundle.eed39124e62c58ef34d2.js:37:84692 ) в Or (https://dataintegrator.trafficmanager.net/bundle.eed39124e62c58ef34d2.js:37:85076 ) в Ss (https://dataintegrator.trafficmanager.net/bundle.eed39124e62c58ef34d2.js:37:91750 ) в vs (https://dataintegrator.trafficmanager.net/bundle.eed39124e62c58ef34d2.js:37:91130 ) в hs (https://dataintegrator.trafficmanager.net/bundle.eed39124e62c58ef34d2.js:37:90151 )

Пользовательский интерфейс использует "хранилище сеанса" браузера для хранения некоторых значений свойств, используемых для загрузки домашней страницы. Чтобы это работало, необходимо, чтобы в браузере для сайта были разрешены сторонние файлы cookie. Ошибка говорит о том, что пользовательский интерфейс не имеет доступа к хранилищу сеанса. Возможны два сценария, в которых может возникнуть эта проблема:

1.  Вы открываете пользовательский интерфейс в режиме "Инкогнито" в Microsoft Edge/Chrome, а сторонние файлы cookie в режиме "Инкогнито" заблокированы.
2.  Вы заблокировали файлы cookie сторонних разработчиков в Microsoft Edge/Chrome.

### <a name="mitigation"></a>Снижение риска
Файлы cookie сторонних разработчиков должны быть разрешены в параметрах браузера.

### <a name="google-chrome-browser"></a>Браузер Google Chrome
1-й вариант:
1.  Перейдите к параметрам, введя chrome://settings/ в адресной строке, затем перейдите к разделу "Конфиденциальность и безопасность -> Файлы cookie и другие данные сайтов".
2.  Выберите "Разрешить все файлы сookie". Если это не требуется, перейдите ко второму варианту.

2-ой вариант:
1.  Перейдите к параметрам, введя chrome://settings/ в адресной строке, затем перейдите к разделу "Конфиденциальность и безопасность -> Файлы cookie и другие данные сайтов".
2.  Если выбрано значение "Блокировать файлы cookie сторонних сайтов в режиме инкогнито" или "Блокировать сторонние файлы cookie", перейдите на страницу "Сайты, которые всегда могут использовать файлы cookie" и щелкните **Добавить**. 
3.  Добавьте имя сайта приложений Finance & Operations — https://<ваш_экземпляр_FinOp>.cloudax.dynamics.com. Убедитесь, что установлен флажок для поля "Все файлы cookie, только на этом сайте". 

### <a name="microsoft-edge-browser"></a>Браузер Microsoft Edge
1.  Перейдите к пункту "Настройки -> Разрешения сайтов -> Файлы cookie и данные сайта.
2.  Отключите параметр "Блокировать сторонние файлы cookie".  

## <a name="unlink-and-link-another-dataverse-environment-from-a-finance-and-operations-app"></a>Как отвязать среду Dataverse от приложения Финансы и операции и привязать другую среду

**Роль, необходимая для отмены связи со средой:** системный администратор для приложения Финансы и операции или Dataverse.

1. Войдите в приложение Финансы и операции.
2. Выберите **Рабочие области \> Управление данными** и выберите плитку **Двойная запись**.
3. Выберите все запущенные отображения, затем выберите **Остановить**.
4. Выберите **Удалить связь со средой**.
5. Выберите **Да**, чтобы подтвердить операцию.

Теперь можно связать новую среду.

## <a name="unable-to-view-the-sales-order-line-information-form"></a>Не удается просмотреть форму сведений о строке заказа на продажу 

При создании заказа на продажу в Dynamics 365 Sales при нажатии кнопки **+ Добавить продукты** вы можете быть перенаправлены в форму строки заказа Dynamics 365 Project Operations. Из этой формы невозможно просмотреть форму **Сведения** строки заказа на продажу. Параметр для **Сведений** не отображается в раскрывающемся списке в поле **Создать строку заказа**. Это происходит из-за того, что приложение Project Operations было установлено в вашей среде.

Для повторного включения параметра формы **Сведения** выполните следующие действия:

1. Перейдите к таблице **Строка заказа**.
2. Найдите форму **Сведения** в узле форм.
3. Выберите форму **Сведения** и щелкните **Включить роли безопасности**.
4. Измените параметр безопасности на **Показывать всем**.

## <a name="how-to-enable-and-save-network-trace-so-that-traces-can-be-attached-to-support-tickets"></a>Как включить и сохранить трассировку сети, чтобы трассировки можно было присоединить к запросам в службу поддержки

Группе поддержки может потребоваться просмотреть трассировки сети для устранения некоторых проблем. Чтобы создать трассировку сети, выполните следующие действия:

### <a name="google-chrome-browser"></a>Браузер Google Chrome

1. На открытой вкладке нажмите клавишу **F12** или выберите **Средства для разработчиков**, чтобы открыть средства разработчика.
2. Откройте вкладку **Сеть** и введите **integ** в текстовом поле фильтра.
3. Выполните сценарий и обратите внимание на запросы, регистрируемые в журнале.
4. Щелкните записи правой кнопкой мыши и выберите **Сохранить все как HAR с содержимым**.

### <a name="microsoft-edge-browser"></a>Браузер Microsoft Edge

1. На открытой вкладке нажмите клавишу **F12** или выберите **Средства для разработчиков**, чтобы открыть средства разработчика.
2. Откройте вкладку **Сеть**.
3. Выполните сценарий.
4. Выберите **Сохранить**, чтобы экспортировать результаты как HAR.

[!INCLUDE[footer-include](../../../../includes/footer-banner.md)]
