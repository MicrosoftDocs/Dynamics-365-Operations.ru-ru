---
title: Единый подход к работе с продуктами
description: Эта статья описывает интеграцию данных продуктов между приложениями для управления финансами и операциями и Dataverse.
author: t-benebo
ms.date: 06/23/2022
ms.topic: article
audience: Application User, IT Pro
ms.reviewer: tfehr
ms.search.region: global
ms.author: ramasri
ms.search.validFrom: 2019-07-15
ms.openlocfilehash: 1546cdaf3c63a7ff9a330ae8609595aaf48fbc48
ms.sourcegitcommit: 6781fc47606b266873385b901c302819ab211b82
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/02/2022
ms.locfileid: "9111497"
---
# <a name="unified-product-experience"></a>Единый подход к работе с продуктами

[!include [banner](../../includes/banner.md)]



Если бизнес-экосистема состоит из приложений Dynamics 365, таких как Finance, Supply Chain Management и Sales, бизнес часто использует эти приложения для исходных данных о продуктах. Это обусловлено тем, что эти приложения предоставляют надежную инфраструктуру продуктов, дополненную сложными концепциями ценообразования и точными данными запасов в наличии. Бизнесы, использующие внешнюю систему управления жизненным циклом продукции (PLM) в качестве источников данных продуктов, могут канализировать продукты из приложений для управления финансами и операциями в другие приложения Dynamics 365. Унифицированный опыт работы с продуктом привносит интегрированную модель данных продуктов в Dataverse, чтобы все пользователи приложений, включая пользователей Power Platform, могли воспользоваться богатыми данными о продуктах, поступающим из приложений для управления финансами и операциями.

Ниже приведена модель данных о продукции из Sales.

![Модель данных для продуктов в CE.](media/dual-write-product-4.jpg)

Ниже приведена модель данных о продукции из приложений для управления финансами и операциями.

![Модель данных для продуктов в управлении финансами и операциями.](media/dual-write-products-5.jpg)

Эти две модели данных продукции были интегрированы в Dataverse, как показано ниже.

![Модель данных для продуктов в приложениях Dynamics 365.](media/dual-write-products-6.jpg)

Сопоставления таблиц с двойной записью для продуктов были спроектированы так, чтобы передавать данные только в одном направлении, и это происходит почти в режиме реального времени из приложений для управления финансами и операциями в Dataverse. Однако инфраструктура продуктов была сделана открытой, чтобы сделать ее двунаправленной, если это необходимо. Хотя клиенты могут настроить ее, это ваша ответственность, корпорация Майкрософт не рекомендует использовать этот подход.

## <a name="templates"></a>Шаблоны

Информация о продукте содержит все сведения, имеющие отношение к продукту и его определению, такие как аналитики продукта или аналитики отслеживания и хранения. Как показано в следующей таблице, для синхронизации продуктов и связанных сведений создается коллекция сопоставлений таблиц.

Приложения Finance and Operations | Другие приложения Dynamics 365 | Описание
-----------------------|--------------------------------|---
[Все продукты](mapping-reference.md#138) | msdyn_globalproducts | Таблица всех продуктов содержит все продукты, доступные в приложениях для управления финансами и операциями, как выпущенные, так и невыпущенные продукты.
[Уникально идентифицируемые продукты, выпущенные CDS](mapping-reference.md#213) | Продукт | Таблица **Продукт** содержит столбцы, определяющие продукт. Он включает в себя отдельные продукты (продукты с подтипом продукта) и варианты продукта. Сопоставления представлены в таблице ниже.
[Цвета](mapping-reference.md#170) | msdyn\_productcolors
[Конфигурации](mapping-reference.md#171) | msdyn\_productconfigurations
[Параметры заказа по умолчанию](mapping-reference.md#172) | msdyn_productdefaultordersettings |
[Категории продуктов](mapping-reference.md#166) | msdyn_productcategories | Каждая из категорий продуктов и информации о ее структуре и характеристиках содержится в таблице категории продукта.
[Назначения категорий продуктов](mapping-reference.md#167) | msdyn_productcategoryassignments | Чтобы назначить продукт для категории, можно использовать таблицу назначений категорий продуктов.
[Иерархии категорий продуктов](mapping-reference.md#168) | msdyn_productcategoryhierarchies | Иерархия продуктов используется для классификации или группировки продуктов. Иерархии категорий доступны в Dataverse при использовании таблицы иерархии категорий продуктов.
[Роли иерархии категорий продуктов](mapping-reference.md#169) | msdyn_productcategoryhierarchyroles | Иерархии продуктов могут использоваться для разных ролей в D365 для управления финансами и операциями. Они указывают, какая категория используется в каждой роли, используется таблица роли категории продукта.
[Параметры заказа продуктов по умолчанию V2](mapping-reference.md#175) | msdyn_productspecificdefaultordersettings |
[Группы аналитик продукта](mapping-reference.md#173) | msdyn\_productdimensiongroups | Группа аналитик продукта, определяющая, какие аналитики продукта определяют продукт.
[Цвета шаблонов продуктов](mapping-reference.md#187) | msdyn_sharedproductcolors | Таблица **Общий цвет продуктов** указывает цвета, которые может иметь конкретный шаблон продукта. Эта концепция переносится в Dataverse для обеспечения согласованности данных.
[Конфигурации шаблонов продуктов](mapping-reference.md#188) | msdyn_sharedproductconfigurations | Таблица **Общая конфигурация продуктов** указывает конфигурации, которые может иметь конкретный шаблон продукта. Эта концепция переносится в Dataverse для обеспечения согласованности данных.
[Размеры шаблонов продуктов](mapping-reference.md#190) | msdyn_sharedproductsizes | Таблица **Общий размер продуктов** указывает размеры, которые может иметь конкретный шаблон продукта. Эта концепция переносится в Dataverse для обеспечения согласованности данных.
[Стили шаблонов продуктов](mapping-reference.md#191) | msdyn_sharedproductstyles | Таблица **Общий стиль продуктов** указывает стили, которые может иметь конкретный шаблон продукта. Эта концепция переносится в Dataverse для обеспечения согласованности данных.
[Штрихкод, связанный с номером продукта](mapping-reference.md#164) | msdyn\_productbarcodes | Штрих-коды продукта используются для уникальной идентификации продуктов.
[Преобразования единиц измерения для определенного продукта](mapping-reference.md#176) | msdyn_productspecificunitofmeasureconversions |
[Выпущенные продукты V2](mapping-reference.md#189) | msdyn\_sharedproductdetails | Таблица **msdyn\_sharedproductdetails** содержит столбцы из приложений для управления финансами и операциями, определяющие продукт, которые содержат финансовые сведения и сведения об управлении данным продуктом.
[Размеры](mapping-reference.md#174) | msdyn\_productsizes
[Группы аналитик хранения](mapping-reference.md#177) | msdyn_productstoragedimensiongroups | Группа аналитик хранения продукта представляет метод, используемый для определения местоположения продукта на складе.
[Стили](mapping-reference.md#178) | msdyn\_productstyles
[Группы аналитик отслеживания](mapping-reference.md#179) | msdyn_producttrackingdimensiongroups | Группа аналитик отслеживания продукта представляет метод, используемый для отслеживания продукта на складе.
[Единицы измерения](mapping-reference.md#219) | uoms
[Пересчеты единиц измерения](mapping-reference.md#199) | msdyn_ unitofmeasureconversions

## <a name="integration-of-products"></a>Интеграция продуктов

В этой модели продукт представлен комбинацией двух таблиц в Dataverse: **Продукт** и **msdyn\_sharedproductdetails**. В то время как первая таблица содержит определение продукта (уникальный идентификатор продукта, название продукта и описание), вторая таблица содержит столбцы, которые хранятся на уровне продукта. Сочетание этих двух таблиц используется для определения продукта в соответствии с понятием единицы складского хранения (SKU). Каждый выпущенный продукт будет иметь свою информацию в упомянутых таблицах (продукт и общие сведения о продукте). Для отслеживания всех продуктов (выпущенных и не выпущенных) используется таблица **Глобальные продукты**.

Поскольку продукт представлен в виде SKU, концепция отдельных продуктов, шаблонов продуктов и вариантов продуктов может быть реализована в Dataverse следующим образом:

- **Продукты с подтипом продукта** — это продукты, которые определены сами по себе. Не были определены никакие аналитики. Примером является конкретная книга. Для этих продуктов одна строка создается в таблице **Продукт** и одна строка создается в таблице **msdyn\_sharedproductdetails**. Строка семейства продуктов не создается.
- **Шаблоны продукта** используются как универсальные продукты, содержащие определение и правила, определяющие поведение в бизнес-процессах. На основе этих определений могут быть созданы уникально идентифицируемые продукты, известные как варианты продукта. Например, футболка — это шаблон продукта, который может иметь цвет и размер в качестве аналитик. Варианты могут быть выпущены с различной комбинацией этих аналитик, такие как маленькая синяя футболка или средняя зеленая футболка. В интеграции в таблице продуктов создается одна строка для каждого варианта. Эта строка содержит сведения, специфичные для варианта, такие как различные аналитики. Общая информация о продукте хранится в таблице **msdyn\_sharedproductdetails**. (Эта общая информация хранится в шаблоне продукта.) Информация шаблона продукта синхронизируется с Dataverse в момент создания шаблона выпущенного продукта (но до выпуска вариантов).
- **Уникально идентифицируемые продукты** обозначают все продукты подтипа продуктов и на все варианты продукта.

![Модель данных для продуктов.](media/dual-write-product.png)

При включенной функции двойной записи продукты из управления финансами и операциями будут синхронизироваться в других продуктах Dynamics 365 в состоянии **Черновик**. Они добавляются в первый прайс-лист с одной и той же валютой, используемой в приложении взаимодействия с клиентами, и в алфавитном порядке сортируются в имени прайс-листа. Другими словами, они добавляются к первому прайс-листу в приложении Dynamics 365, который соответствует валюте таблицы юридического лица, в котором продукт выпущен в приложении для управления финансами и операциями. Если прайс-лист для данной валюты отсутствует, автоматически создается прайс-лист, и продукт назначается для него.

Текущая реализация подключаемых модулей двойной связи, которая связывает прайс-лист по умолчанию с единицей, выполняет поиск валюты, связанной с приложением для управления финансами и операциями, и ищет первый прайс-лист в приложении взаимодействия с клиентами, используя алфавитную сортировку по имени прайс-списка. Чтобы задать прайс-лист по умолчанию для конкретной валюты, когда для этой валюты имеется несколько прайс-листы, необходимо обновить имя прайс-листа до имени, которое более раннее в алфавитном порядке, чем любые другие прайс-листы для этой же валюты. Если нет прайс-листа для данной валюты, создается новый.

По умолчанию продукты из приложений для управления финансами и операциями синхронизируются с другими приложениями Dynamics 365 в состоянии **Черновик**. Для синхронизации продукта с состоянием **Активный**, чтобы его можно было напрямую использовать в предложениях с расценками по заказам на продажу, например, следует выбрать следующую настройку: на вкладке **Система > Администрирование > Администрирование системы > Параметры системы > Sales** выберите **Создавать продукты в активном состоянии = да**.

Когда продукты синхронизируются, необходимо ввести значение для поля **Ед. изм. продажи** в приложении для управления финансами и операциями, поскольку оно является обязательным полем в Sales.

Создание семейств продуктов из Dynamics 365 Sales не поддерживается при синхронизации двойной записи продуктов.

Синхронизация продуктов происходит из приложения для управления финансами и операциями для Dataverse. Это означает, что значения столбцов таблицы продукта можно изменить в Dataverse, но если синхронизация активирована (при изменении столбца продукта в приложении для управления финансами и операциями), это приведет к перезаписи значений в Dataverse.

Приложения Finance and Operations | Приложения для взаимодействия с клиентами |
---|---
[Уникально идентифицируемые продукты, выпущенные CDS](mapping-reference.md#213) | Продукт |
[Выпущенные продукты V2](mapping-reference.md#189) | msdyn_sharedproductdetails |
[Все продукты](mapping-reference.md#138) | msdyn_globalproducts |

## <a name="product-dimensions"></a>Аналитики продуктов

Аналитики продукта — это характеристики, которые определяют вариант продукта. Четыре аналитики продукта (цвет, размер, стиль и конфигурация) также сопоставляются с Dataverse для определения вариантов продукта. На следующем рисунке показана модель данных для аналитики продукта "Цвет". Эта же модель применяется к размерам, стилям и конфигурациям.

![Модель данных для аналитик продукта.](media/dual-write-product-two.png)

Приложения Finance and Operations | Приложения для взаимодействия с клиентами |
---|---
[Цвета](mapping-reference.md#170) | msdyn\_productcolors
[Размеры](mapping-reference.md#174) | msdyn\_productsizes
[Стили](mapping-reference.md#178) | msdyn\_productstyles
[Конфигурации](mapping-reference.md#171) | msdyn\_productconfigurations

Если у продукта имеются различные аналитики продукта (например, шаблон продукта имеет размеры и цвет как аналитики продукта), каждый уникально идентифицируемый продукт (то есть, каждый вариант продукта) определяется как сочетание этих аналитик продукта. Например, продукт с номером B0001 является очень маленькой черной футболкой, а продукт номер B0002 — маленькой черной футболкой. В этом случае определяются существующие комбинации аналитик продукта. Например, футболка из предыдущего примера может быть очень маленькой и черной, маленькой и черной, средней и черной или большой и черной, но не может быть очень большой и черной. Иными словами, задаются аналитики продукта, которые может принимать шаблон продукта, и варианты могут быть выпущены на основе этих значений.

Для отслеживания аналитик продукта, которые может принимать шаблон продукта, создаются и сопоставляются следующие таблицы в Dataverse для каждой аналитики продукта. Для получения дополнительных сведений см. раздел [Обзор сведений о продуктах](../../../../supply-chain/pim/product-information.md).

Приложения Finance and Operations | Приложения для взаимодействия с клиентами |
---|---
[Цвета шаблонов продуктов](mapping-reference.md#187) | msdyn_sharedproductcolors |
[Конфигурации шаблонов продуктов](mapping-reference.md#188) | msdyn_sharedproductconfigurations |
[Размеры шаблонов продуктов](mapping-reference.md#190) | msdyn_sharedproductsizes |
[Стили шаблонов продуктов](mapping-reference.md#191) | msdyn_sharedproductstyles |
[Штрихкод, связанный с номером продукта](mapping-reference.md#164) | msdyn\_productbarcodes |

## <a name="default-order-settings-and-product-specific-default-order-settings"></a>Настройки заказа по умолчанию и настройки заказа по умолчанию для определенных продуктов

Параметры заказа по умолчанию определяет сайт и склад, с которого будут забираться или на которых будут складироваться продукты, минимальное, максимальное, кратное и стандартное количества, который будут использоваться для торговли или управление запасами, значения времени упреждения, флаг остановки и метод обещанного заказа. Эти сведения будут доступны в Dataverse с использованием используемых по умолчанию настроек заказов и объекта специфичных для продукта настроек заказа по умолчанию. Дополнительные сведения об этой функции см. в [статье "Параметры заказа по умолчанию"](../../../../supply-chain/production-control/default-order-settings.md).

Приложения Finance and Operations | Приложения для взаимодействия с клиентами |
---|---
[Параметры заказа по умолчанию](mapping-reference.md#172) | msdyn_productdefaultordersettings |
[Параметры заказа продуктов по умолчанию V2](mapping-reference.md#175) | msdyn_productspecificdefaultordersettings |

## <a name="unit-of-measure-and-unit-of-measure-conversions"></a>Единицы измерения и преобразования единиц измерения

Единицы измерения и соответствующее им преобразование будут доступны в Dataverse в соответствии с моделью данных, показанной на диаграмме.

![Модель данных для единицы измерения.](media/dual-write-product-three.png)

Концепция единицы измерения интегрирована между приложениями для управления финансами и операциями и другими приложениями Dynamics 365. Для каждого класса единиц измерения в приложении для управления финансами и операциями группа единиц измерения создается в приложении Dynamics 365, которая содержит единицы измерения, принадлежащие к классу единиц измерения. Базовая единица измерения по умолчанию также создается для каждой группы единиц измерения.

Приложения Finance and Operations | Приложения для взаимодействия с клиентами |
---|---
[Преобразования единиц измерения для определенного продукта](mapping-reference.md#176) | msdyn_productspecificunitofmeasureconversions |
[Единицы измерения](mapping-reference.md#219) | uoms
[Пересчеты единиц измерения](mapping-reference.md#199) | msdyn_ unitofmeasureconversions

## <a name="initial-synchronization-of-units-data-matching-between-finance-and-operations-and-dataverse"></a>Начальная синхронизация данных единиц измерения между приложениями для управления финансами и операциями и Dataverse

### <a name="initial-synchronization-of-units"></a>Начальная синхронизация единиц

Если включена двойная запись, единицы из приложений для управления финансами и операциями синхронизируются с другими приложениями Dynamics 365. Группы единиц измерения, синхронизируемые из приложений для управления финансами и операциями в Dataverse, имеют флаг, который указывает на то, что они "управляются извне".

### <a name="matching-units-and-unit-classesgroups-data-from-finance-and-operations-and-other-dynamics-365-apps"></a>Сопоставление единиц измерения и данных классов единиц измерения или групп из приложений для управления финансами и операциями и других приложений Dynamics 365

Во-первых, важно отметить, что ключ интеграции для единицы — msdyn_symbol. Таким образом, это значение должно быть уникальным в Dataverse или в других приложениях Dynamics 365. Так как в других приложениях Dynamics 365 используется пара "код группы единиц" и "имя", определяющие уникальность единицы измерения, необходимо учитывать другие ситуации при сопоставлении данных единиц между приложениями для управления финансами и операциями и Dataverse.

Для сопоставления или перекрывания единиц в приложениях для управления финансами и операциями и других приложениях Dynamics 365:

+ **Единица измерения принадлежит к группе единиц измерения в других приложениях Dynamics 365, которая соответствует связанному классу единиц измерения в приложениях для управления финансами и операциями**. В этом случае столбец msdyn_symbol в других приложениях Dynamics 365 должен быть заполнен символом единицы из приложений для управления финансами и операциями. Следовательно, когда данные будут сопоставлены, группа единиц измерения будет установлена как "Управляется извне" в других приложениях Dynamics 365.
+ **Единица измерения принадлежит к группе единиц измерения в других приложениях Dynamics 365, которая не соответствует связанному классу единиц в приложениях для управления финансами и операциями (нет ни одного класса единиц измерения в приложениях для управления финансами и операциями для класса единиц измерения в других приложениях Dynamics 365).** В этом случае поле msdyn_symbol должно быть заполнено случайной строкой. Обратите внимание, что это значение должно быть уникальным в других приложениях Dynamics 365.

Для единиц и классов единиц в приложениях для управления финансами и операциями, не существующих в других приложениях Dynamics 365:

В процессе двойной записи группы единиц измерения из приложений для управления финансами и операциями и соответствующие единицы создаются и синхронизируются в других приложениях Dynamics 365 и Dataverse, группа единиц задается как "управляется извне". Дополнительные действия по начальной загрузке не требуются.

Для единиц в других приложениях Dynamics 365, которые не существуют в приложениях для управления финансами и операциями:

Столбец msdyn_symbol должен быть заполнен для всех единиц измерения. Единицы измерения могут быть созданы в приложениях для управления финансами и операциями в соответствующем классе единиц измерения (если он существует). Если класс единиц измерения не существует, необходимо создать класс единиц измерения (обратите внимание, что вы не можете создать класс единиц в приложениях для управления финансами и операциями, кроме как с помощью расширения, если выполняется расширение перечислений), соответствующий группе единиц измерения для других приложений Dynamics 365. После этого можно создать единицу. Обратите внимание, что символ единицы в приложениях для управления финансами и операциями должен быть msdyn_symbol, указанным ранее в приложениях Dynamics 365 для единицы.

## <a name="product-policies-dimension-tracking-and-storage-groups"></a>Политики продуктов: группы аналитик, отслеживания и хранения

Политики продуктов — это наборы политик, используемых для определения продуктов и их характеристик на складе. Группа аналитик продукта, группа аналитик отслеживания продукта и группа аналитик хранения могут быть представлены в качестве политик продукта.

Приложения Finance and Operations | Приложения для взаимодействия с клиентами |
---|---
[Группы аналитик продукта](mapping-reference.md#173) | msdyn\_productdimensiongroups |
[Группы аналитик хранения](mapping-reference.md#177) | msdyn_productstoragedimensiongroups |
[Группы аналитик отслеживания](mapping-reference.md#179) | msdyn_producttrackingdimensiongroups |

## <a name="product-hierarchies"></a>Иерархии продуктов

Приложения Finance and Operations | Приложения для взаимодействия с клиентами |
---|---
[Назначения категорий продуктов](mapping-reference.md#167) | msdyn_productcategoryassignments |
[Иерархии категорий продуктов](mapping-reference.md#168) | msdyn_productcategoryhierarchies |
[Роли иерархии категорий продуктов](mapping-reference.md#169) | msdyn_productcategoryhierarchyroles |

## <a name="integration-key-for-products"></a>Ключ интеграции для продуктов

Для уникальной идентификации продуктов между Dynamics 365 Finance и продуктов в Dataverse используются ключи интеграции.
Для продуктов **(productnumber)** — это уникальный ключ, идентифицирующий продукт в Dataverse. Он состоит из объединения: **(company, msdyn_productnumber)**. **company** означает юридическое лицо в приложениях для управления финансами и операциями и **msdyn_productnumber** означает номер продукта для конкретного продукта в приложениях для управления финансами и операциями.

Для пользователей других приложений Dynamics 365 продукт определяется в интерфейсе пользователя с помощью **msdyn_productnumber** (обратите внимание, что метка столбца — **Номер продукта**). В форме продукта отображаются и company, и msydn_productnumber. Однако столбец (productnumber), уникальный ключ продукта, не отображается.

Если вы создаете приложения на основе Dataverse, вам следует уделять внимание использованию **productnumber** (уникальный код продукта) в качестве ключа интеграции. Не следует использовать **msdyn_productnumber**, поскольку он не является уникальным.

## <a name="initial-synchronization-of-products-and-migration-of-data-from-dataverse-to-finance-and-operations"></a>Начальная синхронизация продуктов и перенос данных из Dataverse в приложения для управления финансами и операциями

### <a name="initial-synchronization-of-products"></a>Начальная синхронизация продуктов

Если включена двойная запись, продукты из приложений для управления финансами и операциями синхронизируются с Dataverse и другими приложениями для взаимодействия с клиентами. Продукты, созданные в Dataverse и других приложениях Dynamics 365 перед выпуском двойной записи, не будут обновлены и сопоставлены с данными о продуктах из приложений для управления финансами и операциями.

### <a name="matching-product-data-from-finance-and-operations-and-other-dynamics-365-apps"></a>Сопоставление данных о продуктах из приложений для управления финансами и операциями и других приложений Dynamics 365

Если одни и те же продукты хранятся (перекрываются или совпадают) в приложениях для управления финансами и операциями и в Dataverse, а также в других приложениях Dynamics 365, то при разрешении двойной записи синхронизация продуктов из приложений для управления финансами и операциями будет выполняться и дублирующиеся строки появятся в Dataverse для одного и того же продукта.
Чтобы избежать возникновения такой ситуации, если в других приложениях Dynamics 365 имеются продукты, которые перекрываются или сопоставляются с приложениями для управления финансами и операциями, администратор, включающий возможность двойной записи, должен выполнить начальную загрузку столбцов **Компания** (например: "USMF") и **msdyn_productnumber** (например: "1234:Black:S") перед синхронизацией продуктов. Другими словами, эти два столбца в продукте в Dataverse должны быть заполнены соответствующей компанией в приложениях для управления финансами и операциями, с указанием продукта сопоставления и номера продукта.

Затем, когда синхронизация включена и выполняется, продукты из приложений для управления финансами и операциями будут синхронизированы с продуктами, сопоставленными в Dataverse и других приложениях Dynamics 365. Это применимо как для уникально идентифицируемых продуктов, так и для вариантов продуктов.

### <a name="migration-of-product-data-from-other-dynamics-365-apps-to-finance-and-operations"></a>Миграция данных о продуктах из других приложений Dynamics 365 в приложения для управления финансами и операциями

Если в других приложениях Dynamics 365 есть продукты, отсутствующие в приложениях для управления финансами и операциями, администратор может сначала использовать **EcoResReleasedProductCreationV2Entity** для импорта этих продуктов в приложения для управления финансами и операциями. Во-вторых, сопоставьте данные о продуктах в приложениях для управления финансами и операциями и других приложениях Dynamics 365, как описано выше.

[!INCLUDE[footer-include](../../../../includes/footer-banner.md)]

