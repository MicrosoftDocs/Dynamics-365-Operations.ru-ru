---
title: Субъект и глобальная адресная книга
description: В этой теме описывается функциональность субъекта и глобальной адресной книги для двойной записи.
author: RamaKrishnamoorthy
ms.date: 02/22/2021
ms.topic: article
ms.service: dynamics-ax-applications
audience: Application User, IT Pro
ms.reviewer: rhaertle
ms.search.region: global
ms.author: ramasri
ms.search.validFrom: 2021-02-22
ms.openlocfilehash: e7bec58f8094a1448017822e7d8840368cc482b8
ms.sourcegitcommit: 074b6e212d19dd5d84881d1cdd096611a18c207f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/31/2021
ms.locfileid: "5750796"
---
# <a name="party-and-global-address-book"></a>Субъект и глобальная адресная книга

[!include [banner](../../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]

Субъект и глобальная адресная книга являются понятиями в приложениях Finance and Operations. Субъект может быть организацией или человеком. Удобно глобально хранить свойства **Субъекта**, такие как имя, язык, контакты и адреса, и управлять ими. Когда значение свойства изменяется в одном месте, это отражается во всех местах, где участвует этот **Субъект**.

## <a name="party"></a>Субъект

*Субъект* — это лицо или организация, включенные в бизнес. Используя концепцию субъекта, сотрудник или организация могут играть в бизнесе более одной роли (работника, клиента, поставщика или контакта). Роль основана на контексте и назначении. Ниже приведены примеры двух вымышленных компаний, Contoso и Fabrikam.

+ **Работник**: сотрудник. Например, сотрудник Contoso.
+ **Поставщик**: организация поставщика или отдельное уполномоченное лицо, поставляющее товары или услуги для бизнеса. Например, если компания Fabrikam продает товары компании Contoso, то компания Fabrikam имеет роль поставщика.
+ **Контакт**: контактное лицо для связи. Например, если компания Contoso приобретает товары у компании Fabrikam, сотрудник компании Contoso будет связываться с контактным лицом в компании Fabrikam.
+ **Клиент** : клиент — это лицо или компания, которые покупают товары у компании. Например, если компания Contoso покупает товары у компании Fabrikam, компания Contoso является клиентом компании Fabrikam.

Модель субъекта часто используется для представления средних и сложных отношений между организациями и физическими лицами, в частности, когда субъект играет несколько ролей. Далее приводятся некоторые распространенные примеры:

+ Субъект может быть и клиентом, и поставщиком. Например, в Северной Америке компания Fabrikam продает электрические провода компании Contoso и приобретает собранные динамики у компании Contoso. В Европе компания Fabrikam продает детали компании Contoso, но ничего не приобретает в компании Contoso.
+ Субъект может быть и сотрудником, и клиентом. Например, сотрудник компании Contoso покупает электронику у компании Contoso для личного использования.
+ Между физическим лицом и организацией может быть отношение "многие ко многим". Например, Fabrikam поставляет специалистов по обслуживанию и нанимает координатора размещения. Координатор назначает специалистам по обслуживанию запросы на работу от нескольких клиентов Fabrikam. Contoso является одной из организаций-клиентов. Когда компании Contoso необходим специалист, компания Contoso обращается к координатору, который затем выполняет этот запрос. Координатор обрабатывает запросы для всех клиентов, создавая отношение "многие ко многим".

На следующем рисунке показана модель данных для субъекта:

![Модель данных для субъекта](media/party-gab-image1.png)

> [!Tip]
> При попытке создать новую запись организации используйте поле "Субъект" для поиска записи по имени. В случае обнаружения записи необходимо просто выбрать запись. Система автоматически заполняет все данные из субъекта. Не требуется вручную вводить все необходимые поля. Такое поведение можно найти в формах организации, контакта и поставщика, поставляемых в готовом виде.

Не все роли субъектов приложений Finance and Operations поддерживаются функцией двойной записи. Полный список ролей субъектов см. в разделе [Обзор глобальной адресной книги](../../../fin-ops/organization-administration/overview-global-address-book.md).

### <a name="global-address-book"></a>Глобальная адресная книга

Глобальная адресная книга — это каталог почтовых и электронных адресов организаций и физических лиц, участвующих в бизнесе.

В глобальной адресной книге хранятся и обрабатываются как угодно много почтовых адресов и электронных адресов. Например, предположим, что Fabrikam имеет автозаправочные станции в 50 местоположениях. У каждого местоположения есть свой почтовый адрес, электронная почта и номер телефона. Все деловые покупки выставляются на главную автозаправочную станцию, но покупки поставляются непосредственно на отдельную автозаправочную станцию, запросившую покупку. Глобальная адресная книга хранит основную автозаправочную станцию в качестве адреса выставления счетов и каждую автозаправочную станцию как адрес доставки для компании Fabrikam. Адреса можно сохранить один раз и извлекать, когда это необходимо для предложений и заказов.

Физическое лицо или организация могут играть более одной роли на основе контекста бизнеса. При этом их почтовые адреса и электронные адреса могут быть одинаковыми. В этом случае изменение адреса в одной роли должно появиться в другой роли и наоборот. Глобальная адресная книга хранит адреса и обрабатывает их глобально.

![Модель данных для глобальной адресной книги](media/party-gab-image2.png)

## <a name="contacts"></a>Контактные лица

В приложениях для взаимодействия с клиентами *Контакт* является физическим лицом. Однако таблица **Контакт** может быть перегружена, чтобы представлять физическое лицо, пользователя портала, клиента B2C или поставщика. Представление является неявным, и вы не можете определить разницу без изучения соответствующих проводок. Таблица **Контакт** имеет ограничение, которое ограничивает ее только отношением 1:1 с таблицей **Организация**. В качестве части модели субъекта и глобальной адресной книги, двойная запись привносит явные свойства для классификации и двойная запись допускает отношения N:N между физическим лицом **Контакт** и организацией (сущность организации или поставщика).

Существует два типа строк **Контакт**:

+ Чередующийся контакт — строка контакта с обязательным значением в поле **Компания**.
+ Нечередующийся контакт — строка контакта с пустым полем **Компания**.

В таблице **Контакт** могут храниться следующие типы строк:

Тип строки | описание
---|---
Физическое лицо, которое является клиентом, например контактным лицом для продажи или клиентом B2C. | Запись о чередующемся контакте, в которой поле **Компания** не пусто, а поле **Клиент** имеет значение **Да**.
Физическое лицо, которое является поставщиком, например, единственным владельцем как поставщиком. | Запись о чередующемся контакте, в которой поле **Компания** не пусто, а поле **Поставщик** имеет значение **Да**.
Физическое лицо, которое одновременно и клиент, и поставщик. | Запись о чередующемся контакте, в которой поле **Компания** не пусто, поле **Клиент** имеет значение **Да** и поле **Поставщик** имеет значение **Да**. Физическое лицо может быть как производителем для одного продукта, так и потребителем для другого продукта. Как приложения Finance and Operations, так и двойная запись поддерживают такое отношение.
Физическое лицо, которое является контактным лицом для организации, но не является клиентом или поставщиком. | Запись о нечередующемся контакте, в которой поле **Компания** пусто, поле **Клиент** имеет значение **Нет** и поле **Поставщик** имеет значение **Нет**.

## <a name="contact-for-party"></a>Контакт для субъекта

**Контакт для субъекта** хранит и обрабатывает связи N:N между строками **Организация** и строками **Контакт**. В нем можно отфильтровать чередующиеся строки **Контакт** от нечередующихся строк и связать только нечередующиеся строки **Контакт** со строками **Организация** или **Поставщик**.

Например, Наташа Джонс и Мигель Рэйес являются ветеринарами, которые заботятся о фермах в своих областях. Наташа обслуживает область Сиэтла, а Мигель обслуживает область Кента. В приложении для взаимодействия с клиентами фермы представлены как клиенты, а ветеринары — как контактные лица. Одна запись **Контакт** для Наташи связана со всеми фермами, с которыми Наташа работает. Аналогично, одна запись **Контакт** для Мигеля связана со всеми фермами, с которыми Мигель работает.

Эти отношения хранятся в таблице **Контакт для субъекта**. Можно найти эти сведения в готовых формах:

+ Когда вы находитесь в форме **Организация**, имеется вкладка с именем **Связанные контакты**. Эта вкладка используется для связывания одного или нескольких контактов со строкой **Организация**. В этой форме вы назначаете контактное лицо для организации. После назначения контактов можно выбрать один в качестве основного контакта для данной организации. С помощью формы **Быстрое создание** можно выбрать только контактное лицо. Поведение аналогично, когда вы используете форму **Поставщик**, а типом записи является **Организация**.
+ Когда вы настраиваете форму **Контакт**, а строка является клиентом или поставщиком или обоими (чередующийся контакт), имеется вкладка с названием **Связанные контакты**. Эта вкладка используется для связывания одного или нескольких контактов. В этой форме вы назначаете контактное лицо для клиента или поставщика B2C. После назначения контактов можно выбрать один в качестве основного контакта. С помощью формы **Быстрое создание** можно выбрать только контактное лицо.
+ Когда вы настраиваете форму **Контакт**, а строка является контактным лицом (нечередующийся контакт), имеется вкладка с названием **Связанные организации**. Эта вкладка используется для связывания одного или нескольких клиентов или поставщиков. В этой форме вы назначаете клиента или поставщика базовому контактному лицу. Клиентом или поставщиком может быть организация, физическое лицо или оба. В каждый момент времени можно выбрать только одно значение из четырех полей.

    ![Вкладка связанных организаций](media/party-gab-image3.png)

    + Если выбран **Код субъекта**, соответствующий контакт назначается всем ролям выбранного субъекта.
    + При выборе **Связанный контакт** выбирается чередующийся контакт типа физического лица.
    + Если выбрана **Связанная организация** или **Поставщик**, то вы выбираете организацию.

    Независимо от вашего выбора, ассоциация создается на уровне субъекта и применяется ко всем ролям субъекта и сохраняется в сущности "Контакт для субъекта".

> [!Note]
> Отображаемое имя для таблицы **Контакт для субъекта** в приложении для взаимодействия с клиентами — **Контакт для клиента/поставщика**.

При открытии строки **Контакт**, в которой в поле **Клиент** задано **Нет** и в поле **Поставщик** задано **Нет**, отображается вкладка **Связанные организации**. Эта вкладка используется для связывания с контактом одной или нескольких организаций клиента или поставщика.

При открытии строки **Контакт**, в которой в поле **Клиент** задано **Да** или в поле **Поставщик** задано **Да**, отображается вкладка **Связанные контакты**. Эта вкладка используется для связывания одного или нескольких контактов.

## <a name="postal-address"></a>почтовый адрес

На формах **Организация**, **Контакт** и **Поставщик** представлена новая вкладка с именем **Адреса**. **Адреса** для поддержки N адресов при помощи сетки, как показано на следующем рисунке:

![Сетка для почтового адреса](media/party-gab-image4.png)

+ В столбце **Роли почтового адреса** указано назначение адреса.
+ Столбец **Является основным** содержит список основных адресов.
+ В столбце **Номер адреса** перечислена последовательность адресов.
+ Кнопка **+ Создать адрес** позволяет создать новый адрес. Может быть создано любое требуемое число адресов.

Поля **Адрес 1** и **Адрес 2** на вкладке **Сводка** формы **Организация** соответствуют адресам **Доставка** и **Накладная**, соответственно.

![Вкладка "Сводка" для почтового адреса](media/party-gab-image5.png)

Поля **Адрес 1**, **Адрес 2** и **Адрес 3** на вкладке **Сводка** формы **Контакт** соответствуют адресам **Работа**, **Доставка** и **Накладная**, соответственно.

## <a name="electronic-address"></a>Электронный адрес

На формах **Организация**, **Контакт** и **Поставщик** представлена новая вкладка с именем **Электронные адреса**. **Адреса** для поддержки N адресов при помощи сетки, как показано на следующем рисунке:

![Сетка для электронного адреса](media/party-gab-image6.png)

+ В столбце **Тип** указывается тип адреса.
+ Столбец **Является основным** содержит список основных адресов.
+ В столбце **Назначение** указано назначение электронного адреса.
+ Кнопка **+ Создать электронный адрес** позволяет создать новый адрес. Может быть создано любое требуемое число адресов.

Электронные адреса доступны только в этой сетке. В будущих выпусках все поля электронного и почтового адреса будут удалены из других вкладок, например со вкладок **Сводка** и **Сведения**.

## <a name="setup-instructions"></a>Инструкции по установке

Если вы являетесь существующим клиентом с двойной записью, вам потребуются следующие инструкции по настройке. В противном случае этот раздел можно пропустить.

1. Остановите следующие сопоставления, так как они больше не требуются. Вместо этого следует выполнить сопоставление контактов v2 (msdyn_contactforparties)/

    + Контакты CDS V2 и контакты (относится к контактам клиента)
    + Контакты CDS V2 и контакты (относится к контактам поставщика)

2. Следующие сопоставления сущностей обновляются для функциональных возможностей субъектов, поэтому для этих сопоставлений должен применяться последняя версия.

Соответствие | Обновите до этой версии | Изменения
---|---|---
Клиенты V3 (accounts) | 1.0.0.5 |Удалены PartyNumber и другие поля, имеющие отношение к субъектам, такие как имя, личные сведения, поля почтового адреса, поля электронного адреса контакта и т. д.
Клиент V3 (contacts) | 1.0.0.5 | Удалены PartyNumber и другие поля, имеющие отношение к субъектам, такие как имя, личные сведения, поля почтового адреса, поля электронного адреса контакта и т. д.
Поставщики V2 (msdyn_vendors) | 1.0.0.6 | Удалены PartyNumber и другие поля, имеющие отношение к субъектам, такие как имя, личные сведения, поля почтового адреса, поля электронного адреса контакта и т. д.
Заголовки предложения по продаже CDS (quotes) | 1.0.0.6 | Контактное лицо заменено ссылкой ContactforParty.
Заголовки накладной на продажу V2 (invoices) | 1.0.0.4 | Контактное лицо заменено ссылкой ContactforParty.
Заголовки заказов на продажу CDS (salesorders) | 1.0.0.5 | Контактное лицо заменено ссылкой ContactforParty.
Контакты V2 (msdyn_contactforparties) | 1.0.0.2 | Это новое сопоставление. Если имеется предыдущая версия решения субъекта, необходимо обновить это сопоставление до последней версии, как указано.
Расположения почтовых адресов субъекта CDS (msdyn_partypostaladdresses) | 1.0.0.1  | Это новое сопоставление, добавленное в рамках предыдущей предварительной версии выпуска субъекта.
Журнал почтовых адресов CDS V2 (msdyn_postaladdresses) | | Это новое сопоставление, добавленное в рамках предыдущей предварительной версии выпуска субъекта.
Расположения почтовых адресов CDS (msdyn_postaladdresscollections) | | Это новое сопоставление, добавленное в рамках предыдущей предварительной версии выпуска субъекта.
Контакты субъекта V3 (msdyn_partyelectronicaddresses) | | Это новое сопоставление, добавленное в рамках этого выпуска.

## <a name="templates"></a>Шаблоны

Коллекция сопоставлений таблиц работает совместно для взаимодействия субъекта и глобальной адресной книги, как показано в следующей таблице.

Приложение Finance and Operations | Приложение для взаимодействия с клиентами     | описание
----------------------------|-----------------------------|------------
[Обращения к контактному лицу](mapping-reference.md#223) | msdyn_salescontactpersontitles |
[Клиенты V3](mapping-reference.md#101) | счета |
[Клиенты V3](mapping-reference.md#116) | контакты |
[Субъекты CDS](mapping-reference.md#220) | msdyn_parties |
[Местоположения почтовых адресов субъектов CDS](mapping-reference.md#233) | msdyn_partypostaladdresses |
[Журнал почтовых адресов CDS V2](mapping-reference.md#235) | msdyn_postaladdresses |
[Местоположения почтовых адресов CDS](mapping-reference.md#234) | msdyn_postaladdresscollections |
[Заголовок предложения по продаже CDS](mapping-reference.md#215) | предложения |
[Заголовки заказов на продажу CDS](mapping-reference.md#217) | salesorders |
[Заключения](mapping-reference.md#222) | msdyn_complimentaryclosings |
[Контакты V2](mapping-reference.md#221) | msdyn_contactforparties |
[Роли принятия решений](mapping-reference.md#224) | msdyn_decisionmakingroles |
[функциональные обязанности задания](mapping-reference.md#225) | msdyn_employmentjobfunctions |
[Уровни лояльности](mapping-reference.md#226) | msdyn_loyaltylevels |
[Контакты субъекта V3](mapping-reference.md#236) | msdyn_partyelectronicaddresses |
[Типы характеров людей](mapping-reference.md#227) | msdyn_personalcharactertypes |
[Заголовки накладной заказа на продажу V2](mapping-reference.md#118) | накладные |
[Приветствия](mapping-reference.md#228) | msdyn_salutations |
[Поставщики V2](mapping-reference.md#202) | msdyn_vendors |

Дополнительные сведения см. в разделе [Ссылка сопоставления с двойной записью](mapping-reference.md).
