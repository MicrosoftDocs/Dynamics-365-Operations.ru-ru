---
title: Использование порталов Microsoft Power Apps с моделью данных субъекта
description: В этой теме описываются изменения в веб-ролях для порталов Microsoft Power Apps из-за модели данных субъекта в двойной записи.
author: RamaKrishnamoorthy
ms.date: 03/22/2021
ms.topic: article
audience: Application User, IT Pro
ms.reviewer: tfehr
ms.search.region: global
ms.author: ramasri
ms.search.validFrom: 2021-03-22
ms.openlocfilehash: 872b477ae73a374cd62b9e86048bfc27c84064c1
ms.sourcegitcommit: 9acfb9ddba9582751f53501b82a7e9e60702a613
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2021
ms.locfileid: "7781376"
---
# <a name="using-microsoft-power-apps-portals-with-the-party-data-model"></a>Использование порталов Microsoft Power Apps с моделью данных субъекта

[!INCLUDE[banner](../../includes/banner.md)]

[!INCLUDE[rename-banner](~/includes/cc-data-platform-banner.md)]

Версия решения управления приложением двойной записи 2.0.999.0 и более поздних версий включает в себя изменения модели данных для субъекта и глобальной адресной книги для таблиц организаций и контактов. Изменения разрешают связи "многие ко многим", которые поддерживают сложные бизнес-сценарии. Эти изменения не поддерживаются веб-ролями портала, включая портал клиента, которые поставляются готовыми или находятся в вашей среде до установки двойной записи. Для корректной работы веб-ролей необходимо создать новые веб-роли с использованием новой модели данных. 

В целом, способ взаимодействия таблиц изменился, но права доступа к таблице на портале клиента не изменились. В этой теме объясняется, как создавать новые веб-роли, которые работают с новой расширенной моделью данных.

На этой диаграмме показано отношение таблиц **без** модели данных субъектов и глобальной адресной книги:

   ![без модели субъектов.](media/without-party-model.PNG)

На этой диаграмме показано отношение таблиц **с** моделью данных субъектов и глобальной адресной книги:

   ![с моделью субъектов.](media/with-party-model.png)

## <a name="create-a-new-table-permission"></a>Создание новых разрешений для таблицы

Чтобы создать эти новые разрешения для таблицы, необходимо выполнить следующие действия:

1. Выполните вход в [Power Apps](https://make.powerapps.com) и перейдите к вашим приложениям.
2. Выберите приложение управления порталом.
3. В боковой области выберите **Безопасность > Разрешения таблиц**.

    Необходимо создать три новых разрешения:

    + Подключение таблиц **Контакт** к **Субъект**
    + Подключение таблиц **Субъект** к **Учетная запись**
    + Подключение таблиц **Учетная запись** к **Заказ**

4. Создайте и сохраните новое разрешение для подключения контакта к субъекту, задав следующие параметры:

    + **Имя**: подключение таблиц **Субъект** к **Учетная запись** (или по вашему выбору)
    + **Имя таблицы**: msdyn_contactforparty
    + **Веб-сайт**: Клиентский портал
    + **Область действия**: контакт
    + **Привилегии**: выберите все
    + **Веб-роли**: прошедшие проверку пользователи, представитель клиента (или на ваше усмотрение)

5. Создайте и сохраните новое разрешение для подключения субъекта к организации, задав следующие параметры:

    + **Имя**: Подключение субъекта к организации (или по вашему выбору)
    + **Имя таблицы**: account
    + **Веб-сайт**: Клиентский портал
    + **Область действия**: родитель
    + **Привилегии**: выберите все
    + **Разрешение родительской таблицы**: подключение контакта к субъекту

6. Создайте и сохраните новое разрешение для подключения организации к заказу, задав следующие параметры:

    + **Имя**: Подключение организации к заказу (или по вашему выбору)
    + **Имя таблицы**: salesorder
    + **Веб-сайт**: Клиентский портал
    + **Область действия**: родитель
    + **Привилегии**: выберите все
    + **Разрешение родительской таблицы**: подключение субъекта к организации

[!INCLUDE[footer-include](../../../../includes/footer-banner.md)]
