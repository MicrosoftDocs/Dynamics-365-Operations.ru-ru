---
title: Настройка сопоставлений моделей электронной отчетности с учетом контекста страны
description: В этой статье объясняется, как можно настроить сопоставления модели электронной отчетности (ER), чтобы они зависели от контекста страны или региона юридического лица, которое управляет их использованием.
author: NickSelin
ms.date: 11/11/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERSolutionTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: Release 8.1.2
ms.openlocfilehash: 771b14662638838ac1f39d85b19ac58a47352c79
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/03/2022
ms.locfileid: "8883885"
---
# <a name="configure-country-context-dependent-er-model-mappings"></a>Настройка сопоставлений модели ER с учетом контекста страны

[!include[banner](../includes/banner.md)]

Сопоставления модели ER можно настроить так, чтобы они реализовали универсальную модель данных ER, но при этом учитывали специфику Dynamics 365 Finance. В этой статье объясняется, как разработать несколько сопоставлений модели ER для модели данных ER, чтобы управлять тем, как они используются соответствующими форматами ER, которые выполняются в компаниях с разными контекстами стран или регионов.

## <a name="prerequisites"></a>Необходимые условия

Для выполнения примеров из этой статьи необходимо иметь следующие возможности доступа:

- Доступ к Finance для одной из следующих ролей:
    - Разработчик электронной отчетности
    - Консультант по функциональным возможностям электронной отчетности
    - Системный администратор

- Доступ к экземпляру служб Regulatory Configuration Service (RCS), который был настроен для того же клиента, что и Finance, для одной из следующих ролей:
    - Разработчик электронной отчетности
    - Консультант по функциональным возможностям электронной отчетности
    - Системный администратор

Для некоторых шагов данной статьи требуется выполнение формата ER. В некоторых случаях на выполнение формата ER влияет страна или регион компании, где в настоящее время выполнен вход в систему. Можно выполнить формат ER в текущем экземпляре RCS, если в RCS имеется компания с необходимым контекстом страны или региона. В противном случае необходимо отправить полную версию сопоставления модели ER и конфигурации формата ER, использующие модель данных ER в экземпляр Finance, а затем выполнить формат ER в этом экземпляре Finance. Сведения об импорте конфигураций, которые находятся в RCS, в экземпляр Finance см. в разделе [Импорт конфигураций из RCS](rcs-download-configurations.md).

## <a name="single-model-mapping-case"></a>Случай одиночного сопоставления модели

Чтобы разработать необходимые компоненты ER, выполните шаги в [Приложении 1](#appendix1) данной статьи. Теперь имеется конфигурация сопоставления модели **Сопоставление (общее)**, содержащая сопоставление модели для определения **Точка входа 1**.

![Страница конфигурации электронной отчетности, формат для изучения конфигурации сопоставлений.](./media/RCS-Context-specific-mapping-Tree.PNG)

### <a name="run-the-configured-format"></a>Выполнение настроенного формата

1.  На странице **Конфигурации** на экспресс-вкладке **Версии** выберите **Выполнить**.
2.  Нажмите **ОК**.

Обратите внимание, что браузер предлагает загрузить текстовый файл, который был создан выполненным форматом ER. Поскольку этот формат был настроен для использования определения **Точка входа 1**, и в настоящее время только одно сопоставление модели доступно для базовой модели, содержащей сопоставление для данного определения, выполненный формат ER использовал сопоставление модели **Сопоставление (общее)** конфигурации **Сопоставление (общее)** в качестве источника данных. Таким образом, загруженный файл содержит текст **Стандартная функциональность 1**.

## <a name="multiple-shared-model-mappings-case"></a>Случай нескольких сопоставлений общих моделей

Чтобы разработать необходимые компоненты ER, выполните шаги в [приложении 2](#appendix2) данной статьи. Теперь имеются конфигурации сопоставления модели **Сопоставление (общее)** и **Настраиваемое сопоставление (общее)**, каждая из которых содержит сопоставление модели для определения **Точка входа 1**.

![Страница конфигурации электронной отчетности, сопоставление общей настраиваемой конфигурации.](./media/RCS-Context-specific-mapping-TreeCustom.PNG)

### <a name="run-the-configured-format"></a>Выполнение настроенного формата

1.  На странице **Конфигурации** в дереве конфигураций выберите пункт **Формат для изучения сопоставлений**.
2.  На экспресс-вкладке **Версии** выберите **Выполнить**.
3.  Нажмите **ОК**.

Обратите внимание, что выполнение выбранного формата ER завершается неудачей. Сообщение об ошибке сообщает, что имеется более одного сопоставления модели для модели **Модель для изучения сопоставлений** и определения **Точка входа 1** в конфигурациях сопоставления модели **Сопоставление (общее)** и **Настраиваемое сопоставление (общее)**. Кроме того, в сообщении рекомендуется выбрать одну из этих конфигураций в качестве конфигурации по умолчанию.

![Страница конфигураций электронной отчетности с сообщением об ошибке.](./media/RCS-Context-specific-mapping-FormatRunCustomFailed.PNG)

### <a name="define-a-default-mapping-configuration"></a>Определение конфигурации сопоставления по умолчанию

Выполните следующие действия, чтобы определить конфигурацию сопоставления модели **Сопоставление (общее)** в качестве конфигурации по умолчанию, чтобы ее сопоставления могли использоваться в качестве источников данных для формата ER **Формат для изучения сопоставлений**.

1.  На странице **Конфигурации** в дереве конфигураций выберите пункт **Настраиваемое сопоставление (общее)**.
2.  При необходимости выберите **Правка**, чтобы сделать текущую страницу готовой к редактированию.
3.  Установите для параметра **По умолчанию для сопоставления модели** значение **Да**.
4.  Нажмите **Сохранить**.

![Страница конфигураций электронной отчетности, значение по умолчанию для ползунка сопоставление моделей установлено в значение "Да".](./media/RCS-Context-specific-mapping-MappingsCustomDefault.PNG)

### <a name="run-the-configured-format"></a>Выполнение настроенного формата

1.  На странице **Конфигурации** в дереве конфигураций выберите пункт **Формат для изучения сопоставлений**.
2.  На экспресс-вкладке **Версии** выберите **Выполнить**.
3.  Нажмите **ОК**.

Обратите внимание, что выполнение выбранного формата ER завершается успешно. Браузер предлагает загрузить текстовый файл, который был создан выполненным форматом ER. Поскольку этот формат был настроен для использования определения **Точка входа 1** и конфигурация сопоставления модели **Настраиваемое сопоставление (общее)** была выбрана в качестве конфигурации по умолчанию, выполненный формат ER использовал сопоставление модели **Копия сопоставления (общее)** конфигурации **Настраиваемое сопоставление (общее)** в качестве источника данных. Таким образом, загруженный файл содержит текст **Настраиваемая стандартная функциональность 1**.

> [!NOTE]
> Если вы измените компанию, в которой вы выполнили вход, и снова запустите этот формат ER, вы получите то же самое содержимое в созданном файле, так как конфигурация сопоставления модели ER по умолчанию не содержит ограничений, зависящих от компании.

## <a name="multiple-mixed-model-mappings-case"></a>Случай нескольких сопоставлений смешанных моделей

Чтобы разработать необходимые компоненты ER, выполните шаги в [приложении 3](#appendix3) данной статьи. Теперь имеются конфигурации сопоставления модели **Сопоставление (общее)**, **Настраиваемое сопоставление (общее)** и **Сопоставление (FR)**, которые содержат сопоставление модели для определения **Точка входа 1**.

Обратите внимание, что версия 1 конфигурации сопоставления модели **Сопоставление (FR)** настроена так, что она применяется только к форматам ER модели **Модель для изучения сопоставлений**, которые выполняются в компаниях Finance с контекстом французского языка (страны или региона).

![Страница конфигурации электронной отчетности, конфигурация сопоставления модели (FR).](./media/RCS-Context-specific-mapping-TreeFR.PNG)

### <a name="run-the-configured-format"></a>Выполнение настроенного формата

1.  Изменить компанию на **FRSI**.
2.  На странице **Конфигурации** в дереве конфигураций выберите пункт **Формат для изучения сопоставлений**.
3.  На экспресс-вкладке **Версии** выберите **Выполнить**.
4.  Нажмите **ОК**.

Обратите внимание, что выполнение выбранного формата ER завершается успешно. Браузер предлагает загрузить текстовый файл, который был создан выполненным форматом ER. Поскольку этот формат был настроен для использования определения **Точка входа 1** и конфигурация сопоставления модели **Настраиваемое сопоставление (общее)** была выбрана в качестве конфигурации по умолчанию, выполненный формат ER использовал сопоставление модели **Копия сопоставления (общее)** конфигурации **Настраиваемое сопоставление (общее)** в качестве источника данных. Таким образом, загруженный файл содержит текст **Настраиваемая стандартная функциональность 1**.

### <a name="define-the-france-specific-mapping-configuration-as-the-default-configuration"></a>Определение конфигурации сопоставления для Франции в качестве конфигурации по умолчанию

Выполните следующие действия, чтобы определить конфигурацию сопоставления модели **Сопоставление (FR)** в качестве конфигурации по умолчанию. Обратите внимание, что поскольку такое сопоставление касается Франции, оно будет рассматриваться как сопоставление по умолчанию для всех конфигураций сопоставления моделей с кодом страны **FR**, указанным в поле **Код страны/региона по ISO**.

1.  На странице **Конфигурации** в дереве конфигураций выберите пункт **Сопоставление (FR)**.
2.  При необходимости выберите **Правка**, чтобы сделать текущую страницу готовой к редактированию.
3.  Установите для параметра **По умолчанию для сопоставления модели** значение **Да**.
4.  Нажмите **Сохранить**.

![Страница конфигураций электронной отчетности, конфигурация сопоставления (FR), значение по умолчанию для ползунка сопоставление моделей установлено в значение "Да".](./media/RCS-Context-specific-mapping-TreeFRDefault.PNG)

### <a name="run-the-configured-format"></a>Выполнение настроенного формата

1.  На странице **Конфигурации** в дереве конфигураций выберите пункт **Формат для изучения сопоставлений**.
2.  На экспресс-вкладке **Версии** выберите **Выполнить**.
3.  Нажмите **ОК**.

Обратите внимание, что выполнение выбранного формата ER завершается успешно. Браузер предлагает загрузить текстовый файл, который был создан выполненным форматом ER. Поскольку этот формат был настроен для использования определения **Точка входа 1** и конфигурация сопоставления модели **Сопоставление (FR)** была выбрана в качестве конфигурации по умолчанию, выполненный формат ER использовал сопоставление модели **Сопоставление (FR)** конфигурации **Сопоставление (FR)** в качестве источника данных. Таким образом, загруженный файл содержит текст **Функциональность 1 FR**.

> [!NOTE]
> Если вы измените компанию, в которой вы выполнили вход, и снова запустите этот формат ER, выходные данные будут зависеть от контекста страны или региона выбранной компании.

## <a name="other-model-mapping-cases"></a>Случаи другого сопоставления модели

Как видите, выбор сопоставления модели для выполнения формата ER работает следующим образом:

- Определение сопоставления модели, которое использует формат ER, указано (**Точка входа 1** в примерах данной статьи).
- Все конфигурации сопоставления, содержащие сопоставление, которое имеет указанное определение и удовлетворяет всем настроенным ограничениям контекста страны или региона, потенциально могут использоваться для выполнения формата ER (**Сопоставление (общее)**, **Настраиваемое сопоставление (общее)** и **Сопоставление (FR)** в примерах данной статьи).
- Любое сопоставление модели по умолчанию, имеющее ограничения контекста страны или региона, имеет наивысший приоритет для выбора (**Сопоставление (FR)** в примерах данной статьи).
- Любое сопоставление модели по умолчанию, не имеющее ограничений контекста страны или региона, имеет следующий по порядку более высокий приоритет для выбора (**Настраиваемое сопоставление (общее)** в примерах данной статьи).
- Любое сопоставление модели с ограничениями контекста для страны или региона имеет более высокий приоритет для выбора, чем сопоставление модели без ограничений контекста для страны или региона.

В следующей таблице представлены сведения о результатах выбора сопоставления модели для всех возможных случаев настройки сопоставления моделей:

- Столбец 1 указывает, имеется ли первое сопоставление модели без ограничений контекста страны или региона (например, общее сопоставление **Сопоставление (общее)**), и если оно есть, задан ли параметр **По умолчанию для сопоставления модели** как **Да**.
- Столбец 2 указывает, имеется ли второе сопоставление модели без ограничений контекста страны или региона (например, общее сопоставление **Настраиваемое сопоставление (общее)**), и если оно есть, задан ли параметр **По умолчанию для сопоставления модели** как **Да**.
- Столбец 3 указывает, имеется ли первое сопоставление модели с ограничениями контекста страны или региона A (например, относящиеся к Франции сопоставление **Сопоставление (FR)**), и если оно есть, задан ли параметр **По умолчанию для сопоставления модели** как **Да**.
- Столбец 4 указывает, имеется ли второе сопоставление модели с ограничениями контекста страны или региона A, и если оно есть, задан ли параметр **По умолчанию для сопоставления модели** как **Да**.
- Столбец 5 содержит результат выбора сопоставления модели для выполнения формата ER под управлением компании с контекстом страна или региона A.
- Столбец 6 содержит результат выбора сопоставления модели для выполнения формата ER под управлением компании с контекстом страна или региона B.

В таблице знак "плюс" (+) указывает на наличие конфигурации сопоставления модели в текущем экземпляре службы Microsoft Azure, используемой для выполнения формата ER (Finance или RCS).

| Обращение | Сопоставление моделей 1 без контекста страны или региона (MM1) | Сопоставление моделей 2 без контекста страны или региона (MM2) | Сопоставление моделей 1 с контекстом страны или региона A (MM1A) | Сопоставление моделей 2 с контекстом страны или региона A (MM2A) | Выполнение под управлением компании с контекстом страны или региона A | Выполнение под управлением компании с контекстом страны или региона B |
|---------|---------|---------|---------|---------|---------------------------|----------------------------|
|         |     1   |     2   |    3    |    4    |           5               |            6               |
|     1   |         |         |         |         | Ошибка (отсутствует сопоставление)   | Ошибка (отсутствует сопоставление)    |
|     2   |     +   |         |         |         | MM1                       | MM1                        |
|     3   |     +   |     +   |         |         | Ошибка (несколько сопоставлений) | Ошибка (несколько сопоставлений)  |
|     4   |     +   |         |    +    |         | MM1A                      | MM1                        |
|     5   |     +   |         |    +    |    +    | Ошибка (несколько сопоставлений) | MM1                        |
|     6   |     +   | по умолчанию |    +    |    +    | MM2                       | MM2                        |
|     7   |     +   |         | по умолчанию |         | MM1A                      | MM1                        |
|     8   |     +   |         | по умолчанию |    +    | MM1A                      | MM1                        |
|     9   |     +   |         | по умолчанию | по умолчанию | Ошибка (несколько сопоставлений) | MM1                        |
|    10   | по умолчанию |         |         |         | MM1                       | MM1                        |
|    11   | по умолчанию |    +    |         |         | MM1                       | MM1                        |
|    12   | по умолчанию |         |    +    |         | MM1                       | MM1                        |
|    13   | по умолчанию | по умолчанию |         |         | Ошибка (несколько сопоставлений) | Ошибка (несколько сопоставлений)  |
|    14   | по умолчанию |         | по умолчанию |         | MM1A                      | MM1                        |
|    15   | по умолчанию |         | по умолчанию | по умолчанию | MM1A                      | MM2A                       |
|    16   |         |         |    +    |    +    | MM1A                      | MM2A                       |
|    17   |         |         | по умолчанию | по умолчанию | MM1A                      | MM2A                       |

## <a name="learn-what-mapping-was-used-in-the-execution-of-an-er-format"></a>Узнайте, какое сопоставление использовалось при выполнении формата ER

### <a name="configure-er-user-parameters"></a>Настройка параметров пользователей ER

1.  На странице **Конфигурации** в области действий на вкладке **КОНФИГУРАЦИИ** выберите **Параметры пользователя**.
2.  Установите для параметра **Запустить в режиме отладки** значение **Да**.
4.  Нажмите **ОК**.

### <a name="run-the-configured-format"></a>Выполнение настроенного формата

1.  На странице **Конфигурации** в дереве конфигураций выберите пункт **Формат для изучения сопоставлений**.
2.  На экспресс-вкладке **Версии** выберите **Выполнить**.
3.  Нажмите **ОК**.

### <a name="review-the-er-debug-log"></a>Просмотр журнала отладки ER

1.  В области переходов выберите **Модули \> Администрирование организации \> Электронная отчетность \> Журналы отладки конфигураций**.
2.  Нажмите кнопку **Перезагрузить эту страницу**.

![Страница журналов выполнений ER.](./media/RCS-Context-specific-mapping-DebugLog.PNG)

Обратите внимание, что в журнал отладки ER добавлена новая запись для выполняемого формата ER. Так как поле **Уровень** этой записи настроено как **Сведения**, запись является информационной. Поскольку в поле компонента формат настроено как **Конфигурация сопоставления**, запись информирует пользователя о сопоставлении моделей, которое использовалось при выполнении формата ER **Формат для изучения сопоставлений** (выбранного в поле **Имя конфигурации**). Поле **Созданный текст** информирует о том, что для выполнения этого отчета был использован компонент сопоставления **Сопоставление (FR)**, который находится в конфигурации **Сопоставление (FR)**.

## <a name="appendix-1"></a><a name="appendix1"></a>Приложение №1

### <a name="configure-a-sample-data-model"></a>Настройка примера модели данных

Войдите в экземпляр RCS.

В этой примере вам предстоит создать конфигурацию для демонстрационной компании Litware, Inc. Для этого сначала в RCS необходимо выполнить шаги в процедуре [Создание поставщика конфигурации и пометка его как активного](tasks/er-configuration-provider-mark-it-active-2016-11.md).

#### <a name="create-an-er-data-model-configuration"></a>Создать конфигурации модели данных ER

1.  В панели мониторинга по умолчанию выберите **Электронная отчетность**.
2.  Выберите плитку **Конфигурации отчетности**.
3.  На странице **Конфигурации** выберите **Создать конфигурацию**.
4.  В диалоговом окне в раскрывающемся списке в поле **Имя** введите **Модель для изучения сопоставлений**.
5.  Выберите **Создать конфигурацию**.
6.  Выберите экспресс-вкладку **Компоненты конфигурации**.

Обратите внимание, что черновая версия 1 этой конфигурации ER готова к редактированию. Эта версия содержит компонент модели данных.

#### <a name="design-a-sample-data-model"></a>Создание примера модели данных

1.  На странице **Конфигурации** выберите **Конструктор**.
2.  Выберите **Создать**.
3.  В диалоговом окне в раскрывающемся списке в поле **Имя** введите **Точка входа 1**.
4.  Выберите **Добавить**.
5.  Выберите **Создать**.
6.  В диалоговом окне в раскрывающемся списке в поле **Имя** введите **Описание функциональности**.
7.  Выберите **Добавить**.
8.  Выберите **Создать**.
9.  В диалоговом окне в раскрывающемся списке в группе полей **Создать узел** выберите **Корень модели**.
10. В поле **Имя** введите **Точка входа 2**.
11. Выберите **Точка входа 2**.
12. Выберите **Добавить**.
13. Выберите **Создать**.
14. В диалоговом окне в раскрывающемся списке в поле **Имя** введите **Описание функциональности**.
15. Выберите **Добавить**.

    ![Страница конструктора модели данных ER.](./media/RCS-Context-specific-mapping-Model.PNG)

16. Нажмите **Сохранить**.
17. Закройте страницу.

#### <a name="complete-the-modified-version-of-the-model-configuration"></a>Выполнение измененной версии конфигурации модели

1.  На странице **Конфигурации** на экспресс-вкладке **Версии** выберите **Изменить статус**.

    > Измените статус проектируемой конфигурации модели с **Черновик** на **Завершено**, чтобы его можно было использовать для разработки необходимых сопоставлений моделей и форматов.

2.  Выберите **Завершено**.
3.  Нажмите **ОК**.

Обратите внимание, что созданная конфигурация сохраняется как завершенная версия 1.

### <a name="configure-a-sample-model-mapping"></a>Настройка примера сопоставления модели

#### <a name="create-an-er-model-mapping-configuration"></a>Создание конфигурации сопоставлений модели ER

1.  На странице **Конфигурации** выберите **Создать конфигурацию**.
2.  В раскрывающемся диалоговом окне в группе полей **Создать** выберите **Сопоставление модели, основанное на модели "Модель для изучения сопоставлений"**.
3.  В поле **Имя** введите **Сопоставление (общее)**.
4.  В поле **Определение модели данных** выберите **Точка входа 1**.
5.  Выберите **Создать конфигурацию**.

Обратите внимание, что черновая версия 1 этой конфигурации ER готова к редактированию. Эта версия содержит компонент сопоставления модели.

#### <a name="design-a-sample-model-mapping"></a>Создание примера сопоставления модели

1.  На странице **Конфигурации** выберите **Конструктор**.

    Обратите внимание, что сопоставление модели типа направления **В модель** было автоматически добавлено к этому компоненту для определения **Точка входа 1**.
    
2.  Выберите **Конструктор**, чтобы начать редактирование добавленного сопоставления модели.
3.  В разделе **Модель данных** выберите **Правка**.
4.  В поле **Формула** введите **"Стандартная функциональность 1"**.
5.  Нажмите **Сохранить**.
6.  Закройте страницу **Конструктор формул**.

    ![Страница конструктора сопоставления модели электронной отчетности, определение точки входа 1.](./media/RCS-Context-specific-mapping-Mapping1.PNG)

7.  Нажмите **Сохранить**.
8.  Закройте страницу **Конструктор сопоставления модели**.
9.  Выберите **Создать**.
10. В поле **Определение** выберите **Точка входа 2**.
11. В поле **Имя** введите **Сопоставление (общее) 2**.
12. Выберите **Конструктор**.
13. В разделе **Модель данных** выберите **Правка**.
14. В поле **Формула** введите **"Стандартная функциональность 2"**.
15. Нажмите **Сохранить**.
16. Закройте страницу **Конструктор формул**.

    ![Страница конструктора сопоставления модели электронной отчетности, определение точки входа 2.](./media/RCS-Context-specific-mapping-Mapping2.PNG)

17. Нажмите **Сохранить**.
18. Закройте страницу **Конструктор сопоставления модели**.

    ![Страница сопоставлений модели электронной отчетности с определениями точек входа.](./media/RCS-Context-specific-mapping-Mappings.PNG)

19. Закройте страницу **Сопоставления модели**.

#### <a name="complete-the-modified-version-of-the-model-mapping-configuration"></a>Выполнение измененной версии конфигурации сопоставления модели

1.  На странице **Конфигурации** на экспресс-вкладке **Версии** выберите **Изменить статус**.

    > Измените статус проектируемой конфигурации сопоставления модели с **Черновик** на **Завершено**, чтобы его могли использовать форматы ER.

2.  Выберите **Завершено**.
3.  Нажмите **ОК**.

Обратите внимание, что созданная конфигурация сохраняется как завершенная версия 1.

### <a name="configure-a-sample-format"></a>Настройка примера формата

#### <a name="create-an-er-format-configuration"></a>Создание конфигурации формата ER

1.  На странице **Конфигурации** в дереве конфигураций выберите пункт **Модель для изучения сопоставлений**.
2.  Выберите **Создать конфигурацию**.
3.  В раскрывающемся диалоговом окне в группе полей **Создать** выберите **Формат, основанный на модели "Модель для изучения сопоставлений"**.
4.  В поле **Имя** введите **Формат для изучения сопоставлений**.
5.  В поле **Определение модели данных** выберите **Точка входа 1**.
6.  Выберите **Создать конфигурацию**.

Обратите внимание, что черновая версия 1 этой конфигурации ER готова к редактированию. Эта версия содержит компонент формата.

#### <a name="design-a-sample-format"></a>Разработка примера формата

1.  На странице **Конфигурации** выберите **Конструктор**.
2.  Выберите **Добавить корень**.
3.  В группе **Текст** выберите элемент **Строка**.
4.  Нажмите **ОК**.

#### <a name="bind-format-elements-to-a-data-source"></a>Привязка элементов формата к источнику данных

1.  На странице **Конструктор форматов** на вкладке **Сопоставление** разверните источник данных модели.
2.  Выберите поле **Описание функциональности**.
3.  Выберите **Связать**.

    ![Страница конструктора форматов электронной отчетности.](./media/RCS-Context-specific-mapping-Format.PNG)

4.  Нажмите **Сохранить**.
5.  Закройте страницу.

## <a name="appendix-2"></a><a name="appendix2"></a>Приложение №2

### <a name="configure-a-sample-model-mapping-for-general-customization"></a>Настройка примера сопоставления модели для общей настройки

Возможно, потребуется настроить сопоставление модели, предоставляемое вам поставщиком конфигурации (партнером), а затем использовать настроенную версию в качестве источника данных для форматов ER. В этом случае необходимо создать настраиваемую конфигурацию сопоставления модели ER, чтобы внести необходимые изменения в существующие сопоставления моделей. В процедурах в этом приложении в качестве примера используется сопоставление модели **Сопоставление (общее)**.

#### <a name="create-an-er-model-mapping-configuration"></a>Создание конфигурации сопоставлений модели ER

1.  На странице **Конфигурации** в дереве конфигураций выберите пункт **Сопоставление (общее)**.
2.  Выберите **Создать конфигурацию**.
3.  В раскрывающемся диалоговом окне в группе полей **Создать** выберите **Производное от имени: сопоставление (общее), Litware, Inc.**.
4.  В поле **Имя** введите **Настраиваемое сопоставление (общее)**.
5.  Выберите **Создать конфигурацию**.

Обратите внимание, что черновая версия 1 этой конфигурации ER готова к редактированию.

#### <a name="design-a-sample-model-mapping"></a>Создание примера сопоставления модели

1.  На странице **Конфигурации** выберите **Конструктор**.

    > Обратите внимание, что сопоставления модели базовой конфигурации были автоматически скопированы в эту конфигурацию.

2.  Выберите сопоставление **Копия сопоставления (общее)**.
3.  Выберите **Конструктор**.
4.  В разделе **Модель данных** выберите **Правка**.
5.  В поле **Формула** введите **"Настраиваемая стандартная функциональность 1"**.
6.  Нажмите **Сохранить**.
7.  Закройте страницу.

    ![Страница конструктора сопоставления модели электронной отчетности, настраиваемая формула универсальной функциональности 1.](./media/RCS-Context-specific-mapping-Mapping1Custom.PNG)

8.  Нажмите **Сохранить**.
9.  Закройте страницу.
10. Выберите сопоставление **Копия сопоставления (общее) 2**.
11. Выберите **Конструктор**.
12. В разделе **Модель данных** выберите **Правка**.
13. В поле **Формула** введите **"Настраиваемая стандартная функциональность 2"**.
14. Нажмите **Сохранить**.
15. Закройте страницу.

    ![Страница конструктора сопоставления модели электронной отчетности, настраиваемая формула универсальной функциональности 2.](./media/RCS-Context-specific-mapping-Mapping2Custom.PNG)

16. Нажмите **Сохранить**.
17. Закройте страницу.

    ![Страница сопоставление модели электронной отчетности и источника данных для сопоставления копий сопоставлений (общих).](./media/RCS-Context-specific-mapping-MappingsCustom.PNG)

18. Закройте страницу.

#### <a name="complete-the-modified-version-of-the-model-mapping-configuration"></a>Выполнение измененной версии конфигурации сопоставления модели

1.  На странице **Конфигурации** на экспресс-вкладке **Версии** выберите **Изменить статус**.

    > Измените статус проектируемой конфигурации сопоставления модели с **Черновик** на **Завершено**, чтобы его могли использовать форматы ER.

2.  Выберите **Завершено**.
3.  Нажмите **ОК**.

Обратите внимание, что созданная конфигурация сохраняется как завершенная версия 1.

## <a name="appendix-3"></a><a name="appendix3"></a>Приложение №3

### <a name="configure-a-sample-model-mapping-for-countryregion-specific-customization"></a>Настройка примера сопоставления модели для настройки с учетом страны или региона

Для некоторых форматов ER могут существовать требования к подготовке данных с учетом определенной страны или региона. В этом случае можно управлять отдельной конфигурацией сопоставления модели ER и изолировать реализацию этих требований, связанных со страной или регионом, из общей реализации. Процедуры, описанные в данном приложении, используют формат ER **Формат для изучения сопоставлений** требования, относящиеся к Франции, в качестве примера.

#### <a name="create-an-er-model-mapping-configuration"></a>Создание конфигурации сопоставлений модели ER

Сначала необходимо создать новую конфигурацию сопоставления модели ER для реализации требований, зависящих от страны или региона. Используйте настраиваемую конфигурацию сопоставления модели ER в качестве основы.

1.  На странице **Конфигурации** в дереве конфигураций выберите пункт **Настраиваемое сопоставление (общее)**.
2.  Выберите **Создать конфигурацию**.
3.  В раскрывающемся диалоговом окне в группе полей **Создать** выберите **Производное от имени: настраиваемое сопоставление (общее), Litware, Inc.**.
4.  В поле **Имя** введите **Сопоставление (FR)**.
5.  Выберите **Создать конфигурацию**.

Обратите внимание, что черновая версия 1 этой конфигурации ER готова к редактированию.

#### <a name="design-a-sample-model-mapping"></a>Создание примера сопоставления модели

1.  На странице **Конфигурации** выберите **Конструктор**.

    > Обратите внимание, что сопоставления модели базовой конфигурации были автоматически скопированы в эту конфигурацию.

2.  Выберите сопоставление **Копия — копия сопоставления (общее)**.
3.  Переименуйте в **Сопоставление (FR)**.
4.  Выберите **Конструктор**.
5.  В разделе **Модель данных** выберите **Правка**.
6.  В поле **Формула** введите **"Функциональность FR 1"**.
7.  Нажмите **Сохранить**.
8.  Закройте страницу.

    ![Страница конструктора сопоставления модели электронной отчетности,формула функциональности FR 1.](./media/RCS-Context-specific-mapping-Mapping1FR.PNG)

9.  Нажмите **Сохранить**.
10. Закройте страницу.
11. Выберите сопоставление **Копия — копия сопоставления (общее) 2**.
12. Переименуйте в **Сопоставление (FR) 2**.
13. Выберите **Конструктор**.
14. В разделе **Модель данных** выберите **Правка**.
15. В поле **Формула** введите **"Функциональность FR 2"**.
16. Нажмите **Сохранить**.
17. Закройте страницу.

    ![Страница конструктора сопоставления модели электронной отчетности,формула функциональности FR 2.](./media/RCS-Context-specific-mapping-Mapping2FR.PNG)

18. Нажмите **Сохранить**.
19. Закройте страницу.

    ![Страница сопоставления модели электронной отчетности и источника данных.](./media/RCS-Context-specific-mapping-MappingsFR.PNG)

20. Закройте страницу.

#### <a name="specify-countryregion-context-restrictions-for-use"></a>Указание ограничений контекста страны или региона для использования

1.  На странице **Конфигурации** на экспресс-вкладке **Коды стран/регионов ISO** выберите **Создать**.
2.  В поле **ISO** выберите **FR**.
3.  Нажмите **Сохранить**.

Обратите внимание, что для выполнения формата ER необходимо войти в конкретную компанию в модуле Finance. Таким образом, эту компанию можно рассматривать как субъект, контролирующий выполнение формата ER, и выбирать правильное сопоставление модели ER базовой модели данных ER. При добавлении кода страны **FR** вы указываете, что это сопоставление модели доступно для выбора форматом ER базовой модели данных только в том случае, если этот формат выполняется под управлением компании с контекстом французского языка (страны/региона).

Можно добавить несколько кодов стран/регионов для одной версии конфигурации сопоставления модели ER. Таким образом, сопоставления моделей, которые находятся в этой конфигурации сопоставления моделей, могут использоваться для формата ER, который выполняется под управлением компаний с разным контекстом страны/региона.

Обратите внимание, что список кодов стран/регионов указан для каждой версии конфигурации сопоставления модели ER и может различаться в зависимости от версии.

#### <a name="complete-the-modified-version-of-the-model-mapping-configuration"></a>Выполнение измененной версии конфигурации сопоставления модели

1.  На странице **Конфигурации** на экспресс-вкладке **Версии** выберите **Изменить статус**.

    > Измените статус проектируемой конфигурации сопоставления модели с **Черновик** на **Завершено**, чтобы его могли использовать форматы ER.

2.  Выберите **Завершено**.
3.  Нажмите **ОК**.

Обратите внимание, что созданная конфигурация сохраняется как завершенная версия 1.

## <a name="additional-resources"></a>Дополнительные ресурсы

[Обзор электронной отчетности (ER)](general-electronic-reporting.md)

[Управление сопоставлением модели электронной отчетности в отдельных конфигурациях электронной отчетности](./tasks/er-manage-model-mapping-configurations-july-2017.md)

[Применение контекста страны/региона](../lcs-solutions/apply-country-context.md)

## <a name="frequently-asked-questions"></a>Вопросы и ответы

#### <a name="i-configured-two-shared-er-model-mapping-configurations-in-rcs-and-marked-one-of-them-as-the-default-model-mapping-configuration-i-successfully-ran-an-er-format-that-was-created-for-the-same-base-er-data-model-configuration-to-test-model-mappings-i-then-imported-the-whole-er-solution-er-data-model-two-er-model-mapping-configurations-and-er-format-configuration-into-finance-why-do-i-receive-an-error-message-when-i-try-to-run-the-same-er-format-in-finance"></a>Мы настроили две общие конфигурации сопоставления модели ER в RCS и отметили одну из них как конфигурацию сопоставления модели по умолчанию. Мы успешно запустили формат ER, созданный для той же базовой конфигурации модели данных ER, чтобы протестировать сопоставления моделей. Затем мы импортировали все решение ER (модель данных ER, две конфигурации сопоставления модели ER и конфигурацию формата ER) в Finance. Почему мы получаем сообщение об ошибке при попытке выполнить этот же формат ER в модуле Finance?
Настройка сопоставления модели по умолчанию зависит от среды. Она настраивается в RCS, но не экспортируется в Finance. Чтобы успешно выполнить этот формат ER, необходимо также отметить одну из конфигураций сопоставления модели ER в качестве конфигурации сопоставления модели по умолчанию в Finance.

#### <a name="i-configured-one-model-mapping-as-a-shared-model-mapping-and-completed-the-draft-version-of-it-i-then-added-a-new-model-mapping-configuration-for-same-data-model-and-configured-it-as-french-specific-why-is-the-shared-model-mapping-selected-when-i-run-an-er-format-even-though-this-er-format-uses-the-correct-root-definition-and-execution-is-done-under-the-control-of-the-company-that-has-french-countryregion-context"></a>Мы настроили одно сопоставление модели как общее сопоставление модели и выполнили его черновую версию. Затем мы добавили новую конфигурацию сопоставления модели для той же модели данных и настроили ее как французскую. Почему при запуске формата ER выбрано общее сопоставление моделей даже в том случае, если этот формат ER использует правильное корневое определение, а выполнение выполняется под управлением компании с контекстом французского языка (региона)?
Убедитесь, что конфигурация общего сопоставления моделей не помечена как конфигурация сопоставления модели по умолчанию. В противном случае у нее будет более высокий приоритет при выборе сопоставления. Кроме того, убедитесь, что конфигурация сопоставления модели для французского языка учитывается при выборе сопоставления во время выполнения формата ER. Конфигурация сопоставления модели ER доступна для выбора только в том случае, если соблюдено по крайней мере одно из следующих условий:
- По крайней мере одна версия конфигурации сопоставления модели ER имеет статус **Завершено** или **Общий**. В этом случае версия с наибольшим номером версии будет использоваться для выполнения формата ER.
- Включен параметр **Выполнить черновик** для конфигурации сопоставления модели ER. В этом случае версия со статусом **Черновик** будет использоваться для выполнения формата ER.
> Параметр **Выполнить черновик** становится доступным на странице **Конфигурации** для каждой конфигурации сопоставления модели ER при включении параметра пользователя ER **Параметр выполнения**.


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
