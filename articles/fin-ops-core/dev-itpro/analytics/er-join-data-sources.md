---
title: Использование источников данных JOIN в модели ER для извлечения данных из нескольких таблиц приложений
description: В этом разделе объясняется использование источников данных JOIN в электронной отчетности (ER).
author: NickSelin
manager: AnnBe
ms.date: 05/04/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERModelMappingDesigner, EROperationDesigner
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-03-01
ms.dyn365.ops.version: Release 10.0.1
ms.openlocfilehash: 0d7df12026d6d668b1f48a48cd12bf4b12e0f94e
ms.sourcegitcommit: 659375c4cc7f5524cbf91cf6160f6a410960ac16
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/05/2020
ms.locfileid: "4686424"
---
# <a name="use-join-data-sources-to-get-data-from-multiple-application-tables-in-electronic-reporting-er-model-mappings"></a><span data-ttu-id="ce144-103">Использование источников данных JOIN в сопоставлениях модели электронной отчетности (ER) для извлечения данных из нескольких таблиц приложений</span><span class="sxs-lookup"><span data-stu-id="ce144-103">Use JOIN data sources to get data from multiple application tables in Electronic reporting (ER) model mappings</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="ce144-104">При настройке сопоставления или форматов модели электронной отчетности (ER) можно [добавить](#review) необходимые источники данных типа **соединение**.</span><span class="sxs-lookup"><span data-stu-id="ce144-104">While configuring Electronic reporting (ER) model mappings or formats, you can [add](#review) required data sources of the **Join** type.</span></span> <span data-ttu-id="ce144-105">Во время разработки источник данных **соединение** настраивается как набор из нескольких источников данных, каждый из которых возвращает список записей.</span><span class="sxs-lookup"><span data-stu-id="ce144-105">At design time, a **Join** data source is configured as a set of several data sources each of which returns a list of records.</span></span> <span data-ttu-id="ce144-106">Для каждого источника данных за исключением первого необходимо определить необходимые условия для присоединения записей к текущим и предыдущим источникам данных.</span><span class="sxs-lookup"><span data-stu-id="ce144-106">For every data source except the first one, you need to define necessary conditions to join records of the current and previous data sources.</span></span> <span data-ttu-id="ce144-107">Во время выполнения настроенный источник данных типа **соединение** [возвращает](#executeERformat) отдельный объединенный список записей, содержащий поля из записей вложенных источников данных.</span><span class="sxs-lookup"><span data-stu-id="ce144-107">At runtime, a configured data source of **Join** type [returns](#executeERformat) a single joined list of records containing fields from the records of nested data sources.</span></span>

<span data-ttu-id="ce144-108">В настоящее время поддерживаются следующие типы соединений:</span><span class="sxs-lookup"><span data-stu-id="ce144-108">The following types of joins are currently supported:</span></span>

- <span data-ttu-id="ce144-109">Внешнее (левое) соединение:</span><span class="sxs-lookup"><span data-stu-id="ce144-109">Outer (left) join:</span></span>
    - <span data-ttu-id="ce144-110">Присоедините все записи к первому (крайнему левому) источнику данных, а затем любое сопоставление в соответствии с настроенными условиями для второго (крайнего правого) источника данных.</span><span class="sxs-lookup"><span data-stu-id="ce144-110">Join all records of the first (left-most) data source and then any matching in accordance to configured conditions records of the second (right-most) data source.</span></span>
- <span data-ttu-id="ce144-111">Внутреннее (правое) соединение:</span><span class="sxs-lookup"><span data-stu-id="ce144-111">Inner (right) join:</span></span>
    - <span data-ttu-id="ce144-112">Присоедините только записи первого (крайнего левого) источника данных, и только записи второго (крайнего правого) источника данных, соответствующие друг другу в соответствии с настроенными условиями.</span><span class="sxs-lookup"><span data-stu-id="ce144-112">Join only records of the first (left-most) data source and only records of the second (right-most) data source matching to each other in accordance to configured conditions.</span></span>

<span data-ttu-id="ce144-113">В настроенном источнике данных **соединение**, когда все источники данных являются типами **табличных записей**, выполнение источника данных соединения можно [выполнить на уровне базы данных](#analyze), используя один оператор SQL.</span><span class="sxs-lookup"><span data-stu-id="ce144-113">In the configured **Join** data source, when all data sources are the **Table records** type, execution of the Join data source can be [performed at the database level](#analyze) using a single SQL statement.</span></span> <span data-ttu-id="ce144-114">Это утверждение сокращает число вызовов к базе данных, что повышает производительность сопоставления моделей.</span><span class="sxs-lookup"><span data-stu-id="ce144-114">This statement reduces the number of database calls, which improves model-mapping performance.</span></span> <span data-ttu-id="ce144-115">В противном случае в памяти будет выполнен источник **данных соединения**.</span><span class="sxs-lookup"><span data-stu-id="ce144-115">Otherwise, execution of **Join data** source is performed in memory.</span></span>

> [!NOTE]
> <span data-ttu-id="ce144-116">Использование функции **VALUEIN** в выражениях ER, определяющих условия объединения записей в источниках данных типа соединения, еще не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="ce144-116">Using the **VALUEIN** function in ER expressions that specify conditions for joining records in data sources of Join type is not supported yet.</span></span> <span data-ttu-id="ce144-117">Посетите страницу [Конструктор формул в электронной отчетности](general-electronic-reporting-formula-designer.md) для получения дополнительных сведений об этой функции.</span><span class="sxs-lookup"><span data-stu-id="ce144-117">Visit the [Formula designer in Electronic reporting](general-electronic-reporting-formula-designer.md) page for more details about this function.</span></span>

<span data-ttu-id="ce144-118">Чтобы получить дополнительные сведения об этой функции, выполните пример в этой теме.</span><span class="sxs-lookup"><span data-stu-id="ce144-118">To learn more about this feature, complete the example in this topic.</span></span>

## <a name="example-use-join-data-sources-in-er-model-mappings"></a><span data-ttu-id="ce144-119">Пример: использование источников данных JOIN в сопоставлениях модели ER</span><span class="sxs-lookup"><span data-stu-id="ce144-119">Example: Use JOIN data sources in ER model mappings</span></span>

<span data-ttu-id="ce144-120">Следующие шаги описывают, как системный администратор или разработчик электронной отчетности может настроить сопоставление модели электронной отчетности (ER) для получения данных из нескольких таблиц приложений одновременно, используя источники данных типа **соединения** для повышения производительности доступа к данным.</span><span class="sxs-lookup"><span data-stu-id="ce144-120">The following steps explain how the System administrator or Electronic reporting developer can configure an Electronic reporting (ER) model mapping to get data from multiple application tables at once by using data sources of the **Join** type to improve data access performance.</span></span> <span data-ttu-id="ce144-121">Эти шаги могут быть выполнены для любой компании Dynamics 365 Finance или в службах Regulatory Configuration Service (RCS).</span><span class="sxs-lookup"><span data-stu-id="ce144-121">These steps can be performed for any company of Dynamics 365 Finance or Regulatory Configuration Services (RCS).</span></span>

### <a name="prerequisites"></a><span data-ttu-id="ce144-122">Необходимые условия</span><span class="sxs-lookup"><span data-stu-id="ce144-122">Prerequisites</span></span>

<span data-ttu-id="ce144-123">Чтобы выполнить примеры в этом разделе, необходимо иметь доступ к одной из следующих возможностей в зависимости от того, какая служба используется для конкурирующих шагов:</span><span class="sxs-lookup"><span data-stu-id="ce144-123">To complete the examples in this topic, you must have access to one of the following depending on what service is used to compete these steps:</span></span>

<span data-ttu-id="ce144-124">**Доступ к Finance для одной из следующих ролей:**</span><span class="sxs-lookup"><span data-stu-id="ce144-124">**Access to Finance for one of the following roles:**</span></span>

- <span data-ttu-id="ce144-125">Разработчик электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="ce144-125">Electronic reporting developer</span></span>
- <span data-ttu-id="ce144-126">Консультант по функциональным возможностям электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="ce144-126">Electronic reporting functional consultant</span></span>
- <span data-ttu-id="ce144-127">Системный администратор</span><span class="sxs-lookup"><span data-stu-id="ce144-127">System administrator</span></span>

<span data-ttu-id="ce144-128">**Доступ к службам RCS для одной из следующих ролей:**</span><span class="sxs-lookup"><span data-stu-id="ce144-128">**Access to RCS for one of the following roles:**</span></span>

- <span data-ttu-id="ce144-129">Разработчик электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="ce144-129">Electronic reporting developer</span></span>
- <span data-ttu-id="ce144-130">Консультант по функциональным возможностям электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="ce144-130">Electronic reporting functional consultant</span></span>
- <span data-ttu-id="ce144-131">Системный администратор</span><span class="sxs-lookup"><span data-stu-id="ce144-131">System administrator</span></span>

<span data-ttu-id="ce144-132">Также необходимо сначала выполнить шаги в процедуре [Создание поставщика конфигурации и установка его в качестве активного](tasks/er-configuration-provider-mark-it-active-2016-11.md).</span><span class="sxs-lookup"><span data-stu-id="ce144-132">You also must first complete the steps in the [Create a configuration provider and mark it as active](tasks/er-configuration-provider-mark-it-active-2016-11.md) procedure.</span></span>

<span data-ttu-id="ce144-133">Предварительно необходимо загрузить из [центра загрузки Майкрософт](https://go.microsoft.com/fwlink/?linkid=000000) и сохранить локально следующие образцы файлов конфигурации ER:</span><span class="sxs-lookup"><span data-stu-id="ce144-133">In advance, you must also download from [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=000000) and save locally the following sample ER configuration files:</span></span>

| <span data-ttu-id="ce144-134">**Описание содержания**</span><span class="sxs-lookup"><span data-stu-id="ce144-134">**Content description**</span></span>  | <span data-ttu-id="ce144-135">**Имя файла**</span><span class="sxs-lookup"><span data-stu-id="ce144-135">**File name**</span></span>   |
|--------------------------|-----------------|
| <span data-ttu-id="ce144-136">Образец файла конфигурации **модели данных ER**, который используется как источник данных для примеров.</span><span class="sxs-lookup"><span data-stu-id="ce144-136">Sample **ER data model** configuration file, which is used as the data source for the examples.</span></span>| [<span data-ttu-id="ce144-137">Model to learn JOIN data sources.version.1.1.xml</span><span class="sxs-lookup"><span data-stu-id="ce144-137">Model to learn JOIN data sources.version.1.1.xml</span></span>](https://mbs.microsoft.com/customersource/Global/AX/downloads/hot-fixes/365optelecrepeg) |
| <span data-ttu-id="ce144-138">Образец файла конфигурации **сопоставления модели ER**, который реализует модель данных ER для примеров.</span><span class="sxs-lookup"><span data-stu-id="ce144-138">Sample **ER model mapping** configuration file, which implements the ER data model for the examples.</span></span> | [<span data-ttu-id="ce144-139">Mapping to learn JOIN data sources.version.1.1.xml</span><span class="sxs-lookup"><span data-stu-id="ce144-139">Mapping to learn JOIN data sources.version.1.1.xml</span></span>](https://mbs.microsoft.com/customersource/Global/AX/downloads/hot-fixes/365optelecrepeg) |
| <span data-ttu-id="ce144-140">Образец файла конфигурации **формата электронной отчетности**.</span><span class="sxs-lookup"><span data-stu-id="ce144-140">Sample **ER format** configuration file.</span></span> <span data-ttu-id="ce144-141">Этот файл описывает данные, которыми требуется заполнить компонент формата электронной отчетности для примеров.</span><span class="sxs-lookup"><span data-stu-id="ce144-141">This file describes the data to populate the ER format component for the examples.</span></span> | [<span data-ttu-id="ce144-142">Format to learn JOIN data sources.version.1.1.xml</span><span class="sxs-lookup"><span data-stu-id="ce144-142">Format to learn JOIN data sources.version.1.1.xml</span></span>](https://mbs.microsoft.com/customersource/Global/AX/downloads/hot-fixes/365optelecrepeg) |

### <a name="activate-a-configurations-provider"></a><span data-ttu-id="ce144-143">Активация поставщика конфигураций</span><span class="sxs-lookup"><span data-stu-id="ce144-143">Activate a configurations provider</span></span>

1. <span data-ttu-id="ce144-144">Получите доступ к финансам или RCS в первой сессии вашего веб-браузера.</span><span class="sxs-lookup"><span data-stu-id="ce144-144">Access either Finance or RCS in the first session of your web browser.</span></span>
2. <span data-ttu-id="ce144-145">Перейдите в раздел **Управление организацией \> Рабочие области \> Электронная отчетность**.</span><span class="sxs-lookup"><span data-stu-id="ce144-145">Go to **Organization administration \> Workspaces \> Electronic reporting**.</span></span>
3. <span data-ttu-id="ce144-146">На странице **Конфигурации локализации** в разделе **Поставщики конфигурации** убедитесь, что поставщик конфигурации для демонстрационной компании [Litware, Inc.](http://www.litware.com) указан в списке и помечен как **Активный**.</span><span class="sxs-lookup"><span data-stu-id="ce144-146">On the **Localization configurations** page, in the **Configuration providers** section, make sure that the configuration provider for the [Litware, Inc.](http://www.litware.com) sample company is listed, and that it's marked as **Active**.</span></span> <span data-ttu-id="ce144-147">Если вы не видите этого поставщика конфигурации, выполните шаги в процедуре [Создание поставщика конфигурации и пометка его как активного](tasks/er-configuration-provider-mark-it-active-2016-11.md).</span><span class="sxs-lookup"><span data-stu-id="ce144-147">If you don't see this configuration provider, follow the steps in [Create a configuration provider and mark it as active](tasks/er-configuration-provider-mark-it-active-2016-11.md) procedure.</span></span>

    ![Рабочая область электронной отчетности](./media/GER-JoinDS-ActiveProvider.PNG)

### <a name="import-sample-er-configuration-files"></a><span data-ttu-id="ce144-149">Импорт образца файлов конфигурации электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="ce144-149">Import sample ER configuration files</span></span>

1. <span data-ttu-id="ce144-150">Выберите **Конфигурации отчетности**.</span><span class="sxs-lookup"><span data-stu-id="ce144-150">Select **Reporting configurations**.</span></span>
2. <span data-ttu-id="ce144-151">Импортируйте файл конфигурации модели данных электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="ce144-151">Import the ER data model configuration file.</span></span>
    1. <span data-ttu-id="ce144-152">Выберите **Обменять**.</span><span class="sxs-lookup"><span data-stu-id="ce144-152">Select **Exchange**.</span></span>
    2. <span data-ttu-id="ce144-153">Выберите **Загрузить из XML-файла**.</span><span class="sxs-lookup"><span data-stu-id="ce144-153">Select **Load from XML file**.</span></span>
    3. <span data-ttu-id="ce144-154">Нажмите **обзор**, чтобы найти файл **Model to learn JOIN data sources.version.1.1.xml**.</span><span class="sxs-lookup"><span data-stu-id="ce144-154">Select **Browse** to find the **Model to learn JOIN data sources.version.1.1.xml** file.</span></span>
    4. <span data-ttu-id="ce144-155">Нажмите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="ce144-155">Select **OK**.</span></span>
3. <span data-ttu-id="ce144-156">Импортируйте файл конфигурации сопоставления модели электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="ce144-156">Import the ER model-mapping configuration file.</span></span>
    1. <span data-ttu-id="ce144-157">Выберите **Обменять**.</span><span class="sxs-lookup"><span data-stu-id="ce144-157">Select **Exchange**.</span></span>
    2. <span data-ttu-id="ce144-158">Выберите **Загрузить из XML-файла**.</span><span class="sxs-lookup"><span data-stu-id="ce144-158">Select **Load from XML file**.</span></span>
    3. <span data-ttu-id="ce144-159">Нажмите **обзор**, чтобы найти файл **Mapping to learn JOIN data sources.version.1.1.xml**.</span><span class="sxs-lookup"><span data-stu-id="ce144-159">Select **Browse** to find the **Mapping to learn JOIN data sources.version.1.1.xml** file.</span></span>
    4. <span data-ttu-id="ce144-160">Нажмите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="ce144-160">Select **OK**.</span></span>
4. <span data-ttu-id="ce144-161">Импорт файла конфигурации формата электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="ce144-161">Import the ER format configuration file.</span></span>
    1. <span data-ttu-id="ce144-162">Выберите **Обменять**.</span><span class="sxs-lookup"><span data-stu-id="ce144-162">Select **Exchange**.</span></span>
    2. <span data-ttu-id="ce144-163">Выберите **Загрузить из XML-файла**.</span><span class="sxs-lookup"><span data-stu-id="ce144-163">Select **Load from XML file**.</span></span>
    3. <span data-ttu-id="ce144-164">Нажмите **обзор**, чтобы найти файл **Format to learn JOIN data sources.version.1.1.xml**.</span><span class="sxs-lookup"><span data-stu-id="ce144-164">Select **Browse** to find the **Format to learn JOIN data sources.version.1.1.xml** file.</span></span>
    4. <span data-ttu-id="ce144-165">Нажмите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="ce144-165">Select **OK**.</span></span>
5. <span data-ttu-id="ce144-166">В дереве конфигураций разверните элемент **Модель для изучения источников данных JOIN** и другие элементы модели (когда это возможно).</span><span class="sxs-lookup"><span data-stu-id="ce144-166">In the configurations tree, expand the **Model to learn JOIN data sources** item as well as other model items (when available).</span></span>
6. <span data-ttu-id="ce144-167">Просмотрите список конфигураций ER в дереве, а также сведения о версии на экспресс-вкладке **версии** — они будут использоваться в качестве источника данных для образца отчета.</span><span class="sxs-lookup"><span data-stu-id="ce144-167">Observe the list of ER configurations in the tree as well as version details on the **Versions** fast tab – they will be used as the source of data for your sample report.</span></span>

    ![Страница конфигураций электронной отчетности](./media/GER-JoinDS-ConfigurationsTree.PNG)

### <a name="turn-on-execution-trace-options"></a><span data-ttu-id="ce144-169">Включить параметры трассировки выполнения</span><span class="sxs-lookup"><span data-stu-id="ce144-169">Turn on execution trace options</span></span>

1. <span data-ttu-id="ce144-170">Выбрать **КОНФИГУРАЦИИ**.</span><span class="sxs-lookup"><span data-stu-id="ce144-170">Select **CONFIGURATIONS**.</span></span>
2. <span data-ttu-id="ce144-171">Выбор **Параметры пользователя**.</span><span class="sxs-lookup"><span data-stu-id="ce144-171">Select **User parameters**.</span></span>
3. <span data-ttu-id="ce144-172">Задайте параметры трассировки выполнения, как показано на снимке экрана ниже.</span><span class="sxs-lookup"><span data-stu-id="ce144-172">Set execution trace parameters as shown on the screenshot below.</span></span>

    ![Страница параметров пользователя электронной отчетности](./media/GER-JoinDS-Parameters.PNG)

    <span data-ttu-id="ce144-174">Если эти параметры включены, то при каждом выполнении импортированного файла формата ER будет создана трассировка выполнения.</span><span class="sxs-lookup"><span data-stu-id="ce144-174">With these parameters turned on, for every execution of the imported ER format file, the execution trace will be generated.</span></span> <span data-ttu-id="ce144-175">Используя подробные сведения о созданной трассировке выполнения, можно анализировать выполнение формата ER и компонентов сопоставления модели ER.</span><span class="sxs-lookup"><span data-stu-id="ce144-175">Using details of generated execution trace, you can analyze the execution of ER format and ER model-mapping components.</span></span> <span data-ttu-id="ce144-176">Посетите страницу [Трассировка выполнения формата ER для устранения проблем с производительностью](trace-execution-er-troubleshoot-perf.md) для получения дополнительной информации о функции трассировки выполнения ER.</span><span class="sxs-lookup"><span data-stu-id="ce144-176">Visit the [Trace execution of ER format to troubleshoot performance issues](trace-execution-er-troubleshoot-perf.md) page for more details about ER execution trace feature.</span></span>

### <a name="review-er-model-mapping-part-1"></a><span data-ttu-id="ce144-177">Проверка сопоставления модели ER (часть 1)</span><span class="sxs-lookup"><span data-stu-id="ce144-177">Review ER model mapping (part 1)</span></span>

<span data-ttu-id="ce144-178">Проверьте настройки компонента сопоставления модели ER.</span><span class="sxs-lookup"><span data-stu-id="ce144-178">Review settings of the ER model-mapping component.</span></span> <span data-ttu-id="ce144-179">Компонент настроен для доступа к информации о версиях ER, сведениях о конфигурациях и поставщиках конфигурации без использования источников данных типа **соединения**.</span><span class="sxs-lookup"><span data-stu-id="ce144-179">The component is configured to access information about versions of ER configurations, details of configurations and configuration providers without using data sources of the **Join** type.</span></span>

1. <span data-ttu-id="ce144-180">Выберите конфигурацию **Сопоставление для изучения источников данных JOIN**.</span><span class="sxs-lookup"><span data-stu-id="ce144-180">Select **Mapping to learn JOIN data sources** configuration.</span></span>
2. <span data-ttu-id="ce144-181">Выберите **конструктор**, чтобы открыть список сопоставлений.</span><span class="sxs-lookup"><span data-stu-id="ce144-181">Select **Designer** to open the list of mappings.</span></span>
3. <span data-ttu-id="ce144-182">Выберите **конструктор**, чтобы просмотреть сведения о сопоставлении.</span><span class="sxs-lookup"><span data-stu-id="ce144-182">Select **Designer** to review the mapping details.</span></span>
4. <span data-ttu-id="ce144-183">Выберите **Показать сведения**.</span><span class="sxs-lookup"><span data-stu-id="ce144-183">Select **Show details**.</span></span>
5. <span data-ttu-id="ce144-184">В дереве конфигураций разверните элементы модели данных **Set1** и **Set1.Details**:</span><span class="sxs-lookup"><span data-stu-id="ce144-184">In the configurations tree, expand the **Set1** and **Set1.Details** data model items:</span></span>

    1. <span data-ttu-id="ce144-185">Привязка **Details: Record list = Versions** указывает, что элемент **Set1.Details** привязан к источникам данных **версии**, возвращающим записи таблицы **ERSolutionVersionTable**.</span><span class="sxs-lookup"><span data-stu-id="ce144-185">Binding **Details: Record list = Versions** indicates that the **Set1.Details** item is bound to the **Versions** data source returning records of the **ERSolutionVersionTable** table.</span></span> <span data-ttu-id="ce144-186">Каждая запись в этой таблице представляет отдельную версию конфигурации ER.</span><span class="sxs-lookup"><span data-stu-id="ce144-186">Each record of this table represents a single version of an ER configuration.</span></span> <span data-ttu-id="ce144-187">Содержимое этой таблицы представлено на экспресс-вкладке **Версии** на странице **конфигурации**.</span><span class="sxs-lookup"><span data-stu-id="ce144-187">The content of this table is presented in the **Versions** fast tab on the **Configurations** page.</span></span>
    2. <span data-ttu-id="ce144-188">Привязка **ConfigurationVersion: String = @.PublicVersionNumber** означает, что значение в открытой версии каждой конфигурации ER берется из поля **PublicVersionNumber** таблицы **ERSolutionVersionTable** и размещается в элементе **ConfigurationVersion**.</span><span class="sxs-lookup"><span data-stu-id="ce144-188">Binding **ConfigurationVersion: String = @.PublicVersionNumber** means that the value of the public version of each ER configuration’s version is taken from the **PublicVersionNumber** field of the **ERSolutionVersionTable** table and placed to the **ConfigurationVersion** item.</span></span>
    3. <span data-ttu-id="ce144-189">Привязка **ConfigurationTitle: String = @.'>Relations'.Solution.Name** указывает, что имя конфигурации ER берется из поля **Имя** таблицы **ERSolutionTable**, используя отношение многие к одному (**'>Relations'**) между таблицами **ERSolutionVersionTable** и **ERSolutionTable**.</span><span class="sxs-lookup"><span data-stu-id="ce144-189">Binding **ConfigurationTitle: String = @.'>Relations'.Solution.Name** indicates that the name of an ER configuration is taken from the **Name** field of the **ERSolutionTable** table assessing by using the many-to-one relation (**'>Relations'**) between the **ERSolutionVersionTable** and **ERSolutionTable** tables.</span></span> <span data-ttu-id="ce144-190">Имена конфигураций ER текущего экземпляра приложения представлены в дереве конфигураций на странице **конфигурации**.</span><span class="sxs-lookup"><span data-stu-id="ce144-190">Names of ER configurations of the current application instance are presented in the configurations tree on the **Configurations** page.</span></span>
    4. <span data-ttu-id="ce144-191">Привязка **@.'>Relations'.Solution.'>Relations'.SolutionVendor.Name** означает, что имя поставщика конфигурации, которому принадлежит текущая конфигурация, берется из поля **Имя** таблицы **ERVendorTable**, используя отношение многие к одному между таблицами **ERSolutionTable** и **ERVendorTable**.</span><span class="sxs-lookup"><span data-stu-id="ce144-191">Binding **@.'>Relations'.Solution.'>Relations'.SolutionVendor.Name** means that the name of the configuration provider that owns the current configuration is taken from the **Name** field of the **ERVendorTable** table assessing by using the many-to-one relation between **ERSolutionTable** and **ERVendorTable** tables.</span></span> <span data-ttu-id="ce144-192">Имена поставщиков конфигураций ER представлены в дереве конфигураций на странице **конфигурации** в заголовке страницы для каждой конфигурации.</span><span class="sxs-lookup"><span data-stu-id="ce144-192">Names of ER configuration providers are presented in the configurations tree on the **Configurations** page on the page header for each configuration.</span></span> <span data-ttu-id="ce144-193">Полный список поставщиков конфигураций ER можно найти на странице таблицы **Администрирование организации \> Электронная отчетность \> Поставщик конфигурации**.</span><span class="sxs-lookup"><span data-stu-id="ce144-193">The entire list of ER configuration providers can be found on the **Organization administration \> Electronic reporting \> Configuration provider** table page.</span></span>

    ![Страница конструктора сопоставления модели электронной отчетности](./media/GER-JoinDS-Set1Review.PNG)

6. <span data-ttu-id="ce144-195">В дереве конфигураций разверните элемент модели данных **Set1.Summary**:</span><span class="sxs-lookup"><span data-stu-id="ce144-195">In the configurations tree, expand the **Set1.Summary** data model item:</span></span>

    1. <span data-ttu-id="ce144-196">Привязка **VersionsNumber: Integer = VersionsSummary.aggregated.VersionsNumber** указывает, что элемент **Set1.Summary.VersionsNumber** связан с полем агрегирования **VersionsNumber** источника данных **VersionsSummary** типа **GroupBy**, который был настроен на возврат количества записей таблицы **ERSolutionVersionTable** через источник данных **версии**.</span><span class="sxs-lookup"><span data-stu-id="ce144-196">Binding **VersionsNumber: Integer = VersionsSummary.aggregated.VersionsNumber** indicates that the **Set1.Summary.VersionsNumber** item is bound to the **VersionsNumber** aggregation field of the **VersionsSummary** data source of the **GroupBy** type that was configured to return the number of records of the **ERSolutionVersionTable** table via the **Versions** data source.</span></span>

    ![Страница "Параметры источника данных GROUPBY"](./media/GER-JoinDS-Set1GroupByReview.PNG)

7. <span data-ttu-id="ce144-198">Закройте страницу.</span><span class="sxs-lookup"><span data-stu-id="ce144-198">Close the page.</span></span>

### <a name="review-er-model-mapping-part-2"></a><a name="review"></a> <span data-ttu-id="ce144-199">Проверка сопоставления модели ER (часть 2)</span><span class="sxs-lookup"><span data-stu-id="ce144-199">Review ER model mapping (part 2)</span></span>

<span data-ttu-id="ce144-200">Проверьте настройки компонента сопоставления модели ER.</span><span class="sxs-lookup"><span data-stu-id="ce144-200">Review settings of the ER model-mapping component.</span></span> <span data-ttu-id="ce144-201">Компонент настроен для доступа к информации о версиях ER, сведениях о конфигурациях и поставщиках конфигурации с использованием источника данных типа **соединения**.</span><span class="sxs-lookup"><span data-stu-id="ce144-201">The component is configured to access information about versions of ER configurations, details of configurations and configuration providers with using a data source of the **Join** type.</span></span>

1. <span data-ttu-id="ce144-202">В дереве конфигураций разверните элементы модели данных **Set2** и **Set2.Details**.</span><span class="sxs-lookup"><span data-stu-id="ce144-202">In the configurations tree, expand the **Set2** and **Set2.Details** data model items.</span></span> <span data-ttu-id="ce144-203">Привязка **Details: Record list = Details** указывает, что элемент **Set2.Details** привязан к источнику данных **Сведения**, настроенному в качестве источника данных типа **соединения**.</span><span class="sxs-lookup"><span data-stu-id="ce144-203">The binding **Details: Record list = Details** indicates that the **Set2.Details** item is bound to the **Details** data source configured as the data source of the **Join** type.</span></span>

    ![Страница конструктора сопоставления модели электронной отчетности](./media/GER-JoinDS-Set2Review.PNG)

    <span data-ttu-id="ce144-205">Источник данных **соединения** можно добавить, выбрав источник данных **Функции\Соединение**:</span><span class="sxs-lookup"><span data-stu-id="ce144-205">The **Join** data source can be added by selecting the **Functions\Join** data source:</span></span>

    ![Страница конструктора сопоставления модели электронной отчетности](./media/GER-JoinDS-AddJoinDS.PNG)

2. <span data-ttu-id="ce144-207">Выберите источник данных **Сведения**.</span><span class="sxs-lookup"><span data-stu-id="ce144-207">Select **Detail** s data source.</span></span>
3. <span data-ttu-id="ce144-208">Выберите **Правка** в области **источники данных**.</span><span class="sxs-lookup"><span data-stu-id="ce144-208">Select **Edit** in the **Data sources** pane.</span></span>
4. <span data-ttu-id="ce144-209">Выберите **Редактировать соединение**.</span><span class="sxs-lookup"><span data-stu-id="ce144-209">Select **Edit join**.</span></span>
5. <span data-ttu-id="ce144-210">Выберите **Показать сведения**.</span><span class="sxs-lookup"><span data-stu-id="ce144-210">Select **Show details**.</span></span>

    ![Страница "Параметры источника данных JOIN"](./media/GER-JoinDS-JoinDSEditor.PNG)

    <span data-ttu-id="ce144-212">Эта страница используется для разработки необходимого источника данных **типа соединения**.</span><span class="sxs-lookup"><span data-stu-id="ce144-212">This page is used to design the required data source of the **Join type**.</span></span> <span data-ttu-id="ce144-213">Во время выполнения этот источник данных создаст отдельный объединенный список записей из источников данных в сетке **соединенный список**.</span><span class="sxs-lookup"><span data-stu-id="ce144-213">At runtime, this data source will create a single joined list of records from the data sources in the **Joined list** grid.</span></span> <span data-ttu-id="ce144-214">Соединение записей будет начато из источника данных **ConfigurationProviders**, который находится в сетке в качестве первого (для него должен быть указан столбец **Тип**).</span><span class="sxs-lookup"><span data-stu-id="ce144-214">Join of records will start from the **ConfigurationProviders** data source that is in the grid as a first one (the **Type** column is blank for it).</span></span> <span data-ttu-id="ce144-215">Записи всех других источников данных будут присоединены к записям родительского источника данных в зависимости от его порядка в этой сетке.</span><span class="sxs-lookup"><span data-stu-id="ce144-215">Records of every other data source will be joined consequently to records of the parent data source based on its order in this grid.</span></span> <span data-ttu-id="ce144-216">Все соединяемые источники данных должны быть настроены как источник данных, вложенный в целевой источник данных (источник данных `1Versions`, вложенный в `1Configurations`; источник данных `1Configurations` вложен в **ConfigurationProviders**).</span><span class="sxs-lookup"><span data-stu-id="ce144-216">Every joining data source must be configured as a data source nested under a target data source (`1Versions` data source is nested under `1Configurations` one; `1Configurations` data source is nested under **ConfigurationProviders** one).</span></span> <span data-ttu-id="ce144-217">Каждый настроенный источник данных должен содержать условия для соединения.</span><span class="sxs-lookup"><span data-stu-id="ce144-217">Each configured data source must contain the conditions for the join.</span></span> <span data-ttu-id="ce144-218">В источнике данных для данного конкретного **соединения** определены следующие соединения:</span><span class="sxs-lookup"><span data-stu-id="ce144-218">In the data source for this particular **Join**, the following joins are defined:</span></span>

    - <span data-ttu-id="ce144-219">Каждая запись источника данных **ConfigurationProviders** (указанная в таблице **ERVendorTable**) объединяется только с записями **1Configurations** (указанная в таблице **ERSolutionTable**), имеющая одинаковое значение в полях **SolutionVendor** и **RecId**.</span><span class="sxs-lookup"><span data-stu-id="ce144-219">Each record of the **ConfigurationProviders** data source (referred to the **ERVendorTable** table) is joined with only records of the **1Configurations** one (referred to in the **ERSolutionTable** table) having the same value in the **SolutionVendor** and **RecId** fields.</span></span> <span data-ttu-id="ce144-220">Тип **внутреннего соединения** используется для данного соединения, а также следующие условия для сопоставления записей:</span><span class="sxs-lookup"><span data-stu-id="ce144-220">The **Inner join** type is used for this join as well as the following conditions for matching records:</span></span>

    <span data-ttu-id="ce144-221">ФИЛЬТР (Конфигурации, Configurations.SolutionVendor = ConfigurationProviders.RecId)</span><span class="sxs-lookup"><span data-stu-id="ce144-221">FILTER (Configurations, Configurations.SolutionVendor = ConfigurationProviders.RecId)</span></span>

    - <span data-ttu-id="ce144-222">Каждая запись источника данных **1Configurations** (указанная в таблице **ERSolutionTable**) объединяется только с записями **1Versions** (указанная в таблице **ERSolutionVersionTable**), имеющая одинаковое значение в полях **Solution** и **RecId**.</span><span class="sxs-lookup"><span data-stu-id="ce144-222">Each record of the **1Configurations** data source (referred to the **ERSolutionTable** table) is joined with the only records of the **1Versions** one (referred to the **ERSolutionVersionTable** table) having the same value in the **Solution** and **RecId** fields.</span></span> <span data-ttu-id="ce144-223">Тип **внутреннего соединения** используется для данного соединения, а также следующие условия для сопоставления записей:</span><span class="sxs-lookup"><span data-stu-id="ce144-223">**Inner join** type is used for this join as well as the following conditions for matching records:</span></span>

    <span data-ttu-id="ce144-224">ФИЛЬТР (ConfigurationVersions, ConfigurationVersions.Solution = ConfigurationProviders.'1Configurations'.RecId)</span><span class="sxs-lookup"><span data-stu-id="ce144-224">FILTER (ConfigurationVersions, ConfigurationVersions.Solution = ConfigurationProviders.'1Configurations'.RecId)</span></span>

    - <span data-ttu-id="ce144-225">Параметр **Выполнить** настроен как **запрос**, то есть этот источник данных соединения будет выполняться во время выполнения на уровне базы данных как прямой вызов SQL.</span><span class="sxs-lookup"><span data-stu-id="ce144-225">**Execute** option is configured as **Query** meaning that this join data source will be executed at runtime on database level as a direct SQL call.</span></span>

    <span data-ttu-id="ce144-226">Для объединения записей источников данных, представляющих таблицы приложений, можно указать условия соединения, используя пары полей, отличных от тех, которые описывают существующие в отношениях AOT между этими таблицами.</span><span class="sxs-lookup"><span data-stu-id="ce144-226">For joining records of data sources representing application tables, you can specify join conditions by using pairs of fields other than ones that describe existing in AOT relations between these tables.</span></span> <span data-ttu-id="ce144-227">Этот тип соединения можно настроить так, чтобы он выполнялся также на уровне базы данных.</span><span class="sxs-lookup"><span data-stu-id="ce144-227">This type of join can be configured to execute at the database level as well.</span></span>

6. <span data-ttu-id="ce144-228">Закройте страницу.</span><span class="sxs-lookup"><span data-stu-id="ce144-228">Close the page.</span></span>
7. <span data-ttu-id="ce144-229">Выберите **Отмена**.</span><span class="sxs-lookup"><span data-stu-id="ce144-229">Select **Cancel**.</span></span>
8. <span data-ttu-id="ce144-230">В дереве конфигураций разверните элемент модели данных **Set2.Summary**:</span><span class="sxs-lookup"><span data-stu-id="ce144-230">In the configurations tree, expand the **Set2.Summary** data model item:</span></span>

    - <span data-ttu-id="ce144-231">Привязка **VersionsNumber: Integer = DetailsSummary.aggregated.VersionsNumber** указывает, что элемент **Set2.Summary.VersionsNumber** связан с полем агрегирования **VersionsNumber** источника данных **DetailsSummary** типа **GroupBy**, который был настроен на возврат количества соединенных записей источника данных **Details** типа **соединения**.</span><span class="sxs-lookup"><span data-stu-id="ce144-231">Binding **VersionsNumber: Integer = DetailsSummary.aggregated.VersionsNumber** indicates that the **Set2.Summary.VersionsNumber** item is bound to the **VersionsNumber** aggregation field of the **DetailsSummary** data source of the **GroupBy** type that was configured to return the number of joined records of the **Details** data source of the **Join** type.</span></span>
    - <span data-ttu-id="ce144-232">Параметр местоположения **Выполнение** настроен как **запрос**, то есть этот источник данных **GroupBy** будет выполняться во время выполнения как прямой вызов SQL на уровне базы данных.</span><span class="sxs-lookup"><span data-stu-id="ce144-232">The **Execution** location option is configured as **Query** meaning that this **GroupBy** data source will be run at runtime as a direct SQL call at the database level.</span></span> <span data-ttu-id="ce144-233">Это поведение возможно из-за того, что базовый источник данных **Сведения** типа **соединения** настроен как выполненный на уровне базы данных.</span><span class="sxs-lookup"><span data-stu-id="ce144-233">This behavior is possible because the base data source **Details** of the **Join** type is configured as executed at the database level.</span></span>

    ![Страница "Параметры источника данных GROUPBY"](./media/GER-JoinDS-Set2GroupByReview.PNG)

9. <span data-ttu-id="ce144-235">Закройте страницу.</span><span class="sxs-lookup"><span data-stu-id="ce144-235">Close the page.</span></span>
10. <span data-ttu-id="ce144-236">Выберите **Отмена**.</span><span class="sxs-lookup"><span data-stu-id="ce144-236">Select **Cancel**.</span></span>

### <a name="execute-er-format"></a><a name="executeERformat"></a> <span data-ttu-id="ce144-237">Выполнение формата электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="ce144-237">Execute ER format</span></span>

1. <span data-ttu-id="ce144-238">Получите доступ к Финансам или RCS во втором сеансе веб-браузера с использованием тех же учетных данных и компании, что и в первом сеансе.</span><span class="sxs-lookup"><span data-stu-id="ce144-238">Access Finance or RCS in the second session of your web browser using same credentials and company as in the first session.</span></span>
2. <span data-ttu-id="ce144-239">Перейдите в раздел **Управление организацией \> Электронная отчетность \> Конфигурации**.</span><span class="sxs-lookup"><span data-stu-id="ce144-239">Go to **Organization administration \> Electronic reporting \> Configurations**.</span></span>
3. <span data-ttu-id="ce144-240">Разверните **Модель для изучения источников данных JOIN**.</span><span class="sxs-lookup"><span data-stu-id="ce144-240">Expand **Model to learn JOIN data sources** configuration.</span></span>
4. <span data-ttu-id="ce144-241">Выберите конфигурацию **Формат для изучения источников данных JOIN**.</span><span class="sxs-lookup"><span data-stu-id="ce144-241">Select **Format to learn JOIN data sources** configuration.</span></span>
5. <span data-ttu-id="ce144-242">Выберите **Конструктор**.</span><span class="sxs-lookup"><span data-stu-id="ce144-242">Select **Designer**.</span></span>
6. <span data-ttu-id="ce144-243">Выберите **Показать сведения**.</span><span class="sxs-lookup"><span data-stu-id="ce144-243">Select **Show details**.</span></span>
7. <span data-ttu-id="ce144-244">Выберите **Сопоставление**.</span><span class="sxs-lookup"><span data-stu-id="ce144-244">Select **Mapping**.</span></span>
8. <span data-ttu-id="ce144-245">Выберите **Развернуть/Свернуть**.</span><span class="sxs-lookup"><span data-stu-id="ce144-245">Select **Expand/Collapse**.</span></span>

    <span data-ttu-id="ce144-246">Этот формат предназначен для заполнения созданного текстового файла новой строкой для каждой версии конфигурации ER (последовательность **версий**).</span><span class="sxs-lookup"><span data-stu-id="ce144-246">This format is designed to populate a generated text file with a new line for every version of an ER configuration (**Version** sequence).</span></span> <span data-ttu-id="ce144-247">Каждая созданная строка будет содержать имя поставщика конфигурации, который владеет текущей конфигурацией, именем конфигурации и версией конфигурации, разделенными точкой с запятой.</span><span class="sxs-lookup"><span data-stu-id="ce144-247">Each generated line will contain the name of a configuration provider owning the current configuration, the configuration name, and the configuration version separated by semicolon mark.</span></span> <span data-ttu-id="ce144-248">Последняя строка созданного файла будет содержать число обнаруженных версий конфигураций ER (**сводная** последовательность).</span><span class="sxs-lookup"><span data-stu-id="ce144-248">The final line of generated file will contain the number of discovered versions of ER configurations (**Summary** sequence).</span></span>

    ![Страница конструктора форматов электронной отчетности](./media/GER-JoinDS-FormatReview.PNG)

    <span data-ttu-id="ce144-250">Источники данных **Дата** и **Сводка** используются для заполнения сведений о версии конфигурации создаваемого файла:</span><span class="sxs-lookup"><span data-stu-id="ce144-250">The **Data** and **Summary** data sources are used to populate configuration version details to the generated file:</span></span>

    - <span data-ttu-id="ce144-251">Данные из модели данных **Set1** используются при выборе **нет** для источника данных **селектор** во время выполнения на странице диалогового окна пользователя, если используется формат электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="ce144-251">Information from the **Set1** data model is used when you choose **No** for the **Selector** data source at runtime on the user dialog page when running ER format.</span></span>
    - <span data-ttu-id="ce144-252">Данные из модели данных **Set2** используются при выборе **Да** для источника данных **селектор** во время выполнения на странице диалогового окна пользователя.</span><span class="sxs-lookup"><span data-stu-id="ce144-252">Information from the **Set2** data model is used when you choose **Yes** for the **Selector** data source at runtime on the user dialog page.</span></span>

    ![Страница конструктора форматов электронной отчетности](./media/GER-JoinDS-FormatMappingReview.PNG)

9. <span data-ttu-id="ce144-254">Выберите **Выполнить**.</span><span class="sxs-lookup"><span data-stu-id="ce144-254">Select **Run**.</span></span>
10. <span data-ttu-id="ce144-255">На странице диалогового окна выберите **нет** в поле **использовать источник данных JOIN**.</span><span class="sxs-lookup"><span data-stu-id="ce144-255">On the dialog page, select **No** in the **Use JOIN data source** field.</span></span>
11. <span data-ttu-id="ce144-256">Нажмите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="ce144-256">Select **OK**.</span></span>
12. <span data-ttu-id="ce144-257">Просмотрите созданный файл.</span><span class="sxs-lookup"><span data-stu-id="ce144-257">Review generated file.</span></span>

    ![Страница диалогового окна пользователя электронной отчетности](./media/GER-JoinDS-Set1Run.PNG)

#### <a name="analyze-er-format-execution-trace"></a><span data-ttu-id="ce144-259">Анализ трассировки выполнения формата электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="ce144-259">Analyze ER format execution trace</span></span>

1. <span data-ttu-id="ce144-260">В первом сеансе финансов или RCS выберите **конструктор**.</span><span class="sxs-lookup"><span data-stu-id="ce144-260">In the first session of Finance or RCS, select **Designer**.</span></span>
2. <span data-ttu-id="ce144-261">Выберите **трассировка выполнения**.</span><span class="sxs-lookup"><span data-stu-id="ce144-261">Select **Performance trac** e.</span></span>
3. <span data-ttu-id="ce144-262">В сетке **Трассировка производительности** выберите самую верхнюю запись последней трассировки выполнения в формате электронной отчетности, который использовался текущим компонентом сопоставления моделей.</span><span class="sxs-lookup"><span data-stu-id="ce144-262">In the **Performance trace** grid, select the top-most record of the latest execution trace of an ER format that used the current model mapping component.</span></span>
4. <span data-ttu-id="ce144-263">Нажмите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="ce144-263">Select **OK**.</span></span>

    <span data-ttu-id="ce144-264">Статистика выполнения информирует вас о дублированных вызовах в таблицах приложения:</span><span class="sxs-lookup"><span data-stu-id="ce144-264">Execution statistics informs you about duplicated calls to application tables:</span></span>

    - <span data-ttu-id="ce144-265">**ERSolutionTable** была вызвана столько раз, сколько имеется записей версий конфигурации в таблице **ERSolutionVersionTable**, в то время как количество таких вызовов может быть уменьшено в разы для повышения производительности.</span><span class="sxs-lookup"><span data-stu-id="ce144-265">**ERSolutionTable** has been called as many times as you have configuration version records in the **ERSolutionVersionTable** table, while the number of such calls could be reduced in times for performance improvement.</span></span>
    - <span data-ttu-id="ce144-266">**ERVendorTable** была вызвана дважды для каждой записи версии конфигурации, которая была обнаружена в таблице **ERSolutionVersionTable**, в то время как количество таких вызовов также может быть уменьшено.</span><span class="sxs-lookup"><span data-stu-id="ce144-266">**ERVendorTable** has been called twice for every configuration version record that was discovered in the **ERSolutionVersionTable** table, while the number of such calls could be reduced as well.</span></span>

    ![Страница конструктора сопоставления модели электронной отчетности](./media/GER-JoinDS-Set1Run2.PNG)

5. <span data-ttu-id="ce144-268">Закройте страницу.</span><span class="sxs-lookup"><span data-stu-id="ce144-268">Close the page.</span></span>

### <a name="execute-er-format"></a><span data-ttu-id="ce144-269">Выполнение формата электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="ce144-269">Execute ER format</span></span>

1. <span data-ttu-id="ce144-270">Перейдите на вкладку веб-браузера, используя второй сеанс финансов или RCS.</span><span class="sxs-lookup"><span data-stu-id="ce144-270">Switch to your web browser tab with the second session of Finance or RCS.</span></span>
2. <span data-ttu-id="ce144-271">Выберите **Выполнить**.</span><span class="sxs-lookup"><span data-stu-id="ce144-271">Select **Run**.</span></span>
3. <span data-ttu-id="ce144-272">На странице диалогового окна выберите **Да** в поле **использовать источник данных JOIN**.</span><span class="sxs-lookup"><span data-stu-id="ce144-272">On the dialog page, select **Yes** in the **Use JOIN data source** field.</span></span>
4. <span data-ttu-id="ce144-273">Нажмите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="ce144-273">Select **OK**.</span></span>
5. <span data-ttu-id="ce144-274">Просмотрите созданный файл.</span><span class="sxs-lookup"><span data-stu-id="ce144-274">Review generated file.</span></span>

    ![Страница диалогового окна пользователя электронной отчетности](./media/GER-JoinDS-Set2Run.PNG)

#### <a name="analyze-er-format-execution-trace"></a><a name="analyze"></a> <span data-ttu-id="ce144-276">Анализ трассировки выполнения формата электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="ce144-276">Analyze ER format execution trace</span></span>

1. <span data-ttu-id="ce144-277">В первом сеансе финансов или RCS выберите **конструктор**.</span><span class="sxs-lookup"><span data-stu-id="ce144-277">In the first session of Finance or RCS, select **Designer**.</span></span>
2. <span data-ttu-id="ce144-278">Выберите **трассировка выполнения**.</span><span class="sxs-lookup"><span data-stu-id="ce144-278">Select **Performance trace**.</span></span>
3. <span data-ttu-id="ce144-279">В сетке **Трассировка производительности** выберите самую верхнюю запись, представляющую трассировку последнего выполнения в формате электронной отчетности, который использовался текущим компонентом сопоставления моделей.</span><span class="sxs-lookup"><span data-stu-id="ce144-279">In the **Performance trace** grid, select top-most record representing the latest execution trace of an ER format that used the current model mapping component.</span></span>
4. <span data-ttu-id="ce144-280">Нажмите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="ce144-280">Select **OK**.</span></span>

    <span data-ttu-id="ce144-281">Статистические данные информируют о следующем:</span><span class="sxs-lookup"><span data-stu-id="ce144-281">Statistics informs you about the following:</span></span>

    - <span data-ttu-id="ce144-282">База данных приложения вызывалась один раз для получения записей из таблиц **ERVendorTable**, **ERSolutionTable** и **ERSolutionVersionTable** для получения доступа к обязательным полям.</span><span class="sxs-lookup"><span data-stu-id="ce144-282">Application database has been called once to get records from **ERVendorTable**, **ERSolutionTable**, and **ERSolutionVersionTable** tables to access required fields.</span></span>

    ![Страница конструктора сопоставления модели электронной отчетности](./media/GER-JoinDS-Set2Run2.PNG)

    - <span data-ttu-id="ce144-284">База данных приложения была вызвана один раз для расчета количества версий конфигурации с использованием соединений, настроенных в источнике данных **Сведения**.</span><span class="sxs-lookup"><span data-stu-id="ce144-284">Application database has been called once to calculate the number of configuration versions by using joins that were configured in the **Details** data source.</span></span>

    ![Страница конструктора сопоставления модели электронной отчетности](./media/GER-JoinDS-Set2Run3.PNG)

## <a name="limitations"></a><span data-ttu-id="ce144-286">Ограничения</span><span class="sxs-lookup"><span data-stu-id="ce144-286">Limitations</span></span>

<span data-ttu-id="ce144-287">Как можно увидеть из примера в этом разделе, источник данных **JOIN** может быть построен из нескольких источников данных, описывающих отдельные наборы данных с записями, которые в конечном итоге нужно объединить.</span><span class="sxs-lookup"><span data-stu-id="ce144-287">As you can see from the example in this topic, the **JOIN** data source can be built from several data sources that describe the individual datasets of the records that must eventually be joined.</span></span> <span data-ttu-id="ce144-288">Вы можете настроить эти источники данных с помощью встроенной в ER функцию [FILTER](er-functions-list-filter.md).</span><span class="sxs-lookup"><span data-stu-id="ce144-288">You can configure those data sources by using the built-in ER [FILTER](er-functions-list-filter.md) function.</span></span> <span data-ttu-id="ce144-289">При настройке источника данных так, чтобы он вызывался вне источника данных **JOIN**, можно использовать диапазоны компаний в качестве части условия для выбора данных.</span><span class="sxs-lookup"><span data-stu-id="ce144-289">When you configure the data source so that it's called beyond the **JOIN** data source, you can use company ranges as part of the condition for data selection.</span></span> <span data-ttu-id="ce144-290">Исходная реализация источника данных **JOIN** не поддерживает источники данных этого типа.</span><span class="sxs-lookup"><span data-stu-id="ce144-290">The initial implementation of the **JOIN** data source doesn't support data sources of this type.</span></span> <span data-ttu-id="ce144-291">Например, при вызове источника данных с [FILTER](er-functions-list-filter.md) в области выполнения источника данных **FILTER**, если вызываемый источник данных содержит диапазоны компаний как часть условия выбора данных, возникает исключение.</span><span class="sxs-lookup"><span data-stu-id="ce144-291">For example, when you call a [FILTER](er-functions-list-filter.md)-based data source within the scope of execution of a **JOIN** data source, if the called data source contains company ranges as part of the condition for data selection, an exception occurs.</span></span>

<span data-ttu-id="ce144-292">В Microsoft Dynamics 365 Finance версии 10.0.12 (август 2020) можно использовать диапазоны компаний в качестве части условий выбора данных в источниках данных [FILTER](er-functions-list-filter.md), которые вызываются в области выполнения источника данных **JOIN**.</span><span class="sxs-lookup"><span data-stu-id="ce144-292">In Microsoft Dynamics 365 Finance version 10.0.12 (August 2020), you can use company ranges as part of the condition for data selection in [FILTER](er-functions-list-filter.md)-based data sources that are called within the scope of execution of a **JOIN** data source.</span></span> <span data-ttu-id="ce144-293">Из-за ограничений в построителе [запросов](../dev-ref/xpp-library-objects.md#query-object-model) приложений диапазоны компаний поддерживаются только для первого источника данных **JOIN**.</span><span class="sxs-lookup"><span data-stu-id="ce144-293">Because of the limitations of the application [query](../dev-ref/xpp-library-objects.md#query-object-model) builder, the company ranges are supported only for the first data source of a **JOIN** data source.</span></span>

### <a name="example"></a><span data-ttu-id="ce144-294">Пример</span><span class="sxs-lookup"><span data-stu-id="ce144-294">Example</span></span>

<span data-ttu-id="ce144-295">Например, вам нужно выполнить единый вызов базы данных приложения, чтобы получить список проводок по внешней торговле нескольких компаний и данные о складской номенклатуре, указанной в этих проводках.</span><span class="sxs-lookup"><span data-stu-id="ce144-295">For example, you must make a single call to the application database to get the list of foreign trade transactions of multiple companies and the details of the inventory item that is referred to in those transactions.</span></span>

<span data-ttu-id="ce144-296">В этом случае вы настраиваете в сопоставлении моделей ER следующие артефакты:</span><span class="sxs-lookup"><span data-stu-id="ce144-296">In this case, you configure the following artifacts in your ER model mapping:</span></span>

- <span data-ttu-id="ce144-297">Корневой источник данных **Интрастат**, представляющий таблицу **Интрастат**.</span><span class="sxs-lookup"><span data-stu-id="ce144-297">**Intrastat** root data source that represents the **Intrastat** table.</span></span>
- <span data-ttu-id="ce144-298">Корневой источник данных **Номенклатуры**, представляющий таблицу **InventTable**.</span><span class="sxs-lookup"><span data-stu-id="ce144-298">**Items** root data source that represents the **InventTable** table.</span></span>
- <span data-ttu-id="ce144-299">Корневой источник данных **Компании**, который возвращает список компаний (в этом примере **DEMF** и **GBSI**) с нужными проводками.</span><span class="sxs-lookup"><span data-stu-id="ce144-299">**Companies** root data source that returns the list of companies (**DEMF** and **GBSI** in this example) where transactions must be accessed.</span></span> <span data-ttu-id="ce144-300">Код компании доступен в поле **Companies.Code**.</span><span class="sxs-lookup"><span data-stu-id="ce144-300">The company code is available from the **Companies.Code** field.</span></span>
- <span data-ttu-id="ce144-301">Корневой источник данных **X1** с выражением `FILTER (Intrastat, VALUEIN(Intrastat.dataAreaId, Companies, Companies.Code))`.</span><span class="sxs-lookup"><span data-stu-id="ce144-301">**X1** root data source that has the expression `FILTER (Intrastat, VALUEIN(Intrastat.dataAreaId, Companies, Companies.Code))`.</span></span> <span data-ttu-id="ce144-302">В качестве части условия для выбора данных это выражение содержит определение диапазонов компаний `VALUEIN(Intrastat.dataAreaId, Companies, Companies.Code)`.</span><span class="sxs-lookup"><span data-stu-id="ce144-302">As part of the condition for data selection, this expression contains the definition of company ranges `VALUEIN(Intrastat.dataAreaId, Companies, Companies.Code)`.</span></span>
- <span data-ttu-id="ce144-303">Источник данных **X2** в качестве вложенного элемента в источник данных **X1**.</span><span class="sxs-lookup"><span data-stu-id="ce144-303">**X2** data source as a nested item of the **X1** data source.</span></span> <span data-ttu-id="ce144-304">Он включает выражение `FILTER (Items, Items.ItemId = X1.ItemId)`.</span><span class="sxs-lookup"><span data-stu-id="ce144-304">It includes the expression `FILTER (Items, Items.ItemId = X1.ItemId)`.</span></span>

<span data-ttu-id="ce144-305">Наконец, вы можете настроить источник данных **JOIN**, где **X1** — это первый источник данных, а **X2** — второй источник данных.</span><span class="sxs-lookup"><span data-stu-id="ce144-305">Finally, you can configure a **JOIN** data source where **X1** is the first data source and **X2** is the second data source.</span></span> <span data-ttu-id="ce144-306">Вы можете указать **Запрос** в качестве параметра **выполнения**, чтобы ER выполняла этот источник данных на уровне базы данных как прямой вызов SQL.</span><span class="sxs-lookup"><span data-stu-id="ce144-306">You can specify **Query** as the **Execute** option to force ER to run this data source on the database level as a direct SQL call.</span></span>

<span data-ttu-id="ce144-307">При запуске настроенного источника данных во время [трассировки](trace-execution-er-troubleshoot-perf.md) выполнения ER в в конструкторе сопоставления моделей ER отображается следующая инструкция (как часть трассировки производительности ER).</span><span class="sxs-lookup"><span data-stu-id="ce144-307">When the configured data source is run while the ER execution is [traced](trace-execution-er-troubleshoot-perf.md), the following statement is shown in the ER model mapping designer as part of the ER performance trace.</span></span>

`SELECT ... FROM INTRASTAT T1 CROSS JOIN INVENTTABLE T2 WHERE ((T1.PARTITION=?) AND (T1.DATAAREAID IN (N'DEMF',N'GBSI') )) AND ((T2.PARTITION=?) AND (T2.ITEMID=T1.ITEMID AND (T2.DATAAREAID = T1.DATAAREAID) AND (T2.PARTITION = T1.PARTITION))) ORDER BY T1.DISPATCHID,T1.SEQNUM`

> [!NOTE]
> <span data-ttu-id="ce144-308">Если запустить источник данных **JOIN**, который был настроен таким образом, чтобы он содержал условия выбора данных, которые содержат диапазоны компаний для дополнительных источников данных выполняемого источника данных **JOIN**, произойдет ошибка.</span><span class="sxs-lookup"><span data-stu-id="ce144-308">An error occurs if you run a **JOIN** data source that has been configured so that it contains data selection conditions that have company ranges for additional data sources of the executed **JOIN** data source.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="ce144-309">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="ce144-309">Additional resources</span></span>

[<span data-ttu-id="ce144-310">Конструктор формул в электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="ce144-310">Formula designer in Electronic reporting</span></span>](general-electronic-reporting-formula-designer.md)

[<span data-ttu-id="ce144-311">Трассировка выполнения формата электронной отчетности для устранения проблем с производительностью</span><span class="sxs-lookup"><span data-stu-id="ce144-311">Trace execution of ER format to troubleshoot performance issues</span></span>](trace-execution-er-troubleshoot-perf.md)
