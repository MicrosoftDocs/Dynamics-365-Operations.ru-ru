---
title: Обзор управления бизнес-документами
description: В этой теме приводятся сведения об использовании функции управления бизнес-документами в среде ER.
author: NickSelin
ms.date: 04/12/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERBDWorkspace, ERBDParameters, ERSecurityAccessEditor
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-08-01
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: 01067a253651bbeddcc5f02c8c15c916b25b6684
ms.sourcegitcommit: 951393b05bf409333cb3c7ad977bcaa804aa801b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/13/2021
ms.locfileid: "5891313"
---
# <a name="business-document-management-overview"></a>Обзор управления бизнес-документами

[!include [banner](../includes/banner.md)]

Бизнес-пользователи используют [инфраструктуру электронной отчетности (ER)](general-electronic-reporting.md) для настройки форматов исходящих электронных документов в соответствии с требованиями законодательства различных стран/регионов. Пользователи также могут определить поток данных, чтобы указать, какие данные приложения помещаются в создаваемые документы. Инфраструктура ER создает исходящие документы в форматах Microsoft Office (книги Excel или документы Word) с помощью предварительно определенных шаблонов. Шаблоны заполняются необходимыми данными в соответствии с настроенным потоком данных, когда нужные документы создаются. Каждый настроенный формат может быть опубликован как часть решения ER для создания отдельных исходящих документов. Это представлено конфигурацией формата электронной отчетности, которая может содержать шаблоны, которые можно использовать для создания различных исходящих документов. Бизнес-пользователи могут использовать эту структуру для управления нужными деловыми документами.

**Управление бизнес-документами** основано на среде электронной отчетности и позволяет бизнес-пользователям редактировать шаблоны деловых документов с помощью службы Microsoft 365 или соответствующего приложения Microsoft Office для настольных ПК. Изменения в документы могут включать изменение дизайна деловых документов и добавление заполнителей для дополнительных данных без изменений исходного кода и новых развертываний. Для обновления шаблонов бизнес-документов знание структуры электронной отчетности не требуется.

> [!NOTE]
> Имейте в виду, что управление бизнес-документами позволяет изменять шаблоны, используемые для производства бизнес-документов, таких как заказы, накладные и т. д. Когда шаблон был изменен и была опубликована новая версия, эта версия используется для создания необходимых бизнес-документов. Управление бизнес-документами нельзя использовать для изменения уже созданных бизнес-документов.

## <a name="supported-deployments"></a>Поддерживаемые развертывания

В настоящее время функция управления бизнес-документами реализована только для развертываний в облаке. Если эта функция важна для локального развертывания, сообщите нам, предоставив отзывы на сайте [Идеи](https://experience.dynamics.com/ideas/).

## <a name="supported-microsoft-office-applications"></a>Поддерживаемые приложения Microsoft Office

Для использования управления бизнес-документами для редактирования шаблонов в формате Excel или Word с помощью приложений Microsoft Office для рабочего стола необходимо установить Microsoft Office 2010 или более позднюю версию. Это поддерживается в облачном и в локальном развертываниях.

Для использования управления бизнес-документами для редактирования шаблонов в формате Excel или Word с помощью приложений Microsoft 365 необходимо иметь подписку на Microsoft 365 Office для Интернета. Это поддерживается в развертывании в облаке.

## <a name="business-document-availability"></a>Доступность бизнес-документов

Полный список всех отчетов, запланированных для выпуска в октябре 2019 г., см. в разделе [Настраиваемая отчетность бизнес-документов в Word и Excel](/dynamics365-release-plan/2019wave2/dynamics365-finance-operations/configurable-business-documents-reporting-word-excel-pdf#feature-details).

Полный список всех отчетов, запланированных для выпуска в октябре 2020 г., см. в разделе [Настраиваемая отчетность бизнес-документов — шаблоны Word](/dynamics365-release-plan/2020wave1/dynamics365-finance/configurable-business-documents-word-templates).

В будущих выпусках будут доступны дополнительные отчеты. Специальные уведомления о дополнительных отчетах будут отправлены отдельно. Сведения о том, как просмотреть список доступных в настоящее время отчетов, см. в разделе [Список конфигураций электронной отчетности, выпущенных в Finance для поддержки настраиваемых бизнес-документов](#list-of-configurations-cbd) ниже.

Чтобы получить дополнительные сведения об этой функции, выполните пример в этой теме.

## <a name="configure-er-parameters"></a>Настройка параметров ER

Так как управление бизнес-документами выполняется на основе среды ER, необходимо настроить параметры ER, чтобы начать работу с системой управления бизнес-документами. Для этого необходимо настроить параметры электронной отчетности, как описано в разделе [Настройка платформы электронной отчетности (ER)](electronic-reporting-er-configure-parameters.md). Также необходимо добавить нового поставщика конфигурации, как описано в разделе [Создание поставщиков конфигураций и пометка их как активных](tasks/er-configuration-provider-mark-it-active-2016-11.md).

![Рабочая область электронной отчетности](./media/BDM-Overview-ERSetting.png)

## <a name="import-er-solutions"></a>Импорт решений электронной отчетности

Примеры конфигураций ER используются в примере этой процедуры. В текущий экземпляр Dynamics 365 Finance необходимо импортировать конфигурации ER, которые содержат шаблоны бизнес-документов, которые можно изменить с помощью управления бизнес-документами. Загрузите и локально сохраните следующие файлы для выполнения этой процедуры.

**Образец решения электронной отчетности для выставления накладной клиента**

| Хранилище файлов                                      | Содержимое |
|-------------------------------------------|---------|
| Customer invoicing model.version.2.xml    | [Конфигурации модели данных электронной отчетности](https://mbs.microsoft.com/customersource/Global/AX/downloads/hot-fixes/365optelecrepeg) |
| Customer FTI report (GER).version.2.3.xml | [Конфигурации формата электронной отчетности накладной с произвольным текстом](https://mbs.microsoft.com/customersource/Global/AX/downloads/hot-fixes/365optelecrepeg) |

**Пример решения чеков платежей электронной отчетности**

| Хранилище файлов                                     | Содержимое |
|------------------------------------------|---------|
| Model for cheques.version.10.xml         | [Конфигурации модели данных электронной отчетности](https://mbs.microsoft.com/customersource/Global/AX/downloads/hot-fixes/365optelecrepeg) |
| Cheques printing format.version.10.9.xml | [Конфигурация формата электронной отчетности для чека с платежом](https://mbs.microsoft.com/customersource/Global/AX/downloads/hot-fixes/365optelecrepeg) |

**Образец решения электронной отчетности для внешней торговли**

| Хранилище файлов                             | Содержимое |
|----------------------------------|---------|
| Intrastat model.version.1.xml    | [Конфигурации модели данных электронной отчетности](https://mbs.microsoft.com/customersource/Global/AX/downloads/hot-fixes/365optelecrepeg) |
| Intrastat report.version.1.9.xml | [Конфигурация формата электронной отчетности отчета управления Интрастат](https://mbs.microsoft.com/customersource/Global/AX/downloads/hot-fixes/365optelecrepeg) |

Чтобы импортировать каждый из файлов, используйте следующую процедуру. Импортируйте конфигурацию *модели данных* электронной отчетности для каждого решения ER в приведенных выше таблицах, прежде чем импортировать соответствующую конфигурацию *формата* электронной отчетности.

1. Откройте страницу **Администрирование организации** \> **Электронная отчетность** \> **Конфигурации**.
2. В верхней части страницы выберите **Exchange**.
3. Выберите **Загрузить из XML-файла**.
4. Выберите **Обзор**, чтобы загрузить требуемый файл XML.
5. Выберите **ОК**, чтобы подтвердить импорт конфигурации.

![Страница конфигураций электронной отчетности, подтверждающая импорт конфигурации](./media/BDM-Overview-ERSolutions.png)

Кроме того, можно импортировать официально опубликованные конфигурации форматов ER из Microsoft Dynamics Lifecycle Service (LCS). Например, для выполнения этой процедуры можно импортировать последнюю версию конфигурации формата ER **Накладная с произвольным текстом ( Excel)**. Соответствующая модель данных ER и конфигурации сопоставления модели ER будут импортированы автоматически.

![Страница содержимого общей библиотеки активов LCS](./media/BDM-Overview-SharedAssetLibrary.png)

Дополнительные сведения об импорте конфигураций ER см. в разделе [Управление жизненным циклом конфигурации ER](general-electronic-reporting-manage-configuration-lifecycle.md).

## <a name="enable-business-document-management"></a>Включение управления бизнес-документами

Чтобы начать управление бизнес-документами, необходимо открыть рабочую область **Управление функциями** и включить функцию **Управление бизнес-документами**.

Следующая процедура используется для включения функциональности управления бизнес-документами для всех юридических лиц.

1. Откройте рабочую область **Управление функциями**.
2. На вкладке **Создать** выберите функцию **Управление бизнес-документами** в списке.
3. Чтобы включить выбранный компонент, установите флажок **Включить сейчас**.
4. Обновите страницу, чтобы получить доступ к новому компоненту.

> [!NOTE]
> Дополнительные сведения об использовании нового пользовательского интерфейса документа в управлении бизнес-документами см. в разделе [Новый пользовательский интерфейс для документов в управлении бизнес-документами](er-business-document-management-new-template-ui.md).

![Рабочая область управления функциями](./media/BDM-Overview-FMEnabling.png)

Дополнительные сведения об активации новых функций см. в разделе [Обзор управления функциями](../../fin-ops/get-started/feature-management/feature-management-overview.md).

## <a name="configure-parameters"></a>Настроить параметры

Сведения, приведенные в следующих разделах, используются для настройки основных параметров управления бизнес-документами.

### <a name="prerequisites-for-parameter-setup"></a>Предварительные условия для настройки параметров

Прежде чем настраивать управление бизнес-документами, необходимо настроить необходимый тип документа для структуры управления документами. Этот тип документа используется для указания временного хранилища документов в форматах Office (Excel и Word), которые используются в качестве шаблонов для отчетов ER. Шаблон временного хранилища можно изменять, используя настольные приложения Office.

Для документов этого типа должны быть выбраны следующие значения атрибутов.

| Имя атрибута | Значение атрибута |
|----------------|-----------------|
| Класс          | Вложить файл     |
| Групповое          | Хранилище файлов            |
| Местоположение       | SharePoint      |

Сведения о настройке требуемых параметров управления документами и типов документов см. в разделе [Настройка управления документами](../../fin-ops/organization-administration/configure-document-management.md).

![Настройка типа документов для управления документами](./media/BDM-Overview-DMSetting.png)

### <a name="set-up-parameters"></a><a name="SetupBdmParameters"></a>Настройка параметров

Основные параметры управления бизнес-документами можно настроить на странице **Параметры бизнес-документов**. Только определенные пользователи могут получить доступ к этой странице. Сюда входят:

- Пользователи, которым назначена роль **Системный администратор**.
- Пользователи, назначенные для любой роли, настроенной для выполнения обязанностей **Ведение параметров управления бизнес-документами** (имя AOT **ERBDMaintainParameters**).

Используйте следующую процедуру, чтобы настроить базовые параметры для всех юридических лиц.

1. Выполните вход как пользователь, имеющий доступ к странице **Параметры бизнес-документов**.
2. Выберите **Администрирование организации** \> **Электронная отчетность** \> **Управление бизнес-документами** \> **Параметры бизнес-документов**.
3. На странице **Параметры бизнес-документов** на вкладке **Вложения** в поле **Тип документа SharePoint** укажите тип документа, который должен использоваться для временного хранения шаблонов в формате Office, где их можно редактировать с помощью приложений Office для рабочего стола. 

> [!NOTE]
> Для этого параметра доступны только те типы документов, которые настроены с использованием местоположения SharePoint.

![Настройка параметров управления бизнес-документами](./media/BDM-Overview-BDMSetting.png)

Выбранный тип документа зависит от компании и будет использоваться, когда пользователь работает с системой управления бизнес-документами в компании, для которой настроен выбранный тип документа. Когда пользователь работает с системой управления бизнес-документами в другой компании, этот же выбранный тип документов будет использоваться, если для этой компании не был настроен тип документа. При настройке типа документа он будет использоваться вместо выбранного в поле **Тип документа SharePoint**.

> [!NOTE]
> Параметр **Тип документа SharePoint** определяет папку SharePoint как временное хранилище для шаблонов, которые редактируются с помощью Microsoft Excel либо Word. Необходимо настроить этот параметр, если планируется использовать эти классические приложения Office для редактирования шаблонов. Дополнительные сведения см. в разделе [Редактирование шаблона в приложении Office для рабочего стола](#EditInOfficeDesktopApp). Значение этого параметра можно оставить пустым, если планируется изменить шаблон, используя только функциональные возможности в Microsoft 365. Дополнительные сведения см. в разделе [Изменение шаблона в Microsoft 365](#EditInOffice365).

## <a name="configure-access-permissions"></a>Настройка разрешений доступа

По умолчанию, когда доступ к разрешениям управления бизнес-документами отключен, все пользователи, имеющие доступ к рабочей области управления бизнес-документами, увидят все доступные шаблоны решений ER. В рабочей области управления бизнес-документами будут показаны только шаблоны, находящиеся в конфигурациях формата ER, которые помечены тегом **Тип бизнес-документов**.

![Страница конфигураций электронной отчетности с тегом типа бизнес-документа](./media/BDM-Overview-ERFormatTags.png)

Список шаблонов, доступных в рабочей области управления бизнес-документами, может быть ограничен настройкой разрешений доступа. Это может быть важно, когда используются разные шаблоны для создания бизнес-документов для различных доменов (функциональных областей) бизнеса, и необходимо разрешить конкретным пользователям доступ к разным шаблонам для редактирования в рабочей области управления бизнес-документами.

Разрешения доступа к управлению бизнес-документами можно настроить в **Конфигураторе разрешений доступа**. Только следующие пользователи могут получить доступ к этой странице:

- Пользователи, которым назначена роль **Системный администратор**.
- Пользователи, назначенные любой другой роли, настроенной для выполнения обязанностей **Настройка разрешений для доступа к шаблонам бизнес-документов для редактирования** (имя AOT **ERBDTemplatesSecurity**).

Следующая процедура используется для настройки разрешений доступа к управлению бизнес-документами для всех юридических лиц.

1. Выполните вход как пользователь, имеющий доступ к странице **Конфигуратор разрешений доступа**.
2. Выберите **Администрирование организации** \> **Электронная отчетность** \> **Управление бизнес-документами** \> **Управление разрешениями доступа**.

    Обратите внимание на уведомление, информирующие о том, что в данный момент не активировано использование прав доступа для управления бизнес-документами.

    ![Страница конфигуратора разрешений доступа к управлению бизнес-документами](./media/BDM-Overview-TemplatesAccess1.png)

    С помощью этого параметра каждый пользователь, которому назначена любая роль безопасности, которая настроена для выполнения обязанностей **Управление шаблонами бизнес-документов** (имя AOT **ERBDManageTemplates**), может открыть рабочую область управления бизнес-документами и может редактировать любой доступный шаблон.

    На следующем рисунке показано, что доступно в рабочей области управления бизнес-документми для пользователей, которым назначена роль **Сотрудник отдела по расчету с клиентами**. С текущей настройкой прав доступа пользователь может редактировать шаблоны бизнес-документов из других функциональных областей, включая выставление накладных, отчетность по соответствию нормативным документам и платежи.

    ![Страница рабочей области управления деловыми документами для клерка расчетов с клиентами](./media/BDM-Overview-TemplatesForAlice1.png)

3. На странице **Конфигуратор разрешений доступа** выберите **Настройка разрешений доступа**.
4. В диалоговом окне **Параметры разрешений доступа для редактирования шаблонов** включите параметр **Применить настроенные разрешения доступа**.
5. Выберите **ОК**, чтобы подтвердить, что разрешения доступа для управления бизнес-документами включены.

    ![Подтверждение разрешений доступа к управлению бизнес-документами](./media/BDM-Overview-TemplatesAccess2.png)

6. Выберите **Добавить**, чтобы ввести новую бизнес-роль, для которой должны быть настроены разрешения на доступ к шаблонам управления бизнес-документами.
7. В диалоговом окне **Роли безопасности** выберите роль **Сотрудник отдела по расчету с клиентами**, затем выберите **OK**, чтобы подтвердить выбор роли.
8. На вкладке **Разрешения доступа по маркерам конфигураций** выберите **Создать**.
9. В поле **Тип маркера** выберите **Функциональная область**, а в поле **Код** выберите **Выставление накладных**.
10. Выберите **Сохранить**, чтобы сохранить настроенные разрешения доступа для выбранной роли.

    Текущая настройка означает, что для любого пользователя, которому назначена роль **Сотрудник отдела по расчету с клиентами** и который выполняет обязанность, **Управление шаблонами бизнес-документов** (имя AOT **ERBDManageTemplates**), шаблоны конфигурации формата электронной отчетности, которые имеют значение **Выставление накладных** для маркера **Функциональная область**, будут доступны для редактирования в рабочей области управления бизнес-документами.

11. Переключите область **Связанные сведения** с правой стороны текущей страницы. Область **Связанные сведения** показывает, как будут применяться настроенные разрешения доступа, в том числе какие шаблоны конфигурации электронной отчетности будут доступны для пользователей, назначенных роли **Сотрудник отдела по расчетам с клиентами**.

    ![Область связанных сведений на странице конфигуратора прав доступа](./media/BDM-Overview-TemplatesAccess3.png)

12. На вкладке **Разрешения доступа по конфигурациям** выберите параметр **Добавить**.
13. В диалоговом окне **Выбор конфигурации** пометьте конфигурацию формата электронной отчетности **Отчет Интрастат**.
14. Выберите **ОК**, чтобы подтвердить ввод выбранных конфигураций, затем выберите **Сохранить**, чтобы сохранить настроенные права доступа для выбранной роли.

Текущая настройка означает, что для любого пользователя, которому назначена роль **Сотрудник отдела по расчету с клиентами** и который выполняет обязанность, **Управление шаблонами бизнес-документов** (имя AOT **ERBDManageTemplates**), следующие шаблоны будут доступны для редактирования в рабочей области управления бизнес-документами:

- Шаблоны, имеющие значение **Выставление накладных** для маркера **Функциональная область**.
- Шаблоны из конфигураций форматов электронной отчетности, которые указаны на вкладке **Разрешения доступа по конфигурациям** (шаблоны из конфигурации формата **Отчет Интрастат** в домене **Регламентная отчетность** в этом примере).

![Экспресс-вкладка разрешений доступа на странице конфигуратора разрешений доступа](./media/BDM-Overview-TemplatesAccess4.png)

На следующем рисунке показано, что рабочая область управления бизнес-документами предоставляет пользователю, которому назначена роль **Сотрудник отдела по расчету с клиентами**. С текущей настройкой разрешений доступа к управлению бизнес-документами пользователь может редактировать шаблоны бизнес-документов из домена **Выставление накладных** и конфигурации формата электронной отчетности **Отчет Интрастат**. Шаблоны из домена **Платежи** недоступны для роли **Сотрудник отдела по расчету с клиентами**.

![Изменение шаблонов бизнес-документов на странице рабочей области управления бизнес-документами](./media/BDM-Overview-TemplatesForAlice2.png)

> [!NOTE]
> Правила **Разрешения доступа по конфигурациям** хранятся с использованием уникального идентификационного кода конфигурации формата электронной отчетности. Это означает, что эти правила не будут удалены при удалении конфигурации ER, которая ссылается на эти правила. При импорте удаленных конфигураций обратно в данный экземпляр эти правила будут ссылаться на них снова. После повторного импорта удаленных конфигураций нет необходимости заново настраивать правила снова.

## <a name="use-business-document-management-to-edit-templates"></a>Использование управления бизнес-документами для редактирования шаблонов

Бизнес-пользователи могут получить доступ к шаблонам бизнес-документов для редактирования в рабочей области управления бизнес-документами. Только следующие пользователи могут получить доступ к рабочей области управления бизнес-документами:

- Пользователи, которым назначена роль **Системный администратор**.
- Пользователи, назначенные любой роли, настроенной для выполнения обязанностей **Управление шаблонами бизнес-документов** (имя AOT **ERBDManageTemplates**).

Следующая процедура используется для редактирования шаблонов накладных с произвольным текстом в рабочей области управления бизнес-документами. Перед выполнением этой процедуры необходимо выполнить все предыдущие процедуры, описанные в этой теме.

1. Выполните вход как пользователь, имеющий доступ к рабочей области управления бизнес-документами.
2. Откройте рабочую область управления бизнес-документами.

Если функция **Взаимодействие с пользовательским интерфейсов по типу Office для управления бизнес-документами** отключена в рабочей области **Управления функциями**, главная сетка в рабочей области **Управление бизнес-документами** содержит следующие шаблоны:

- Шаблоны, владельцем которых является ваш поставщик конфигурации электронной отчетности (то есть, поставщик, который в настоящее время помечен как активный в рабочей области **Электронная отчетность**). После выбора одного из этих шаблонов можно выбрать пункт **Изменить шаблон**, чтобы начать или продолжить его редактирование.
- Шаблоны, принадлежащие другим поставщикам конфигурации электронной отчетности. После выбора одного из этих шаблонов можно выбрать **Создать документ**, чтобы создать его копию, принадлежащую поставщику конфигурации электронной отчетности, затем начать редактирование копии.

![Списки шаблонов на странице рабочей области управления бизнес-документами](./media/BDM-Overview-EditingTemplate1.png)

На вкладке **Шаблон** представлено содержимое выбранного шаблона. Перейдите на вкладку **Сведения**, чтобы просмотреть сведения о выбранном шаблоне, а также сведения о конфигурации формата ER, в котором находится данный шаблон. Обратите внимание, что все шаблоны имеют статус **Опубликован** и не содержат сведений в столбце **Версия**. Это означает, что эти шаблоны не редактируются в данный момент.

Если функция **Взаимодействие с пользовательским интерфейсов по типу Office для управления бизнес-документами** включена в рабочей области **Управление функциями**, главная сетка в рабочей области **Управление бизнес-документами** показывает шаблоны, владельцем которых является поставщик конфигурации электронной отчетности (то есть, поставщик, который в данный момент помечен как активный в рабочей области **Электронная отчетность**). После выбора одного из этих шаблонов можно выбрать пункт **Изменить шаблон**, чтобы начать или продолжить его редактирование.

Для работы с шаблонами, принадлежащими другим поставщикам конфигурации электронной отчетности, выберите **Создать документ**, чтобы создать копию шаблона, владельцем которой является ваш поставщик электронной отчетности. Затем можно приступать к редактированию копии. Дополнительные сведения см. в разделе [Новый пользовательский интерфейс для документов в управлении бизнес-документами](er-business-document-management-new-template-ui.md).

### <a name="initiate-editing-templates-owned-by-your-configuration-provider"></a>Инициирование редактирования шаблонов, принадлежащих вашему поставщику конфигураций

1. В рабочей области управления бизнес-документами выберите шаблон **Формат печати чеков** в списке.
2. Выберите вкладку **Сведения**.

![Страница рабочей области управления бизнес-документами, вкладка сведений](./media/BDM-Overview-EditingTemplate2.png)

Параметр **Изменить шаблон** доступен для выбранного шаблона. Этот параметр всегда доступен для шаблона в конфигурации формата ER, которая принадлежит активному поставщику конфигурации электронной отчетности (**Litware, Inc.** в данном примере). Когда выбран пункт **Изменить шаблон**, существующий шаблон из черновой версии базовой конфигурации формата ER будет доступен для редактирования.

### <a name="initiate-editing-templates-owned-by-other-providers"></a>Инициирование редактирования шаблонов, принадлежащих другим поставщикам

1. В рабочей области управления бизнес-документами выберите документ, который необходимо использовать в качестве шаблона.

    ![Выбор документа на странице рабочей области управления бизнес-документами](./media/BDM-Overview-EditingTemplate3.png)

2. Выберите **Создать документ**, а в поле **Заголовок** измените заголовок редактируемого шаблона, если это необходимо. Этот текст будет использоваться для имени конфигурации формата ER, которая создается автоматически. Обратите внимание, что черновая версия этой конфигурации (**Копия отчета FTI клиента (GER)**), которая будет содержать отредактированный шаблон, будет автоматически помечена для запуска этого формата ER для текущего пользователя. В то же время для запуска этого формата ER для любого другого пользователя будет использоваться неизмененный исходный шаблон из базовой конфигурации формата ER.
3. В поле **Имя** измените имя первой редакции редактируемого шаблона, которая будет создана автоматически.
4. В поле **Комментарий** измените комментарий для автоматически созданной редакции редактируемого шаблона.
5. Выберите **ОК**, чтобы подтвердить начало процесса редактирования.

![Подтверждение начала процесса редактирования для создания нового шаблона](./media/BDM-Overview-EditingTemplate4.png)

Если поставщика нет, его предложат создать. Если активного поставщика нет, будет предложено выбрать его для активации.

Чтобы создать поставщика, измените имя поставщика в поле **имя**, обновите веб-адрес нового поставщика в поле **Веб-адрес** и нажмите кнопку **ОК** для подтверждения.

   ![Создать нового поставщика в BDM](./media/bdm_create_provider.png)

Чтобы активировать существующего поставщика, выберите имя поставщика в поле **Поставщик конфигурации** и нажмите кнопку **OK**, чтобы указать поставщика в качестве активного.

   ![Активация поставщика в BDM](./media/bdm_choose_provider.png)

> [!NOTE]
> Каждый шаблон BDM ссылается на поставщика как автора конфигурации. Это объясняется тем, что для шаблона необходим активный поставщик.


Параметр **Создать документ** всегда доступен для шаблона в конфигурации формата ER, который предоставлен другим поставщиком (Microsoft в данном примере), и не имеет какой-либо редакции. Измененный шаблон будет затем сохранен в новой конфигурации формата ER, которая создается автоматически.



### <a name="start-editing-a-template"></a>Начало редактирования шаблона

1. В выбранном шаблоне выберите **Редактировать документ**.
2. В поле **Имя** измените имя первой редакции редактируемого шаблона, которая будет создана автоматически.
3. В поле **Комментарий** измените примечание для автоматически созданной редакции редактируемого шаблона.

    ![Редактирование шаблона на странице рабочей области управления бизнес-документами](./media/BDM-Overview-EditingTemplate5.png)

4. Выберите **ОК**, чтобы подтвердить начало процесса редактирования.

Откроется страница **Редактор шаблонов BDM**. Выбранный шаблон будет доступен для оперативного редактирования с помощью Microsoft 365.

![Страница редактора шаблона управления бизнес-документами](./media/BDM-Overview-EditingLayout1.png)

### <a name="edit-a-template-in-microsoft-365"></a><a name="EditInOffice365"></a>Редактирование шаблона в Microsoft 365

Можно изменить шаблон, используя Microsoft 365. Например, в Office Online измените шрифт приглашений полей в заголовке шаблона с **Обычный** на **Полужирный**. Эти изменения автоматически сохраняются для редактируемого шаблона, который хранится в хранилище первичного шаблона (по умолчанию это хранилище BLOB-объектов Azure). Оно настроено для структуры ER.

![Изменение шрифта на жирный в заголовке шаблона на странице редактора шаблонов управления бизнес-документами](./media/BDM-Overview-EditingLayout2.png)

### <a name="edit-a-template-in-the-office-desktop-application"></a><a name="EditInOfficeDesktopApp"></a>Редактирование шаблона в приложении Office для рабочего стола

> [!NOTE]
> Эта функция доступна только в том случае, если параметр **Тип документа SharePoint** настроен правильно. Дополнительные сведения см. в [Настройка параметров](#SetupBdmParameters).

1. Выберите параметр **Открыть в классическом приложении** для изменения шаблона с помощью функций классического приложения Office (Excel в данном примере). Редактируемый шаблон копируется из постоянного хранилища во временное хранилище, настроенное в параметрах управления бизнес-документами, в виде папки SharePoint.
2. Подтвердите, что вы хотите открыть шаблон из временного хранилища файлов в классическом приложении Office Excel.

    ![Шаблон открыт в классическом приложении Excel](./media/BDM-Overview-EditingLayout3.png)

3. Измените шаблон. Например, измените шрифт приглашений полей в заголовке шаблона, обновив цвет с **Черный** на **Синий**.

    ![Изменение цвета шрифта в заголовке шаблона с помощью классического приложения Excel](./media/BDM-Overview-EditingLayout4.png)

4. Выберите **Сохранить** в классическом приложении Excel для сохранения изменений шаблона во временном хранилище.

    ![Сохранение изменений на странице редактора шаблонов управления бизнес-документами с помощью классисческого приложения Excel](./media/BDM-Overview-EditingLayout5.png)

5. Закройте классическое приложение Excel.
6. Выберите **Синхронизировать сохраненную копию** для синхронизации временного хранилища шаблонов с постоянным хранилищем шаблонов.

> [!NOTE]
> Копия редактируемого шаблона во временном хранилище файлов сохраняется только для текущего сеанса редактирования шаблона. При завершении сеанса путем закрытия страницы **Редактор шаблона BDM** эта копия будет удалена. Если шаблон был изменен во временном хранилище файлов, и при этом не была выбрана **Синхронизация сохраненной копии**, то при попытке закрыть страницу **Редактор шаблона BDM** появится сообщение с запросом, нужно ли сохранить сделанные изменения. Выберите **Да**, если вы хотите сохранить изменения шаблона в постоянном местоположении файлов.

### <a name="validate-a-template"></a>Проверка шаблона

1. На странице **Редактора шаблонов BDM** выберите **Проверить на наличие ошибок**, чтобы проверить измененный шаблон с использованием базовой конфигурации формата ER. Следуйте рекомендациям (если они имеются), чтобы привести шаблон в соответствие со структурой формата из базовой конфигурации формата ER.
2. Выберите **Показать формат**, чтобы просмотреть текущую структуру формата из базовой конфигурации формата ER, которая должна соответствовать редактируемому шаблону. 
3. Выберите **Скрыть формат**, чтобы закрыть область.

    ![Страница редактора шаблонов BDM BDM](./media/BDM-Overview-EditingTemplate6.png)

4. Закройте страницу **Редактор шаблонов BDM**.

Обновленный шаблон отображается на вкладке **Шаблон**. Обратите внимание, что статус измененного шаблона теперь **Черновик**, а текущая редакция больше не является пустой. Это означает, что процесс редактирования этого шаблона был запущен.

![Просмотр обновленного шаблона на странице рабочей области управления бизнес-документами](./media/BDM-Overview-EditingTemplate5.png)

### <a name="test-the-modified-template"></a>Тестирование измененного шаблона 

1. В приложении измените компанию, **USMF**.
2. Перейдите в раздел **Расчеты с клиентами** \> **Накладные** \> **Все накладные с произвольным текстом**.
3. Выберите накладную **FTI-00000002**, затем выберите **Управление печатью**.
4. Выберите уровень **Модуль - Расчеты с клиентами** \> **Документы** \> **Накладная с произвольным текстом** \> **Исходный документ**, чтобы указать область накладных для обработки.
5. В поле **Формат отчета** выберите формат электронной отчетности **Копия отчета FTI клиента (GER)** для указанного уровня документа.

    ![Страница настройки управления печатью](./media/BDM-Overview-TestRun1.png)

6. Нажмите клавишу **Escape**, чтобы закрыть текущую страницу.
7. Выберите **Печать**, затем выберите **Выбранное**.
8. Загрузите документ и откройте его с помощью настольного приложения Excel

![Страница накладных с произвольным текстом](./media/BDM-Overview-TestRun2.png)

Измененный шаблон используется для создания отчета по накладной с произвольным текстом для выбранной номенклатуры. Чтобы проанализировать влияние изменений, введенных в шаблон, на этот отчет, можно выполнить этот отчет в одном сеансе приложения непосредственно после того, как был изменен шаблон в другом сеансе приложения.

### <a name="create-an-alternative-template-revision"></a>Создание альтернативной версии шаблона

1. Откройте страницу **Редактор шаблона BDM** и выберите шаблон **Копия отчета FTI клиента (GER)**.
2. На вкладке **Версии** выберите **Создать**.
3. При необходимости в поле **Имя** измените имя второй редакции, основываясь на текущей активной первой версии.
4. Если требуется, в поле **Комментарий** измените примечание для автоматически созданной редакции редактируемого шаблона.

    ![Создание версий шаблона на странице рабочей области управления бизнес-документами](./media/BDM-Overview-AddRevision.png)

    Была создана новая редакция шаблона, которая была сохранена в постоянном хранилище шаблона. Теперь можно продолжить редактирование шаблона второй редакции, которая в данный момент выбрана в качестве активной.

5. Выберите первую редакцию, затем выберите **Установить как активную**. Можно выбрать другую версию в качестве активной, если в любой момент вы хотите вернуться к этой редакции шаблона.
6. Выберите вторую редакцию, затем выберите **Удалить**.
7. Выберите **ОК** для подтверждения, что вы хотите удалить выбранную версию. Можно удалить любую неактивную редакцию, когда она больше не нужна.

### <a name="delete-a-modified-template"></a>Удаление измененного шаблона

1. На странице **Редактор шаблона BDM** выберите вкладку **Шаблон**.
2. Выберите **Удалить**.
3. При выборе **ОК** для подтверждения удаления формат ER **Копия отчета FTI клиента (GER)** будет удален с измененным шаблоном. Выберите **Отмена** для просмотра других вариантов.

### <a name="revoke-changes-of-template"></a>Отмена изменений шаблона

При изменении шаблона из формата ER, который принадлежит текущему активному поставщику, вам будет предложена возможность выбрать отмену изменений, внесенных в шаблон.

![Отклонение изменений в шаблоне на странице рабочей области управления бизнес-документами](./media/BDM-Overview-RevokeChanges.png)

1. На странице **Редактор шаблона BDM** выберите вкладку **Шаблон**.
2. Выберите **Отменить**.
3. Если выбрать **ОК**, чтобы отменить изменения, внесенный в шаблон, измененный шаблон будет заменен исходным шаблоном, и все изменения будут удалены. При отмене изменений шаблона можно будет удалить шаблон. Выберите **Отмена** для просмотра других вариантов.

### <a name="publish-a-modified-template"></a>Публикация измененного шаблона

1. На странице **Редактор шаблона BDM** на вкладке **Шаблон** выберите **Опубликовать**.
2. Если выбрать **ОК**, чтобы подтвердить публикацию, черновая версия производного формата ER **Копия отчета FTI клиента (GER)**, который содержит измененный шаблон, будет помечена как завершенная. Измененный шаблон становится доступным для других пользователей. Завершенные версии этого формата ER будут хранить только последнюю активную версию шаблона. Другие редакции будут удалены. Выберите **Отмена** для просмотра других вариантов.

## <a name="frequently-asked-questions"></a>Вопросы и ответы

### <a name="i-selected-edit-document-but-instead-of-going-to-the-bdm-template-editor-page-in-finance-i-was-sent-to-the-microsoft-365-webpage"></a>Был выбран пункт "Редактировать документ", но вместо того, чтобы перейти на страницу редактора шаблонов BDM в Finance, открылась веб-страница Microsoft 365.

Это известная проблема, связанная с перенаправлением Microsoft 365. Она происходит при первом входе в Microsoft 365. Чтобы обойти эту проблему, нажмите кнопку **Назад** в браузере, чтобы вернуться на предыдущую страницу.

### <a name="i-understand-how-to-edit-a-template-by-using-microsoft-365-in-the-first-application-session-and-how-to-use-the-template-in-the-second-application-session-and-adjust-the-template-to-see-how-my-changes-affect-the-generated-business-document-can-i-use-the-office-desktop-application-in-the-same-way"></a>Понятно, как редактировать шаблон с помощью Microsoft 365 в первом сеансе приложения и как использовать шаблон во втором сеансе приложения и настраивать шаблон, чтобы увидеть, как изменения влияют на созданный бизнес-документ. Можно ли использовать классическое приложение Office аналогичным образом?

Да, можно. В первом сеансе приложения выберите **Открыть в классическом приложении**. Ваш шаблон будет сохранен во временном хранилище файлов и открыт в настольном приложении Office. Затем выполните следующие шаги для предварительного просмотра изменений шаблона в созданном бизнес-документе:

1. Внесите изменения в шаблон, используя приложение Office для рабочего стола.
2. Выберите **Сохранить** в приложении Office для рабочего стола.
3. На странице **Редактор шаблонов BDM** первого сеанса приложения выберите **Синхронизировать сохраненную копию**.
4. Выполните этот формат ER шаблона во втором сеансе приложения.

### <a name="when-i-select-open-in-desktop-app-i-receive-the-following-error-message-value-cannot-be-null-parameter-name-externalid-how-do-i-work-around-this-issue"></a>При выборе открытия в классическом приложении появляется следующее сообщение об ошибке: "Значение не может быть равно null. Имя параметра: externalId." Как обойти эту проблему?

Скорее всего вы выполнили вход в текущий экземпляр приложения домена Azure AD, отличающегося от домена Azure AD, который использовался для развертывания данного экземпляра. Поскольку служба SharePoint, используемая для хранения шаблонов, чтобы сделать их доступными для редактирования с помощью приложений Office для рабочего стола, относится к тому же домену, у нас нет прав доступа к службе SharePoint. Чтобы решить эту проблему, выполните вход в текущий экземпляр, используя учетные данные пользователя с правильным доменом Azure AD.

## <a name="additional-resources"></a>Дополнительные ресурсы

[Обзор электронной отчетности (ER)](general-electronic-reporting.md)

[Электронная отчетность — Разработка конфигурации для создания отчетов в формате OPENXML (ноябрь 2016 г.)](tasks/er-design-reports-openxml-2016-11.md)

[Разработка конфигураций электронной отчетности для создания отчетов в формате Word](tasks/er-design-configuration-word-2016-11.md)

[Внедрение изображений и фигур в документы, создаваемые с помощью электронной отчетности](electronic-reporting-embed-images-shapes.md)

[Настройка электронной отчетности (ER) для загрузки данных в Power BI](general-electronic-reporting-report-configuration-get-data-powerbi.md)

## <a name="list-of-er-configurations-that-have-been-released-in-finance-to-support-configurable-business-documents"></a><a name="list-of-configurations-cbd"></a>Список конфигураций электронной отчетности, выпущенных в Finance для поддержки настраиваемых бизнес-документов

[Список](general-electronic-reporting.md#list-of-configurations) конфигураций электронной отчетности для Finance постоянно обновляется. Откройте [глобальный репозиторий](er-download-configurations-global-repo.md) для просмотра списка конфигураций электронной отчетности, которые в настоящее время поддерживаются. Можно выполнить [фильтрацию](../../../finance/localizations/enhanced-filtering-global-repo.md) глобального репозитория, чтобы просмотреть список конфигураций электронной отчетности, которые используются для поддержки настраиваемых бизнес-документов.

![Фильтрация содержимого глобального репозитория на странице репозитория конфигураций](./media/bdm-overview-filterglobalrepo.gif)

В следующей таблице представлен список конфигураций электронной отчетности, поддерживающих настраиваемые бизнес-документы и выпущенных в Finance до декабря 2020 года.

| Конфигурация модели данных    | Конфигурации форматов                           |
|-----------------------------|-------------------------------------------------|
| Модель транспортной накладной        | Транспортная накладная (Excel)                          |
|                             | Транспортная накладная (Word)                           |
| Модель сертификата происхождения | Сертификат происхождения (Excel)                   |
|                             | Сертификат происхождения (Word)                    |
| Модель накладных               | Дебет-нота клиента и кредит-нота (Excel)          |
|                             | Дебет-нота клиента и кредит-нота (Word)           |
|                             | Накладная с произвольным текстом (Excel)                       |
|                             | Накладная с произвольным текстом (Excel) (BH)                  |
|                             | Накладная с произвольным текстом (FR) (Excel)                  |
|                             | Накладная с произвольным текстом (LT) (Excel)                  |
|                             | Накладная с произвольным текстом (LV) (Excel)                  |
|                             | Накладная с произвольным текстом (PL) (Excel)                  |
|                             | Накладная с произвольным текстом (CZ) (Excel)                  |
|                             | Накладная с произвольным текстом (EE) (Excel)                  |
|                             | Накладная с произвольным текстом (HU) (Excel)                  |
|                             | Накладная с произвольным текстом (TH) (Excel)                  |
|                             | Накладная с произвольным текстом (Word)                        |
|                             | Номенклатуры строки контракта по проекту (Excel)             |
|                             | Номенклатуры строки контракта по проекту (CZ) (Excel)        |
|                             | Номенклатуры строки контракта по проекту (Excel) (BH)        |
|                             | Номенклатуры строки контракта по проекту (HU) (Excel)        |
|                             | Номенклатуры строки контракта по проекту (LT) (Excel)        |
|                             | Номенклатуры строки контракта по проекту (PL) (Excel)        |
|                             | Номенклатуры строки контракта по проекту (Word)              |
|                             | Выпуск удержанной суммы клиента по проекту (Excel)      |
|                             | Выпуск удержанной суммы клиента по проекту (CZ) (Excel) |
|                             | Выпуск удержанной суммы клиента по проекту (HU) (Excel) |
|                             | Выпуск удержанной суммы клиента по проекту (LT) (Excel) |
|                             | Выпуск удержанной суммы клиента по проекту (PL) (Excel) |
|                             | Выпуск удержанной суммы клиента по проекту (TH) (Excel) |
|                             | Выпуск удержанной суммы клиента по проекту (Word)       |
|                             | Накладная по проекту (Excel)                         |
|                             | Накладная по проекту (Word)                          |
|                             | Накладная по проекту (AE) (Excel)                    |
|                             | Накладная по проекту (CZ) (Excel)                    |
|                             | Накладная по проекту (Excel) (BH)                    |
|                             | Накладная по проекту (HU) (Excel)                    |
|                             | Накладная по проекту (JP) (Excel)                    |
|                             | Накладная по проекту (LT) (Excel)                    |
|                             | Накладная по проекту (PL) (Excel)                    |
|                             | Накладная по проекту (TH) (Excel)                    |
|                             | Накладная по проекту полная (MY) (Excel)               |
|                             | Накладная по проекту простая (MY) (Excel)             |
|                             | Накладная по управлению проектом (Excel)                  |
|                             | Накладная по управлению проектом (CZ) (Excel)             |
|                             | Накладная по управлению проектом (Excel) (BH)             |
|                             | Накладная по управлению проектом (HU) (Excel)             |
|                             | Накладная по управлению проектом (JP) (Excel)             |
|                             | Накладная по управлению проектом (LT) (Excel)             |
|                             | Накладная по управлению проектом (PL) (Excel)             |
|                             | Накладная по управлению проектом (Word)                   |
|                             | Авансовый счет покупки (Excel)                |
|                             | Авансовый счет покупки (Word)                 |
|                             | Авансовый счет продаж (Excel)                   |
|                             | Авансовый счет продаж (Word)                    |
|                             | Авансовый счет продаж (PL) (Excel)              |
|                             | Накладная по продаже (Excel)                           |
|                             | Накладная по продаже (Excel) (BH)                      |
|                             | Накладная по продаже (Excel) (CZ)                      |
|                             | Накладная по продаже (Excel) (EE)                      |
|                             | Накладная по продаже (Excel) (FR)                      |
|                             | Накладная по продаже (Excel) (HU)                      |
|                             | Накладная по продаже (Excel) (IN)                      |
|                             | Накладная по продаже (Excel) (LT)                      |
|                             | Накладная по продаже (Excel) (LV)                      |
|                             | Накладная по продаже (Excel) (PL)                      |
|                             | Накладная по продаже (Excel) (TH)                      |
|                             | Накладная по продаже (Word)                            |
|                             | Торговая накладная TMS (Excel)                  |
|                             | Торговая накладная TMS (Word)                   |
|                             | Документ накладной поставщика (Excel)                 |
|                             | Документ накладной поставщика (CZ) (Excel)            |
|                             | Документ накладной поставщика (HU) (Excel)            |
|                             | Документ накладной поставщика (IN) (Excel)            |
|                             | Документ накладной поставщика (LT) (Excel)            |
|                             | Документ накладной поставщика (LV) (Excel)            |
|                             | Документ накладной поставщика (MY) (Excel)            |
|                             | Документ накладной поставщика (Word)                  |
| Модель заказов                 | Подтверждение договора (Excel)                  |
|                             | Подтверждение договора (Word)                   |
|                             | Подтверждение договора покупки (Excel)         |
|                             | Подтверждение договора покупки (Word)          |
|                             | Заказ на покупку (Excel)                          |
|                             | Заказ на покупку (CZ) (Excel)                     |
|                             | Запрос заказа на покупку (CZ) (Excel)             |
|                             | Заказ на покупку (HU) (Excel)                     |
|                             | Запрос заказа на покупку (HU) (Excel)             |
|                             | Заказ на покупку (Word)                           |
|                             | Запрос заказа на покупку (Excel)                  |
|                             | Запрос заказа на покупку (Word)                   |
|                             | Подтверждение заказа на продажу (Excel)                |
|                             | Подтверждение заказа на продажу (CZ) (Excel)           |
|                             | Подтверждение заказа на продажу (HU) (Excel)           |
|                             | Подтверждение заказа на продажу (Word)                 |
| Модель листа подбора          | Содержимое контейнера (Excel)                      |
|                             | Содержимое контейнера (Word)                       |
|                             | Список загрузки (Excel)                               |
|                             | Список загрузки (Word)                                |
|                             | Лист подбора (Excel)                            |
|                             | Лист подбора (CZ) (Excel)                       |
|                             | Лист подбора (Word)                             |
|                             | Лист комплектации производства (Excel)                    |
|                             | Лист комплектации производства (Word)                     |
|                             | Отгрузочная накладная для загрузки (Excel)             |
|                             | Отгрузочная накладная для загрузки (Word)              |
|                             | Отгрузочная накладная для отгрузки (Excel)         |
|                             | Отгрузочная накладная для отгрузки (Word)          |
|                             | Отгрузочная накладная для волны (Excel)             |
|                             | Отгрузочная накладная для волны (Word)              |
| Модель платежа               | Уведомление об оплате клиента (Excel)                 |
|                             | Уведомление об оплате клиента (Word)                  |
|                             | Уведомление об оплате поставщику (Excel)                   |
|                             | Уведомление об оплате поставщику (Word)                    |
| Модель предложения             | Предложение по проекту (Excel)                       |
|                             | Предложение по проекту (Word)                        |
|                             | Запрос предложения (Excel)                   |
|                             | Запрос предложения (принять) (Excel)          |
|                             | Запрос предложения (принять) (Word)           |
|                             | Запрос предложения (отклонить) (Excel)          |
|                             | Запрос предложения (отклонить) (Word)           |
|                             | Запрос предложения (вернуть) (Excel)          |
|                             | Запрос предложения (вернуть) (Word)           |
|                             | Запрос предложения (Word)                    |
|                             | Предложение по продаже (Excel)                         |
|                             | Предложение по продаже (CZ) (Excel)                    |
|                             | Предложение по продаже (HU) (Excel)                    |
|                             | Предложение по продаже (Word)                          |
|                             | Подтверждение предложения по продаже (Excel)            |
|                             | Подтверждение предложения по продаже (Word)             |
| Модель выверки        | Выписка по счету клиента, внешняя (Excel)             |
|                             | Выписка по счету клиента, внешняя (CN) (Excel)        |
|                             | Выписка по счету клиента, внешняя (Word)              |
|                             | Выписка по счету клиента, Франция (Excel)          |
| Модель напоминаний              | Примечание к письму-напоминанию (Excel)                  |
|                             | Примечание к письму-напоминанию (CN) (Excel)             |
|                             | Примечание к письму-напоминанию (Word)                   |
|                             | Процент-нота клиента (Excel)                  |
|                             | Процент-нота клиента (Word)                   |
| Модель путевого листа               | Способ доставки груза (Excel)                             |
|                             | Способ доставки груза (Word)                              |
|                             | Отборочная накладная заказа на покупку (Excel)             |
|                             | Отборочная накладная заказа на покупку (CZ) (Excel)        |
|                             | Отборочная накладная заказа на покупку (Word)              |
|                             | Маршрут (Excel)                                   |
|                             | Маршрут (Word)                                    |
|                             | Отборочная накладная заказа на продажу (Excel)                |
|                             | Отборочная накладная заказа на продажу (CZ) (Excel)           |
|                             | Отборочная накладная заказа на продажу (LT) (Excel)           |
|                             | Отборочная накладная заказа на продажу (PL) (Excel)           |
|                             | Отборочная накладная заказа на продажу (Word)                 |


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
