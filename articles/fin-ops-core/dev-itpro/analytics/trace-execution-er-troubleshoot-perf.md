---
title: Трассировка выполнения форматов электронной отчетности для устранения неполадок, связанных с производительностью
description: В этой теме приводятся сведения об использовании функции трассировки производительности в электронной отчетности (ER) для устранения проблем с производительностью.
author: NickSelin
manager: AnnBe
ms.date: 06/12/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: 220314
ms.assetid: 2685df16-5ec8-4fd7-9495-c0f653e82567
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: ''
ms.dyn365.ops.version: 10.0.1
ms.openlocfilehash: 9a5f943a507483bb4c1bd7fe87c0d65353194a6e
ms.sourcegitcommit: 659375c4cc7f5524cbf91cf6160f6a410960ac16
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/05/2020
ms.locfileid: "4687435"
---
# <a name="trace-the-execution-of-er-formats-to-troubleshoot-performance-issues"></a>Трассировка выполнения форматов электронной отчетности для устранения проблем с производительностью

[!include[banner](../includes/banner.md)]

В процессе разработки конфигураций электронной отчетности (ER) для создания электронных документов определяется метод, используемый для извлечения данных из приложения и ввода их в создаваемые выводные данные. Функция трассировки производительности электронной отчетности позволяет значительно сократить время и затраты, связанные со сбором сведений о выполнении формата ER, и использовать их для устранения неполадок, связанных с производительностью. В этом учебнике приводятся инструкции по выполнению трассировки производительности для выполняемых форматов электронной отчетности, а также по использованию сведений из этих трассировок для повышения производительности.

## <a name="prerequisites"></a>Необходимые условия

Чтобы завершить примеры из этого учебника, необходимы следующие возможности доступа:

- Доступ к одной из следующих ролей:

    - Разработчик электронной отчетности
    - Консультант по функциональным возможностям электронной отчетности
    - Системный администратор

- Доступ к экземпляру служб Regulatory Configuration Service (RCS), который был настроен для того же клиента, что и приложение, для одной из следующих ролей:

    - Разработчик электронной отчетности
    - Консультант по функциональным возможностям электронной отчетности
    - Системный администратор

Кроме того, необходимо загрузить следующие файлы и сохранить их локально.

| Хранилище файлов                                  | Содержание                               |
|---------------------------------------|---------------------------------------|
| Модель трассировки производительности.версия.1     | [Пример конфигурации модели данных электронной отчетности](https://mbs.microsoft.com/customersource/Global/AX/downloads/hot-fixes/365optelecrepeg)    |
| Метаданные трассировки производительности.версия.1  | [Пример конфигурации метаданных электронной отчетности](https://mbs.microsoft.com/customersource/Global/AX/downloads/hot-fixes/365optelecrepeg)      |
| Сопоставление трассировки производительности.версия.1.1 | [Пример конфигурации сопоставления модели электронной отчетности](https://mbs.microsoft.com/customersource/Global/AX/downloads/hot-fixes/365optelecrepeg) |
| Формат трассировки производительности.версия.1.1  | [Пример конфигурации формата электронной отчетности](https://mbs.microsoft.com/customersource/Global/AX/downloads/hot-fixes/365optelecrepeg)       |

### <a name="configure-er-parameters"></a>Настройка параметров ER

Каждая трассировка производительности электронной отчетности, созданная в приложении, сохраняется в виде вложения в записи журнала выполнения. Для управления этими вложениями используется структура управления документооборотом (DM). Необходимо заранее настроить параметры электронной отчетности, чтобы указать тип документа DM, который должен использоваться для вложения трассировок производительности. В рабочей области **Электронная отчетность** выберите **Параметры электронной отчетности**. Затем на странице **Параметры электронной отчетности** на вкладке **Вложения** в поле **Прочие** выберите тип документа DM, который будет использоваться для трассировок производительности.

![Страница параметров электронной отчетности](./media/GER-PerfTrace-GER-Parameters-DocumentType.png)

Чтобы тип документа DM был доступным в поле подстановки **Прочие**, он должен быть настроен следующим образом на странице **Типы документов** (**Администрирование организации \> Управление документами \> Типы документов**):

- **Класс:** Вложить файл
- **Группа:** Файл

![Страница типов документов](./media/GER-PerfTrace-DM-DocumentType.png)

> [!NOTE]
> Выбранный тип документа должен быть доступен в каждой компании в текущем экземпляре, поскольку вложения DM являются специфическими для компании.

### <a name="configure-rcs-parameters"></a>Настройка параметров RCS

Создаваемые трассировки производительности электронной отчетности будет импортированы в службу RCS для анализа с помощью конструктора форматов электронной отчетности и конструктора сопоставления электронной отчетности. Так как трассировки производительности электронной отчетности хранятся в виде вложений в запись журнала выполнения, которая относится к формату электронной отчетности, необходимо заранее настроить параметры службы RCS, чтобы указать тип документа DM, который должен использоваться для присоединения трассировок производительности. В экземпляре службы RCS, который был подготовлен для компании, в рабочей области **Электронная отчетность** выберите **Параметры электронной отчетности**. Затем на странице **Параметры электронной отчетности** на вкладке **Вложения** в поле **Прочие** выберите тип документа DM, который будет использоваться для трассировок производительности.

![Страница параметров электронной отчетности в службе RCS](./media/GER-PerfTrace-RCS-Parameters-DocumentType.png)

Чтобы тип документа DM был доступным в поле подстановки **Прочие**, он должен быть настроен следующим образом на странице **Типы документов** (**Администрирование организации \> Управление документами \> Типы документов**):

- **Класс:** Вложить файл
- **Группа:** Файл

## <a name="design-an-er-solution"></a>Разработка решения электронной отчетности

Предположим, что вы приступили к разработке нового решения ER для создания нового отчета, представляющего проводки по поставщику. В настоящее время на странице **Проводки по поставщику** можно найти проводки для выбранного поставщика (перейдите по пути **Расчеты с поставщиками \> Поставщики \> Все поставщики**, выберите поставщика, затем на панели операций на вкладке **Поставщик** в группе **Проводки** выберите **Проводки**). Однако необходимо иметь одновременно все проводки поставщика в одном электронном документе в формате XML. Это решение будет состоять из нескольких конфигураций ER, которые содержат требуемую модель данных, метаданные, сопоставление моделей и компоненты формата.

1. Выполните вход в экземпляр службы RCS, который был подготовлен для вашей компании.
2. В этом учебнике вам предстоит создать и изменить конфигурации для демонстрационной компании **Litware, Inc**. Поэтому убедитесь, что данный поставщик конфигурации был добавлен в RCS и выбран как активный. Инструкции см. в процедуре [Создание поставщиков конфигураций и пометка их как активных](https://docs.microsoft.com/dynamics365/unified-operations/dev-itpro/analytics/tasks/er-configuration-provider-mark-it-active-2016-11).
3. В рабочей области **Электронная отчетность** выберите плитку **Конфигурации отчетности**.
4. На странице **Конфигурации** импортируйте конфигурации электронной отчетности, загруженные в качестве необходимого компонента в RCS, в следующем порядке: модель данных, метаданные, сопоставление моделей, формат. Для каждой конфигурации выполните следующие действия.

    1. На панели действий выберите пункт **Обмен \> Загрузить из XML-файла**.
    2. Выберите **Обзор**, чтобы выбрать соответствующий файл для требуемой конфигурации ER в формате XML.
    3. Нажмите **ОК**.

    ![Страница конфигураций в службе RCS](./media/GER-PerfTrace-RCS-ImportedConfigurations.png)

## <a name="run-the-er-solution-to-trace-execution"></a>Запуск решения электронной отчетности для трассировки выполнения

Предположим, что вы завершили разработку первой версии решения ER. Теперь необходимо проверить его в своем экземпляре и проанализировать производительность выполнения.

### <a name="import-an-er-configuration-from-rcs-into-finance-and-operations"></a><a id='import-configuration'></a>Введение в импорт конфигурации электронной отчетности из RCS в Finance and Operations

1. Выполните вход в экземпляр приложения.
2. В этом учебнике будут импортированы конфигурации из экземпляра RCS (где вы разрабатываете компоненты электронной отчетности) в ваш экземпляр (где они проверяются и затем используются). Поэтому необходимо убедиться, что все необходимые артефакты подготовлены. Инструкции см. в процедуре [Импорт конфигураций электронной отчетности из служб Regulatory Configuration Service (RCS)](https://docs.microsoft.com/dynamics365/unified-operations/dev-itpro/analytics/rcs-download-configurations)
3. Выполните следующие действия, чтобы импортировать конфигурации из RCS в приложение:

    1. В рабочей области **Электронная отчетность** на плитке поставщика конфигурации **Litware, Inc.** выберите **Репозитории**.
    2. На странице **Репозиторий конфигураций** выберите репозиторий типа **RCS**, затем выберите **Открыть**.
    3. На экспресс-вкладке **Конфигурации** выберите конфигурацию **Формат трассировки производительности**.
    4. На экспресс-вкладке **Версии** выберите версию **1.1** выбранной конфигурации, затем выберите **Импорт**.

    ![Страница репозитория конфигурации](./media/GER-PerfTrace-GER-ImportedConfigurations.png)

Соответствующие версии модели данных и конфигурации сопоставления моделей автоматически импортируются как необходимые условия для импортированной конфигурации формата ER.

### <a name="turn-on-the-er-performance-trace"></a>Включение трассировки производительности электронной отчетности

1. Перейдите в раздел **Управление организацией \> Электронная отчетность \> Конфигурации**.
2. На странице **Конфигурации** в области действий на вкладке **Конфигурации** в группе **Дополнительные параметры** выберите **Параметры пользователя**.
3. В диалоговом окне **Параметры пользователя** в разделе **Трассировка выполнения** выполните следующие действия:

    1. В поле **Формат трассировки выполнения** выберите **Отладка формата трассировки**, чтобы начать сбор сведений о выполнении формата ER. Если выбрано это значение, трассировка производительности будет собирать сведения о времени, затраченном на выполнение следующих действий:

        - Выполнение каждого источника данных в сопоставлении модели, которое вызывается для извлечения данных
        - Обработка каждого элемента формата для ввода данных в создаваемые выходные данные

        Поле **Формат трассировки выполнения** используется для указания формата созданного отслеживания производительности, в котором хранятся сведения о выполнении, для формата ER и элементов сопоставления. Выбрав **Отладка формата трассировки** в качестве значения, можно проанализировать содержимое трассировки в конструкторе операций электронной отчетности и просмотреть формат ER или элементы сопоставления, которые упоминаются в трассировке.

    2. Задайте для следующих параметров значение **Да**, чтобы собрать определенные подробные сведения о выполнении сопоставления модели ER и компонентах формата ER:

        - **Сбор статистики запросов** — когда этот параметр включен, трассировка производительности соберет следующую информацию:

            - Число вызовов базы данных, выполненных источниками данных
            - Количество дублированных обращений к базе данных
            - Подробные сведения об инструкциях SQL, которые использовались для выполнения вызовов базы данных

        - **Отслеживания доступа кэширования** — если этот параметр включен, трассировка производительности будет собирать сведения об использовании кэша сопоставлений модели ER.
        - **Трассировка доступа к данным** — когда этот параметр включен, трассировка производительности будет собирать сведения о количестве обращений к базе данных для запущенных источников данных типа списка записей.
        - **Перечисление списка трассировки** — когда этот параметр включен, трассировка производительности будет собирать сведения о количестве записей, запрошенных из источников данных типа списка записей.

    > [!NOTE]
    > Параметры в диалоговом окне **Параметры пользователя** относятся только к этому пользователю и текущей компании.

    ![Диалоговое окно параметров пользователя](./media/GER-PerfTrace-GER-UserParameters.png)

### <a name="run-the-er-format"></a><a id='run-format'></a>Выполнение формата электронной отчетности

1. Выберите компанию **DEMF**.
2. Перейдите в раздел **Управление организацией \> Электронная отчетность \> Конфигурации**.
3. На странице **Конфигурации** в дереве конфигураций выберите пункт **Формат трассировки производительности**.
4. В области действий выберите **Выполнить**.

Обратите внимание, что создаваемый файл содержит информацию о 265 транзакциях для шести поставщиков.

## <a name="review-the-execution-trace"></a>Просмотр трассировки выполнения

### <a name="export-the-generated-trace-from-the-application"></a><a id='export-trace'></a>Экспорт созданной трассировки из приложения

Трассировки производительности не связаны с исходным форматом ER и могут быть сериализованы во внешний ZIP-файл.

1. Перейдите в раздел **Администрирование организации \> Электронная отчетность \> Журналы отладки конфигураций**.
2. На странице **Журналы выполнения электронной отчетности** в левой области в поле **Имя конфигурации** выберите **Формат трассировки производительности** для поиска записей журнала, созданных при выполнении конфигурации **Формат трассировки производительности**.
3. Выберите кнопку **Вложения** (символ скрепки) в верхнем правом углу страницы или нажмите **Ctrl+Shift+A**.

    ![Кнопка вложений на странице журналов выполнения электронной отчетности](./media/GER-PerfTrace-GER-DebugLog.png)

4. На странице **Вложения для журналов выполнения прикрепления электронной отчетности** на панели операций выберите **Открыть**, чтобы получить трассировку производительности в виде ZIP-файла и сохранить ее локально.

    ![Вложения для журналов выполнения электронной отчетности](./media/GER-PerfTrace-GER-DebugLog-AttachedTrace.png)

> [!NOTE]
> Создаваемая трассировка имеет ссылку на исходный отчет ER с помощью уникального идентификатора отчета только в формате **GUID**. Нумерация версий этого формата не учитывается.

Обратите внимание, что связь между трассировкой производительности, созданной для выполненного формата ER, и сопоставлением модели ER основана на используемом корневом дескрипторе и общей модели данных. Нумерация версий этого формата и сопоставление модели не учитывается. Настройка флага **По умолчанию для сопоставления модели** для сопоставления модели также не учитывается.

### <a name="import-the-generated-trace-into-rcs"></a><a id='import-trace'></a>Импорт созданной трассировки в службу RCS

1. В службе RCS в рабочей области **Электронная отчетность** выберите плитку **Конфигурации отчетности**.
2. На странице **Конфигурации** в дереве конфигураций разверните элемент **Модели трассировки производительности** и выберите пункт **Формат трассировки производительности**.
3. В области действий выберите **Конструктор**.
4. На странице **Конструктор форматов** в области действий выберите **Трассировка производительности**.
5. В диалоговом окне **Параметры результатов трассировки производительности** выберите **Импорт трассировки производительности**.
6. Выберите **Обзор**, чтобы выбрать экспортированный ранее ZIP-файл.
7. Нажмите **ОК**.

    ![Диалоговое окно "Параметры результатов трассировки производительности" в RCS](./media/GER-PerfTrace-RCS-ImportedPerfTrace.png)

### <a name="use-the-performance-trace-for-analysis-in-rcs--format-execution"></a>Используйте трассировку производительности для анализа в RCS — выполнение формата

1. В RCS на странице **Конструктор формата** выберите **Развернуть/свернуть**, чтобы развернуть содержимое всех элементов формата.

    Обратите внимание, что для некоторых элементов текущего формата отображаются дополнительные сведения:

    - Фактическое время, потраченное на ввод данных в генерируемые выходные данные с использованием элемента формата
    - То же время, выраженное в процентах от общего времени, затраченного на формирование всех выходных данных

    ![Страница конструктора форматов в службе RCS](./media/GER-PerfTrace-RCS-TraceInfoInFormat.png)

2. Закройте страницу **Конструктор форматов**.

### <a name="use-the-performance-trace-for-analysis-in-rcs--model-mapping"></a><a id='use-trace'></a>Используйте трассировку производительности для анализа в RCS — сопоставление модели

1. В службе RCS на странице **Конфигурации** в дереве конфигураций выберите пункт **Сопоставление трассировки производительности**.
2. В области действий выберите **Конструктор**.
3. Выберите **Конструктор**.
4. На странице **Конструктор сопоставления модели** в области действий выберите **Трассировка производительности**.
5. Выберите ранее импортированную трассировку.
6. Нажмите **ОК**.

Обратите внимание, что новые сведения становятся доступны для некоторых элементов источника данных в текущем сопоставлении модели:

- Фактическое время, потраченное на получение данных с использованием источника данных
- То же время, выраженное в процентах от общего времени, затраченного на выполнение всего сопоставления модели

Обратите внимание, что электронная отчетность информирует о том, что текущее сопоставление модели дублирует запросы к базе данных, когда выполняется источник данных VendTable/\<Relations/VendTrans.VendTable\_AccountNum Такое дублирование происходит из-за того, что список проводок поставщика вызывается два раза для каждой итерации записи поставщика:

- Один вызов выполняется для ввода подробных сведений о каждой проводке в модели данных на основе настроенных привязок.
- Один вызов создается для ввода рассчитанного количества проводок по поставщику в модели данных.

![Сообщение о дубликатах запросов базы данных на странице конструктора сопоставления модели в RCS](./media/GER-PerfTrace-RCS-TraceInfoInMapping1.png)

Значение **\[Q:530\]** указывает на то, что таблица VendTrans была вызвана 530 раз, чтобы вернуть запись из этой таблицы в источник данных VendTable/\<Relations/VendTrans.VendTable\_AccountNum. Значение **\[530\]** указывает на то, что источник данных VendTable/\<Relations/VendTrans.VendTable\_AccountNum был вызван 530 раз, чтобы вернуть запись из этого источника данных и ввести сведения из нее в модель данных.

Рекомендуется использовать кэширование для источника данных VendTable/\<Relations/VendTrans.VendTable\_AccountNum, чтобы уменьшить число вызовов, которые были сделаны для получения сведений о 265 транзакциях и помочь улучшить производительность сопоставления модели.

Также может быть полезно уменьшить количество вызовов, выполненных в источнике данных LedgerTransTypeList. Этот источник данных используется для связи каждого значения перечисления **LedgerTransType** с его меткой. Используя этот источник данных, можно найти соответствующую метку и ввести ее в модель данных для каждой проводки поставщика. Текущее число вызовов этого источника данных (9 027) довольно большое для 265 проводок.

![Страница конструктора сопоставлений моделей в RCS, в которой показаны 9 027 вызовов в источнике данных](./media/GER-PerfTrace-RCS-TraceInfoInMapping1a.png)

## <a name="improve-the-model-mapping-based-on-information-from-the-execution-trace"></a>Улучшите сопоставление модели на основе информации из трассировки выполнения

### <a name="modify-the-logic-of-the-model-mapping"></a>Изменение логики сопоставления модели

1. Выполните следующие действия, чтобы использовать кэширование, чтобы предотвратить повторные обращения к базе данных:

    1. В службе RCS на странице **Конструктор сопоставления модели** в области **Источники данных** выберите элемент **VendTable**.
    2. Выберите **Кэш**.
    3. Разверните элемент **VendTable**, раскройте список отношений "один ко многим" для источника данных VendTable (элемент **\<Отношения**) и выберите пункт **VendTrans.VendTable\_AccountNum**.
    4. Выберите **Кэш**.

    ![Настройка кэширования, помогающая предотвратить дублированные вызовы](./media/GER-PerfTrace-RCS-ChangeMapping-Cache.png)

2. Выполните следующие действия, чтобы перенести источник данных LedgerTransTypeList в область источника данных VendTable:

    1. В области **Типы источников данных** раскройте элемент **Функции** и выберите элемент **Вычисляемое поле**.
    2. В области **Источники данных** выберите элемент **VendTable**.
    3. Выберите **Добавить**.
    4. В поле **Имя** введите **\$TransType**.
    5. Выберите **Изменить формулу**.
    6. В поле **Формула** введите **LedgerTransTypeList**.
    7. Нажмите **Сохранить**.
    8. Закройте страницу **Редактор формул**.
    9. Щелкните **OK**.

3. Выполните следующие действия, чтобы выполнить кэширование поля **\$TransType**:

    1. Выберите элемент **LedgerTransTypeList**.
    2. Выберите **Кэш**.
    3. Выберите элемент **VendTable.\$TransType**.
    4. Выберите **Кэш**.

    ![Настройка кэширования для поля $TransType](./media/GER-PerfTrace-RCS-ChangeMapping-Cache2.png)

4. Выполните следующие действия для изменения поля **\$TransTypeRecord** таким образом, чтобы оно начинало использовать кэшированное поле **\$TransType**:

    1. На панели **Источники данных** разверните элемент **VendTable**, разверните элемент **\<Отношения**, разверните элемент **VendTrans.VendTable\_AccountNum** и выберите элемент **VendTable. VendTrans.VendTable\_AccountNum.\$TransTypeRecord**.
    2. Выберите **Правка**.
    3. Выберите **Изменить формулу**.
    4. В поле **Формула** найдите следующее выражение:

        FIRSTORNULL (WHERE (LedgerTransTypeList, LedgerTransTypeList.Enum = \@.TransType))

    5. В поле **Формула** введите следующее выражение:

        FIRSTORNULL (WHERE (VendTable.'\$TransType', VendTable.'\$TransType'.Enum = \@.TransType)).

    6. Нажмите **Сохранить**.
    7. Закройте страницу **Редактор формул**.
    8. Нажмите **ОК**.

5. Нажмите **Сохранить**.
6. Закройте страницу **Конструктор сопоставления модели**.
7. Закройте страницу **Сопоставления модели**.

### <a name="complete-the-modified-version-of-the-er-model-mapping"></a>Выполните измененную версию сопоставления модели ER

1. В RCS на странице **Конфигурации** на экспресс-вкладке **Версии** выберите версию **1.2** конфигурации **Сопоставление трассировки производительности**.
2. Выберите **Изменить статус**.
3. Выберите **Завершено**.

### <a name="import-the-modified-er-model-mapping-configuration-from-rcs-into-the-application"></a>Импорт измененной конфигурации сопоставления модели ER из RCS в приложение

Повторите шаги из раздела [Импорт конфигурации электронной отчетности из службы RCS в Finance and Operations](#import-configuration) выше в этой теме, чтобы импортировать версию 1.2 конфигурации **Сопоставление трассировки производительности**.

## <a name="run-the-modified-er-solution-to-trace-execution"></a>Запуск измененного решения электронной отчетности для трассировки выполнения

### <a name="run-the-er-format"></a>Выполнение формата электронной отчетности

Повторите шаги в разделе [Выполнение формата электронной отчетности](#run-format) ранее в этой теме, чтобы создать новую трассировку производительности.

## <a name="work-with-the-execution-trace"></a>Работа с трассировкой выполнения

### <a name="export-the-generated-trace-from-the-application"></a>Экспорт созданной трассировки из приложения

Повторите шаги из раздела [Экспорт созданной трассировки из приложения](#export-trace) ранее в этой теме, чтобы сохранить новую трассировку производительности локально.

### <a name="import-the-generated-trace-into-rcs"></a>Импорт созданной трассировки в службу RCS

Повторите шаги из раздела [Импорт созданной трассировки в службу RCS](#import-trace) ранее в этой теме для импорта новой трассировки производительности в RCS.

### <a name="use-the-performance-trace-for-analysis-in-rcs--model-mapping"></a>Используйте трассировку производительности для анализа в RCS — сопоставление модели

Повторите шаги из раздела [Используйте трассировку производительности для анализа в RCS — сопоставление модели](#use-trace), приведенного ранее в этой теме, для анализа последней трассировки производительности.

Обратите внимание, что изменения, внесенные в сопоставление модели, исключают повторяющиеся запросы к базе данных. Также уменьшилось число обращений к таблицам базы данных и источникам данных для данного сопоставления модели. Поэтому производительность всего решения ER улучшилась.

![Сведения отслеживания для источника данных VendTable на странице конструктора сопоставления модели в службе RCS](./media/GER-PerfTrace-RCS-TraceInfoInMapping2.png)

В данных трассировки значение **\[12\]** для источника данных VendTable указывает, что этот источник данных вызывался 12 раз. Значение **\[Q:6\]** указывает, что шесть вызовов были преобразованы в вызовы таблицы VendTable базы данных Значение **\[C:6\]** указывает, что записи, которые были извлечены из базы данных, были кэшированы, и шесть других вызовов были обработаны с использованием кэша.

Обратите внимание, что количество вызовов источника данных LedgerTransTypeList уменьшилось с 9 027 до 240.

![Сведения отслеживания для источника данных LedgerTransTypeList на странице конструктора сопоставления модели в службе RCS](./media/GER-PerfTrace-RCS-TraceInfoInMapping2a.png)

## <a name="review-the-execution-trace-in-the-application"></a>Просмотр трассировки выполнения в приложении

В дополнение к RCS, некоторые версии могут предоставлять возможности для конструктора структуры электронной отчетности. Эти версии имеют параметр **Включить режим конструктора**, который может быть включен. Этот параметр можно найти на вкладке **Общие** страницы **Параметры электронной отчетности**, которую можно открыть из рабочей области **Электронная отчетность**.

![Параметр "Включить режим конструктора" на странице параметров электронной отчетности](./media/GER-PerfTrace-GER-Parameters-DesignMode.png)

При использовании одной из этих версий можно анализировать подробные сведения о созданных трассировках производительности непосредственно в приложении. Нет необходимости экспортировать их из приложения и импортировать в RCS.

## <a name="review-the-execution-trace-by-using-external-tools"></a>Просмотр трассировки выполнения с помощью внешних средств

### <a name="configure-user-parameters"></a>Настройка параметров пользователя

1. Перейдите в раздел **Управление организацией \> Электронная отчетность \> Конфигурации**.
2. На странице **Конфигурации** в области действий на вкладке **Конфигурации** в группе **Дополнительные параметры** выберите **Параметры пользователя**.
3. В диалоговом окне **Параметры пользователя** в разделе **Трассировка выполнения** в поле **Формат трассировки выполнения** выберите **PerfView XML**.

### <a name="run-the-er-format"></a>Выполнение формата электронной отчетности

Повторите шаги в разделе [Выполнение формата электронной отчетности](#run-format) ранее в этой теме, чтобы создать новую трассировку производительности.

Обратите внимание, что веб-браузер предлагает ZIP-файл для загрузки. Этот файл содержит трассировку производительности в формате PerfView. Затем можно воспользоваться средством анализа производительности PerfView, чтобы проанализировать сведения о выполнении формата электронной отчетности.

![Данные трассировки производительности в формате PerfView](./media/GER-PerfTrace2-PerfViewTrace1.PNG)

## <a name="use-external-tools-to-review-an-execution-trace-that-includes-database-queries"></a>Использование внешних инструментов для просмотра трассировки выполнения, в которой имеются запросы базы данных

Вследствие улучшений, сделанных в среде электронной отчетности, трассировка производительности, созданная в формате PerfView, сейчас предоставляет более подробные сведения о выполнении формата ER. В Microsoft Dynamics 365 for Finance and Operations версии 10.0.4 (июль 2019 г.) эта трассировка также может включать сведения о выполненных запросах SQL в базу данных приложения.

### <a name="configure-user-parameters"></a>Настройка параметров пользователя

1. Перейдите в раздел **Администрирование организации** \> **Электронная отчетность** \> **Конфигурации**.
2. На странице **Конфигурации** в области действий на вкладке **Конфигурации** в группе **Дополнительные параметры** выберите **Параметры пользователя**.
3. В диалоговом окне **Параметры пользователя** в разделе **Трассировка выполнения** задайте следующие параметры:

    - В поле **Формат трассировки выполнения** выберите **PerfView XML**.
    - Установите для параметра **Сбор статистики запроса** значение **Да**.
    - Для параметра **Отслеживать запрос** задайте значение **Да**.

    ![Раздел "Трассировка выполнения", диалоговое окно "Параметры пользователя"](./media/GER-PerfTrace2-GER-UserParameters.PNG)

### <a name="run-the-er-format"></a>Выполнение формата электронной отчетности

Повторите шаги в разделе [Выполнение формата электронной отчетности](#run-format) ранее в этой теме, чтобы создать новую трассировку производительности.

Обратите внимание, что веб-браузер предлагает ZIP-файл для загрузки. Этот файл содержит трассировку производительности в формате PerfView. Затем можно воспользоваться средством анализа производительности PerfView, чтобы проанализировать сведения о выполнении формата электронной отчетности. В данный момент трассировка включает в себя подробные сведения о доступе к базе данных SQL во время выполнения формата ER.

![Сведения трассировки для выполненного формата электронной отчетности в PerfView](./media/GER-PerfTrace2-PerfViewTrace2.PNG)

## <a name="additional-resources"></a>Дополнительные ресурсы

- [Обзор электронной отчетности](general-electronic-reporting.md)
- [Повышение производительности решений электронной отчетности за счет добавления параметризованных источников данных ВЫЧИСЛЯЕМЫЕ ПОЛЯ](er-calculated-field-ds-performance.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]