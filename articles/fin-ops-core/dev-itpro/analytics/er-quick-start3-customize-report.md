---
title: Настройка конфигураций электронной отчетности для создания электронного документа
description: В этой теме объясняется, как настроить конфигурации поставляемой корпорацией Майкрософт электронной отчетности (ER), которые используются для создания пользовательского электронного документа.
author: NickSelin
ms.date: 10/21/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERWorkspace, ERSolutionTable, ERParameters, ERDataModelDesigner, ERModelMappingTable, ERModelMappingDesigner, EROperationDesigner, ERVendorTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: 220314
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: Version 7.0.0
ms.openlocfilehash: 5ec5b8d0ad1e85a9c4fc7c3eb762c2c7b0b52e8d
ms.sourcegitcommit: 951393b05bf409333cb3c7ad977bcaa804aa801b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/13/2021
ms.locfileid: "5893308"
---
# <a name="customize-electronic-reporting-configurations-to-generate-an-electronic-document"></a><span data-ttu-id="b7797-103">Настройка конфигураций электронной отчетности для создания электронного документа</span><span class="sxs-lookup"><span data-stu-id="b7797-103">Customize Electronic reporting configurations to generate an electronic document</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="b7797-104">[Платформа электронной отчетности (ER)](general-electronic-reporting.md) позволяет отправить [конфигурации](general-electronic-reporting.md#Configuration) электронной отчетности, которые корпорация Майкрософт предоставляет в экземпляре Microsoft Dynamics 365 Finance.</span><span class="sxs-lookup"><span data-stu-id="b7797-104">The [Electronic reporting (ER) framework](general-electronic-reporting.md) lets you upload the ER [configurations](general-electronic-reporting.md#Configuration) that Microsoft provides into your Microsoft Dynamics 365 Finance instance.</span></span> <span data-ttu-id="b7797-105">Таким образом, предоставляемые корпорацией Майкрософт конфигурации могут использоваться в качестве решения электронной отчетности, используемого для создания электронных накладных клиентов (электронные счета).</span><span class="sxs-lookup"><span data-stu-id="b7797-105">In this way, the Microsoft-provided configurations can serve as the ER solution that is used to generate electronic customer invoices (e-invoices).</span></span> <span data-ttu-id="b7797-106">Можно использовать это решение электронной отчетности для настройки пользовательского решения электронной отчетности для получения доступа к пользовательским полям базы данных и создания электронных накладных, соответствующих вашим специальным требованиям, без необходимости редактирования исходного кода.</span><span class="sxs-lookup"><span data-stu-id="b7797-106">You can use this ER solution to configure your custom ER solution to access your custom database fields and generate e-invoices that are compliant with your specific requirements, without having to edit the source code.</span></span>

## <a name="overview"></a><span data-ttu-id="b7797-107">Обзор</span><span class="sxs-lookup"><span data-stu-id="b7797-107">Overview</span></span>

<span data-ttu-id="b7797-108">В примере данного раздела необходимо указать код плательщика федерального налога в качестве нового настраиваемого атрибута для каждого клиента, для которого выставлена электронная накладная.</span><span class="sxs-lookup"><span data-stu-id="b7797-108">For the example in this topic, you must specify a federal tax identification code as a new custom attribute of every customer that you electronically invoice.</span></span> <span data-ttu-id="b7797-109">Поэтому необходимо настроить структуру накладной, которая в настоящее время используется, путем добавления нового пункта, который должен быть заполнен налоговым кодом в каждой создаваемой электронной накладной.</span><span class="sxs-lookup"><span data-stu-id="b7797-109">Therefore, you must customize the structure of the invoice that is currently used, by adding a new item that must be filled with the tax code in every e-invoice that is generated.</span></span>

<span data-ttu-id="b7797-110">Процедуры данного раздела объясняют, как пользователь с ролью системного администратора, разработчика электронной отчетности или функционального консультанта по электронной отчетности может выполнять следующие задачи с экземпляре Finance:</span><span class="sxs-lookup"><span data-stu-id="b7797-110">The procedures in this topic explain how a user in the System Administrator, Electronic Reporting Developer, or Electronic Reporting Functional Consultant role can perform the following tasks in your Finance instance:</span></span>

- <span data-ttu-id="b7797-111">[Настройка минимального набора параметров электронной отчетности, необходимых для начала использования платформы электронной отчетности](#ConfigureER).</span><span class="sxs-lookup"><span data-stu-id="b7797-111">[Configure the minimal set of ER parameters that is required to start to use the ER framework](#ConfigureER).</span></span>
- <span data-ttu-id="b7797-112">[Импорт исходных версий стандартных конфигураций электронной отчетности, которые предоставляются для создания электронных накладных](#ImportERConfigurations1).</span><span class="sxs-lookup"><span data-stu-id="b7797-112">[Import the initial versions of the standard ER configurations that are provided to generate e-invoices](#ImportERConfigurations1).</span></span>
- <span data-ttu-id="b7797-113">[Настройка параметров модуля расчетов с клиентами, чтобы начать использовать стандартные конфигурации электронной отчетности](#ConfigureAR1).</span><span class="sxs-lookup"><span data-stu-id="b7797-113">[Configure the Accounts receivable parameters to start to use the standard ER configurations](#ConfigureAR1).</span></span>
- <span data-ttu-id="b7797-114">[Настройка параметров юридического лица для выставления счетов клиентам](#ConfigureLE).</span><span class="sxs-lookup"><span data-stu-id="b7797-114">[Configure the legal entity parameters to invoice customers](#ConfigureLE).</span></span>
- <span data-ttu-id="b7797-115">[Подготовка записи клиента для выставления электронных накладных](#ConfigureCustomer1).</span><span class="sxs-lookup"><span data-stu-id="b7797-115">[Prepare a customer record for electronic invoicing](#ConfigureCustomer1).</span></span>
- <span data-ttu-id="b7797-116">[Добавление, разноска и отправка накладной клиента с использованием стандартных конфигураций электронной отчетности](#ProcessInvoice1).</span><span class="sxs-lookup"><span data-stu-id="b7797-116">[Add, post, and send a customer invoice by using the standard ER configurations](#ProcessInvoice1).</span></span>
- <span data-ttu-id="b7797-117">[Добавление настраиваемого поля базы данных для управления кодом плательщика федерального налога для клиентов](#AddCustomField).</span><span class="sxs-lookup"><span data-stu-id="b7797-117">[Add a custom database field to manage a federal tax identification code for customers](#AddCustomField).</span></span>
- <span data-ttu-id="b7797-118">[Обновление метаданных электронной отчетности для включения изменений базы данных для конструктора сопоставления моделей электронной отчетности](#RefreshERMetadata).</span><span class="sxs-lookup"><span data-stu-id="b7797-118">[Refresh the ER metadata to enable database changes for the ER model mapping designer](#RefreshERMetadata).</span></span>
- <span data-ttu-id="b7797-119">[Создание настраиваемых конфигураций электронной отчетности, чтобы создать электронные накладные, содержащие новый налоговый код](#DesignCustomERConfigurations).</span><span class="sxs-lookup"><span data-stu-id="b7797-119">[Design the custom ER configurations to generate e-invoices that contain the new tax code](#DesignCustomERConfigurations).</span></span>
- <span data-ttu-id="b7797-120">[Настройка параметров модуля расчетов с клиентами, чтобы начать использовать пользовательские конфигурации электронной отчетности](#ConfigureAR2).</span><span class="sxs-lookup"><span data-stu-id="b7797-120">[Configure the Accounts receivable parameters to start to use the custom ER configurations](#ConfigureAR2).</span></span>
- <span data-ttu-id="b7797-121">[Обновление записи клиента для выставления электронных накладных](#ConfigureCustomer2).</span><span class="sxs-lookup"><span data-stu-id="b7797-121">[Update a customer record for electronic invoicing](#ConfigureCustomer2).</span></span>
- <span data-ttu-id="b7797-122">[Добавление, разноска и отправка накладной клиента с использованием пользовательских конфигураций электронной отчетности](#ProcessInvoice2).</span><span class="sxs-lookup"><span data-stu-id="b7797-122">[Add, post, and send a customer invoice by using the custom ER configurations](#ProcessInvoice2).</span></span>
- <span data-ttu-id="b7797-123">[Импорт новых версий стандартных конфигураций электронной отчетности, которые предоставляются для создания электронных накладных](#ImportERConfigurations2).</span><span class="sxs-lookup"><span data-stu-id="b7797-123">[Import the new versions of the standard ER configurations that are provided to generate e-invoices](#ImportERConfigurations2).</span></span>
- <span data-ttu-id="b7797-124">[Адаптация изменений в новых версиях стандартных конфигураций электронной отчетности в ваших пользовательских конфигурациях электронной отчетности](#RebaseCustomERConfigurations).</span><span class="sxs-lookup"><span data-stu-id="b7797-124">[Adopt the changes to the new versions of the standard ER configurations in your custom ER configurations](#RebaseCustomERConfigurations).</span></span>
- <span data-ttu-id="b7797-125">[Добавление, разноска и отправка накладной клиента с использованием новых версий пользовательских конфигураций электронной отчетности](#ProcessInvoice3).</span><span class="sxs-lookup"><span data-stu-id="b7797-125">[Add, post, and send a customer invoice by using the new versions of the custom ER configurations](#ProcessInvoice3).</span></span>

<span data-ttu-id="b7797-126">Все эти процедуры можно выполнить в компании **DEMF**.</span><span class="sxs-lookup"><span data-stu-id="b7797-126">All these procedures can be completed in the **DEMF** company.</span></span>

## <a name="configure-the-er-framework"></a><a name="ConfigureER"></a><span data-ttu-id="b7797-127">Настройка платформы электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-127">Configure the ER framework</span></span>

<span data-ttu-id="b7797-128">В качестве пользователя в роли функционального консультанта по электронной отчетности или разработчика электронной отчетности, вы должны настроить минимальный набор параметров электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-128">As a user in the Electronic Reporting Functional Consultant or Electronic Reporting Developer role, you must configure the minimal set of ER parameters.</span></span> <span data-ttu-id="b7797-129">Затем можно начать использовать платформу электронной отчетности для разработки пользовательских версий стандартных конфигураций решения электронной отчетности, которые используются для формирования электронной накладных.</span><span class="sxs-lookup"><span data-stu-id="b7797-129">You can then start to use the ER framework to design custom versions of the standard configurations of the ER solution that is used to generate e-invoices.</span></span>

### <a name="configure-er-parameters"></a><span data-ttu-id="b7797-130">Настройка параметров ER</span><span class="sxs-lookup"><span data-stu-id="b7797-130">Configure ER parameters</span></span>

1. <span data-ttu-id="b7797-131">Перейдите в раздел **Управление организацией** \> **Рабочие области** \> **Электронная отчетность**.</span><span class="sxs-lookup"><span data-stu-id="b7797-131">Go to **Organization administration** \> **Workspaces** \> **Electronic reporting**.</span></span>
2. <span data-ttu-id="b7797-132">На странице **Конфигурации локализации** в разделе **Связанные ссылки** выберите **Параметры электронной отчетности**.</span><span class="sxs-lookup"><span data-stu-id="b7797-132">On the **Localization configurations** page, in the **Related links** section, select **Electronic reporting parameters**.</span></span>
3. <span data-ttu-id="b7797-133">На странице **Параметры электронной отчетности** на вкладке **Общие сведения** задайте для параметра **Включить режим конструктора** значение **Да**.</span><span class="sxs-lookup"><span data-stu-id="b7797-133">On the **Electronic reporting parameters** page, on the **General** tab, set the **Enable design mode** option to **Yes**.</span></span>
4. <span data-ttu-id="b7797-134">На вкладке **Вложения** в поле **Конфигурации** выберите **Файл**.</span><span class="sxs-lookup"><span data-stu-id="b7797-134">On the **Attachments** tab, in the **Configurations** field, select **File**.</span></span>
5. <span data-ttu-id="b7797-135">В полях **Архив заданий**, **Временная**, **Базовый** и **Другие** выберите тип **Файл**.</span><span class="sxs-lookup"><span data-stu-id="b7797-135">In the **Job archive**, **Temporary**, **Baseline**, and **Others** fields, select the **File** type.</span></span>

<span data-ttu-id="b7797-136">Дополнительные сведения о настройке параметров электронной отчетности см. в разделе [Настройка платформы электронной отчетности](electronic-reporting-er-configure-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="b7797-136">For more information about ER parameters, see [Configure the ER framework](electronic-reporting-er-configure-parameters.md).</span></span>

### <a name="activate-an-er-configuration-provider"></a><span data-ttu-id="b7797-137">Активация поставщика конфигураций электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-137">Activate an ER configuration provider</span></span>

<span data-ttu-id="b7797-138">Каждая добавленная конфигурация электронной отчетности помечается как принадлежащая поставщику конфигурации электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-138">Every ER configuration that is added is marked as owned by an ER configuration provider.</span></span> <span data-ttu-id="b7797-139">Для этой цели используется поставщик конфигурации электронной отчетности, который активирован в рабочей области **Электронная отчетность**.</span><span class="sxs-lookup"><span data-stu-id="b7797-139">The ER configuration provider that is activated in the **Electronic reporting** workspace is used for this purpose.</span></span> <span data-ttu-id="b7797-140">Поэтому перед началом добавления или изменения конфигураций электронной отчетности необходимо активировать поставщика конфигурации электронной отчетности в рабочей области **Электронная отчетность**.</span><span class="sxs-lookup"><span data-stu-id="b7797-140">Therefore, you must activate an ER configuration provider in the **Electronic reporting** workspace before you start to add or edit ER configurations.</span></span>

> [!NOTE]
> <span data-ttu-id="b7797-141">Только владелец конфигурации электронной отчетности может редактировать ее.</span><span class="sxs-lookup"><span data-stu-id="b7797-141">Only the owner of an ER configuration can edit it.</span></span> <span data-ttu-id="b7797-142">Поэтому перед редактированием конфигурации электронной отчетности необходимо активировать соответствующего поставщика конфигурации электронной отчетности в рабочей области **Электронная отчетность**.</span><span class="sxs-lookup"><span data-stu-id="b7797-142">Therefore, before an ER configuration can be edited, the appropriate ER configuration provider must be activated in the **Electronic reporting** workspace.</span></span>

#### <a name="review-the-list-of-er-configuration-providers"></a><span data-ttu-id="b7797-143">Просмотр списка поставщиков конфигурации электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-143">Review the list of ER configuration providers</span></span>

1. <span data-ttu-id="b7797-144">Перейдите в раздел **Управление организацией** \> **Рабочие области** \> **Электронная отчетность**.</span><span class="sxs-lookup"><span data-stu-id="b7797-144">Go to **Organization administration** \> **Workspaces** \> **Electronic reporting**.</span></span>
2. <span data-ttu-id="b7797-145">На странице **Конфигурации локализации** в разделе **Связанные ссылки** выберите **Поставщики конфигураций**.</span><span class="sxs-lookup"><span data-stu-id="b7797-145">On the **Localization configurations** page, in the **Related links** section, select **Configuration providers**.</span></span>
3. <span data-ttu-id="b7797-146">На странице **Таблица поставщиков конфигураций** каждая запись поставщика имеет уникальное имя и URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="b7797-146">On the **Configuration provider table** page, each provider record has a unique name and URL.</span></span> <span data-ttu-id="b7797-147">Проверьте содержимое данной страницы.</span><span class="sxs-lookup"><span data-stu-id="b7797-147">Review the contents of this page.</span></span> <span data-ttu-id="b7797-148">Если запись для **Litware, Inc.** (`https://www.litware.com`) уже существует, пропустите следующую процедуру, [Добавление нового поставщика конфигурации электронной отчетности](#AddProvider).</span><span class="sxs-lookup"><span data-stu-id="b7797-148">If a record for **Litware, Inc.** (`https://www.litware.com`) already exists, skip the next procedure, [Add a new ER configuration provider](#AddProvider).</span></span>

#### <a name="add-a-new-er-configuration-provider"></a><a id="AddProvider"></a><span data-ttu-id="b7797-149">Добавление нового поставщика конфигурации электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-149">Add a new ER configuration provider</span></span>

1. <span data-ttu-id="b7797-150">Перейдите в раздел **Управление организацией** \> **Рабочие области** \> **Электронная отчетность**.</span><span class="sxs-lookup"><span data-stu-id="b7797-150">Go to **Organization administration** \> **Workspaces** \> **Electronic reporting**.</span></span>
2. <span data-ttu-id="b7797-151">На странице **Конфигурации локализации** в разделе **Связанные ссылки** выберите **Поставщики конфигураций**.</span><span class="sxs-lookup"><span data-stu-id="b7797-151">On the **Localization configurations** page, in the **Related links** section, select **Configuration providers**.</span></span>
3. <span data-ttu-id="b7797-152">На странице **Поставщики конфигураций** выберите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="b7797-152">On the **Configuration providers** page, select **New**.</span></span>
4. <span data-ttu-id="b7797-153">В поле **Имя** введите **Litware, Inc.**</span><span class="sxs-lookup"><span data-stu-id="b7797-153">In the **Name** field, enter **Litware, Inc.**</span></span>
5. <span data-ttu-id="b7797-154">В поле **Интернет-адрес** введите `https://www.litware.com`.</span><span class="sxs-lookup"><span data-stu-id="b7797-154">In the **Internet address** field, enter `https://www.litware.com`.</span></span>
6. <span data-ttu-id="b7797-155">Нажмите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="b7797-155">Select **Save**.</span></span>

#### <a name="activate-an-er-configuration-provider"></a><span data-ttu-id="b7797-156">Активация поставщика конфигураций электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-156">Activate an ER configuration provider</span></span>

1. <span data-ttu-id="b7797-157">Перейдите в раздел **Управление организацией** \> **Рабочие области** \> **Электронная отчетность**.</span><span class="sxs-lookup"><span data-stu-id="b7797-157">Go to **Organization administration** \> **Workspaces** \> **Electronic reporting**.</span></span>
2. <span data-ttu-id="b7797-158">На странице **Конфигурации локализации** в разделе **Поставщики конфигураций** выберите плитку **Litware, Inc.**, затем выберите **Установить активные**.</span><span class="sxs-lookup"><span data-stu-id="b7797-158">On the **Localization configurations** page, in the **Configuration providers** section, select the **Litware, Inc.** tile, and then select **Set active**.</span></span>

<span data-ttu-id="b7797-159">Дополнительные сведения о поставщиках конфигурации электронной отчетности см. в разделе [Создание поставщиков конфигураций и пометка их как активных](tasks/er-configuration-provider-mark-it-active-2016-11.md).</span><span class="sxs-lookup"><span data-stu-id="b7797-159">For more information about ER configuration providers, see [Create configuration providers and mark them as active](tasks/er-configuration-provider-mark-it-active-2016-11.md).</span></span>

## <a name="import-the-initial-versions-of-standard-er-configurations"></a><a name="ImportERConfigurations1"></a><span data-ttu-id="b7797-160">Импорт исходных версий стандартных конфигураций электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-160">Import the initial versions of standard ER configurations</span></span>

<span data-ttu-id="b7797-161">Чтобы добавить стандартные конфигурации электронной отчетности в текущий экземпляр Finance, необходимо импортировать их из [репозитория](general-electronic-reporting.md#Repository) электронной отчетности, который был настроен для этого экземпляра.</span><span class="sxs-lookup"><span data-stu-id="b7797-161">To add the standard ER configurations to your current Finance instance, you must import them from the ER [repository](general-electronic-reporting.md#Repository) that was configured for that instance.</span></span>

1. <span data-ttu-id="b7797-162">Перейдите в раздел **Управление организацией** \> **Рабочие области** \> **Электронная отчетность**.</span><span class="sxs-lookup"><span data-stu-id="b7797-162">Go to **Organization administration** \> **Workspaces** \> **Electronic reporting**.</span></span>
2. <span data-ttu-id="b7797-163">На странице **Конфигурации локализации** в разделе **Поставщики конфигураций** выберите плитку **Майкрософт**, затем выберите **Репозитории**, чтобы просмотреть список репозиториев для поставщика Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="b7797-163">On the **Localization configurations** page, in the **Configuration providers** section, select the **Microsoft** tile, and then select **Repositories** to view the list of repositories for the Microsoft provider.</span></span>
3. <span data-ttu-id="b7797-164">На странице **Репозитории конфигураций** выберите репозиторий типа **Глобальный**, затем выберите **Открыть**.</span><span class="sxs-lookup"><span data-stu-id="b7797-164">On the **Configuration repositories** page, select the repository of the **Global** type, and then select **Open**.</span></span> <span data-ttu-id="b7797-165">Если будет предложено выполнить проверку подлинности для подключения к службе Regulatory Configuration Service, следуйте инструкциям по проверке подлинности.</span><span class="sxs-lookup"><span data-stu-id="b7797-165">If you're prompted for authorization to connect to Regulatory Configuration Service, follow the authorization instructions.</span></span>
4. <span data-ttu-id="b7797-166">На странице **Репозиторий конфигураций** в дереве конфигураций на левой панели выберите конфигурацию формата **Накладная по продаже PEPPOL**.</span><span class="sxs-lookup"><span data-stu-id="b7797-166">On the **Configuration repository** page, in the configuration tree in the left pane, select the **Peppol Sales Invoice** format configuration.</span></span>
5. <span data-ttu-id="b7797-167">На экспресс-вкладке **Версии** выберите версию **11.2.2**.</span><span class="sxs-lookup"><span data-stu-id="b7797-167">On the **Versions** FastTab, select version **11.2.2**.</span></span>
6. <span data-ttu-id="b7797-168">Выберите **Импорт** для загрузки выбранной версии из глобального репозитория.</span><span class="sxs-lookup"><span data-stu-id="b7797-168">Select **Import** to download the selected version from the Global repository.</span></span>

![Страница репозитория конфигурации](./media/er-quick-start3-import-solution1.png)

> [!TIP]
> <span data-ttu-id="b7797-170">При возникновении проблем с доступом к [глобальному репозиторию](er-download-configurations-global-repo.md) можно вместо этого [загрузить конфигурации](download-electronic-reporting-configuration-lcs.md) из служб Microsoft Dynamics Lifecycle Services (LCS).</span><span class="sxs-lookup"><span data-stu-id="b7797-170">If you have trouble accessing the [Global repository](er-download-configurations-global-repo.md), you can [download configurations](download-electronic-reporting-configuration-lcs.md) from Microsoft Dynamics Lifecycle Services (LCS) instead.</span></span>

### <a name="review-the-imported-er-configurations"></a><span data-ttu-id="b7797-171">Проверка импортированных конфигураций электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-171">Review the imported ER configurations</span></span>

1. <span data-ttu-id="b7797-172">Перейдите в раздел **Управление организацией** \> **Рабочие области** \> **Электронная отчетность**.</span><span class="sxs-lookup"><span data-stu-id="b7797-172">Go to **Organization administration** \> **Workspaces** \> **Electronic reporting**.</span></span>
2. <span data-ttu-id="b7797-173">На странице **Конфигурации локализации** в разделе **Конфигурации** выберите плитку **Конфигурации отчетности**.</span><span class="sxs-lookup"><span data-stu-id="b7797-173">On the **Localization configurations** page, in the **Configurations** section, select the **Reporting configurations** tile.</span></span>
3. <span data-ttu-id="b7797-174">На странице **Конфигурации** разверните экспресс-вкладку **Компоненты конфигурации**.</span><span class="sxs-lookup"><span data-stu-id="b7797-174">On the **Configurations** page, expand the **Configuration components** FastTab.</span></span>
4. <span data-ttu-id="b7797-175">В дереве конфигураций в левой области разверните **Модель накладных**, затем раскройте **Накладная продажи UBL**.</span><span class="sxs-lookup"><span data-stu-id="b7797-175">In the configuration tree in the left pane, expand **Invoice model**, and then expand **UBL Sales invoice**.</span></span>

<span data-ttu-id="b7797-176">Обратите внимание, что в дополнение к выбранному формату электронной отчетности **Накладная продажи PEPPOL** были импортированы другие необходимые конфигурации электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-176">Notice that, in addition to the selected **Peppol Sales Invoice** ER format, other required ER configurations were imported.</span></span> <span data-ttu-id="b7797-177">Поскольку новые версии конфигураций электронной отчетности постоянно публикуются в глобальном репозитории и LCS для обеспечения соответствия соответствующих решений новым требованиям, были импортированы последние версии необходимой конфигурации [модели данных](general-electronic-reporting.md#data-model-and-model-mapping-components) и ее конфигураций [сопоставления моделей](general-electronic-reporting.md#data-model-and-model-mapping-components).</span><span class="sxs-lookup"><span data-stu-id="b7797-177">Because new versions of ER configurations are constantly published to the Global repository and LCS to keep the corresponding solutions compliant with new requirements, the latest versions of the required [data model](general-electronic-reporting.md#data-model-and-model-mapping-components) configuration and its [model mapping](general-electronic-reporting.md#data-model-and-model-mapping-components) configurations were imported.</span></span>

![Страница конфигураций](./media/er-quick-start3-imported-solution1a.png)

<span data-ttu-id="b7797-179">Чтобы смоделировать состояние, в котором использовались бы конфигурации электронной отчетности в текущем экземпляре Finance, если импортировать версию **11.2.2** формата электронной отчетности **Накладная по продаже PEPPOL** в прошлом (например, на 7 августа 2019 года), выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="b7797-179">To simulate the state that ER configurations in the current Finance instance  would be in if you imported version **11.2.2** of the **Peppol Sales Invoice** ER format in the past (for example, on August 7, 2019), follow these steps.</span></span>

- <span data-ttu-id="b7797-180">На панели действий выберите **Удалить**, чтобы удалить все конфигурации электронной отчетности, опубликованные после 7 августа 2019 года.</span><span class="sxs-lookup"><span data-stu-id="b7797-180">On the Action Pane, select **Delete** to delete all ER configurations that were published after August 7, 2019.</span></span> <span data-ttu-id="b7797-181">Должны остаться только конфигурации **Модель накладных**, **Сопоставление модели накладных** (первоначально именуемое **Сопоставление модели накладных клиента**), **Накладная по продаже UBL** и **Накладная по продаже PEPPOL**.</span><span class="sxs-lookup"><span data-stu-id="b7797-181">The only **Invoice model**, **Invoice model mapping** (initially named **Customer invoice model mapping**), **UBL Sales invoice** and **Peppol Sales Invoice** configurations must be left.</span></span>
- <span data-ttu-id="b7797-182">Для оставшихся конфигураций электронной отчетности на экспресс-вкладке **Версии** выберите **Удалить** для удаления всех конфигураций электронной отчетности, опубликованных после 7 августа 2019 года.</span><span class="sxs-lookup"><span data-stu-id="b7797-182">For the remained ER configurations, on the **Versions** FastTab, select **Delete** to delete all versions of ER configurations that were published after August 7, 2019.</span></span>

<span data-ttu-id="b7797-183">Затем проверьте, что в дереве конфигураций доступны следующие конфигурации:</span><span class="sxs-lookup"><span data-stu-id="b7797-183">Then verify that the following configurations are available in the configuration tree:</span></span>

- <span data-ttu-id="b7797-184">Конфигурация модели данных электронной отчетности **Модель накладных** (первоначально называлась **Модель накладных клиентов**):</span><span class="sxs-lookup"><span data-stu-id="b7797-184">**Invoice model** ER data model configuration (initially named **Customer invoice model**):</span></span>

    - <span data-ttu-id="b7797-185">Версия 11 содержит версию 10 компонента [модели данных](general-electronic-reporting.md#data-model-and-model-mapping-components) электронной отчетности, представляющую структуру данных бизнес-домена выставления накладных.</span><span class="sxs-lookup"><span data-stu-id="b7797-185">Version 11 contains version 10 of the [data model](general-electronic-reporting.md#data-model-and-model-mapping-components) ER component that represents the data structure of the invoicing business domain.</span></span> <span data-ttu-id="b7797-186">Эта конфигурация электронной отчетности была импортирована в качестве предка формата **Накладная по продаже PEPPOL**, который был выбран для импорта.</span><span class="sxs-lookup"><span data-stu-id="b7797-186">This ER configuration has been imported as an ancestor of the **Peppol Sales Invoice** ER format that was selected for import.</span></span>
    - <span data-ttu-id="b7797-187">Версия 50 содержит версию 31 компонента модели данных электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-187">Version 50 contains version 31 of the data model ER component.</span></span> <span data-ttu-id="b7797-188">Эта конфигурация электронной отчетности была импортирована в качестве предка версии от 7 августа 2019 года конфигурации сопоставления модели электронной отчетности **Сопоставление модели накладных**.</span><span class="sxs-lookup"><span data-stu-id="b7797-188">This ER configuration has been imported as an ancestor of the August 7, 2019, version of the **Invoice model mapping** ER model mapping configuration.</span></span>

    ![Конфигурация модели электронной отчетности модели накладных на странице конфигураций](./media/er-quick-start3-imported-solution1b1.png)

    > [!TIP]
    > <span data-ttu-id="b7797-190">Если вы не видите версию 50 этой модели данных, откройте глобальный репозиторий и импортируйте версию 50.19 конфигурации электронной отчетности **Сопоставление модели накладных**.</span><span class="sxs-lookup"><span data-stu-id="b7797-190">If you don't see version 50 of this data model, open the Global repository, and import version 50.19 of the **Invoice model mapping** ER configuration.</span></span>

- <span data-ttu-id="b7797-191">Конфигурация сопоставления модели электронной отчетности **Сопоставление модели накладных** (первоначально называлась **Сопоставление модели накладных клиентов**):</span><span class="sxs-lookup"><span data-stu-id="b7797-191">**Invoice model mapping** ER model mapping configuration (initially named **Customer invoice model mapping**):</span></span>

    - <span data-ttu-id="b7797-192">Версия 50.19 была импортирована в качестве последней реализации версии 50 конфигурации модели данных электронной отчетности **Модель накладных**.</span><span class="sxs-lookup"><span data-stu-id="b7797-192">Version 50.19 has been imported as the latest implementation of version 50 of the **Invoice model** ER data model configuration.</span></span> <span data-ttu-id="b7797-193">Она содержит два компонента электронной отчетности [сопоставления моделей](general-electronic-reporting.md#data-model-and-model-mapping-components), в которых описывается заполнение модели данных данными приложения во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="b7797-193">It contains two [model mapping](general-electronic-reporting.md#data-model-and-model-mapping-components) ER components that describe how the data model is filled in with application data at runtime.</span></span>

    ![Конфигурация сопоставления модели электронной отчетности "Сопоставление модели накладных" на странице конфигураций](./media/er-quick-start3-imported-solution1b2.png)

    > [!TIP]
    > <span data-ttu-id="b7797-195">Если вы не видите версию 50.19 этого сопоставления модели, откройте глобальный репозиторий и импортируйте версию 50.19 конфигурации электронной отчетности **Сопоставление модели накладных**.</span><span class="sxs-lookup"><span data-stu-id="b7797-195">If you don't see version 50.19 of this model mapping, open the Global repository, and import version 50.19 of the **Invoice model mapping** ER configuration.</span></span>

- <span data-ttu-id="b7797-196">Конфигурации формата электронной отчетности **Накладная по продаже UBL**:</span><span class="sxs-lookup"><span data-stu-id="b7797-196">**UBL Sales invoice** ER format configuration:</span></span>

    - <span data-ttu-id="b7797-197">Версия 11.2 содержит [формат](general-electronic-reporting.md#FormatComponentOutbound) и компоненты сопоставления форматов электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-197">Version 11.2 contains the [format](general-electronic-reporting.md#FormatComponentOutbound) and format mapping ER components.</span></span> <span data-ttu-id="b7797-198">Компонент формата определяет макет отчета.</span><span class="sxs-lookup"><span data-stu-id="b7797-198">The format component specifies the report layout.</span></span> <span data-ttu-id="b7797-199">Компонент сопоставления формата содержит источник данных модели и определяет, как источник данных используется для заполнения макет отчета во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="b7797-199">The format mapping component contains the model data source and specifies how this data source is used to fill in the report layout at runtime.</span></span> <span data-ttu-id="b7797-200">Этот формат электронной отчетности был настроен на генерирование электронных накладных в формате Universal Business Language (UBL).</span><span class="sxs-lookup"><span data-stu-id="b7797-200">This ER format was configured to generate e-invoices in Universal Business Language (UBL) format.</span></span> <span data-ttu-id="b7797-201">Он был импортирована в качестве родителя формата **Накладная по продаже PEPPOL**, который был выбран для импорта.</span><span class="sxs-lookup"><span data-stu-id="b7797-201">It has been imported as a parent of the **Peppol Sales Invoice** ER format that was selected for import.</span></span>

- <span data-ttu-id="b7797-202">Конфигурации формата электронной отчетности **Накладная по продаже PEPPOL**:</span><span class="sxs-lookup"><span data-stu-id="b7797-202">**Peppol Sales Invoice** ER format configuration:</span></span>

    - <span data-ttu-id="b7797-203">Версия 11.2.2 содержит компоненты формата и сопоставления формата электронной отчетности, которые были настроены для создания электронных накладных в формате Pan-European Public Procurement OnLine (PEPPOL).</span><span class="sxs-lookup"><span data-stu-id="b7797-203">Version 11.2.2 contains the format and format mapping ER components that were configured to generate e-invoices in Pan-European Public Procurement OnLine (PEPPOL) format.</span></span>

    ![Конфигурация формата электронной отчетности "Накладная по продаже PEPPOL" на странице конфигураций](./media/er-quick-start3-imported-solution1b3.png)

## <a name="configure-the-accounts-receivable-parameters"></a><a name="ConfigureAR1"></a><span data-ttu-id="b7797-205">Настройка параметров расчетов с клиентами</span><span class="sxs-lookup"><span data-stu-id="b7797-205">Configure the Accounts receivable parameters</span></span>

1. <span data-ttu-id="b7797-206">Перейдите в раздел **Расчеты с клиентами** \> **Настройка** \> **Параметры модуля расчетов с клиентами**.</span><span class="sxs-lookup"><span data-stu-id="b7797-206">Go to **Accounts receivable** \> **Setup** \> **Accounts receivable parameters**.</span></span>
2. <span data-ttu-id="b7797-207">На вкладке **Электронные документы** на экспресс-вкладке **Электронная отчетность** в поле **Накладная по продаже и с произвольным текстом** выберите **Накладная по продаже PEPPOL**.</span><span class="sxs-lookup"><span data-stu-id="b7797-207">On the **Electronic documents** tab, on the **Electronic reporting** FastTab, in the **Sales and Free text invoice** field, select **Peppol Sales Invoice**.</span></span>
3. <span data-ttu-id="b7797-208">Нажмите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="b7797-208">Select **Save**.</span></span>

![Вкладка электронных документов на странице параметров модуля "расчеты с клиентами"](./media/er-quick-start3-configure-ar1.png)

## <a name="configure-the-legal-entity-parameters"></a><a name="ConfigureLE"></a><span data-ttu-id="b7797-210">Настройка параметров юридического лица</span><span class="sxs-lookup"><span data-stu-id="b7797-210">Configure the legal entity parameters</span></span>

1. <span data-ttu-id="b7797-211">Перейдите в раздел **Управление организацией** \> **Организации** \> **Юридические лица**.</span><span class="sxs-lookup"><span data-stu-id="b7797-211">Go to **Organization administration** \> **Organizations** \> **Legal entities**.</span></span>
2. <span data-ttu-id="b7797-212">Для выбранной компании **DEMF** на экспресс-вкладке **Сведения о банковском счете** в поле **Код банка** введите **1234**.</span><span class="sxs-lookup"><span data-stu-id="b7797-212">For the selected **DEMF** company, on the **Bank account information** FastTab, in the **Routing number** field, enter **1234**.</span></span>
3. <span data-ttu-id="b7797-213">Нажмите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="b7797-213">Select **Save**.</span></span>
4. <span data-ttu-id="b7797-214">Закройте страницу **Юридические лица**.</span><span class="sxs-lookup"><span data-stu-id="b7797-214">Close the **Legal entities** page.</span></span>

## <a name="prepare-a-customer-record"></a><a name="ConfigureCustomer1"></a><span data-ttu-id="b7797-215">Подготовка записи клиента</span><span class="sxs-lookup"><span data-stu-id="b7797-215">Prepare a customer record</span></span>

1. <span data-ttu-id="b7797-216">Перейдите в раздел **Расчеты с клиентами** \> **Клиенты** \> **Все клиенты**.</span><span class="sxs-lookup"><span data-stu-id="b7797-216">Go to **Accounts receivable** \> **Customers** \> **All customers**.</span></span>
2. <span data-ttu-id="b7797-217">На странице **Все клиенты** выберите ссылку на счет клиента **DE-014**.</span><span class="sxs-lookup"><span data-stu-id="b7797-217">On the **All customers** page, select the **DE-014** customer account link.</span></span>

### <a name="add-a-customer-contact"></a><span data-ttu-id="b7797-218">Добавление контактных данных клиента</span><span class="sxs-lookup"><span data-stu-id="b7797-218">Add a customer contact</span></span>

1. <span data-ttu-id="b7797-219">Перейдите в раздел **Расчеты с клиентами** \> **Клиенты** \> **Все клиенты**.</span><span class="sxs-lookup"><span data-stu-id="b7797-219">Go to **Accounts receivable** \> **Customers** \> **All customers**.</span></span>
2. <span data-ttu-id="b7797-220">В области действий на вкладке **Клиент** в группе **Организации** выберите **Контакты**.</span><span class="sxs-lookup"><span data-stu-id="b7797-220">On the Action Pane, on the **Customer** tab, in the **Accounts** group, select **Contacts**.</span></span>
3. <span data-ttu-id="b7797-221">Выберите **Добавить контакты**.</span><span class="sxs-lookup"><span data-stu-id="b7797-221">Select **Add contacts**.</span></span>
4. <span data-ttu-id="b7797-222">На странице **Контакты** в поле **Имя** откройте подстановку, выберите **Адам Картер**, затем выберите команду **Выбрать**, чтобы закрыть подстановку.</span><span class="sxs-lookup"><span data-stu-id="b7797-222">On the **Contacts** page, in the **First name** field, open the lookup, select **Adam Carter**, and then select **Select** to close the lookup.</span></span>
5. <span data-ttu-id="b7797-223">Нажмите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="b7797-223">Select **Save**.</span></span>
6. <span data-ttu-id="b7797-224">Закройте страницу **Контакты**.</span><span class="sxs-lookup"><span data-stu-id="b7797-224">Close the **Contacts** page.</span></span>

### <a name="define-a-primary-contact"></a><span data-ttu-id="b7797-225">Определение основного контакта</span><span class="sxs-lookup"><span data-stu-id="b7797-225">Define a primary contact</span></span>

1. <span data-ttu-id="b7797-226">Перейдите в раздел **Расчеты с клиентами** \> **Клиенты** \> **Все клиенты**.</span><span class="sxs-lookup"><span data-stu-id="b7797-226">Go to **Accounts receivable** \> **Customers** \> **All customers**.</span></span>
2. <span data-ttu-id="b7797-227">На экспресс-вкладке **Демографические данные продаж** в поле **Основное контактное лицо** выберите **Адам Картер**.</span><span class="sxs-lookup"><span data-stu-id="b7797-227">On the **Sales demographics** FastTab, in the **Primary contact** field, select **Adam Carter**.</span></span>

### <a name="set-the-e-invoicing-option"></a><span data-ttu-id="b7797-228">Настройка параметра выставления электронных накладных</span><span class="sxs-lookup"><span data-stu-id="b7797-228">Set the e-invoicing option</span></span>

1. <span data-ttu-id="b7797-229">Перейдите в раздел **Расчеты с клиентами** \> **Клиенты** \> **Все клиенты**.</span><span class="sxs-lookup"><span data-stu-id="b7797-229">Go to **Accounts receivable** \> **Customers** \> **All customers**.</span></span>
2. <span data-ttu-id="b7797-230">На экспресс-вкладке **Накладные и поставка** установите для параметра **Электронная накладная** значение **Да**.</span><span class="sxs-lookup"><span data-stu-id="b7797-230">On the **Invoice and delivery** FastTab, set the **eInvoice** option to **Yes**.</span></span>
3. <span data-ttu-id="b7797-231">Нажмите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="b7797-231">Select **Save**.</span></span>
4. <span data-ttu-id="b7797-232">Закройте страницу **Все клиенты**.</span><span class="sxs-lookup"><span data-stu-id="b7797-232">Close the **All customers** page.</span></span>

## <a name="process-a-customer-invoice-by-using-the-standard-er-configurations"></a><a name="ProcessInvoice1"></a><span data-ttu-id="b7797-233">Обработка накладной клиента с использованием стандартных конфигураций электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-233">Process a customer invoice by using the standard ER configurations</span></span>

<span data-ttu-id="b7797-234">Теперь можно использовать стандартные конфигурации электронной отчетности, импортированные в электронном виде, для отправки клиенту накладной с произвольным текстом.</span><span class="sxs-lookup"><span data-stu-id="b7797-234">You can now use the standard ER configurations that you imported to electronically send a free text invoice to a customer.</span></span>

### <a name="add-a-new-invoice"></a><span data-ttu-id="b7797-235">Добавление новой накладной</span><span class="sxs-lookup"><span data-stu-id="b7797-235">Add a new invoice</span></span>

1. <span data-ttu-id="b7797-236">Перейдите в раздел **Расчеты с клиентами** \> **Накладные** \> **Все накладные с произвольным текстом**.</span><span class="sxs-lookup"><span data-stu-id="b7797-236">Go to **Accounts receivable** \> **Invoices** \> **All free text invoices**.</span></span>
2. <span data-ttu-id="b7797-237">На странице **Накладная с произвольным текстом** выберите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="b7797-237">On the **Free text invoice** page, select **New**.</span></span>
3. <span data-ttu-id="b7797-238">На экспресс-вкладке **Заголовок накладной с произвольным текстом** в поле **Счет клиента** выберите **DE-014**.</span><span class="sxs-lookup"><span data-stu-id="b7797-238">On the **Free text invoice header** FastTab, in the **Customer account** field, select **DE-014**.</span></span>
4. <span data-ttu-id="b7797-239">На экспресс-вкладке **Строки накладной** автоматически добавляется строка накладной.</span><span class="sxs-lookup"><span data-stu-id="b7797-239">On the **Invoice lines** FastTab, an invoice line is automatically added.</span></span> <span data-ttu-id="b7797-240">В этой строке установите следующие поля:</span><span class="sxs-lookup"><span data-stu-id="b7797-240">On this line, set the following fields:</span></span>

    - <span data-ttu-id="b7797-241">В поле **Описание** введите **Ноутбук**.</span><span class="sxs-lookup"><span data-stu-id="b7797-241">In the **Description** field, enter **Notebook**.</span></span>
    - <span data-ttu-id="b7797-242">В поле **Счет ГК** выберите **401100**.</span><span class="sxs-lookup"><span data-stu-id="b7797-242">In the **Main account** field, select **401100**.</span></span>
    - <span data-ttu-id="b7797-243">В поле **Цена за единицу** введите **1000**.</span><span class="sxs-lookup"><span data-stu-id="b7797-243">In the **Unit price** field, enter **1000**.</span></span>

5. <span data-ttu-id="b7797-244">Нажмите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="b7797-244">Select **Save**.</span></span>

![Страница накладной с произвольным текстом](./media/er-quick-start3-add-invoice.png)

<span data-ttu-id="b7797-246">Дополнительные сведения см. в разделе [Создание накладной с произвольным текстом](../../../finance/accounts-receivable/create-free-text-invoice-new.md).</span><span class="sxs-lookup"><span data-stu-id="b7797-246">For more information, see [Create a free text invoice](../../../finance/accounts-receivable/create-free-text-invoice-new.md).</span></span>

### <a name="post-a-new-invoice"></a><span data-ttu-id="b7797-247">Разноска новой накладной</span><span class="sxs-lookup"><span data-stu-id="b7797-247">Post a new invoice</span></span>

1. <span data-ttu-id="b7797-248">Перейдите в раздел **Расчеты с клиентами** \> **Накладные** \> **Все накладные с произвольным текстом**.</span><span class="sxs-lookup"><span data-stu-id="b7797-248">Go to **Accounts receivable** \> **Invoices** \> **All free text invoices**.</span></span>
2. <span data-ttu-id="b7797-249">На странице **Накладная с произвольным текстом** в области действий выберите **Разнести**.</span><span class="sxs-lookup"><span data-stu-id="b7797-249">On the **Free text invoice** page, on the Action Pane, select **Post**.</span></span>
3. <span data-ttu-id="b7797-250">В диалоговом окне **Разноска накладной с произвольным текстом** выберите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="b7797-250">In the **Post free text invoice** dialog box, select **OK**.</span></span>

![Страница сведений о накладной с произвольным текстом](./media/er-quick-start3-post-invoice.png)

### <a name="send-a-posted-invoice"></a><span data-ttu-id="b7797-252">Отправка разнесенной накладной</span><span class="sxs-lookup"><span data-stu-id="b7797-252">Send a posted invoice</span></span>

1. <span data-ttu-id="b7797-253">Перейдите в раздел **Расчеты с клиентами** \> **Накладные** \> **Все накладные с произвольным текстом**.</span><span class="sxs-lookup"><span data-stu-id="b7797-253">Go to **Accounts receivable** \> **Invoices** \> **All free text invoices**.</span></span>
2. <span data-ttu-id="b7797-254">На странице **Накладная с произвольным текстом** на панели действий в группе **Документ** выберите **Отправить** \> **Оригинал**.</span><span class="sxs-lookup"><span data-stu-id="b7797-254">On the **Free text invoice** page, on the Action Pane, in the **Document** group, select **Send** \> **Original**.</span></span>

    ![Предварительный просмотр исходной накладной](./media/er-quick-start3-send-invoice.png)

3. <span data-ttu-id="b7797-256">Закройте страницу **Накладная с произвольным текстом**.</span><span class="sxs-lookup"><span data-stu-id="b7797-256">Close the **Free text invoice** page.</span></span>

### <a name="analyze-a-generated-e-invoice"></a><span data-ttu-id="b7797-257">Анализ созданной электронной накладной</span><span class="sxs-lookup"><span data-stu-id="b7797-257">Analyze a generated e-invoice</span></span>

1. <span data-ttu-id="b7797-258">Перейдите в раздел **Управление организацией** \> **Электронная отчетность** \> **Задания электронной отчетности**.</span><span class="sxs-lookup"><span data-stu-id="b7797-258">Go to **Organization administration** \> **Electronic reporting** \> **Electronic reporting jobs**.</span></span>
2. <span data-ttu-id="b7797-259">На странице **Задания электронной отчетности** выберите начальную запись, которая содержит описание задачи **Отправить электронную накладную в формате XML**.</span><span class="sxs-lookup"><span data-stu-id="b7797-259">On the **Electronic reporting jobs** page, select the initial record that has the task description **Send the eInvoice XML**.</span></span>
3. <span data-ttu-id="b7797-260">Выберите **Показать файлы** для доступа к списку созданных файлов.</span><span class="sxs-lookup"><span data-stu-id="b7797-260">Select **Show files** to access the list of generated files.</span></span>

    ![Страница заданий электронной отчетности](./media/er-quick-start3-jobs-list.png)

4. <span data-ttu-id="b7797-262">Выберите **Открыть**, чтобы загрузить созданный XML-файл электронной накладной.</span><span class="sxs-lookup"><span data-stu-id="b7797-262">Select **Open** to download the e-invoice XML file that is generated.</span></span>
5. <span data-ttu-id="b7797-263">Проанализируйте XML-файл электронной накладной.</span><span class="sxs-lookup"><span data-stu-id="b7797-263">Analyze the e-invoice XML file.</span></span> <span data-ttu-id="b7797-264">Обратите внимание, что в настоящее время налоговая схема клиента представлена атрибутами XML **schemeID** и **schemeAgencyID**.</span><span class="sxs-lookup"><span data-stu-id="b7797-264">Notice that the customer tax schema is currently represented by the **schemeID** and **schemeAgencyID** XML attributes.</span></span> <span data-ttu-id="b7797-265">Также обратите внимание, что в настоящее время XML-элемент **cbc:CustomizationID** содержит следующий текст: `urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:# urn:www.peppol.eu:bis:peppol5a:ver1.0`.</span><span class="sxs-lookup"><span data-stu-id="b7797-265">Also notice that the **cbc:CustomizationID** XML element currently contains the following text: `urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:# urn:www.peppol.eu:bis:peppol5a:ver1.0`.</span></span>

    ![Предварительный просмотр созданного XML-файла электронной накладной](./media/er-quick-start3-e-invoice1.png)

## <a name="add-a-custom-database-field"></a><a name="AddCustomField"></a><span data-ttu-id="b7797-267">Добавление настраиваемого поля базы данных</span><span class="sxs-lookup"><span data-stu-id="b7797-267">Add a custom database field</span></span>

<span data-ttu-id="b7797-268">Можно использовать функцию [настраиваемого поля](../../fin-ops/get-started/user-defined-fields.md) для выполнения следующих настроек в текущем экземпляре Finance:</span><span class="sxs-lookup"><span data-stu-id="b7797-268">You can use the [Custom field](../../fin-ops/get-started/user-defined-fields.md) feature to do the following customization in the current Finance instance:</span></span>

- <span data-ttu-id="b7797-269">Настройте структуру базы данных, добавив новое настраиваемое поле базы данных, в котором хранится код плательщика федерального налога для каждого клиента.</span><span class="sxs-lookup"><span data-stu-id="b7797-269">Customize the database structure by adding a new custom database field that stores a federal tax identification code for every customer.</span></span>
- <span data-ttu-id="b7797-270">Настройте страницу **Клиент**, добавив новое поле ввода данных, которое можно использовать для ввода значения налогового кода в новое пользовательское поле базы данных.</span><span class="sxs-lookup"><span data-stu-id="b7797-270">Customize the **Customer** page by adding a new data entry field that can be used to enter a tax code value in the new custom database field.</span></span>

<span data-ttu-id="b7797-271">Выполните следующие шаги, чтобы выполнить настройку.</span><span class="sxs-lookup"><span data-stu-id="b7797-271">Follow these steps to do the customization.</span></span>

1. <span data-ttu-id="b7797-272">Перейдите в раздел **Расчеты с клиентами** \> **Клиенты** \> **Все клиенты**.</span><span class="sxs-lookup"><span data-stu-id="b7797-272">Go to **Accounts receivables** \> **Customers** \> **All customers**.</span></span>
2. <span data-ttu-id="b7797-273">На странице **Все клиенты** выберите ссылку на счет клиента **DE-014**.</span><span class="sxs-lookup"><span data-stu-id="b7797-273">On the **All customers** page, select the **DE-014** customer account link.</span></span>
3. <span data-ttu-id="b7797-274">На экспресс-вкладке **Общие** щелкните правой кнопкой мыши любое пустое место под полем **Язык**, затем выберите **Персонализация: верхняя группа**.</span><span class="sxs-lookup"><span data-stu-id="b7797-274">On the **General** FastTab, right-click in any blank area under the **Language** field, and then select **Personalize: UpperGroup**.</span></span>

    <span data-ttu-id="b7797-275">Содержимое экспресс-вкладки **Общие** будет выделено, и появится меню **Персонализация**.</span><span class="sxs-lookup"><span data-stu-id="b7797-275">The contents of the **General** FastTab are highlighted, and a **Personalize** menu appears.</span></span>

4. <span data-ttu-id="b7797-276">В меню **Персонализация** выберите **Добавить поле**.</span><span class="sxs-lookup"><span data-stu-id="b7797-276">On the **Personalize** menu, select **Add a field**.</span></span>
5. <span data-ttu-id="b7797-277">В диалоговом окне **Добавление столбцов** выберите **Создать новое поле**.</span><span class="sxs-lookup"><span data-stu-id="b7797-277">In the **Add columns** dialog box, select **Create new field**.</span></span>
6. <span data-ttu-id="b7797-278">В диалоговом окне **Создать новое поле** в поле **Имя таблицы** выберите **Клиенты**.</span><span class="sxs-lookup"><span data-stu-id="b7797-278">In the **Create new field** dialog box, in the **Table name** field, select **Customers**.</span></span>
7. <span data-ttu-id="b7797-279">В поле **Префикс имени** введите **FederalTaxID**.</span><span class="sxs-lookup"><span data-stu-id="b7797-279">In the **Name prefix** field, enter **FederalTaxID**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="b7797-280">Полное имя поля было автоматически определено как **FederalTaxID\_Custom**.</span><span class="sxs-lookup"><span data-stu-id="b7797-280">The whole field name has been automatically defined as **FederalTaxID\_Custom**.</span></span>

8. <span data-ttu-id="b7797-281">В поле **Метка** введите **Код плательщика федерального налога**.</span><span class="sxs-lookup"><span data-stu-id="b7797-281">In the **Label** field, enter **Federal Tax ID**.</span></span>
9. <span data-ttu-id="b7797-282">В поле **Тип** выберите **Текст**.</span><span class="sxs-lookup"><span data-stu-id="b7797-282">In the **Type** field, select **Text**.</span></span>
10. <span data-ttu-id="b7797-283">В поле **Длина** введите **20**.</span><span class="sxs-lookup"><span data-stu-id="b7797-283">In the **Length** field, enter **20**.</span></span>
11. <span data-ttu-id="b7797-284">Нажмите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="b7797-284">Select **Save**.</span></span>
12. <span data-ttu-id="b7797-285">В окне сообщения выберите **Да**, чтобы подтвердить, что вы хотите создать новую запись поля **FederalTaxID** для таблицы **Клиенты**.</span><span class="sxs-lookup"><span data-stu-id="b7797-285">In the message box that appears, select **Yes** to confirm that you want to create a new **FederalTaxID** field entry for the **Customers** table.</span></span>
13. <span data-ttu-id="b7797-286">Выберите **Вставить**, чтобы <a name="insert_custom_field"></a>добавить поле **FederalTaxID\_Custom** на текущую страницу.</span><span class="sxs-lookup"><span data-stu-id="b7797-286">Select **Insert** to <a name="insert_custom_field"></a>add the **FederalTaxID\_Custom** field to the current page.</span></span>

    ![Страница всех клиентов](./media/er-quick-start3-create-new-field.gif)

14. <span data-ttu-id="b7797-288">Закройте страницу **Все клиенты**.</span><span class="sxs-lookup"><span data-stu-id="b7797-288">Close the **All customers** page.</span></span>

## <a name="refresh-the-er-metadata"></a><a name="RefreshERMetadata"></a><span data-ttu-id="b7797-289">Обновление метаданных электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-289">Refresh the ER metadata</span></span>

<span data-ttu-id="b7797-290">Необходимо обновить метаданные электронной отчетности, чтобы сделать добавленное вами настраиваемое поле [видимым](electronic-reporting-er-configure-parameters.md#frequently-asked-questions) в конструкторе сопоставления моделей электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-290">You must refresh the ER metadata to make the custom field that you added [visible](electronic-reporting-er-configure-parameters.md#frequently-asked-questions) in the ER model mapping designer.</span></span>

1. <span data-ttu-id="b7797-291">Перейдите в раздел **Администрирование организации** \> **Электронная отчетность** \> **Перестроить ссылки на таблицы**.</span><span class="sxs-lookup"><span data-stu-id="b7797-291">Go to **Organization administration** \> **Electronic reporting** \> **Rebuild table references**.</span></span>
2. <span data-ttu-id="b7797-292">В диалоговом окне **Обновление модели данных** нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="b7797-292">In the **Update data model** dialog box, select **OK**.</span></span>

## <a name="design-the-custom-er-configurations"></a><a name="DesignCustomERConfigurations"></a><span data-ttu-id="b7797-293">Проектирование пользовательских конфигураций электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-293">Design the custom ER configurations</span></span>

<span data-ttu-id="b7797-294">Можно использовать конфигурации электронной отчетности, предоставляемые корпорацией Майкрософт, для разработки пользовательских конфигураций электронной отчетности, чтобы они создавали электронные накладные, содержащие новый налоговый код.</span><span class="sxs-lookup"><span data-stu-id="b7797-294">You can use the Microsoft-provided ER configurations to design your custom ER configurations so that they generate e-invoices that contain the new tax code.</span></span>

### <a name="customize-the-data-model-configuration"></a><span data-ttu-id="b7797-295">Настройка конфигурации модели данных</span><span class="sxs-lookup"><span data-stu-id="b7797-295">Customize the data model configuration</span></span>

<span data-ttu-id="b7797-296">В качестве пользователя в роли функционального консультанта по электронной отчетности вы можете разработать собственную модель данных электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-296">As a user in the Electronic Reporting Functional Consultant role, you can design your custom ER data model.</span></span>

#### <a name="add-a-custom-data-model-configuration"></a><span data-ttu-id="b7797-297">Добавление пользовательской конфигурации модели данных</span><span class="sxs-lookup"><span data-stu-id="b7797-297">Add a custom data model configuration</span></span>

1. <span data-ttu-id="b7797-298">Перейдите в раздел **Администрирование организации** \> **Электронная отчетность** \> **Конфигурации**.</span><span class="sxs-lookup"><span data-stu-id="b7797-298">Go to **Organization administration** \> **Electronic reporting** \> **Configurations**.</span></span>
2. <span data-ttu-id="b7797-299">На странице **Конфигурации** в дереве конфигураций на левой панели выберите **Модель накладной для клиента**.</span><span class="sxs-lookup"><span data-stu-id="b7797-299">On the **Configurations** page, in the configuration tree in the left pane, select **Customer invoice model**.</span></span>
3. <span data-ttu-id="b7797-300">В панели операций выберите **Создать конфигурацию**.</span><span class="sxs-lookup"><span data-stu-id="b7797-300">On the Action Pane, select **Create configuration**.</span></span>
4. <span data-ttu-id="b7797-301">В раскрывающемся диалоговом окне в поле **Создать** выберите **Производное от Имя: модель накладных клиента, Майкрософт**, чтобы указать, что новая настраиваемая конфигурация модели данных электронной отчетности должна основываться на конфигурации модели данных электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-301">In the drop-down dialog box, in the **New** field, select **Derive from Name: Customer invoice model, Microsoft** to indicate that your new custom ER data model configuration should be based on the ER data model configuration.</span></span>
5. <span data-ttu-id="b7797-302">В поле **Имя** введите **Модель накладной (Litware)**.</span><span class="sxs-lookup"><span data-stu-id="b7797-302">In the **Name** field, enter **Invoice model (Litware)**.</span></span>
6. <span data-ttu-id="b7797-303">Выберите **Создать конфигурацию**, чтобы добавить новую конфигурацию электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-303">Select **Create configuration** to add the new ER configuration.</span></span>

<span data-ttu-id="b7797-304">Теперь можно использовать конструктор моделей данных электронной отчетности для редактирования версии 50.1 конфигурации электронной отчетности **Модель накладной (Litware)** в **черновом** [статусе](general-electronic-reporting.md#component-versioning).</span><span class="sxs-lookup"><span data-stu-id="b7797-304">You can now use the ER data model designer to edit version 50.1 of the **Invoice model (Litware)** ER configuration in **Draft** [status](general-electronic-reporting.md#component-versioning).</span></span>

![Версии 50.1 конфигурации электронной отчетности на странице конфигураций](./media/er-quick-start3-added-custom-model.png)

#### <a name="configure-a-custom-data-model"></a><span data-ttu-id="b7797-306">Настройка пользовательской модели данных</span><span class="sxs-lookup"><span data-stu-id="b7797-306">Configure a custom data model</span></span>

<span data-ttu-id="b7797-307">Необходимо изменить пользовательскую модель данных, добавив новое поле, чтобы предоставить значение кода плательщика федерального налога.</span><span class="sxs-lookup"><span data-stu-id="b7797-307">You must modify your custom data model by adding a new field to provide the value of a federal tax identification code.</span></span> <span data-ttu-id="b7797-308">Этот код является частью данных о клиентах для каждого формата электронной отчетности, который будет использовать эту модель данных в качестве источника данных.</span><span class="sxs-lookup"><span data-stu-id="b7797-308">This code is part of the customer data for every ER format that will use this data model as a data source.</span></span>

1. <span data-ttu-id="b7797-309">На странице **Конфигурации** в дереве конфигураций на левой панели выберите **Модель накладной (Litware)**.</span><span class="sxs-lookup"><span data-stu-id="b7797-309">On the **Configurations** page, in the configuration tree in the left pane, select **Invoice model (Litware)**.</span></span>
2. <span data-ttu-id="b7797-310">На экспресс-вкладке **Версии** выберите версию **50.1** выбранной конфигурации модели данных электронной отчетности в статусе **Черновик**.</span><span class="sxs-lookup"><span data-stu-id="b7797-310">On the **Versions** FastTab, select version **50.1** of the selected ER data model configuration in **Draft** status.</span></span>
3. <span data-ttu-id="b7797-311">На панели операций выберите **Конструктор** для выбранной версии конфигурации.</span><span class="sxs-lookup"><span data-stu-id="b7797-311">On the Action Pane, select **Designer** for the selected configuration version.</span></span>
4. <span data-ttu-id="b7797-312">На странице **Конструктор моделей данных** в дереве моделей данных выберите **Сведения о клиенте (Клиент)**.</span><span class="sxs-lookup"><span data-stu-id="b7797-312">On the **Data model designer** page, in the data model tree, select **Customer information (Customer)**.</span></span>
5. <span data-ttu-id="b7797-313">Выберите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="b7797-313">Select **New**.</span></span>
6. <span data-ttu-id="b7797-314">В диалоговом окне раскрывающегося списка в поле **Создать узел как** примите значение по умолчанию: **Дочерний от активного узла**.</span><span class="sxs-lookup"><span data-stu-id="b7797-314">In the drop-down dialog box, in the **New node as a** field, accept the default value, **Child of an active node**.</span></span>
7. <span data-ttu-id="b7797-315">В поле **Имя** введите **FederalTaxID\_Litware**.</span><span class="sxs-lookup"><span data-stu-id="b7797-315">In the **Name** field, enter **FederalTaxID\_Litware**.</span></span>
8. <span data-ttu-id="b7797-316">В поле **Тип элемента** примите значение по умолчанию **Строка**.</span><span class="sxs-lookup"><span data-stu-id="b7797-316">In the **Item type** field, accept the default value, **String**.</span></span>
9. <span data-ttu-id="b7797-317">Выберите **Добавить**, затем выберите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="b7797-317">Select **Add**, and then select **Save**.</span></span>

    ![Страница конструктора модели данных](./media/er-quick-start3-add-data-model-field.png)

    > [!NOTE]
    > <span data-ttu-id="b7797-319">Поля **Метка** и **Описание** описывают назначение нового поля.</span><span class="sxs-lookup"><span data-stu-id="b7797-319">The **Label** and **Description** fields describe the purpose of the new field.</span></span> <span data-ttu-id="b7797-320">Эти поля можно заполнять на нескольких языках.</span><span class="sxs-lookup"><span data-stu-id="b7797-320">You can fill in these fields in multiple languages.</span></span> <span data-ttu-id="b7797-321">Дополнительные сведения см. в разделе [Разработка многоязычных отчетов в электронной отчетности](er-design-multilingual-reports.md).</span><span class="sxs-lookup"><span data-stu-id="b7797-321">For more information, see [Design multilingual reports in Electronic reporting](er-design-multilingual-reports.md).</span></span>

10. <span data-ttu-id="b7797-322">Закройте страницу **Конструктор модели данных**.</span><span class="sxs-lookup"><span data-stu-id="b7797-322">Close the **Data model designer** page.</span></span>

#### <a name="complete-a-custom-data-model-configuration"></a><span data-ttu-id="b7797-323">Завершение пользовательской конфигурации модели данных</span><span class="sxs-lookup"><span data-stu-id="b7797-323">Complete a custom data model configuration</span></span>

<span data-ttu-id="b7797-324">Необходимо [завершить](general-electronic-reporting.md#component-versioning) работу с версией 50.1 пользовательской модели данных электронной отчетности, чтобы она была доступна, чтобы можно было добавить другие пользовательские конфигурации электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-324">You must [complete](general-electronic-reporting.md#component-versioning) your work with version 50.1 of your custom ER data model configuration to make it available so that other custom ER configurations can be added.</span></span>

1. <span data-ttu-id="b7797-325">Перейдите в раздел **Администрирование организации** \> **Электронная отчетность** \> **Конфигурации**.</span><span class="sxs-lookup"><span data-stu-id="b7797-325">Go to **Organization administration** \> **Electronic reporting** \> **Configurations**.</span></span>
2. <span data-ttu-id="b7797-326">На странице **Конфигурации** в дереве конфигураций на левой панели разверните **Модель накладной**, затем выберите **Модель накладной (Litware)**.</span><span class="sxs-lookup"><span data-stu-id="b7797-326">On the **Configurations** page, in the configuration tree in the left pane, expand **Invoice model**, and select **Invoice model (Litware)**.</span></span>
3. <span data-ttu-id="b7797-327">На экспресс-вкладке **Версии** выберите **Изменить статус** \> **Завершено**, затем выберите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="b7797-327">On the **Versions** FastTab, select **Change status** \> **Complete**, and then select **OK**.</span></span>

<span data-ttu-id="b7797-328">Состояние версии 50.1 изменится с **Черновик** на **Завершено**, и версия становится доступной только для чтения.</span><span class="sxs-lookup"><span data-stu-id="b7797-328">The status of version 50.1 is changed from **Draft** to **Completed**, and the version becomes read-only.</span></span> <span data-ttu-id="b7797-329">Добавляется новая редактируемая версия, 50.2, имеющая статус **Черновик**.</span><span class="sxs-lookup"><span data-stu-id="b7797-329">A new editable version, 50.2, is added and has a status of **Draft**.</span></span> <span data-ttu-id="b7797-330">Эту версию можно использовать для внесения дальнейших изменений в настраиваемую конфигурацию модели данных электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-330">You can use this version to make further changes in your custom ER data model configuration.</span></span>

![Версия 50.1 завершена на странице конфигураций](./media/er-quick-start3-completed-custom-model1.png)

### <a name="customize-the-model-mapping-configuration"></a><span data-ttu-id="b7797-332">Настройка конфигурации сопоставления моделей</span><span class="sxs-lookup"><span data-stu-id="b7797-332">Customize the model mapping configuration</span></span>

<span data-ttu-id="b7797-333">В качестве пользователя в роли разработчика электронной отчетности вы можете разработать собственное сопоставление моделей электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-333">As a user in the Electronic Reporting Developer role, you can design your custom ER model mapping.</span></span>

#### <a name="add-a-custom-model-mapping-configuration"></a><span data-ttu-id="b7797-334">Добавление пользовательской конфигурации сопоставлений моделей</span><span class="sxs-lookup"><span data-stu-id="b7797-334">Add a custom model mapping configuration</span></span>

1. <span data-ttu-id="b7797-335">Перейдите в раздел **Администрирование организации** \> **Электронная отчетность** \> **Конфигурации**.</span><span class="sxs-lookup"><span data-stu-id="b7797-335">Go to **Organization administration** \> **Electronic reporting** \> **Configurations**.</span></span>
2. <span data-ttu-id="b7797-336">На странице **Конфигурации** в дереве конфигураций на левой панели разверните **Модель накладной клиенту**, затем выберите **Сопоставление модели накладной клиенту**.</span><span class="sxs-lookup"><span data-stu-id="b7797-336">On the **Configurations** page, in the configuration tree in the left pane, expand **Customer invoice model**, and select **Customer invoice model mapping**.</span></span>
3. <span data-ttu-id="b7797-337">В панели операций выберите **Создать конфигурацию**.</span><span class="sxs-lookup"><span data-stu-id="b7797-337">On the Action Pane, select **Create configuration**.</span></span>
4. <span data-ttu-id="b7797-338">В раскрывающемся диалоговом окне в поле **Создать** выберите **Производное от Имя: сопоставление моделей накладных клиенту, Майкрософт**, чтобы указать, что новая настраиваемая конфигурация сопоставления модели электронной отчетности должна основываться на конфигурации сопоставления модели электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-338">In the drop-down dialog box, in the **New** field, select **Derive from Name: Customer invoice model mapping, Microsoft** to indicate that your new custom ER model mapping configuration should be based on the ER model mapping configuration.</span></span>
5. <span data-ttu-id="b7797-339">В поле **Имя** введите **Сопоставление моделей накладных (Litware)**.</span><span class="sxs-lookup"><span data-stu-id="b7797-339">In the **Name** field, enter **Invoice model mapping (Litware)**.</span></span>
6. <span data-ttu-id="b7797-340">В поле **Целевая модель** выберите **Модель накладных (Litware)**.</span><span class="sxs-lookup"><span data-stu-id="b7797-340">In the **Target model** field, select **Invoice model (Litware)**.</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="b7797-341">Этот шаг очень важен.</span><span class="sxs-lookup"><span data-stu-id="b7797-341">This step is very important.</span></span> <span data-ttu-id="b7797-342">Если его опустить, вы не сможете использовать пользовательскую модель данных в настроенном сопоставлении моделей.</span><span class="sxs-lookup"><span data-stu-id="b7797-342">If you omit it, you won't be able to use your custom data model in the configured model mapping.</span></span>

7. <span data-ttu-id="b7797-343">Выберите **Создать конфигурацию**, чтобы добавить новую конфигурацию электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-343">Select **Create configuration** to add the new ER configuration.</span></span>

![Добавление пользовательской конфигурации сопоставления моделей на странице конфигураций](./media/er-quick-start3-adding-custom-mapping.png)

#### <a name="configure-a-custom-model-mapping"></a><span data-ttu-id="b7797-345">Настройка пользовательского сопоставления моделей</span><span class="sxs-lookup"><span data-stu-id="b7797-345">Configure a custom model mapping</span></span>

<span data-ttu-id="b7797-346">Необходимо изменить пользовательское сопоставление моделей и указать, как пользовательское поле **FederalTaxID\_Litware** в пользовательской модели данных должно заполняться данными приложения во время его выполнения.</span><span class="sxs-lookup"><span data-stu-id="b7797-346">You must modify your custom model mapping and specify how the custom **FederalTaxID\_Litware** field of the custom data model should be filled in with application data at runtime.</span></span>

1. <span data-ttu-id="b7797-347">Перейдите в раздел **Администрирование организации** \> **Электронная отчетность** \> **Конфигурации**.</span><span class="sxs-lookup"><span data-stu-id="b7797-347">Go to **Organization administration** \> **Electronic reporting** \> **Configurations**.</span></span>
2. <span data-ttu-id="b7797-348">На странице **Конфигурации** в дереве конфигураций на левой панели разверните **Модель накладной клиенту** \> **Сопоставление модели накладной клиенту**, затем выберите **Сопоставление модели накладной (Litware)**.</span><span class="sxs-lookup"><span data-stu-id="b7797-348">On the **Configurations** page, in the configuration tree in the left pane, expand **Customer invoice model** \> **Customer invoice model mapping**, and select **Invoice model mapping (Litware)**.</span></span>
3. <span data-ttu-id="b7797-349">В области действий выберите **Конструктор**.</span><span class="sxs-lookup"><span data-stu-id="b7797-349">On the Action Pane, select **Designer**.</span></span>
4. <span data-ttu-id="b7797-350">На странице **Сопоставление модели и источника данных** выберите сопоставление **Накладная клиента**.</span><span class="sxs-lookup"><span data-stu-id="b7797-350">On the **Model to datasource mapping** page, select the **Customer invoice** mapping.</span></span>

    ![Страница сопоставления модели и источника данных](./media/er-quick-start3-select-customer-mapping.png)

5. <span data-ttu-id="b7797-352">Выберите **Конструктор**.</span><span class="sxs-lookup"><span data-stu-id="b7797-352">Select **Designer**.</span></span>
6. <span data-ttu-id="b7797-353">На странице **Конструктор сопоставления моделей** в области **Источники данных** разверните источник данных **CustInvoiceJour**, представляющий таблицу приложения **CustInvoiceJour**.</span><span class="sxs-lookup"><span data-stu-id="b7797-353">On the **Model mapping designer** page, in the **Data sources** pane, expand the **CustInvoiceJour** data source that represents the **CustInvoiceJour** application table.</span></span>
7. <span data-ttu-id="b7797-354">В разделе **CustInvoiceJour** разверните узел **Отношения**, чтобы просмотреть список отношений типа "многие к одному" (N:1) для таблицы **CustInvoiceJour**.</span><span class="sxs-lookup"><span data-stu-id="b7797-354">Under **CustInvoiceJour**, expand **Relations** to review the list of relations of the many-to-one (N:1) type for the **CustInvoiceJour** table.</span></span>
8. <span data-ttu-id="b7797-355">В разделе **CustInvoiceJour** \> **Отношения** разверните **Клиенты (CustTable)**, чтобы получить доступ к полям и отношениям таблицы **Клиенты (CustTable)**.</span><span class="sxs-lookup"><span data-stu-id="b7797-355">Under **CustInvoiceJour** \> **Relations**, expand **Customers (CustTable)** to access the fields and relations of the **Customers (CustTable)** table.</span></span>
9. <span data-ttu-id="b7797-356">Выберите поле источника данных **FederalTaxID\_Custom**, реализованное [ранее](#insert_custom_field).</span><span class="sxs-lookup"><span data-stu-id="b7797-356">Select the **FederalTaxID\_Custom** data source field that you implemented [earlier](#insert_custom_field).</span></span>
10. <span data-ttu-id="b7797-357">В области **Модель данных** разверните **Сведения о клиенте" (клиент)** и выберите поле модели данных **FederalTaxID\_Litware**.</span><span class="sxs-lookup"><span data-stu-id="b7797-357">In the **Data model** pane, expand **Customer information (Customer)**, and select the **FederalTaxID\_Litware** data model field.</span></span>
11. <span data-ttu-id="b7797-358">Выберите **Связать**.</span><span class="sxs-lookup"><span data-stu-id="b7797-358">Select **Bind**.</span></span>

    ![Страница конструктора сопоставления модели](./media/er-quick-start3-customize-model-mapping.gif)

12. <span data-ttu-id="b7797-360">Нажмите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="b7797-360">Select **Save**.</span></span>
13. <span data-ttu-id="b7797-361">Закройте страницу **Конструктор сопоставления модели**.</span><span class="sxs-lookup"><span data-stu-id="b7797-361">Close the **Model mapping designer** page.</span></span>
14. <span data-ttu-id="b7797-362">Закройте страницу **Сопоставление модели и источника данных**.</span><span class="sxs-lookup"><span data-stu-id="b7797-362">Close the **Model to datasource mapping** page.</span></span>

#### <a name="complete-a-custom-model-mapping-configuration"></a><span data-ttu-id="b7797-363">Завершение пользовательской конфигурации сопоставления модели</span><span class="sxs-lookup"><span data-stu-id="b7797-363">Complete a custom model mapping configuration</span></span>

<span data-ttu-id="b7797-364">Необходимо [завершить](general-electronic-reporting.md#component-versioning) работу с версией 50.19.1 пользовательской конфигурации сопоставления модели электронной отчетности, чтобы сделать ее доступной для использования.</span><span class="sxs-lookup"><span data-stu-id="b7797-364">You must [complete](general-electronic-reporting.md#component-versioning) your work with version 50.19.1 of your custom ER model mapping configuration to make it available for use.</span></span>

1. <span data-ttu-id="b7797-365">Перейдите в раздел **Администрирование организации** \> **Электронная отчетность** \> **Конфигурации**.</span><span class="sxs-lookup"><span data-stu-id="b7797-365">Go to **Organization administration** \> **Electronic reporting** \> **Configurations**.</span></span>
2. <span data-ttu-id="b7797-366">На странице **Конфигурации** в дереве конфигураций на левой панели разверните **Модель накладной клиенту** \> **Сопоставление модели накладной клиенту**, затем выберите **Сопоставление модели накладной (Litware)**.</span><span class="sxs-lookup"><span data-stu-id="b7797-366">On the **Configurations** page, in the configuration tree in the left pane, expand **Customer invoice model** \> **Customer invoice model mapping**, and select **Invoice model mapping (Litware)**.</span></span>
3. <span data-ttu-id="b7797-367">На экспресс-вкладке **Версии** выберите **Изменить статус** \> **Завершено**, затем выберите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="b7797-367">On the **Versions** FastTab, select **Change status** \> **Complete**, and then select **OK**.</span></span>

<span data-ttu-id="b7797-368">Состояние версии 50.19.1 изменится с **Черновик** на **Завершено**, и версия становится доступной только для чтения.</span><span class="sxs-lookup"><span data-stu-id="b7797-368">The status of version 50.19.1 is changed from **Draft** to **Completed**, and the version becomes read-only.</span></span> <span data-ttu-id="b7797-369">Добавляется новая редактируемая версия, 50.19.2, имеющая статус **Черновик**.</span><span class="sxs-lookup"><span data-stu-id="b7797-369">A new editable version, 50.19.2, is added and has a status of **Draft**.</span></span> <span data-ttu-id="b7797-370">Эту версию можно использовать для внесения дальнейших изменений в настраиваемую конфигурацию сопоставления модели электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-370">You can use this version to make further changes in your custom ER model mapping configuration.</span></span>

![Версия 50.19.1 завершена на странице конфигураций](./media/er-quick-start3-completed-custom-mapping1.png)

> [!NOTE]
> <span data-ttu-id="b7797-372">Поддерживаемый [жизненный цикл](general-electronic-reporting-manage-configuration-lifecycle.md) конфигурации не охватывает жизненный цикл изменений в базе данных.</span><span class="sxs-lookup"><span data-stu-id="b7797-372">The supported configuration [lifecycle](general-electronic-reporting-manage-configuration-lifecycle.md) doesn't cover the lifecycle of database changes.</span></span> <span data-ttu-id="b7797-373">Если экспортировать версию 50.19.1 конфигурации **Сопоставление модели накладных (Litware)** из текущего экземпляра Finance и попробовать импортировать ее в другой экземпляр, который не содержит настраиваемого поля **FederalTaxID\_Custom** в таблице **CustTable**, то возникнет исключение.</span><span class="sxs-lookup"><span data-stu-id="b7797-373">If you export version 50.19.1 of the **Invoice model mapping (Litware)** configuration from the current Finance instance and try to import it into another instance that doesn't contain the custom **FederalTaxID\_Custom** field in the **CustTable** table, an exception will occur.</span></span> <span data-ttu-id="b7797-374">Исключение будет сообщать, что импортированная конфигурация электронной отчетности несовместима с метаданными целевого экземпляра Finance.</span><span class="sxs-lookup"><span data-stu-id="b7797-374">The exception will state that the imported ER configuration isn't compatible with the metadata of the target Finance instance.</span></span>

### <a name="customize-the-format-configuration"></a><span data-ttu-id="b7797-375">Настройка конфигурации формата</span><span class="sxs-lookup"><span data-stu-id="b7797-375">Customize the format configuration</span></span>

<span data-ttu-id="b7797-376">В качестве пользователя в роли функционального консультанта по электронной отчетности вы можете разработать собственный формат электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-376">As a user in the Electronic Reporting Functional Consultant role, you can design your custom ER format.</span></span>

#### <a name="add-a-custom-format-configuration"></a><span data-ttu-id="b7797-377">Добавление пользовательской конфигурации формата</span><span class="sxs-lookup"><span data-stu-id="b7797-377">Add a custom format configuration</span></span>

1. <span data-ttu-id="b7797-378">Перейдите в раздел **Администрирование организации** \> **Электронная отчетность** \> **Конфигурации**.</span><span class="sxs-lookup"><span data-stu-id="b7797-378">Go to **Organization administration** \> **Electronic reporting** \> **Configurations**.</span></span>
2. <span data-ttu-id="b7797-379">На странице **Конфигурации** в дереве конфигураций на левой панели разверните **Модель накладной клиента** \> **Накладная по продажам UBL** и выберите **Накладная по продажам PEPPOL**.</span><span class="sxs-lookup"><span data-stu-id="b7797-379">On the **Configurations** page, in the configuration tree in the left pane, expand **Customer invoice model** \> **UBL Sales invoice**, and select **Peppol Sales Invoice**.</span></span>
3. <span data-ttu-id="b7797-380">В панели операций выберите **Создать конфигурацию**.</span><span class="sxs-lookup"><span data-stu-id="b7797-380">On the Action Pane, select **Create configuration**.</span></span>
4. <span data-ttu-id="b7797-381">В раскрывающемся диалоговом окне в поле **Создать** выберите **Производное от Имя: Накладная продаж PEPPOL, Майкрософт**, чтобы указать, что новая настраиваемая конфигурация формата электронной отчетности должна основываться на этой конфигурации формата электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-381">In the drop-down dialog box, in the **New** field, select **Derive from Name: Peppol Sales Invoice, Microsoft** to indicate that your custom ER format configuration should be based on the ER format configuration.</span></span>
5. <span data-ttu-id="b7797-382">В поле **Имя** введите **Накладная по продажам PEPPOL (Litware)**.</span><span class="sxs-lookup"><span data-stu-id="b7797-382">In the **Name** field, enter **Peppol Sales Invoice (Litware)**.</span></span>
6. <span data-ttu-id="b7797-383">В поле **Модель данных** выберите **Модель накладных (Litware)**, чтобы использовать пользовательские компоненты модели данных и сопоставления модели.</span><span class="sxs-lookup"><span data-stu-id="b7797-383">In the **Data model** field, select **Invoice model (Litware)** to use your custom data model and model mapping components.</span></span>

    > [!NOTE]
    > <span data-ttu-id="b7797-384">Этот шаг очень важен.</span><span class="sxs-lookup"><span data-stu-id="b7797-384">This step is very important.</span></span> <span data-ttu-id="b7797-385">Если его опустить, вы не сможете использовать пользовательскую модель данных в настроенном формате.</span><span class="sxs-lookup"><span data-stu-id="b7797-385">If you omit it, you won't be able to use your custom data model in the configured format.</span></span>

7. <span data-ttu-id="b7797-386">В поле **Модель данных** выберите корневое определение **InvoiceCustomer**.</span><span class="sxs-lookup"><span data-stu-id="b7797-386">In the **Data model** field, select the **InvoiceCustomer** root definition.</span></span>
8. <span data-ttu-id="b7797-387">Выберите **Создать конфигурацию**, чтобы добавить новую конфигурацию электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-387">Select **Create configuration** to add the new ER configuration.</span></span>

![Добавление пользовательской конфигурации формата на странице конфигураций](./media/er-quick-start3-adding-custom-format.png)

<span data-ttu-id="b7797-389">Теперь можно использовать конструктор операций электронной отчетности для редактирования версии 11.2.2.1 конфигурации электронной отчетности **Накладная по продажам PEPPOL (Litware)** в **черновом** [статусе](general-electronic-reporting.md#component-versioning).</span><span class="sxs-lookup"><span data-stu-id="b7797-389">You can now use the ER Operations designer to edit version 11.2.2.1 of the **Peppol Sales Invoice (Litware)** ER configuration in **Draft** [status](general-electronic-reporting.md#component-versioning).</span></span>

![Версии 11.2.2.1 конфигурации электронной отчетности на странице конфигураций](./media/er-quick-start3-added-custom-format.png)

#### <a name="configure-a-custom-format"></a><span data-ttu-id="b7797-391">Настройка пользовательского формата</span><span class="sxs-lookup"><span data-stu-id="b7797-391">Configure a custom format</span></span>

<span data-ttu-id="b7797-392">Необходимо изменить пользовательский формат, добавив новый элемент форматирования для заполнения значения федерального налогового кода клиента, для которого выставлена накладная.</span><span class="sxs-lookup"><span data-stu-id="b7797-392">You must modify your custom format by adding a new format element to fill in the value of an invoiced customer's federal tax identification code.</span></span>

1. <span data-ttu-id="b7797-393">Перейдите в раздел **Администрирование организации** \> **Электронная отчетность** \> **Конфигурации**.</span><span class="sxs-lookup"><span data-stu-id="b7797-393">Go to **Organization administration** \> **Electronic reporting** \> **Configurations**.</span></span>
2. <span data-ttu-id="b7797-394">На странице **Конфигурации** в дереве конфигураций на левой панели разверните **Модель накладной клиента** \> **Накладная по продажам UBL** \> **Накладная по продажам PEPPOL** и выберите **Накладная по продажам PEPPOL (Litware)**.</span><span class="sxs-lookup"><span data-stu-id="b7797-394">On the **Configurations** page, in the configuration tree in the left pane, expand **Customer invoice model** \> **UBL Sales invoice** \> **Peppol Sales Invoice**, and select **Peppol Sales Invoice (Litware)**.</span></span>
3. <span data-ttu-id="b7797-395">В области действий выберите **Конструктор**.</span><span class="sxs-lookup"><span data-stu-id="b7797-395">On the Action Pane, select **Designer**.</span></span>
4. <span data-ttu-id="b7797-396">В дереве формата разверните **XMLHeader** \> **Накладная** \> **cac:AccountingCustomerParty** \> **cac:Party** \> **cac:PartyTaxScheme** \> **cac:TaxScheme** и выберите **cbc:ID**.</span><span class="sxs-lookup"><span data-stu-id="b7797-396">In the format tree, expand **XMLHeader** \> **Invoice** \> **cac:AccountingCustomerParty** \> **cac:Party** \> **cac:PartyTaxScheme** \> **cac:TaxScheme**, and select **cbc:ID**.</span></span>
5. <span data-ttu-id="b7797-397">Выберите **Добавить**, затем выберите **XML** \> **Атрибут**.</span><span class="sxs-lookup"><span data-stu-id="b7797-397">Select **Add**, and then select **XML** \> **Attribute**.</span></span>
6. <span data-ttu-id="b7797-398">В диалоговом окне **Свойство компонента** в поле **Имя** введите **FederalTaxID**.</span><span class="sxs-lookup"><span data-stu-id="b7797-398">In the **Component property** dialog box, in the **Name** field, enter **FederalTaxID**.</span></span>
7. <span data-ttu-id="b7797-399">Выберите **ОК**, чтобы добавить новый элемент формата для создания нового XML-атрибута **FederalTaxID** в созданном файле XML.</span><span class="sxs-lookup"><span data-stu-id="b7797-399">Select **OK** to add a new format element to create a new **FederalTaxID** XML attribute in a generated XML file.</span></span>
8. <span data-ttu-id="b7797-400">В дереве формата в разделе **XMLHeader** \> **Накладная** \> **cac:AccountingCustomerParty** \> **cac:Party** \> **cac:PartyTaxScheme** \> **cac:TaxScheme** \> **cbc:ID** выберите **FederalTaxID**.</span><span class="sxs-lookup"><span data-stu-id="b7797-400">In the format tree, under **XMLHeader** \> **Invoice** \> **cac:AccountingCustomerParty** \> **cac:Party** \> **cac:PartyTaxScheme** \> **cac:TaxScheme** \> **cbc:ID**, select **FederalTaxID**.</span></span>
9. <span data-ttu-id="b7797-401">Выберите **Переместить вверх**.</span><span class="sxs-lookup"><span data-stu-id="b7797-401">Select **Move up**.</span></span>

![Новый элемент формата на странице конструктора формата](./media/er-quick-start3-customized-format.png)

#### <a name="configure-a-custom-format-mapping"></a><span data-ttu-id="b7797-403">Настройка пользовательского сопоставления формата</span><span class="sxs-lookup"><span data-stu-id="b7797-403">Configure a custom format mapping</span></span>

1. <span data-ttu-id="b7797-404">На странице **Конструктор форматов** на вкладке **Сопоставление** разверните источник данных **Накладная** типа **Модель**.</span><span class="sxs-lookup"><span data-stu-id="b7797-404">On the **Format designer** page, on the **Mapping** tab, expand the **Invoice** data source of the **Model** type.</span></span>
2. <span data-ttu-id="b7797-405">В области **Накладная** разверните **Сведения о клиенте (Клиент)** и выберите **FederalTaxID\_Litware**.</span><span class="sxs-lookup"><span data-stu-id="b7797-405">Under **Invoice**, expand **Customer information (Customer)**, and select **FederalTaxID\_Litware**.</span></span>
3. <span data-ttu-id="b7797-406">Выберите **Связать**.</span><span class="sxs-lookup"><span data-stu-id="b7797-406">Select **Bind**.</span></span>

    ![Страница конструктора форматов](./media/er-quick-start3-customized-format-mapping.png)

4. <span data-ttu-id="b7797-408">Выберите источник данных **Накладная** типа **Модель**, затем выберите **Правка**.</span><span class="sxs-lookup"><span data-stu-id="b7797-408">Select the **Invoice** data source of the **Model** type, and then select **Edit**.</span></span>
5. <span data-ttu-id="b7797-409">В поле **Версия** выберите версию **1** вашей пользовательской модели данных и выберите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="b7797-409">In the **Version** field, select version **1** of your custom data model, and then select **OK**.</span></span>
6. <span data-ttu-id="b7797-410">Нажмите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="b7797-410">Select **Save**.</span></span>
7. <span data-ttu-id="b7797-411">Закройте страницу **Конструктор форматов**.</span><span class="sxs-lookup"><span data-stu-id="b7797-411">Close the **Format designer** page.</span></span>

#### <a name="complete-a-custom-format-configuration"></a><span data-ttu-id="b7797-412">Завершение пользовательской конфигурации формата</span><span class="sxs-lookup"><span data-stu-id="b7797-412">Complete a custom format configuration</span></span>

<span data-ttu-id="b7797-413">Необходимо [завершить](general-electronic-reporting.md#component-versioning) работу с версией 11.2.2.1 пользовательской конфигурации формата электронной отчетности, чтобы сделать ее доступной для использования.</span><span class="sxs-lookup"><span data-stu-id="b7797-413">You must [complete](general-electronic-reporting.md#component-versioning) your work with version 11.2.2.1 of your custom ER format configuration to make it available for use.</span></span>

1. <span data-ttu-id="b7797-414">Перейдите в раздел **Администрирование организации** \> **Электронная отчетность** \> **Конфигурации**.</span><span class="sxs-lookup"><span data-stu-id="b7797-414">Go to **Organization administration** \> **Electronic reporting** \> **Configurations**.</span></span>
2. <span data-ttu-id="b7797-415">На странице **Конфигурации** в дереве конфигураций на левой панели разверните **Модель накладной клиента** \> **Накладная по продажам UBL** \> **Накладная по продажам PEPPOL** и выберите **Накладная по продажам PEPPOL (Litware)**.</span><span class="sxs-lookup"><span data-stu-id="b7797-415">On the **Configurations** page, in the configuration tree in the left pane, expand **Customer invoice model** \> **UBL Sales invoice** \> **Peppol Sales Invoice**, and select **Peppol Sales Invoice (Litware)**.</span></span>
3. <span data-ttu-id="b7797-416">На экспресс-вкладке **Версии** выберите **Изменить статус** \> **Завершено**, затем выберите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="b7797-416">On the **Versions** FastTab, select **Change status** \> **Complete**, and then select **OK**.</span></span>

<span data-ttu-id="b7797-417">Состояние версии 11.2.2.1 изменится с **Черновик** на **Завершено**, и версия становится доступной только для чтения.</span><span class="sxs-lookup"><span data-stu-id="b7797-417">The status of version 11.2.2.1 is changed from **Draft** to **Completed**, and the version becomes read-only.</span></span> <span data-ttu-id="b7797-418">Добавляется новая редактируемая версия, 11.2.2.2, имеющая статус **Черновик**.</span><span class="sxs-lookup"><span data-stu-id="b7797-418">A new editable version, 11.2.2.2, is added and has a status of **Draft**.</span></span> <span data-ttu-id="b7797-419">Эту версию можно использовать для внесения дальнейших изменений в настраиваемую конфигурацию формата электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-419">You can use this version to make further changes in your custom ER format configuration.</span></span>

![Версия 11.2.2.1 завершена на странице конфигураций](./media/er-quick-start3-completed-custom-format1.png)

## <a name="configure-the-accounts-receivable-parameters-to-start-to-use-custom-er-configurations"></a><a name="ConfigureAR2"></a><span data-ttu-id="b7797-421">Настройка параметров модуля расчетов с клиентами, чтобы начать использовать пользовательские конфигурации электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-421">Configure the Accounts receivable parameters to start to use custom ER configurations</span></span>

1. <span data-ttu-id="b7797-422">Перейдите в раздел **Расчеты с клиентами** \> **Настройка** \> **Параметры модуля расчетов с клиентами**.</span><span class="sxs-lookup"><span data-stu-id="b7797-422">Go to **Accounts receivable** \> **Setup** \> **Accounts receivable parameters**.</span></span>
2. <span data-ttu-id="b7797-423">На вкладке **Электронные документы** на экспресс-вкладке **Электронная отчетность** в поле **Накладная по продаже и с произвольным текстом** выберите **Накладная по продаже PEPPOL (Litware)**.</span><span class="sxs-lookup"><span data-stu-id="b7797-423">On the **Electronic documents** tab, on the **Electronic reporting** FastTab, in the **Sales and Free text invoice** field, select **Peppol Sales Invoice (Litware)**.</span></span>
3. <span data-ttu-id="b7797-424">Нажмите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="b7797-424">Select **Save**.</span></span>

![Страница параметров модуля "расчеты с клиентами", вкладка электронных документов, экспресс-вкладка электронной отчетности](./media/er-quick-start3-configure-ar2.png)

## <a name="update-a-customer-record-by-adding-a-federal-tax-identification-code"></a><a name="ConfigureCustomer2"></a><span data-ttu-id="b7797-426">Обновление записи клиента путем добавления кода плательщика федерального налога</span><span class="sxs-lookup"><span data-stu-id="b7797-426">Update a customer record by adding a federal tax identification code</span></span>

1. <span data-ttu-id="b7797-427">Перейдите в раздел **Расчеты с клиентами** \> **Клиенты** \> **Все клиенты**.</span><span class="sxs-lookup"><span data-stu-id="b7797-427">Go to **Accounts receivable** \> **Customers** \> **All customers**.</span></span>
2. <span data-ttu-id="b7797-428">На странице **Все клиенты** выберите ссылку на счет клиента **DE-014**.</span><span class="sxs-lookup"><span data-stu-id="b7797-428">On the **All customers** page, select the **DE-014** customer account link.</span></span>
3. <span data-ttu-id="b7797-429">На экспресс-вкладке **Общие** в поле **Код плательщика федерального налога** введите **LITWARE-6789**.</span><span class="sxs-lookup"><span data-stu-id="b7797-429">On the **General** FastTab, in the **Federal Tax ID** field, enter **LITWARE-6789**.</span></span>
4. <span data-ttu-id="b7797-430">Нажмите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="b7797-430">Select **Save**.</span></span>

    ![Страница сведения о клиенте DE-014](./media/er-quick-start3-added-tax-id-value.png)

5. <span data-ttu-id="b7797-432">Закройте страницу **Все клиенты**.</span><span class="sxs-lookup"><span data-stu-id="b7797-432">Close the **All customers** page.</span></span>

## <a name="process-a-customer-invoice-by-using-custom-er-configurations"></a><a name="ProcessInvoice2"></a><span data-ttu-id="b7797-433">Обработка накладной клиента с использованием пользовательских конфигураций электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-433">Process a customer invoice by using custom ER configurations</span></span>

### <a name="select-and-send-a-posted-invoice"></a><span data-ttu-id="b7797-434">Выберите и отправьте разнесенную накладную</span><span class="sxs-lookup"><span data-stu-id="b7797-434">Select and send a posted invoice</span></span>

1. <span data-ttu-id="b7797-435">Перейдите в раздел **Расчеты с клиентами** \> **Накладные** \> **Все накладные с произвольным текстом**.</span><span class="sxs-lookup"><span data-stu-id="b7797-435">Go to **Accounts receivable** \> **Invoices** \> **All free text invoices**.</span></span>
2. <span data-ttu-id="b7797-436">На странице **Накладная с произвольным текстом** выберите накладную, которая была ранее добавлена и разнесена.</span><span class="sxs-lookup"><span data-stu-id="b7797-436">On the **Free text invoice** page, select the invoice that you previously added and posted.</span></span>
3. <span data-ttu-id="b7797-437">На панели действий в группе **Документ** выберите **Отправить** \> **Оригинал**.</span><span class="sxs-lookup"><span data-stu-id="b7797-437">On the Action Pane, in the **Document** group, select **Send** \> **Original**.</span></span>
4. <span data-ttu-id="b7797-438">Закройте страницу **Накладная с произвольным текстом**.</span><span class="sxs-lookup"><span data-stu-id="b7797-438">Close the **Free text invoice** page.</span></span>

### <a name="analyze-a-generated-e-invoice"></a><span data-ttu-id="b7797-439">Анализ созданной электронной накладной</span><span class="sxs-lookup"><span data-stu-id="b7797-439">Analyze a generated e-invoice</span></span>

1. <span data-ttu-id="b7797-440">Перейдите в раздел **Управление организацией** \> **Электронная отчетность** \> **Задания электронной отчетности**.</span><span class="sxs-lookup"><span data-stu-id="b7797-440">Go to **Organization administration** \> **Electronic reporting** \> **Electronic reporting jobs**.</span></span>
2. <span data-ttu-id="b7797-441">На странице **Задания электронной отчетности** выберите новейшую запись, которая содержит описание задачи **Отправить электронную накладную в формате XML**.</span><span class="sxs-lookup"><span data-stu-id="b7797-441">On the **Electronic reporting jobs** page, select the latest record that has the task description **Send the eInvoice XML**.</span></span>
3. <span data-ttu-id="b7797-442">Выберите **Показать файлы** для доступа к списку созданных файлов.</span><span class="sxs-lookup"><span data-stu-id="b7797-442">Select **Show files** to access the list of generated files.</span></span>
4. <span data-ttu-id="b7797-443">Выберите **Открыть**, чтобы загрузить созданный XML-файл электронной накладной.</span><span class="sxs-lookup"><span data-stu-id="b7797-443">Select **Open** to download the e-invoice XML file that is generated.</span></span>
5. <span data-ttu-id="b7797-444">Проанализируйте XML-файл электронной накладной.</span><span class="sxs-lookup"><span data-stu-id="b7797-444">Analyze the e-invoice XML file.</span></span> <span data-ttu-id="b7797-445">Обратите внимание, что, в соответствии с настройкой, налоговая схема клиента включает пользовательский XML-атрибут **FederalTaxID** в дополнение к XML-атрибутам **schemeID** и **schemeAgencyID**.</span><span class="sxs-lookup"><span data-stu-id="b7797-445">Notice that, in accordance with your customization, the customer tax schema includes the custom **FederalTaxID** XML attribute in addition to the **schemeID** and **schemeAgencyID** XML attributes.</span></span> <span data-ttu-id="b7797-446">Значение этого нового XML-атрибута определяется кодом федерального налогоплательщика **LITWARE-6789**, который был введен для клиента, для которого выставлена накладная.</span><span class="sxs-lookup"><span data-stu-id="b7797-446">The value of this new XML attribute is specified by the **LITWARE-6789** federal tax ID that was entered for an invoiced customer.</span></span>

    ![Предварительный просмотр созданного XML-файла электронной накладной с вашими настройками](./media/er-quick-start3-e-invoice2.png)

## <a name="import-the-latest-versions-of-standard-er-configurations"></a><a name="ImportERConfigurations2"></a><span data-ttu-id="b7797-448">Импорт последних версий стандартных конфигураций электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-448">Import the latest versions of standard ER configurations</span></span>

<span data-ttu-id="b7797-449">Чтобы сохранить набор стандартных конфигураций электронной отчетности в экземпляре Finance [в актуальном состоянии](general-electronic-reporting-manage-configuration-lifecycle.md), необходимо импортировать новые версии, когда они станут доступны в [репозитории](general-electronic-reporting.md#Repository) электронной отчетности, настроенном для этого экземпляра.</span><span class="sxs-lookup"><span data-stu-id="b7797-449">To keep the set of standard ER configurations in your Finance instance [up to date](general-electronic-reporting-manage-configuration-lifecycle.md), you must import new versions of them whenever they become available in the ER [repository](general-electronic-reporting.md#Repository) that was configured for that instance.</span></span>

1. <span data-ttu-id="b7797-450">Перейдите в раздел **Управление организацией** \> **Рабочие области** \> **Электронная отчетность**.</span><span class="sxs-lookup"><span data-stu-id="b7797-450">Go to **Organization administration** \> **Workspaces** \> **Electronic reporting**.</span></span>
2. <span data-ttu-id="b7797-451">На странице **Конфигурации локализации** в разделе **Поставщики конфигураций** выберите плитку **Майкрософт**, затем выберите **Репозитории**, чтобы просмотреть список репозиториев для поставщика Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="b7797-451">On the **Localization configurations** page, in the **Configuration providers** section, select the **Microsoft** tile, and then select **Repositories** to view the list of repositories for the Microsoft provider.</span></span>
3. <span data-ttu-id="b7797-452">На странице **Репозитории конфигураций** выберите репозиторий типа **Глобальный**, затем выберите **Открыть**.</span><span class="sxs-lookup"><span data-stu-id="b7797-452">On the **Configuration repositories** page, select the repository of the **Global** type, and then select **Open**.</span></span> <span data-ttu-id="b7797-453">Если будет предложено выполнить проверку подлинности для подключения к службе Regulatory Configuration Service, следуйте инструкциям по проверке подлинности.</span><span class="sxs-lookup"><span data-stu-id="b7797-453">If you're prompted for authorization to connect to Regulatory Configuration Service, follow the authorization instructions.</span></span>
4. <span data-ttu-id="b7797-454">На странице **Репозиторий конфигураций** в дереве конфигураций на левой панели выберите конфигурацию формата **Накладная по продаже PEPPOL**.</span><span class="sxs-lookup"><span data-stu-id="b7797-454">On the **Configuration repository** page, in the configuration tree in the left pane, select the **Peppol Sales Invoice** format configuration.</span></span>
5. <span data-ttu-id="b7797-455">На экспресс-вкладке **Версии** выберите версию **32.6.7** выбранной конфигурации формата электронной отчетности, которая была выпущена для поддержки электронных накладных клиентов в формате PEPPOL BIS 3.</span><span class="sxs-lookup"><span data-stu-id="b7797-455">On the **Versions** FastTab, select version **32.6.7** of the selected ER format configuration that has been released to support customer electronic invoices in PEPPOL BIS 3 format.</span></span> <span data-ttu-id="b7797-456">Дополнительные сведения см. в статье [KB4490320](https://support.microsoft.com/help/4490320/an-update-for-european-union-to-support-export-of-customers-electronic).</span><span class="sxs-lookup"><span data-stu-id="b7797-456">For more information, see [KB4490320](https://support.microsoft.com/help/4490320/an-update-for-european-union-to-support-export-of-customers-electronic).</span></span>
6. <span data-ttu-id="b7797-457">Выберите **Импорт** для загрузки выбранной версии из глобального репозитория в текущий экземпляр Finance.</span><span class="sxs-lookup"><span data-stu-id="b7797-457">Select **Import** to download the selected version from the Global repository to the current Finance instance.</span></span>

![Версия 32.6.7, выбранная на странице репозитория конфигураций](./media/er-quick-start3-import-solution2.png)

<span data-ttu-id="b7797-459">Сведения о том, как можно автоматизировать этот процесс, см. в разделе [Импорт обновленных версий конфигураций электронной отчетности](er-download-updated-versions-global-repo.md).</span><span class="sxs-lookup"><span data-stu-id="b7797-459">For information about how this process can be automated, see [Import updated versions of ER configurations](er-download-updated-versions-global-repo.md).</span></span>

### <a name="review-the-imported-er-configurations"></a><span data-ttu-id="b7797-460">Проверка импортированных конфигураций электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-460">Review the imported ER configurations</span></span>

1. <span data-ttu-id="b7797-461">Перейдите в раздел **Управление организацией** \> **Рабочие области** \> **Электронная отчетность**.</span><span class="sxs-lookup"><span data-stu-id="b7797-461">Go to **Organization administration** \> **Workspaces** \> **Electronic reporting**.</span></span>
2. <span data-ttu-id="b7797-462">На странице **Конфигурации локализации** в разделе **Конфигурации** выберите плитку **Конфигурации отчетности**.</span><span class="sxs-lookup"><span data-stu-id="b7797-462">On the **Localization configurations** page, in the **Configurations** section, select the **Reporting configurations** tile.</span></span>
3. <span data-ttu-id="b7797-463">Разверните экспресс-вкладку **Компоненты конфигурации**.</span><span class="sxs-lookup"><span data-stu-id="b7797-463">Expand the **Configuration components** FastTab.</span></span>
4. <span data-ttu-id="b7797-464">В дереве конфигураций в левой области разверните **Модель накладных**.</span><span class="sxs-lookup"><span data-stu-id="b7797-464">In the configuration tree in the left pane, expand **Invoice model**.</span></span> <span data-ttu-id="b7797-465">Обратите внимание, что название **Модель накладных клиента** изменено на **Модель накладных** в одной из импортированных конфигураций модели данных электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-465">Notice that the name of **Customer invoice model** has been changed to **Invoice model** in one of the imported ER data model configurations.</span></span>
5. <span data-ttu-id="b7797-466">В дереве конфигураций в левой области разверните **Сопоставление модели накладных**.</span><span class="sxs-lookup"><span data-stu-id="b7797-466">In the configuration tree in the left pane, expand **Invoice model mapping**.</span></span> <span data-ttu-id="b7797-467">Обратите внимание, что название **Сопоставление модели накладных клиента** изменено на **Сопоставление модели накладных** в одной из импортированных конфигураций сопоставления модели электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-467">Notice that the name of **Customer invoice model mapping** has been changed to **Invoice model mapping** in one of the imported ER model mapping configurations.</span></span>
6. <span data-ttu-id="b7797-468">Разверните **Накладная по продажам UBL** \> **Накладная по продажам PEPPOL**.</span><span class="sxs-lookup"><span data-stu-id="b7797-468">Expand **UBL Sales invoice** \> **Peppol Sales Invoice**.</span></span>

<span data-ttu-id="b7797-469">Обратите внимание, что в дополнение к выбранному формату электронной отчетности **Накладная продажи PEPPOL** были импортированы другие необходимые последние версии конфигурации электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-469">Notice that, in addition to the selected **Peppol Sales Invoice** ER format, the latest versions of other required ER configurations were imported.</span></span> <span data-ttu-id="b7797-470">Поскольку новые версии конфигураций электронной отчетности постоянно публикуются в глобальном репозитории и LCS для обеспечения соответствия соответствующих решений электронной отчетности новым требованиям, были импортированы последние версии необходимой конфигурации модели данных и ее конфигураций сопоставления моделей.</span><span class="sxs-lookup"><span data-stu-id="b7797-470">Because new versions of ER configurations are constantly published to the Global repository and LCS to keep the corresponding ER solutions compliant with new requirements, the latest versions of the required data model configuration and its model mapping configurations were imported.</span></span>

<span data-ttu-id="b7797-471">Убедитесь, что в дереве конфигураций в конечном счете доступны следующие конфигурации электронной отчетности:</span><span class="sxs-lookup"><span data-stu-id="b7797-471">Make sure that the following ER configurations are eventually available in the configuration tree:</span></span>

- <span data-ttu-id="b7797-472">Конфигурация модели данных электронной отчетности **Модель накладной**:</span><span class="sxs-lookup"><span data-stu-id="b7797-472">**Invoice model** ER data model configuration:</span></span>

    - <span data-ttu-id="b7797-473">Версия 206 (ли новее) содержит версию 24 (ли новее) компонента модели данных электронной отчетности, представляющую структуру данных бизнес-домена выставления накладных.</span><span class="sxs-lookup"><span data-stu-id="b7797-473">Version 206 (or later) contains version 24 (or later) of the data model ER component that represents the data structure of the invoicing business domain.</span></span> <span data-ttu-id="b7797-474">Эта конфигурация электронной отчетности была импортирована в качестве предка последней доступной версии конфигурации сопоставления модели электронной отчетности **Сопоставление модели накладных**.</span><span class="sxs-lookup"><span data-stu-id="b7797-474">This ER configuration has been imported as an ancestor of the latest available **Invoice model mapping** ER model mapping configuration.</span></span>

    ![Версия 206 на странице конфигураций](./media/er-quick-start3-imported-solution2b1.png)

- <span data-ttu-id="b7797-476">Конфигурация сопоставления модели электронной отчетности **Сопоставление модели накладной**:</span><span class="sxs-lookup"><span data-stu-id="b7797-476">**Invoice model mapping** ER model mapping configuration:</span></span>

    - <span data-ttu-id="b7797-477">Версия 206.132 (или новее) была импортирована в качестве последней реализации версии 206 конфигурации модели данных электронной отчетности **Модель накладных**.</span><span class="sxs-lookup"><span data-stu-id="b7797-477">Version 206.132 (or later) has been imported as the latest implementation of version 206 of the **Invoice model** ER data model configuration.</span></span> <span data-ttu-id="b7797-478">Она содержит несколько компонентов электронной отчетности сопоставления моделей, в которых описывается заполнение модели данных данными приложения во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="b7797-478">It contains several model mapping ER components that describe how the data model is filled in with application data at runtime.</span></span>

    ![Версия 206.132 на странице конфигураций](./media/er-quick-start3-imported-solution2b2.png)

- <span data-ttu-id="b7797-480">Конфигурации формата электронной отчетности **Накладная по продаже UBL**:</span><span class="sxs-lookup"><span data-stu-id="b7797-480">**UBL Sales invoice** ER format configuration:</span></span>

    - <span data-ttu-id="b7797-481">Версия 32.6 содержит формат и компоненты сопоставления форматов электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-481">Version 32.6 contains the format and format mapping ER components.</span></span> <span data-ttu-id="b7797-482">Компонент формата определяет макет отчета.</span><span class="sxs-lookup"><span data-stu-id="b7797-482">The format component specifies the report layout.</span></span> <span data-ttu-id="b7797-483">Компонент сопоставления формата содержит источник данных модели и определяет, как источник данных используется для заполнения макет отчета во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="b7797-483">The format mapping component contains the model data source and specifies how this data source is used to fill in the report layout at runtime.</span></span> <span data-ttu-id="b7797-484">Этот формат электронной отчетности был настроен на генерирование электронных накладных в формате UBL.</span><span class="sxs-lookup"><span data-stu-id="b7797-484">This ER format was configured to generate e-invoices in UBL format.</span></span> <span data-ttu-id="b7797-485">Он был импортирована в качестве родителя формата **Накладная по продаже PEPPOL**, который был выбран для импорта.</span><span class="sxs-lookup"><span data-stu-id="b7797-485">It has been imported as a parent of the **Peppol Sales Invoice** ER format that was selected for import.</span></span>

- <span data-ttu-id="b7797-486">Конфигурации формата электронной отчетности **Накладная по продаже PEPPOL**:</span><span class="sxs-lookup"><span data-stu-id="b7797-486">**Peppol Sales Invoice** ER format configuration:</span></span>

    - <span data-ttu-id="b7797-487">Версия 32.6.7 содержит компоненты формата и сопоставления формата электронной отчетности, которые были настроены для создания электронных накладных в формате PEPPOL.</span><span class="sxs-lookup"><span data-stu-id="b7797-487">Version 32.6.7 contains the format and format mapping ER components that were configured to generate e-invoices in PEPPOL format.</span></span>

    ![Версия 32.6.7 на странице конфигураций](./media/er-quick-start3-imported-solution2b3.png)

## <a name="adopt-the-changes-to-the-new-standard-er-configurations-in-your-custom-er-configurations"></a><a name="RebaseCustomERConfigurations"></a><span data-ttu-id="b7797-489">Адаптация изменений в новых версиях стандартных конфигураций электронной отчетности в ваших пользовательских конфигурациях электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-489">Adopt the changes to the new standard ER configurations in your custom ER configurations</span></span>

### <a name="adopt-your-custom-er-data-model"></a><span data-ttu-id="b7797-490">Адаптация пользовательской модели данных электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-490">Adopt your custom ER data model</span></span>

1. <span data-ttu-id="b7797-491">Перейдите в раздел **Администрирование организации** \> **Электронная отчетность** \> **Конфигурации**.</span><span class="sxs-lookup"><span data-stu-id="b7797-491">Go to **Organization administration** \> **Electronic reporting** \> **Configurations**.</span></span>
2. <span data-ttu-id="b7797-492">На странице **Конфигурации** в дереве конфигураций на левой панели разверните **Модель накладной**, затем выберите **Модель накладной (Litware)**.</span><span class="sxs-lookup"><span data-stu-id="b7797-492">On the **Configurations** page, in the configuration tree in the left pane, expand **Invoice model**, and select **Invoice model (Litware)**.</span></span>
3. <span data-ttu-id="b7797-493">На экспресс-вкладке **Версии** для черновой версии **50.2** выбранной конфигурации модели данных выберите **Повторно разместить**.</span><span class="sxs-lookup"><span data-stu-id="b7797-493">On the **Versions** FastTab, for draft version **50.2** of the selected data model configuration, select **Rebase**.</span></span>
4. <span data-ttu-id="b7797-494">В поле **Целевая версия** убедитесь, что выбрана версия **206** базовой конфигурации модели данных электронной отчетности, затем выберите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="b7797-494">In the **Target version** field, confirm the selection of version **206** of the base ER data model configuration, and then select **OK**.</span></span>

    <span data-ttu-id="b7797-495">Черновая версия настраиваемой конфигурации модели данных электронной отчетности будет перенумерована с **50.2** на **206.2**, чтобы указать, что в данный момент она содержит настройки, объединенные с изменениями в последней версии (206) базовой конфигурации модели данных электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-495">The draft version of your custom ER data model configuration is renumbered from **50.2** to **206.2** to indicate that it now contains your customization that was merged with the changes in the latest version (206) of the base ER data model configuration.</span></span>

    > [!NOTE]
    > <span data-ttu-id="b7797-496">Операция изменения базы обратима.</span><span class="sxs-lookup"><span data-stu-id="b7797-496">The rebase action is reversible.</span></span> <span data-ttu-id="b7797-497">Чтобы отменить это изменение базы, выберите версию **50.1** модели **Модель накладной (Litware)** на экспресс-вкладке **Версии**, затем выберите **Получить эту версию**.</span><span class="sxs-lookup"><span data-stu-id="b7797-497">To cancel this rebase, select version **50.1** of the **Invoice model (Litware)** model on the **Versions** FastTab, and then select **Get this version**.</span></span> <span data-ttu-id="b7797-498">Версия 206.2 будет перенумерована обратно в **50.2**, а содержимое черновой версии 50.2 будет соответствовать содержимому версии 50.1.</span><span class="sxs-lookup"><span data-stu-id="b7797-498">Version 206.2 will be renumbered back to **50.2**, and the content of draft version 50.2 will match the content of version 50.1.</span></span>

5. <span data-ttu-id="b7797-499">На экспресс-вкладке **Версии** выберите **Изменить статус** \> **Завершено**, затем выберите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="b7797-499">On the **Versions** FastTab, select **Change status** \> **Complete**, and then select **OK**.</span></span>

<span data-ttu-id="b7797-500">Состояние версии 206.2 изменится с **Черновик** на **Завершено**, и версия становится доступной только для чтения.</span><span class="sxs-lookup"><span data-stu-id="b7797-500">The status of version 206.2 is changed from **Draft** to **Completed**, and the version becomes read-only.</span></span> <span data-ttu-id="b7797-501">Добавляется новая редактируемая версия, 206.3, имеющая статус **Черновик**.</span><span class="sxs-lookup"><span data-stu-id="b7797-501">A new editable version, 206.3, is added and has a status of **Draft**.</span></span> <span data-ttu-id="b7797-502">Эту версию можно использовать для внесения дальнейших изменений в настраиваемую конфигурацию модели данных электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-502">You can use this version to make further changes in your custom ER data model configuration.</span></span>

![Версия 206.2 завершена на странице конфигураций](./media/er-quick-start3-completed-custom-model2.png)

### <a name="adopt-your-custom-er-model-mapping"></a><span data-ttu-id="b7797-504">Адаптация сопоставления пользовательской модели электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-504">Adopt your custom ER model mapping</span></span>

1. <span data-ttu-id="b7797-505">Перейдите в раздел **Администрирование организации** \> **Электронная отчетность** \> **Конфигурации**.</span><span class="sxs-lookup"><span data-stu-id="b7797-505">Go to **Organization administration** \> **Electronic reporting** \> **Configurations**.</span></span>
2. <span data-ttu-id="b7797-506">На странице **Конфигурации** в дереве конфигураций на левой панели разверните **Модель накладной** \> **Сопоставление модели накладной**, затем выберите **Сопоставление модели накладной (Litware)**.</span><span class="sxs-lookup"><span data-stu-id="b7797-506">On the **Configurations** page, in the configuration tree in the left pane, expand **Invoice model** \> **Invoice model mapping**, and select **Invoice model mapping (Litware)**.</span></span>
3. <span data-ttu-id="b7797-507">На экспресс-вкладке **Версии** для черновой версии **50.19.2** выбранной конфигурации сопоставления модели электронной отчетности выберите **Повторно разместить**.</span><span class="sxs-lookup"><span data-stu-id="b7797-507">On the **Versions** FastTab, for draft version **50.19.2** of the selected model mapping configuration, select **Rebase**.</span></span>
4. <span data-ttu-id="b7797-508">В поле **Целевая версия** убедитесь, что выбрана версия **206.132** базовой конфигурации сопоставления модели электронной отчетности, затем выберите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="b7797-508">In the **Target version** field, confirm the selection of version **206.132** of the base ER model mapping configuration, and then select **OK**.</span></span>

    <span data-ttu-id="b7797-509">Черновая версия настраиваемой конфигурации сопоставления модели электронной отчетности будет перенумерована с **50.19.2** на **206.132.2**, чтобы указать, что в данный момент она содержит настройки, объединенные с изменениями в последней версии (206.132) базовой конфигурации сопоставления модели электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-509">The draft version of your custom ER model mapping configuration is renumbered from **50.19.2** to **206.132.2** to indicate that it now contains your customization that was merged with the changes in the latest version (206.132) of the base ER model mapping configuration.</span></span>

    <span data-ttu-id="b7797-510">Обратите внимание, что были обнаружены некоторые конфликты изменения базы.</span><span class="sxs-lookup"><span data-stu-id="b7797-510">Notice that some rebase conflicts were discovered.</span></span> <span data-ttu-id="b7797-511">Теперь эти конфликты необходимо устранить вручную.</span><span class="sxs-lookup"><span data-stu-id="b7797-511">You must now manually resolve those conflicts.</span></span>

    ![Сообщение о конфликте изменения базы на странице конфигураций](./media/er-quick-start3-rebase-conflicts-model-mapping1.png)

5. <span data-ttu-id="b7797-513">В области действий выберите **Конструктор**, затем в списке сопоставлений выберите **Накладная клиента**.</span><span class="sxs-lookup"><span data-stu-id="b7797-513">On the Action Pane, select **Designer**, and then, in the list of mappings, select **Customer Invoice**.</span></span>
6. <span data-ttu-id="b7797-514">Для каждого конфликта изменения базы выберите **Сохранить собственное значение**, так как необходимо сохранить номер версии пользовательской модели данных для каждого из упомянутых компонентов.</span><span class="sxs-lookup"><span data-stu-id="b7797-514">For each rebase conflict, select **Retain own value**, because you must keep the version number of your custom data model for every component that has been mentioned.</span></span>

    ![Конфликты изменения базы на странице конструктора сопоставления модели](./media/er-quick-start3-rebase-conflicts-model-mapping2.png)

7. <span data-ttu-id="b7797-516">Выберите **Сохранить**, затем закройте страницу **Конструктор сопоставления модели**.</span><span class="sxs-lookup"><span data-stu-id="b7797-516">Select **Save**, and then close the **Model mapping designer** page.</span></span>
8. <span data-ttu-id="b7797-517">В списке сопоставлений выберите **Накладная по проекту**.</span><span class="sxs-lookup"><span data-stu-id="b7797-517">In the list of mappings, select **Project Invoice**.</span></span>
9. <span data-ttu-id="b7797-518">Для каждого конфликта изменения базы выберите **Сохранить собственное значение**, так как необходимо сохранить номер версии пользовательской модели данных для каждого из упомянутых компонентов.</span><span class="sxs-lookup"><span data-stu-id="b7797-518">For each rebase conflict, select **Retain own value**, because you must keep the version number of your custom data model for every component that has been mentioned.</span></span>
10. <span data-ttu-id="b7797-519">Выберите **Сохранить**, затем закройте страницу **Сопоставления модели**.</span><span class="sxs-lookup"><span data-stu-id="b7797-519">Select **Save**, and then close the **Model mappings** page.</span></span>

    > [!NOTE]
    > <span data-ttu-id="b7797-520">Операция изменения базы обратима.</span><span class="sxs-lookup"><span data-stu-id="b7797-520">The rebase action is reversible.</span></span> <span data-ttu-id="b7797-521">Чтобы отменить это изменение базы, выберите версию **50.19.1** сопоставления модели **Сопоставление модели накладной (Litware)** на экспресс-вкладке **Версии**, затем выберите **Получить эту версию**.</span><span class="sxs-lookup"><span data-stu-id="b7797-521">To cancel this rebase, select version **50.19.1** of the **Invoice model mapping (Litware)** model mapping on the **Versions** FastTab, and then select **Get this version**.</span></span> <span data-ttu-id="b7797-522">Версия 206.132.2 будет перенумерована обратно в **50.19.2**, а содержимое черновой версии 50.19.2 будет соответствовать содержимому версии 50.19.1.</span><span class="sxs-lookup"><span data-stu-id="b7797-522">Version 206.132.2 will be renumbered back to **50.19.2**, and the content of draft version 50.19.2 will match the content of version 50.19.1.</span></span>

11. <span data-ttu-id="b7797-523">На экспресс-вкладке **Версии** выберите **Изменить статус** \> **Завершено**, затем выберите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="b7797-523">On the **Versions** FastTab, select **Change status** \> **Complete**, and then select **OK**.</span></span>

<span data-ttu-id="b7797-524">Состояние версии 206.132.2 изменится с **Черновик** на **Завершено**, и версия становится доступной только для чтения.</span><span class="sxs-lookup"><span data-stu-id="b7797-524">The status of version 206.132.2 is changed from **Draft** to **Completed**, and the version becomes read-only.</span></span> <span data-ttu-id="b7797-525">Добавляется новая редактируемая версия, 206.132.3, имеющая статус **Черновик**.</span><span class="sxs-lookup"><span data-stu-id="b7797-525">A new editable version, 206.132.3, is added and has a status of **Draft**.</span></span> <span data-ttu-id="b7797-526">Эту версию можно использовать для внесения дальнейших изменений в настраиваемую конфигурацию сопоставления модели электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-526">You can use this version to make further changes in your custom ER model mapping configuration.</span></span>

![Версия 206.132.2 завершена на странице конфигураций](./media/er-quick-start3-completed-custom-mapping2.png)

### <a name="adopt-your-custom-er-format"></a><span data-ttu-id="b7797-528">Адаптация пользовательского формата электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-528">Adopt your custom ER format</span></span>

1. <span data-ttu-id="b7797-529">Перейдите в раздел **Администрирование организации** \> **Электронная отчетность** \> **Конфигурации**.</span><span class="sxs-lookup"><span data-stu-id="b7797-529">Go to **Organization administration** \> **Electronic reporting** \> **Configurations**.</span></span>
2. <span data-ttu-id="b7797-530">На странице **Конфигурации** в дереве конфигураций на левой панели разверните **Модель накладной** \> **Накладная по продажам UBL** \> **Накладная по продажам PEPPOL** и выберите **Накладная по продажам PEPPOL (Litware)**.</span><span class="sxs-lookup"><span data-stu-id="b7797-530">On the **Configurations** page, in the configuration tree in the left pane, expand **Invoice model** \> **UBL Sales invoice** \> **Peppol Sales Invoice**, and select **Peppol Sales Invoice (Litware)**.</span></span>
3. <span data-ttu-id="b7797-531">На экспресс-вкладке **Версии** для черновой версии **11.2.2.2** выбранной конфигурации формата выберите **Повторно разместить**.</span><span class="sxs-lookup"><span data-stu-id="b7797-531">On the **Versions** FastTab, for draft version **11.2.2.2** of the selected format configuration, select **Rebase**.</span></span>
4. <span data-ttu-id="b7797-532">В поле **Целевая версия** убедитесь, что выбрана версия **32.6.7** базовой конфигурации формата электронной отчетности, затем выберите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="b7797-532">In the **Target** version field, confirm the selection of version **32.6.7** of the base ER format configuration, and then select **OK**.</span></span>

    <span data-ttu-id="b7797-533">Черновая версия настраиваемой конфигурации формата электронной отчетности будет перенумерована с **11.2.2.2** на **32.6.7.2**, чтобы указать, что в данный момент она содержит настройки, объединенные с изменениями в последней версии (32.6.7) базовой конфигурации формата электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-533">The draft version of your custom ER format configuration is renumbered from **11.2.2.2** to **32.6.7.2** to indicate that it now contains your customization that was merged with the changes in the latest version (32.6.7) of the base ER format configuration.</span></span>

    <span data-ttu-id="b7797-534">Обратите внимание, что были обнаружены некоторые конфликты изменения базы.</span><span class="sxs-lookup"><span data-stu-id="b7797-534">Notice that some rebase conflicts were discovered.</span></span> <span data-ttu-id="b7797-535">Теперь эти конфликты необходимо устранить вручную.</span><span class="sxs-lookup"><span data-stu-id="b7797-535">You must now manually resolve those conflicts.</span></span>

5. <span data-ttu-id="b7797-536">В области действий выберите **Конструктор**.</span><span class="sxs-lookup"><span data-stu-id="b7797-536">On the Action Pane, select **Designer**.</span></span>
6. <span data-ttu-id="b7797-537">Для каждого конфликта изменения базы выберите **Сохранить собственное значение**, так как необходимо сохранить номер версии пользовательской модели данных для каждого из упомянутых компонентов.</span><span class="sxs-lookup"><span data-stu-id="b7797-537">For each rebase conflict, select **Retain own value**, because you must keep the version number of your custom data model for every component that has been mentioned.</span></span>
7. <span data-ttu-id="b7797-538">Нажмите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="b7797-538">Select **Save**.</span></span>
8. <span data-ttu-id="b7797-539">На вкладке **Сопоставление** выберите источник данных **Накладная** типа **Модель**, затем выберите **Правка**.</span><span class="sxs-lookup"><span data-stu-id="b7797-539">On the **Mapping** tab, select the **Invoice** data source of the **Model** type, and then select **Edit**.</span></span>
9. <span data-ttu-id="b7797-540">В поле **Версия** выберите версию **2** вашей пользовательской модели данных и выберите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="b7797-540">In the **Version** field, select version **2** of your custom data model, and then select **OK**.</span></span>
10. <span data-ttu-id="b7797-541">Нажмите **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="b7797-541">Select **Save**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="b7797-542">Операция изменения базы обратима.</span><span class="sxs-lookup"><span data-stu-id="b7797-542">The rebase action is reversible.</span></span> <span data-ttu-id="b7797-543">Чтобы отменить это изменение базы, выберите версию **11.2.2.1** формата **Накладная по продажам PEPPOL (Litware)** на экспресс-вкладке **Версии**, затем выберите **Получить эту версию**.</span><span class="sxs-lookup"><span data-stu-id="b7797-543">To cancel this rebase, select version **11.2.2.1** of the **Peppol Sales Invoice (Litware)** format on the **Versions** FastTab, and then select **Get this version**.</span></span> <span data-ttu-id="b7797-544">Версия 32.6.7.2 будет перенумерована обратно в **11.2.2.2**, а содержимое черновой версии 11.2.2.2 будет соответствовать содержимому версии 11.2.2.1.</span><span class="sxs-lookup"><span data-stu-id="b7797-544">Version 32.6.7.2 will be renumbered back to **11.2.2.2**, and the content of draft version 11.2.2.2 will match the content of version 11.2.2.1.</span></span>

11. <span data-ttu-id="b7797-545">Закройте страницу **Конструктор форматов**.</span><span class="sxs-lookup"><span data-stu-id="b7797-545">Close the **Format designer** page.</span></span>
12. <span data-ttu-id="b7797-546">На экспресс-вкладке **Версии** выберите **Изменить статус** \> **Завершено**, затем выберите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="b7797-546">On the **Versions** FastTab, select **Change status** \> **Complete**, and then select **OK**.</span></span>

<span data-ttu-id="b7797-547">Состояние версии 32.6.7.2 изменится с **Черновик** на **Завершено**, и версия становится доступной только для чтения.</span><span class="sxs-lookup"><span data-stu-id="b7797-547">The status of version 32.6.7.2 is changed from **Draft** to **Completed**, and the version becomes read-only.</span></span> <span data-ttu-id="b7797-548">Добавляется новая редактируемая версия, 32.6.7.3, имеющая статус **Черновик**.</span><span class="sxs-lookup"><span data-stu-id="b7797-548">A new editable version, 32.6.7.3, is added and has a status of **Draft**.</span></span> <span data-ttu-id="b7797-549">Эту версию можно использовать для внесения дальнейших изменений в настраиваемую конфигурацию формата электронной отчетности.</span><span class="sxs-lookup"><span data-stu-id="b7797-549">You can use this version to make further changes in your custom ER format configuration.</span></span>

![Версия 32.6.7.2 завершена на странице конфигураций](./media/er-quick-start3-completed-custom-format2.png)

## <a name="process-a-customer-invoice-by-using-new-versions-of-the-custom-er-configurations"></a><a name="ProcessInvoice3"></a><span data-ttu-id="b7797-551">Обработка накладной клиента с использованием новых версий пользовательских конфигураций электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-551">Process a customer invoice by using new versions of the custom ER configurations</span></span>

### <a name="select-and-send-a-posted-invoice"></a><span data-ttu-id="b7797-552">Выберите и отправьте разнесенную накладную</span><span class="sxs-lookup"><span data-stu-id="b7797-552">Select and send a posted invoice</span></span>

1. <span data-ttu-id="b7797-553">Перейдите в раздел **Расчеты с клиентами** \> **Накладные** \> **Все накладные с произвольным текстом**.</span><span class="sxs-lookup"><span data-stu-id="b7797-553">Go to **Accounts receivable** \> **Invoices** \> **All free text invoices**.</span></span>
2. <span data-ttu-id="b7797-554">На странице **Накладная с произвольным текстом** выберите накладную, которая была ранее добавлена и разнесена.</span><span class="sxs-lookup"><span data-stu-id="b7797-554">On the **Free text invoice** page, select the invoice that you previously added and posted.</span></span>
3. <span data-ttu-id="b7797-555">На панели действий в группе **Документ** выберите **Отправить** \> **Оригинал**.</span><span class="sxs-lookup"><span data-stu-id="b7797-555">On the Action Pane, in the **Document** group, select **Send** \> **Original**.</span></span>

    > [!NOTE] 
    > <span data-ttu-id="b7797-556">Поскольку теперь имеются две версии конфигурации формата электронной отчетности **Накладная по продажам PEPPOL (Litware)**, и ни одна из версий не имеет значения [даты вступления в силу](general-electronic-reporting.md#component-date-effectivity), используется последняя версия для создания электронной накладной.</span><span class="sxs-lookup"><span data-stu-id="b7797-556">Because you now have two versions of the **Peppol Sales Invoice (Litware)** ER format configuration, and neither version has an [effective date](general-electronic-reporting.md#component-date-effectivity) value, the latest version is used to generate an e-invoice.</span></span>

4. <span data-ttu-id="b7797-557">Закройте страницу **Накладная с произвольным текстом**.</span><span class="sxs-lookup"><span data-stu-id="b7797-557">Close the **Free text invoice** page.</span></span>

### <a name="analyze-a-generated-e-invoice"></a><span data-ttu-id="b7797-558">Анализ созданной электронной накладной</span><span class="sxs-lookup"><span data-stu-id="b7797-558">Analyze a generated e-invoice</span></span>

1. <span data-ttu-id="b7797-559">Перейдите в раздел **Управление организацией** \> **Электронная отчетность** \> **Задания электронной отчетности**.</span><span class="sxs-lookup"><span data-stu-id="b7797-559">Go to **Organization administration** \> **Electronic reporting** \> **Electronic reporting jobs**.</span></span>
2. <span data-ttu-id="b7797-560">На странице **Задания электронной отчетности** выберите самую недавнюю запись, которая содержит описание задачи **Отправить электронную накладную в формате XML**.</span><span class="sxs-lookup"><span data-stu-id="b7797-560">On the **Electronic reporting jobs** page, select the most recent record that has the task description **Send the eInvoice XML**.</span></span>
3. <span data-ttu-id="b7797-561">Выберите **Показать файлы** для доступа к списку созданных файлов.</span><span class="sxs-lookup"><span data-stu-id="b7797-561">Select **Show files** to access the list of generated files.</span></span>
4. <span data-ttu-id="b7797-562">Выберите **Открыть**, чтобы загрузить созданный XML-файл электронной накладной.</span><span class="sxs-lookup"><span data-stu-id="b7797-562">Select **Open** to download the e-invoice XML file that is generated.</span></span>
5. <span data-ttu-id="b7797-563">Проанализируйте XML-файл электронной накладной.</span><span class="sxs-lookup"><span data-stu-id="b7797-563">Analyze the e-invoice XML file.</span></span> <span data-ttu-id="b7797-564">Обратите внимание, что, в соответствии с настройкой, налоговая схема клиента все еще включает пользовательский XML-атрибут **FederalTaxID** в дополнение к XML-атрибутам **schemeID** и **schemeAgencyID**.</span><span class="sxs-lookup"><span data-stu-id="b7797-564">Notice that, in accordance with your customization, the customer tax schema still contains the custom **FederalTaxID** XML attribute in addition to the **schemeID** and **schemeAgencyID** XML attributes.</span></span> <span data-ttu-id="b7797-565">Кроме того, поскольку изменения в новой версии базового формата **Накладная по продаже UBL** были объединены с вашей настройкой, текст XML-элемента **cbc:CustomizationID** был изменен с `urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:# urn:www.peppol.eu:bis:peppol5a:ver1.0` на `urn:cen.eu:en16931:2017#compliant#urn:fdc:peppol.eu:2017:poacc:billing:3.0`.</span><span class="sxs-lookup"><span data-stu-id="b7797-565">Additionally, because the changes in the new version of the base **UBL Sales invoice** format were merged with your customization, the text of the **cbc:CustomizationID** XML element has been changed from `urn:www.cenbii.eu:transaction:biicoretrdm010:ver1.0:# urn:www.peppol.eu:bis:peppol5a:ver1.0` to `urn:cen.eu:en16931:2017#compliant#urn:fdc:peppol.eu:2017:poacc:billing:3.0`.</span></span>

    ![Предварительный просмотр созданного XML-файла электронной накладной с настройками](./media/er-quick-start3-e-invoice3.png)

## <a name="additional-resources"></a><span data-ttu-id="b7797-567">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="b7797-567">Additional resources</span></span>

- [<span data-ttu-id="b7797-568">Обзор электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="b7797-568">Electronic Reporting overview</span></span>](general-electronic-reporting.md)
- [<span data-ttu-id="b7797-569">Загрузка конфигураций электронной отчетности из Lifecycle Services</span><span class="sxs-lookup"><span data-stu-id="b7797-569">Download ER configurations from Lifecycle Services</span></span>](download-electronic-reporting-configuration-lcs.md)
- [<span data-ttu-id="b7797-570">Загрузка конфигураций электронной отчетности из глобального репозитория Configuration Service</span><span class="sxs-lookup"><span data-stu-id="b7797-570">Download ER configurations from Global repository of Configuration service</span></span>](er-download-configurations-global-repo.md)
- [<span data-ttu-id="b7797-571">Создание накладных с произвольным текстом</span><span class="sxs-lookup"><span data-stu-id="b7797-571">Create a free text invoice</span></span>](../../../finance/accounts-receivable/create-free-text-invoice-new.md)
- [<span data-ttu-id="b7797-572">Создание настраиваемых полей и работа с ними</span><span class="sxs-lookup"><span data-stu-id="b7797-572">Create and work with custom fields</span></span>](../../fin-ops/get-started/user-defined-fields.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]