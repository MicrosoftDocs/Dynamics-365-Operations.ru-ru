---
title: Сжатие больших документов, созданных в электронной отчетности
description: В этой статье объясняется, как сжимать крупные документы, созданные в формате электронной отчетности (ER).
author: kfend
ms.date: 09/11/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User, IT Pro
ms.reviewer: kfend
ms.search.region: Global
ms.author: filatovm
ms.search.validFrom: 2020-01-01
ms.dyn365.ops.version: AX 10.0.9
ms.custom: 58771
ms.assetid: ''
ms.search.form: EROperationDesigner, ERFormatDestinationTable
ms.openlocfilehash: ebdd84cdf39e21bf3d4721b1f1545b29fe38440b
ms.sourcegitcommit: 87e727005399c82cbb6509f5ce9fb33d18928d30
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/12/2022
ms.locfileid: "9273289"
---
# <a name="compress-large-documents-that-are-generated-in-electronic-reporting"></a>Сжатие больших документов, созданных в электронной отчетности 

[!include [banner](../includes/banner.md)]

Можно использовать [платформу электронной отчетности (ER)](general-electronic-reporting.md) для настройки решения, которое извлекает данные проводок для создания исходящего документа. Созданный документ может быть довольно большим. При создании документа этого типа для его хранения используется память сервера [Application Object Server (AOS)](../dev-tools/access-instances.md#location-of-packages-source-code-and-other-aos-configurations). В какой-то момент документ потребуется загрузить из вашего приложения Microsoft Dynamics 365 Finance. В настоящее время максимальный размер одного документа, созданного в электронной отчетности, не должен превышать 2 гигабайт (ГБ). Кроме того, в Finance в настоящее время размер загруженного файла [ограничивается](https://fix.lcs.dynamics.com/Issue/Details?kb=4569432&bugId=453907&dbType=3) значением 1 ГБ. Таким образом, необходимо настроить решение электронной отчетности, чтобы уменьшить вероятность того, что эти ограничения будут превышены, и вы будете получать исключение **Превышена допустимая длина потока** или **Переполнение или потеря точности в арифметической операции**.

При настройке решения можно изменить формат электронной отчетности в конструкторе операций, добавив корневой элемент типа **Папка** для сжатия содержимого, создаваемого любым из его вложенных элементов. Сжатие работает в режиме "точно во время", что позволяет уменьшить пиковое потребление памяти и размер файла, который будет загружен.

> [!NOTE]
> Сжатие файлов занимает дополнительный процент загрузки ЦП.

Чтобы получить дополнительные сведения об этом подходе, выполните пример в этой статье.

## <a name="example-compress-an-outbound-document"></a>Пример: сжатие исходящего документа

В этом примере показано, как пользователь, назначенный для роли **Системный администратор** или **Функциональный консультант электронной отчетности**, может настроить формат электронной отчетности для сжатия созданного документа.

### <a name="prerequisites"></a>Необходимые условия

Прежде чем выполнять процедуры данной статьи, необходимо выполнить указанные ниже шаги.

1. [Активация поставщика конфигураций](er-defer-xml-element.md#activate-a-configuration-provider).
2. [Импорт примера конфигураций электронной отчетности](er-defer-xml-element.md#import-the-sample-er-configurations).
3. [Просмотр импортированного формата](er-defer-xml-element.md#review-the-imported-format).

> [!NOTE]
> В настоящее время структура формата начинается с элемента **Отчет** типа **Файл** и содержит XML-элементы. Таким образом, исходящий документ будет создан в формате XML, и сжатие использоваться не будет.

### <a name="generate-an-er-format-to-get-an-uncompressed-document"></a>Создание формата электронной отчетности для получения несжатого документа

1. [Запустите импортированный формат](er-defer-xml-element.md#run-the-imported-format).
2. Обратите внимание, что размер создаваемого документа в формате XML составляет 3 килобайта (КБ).

    ![Предварительный просмотр несжатого исходящего документа.](./media/er-compress-outbound-files1.png)

### <a name="modify-the-format-to-compress-the-generated-output"></a>Изменение формата для сжатия созданных выходных данных

1. Перейдите в раздел **Администрирование организации** \> **Электронная отчетность** \> **Конфигурации**.
2. На странице **Конфигурации** в дереве конфигураций разверните **Модель для изучения отложенных элементов**.
3. Выберите конфигурацию **Формат для изучения отложенных элементов XML**.
4. Выберите **Конструктор**, чтобы изменить структуру формата.
5. На странице **Конструктор форматов** на вкладке **Формат** выберите **Добавить корень**, чтобы добавить корневой элемент формата.
6. В диалоговом окне **Добавление** выберите **Общая\\папка**.
7. Выберите **ОК**, чтобы подтвердить добавление нового корневого элемента.
8. Нажмите **Сохранить**.

> [!NOTE]
> Структура формата начинается с элемента типа **Папка**. Этот элемент будет создавать выходные данные в виде сжатого ZIP-файла. Когда документ, созданный элементом **Отчет**, помещается в исходящий ZIP-файл, его содержимое будет сжиматься для уменьшения размера исходящего файла.

### <a name="generate-an-er-format-to-get-a-compressed-document"></a>Создание формата электронной отчетности для получения сжатого документа

1. На странице **Конструктор формата** выберите **Выполнить**.
2. Загрузите ZIP-файл, предлагаемый веб-браузером, и откройте его для просмотра.
3. Обратите внимание, что размер создаваемого документа в формате ZIP составляет 1 КБ.

    > [!NOTE] 
    > Коэффициент сжатия файла XML, хранящегося в этом ZIP-файле, составляет 87 процентов. Коэффициент сжатия зависит от данных, которые сжимаются.

    ![Предварительный просмотр сжатого исходящего документа.](./media/er-compress-outbound-files2.png)

> [!NOTE]
> Если [пункт назначения](electronic-reporting-destinations.md) электронной отчетности настроен для элемента формата, который создает выходные данные (элемент **Отчет** в этом примере), сжатие выходных данных будет пропущено.

## <a name="additional-resources"></a>Дополнительные ресурсы

[Обзор электронной отчетности (ER)](general-electronic-reporting.md)

[Места назначения электронной отчетности (ER)](electronic-reporting-destinations.md)

[Отложенное выполнение элементов XML в форматах электронной отчетности](er-defer-xml-element.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
