---
title: Настройка зависящих от действий мест назначения электронной отчетности
description: В этой теме объясняется, как настроить зависящие от действия места назначения для формата электронной отчетности, настроенного для создания исходящих документов.
author: NickSelin
ms.date: 02/09/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERSolutionTable, ERFormatDestinationTable
audience: Application User
ms.reviewer: kfend
ms.custom: 97423
ms.assetid: f3055a27-717a-4c94-a912-f269a1288be6
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2020-12-01
ms.dyn365.ops.version: 10.0.17
ms.openlocfilehash: 93adc5b91667fdcd5969439994170fe7d28258fc9f5762d1262d8e72862c4f5f
ms.sourcegitcommit: 42fe9790ddf0bdad911544deaa82123a396712fb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/05/2021
ms.locfileid: "6762256"
---
# <a name="configure-action-dependent-er-destinations"></a>Настройка зависящих от действий мест назначения электронной отчетности

[!include [banner](../includes/banner.md)]

Можно настроить [места назначения](electronic-reporting-destinations.md) для каждого исходящего компонента (папка или файл) [конфигурации](general-electronic-reporting.md#Configuration) [формата](general-electronic-reporting.md#FormatComponentOutbound) [электронной отчетности (ER)](general-electronic-reporting.md), используемой для создания исходящего документа. Пользователи, которые выполняют формат электронной отчетности данного типа и имеют соответствующие права доступа, могут также изменять настроенные настройки пункта назначения во время выполнения.

В Microsoft Dynamics 365 Finance **версии 10.0.17 и более поздних** формат электронной отчетности может быть выполнен путем [подготовки](er-apis-app10-0-17.md) кода действия, выполняемого пользователем путем выполнения данного формата электронной отчетности. Например, в модуле **Расчеты с клиентами** в настройках управления печатью можно выбрать формат электронной отчетности, который создает конкретный деловой документ, например накладную с произвольным текстом. Затем можно выбрать **Просмотр** для предварительного просмотра накладной или **Печать**, чтобы отправить ее на принтер. Если действие пользователя передается в выполняемый формат электронной отчетности во время выполнения, можно настроить другие пункты назначения электронной отчетности для других действий пользователя. В этом разделе описан порядок настройки мест назначений электронной отчетности для этого типа формата электронной отчетности.

## <a name="make-action-dependent-er-destinations-available"></a>Обеспечение доступности зависящих от действий мест назначения электронной отчетности

Чтобы настроить зависящие от действий места назначения электронной отчетности в текущем экземпляре Finance и включить [новый](er-apis-app10-0-17.md) интерфейс API электронной отчетности, откройте рабочую область [Управление функциями](../../fin-ops/get-started/feature-management/feature-management-overview.md#the-feature-management-workspace) и включите функцию **Настройка использования определенных места назначений электронной отчетности для разных действий PM**. Чтобы использовать настроенные места назначений электронной отчетности для [определенных](#reports-list-wave1) отчетов во время выполнения, включите функцию **Направлять выходные данные отчетов PM на основе мест назначений электронной отчетности, заданных для определенных действий пользователя (волна 1)**.

## <a name="configure-action-dependent-er-destinations"></a>Настройка зависящих от действий мест назначения электронной отчетности

При включении функции **Настройка использования определенных места назначений электронной отчетности для разных действий PM** можно настроить зависящие от действий места назначения электронной отчетности на вкладке **Место назначения файла** на странице **Место назначения электронной отчетности**. Для каждого компонента можно добавить запись и разрешить использование определенных мест назначения электронной отчетности. Для каждой записи необходимо указать тип документа, для которого должны применяться настроенные места назначения электронной отчетности. В поле **Тип документа** выберите одно из следующих значений:

- Выберите **Электронный**, чтобы применить настроенные места назначения, если во время выполнения не указан код пользовательского действия.
- Выберите **Управление печатью**, чтобы применить настроенные места назначения, если во время выполнения указан код пользовательского действия.
- Выберите **Любой**, чтобы всегда применить настроенные места назначения, незавиимо от того, указан ли во время выполнения код пользовательского действия.

Если выбран тип документа **Управление печатью**, необходимо указать действия пользователя, для которых должны применяться настроенные места назначения электронной отчетности. В поле **Действие управления печатю** выберите одно из следующих значений:

- Выберите **Просмотр**, чтобы применить настроенные места назначения, если во время выполнения указано пользовательское действие **Просмотр**.
- Выберите **Печать**, чтобы применить настроенные места назначения, если во время выполнения указано пользовательское действие **Печать**.
- Выберите **Отправить**, чтобы применить настроенные места назначения, если во время выполнения указано пользовательское действие **Отправить**.

> [!NOTE]
> Для одной записи места назначения можно выбрать несколько действий.

Если выбран тип документа **Любой**, значение **Автоопределение** автоматически выбирается в поле **Действие управления печатью** как действие пользователя, и происходит следующее поведение:

- Если во время выполнения не указан код пользовательского действия, применяются все настроенные места назначения электронной отчетности.
- Если код действия пользователя предоставляется во время выполнения, применяется место назначение электронной отчетности, предопределенное для конкретного действия, **независимо от того, было ли оно включено**:

    - Когда действие **Просмотр** предоставляется во время выполнения, используется место назначение электронной отчетности **Экран**.
    - Когда действие **Отправить** предоставляется во время выполнения, используется место назначение электронной отчетности **Электронная почта**.
    - Когда действие **Печать** предоставляется во время выполнения, используется место назначение электронной отчетности **Принтер**.

Например, можно использовать формат электронной отчетности **Накладная с произвольным текстом (Excel)** для печати [накладной с произвольным текстом](../../../finance/accounts-receivable/create-free-text-invoice-new.md) при ее разноске. Для маршрутизации созданного документа необходимо настроить места назначения электронной отчетности для этого формата электронной отчетности. Например, может потребоваться настроить эти места назначений электронной отчетности, чтобы выполнить следующие действия для созданного документа:

- Архивировать документ, если выполняется формат электронной отчетности, но код действия не указан (например, когда документ отправляется в электронном виде).
- Предварительно просмотреть документ в веб-браузере при выполнении пользователем действия **Просмотр**.
- Заархивировать и распечатать документ, когда пользователь выполняет действие **Печать**.
- Архивировать документ и отправить его по электронной почте как вложения в исходящее сообщение электронной почты, когда пользователь выполняет действие **Отправить**.

На следующем рисунке показано, как можно достичь такой настройки места назначений электронной отчетности в качестве набора отдельных записей, когда каждая запись настроена для отдельного действия пользователя:

![Страница места назначения электронной отчетности, имеющая настройки зависящих от действий места назначения для формата электронной отчетности, когда каждая запись места назначения настроена для одного действия пользователя.](./media/er-destination-action-dependent-01.png)

На следующем рисунке показано, как можно достичь такого же результата, альтернативно настроив места назначений электронной отчетности в качестве набора отдельных записей, когда каждая запись настроена для отдельного места назначения:

![Страница места назначения электронной отчетности, имеющая настройки зависящих от действий места назначения для формата электронной отчетности, когда каждая запись места назначения настроена для одного места назначения.](./media/er-destination-action-dependent-01a.png)

> [!NOTE]
> Если код действия указан для запущенного формата электронной отчетности, но для этого кода действия не были настроены места назначения, применяется поведение места назначения [по умолчанию](electronic-reporting-destinations.md#default-behavior).

## <a name="change-action-dependent-er-destinations-at-runtime"></a>Изменение зависящих от действий мест назначения электронной отчетности во время выполнения

При запуске формата электронной отчетности, если пользовательские действия были подготовлены пользователями, имеющими соответствующие [разрешения](electronic-reporting-destinations.md#security-considerations) на изменение настроенных параметров места назначения во время выполнения, появляется диалоговое окно, позволяющее изменить настроенные параметры мест назначения. Это диалоговое окно является необязательным, и его внешний вид зависит от того, как был реализован вызов, выполняемый платформой электронной отчетности для запиуска формата электронной отчетности. Если отображается это диалоговое окно, места назначения электронной отчетности в нем будут включены в соответствии с предоставленным действием пользователя.

На следующем рисунке показан пример диалогового окна **Места назначения формата электронной отчетности**, которое появляется при [разноске](../../../finance/accounts-receivable/create-free-text-invoice-new.md) накладной с произвольным текстом и при запуске формата электронной отчетности **накладной с произвольным текстом (Excel)** для создания этого документа, если действие **Принтер** было подготовлено, а места назначения электронной отчетности были настроены для этого формата, как показано ранее в этом разделе.

![Диалоговое окно, позволяющее изменить изначально настроенные места назначения электронной отчетности для запущенного формата электронной отчетности.](./media/er-destination-action-dependent-02.gif)

> [!NOTE]
> Если настроены места назначения электронной отчетности для нескольких компонентов выполняемого формата электронной отчетности, для каждого настроенного компонента формата электронной отчетности будет предложен отдельный вариант.

## <a name="verify-the-provided-user-action"></a>Проверка предоставленного действия пользователя

Можно проверить, что действие пользователя, если имеется, предоставлено для выполняемого формата электронной отчетности при выполнении определенного действия пользователя. Эта проверка важна, когда необходимо настроить зависящие от действия места назначения электронной отчетности, но вы не уверены в том, какой код действия пользователя, если имеется, предоставлен. Например, когда вы начинаете разноску накладной с произвольным текстом и задаете для параметра **Печать накладной** значение **Да** в диалоговом окне **Разноска накладной с произвольным текстом**, можно задать для параметра **Использовать место назначения управления печатью** значение **Да** или **Нет**.

Выполните следующие действия, чтобы проверить предоставленный код действия пользователя.

1. Перейдите в раздел **Администрирование организации** \> **Электронная отчетность** \> **Конфигурации**.
2. На странице **Конфигурации** в области действий на вкладке **Конфигурации** в группе **Дополнительные параметры** выберите **Параметры пользователя**.
3. В диалоговом окне **Параметры пользователя** [установите](er-trace-reports-compare-baseline.md#configure-er-parameters-to-use-the-baseline-feature) для параметра **Запустить в режиме отладки** значение **Да**.
4. Выполните действие пользователя путем запуска формата электронной отчетности. Прмните, что параметры пользователя электронной отчетности относятся к конкретной компании и конкретному пользователю.
5. Перейдите в раздел **Администрирование организации** \> **Электронная отчетность** \> **Журналы отладки конфигураций**.
6. На странице **Журналы отладки конфигурации** отфильтруйте журналы выполнения электронной отчетности, чтобы найти журнал для выполнени формата электронной отчетности.
7. Проверьте записи журнала, которые должны содержать запись, представляющую предоставленный код действия пользователя, если для выполнения формата электронной отчетности было указано какое-либо действие.

    ![Страница журналов выполнения электронной отчетности, содержащая сведения о коде действия пользователя, который был указан для фильтрованного выполнения формата электронной отчетности.](./media/er-destination-action-dependent-03.png)

## <a name=""></a><a name="reports-list-wave1">Список деловых документов (волна 1)</a>

Следующий список деловых документов управляется с помощью этой функции, **Направлять выходные данные отчетов PM на основе мест назначений электронной отчетности, заданных для определенных действий пользователя (волна 1)**:

- Накладная клиента (Накладная с произвольным текстом)
- Накладная клиента (Накладная по продаже)
- Заказ на покупку
- Запрос на покупку заказа на покупку
- Подтверждение заказа на продажу
- Примечание к письму-напоминанию
- Выписка по счету клиента
- Процент-нота
- Уведомление об оплате поставщику
- Запрос предложения

## <a name="additional-resources"></a>Дополнительные ресурсы

[Обзор электронной отчетности (ER)](general-electronic-reporting.md)

[Места назначения электронной отчетности (ER)](electronic-reporting-destinations.md)

[Изменения в API платформы электронной отчетности для Application update 10.0.17](er-apis-app10-0-17.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]