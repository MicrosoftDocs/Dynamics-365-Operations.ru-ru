---
title: Разработка выражений электронной отчетности для вызова методов классов приложений
description: В этой теме описывается повторное использование существующей логики в конфигурациях электронной отчетности путем вызова требуемых методов классов приложения.
author: NickSelin
manager: AnnBe
ms.date: 12/12/2017
ms.topic: business-process
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: kfend
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: Version 7.0.0
ms.openlocfilehash: 11b4d185703731d8491ad10bdeedea40ce811f5d
ms.sourcegitcommit: 6cb174d1ec8b55946dca4db03d6a3c3f4c6fa2df
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/09/2021
ms.locfileid: "5564102"
---
# <a name="design-er-expressions-to-call-application-class-methods"></a><span data-ttu-id="eea60-103">Разработка выражений электронной отчетности для вызова методов классов приложений</span><span class="sxs-lookup"><span data-stu-id="eea60-103">Design ER expressions to call application class methods</span></span>

[!include [banner](../../includes/banner.md)]

<span data-ttu-id="eea60-104">В этом руководстве описывается повторное использование существующей логики в конфигурациях электронной отчетности (ER) путем вызова требуемых методов классов приложения в выражениях ER.</span><span class="sxs-lookup"><span data-stu-id="eea60-104">This guide provides information about how to reuse the existing application logic in Electronic reporting (ER) configurations by calling required methods of application classes in ER expressions.</span></span> <span data-ttu-id="eea60-105">Значения аргументов для вызова классов могут определяться динамически во время выполнения: например, на основе информации в документе анализа для гарантии ее правильности.</span><span class="sxs-lookup"><span data-stu-id="eea60-105">Values of arguments for calling classes can be defined dynamically at run-time: for example, based on information in the parsing document to ensure its correctness.</span></span> <span data-ttu-id="eea60-106">В этом проводнике вам предстоит создать необходимые конфигурации ER для демонстрационной компании Litware, Inc. Эта процедура предназначена для пользователей, которым назначена роль "Системный администратор" или "Разработчик электронной отчетности".</span><span class="sxs-lookup"><span data-stu-id="eea60-106">In this guide, you will create the required ER configurations for the sample company, Litware, Inc. This procedure is created for users with the assigned role of System administrator or Electronic reporting developer.</span></span> 

<span data-ttu-id="eea60-107">Эти шаги можно выполнить с использованием любого набора данных.</span><span class="sxs-lookup"><span data-stu-id="eea60-107">These steps can be completed using any data set.</span></span> <span data-ttu-id="eea60-108">Необходимо также загрузить и сохранить следующий файл на локальном компьютере: (https://go.microsoft.com/fwlink/?linkid=862266): SampleIncomingMessage.txt.</span><span class="sxs-lookup"><span data-stu-id="eea60-108">You must also download and save the following file locally: (https://go.microsoft.com/fwlink/?linkid=862266): SampleIncomingMessage.txt.</span></span>

<span data-ttu-id="eea60-109">Для выполнения этих шагов необходимо сначала выполнить шаги в процедуре "Электронная отчетность — создание поставщика конфигурации и пометка его как активного".</span><span class="sxs-lookup"><span data-stu-id="eea60-109">To complete these steps, you must first complete the steps in the procedure, "ER Create a configuration provider and mark it as active."</span></span>

1. <span data-ttu-id="eea60-110">Перейдите в раздел "Управление организацией" > "Рабочие области" > "Электронная отчетность".</span><span class="sxs-lookup"><span data-stu-id="eea60-110">Go to Organization administration > Workspaces > Electronic reporting.</span></span>
    * <span data-ttu-id="eea60-111">Убедитесь, что поставщик конфигурации для примера компании Litware, Inc. доступен и помечен как активный.</span><span class="sxs-lookup"><span data-stu-id="eea60-111">Verify that the configuration provider for sample company, Litware, Inc. is available and marked as active.</span></span> <span data-ttu-id="eea60-112">Если вы не видите этого поставщика конфигурации, необходимо сначала выполнить шаги в процедуре "Электронная отчетность — создание поставщика конфигурации и пометка его как активного".</span><span class="sxs-lookup"><span data-stu-id="eea60-112">If you don't see this configuration provider, you must first complete the steps in the procedure, "Create a configuration provider and mark it as active".</span></span>   
    * <span data-ttu-id="eea60-113">Вы разрабатываете процесс для анализа входящих банковских выписок для обновления данных приложения.</span><span class="sxs-lookup"><span data-stu-id="eea60-113">You are designing a process for parsing incoming bank statements for an application data update.</span></span> <span data-ttu-id="eea60-114">Вы будете получать входящие банковские выписки как TXT-файлы, содержащие коды IBAN.</span><span class="sxs-lookup"><span data-stu-id="eea60-114">You will receive the incoming bank statements as TXT files that contain IBAN codes.</span></span> <span data-ttu-id="eea60-115">В рамках процесса импорта банковской выписки необходимо проверить правильность этих кодов IBAN с помощью логики, которая уже доступна.</span><span class="sxs-lookup"><span data-stu-id="eea60-115">As part of the bank statement import process, you need to validate the correctness of this IBAN codes using the logic that is already available.</span></span>   

## <a name="import-a-new-er-model-configuration"></a><span data-ttu-id="eea60-116">Импорт новой конфигурации модели ER</span><span class="sxs-lookup"><span data-stu-id="eea60-116">Import a new ER model configuration</span></span>
1. <span data-ttu-id="eea60-117">В списке найдите и выберите требуемую запись.</span><span class="sxs-lookup"><span data-stu-id="eea60-117">In the list, find and select the desired record.</span></span>
    * <span data-ttu-id="eea60-118">Выберите плитку поставщика Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="eea60-118">Select the Microsoft provider tile.</span></span>  
2. <span data-ttu-id="eea60-119">Щелкните "Репозитории".</span><span class="sxs-lookup"><span data-stu-id="eea60-119">Click Repositories.</span></span>
3. <span data-ttu-id="eea60-120">Щелкните "Показать фильтры".</span><span class="sxs-lookup"><span data-stu-id="eea60-120">Click Show filters.</span></span>
4. <span data-ttu-id="eea60-121">Добавьте поле фильтра "Имя типа".</span><span class="sxs-lookup"><span data-stu-id="eea60-121">Add a filter field 'Type name'.</span></span> <span data-ttu-id="eea60-122">В поле "Имя" введите значение "ресурсы", выберите оператор фильтра "содержит" и нажмите кнопку "Применить".</span><span class="sxs-lookup"><span data-stu-id="eea60-122">In the Name field, enter the value "resources", select the "contains" filter operator, and then click Apply.</span></span>
5. <span data-ttu-id="eea60-123">Щелкните Открыть.</span><span class="sxs-lookup"><span data-stu-id="eea60-123">Click Open.</span></span>
6. <span data-ttu-id="eea60-124">В дереве выберите "Модель платежа".</span><span class="sxs-lookup"><span data-stu-id="eea60-124">In the tree, select 'Payment model'.</span></span>
    * <span data-ttu-id="eea60-125">Если кнопка "Импорт" на экспресс-вкладке "Версии" не включена, вы уже импортировали версию 1 конфигурации ER "Модель платежа".</span><span class="sxs-lookup"><span data-stu-id="eea60-125">If the Import button on the Versions FastTab is not enabled, you have already imported the version 1 one of the ER configuration 'Payment model'.</span></span> <span data-ttu-id="eea60-126">Остальные шаги в этой подзадаче можно пропустить.</span><span class="sxs-lookup"><span data-stu-id="eea60-126">You can skip the rest steps in this sub-task.</span></span>   
7. <span data-ttu-id="eea60-127">Нажмите кнопку Импорт.</span><span class="sxs-lookup"><span data-stu-id="eea60-127">Click Import.</span></span>
8. <span data-ttu-id="eea60-128">Щелкните Да.</span><span class="sxs-lookup"><span data-stu-id="eea60-128">Click Yes.</span></span>
9. <span data-ttu-id="eea60-129">Закройте страницу.</span><span class="sxs-lookup"><span data-stu-id="eea60-129">Close the page.</span></span>
10. <span data-ttu-id="eea60-130">Закройте страницу.</span><span class="sxs-lookup"><span data-stu-id="eea60-130">Close the page.</span></span>

## <a name="add-a-new-er-format-configuration"></a><span data-ttu-id="eea60-131">Добавление новой конфигурации формата электронной отчетности</span><span class="sxs-lookup"><span data-stu-id="eea60-131">Add a new ER format configuration</span></span>
1. <span data-ttu-id="eea60-132">Щелкните "Конфигурации отчетности".</span><span class="sxs-lookup"><span data-stu-id="eea60-132">Click Reporting configurations.</span></span>
    * <span data-ttu-id="eea60-133">Добавьте новый формат ER для анализа входящих банковских выписок в формате TXT.</span><span class="sxs-lookup"><span data-stu-id="eea60-133">Add a new ER format to parse incoming bank statements in TXT format.</span></span>  
2. <span data-ttu-id="eea60-134">В дереве выберите "Модель платежа".</span><span class="sxs-lookup"><span data-stu-id="eea60-134">In the tree, select 'Payment model'.</span></span>
3. <span data-ttu-id="eea60-135">Щелкните "Создать конфигурацию", чтобы открыть диалоговое меню.</span><span class="sxs-lookup"><span data-stu-id="eea60-135">Click Create configuration to open the dialog menu.</span></span>
4. <span data-ttu-id="eea60-136">В поле "Создать" введите "Формат, основанный на модели данных PaymentModel".</span><span class="sxs-lookup"><span data-stu-id="eea60-136">In the New field, enter 'Format based on data model PaymentModel'.</span></span>
5. <span data-ttu-id="eea60-137">В поле "Имя" введите "Формат импорта банковской выписки (образец)".</span><span class="sxs-lookup"><span data-stu-id="eea60-137">In the Name field, type 'Bank statement import format (sample)'.</span></span>
    * <span data-ttu-id="eea60-138">Формат импорта банковской выписки (образец)</span><span class="sxs-lookup"><span data-stu-id="eea60-138">Bank statement import format (sample)</span></span>  
6. <span data-ttu-id="eea60-139">Выберите "Да" в поле "Поддерживает импорт данных".</span><span class="sxs-lookup"><span data-stu-id="eea60-139">Select Yes in the Supports data import field.</span></span>
7. <span data-ttu-id="eea60-140">Нажмите Создать конфигурацию.</span><span class="sxs-lookup"><span data-stu-id="eea60-140">Click Create configuration.</span></span>

## <a name="design-the-er-format-configuration---format"></a><span data-ttu-id="eea60-141">Разработка конфигурации формата ER — формат</span><span class="sxs-lookup"><span data-stu-id="eea60-141">Design the ER format configuration - format</span></span>
1. <span data-ttu-id="eea60-142">Выберите Конструктор.</span><span class="sxs-lookup"><span data-stu-id="eea60-142">Click Designer.</span></span>
    * <span data-ttu-id="eea60-143">Созданный формат представляет ожидаемую структуру внешнего файла в формате TXT.</span><span class="sxs-lookup"><span data-stu-id="eea60-143">The designed format represents the expected structure of the external file in TXT format.</span></span>  
2. <span data-ttu-id="eea60-144">Щелкните "Добавить корень", чтобы открыть диалоговое меню.</span><span class="sxs-lookup"><span data-stu-id="eea60-144">Click Add root to open the dialog menu.</span></span>
3. <span data-ttu-id="eea60-145">В дереве выберите "Текст\Последовательность".</span><span class="sxs-lookup"><span data-stu-id="eea60-145">In the tree, select 'Text\Sequence'.</span></span>
4. <span data-ttu-id="eea60-146">В поле "Имя" введите "Корень".</span><span class="sxs-lookup"><span data-stu-id="eea60-146">In the Name field, type 'Root'.</span></span>
    * <span data-ttu-id="eea60-147">Корневой</span><span class="sxs-lookup"><span data-stu-id="eea60-147">Root</span></span>  
5. <span data-ttu-id="eea60-148">В поле "Специальные знаки", выберите "Создать строку — Windows (CR LF)".</span><span class="sxs-lookup"><span data-stu-id="eea60-148">In the Special characters field, select 'New line - Windows (CR LF)'.</span></span>
    * <span data-ttu-id="eea60-149">В поле "Специальные знаки" выбран параметр "Создать строку — Windows (CR LF)".</span><span class="sxs-lookup"><span data-stu-id="eea60-149">The option 'New line - Windows (CR LF)' has been selected in the 'Special characters' field.</span></span> <span data-ttu-id="eea60-150">На основании этого параметра каждая строка в файле анализа рассматривается как отдельная запись.</span><span class="sxs-lookup"><span data-stu-id="eea60-150">Based on this setting, each line in the parsing file is considered a separate record.</span></span>  
6. <span data-ttu-id="eea60-151">Нажмите кнопку "OК".</span><span class="sxs-lookup"><span data-stu-id="eea60-151">Click OK.</span></span>
7. <span data-ttu-id="eea60-152">Щелкните "Добавить", чтобы открыть раскрывающееся диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="eea60-152">Click Add to open the drop dialog.</span></span>
8. <span data-ttu-id="eea60-153">В дереве выберите "Текст\Последовательность".</span><span class="sxs-lookup"><span data-stu-id="eea60-153">In the tree, select 'Text\Sequence'.</span></span>
9. <span data-ttu-id="eea60-154">Введите "Строки" в поле "Имя".</span><span class="sxs-lookup"><span data-stu-id="eea60-154">In the Name field, type 'Rows'.</span></span>
    * <span data-ttu-id="eea60-155">Строки</span><span class="sxs-lookup"><span data-stu-id="eea60-155">Rows</span></span>  
10. <span data-ttu-id="eea60-156">В поле "Кратность" выберите "Один — много".</span><span class="sxs-lookup"><span data-stu-id="eea60-156">In the Multiplicity field, select 'One many'.</span></span>
    * <span data-ttu-id="eea60-157">В поле "Кратность" выбран параметр "Один — много".</span><span class="sxs-lookup"><span data-stu-id="eea60-157">The option 'One many' has been selected in the 'Multiplicity' field.</span></span> <span data-ttu-id="eea60-158">На основании этого параметра ожидается, что по крайней мере одна строка будет представлена в файле анализа.</span><span class="sxs-lookup"><span data-stu-id="eea60-158">Based on this setting, it is expected that at least one line will be presented in the parsing file.</span></span>  
11. <span data-ttu-id="eea60-159">Нажмите кнопку "OК".</span><span class="sxs-lookup"><span data-stu-id="eea60-159">Click OK.</span></span>
12. <span data-ttu-id="eea60-160">В дереве выберите "Корень\Строки".</span><span class="sxs-lookup"><span data-stu-id="eea60-160">In the tree, select 'Root\Rows'.</span></span>
13. <span data-ttu-id="eea60-161">Нажмите кнопку "Добавить последовательность".</span><span class="sxs-lookup"><span data-stu-id="eea60-161">Click Add Sequence.</span></span>
14. <span data-ttu-id="eea60-162">Введите "Поля" в поле "Имя".</span><span class="sxs-lookup"><span data-stu-id="eea60-162">In the Name field, type 'Fields'.</span></span>
    * <span data-ttu-id="eea60-163">Поля</span><span class="sxs-lookup"><span data-stu-id="eea60-163">Fields</span></span>  
15. <span data-ttu-id="eea60-164">В поле "Кратность" выберите "Ровно один".</span><span class="sxs-lookup"><span data-stu-id="eea60-164">In the Multiplicity field, select 'Exactly one'.</span></span>
16. <span data-ttu-id="eea60-165">Нажмите кнопку "OК".</span><span class="sxs-lookup"><span data-stu-id="eea60-165">Click OK.</span></span>
17. <span data-ttu-id="eea60-166">В дереве выберите "Корень\Строки\Поля".</span><span class="sxs-lookup"><span data-stu-id="eea60-166">In the tree, select 'Root\Rows\Fields'.</span></span>
18. <span data-ttu-id="eea60-167">Щелкните "Добавить", чтобы открыть раскрывающееся диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="eea60-167">Click Add to open the drop dialog.</span></span>
19. <span data-ttu-id="eea60-168">В дереве выберите "Текст\строка".</span><span class="sxs-lookup"><span data-stu-id="eea60-168">In the tree, select 'Text\String'.</span></span>
20. <span data-ttu-id="eea60-169">В поле "Имя" введите "IBAN".</span><span class="sxs-lookup"><span data-stu-id="eea60-169">In the Name field, type 'IBAN'.</span></span>
    * <span data-ttu-id="eea60-170">Номер IBAN</span><span class="sxs-lookup"><span data-stu-id="eea60-170">IBAN</span></span>  
21. <span data-ttu-id="eea60-171">Нажмите кнопку "OК".</span><span class="sxs-lookup"><span data-stu-id="eea60-171">Click OK.</span></span>
    * <span data-ttu-id="eea60-172">Он был настроен для каждой строки в файле анализа, содержащей только код IBAN.</span><span class="sxs-lookup"><span data-stu-id="eea60-172">It has been configured that each line in the parsing file contains the only IBAN code.</span></span>  
22. <span data-ttu-id="eea60-173">Нажмите кнопку "Сохранить".</span><span class="sxs-lookup"><span data-stu-id="eea60-173">Click Save.</span></span>

## <a name="design-the-er-format-configuration--mapping-to-data-model"></a><span data-ttu-id="eea60-174">Разработка конфигурации формата ER — сопоставление с моделью данных</span><span class="sxs-lookup"><span data-stu-id="eea60-174">Design the ER format configuration – mapping to data model</span></span>
1. <span data-ttu-id="eea60-175">Щелкните "Сопоставить формат модели".</span><span class="sxs-lookup"><span data-stu-id="eea60-175">Click Map format to model.</span></span>
2. <span data-ttu-id="eea60-176">Щелкните "Создать".</span><span class="sxs-lookup"><span data-stu-id="eea60-176">Click New.</span></span>
3. <span data-ttu-id="eea60-177">В поле "Определение" введите BankToCustomerDebitCreditNotificationInitiation.</span><span class="sxs-lookup"><span data-stu-id="eea60-177">In the Definition field, type 'BankToCustomerDebitCreditNotificationInitiation'.</span></span>
    * <span data-ttu-id="eea60-178">BankToCustomerDebitCreditNotificationInitiation</span><span class="sxs-lookup"><span data-stu-id="eea60-178">BankToCustomerDebitCreditNotificationInitiation</span></span>  
4. <span data-ttu-id="eea60-179">Разрешить изменения определения.</span><span class="sxs-lookup"><span data-stu-id="eea60-179">ResolveChanges the Definition.</span></span>
5. <span data-ttu-id="eea60-180">В поле "Имя" введите "Сопоставление с моделью данных".</span><span class="sxs-lookup"><span data-stu-id="eea60-180">In the Name field, type 'Mapping to data model'.</span></span>
    * <span data-ttu-id="eea60-181">Сопоставление с моделью данных</span><span class="sxs-lookup"><span data-stu-id="eea60-181">Mapping to data model</span></span>  
6. <span data-ttu-id="eea60-182">Нажмите кнопку "Сохранить".</span><span class="sxs-lookup"><span data-stu-id="eea60-182">Click Save.</span></span>
7. <span data-ttu-id="eea60-183">Выберите Конструктор.</span><span class="sxs-lookup"><span data-stu-id="eea60-183">Click Designer.</span></span>
8. <span data-ttu-id="eea60-184">В дереве выберите "Dynamics 365 for Operations\Класс".</span><span class="sxs-lookup"><span data-stu-id="eea60-184">In the tree, select 'Dynamics 365 for Operations\Class'.</span></span>
9. <span data-ttu-id="eea60-185">Щелкните "Добавить корень".</span><span class="sxs-lookup"><span data-stu-id="eea60-185">Click Add root.</span></span>
    * <span data-ttu-id="eea60-186">Добавьте новый источник данных для вызова существующей логики приложения для проверки кодов IBAN.</span><span class="sxs-lookup"><span data-stu-id="eea60-186">Add a new data source to call the existing application logic for IBAN codes validation.</span></span>  
10. <span data-ttu-id="eea60-187">В поле "Имя" введите check_codes.</span><span class="sxs-lookup"><span data-stu-id="eea60-187">In the Name field, type 'check_codes'.</span></span>
    * <span data-ttu-id="eea60-188">проверка кода</span><span class="sxs-lookup"><span data-stu-id="eea60-188">check_codes</span></span>  
11. <span data-ttu-id="eea60-189">В поле "Класс" введите ISO7064.</span><span class="sxs-lookup"><span data-stu-id="eea60-189">In the Class field, type 'ISO7064'.</span></span>
    * <span data-ttu-id="eea60-190">ISO7064</span><span class="sxs-lookup"><span data-stu-id="eea60-190">ISO7064</span></span>  
12. <span data-ttu-id="eea60-191">Нажмите кнопку "OК".</span><span class="sxs-lookup"><span data-stu-id="eea60-191">Click OK.</span></span>
13. <span data-ttu-id="eea60-192">В дереве разверните "формат".</span><span class="sxs-lookup"><span data-stu-id="eea60-192">In the tree, expand 'format'.</span></span>
14. <span data-ttu-id="eea60-193">В дереве разверните "формат\Корень: Последовательность(корень)".</span><span class="sxs-lookup"><span data-stu-id="eea60-193">In the tree, expand 'format\Root: Sequence(Root)'.</span></span>
15. <span data-ttu-id="eea60-194">В дереве выберите "формат\Корень: Последовательность(корень)\Строки: последовательность 1.. \* (строки)".</span><span class="sxs-lookup"><span data-stu-id="eea60-194">In the tree, select 'format\Root: Sequence(Root)\Rows: Sequence 1..\* (Rows)'.</span></span>
16. <span data-ttu-id="eea60-195">Щелкните "Связать".</span><span class="sxs-lookup"><span data-stu-id="eea60-195">Click Bind.</span></span>
17. <span data-ttu-id="eea60-196">В дереве разверните "формат\Корень: Последовательность(корень)\Строки: последовательность 1.. \* (строки)".</span><span class="sxs-lookup"><span data-stu-id="eea60-196">In the tree, expand 'format\Root: Sequence(Root)\Rows: Sequence 1..\* (Rows)'.</span></span>
18. <span data-ttu-id="eea60-197">В дереве разверните "формат\Корень: Последовательность(корень)\Строки: последовательность 1.. \* (строки)\Поля: последовательность 1..1 (поля)".</span><span class="sxs-lookup"><span data-stu-id="eea60-197">In the tree, expand 'format\Root: Sequence(Root)\Rows: Sequence 1..\* (Rows)\Fields: Sequence 1..1 (Fields)'.</span></span>
19. <span data-ttu-id="eea60-198">В дереве выберите "формат\Корень: Последовательность(корень)\Строки: последовательность 1.. \* (строки)\Поля: последовательность 1..1 (поля)\IBAN: строка(IBAN)".</span><span class="sxs-lookup"><span data-stu-id="eea60-198">In the tree, select 'format\Root: Sequence(Root)\Rows: Sequence 1..\* (Rows)\Fields: Sequence 1..1 (Fields)\IBAN: String(IBAN)'.</span></span>
20. <span data-ttu-id="eea60-199">В дереве разверните "Платежи = format.Root.Rows".</span><span class="sxs-lookup"><span data-stu-id="eea60-199">In the tree, expand 'Payments = format.Root.Rows'.</span></span>
21. <span data-ttu-id="eea60-200">В дереве разверните "Платежи = format.Root.Rows\Счет кредитора(счет кредитора)".</span><span class="sxs-lookup"><span data-stu-id="eea60-200">In the tree, expand 'Payments = format.Root.Rows\Creditor Account(CreditorAccount)'.</span></span>
22. <span data-ttu-id="eea60-201">В дереве разверните "Платежи = format.Root.Rows\Счет кредитора(счет кредитора)\Идентификация".</span><span class="sxs-lookup"><span data-stu-id="eea60-201">In the tree, expand 'Payments = format.Root.Rows\Creditor Account(CreditorAccount)\Identification'.</span></span>
23. <span data-ttu-id="eea60-202">В дереве выберите "Платежи = format.Root.Rows\Счет кредитора(счет кредитора)\Идентификация\IBAN".</span><span class="sxs-lookup"><span data-stu-id="eea60-202">In the tree, select 'Payments = format.Root.Rows\Creditor Account(CreditorAccount)\Identification\IBAN'.</span></span>
24. <span data-ttu-id="eea60-203">Щелкните "Связать".</span><span class="sxs-lookup"><span data-stu-id="eea60-203">Click Bind.</span></span>
25. <span data-ttu-id="eea60-204">Перейдите на вкладку "Проверки".</span><span class="sxs-lookup"><span data-stu-id="eea60-204">Click the Validations tab.</span></span>
26. <span data-ttu-id="eea60-205">Щелкните "Создать".</span><span class="sxs-lookup"><span data-stu-id="eea60-205">Click New.</span></span>
    * <span data-ttu-id="eea60-206">Добавьте новое правило проверки, которое отображает ошибку для любой строки в файле анализа, которая содержит недопустимый код IBAN.</span><span class="sxs-lookup"><span data-stu-id="eea60-206">Add a new validation rule that displays an error for any line in the parsing file that contains invalid IBAN code.</span></span>  
27. <span data-ttu-id="eea60-207">Щелкните "Изменить условие".</span><span class="sxs-lookup"><span data-stu-id="eea60-207">Click Edit condition.</span></span>
28. <span data-ttu-id="eea60-208">В дереве разверните check_codes.</span><span class="sxs-lookup"><span data-stu-id="eea60-208">In the tree, expand 'check_codes'.</span></span>
29. <span data-ttu-id="eea60-209">В дереве выберите "check_codes\verifyMOD1271_36".</span><span class="sxs-lookup"><span data-stu-id="eea60-209">In the tree, select 'check_codes\verifyMOD1271_36'.</span></span>
30. <span data-ttu-id="eea60-210">Щелкните "Добавить источник данных".</span><span class="sxs-lookup"><span data-stu-id="eea60-210">Click Add data source.</span></span>
31. <span data-ttu-id="eea60-211">В поле "Формула" введите check_codes.verifyMOD1271_36(.</span><span class="sxs-lookup"><span data-stu-id="eea60-211">In the Formula field, enter 'check_codes.verifyMOD1271_36('.</span></span>
    * <span data-ttu-id="eea60-212">check_codes.verifyMOD1271_36(</span><span class="sxs-lookup"><span data-stu-id="eea60-212">check_codes.verifyMOD1271_36(</span></span>  
32. <span data-ttu-id="eea60-213">В дереве разверните "формат".</span><span class="sxs-lookup"><span data-stu-id="eea60-213">In the tree, expand 'format'.</span></span>
33. <span data-ttu-id="eea60-214">В дереве разверните "формат\Корень: Последовательность(корень)".</span><span class="sxs-lookup"><span data-stu-id="eea60-214">In the tree, expand 'format\Root: Sequence(Root)'.</span></span>
34. <span data-ttu-id="eea60-215">В дереве разверните "формат\Корень: Последовательность(корень)\Строки: последовательность 1.. \* (строки)".</span><span class="sxs-lookup"><span data-stu-id="eea60-215">In the tree, expand 'format\Root: Sequence(Root)\Rows: Sequence 1..\* (Rows)'.</span></span>
35. <span data-ttu-id="eea60-216">В дереве разверните "формат\Корень: Последовательность(корень)\Строки: последовательность 1.. \* (строки)\Поля: последовательность 1..1 (поля)".</span><span class="sxs-lookup"><span data-stu-id="eea60-216">In the tree, expand 'format\Root: Sequence(Root)\Rows: Sequence 1..\* (Rows)\Fields: Sequence 1..1 (Fields)'.</span></span>
36. <span data-ttu-id="eea60-217">В дереве выберите "формат\Корень: Последовательность(корень)\Строки: последовательность 1.. \* (строки)\Поля: последовательность 1..1 (поля)\IBAN: строка(IBAN)".</span><span class="sxs-lookup"><span data-stu-id="eea60-217">In the tree, select 'format\Root: Sequence(Root)\Rows: Sequence 1..\* (Rows)\Fields: Sequence 1..1 (Fields)\IBAN: String(IBAN)'.</span></span>
37. <span data-ttu-id="eea60-218">Щелкните "Добавить источник данных".</span><span class="sxs-lookup"><span data-stu-id="eea60-218">Click Add data source.</span></span>
38. <span data-ttu-id="eea60-219">В поле "Формула" введите check_codes.verifyMOD1271_36(format.Root.Rows.Fields.IBAN).</span><span class="sxs-lookup"><span data-stu-id="eea60-219">In the Formula field, enter 'check_codes.verifyMOD1271_36(format.Root.Rows.Fields.IBAN)'.</span></span>
    * <span data-ttu-id="eea60-220">check_codes.verifyMOD1271_36(format.Root.Rows.Fields.IBAN)</span><span class="sxs-lookup"><span data-stu-id="eea60-220">check_codes.verifyMOD1271_36(format.Root.Rows.Fields.IBAN)</span></span>  
39. <span data-ttu-id="eea60-221">Нажмите кнопку "Сохранить".</span><span class="sxs-lookup"><span data-stu-id="eea60-221">Click Save.</span></span>
40. <span data-ttu-id="eea60-222">Закройте страницу.</span><span class="sxs-lookup"><span data-stu-id="eea60-222">Close the page.</span></span>
    * <span data-ttu-id="eea60-223">Условие проверки настроено для возврата значения FALSE для любого недопустимого кода IBAN путем вызова существующего метода verifyMOD1271_36 класса приложения ISO7064.</span><span class="sxs-lookup"><span data-stu-id="eea60-223">The validation condition has been configured to return FALSE for any invalid IBAN code by calling the existing method 'verifyMOD1271_36' of the application class 'ISO7064'.</span></span> <span data-ttu-id="eea60-224">Обратите внимание, что значение кода IBAN определяется динамически во время выполнения в качестве аргумента метода вызова на основе содержимого TXT-файла анализа.</span><span class="sxs-lookup"><span data-stu-id="eea60-224">Note that the value of the IBAN code is defined dynamically at run-time as the argument of the calling method based on the content of the parsing TXT file.</span></span>   
41. <span data-ttu-id="eea60-225">Нажмите кнопку "Изменить сообщение".</span><span class="sxs-lookup"><span data-stu-id="eea60-225">Click Edit message.</span></span>
42. <span data-ttu-id="eea60-226">В поле "Формула введите "CONCATENATE("Обнаружен недопустимый код IBAN:  ", format.Root.Rows.Fields.IBAN)".</span><span class="sxs-lookup"><span data-stu-id="eea60-226">In the Formula field, enter 'CONCATENATE("Invalid IBAN code has been found:  ", format.Root.Rows.Fields.IBAN)'.</span></span>
    * <span data-ttu-id="eea60-227">CONCATENATE("Обнаружен недопустимый код IBAN:  ", format.Root.Rows.Fields.IBAN)</span><span class="sxs-lookup"><span data-stu-id="eea60-227">CONCATENATE("Invalid IBAN code has been found:  ", format.Root.Rows.Fields.IBAN)</span></span>  
43. <span data-ttu-id="eea60-228">Нажмите кнопку "Сохранить".</span><span class="sxs-lookup"><span data-stu-id="eea60-228">Click Save.</span></span>
44. <span data-ttu-id="eea60-229">Закройте страницу.</span><span class="sxs-lookup"><span data-stu-id="eea60-229">Close the page.</span></span>
45. <span data-ttu-id="eea60-230">Нажмите кнопку "Сохранить".</span><span class="sxs-lookup"><span data-stu-id="eea60-230">Click Save.</span></span>
46. <span data-ttu-id="eea60-231">Закройте страницу.</span><span class="sxs-lookup"><span data-stu-id="eea60-231">Close the page.</span></span>

## <a name="run-the-format-mapping"></a><span data-ttu-id="eea60-232">Выполнение сопоставления формата</span><span class="sxs-lookup"><span data-stu-id="eea60-232">Run the format mapping</span></span>
<span data-ttu-id="eea60-233">В целях тестирования выполните сопоставление формата с помощью загруженного файла SampleIncomingMessage.txt.</span><span class="sxs-lookup"><span data-stu-id="eea60-233">For testing purposes, execute the format mapping using the SampleIncomingMessage.txt file that you downloaded.</span></span> <span data-ttu-id="eea60-234">Созданные выходные данные включают данные, импортируемые из выбранного TXT-файла и заполняющие модель пользовательских данных в реальном импорте.</span><span class="sxs-lookup"><span data-stu-id="eea60-234">The generated output includes data that will be imported from the selected TXT file and populated to the custom data model during the real import.</span></span>   
1. <span data-ttu-id="eea60-235">Щелкните "Выполнить".</span><span class="sxs-lookup"><span data-stu-id="eea60-235">Click Run.</span></span>
    * <span data-ttu-id="eea60-236">Нажмите кнопку "Обзор" и перейдите к ранее загруженному файлу SampleIncomingMessage.txt.</span><span class="sxs-lookup"><span data-stu-id="eea60-236">Click Browse and navigate to the SampleIncomingMessage.txt file that you previously downloaded.</span></span>  
2. <span data-ttu-id="eea60-237">Нажмите кнопку "OК".</span><span class="sxs-lookup"><span data-stu-id="eea60-237">Click OK.</span></span>
    * <span data-ttu-id="eea60-238">Просмотрите выходные данные в формате XML, представляющем данные, которые были импортированы из выбранного файла, а затем перенесены в модель данных.</span><span class="sxs-lookup"><span data-stu-id="eea60-238">Review the output in XML format that represents the data that has been imported from the selected file and ported to the data model.</span></span> <span data-ttu-id="eea60-239">Обратите внимание, что были обработаны только 3 строки импортированного TXT-файла.</span><span class="sxs-lookup"><span data-stu-id="eea60-239">Note that only 3 lines of the imported TXT file were processed.</span></span> <span data-ttu-id="eea60-240">Недопустимый код IBAN в строке 4 был пропущен, и отобразилось сообщение об ошибке в журнале Infolog.</span><span class="sxs-lookup"><span data-stu-id="eea60-240">The IBAN code on line 4 that is not valid was skipped and an error message is provided in the Infolog.</span></span>  



[!INCLUDE[footer-include](../../../../includes/footer-banner.md)]