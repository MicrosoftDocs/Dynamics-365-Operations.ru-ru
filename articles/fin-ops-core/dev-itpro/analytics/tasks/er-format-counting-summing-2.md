---
title: Электронная отчетность — Настройка формата для инвентаризации и суммирования (Часть 2. Настройка вычислений)
description: В этой теме описывается, как настроить формат электронный отчетности для выполнения инвентаризации и суммирования на основе данных уже созданного текстового вывода. (Часть 2)
author: NickSelin
manager: AnnBe
ms.date: 08/29/2018
ms.topic: business-process
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ERWorkspace, ERSolutionTable, ERSolutionCreateDropDialog, EROperationDesigner, ERDataSourceAddDropDialog, ERExpressionDesignerFormula
audience: Application User
ms.reviewer: kfend
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: Version 7.0.0
ms.openlocfilehash: 6215fe1f32bcb4833bd009b7c33e09edbba17817
ms.sourcegitcommit: 5192cfaedfd861faea63d8954d7bcc500608a225
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/30/2021
ms.locfileid: "5093005"
---
# <a name="er-configure-format-to-do-counting-and-summing-part-2---configure-computations"></a>Электронная отчетность — Настройка формата для инвентаризации и суммирования (Часть 2. Настройка вычислений)

[!include [banner](../../includes/banner.md)]

В следующих шагах поясняется, как пользователь, которому назначена роль системного администратора или разработчика электронной отчетности, может настроить формат электронной отчетности (ER) для выполнения инвентаризации и суммирования на основе данных уже созданных текстовых выходных данных. Эти шаги можно выполнить в любой компании.

Для выполнения этих шагов необходимо сначала выполнить шаги из процедуры "Электронная отчетность — Настройка формата для инвентаризации и суммирования (Часть 1. Создание формата)".

Эта процедура для функции, которая была добавлена в версии 1611 Dynamics 365 for Operations.


## <a name="create-a-format-configuration-to-add-counting-and-summing-details"></a>Создание конфигурации формата для добавления сведений об инвентаризации и суммировании
1. Перейдите в раздел "Управление организацией" > "Рабочие области" > "Электронная отчетность".
2. Щелкните "Конфигурации отчетности".
3. В дереве разверните узел "Модель Интрастат".
4. В дереве выберите "Модель Интрастат\Интрастат (DE)".
    * Допустим, требуется настроить формат, предоставленный Microsoft, добавив строки со сводными сведениями в конец отчета Интрастат. Это следует сделать, создав наш собственный экземпляр на основе конфигурации Интрастат из экземпляра Microsoft для внесения изменений.  
5. Щелкните "Создать конфигурацию", чтобы открыть ниспадающее диалоговое окно.
6. В поле "Создать" введите "Производное от имени: Интрастат (DE), Microsoft".
7. В поле "Имя" введите "Интрастат (DE) с инвентаризацией и суммированием".
8. Нажмите Создать конфигурацию.

## <a name="configure-this-report-to-do-counting-and-summation-based-on-output-details"></a>Настройте этот отчет, чтобы выполнять инвентаризацию и суммирование на основе выходных сведений
1. Выберите Конструктор.
2. Выберите "Да" в поле "Сбор сведений о результате".
    * Этот флаг активируется во время выполнения процесса сбора выходных сведения для создания файла Интрастат.  
    * Необходимо выполнять инвентаризацию для различных направлений Интрастат, поэтому следует добавить специальное перечисление модели в список источников данных конфигурации этого формата.  
3. Перейдите на вкладку "Сопоставление".
4. Щелкните "Добавить корень", чтобы открыть раскрывающееся диалоговое окно.
5. В дереве выберите "Модель данных\Перечисление".
6. В поле "Имя" введите "Направление".
7. В поле "Перечисление модели" введите или выберите значение.
    * Выберите значение "Направление".  
8. Нажмите кнопку "OК".
9. Щелкните "Добавить корень", чтобы открыть раскрывающееся диалоговое окно.
10. В дереве выберите "Функции\Вычисляемое поле".
11. В поле "Имя" введите "$BlockName".
12. Щелкните "Изменить формулу".
13. В поле "Формула" введите "блок".
14. Нажмите кнопку "Сохранить".
15. Закройте страницу.
16. Нажмите кнопку "OК".
17. Щелкните "Добавить корень", чтобы открыть раскрывающееся диалоговое окно.
18. В дереве выберите "Функции\Вычисляемое поле".
19. В поле "Имя" введите "$RecName".
20. Щелкните "Изменить формулу".
21. В поле "Формула" введите "запись".
22. Нажмите кнопку "Сохранить".
23. Закройте страницу.
24. Нажмите кнопку "OК".
25. Щелкните "Добавить корень", чтобы открыть раскрывающееся диалоговое окно.
26. В дереве выберите "Функции\Вычисляемое поле".
27. В поле "Имя" введите "$InvName".
28. Щелкните "Изменить формулу".
29. В поле "Формула" введите "InvoicedAmountEUR".
30. Нажмите кнопку "Сохранить".
31. Закройте страницу.
32. Нажмите кнопку "OК".
33. В дереве выберите "Интрастат\Данные".
34. Нажмите кнопку "Изменить" для поля "Имя ключа собранных данных"
35. Щелкните "Добавить источник данных".
    * $BlockName  
36. Нажмите кнопку Сохранить.
37. Закройте страницу.
38. Нажмите кнопку "Изменить" для поля "Значение ключа собранных данных".
39. В поле "Формула" введите "IF(Intrastat.CommodityRecord.Direction=Direction.Import, "Import", "Export")".
    * IF(Intrastat.CommodityRecord.Direction=Direction.Import, "Import", "Export")  
40. Нажмите кнопку "Сохранить".
41. Закройте страницу.
    * Подсчитайте строки в этой последовательности. Результаты будут использоваться с именем "блок" отдельно для различных направлений. Значение "Импорт" будет использоваться для всех проводок поступлений Интрастат. Значение "Экспорт" будет использоваться для всех проводок отправок Интрастат. Можно считать это виртуальной таблицей Excel. Для каждой проводки имеется строка, в которой первый столбец "блок" заполнен значениями "Импорт" и "Экспорт" соответственно.  
42. В дереве разверните узел "Интрастат\Данные: последовательность".
43. В дереве выберите узел "Интрастат\Данные: последовательность\Поступления?".
44. Нажмите кнопку "Изменить" для поля "Имя ключа собранных данных".
    * Подсчитайте строки в этой последовательности. Результаты будут запомнены с использованием имени "запись".  
45. В дереве выберите "$RecName".
46. Щелкните "Добавить источник данных".
47. Нажмите кнопку Сохранить.
48. Закройте страницу.
49. Нажмите кнопку "Изменить" для поля "Значение ключа собранных данных"
50. В поле "Формула" введите "Intrastat.CommodityRecord.CommodityCode".
51. Нажмите кнопку "Сохранить".
52. Закройте страницу.
    * Подсчитайте строки в этой последовательности. Результаты будут использоваться с именем "запись" отдельно для кодов товара. Можно считать это виртуальной таблицей Excel. Для каждой проводки имеется строка, в которой столбец "блок" заполняется значениями "Импорт" и "Экспорт" соответственно, а второй блок "запись" заполняется значением кода товара.  
53. В дереве выберите узел "Интрастат\Данные: последовательность\Отправки?".
54. Нажмите кнопку "Изменить" для поля "Имя ключа собранных данных"
55. В дереве выберите "$RecName".
56. Щелкните "Добавить источник данных".
57. Нажмите кнопку Сохранить.
58. Закройте страницу.
59. Нажмите кнопку "Изменить" для поля "Значение ключа собранных данных".
60. В поле "Формула" введите "Intrastat.CommodityRecord.CommodityCode".
61. Нажмите кнопку Сохранить.
62. Закройте страницу.
63. В дереве разверните узел "Интрастат\Данные: последовательность\Отправки: последовательность?".
64. В дереве разверните узел "Интрастат\Данные: последовательность\Отправки: последовательность?\Запись = Intrastat.CommodityRecord".
65. Перейдите на вкладку "Формат".
66. В дереве выберите "Интрастат\Данные\Отправки\Запись\Сумма накладной в Евро".
67. Перейдите на вкладку "Сопоставление".
68. Нажмите кнопку "Изменить" для поля "Имя ключа собранных данных".
69. В дереве выберите "$InvName".
70. Щелкните "Добавить источник данных".
71. Нажмите кнопку "Сохранить".
72. Закройте страницу.
    * Просуммируйте значения сумм, по которым выставлены накладные, для строк в этой последовательности. Результаты будут использоваться с именем "InvoicedAmountEUR" отдельно для различных направлений Интрастат и кодов товара. Можно считать это виртуальным созданием таблицы Excel. Для каждой проводки имеется строка, в которой первый столбец "блок" заполнен значениями "Импорт" и "Экспорт" соответственно. Второй блок "запись" заполняется значением кода товара, а третий столбец "InvoicedAmountEUR" заполняется значением суммы из накладной.  
73. В дереве разверните узел "Интрастат\Данные\Поступления?".
74. В дереве разверните узел "Интрастат\Данные\Поступления?\Запись = Intrastat.CommodityRecord".
75. Перейдите на вкладку "Формат".
76. В дереве выберите "Интрастат\Данные\Поступления\Запись\Сумма накладной в Евро".
77. Перейдите на вкладку "Сопоставление".
78. Нажмите кнопку "Изменить" для поля "Имя ключа собранных данных".
79. В дереве выберите "$InvName".
80. Щелкните "Добавить источник данных".
81. Нажмите кнопку "Сохранить".
82. Закройте страницу.
83. Нажмите кнопку "Сохранить".
84. Закройте страницу.

