---
title: Электронная отчетность — Обновление формата путем принятия новой базовой версии данного формата
description: В этой статье объясняется, как поддерживать конфигурацию формата электронной отчетности (ER).
author: kfend
ms.date: 08/29/2018
ms.topic: business-process
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: kfend
ms.search.region: Global
ms.author: filatovm
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: Version 7.0.0
ms.search.form: ERWorkspace, ERVendorPart, ERSolutionTable, ERSolutionCreateDropDialog, EROperationDesigner, ERComponentTypeDropDialog
ms.openlocfilehash: 2cac3a88b62198bd5d85529dc27acb7a06c34b77
ms.sourcegitcommit: 87e727005399c82cbb6509f5ce9fb33d18928d30
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/12/2022
ms.locfileid: "9290105"
---
# <a name="er-upgrade-your-format-by-adopting-a-new-base-version-of-that-format"></a>Электронная отчетность — Обновление формата путем принятия новой базовой версии данного формата

[!include [banner](../../includes/banner.md)]

В следующих шагах поясняется, как пользователь с ролью "Системный администратор" или "Разработчик электронной отчетности" может вести конфигурацию формата "Электронная отчетность (ER)". В этой процедуре описывается, как можно создать пользовательскую версию формата на основе формата, полученного от поставщика конфигурации. В ней также описывается, как настроить новую базовую версию данного формата.

Для выполнения этих шагов сначала необходимо выполнить шаги в процедурах "Создание поставщика конфигурации и пометка его как активного" и "Использование созданного формата для создания электронных документов для платежей". Эти шаги можно выполнить в компании GBSI.

## <a name="select-format-configuration-for-customization"></a>Выбор конфигурации формата для настройки
1. Перейдите в раздел "Управление организацией" > "Рабочие области" > "Электронная отчетность".

    В этом примере демонстрационная компания Litware, Inc. (https://www.litware.com) будет выступать в роли поставщика конфигурации, который поддерживает конфигурации форматов для электронных платежей для определенной страны.    Демонстрационная компания Proseware, Inc. (http://www.proseware.com) будет выступать в роли потребителя конфигурации формата, предоставленной Litware, Inc. Proseware, Inc. использует форматы в определенных регионах данной страны.  
2. Щелкните "Конфигурации отчетности".
3. Щелкните "Показать фильтры".
4. Примените следующие фильтры: введите значение фильтра "BACS (Соединенное Королевство, вымышленный)" в поле "Имя", используя оператор фильтра "начинается с".
  
    Выбранная конфигурация формата BACS (Соединенное Королевство, вымышленный) принадлежит поставщику Litware, Inc.  

5. Щелкните "Показать фильтры".
6. В списке найдите и выберите требуемую запись.

    Версия формата со статусом "Завершено" будет использоваться компанией Proseware, Inc. для пользовательской настройки.  

## <a name="create-a-new-configuration-for-your-custom-format-of-electronic-document"></a>Создание новой конфигурации для пользовательского формата электронного документа
Proseware, Inc.получила версию 1.1 конфигурации BACS (Соединенное Королевство, вымышленный), которая содержит исходный формат для создания электронных платежных документов, от Litware, Inc. в соответствии со своей подпиской на обслуживание. Proseware, Inc. желает начать использовать ее как стандарт для своей страны, но требуется некоторая настройка для поддержки определенных региональных требований. Proseware, Inc. также желает сохранить возможность обновления пользовательского формата после выпуска его новой версии (с изменениями для поддержки новых требований, существующих в конкретной стране) компанией Litware, Inc., и при этом проводить эти обновления с минимальными затратами.  

Для этого Proseware, Inc. необходимо создать конфигурацию, используя конфигурацию BACS (Соединенное Королевство, вымышленный) в качестве основы.  

1. Закройте страницу.
2. Выберите Proseware, Inc., чтобы сделать эту компанию активным поставщиком.
3. Щелкните "Установить как активное".
4. Щелкните "Конфигурации отчетности".
5. В дереве разверните узел "Платежи (упрощенная модель)".
6. В дереве выберите "Платежи (упрощенная модель)\BACS (Соединенное Королевство, вымышленный)".

    Выберите конфигурацию BACS (Соединенное Королевство, вымышленный) от Litware, Inc. Proseware, Inc. будет использовать в качестве основы для своей версии версию 1.1.  

7. Щелкните "Создать конфигурацию", чтобы открыть ниспадающее диалоговое окно.

    Это позволяет создать новую конфигурацию для пользовательского формата платежей.  

8. В поле "Создать" выберите "Производное от имени: BACS (Соединенное Королевство, вымышленный), Litware, Inc.".

    Выберите параметр "Получить", чтобы подтвердить использование BACS (Соединенное Королевство, вымышленный) как базу для создания пользовательской версии.  

9. В поле "Имя" введите "BACS (Соединенное Королевство, вымышленный, пользовательский)".
10. В поле "Описание" введите "Формат платежа поставщикам BACS (Соединенное Королевство, вымышленный, пользовательский)".

    Активный поставщик конфигурации (Proseware, Inc.) вводится здесь автоматически. Этот поставщик сможет обновлять эту конфигурацию. Другие поставщики могут использовать эту конфигурация, но не смогут ее обновлять.  

11. Нажмите Создать конфигурацию.

## <a name="customize-your-format-for-the-electronic-document"></a>Настройка формата электронного документа
1. Выберите Конструктор.
2. Щелкните "Развернуть/свернуть".
3. Щелкните "Развернуть/свернуть".
4. В дереве выберите "Xml\Сообщение\Платежи\Номенклатура\Поставщик\Банк".
5. Щелкните "Добавить", чтобы открыть раскрывающееся диалоговое окно.
6. В дереве выберите "XML\Элемент".
7. В поле "Имя" введите "IBAN".
8. Нажмите кнопку "OК".
9. В дереве выберите "Xml\Сообщение\Платежи\Номенклатура\Поставщик\Банк\IBAN".
10. Щелкните "Добавить", чтобы открыть раскрывающееся диалоговое окно.
11. В дереве выберите "Текст\строка".
12. Нажмите кнопку OK.
13. В дереве выберите "Xml\Сообщение\Платежи\Номенклатура\Поставщик\Имя\Строка".
14. В поле "Максимальная длина" введите "60".
15. Перейдите на вкладку "Сопоставление".
16. В дереве разверните узел "model".
17. В дереве разверните узел "model\Payments".
18. В дереве разверните узел "модель\Платежи\Кредитор".
19. В дереве разверните узел "модель\Платежи\Кредитор\Счет".
20. В дереве выберите "модель\Платежи\Кредитор\Счет\IBAN".
21. В дереве выберите "Xml\Сообщение\Платежи\Номенклатура = модель.Платежи\Поставщик\Банк\IBAN\Строка".
22. Щелкните "Связать".
23. Нажмите кнопку "Сохранить".

## <a name="validate-the-customized-format"></a>Проверка настроенного формата
1. Щелкните "Проверить".

    Проверьте настроенный макет формата и изменения сопоставления данных, чтобы убедиться, что все привязки работают правильно.  

2. Закройте страницу.

## <a name="change-the-status-of-the-current-version-of-the-custom-format-configuration"></a>Изменение статуса текущей версии конфигурации пользовательского формата
Измените статус созданной конфигурации формата с "Черновик" на "Завершено", чтобы сделать ее доступной для создания платежных документов.  

1. Щелкните "Изменить статус".

    Обратите внимание, что текущая версия выбранной конфигурации имеет статус "Черновик".  

2. Щелкните "Завершить".
3. В поле "Описание" введите значение.
4. Нажмите кнопку "OК".
5. В списке найдите и выберите требуемую запись.

    Обратите внимание, что созданная конфигурация сохраняется как завершенная версия 1.1.1. Это означает, что это версия 1 пользовательского формата BACS (Соединенное Королевство, вымышленный, пользовательский), которая основана на версии 1 формата BACS (Соединенное Королевство, вымышленный), которая основана на версии 1 модели данных платежей (упрощенной модели).  

## <a name="test-the-customized-format-to-generate-payment-files"></a>Проверка настроенного формата для создания файлов платежей
Выполните шаги, описанные в процедуре "Использование созданного формата для создания электронных документов для платежей", в параллельном сеансе финансов и операций. Выберите формат BACS (Соединенное Королевство, вымышленный, пользовательский) в параметрах метода электронного платежа. Убедитесь, что созданный файл платежа содержит недавно введенный узел XML, представляющий код IBAN в соответствии с региональными требованиями.  

## <a name="update-the-existing-country-specific-configuration"></a>Обновление существующей конфигурации для определенной страны
Litware, Inc. желает обновить конфигурацию BACS (Соединенное Королевство, вымышленный) и принять новые страновые требования для управления форматом электронных документов. Позже этот будет включено в новую версию этой конфигурации, которая будет предлагаться подписчикам службы, включая Proseware, Inc.  

В реальных процессах, связанных с предоставлением услуг, каждая новая версия BACS (Соединенное Королевство, вымышленный) может быть импортирована компанией Proseware, Inc. из репозитория конфигураций Litware, Inc. в LCS. В этой процедуре мы смоделируем это, обновив BACS (Соединенное Королевство, вымышленный) от имени поставщика услуг.  

1. Закройте страницу.
2. Выберите поставщика Litware, Inc.
3. Щелкните "Установить как активное".
4. Щелкните "Конфигурации отчетности".
5. В дереве разверните узел "Платежи (упрощенная модель)".
6. В дереве выберите "Платежи (упрощенная модель)\BACS (Соединенное Королевство, вымышленный)".

    Черновая версия, которой владеет поставщик BACS (Соединенное Королевство, вымышленный) Litware, Inc., выбирается для внесения изменений для поддержки новых требований для определенной страны.  

## <a name="localize-the-base-format-of-the-electronic-document"></a>Локализация базового формата электронного документа
Предположим, что имеются новые характерные для данной страны особенности, которые должны поддерживаться Litware, Inc.:  

- Значение для кода SWIFT счета кредитора в каждой проводке по оплате.
- Ограничение в 100 символов для длины текста имени поставщика при создании файла.  
- Новые требования для определенной страны  
- Выберите черновую версию необходимой конфигурации, чтобы применить необходимые изменения.  


1. Выберите Конструктор.
2. Щелкните "Развернуть/свернуть".
3. Щелкните "Развернуть/свернуть".
4. В дереве выберите "Xml\Сообщение\Платежи\Номенклатура\Поставщик\Банк".
5. Щелкните "Добавить", чтобы открыть раскрывающееся диалоговое окно.
6. В дереве выберите "XML\Элемент".
7. В поле "Имя" введите "SWIFT".
8. Нажмите кнопку "OК".
9. В дереве выберите "Xml\Сообщение\Платежи\Номенклатура\Поставщик\Банк\SWIFT".
10. Щелкните "Добавить", чтобы открыть раскрывающееся диалоговое окно.
11. В дереве выберите "Текст\строка".
12. Нажмите кнопку OK.
13. В дереве выберите "Xml\Сообщение\Платежи\Номенклатура\Поставщик\Имя\Строка".
14. В поле "Максимальная длина" введите "100".
15. Перейдите на вкладку "Сопоставление".
16. В дереве разверните узел "model".
17. В дереве разверните узел "model\Payments".
18. В дереве разверните узел "модель\Платежи\Кредитор".
19. В дереве разверните узел "модель\Платежи\Агент".
20. В дереве выберите "модель\Платежи\Кредитор\Агент\SWIFT".
21. В дереве выберите "Xml\Сообщение\Платежи\Номенклатура = модель.Платежи\Поставщик\Банк\SWIFT\Строка".
22. Щелкните "Связать".
23. Нажмите кнопку "Сохранить".

## <a name="validate-the-localized-format"></a>Проверка локализованного формата
1. Щелкните "Проверить".
2. Закройте страницу.

## <a name="change-the-status-of-the-current-version-of-the-base-format-configuration"></a>Изменение статуса текущей версии конфигурации базового формата
Измените статус обновленной конфигурации базового формата с "Черновик" на "Завершено", чтобы сделать ее доступной для создания платежных документов и обновлений производных конфигураций форматов.  

1. Щелкните "Изменить статус".

    Обратите внимание, что текущая версия выбранной конфигурации имеет статус "Черновик".  

2. Щелкните "Завершить".
3. В поле "Описание" введите значение.
4. Нажмите кнопку "OК".
5. В списке найдите и выберите требуемую запись.

## <a name="change-the-base-version-for-the-custom-format-configuration"></a>Изменение базовой версии конфигурации пользовательского формата

Proseware, Inc. получает уведомление, что новая версия 1.2 конфигурации BACS (Соединенное Королевство, вымышленный) доступна для создания электронных платежных документов в соответствии с последними объявленными требованиями для конкретной страны. Proseware, Inc. желает начать использовать ее как стандарт для этой страны.  

Для Proseware, Inc. необходимо изменить версию базовой конфигурации для пользовательской конфигурации BACS (Соединенное Королевство, вымышленный, пользовательский). Вместо версии 1.1 BACS (Соединенное Королевство, вымышленный) используйте новую версию 1.2.  

1. Перейдите в раздел "Управление организацией" > "Рабочие области" > "Электронная отчетность".
2. Выберите поставщика Proseware, Inc., чтобы пометить его в качестве активного.
3. Щелкните "Установить как активное".
4. Щелкните "Конфигурации отчетности".
5. В дереве разверните узел "Платежи (упрощенная модель)".
6. В дереве разверните узел "Платежи (упрощенная модель)\BACS (Соединенное Королевство, вымышленный)".
7. В дереве выберите "Платежи (упрощенная модель)\BACS (Соединенное Королевство, вымышленный)\BACS (Соединенное Королевство, вымышленный, пользовательский)".

    Выберите конфигурацию BACS (Соединенное Королевство, вымышленный, пользовательский), которой владеет Proseware, Inc.  

    Используйте черновую версию выбранной конфигурации, чтобы применить необходимые изменения.  

8. Щелкните "Повторно разместить".

    Выберите новую версию 1.2 базовой конфигурации для использования в качестве новой базы для обновления конфигурации.  

9. Нажмите кнопку "OК".

    Обратите внимание, что были обнаружены конфликты между объединением пользовательской версии и новой базовой версии, представляющей некоторые изменения формата, которые невозможно объединить автоматически.  

## <a name="resolve-rebase-conflicts"></a>Разрешение конфликтов повторного размещения
1. Выберите Конструктор.
    
    Обратите внимание, что изменения лимита длины текста имени поставщика не могут быть разрешены автоматически. Поэтому это отображается в списке конфликтов. Для каждого конфликта типа "Обновление" доступны следующие варианты: - Применить предыдущее базовое значение (кнопка вверху сетки), чтобы использовать предыдущее значение базовой версии (в нашем случае это 0).  - Применить базовое значение (кнопка вверху сетки), чтобы использовать новое значение базовой версии (в нашем случае это 100).  - Сохранить собственное (пользовательское) значение (в данном случае — 60).  Щелкните "Применить базовое значение", чтобы применить лимит определенной страны равный 100 символам для длины текста имени поставщика.  

    Обратите внимание, что Proseware, Inc. и Litware, Inc. имеют пользовательскую и локальную версии данного формата, использующие коды IBAN и SWIFT со связанными компонентами, которые автоматически объединяются в формат управления.  

2. Щелкните "Применить базовое значение".

    Щелкните "Применить базовое значение", чтобы применить лимит определенной страны равный 100 символам для имен поставщиков.  

3. Нажмите кнопку "Сохранить".

    В результате сохранения формата будут разрешены конфликты из списка конфликтов.  

4. Закройте страницу.

## <a name="change-the-status-of-the-new-version-of-the-custom-format-configuration"></a>Изменение статуса новой версии конфигурации пользовательского формата
1. Щелкните "Изменить статус".

    Измените статус обновленной конфигурации пользовательского формата с "Черновик" на "Завершено". После этого конфигурация формата станет доступна для создания платежных документов. Обратите внимание, что текущая версия выбранной конфигурации имеет статус "Черновик".  

2. Щелкните "Завершить".
3. В поле "Описание" введите значение.
4. Нажмите кнопку "OК".

    Обратите внимание, что созданная конфигурация сохраняется как полная версия 1.2.2: версия 2 базового формата BACS (Соединенное Королевство, вымышленный, пользовательский), которая основана на версии 2 базового формата BACS (Соединенное Королевство, вымышленный), который основан на версии 1 модели данных платежей (упрощенной модели).  

## <a name="test-the-customized-format-for-payment-files-generation"></a>Проверка настроенного формата для создания файлов платежей
Выполните шаги, описанные в процедуре "Использование созданного формата для создания электронных документов для платежей", в параллельном сеансе финансов и операций. Выберите созданный формат BACS (Соединенное Королевство, вымышленный, пользовательский) в параметрах метода электронного платежа. Убедитесь, что созданный файл платежа содержит недавно введенный компанией Proseware, Inc. узел XML, представляющий код счета IBAN в соответствии с региональными требованиями. Файл также должен содержать недавно введенный компанией Litware, Inc. узел XML, представляющий банковский код SWIFT в соответствии со страновыми требованиями.  



[!INCLUDE[footer-include](../../../../includes/footer-banner.md)]
