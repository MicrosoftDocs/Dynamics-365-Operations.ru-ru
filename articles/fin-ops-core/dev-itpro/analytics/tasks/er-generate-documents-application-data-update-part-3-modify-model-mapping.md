---
title: Изменение моделей и сопоставлений для формирования документов, содержащих данные приложений
description: В этой теме описано, как разработать конфигурации электронной отчетности для создания электронного документа и обновления данных приложений. (Часть 2 — Создание документов).
author: NickSelin
manager: AnnBe
ms.date: 06/19/2017
ms.topic: business-process
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: kfend
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 025429c8e6775d20634703853df04d63c0651b98
ms.sourcegitcommit: 5192cfaedfd861faea63d8954d7bcc500608a225
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/30/2021
ms.locfileid: "5092905"
---
# <a name="modify-models-and-mappings-to-generate-documents-that-have-application-data"></a>Изменение моделей и сопоставлений для формирования документов, содержащих данные приложений

[!include [banner](../../includes/banner.md)]

Для выполнения действий в этой процедуре необходимо сначала выполнить процедуру "Электронная отчетность — Формирование документов с обновлением данных приложения (Часть 2. Формирование документов)". 

В этой процедуре поясняется разработка конфигураций электронной отчетности для формирования электронного документа и обновления данных приложения. В этой процедуре вам предстоит изменить конфигурации электронной отчетности, чтобы начать использовать их для формирования электронных документов и обновления данных приложения. Эта процедура предназначена для пользователей, которым назначена роль "Системный администратор" или "Разработчик электронной отчетности". Действия можно выполнять с использованием набора данных DEMF.


## <a name="modify-data-model"></a>Изменение модели данных
1. Перейдите в раздел "Управление организацией" > "Электронная отчетность" > "Конфигурации".
2. В дереве выберите "Intrastat (model)".
    * Вам предстоит расширить способы использования этой модели данных. Помимо использования ее в качестве источника данных для формирования отчета Интрастат, модель данных будет использоваться для сбора сведений о процессе составления отчетности Интрастат. Эти сведения затем будут использоваться для обновления данных приложения.   
3. Выберите Конструктор.
4. Щелкните "Создать", чтобы открыть раскрывающееся диалоговое окно.
5. В поле "Новый узел как" введите "Корень модели".
6. В поле "Имя" введите "Для обновления данных приложения".
    * Для обновления данных приложения  
7. Нажмите кнопку Добавить.
8. В дереве выберите "Для обновления данных приложения".
    * Этот новый корневой элемент добавляется для задания потока данных для перемещения данных из отчета Интрастат (используемого в качестве источника данных) в таблицы приложения (место назначения обновления). Обратите внимание, что необходимо использовать разные корневые элементы для получения данных, разнесенных в исходящий документ, и для получения данных из документа, используемых для обновления данных приложения.   
9. Щелкните "Создать", чтобы открыть раскрывающееся диалоговое окно.
10. В поле "Имя" введите "Заголовок архива".
    * Заголовок архива  
11. В поле "Тип элемента" выберите "Список записей".
12. Нажмите кнопку Добавить.
    * Поскольку вы будете создавать по записи для каждого формируемого отчета Интрастат, необходимо создать для этого новый элемент.  
13. Щелкните "Создать", чтобы открыть раскрывающееся диалоговое окно.
14. В поле "Имя" введите "Имя файла".
    * Имя файла  
15. В поле "Тип элемента" выберите "Строка".
16. Нажмите кнопку Добавить.
17. Щелкните "Создать", чтобы открыть раскрывающееся диалоговое окно.
18. В поле "Имя" введите "Число строк".
    * Число строк  
19. В поле "Тип элемента" выберите "Целочисленный".
20. Нажмите кнопку Добавить.
    * Добавьте этот элемент, чтобы он представлял число проводок Интрастат, включаемых в отчет в текущем процессе составления отчетности.  
21. Щелкните "Создать", чтобы открыть раскрывающееся диалоговое окно.
22. В поле "Имя" введите "Строки архива".
    * Строки архива  
23. В поле "Тип элемента" выберите "Список записей".
24. Нажмите кнопку Добавить.
    * Добавьте этот элемент, чтобы он представлял список проводок Интрастат, включаемых в отчет в текущем процессе составления отчетности.  
25. Щелкните "Создать", чтобы открыть раскрывающееся диалоговое окно.
26. В поле "Имя" введите "Сумма".
    * Сумма, руб.  
27. В поле "Тип элемента" выберите "Вещественный".
28. Нажмите кнопку Добавить.
29. Щелкните "Создать", чтобы открыть раскрывающееся диалоговое окно.
30. В поле "Имя" введите "Код записи товара".
    * Код записи товара  
31. В поле "Тип элемента" выберите "Int64".
32. Нажмите кнопку Добавить.
33. Щелкните "Создать", чтобы открыть раскрывающееся диалоговое окно.
34. В поле "Имя" введите "Код номенклатуры:".
    * Код номенклатуры  
35. В поле "Тип элемента" выберите "Строка".
36. Нажмите кнопку Добавить.
37. Нажмите кнопку "Сохранить".
38. Закройте страницу.

## <a name="modify-model-mapping"></a>Изменение сопоставления модели
1. В дереве разверните узел "Intrastat (model)".
2. В дереве выберите "Intrastat (model)\Intrastat (mapping)".
    * Изменение существующее сопоставление модели, чтобы начать использовать его для обновления данных приложения и для архивирования сведений о составлении отчетности Интрастат.  
3. Выберите Конструктор.
4. Щелкните "Создать".
5. В поле "Имя" введите "Обновить архив".
    * Обновить архив  
6. В поле "Направление" выберите "В место назначения".
7. Нажмите кнопку "Сохранить".
    * Это новое сопоставление задает поток данных для перемещения данных (сведений о составлении отчетности Интрастат) из модели данных в таблицы приложения (место назначения обновления). Обратите внимание, что для получения данных из приложения для процесса составления отчетности и для использования данных из модели данных для обновления данных приложения необходимо использовать разные корневые элементы модели.   
8. Выберите Конструктор.
9. В дереве выберите "Модель данных\Модель данных".
    * Добавьте требуемый источник данных. Это модель данных, которая содержит сведения о включенных в отчет проводках Интрастат, которые необходимо архивировать.  
10. Щелкните "Добавить корень".
11. В поле "Имя" введите "модель".
    * модель  
12. В поле "Определение" введите или выберите значение "Для обновления данных приложения".
    * Для обновления данных приложения  
13. Нажмите кнопку "OК".
14. В дереве разверните узел "model".
15. В дереве выберите "Функции\Вычисляемое поле".
16. В дереве выберите "модель\Заголовок архива".
17. Нажмите кнопку Добавить.
    * Поскольку для архивирования необходимо перечислить включенные в отчет проводки Интрастат, необходимо добавить соответствующий источник данных.  
18. В поле "Имя" введите "Перечисленные строки".
    * Перечисленные строки  
19. Щелкните "Изменить формулу".
20. В дереве выберите "Список\ENUMERATE".
21. Щелкните "Добавить функцию".
22. В дереве разверните узел "model".
23. В дереве разверните "модель\Заголовок архива".
24. В дереве выберите "модель\Заголовок архива\Строки архива".
25. Щелкните "Добавить источник данных".
26. В поле "Формула" введите "ENUMERATE(модель.'Заголовок архива'.'Строки архива')".
    * ENUMERATE(модель.'Заголовок архива'.'Строки архива')  
27. Нажмите кнопку "Сохранить".
28. Закройте страницу.
29. Нажмите кнопку "OК".
30. Щелкните "Добавить место назначения".
    * Добавьте таблицы приложения в качестве необходимых мест назначения, требующих обновления сведений об архивации проводок Интрастат, включенных в отчет.  
31. В поле "Имя" введите "Архив".
    * Архивировать  
32. В поле "Имя таблицы" введите "IntrastatArchiveGeneral".
    * IntrastatArchiveGeneral  
    * Оставьте действие с записью "Вставка", чтобы вы могли добавлять записи во время архивирования сведений о каждом процессе подготовки отчетности Интрастат.  
33. Выберите "Да" в поле "Записывать в infolog".
    * Выберите "Да", чтобы получать информацию о проблемах, возникающих при обновлении данных приложения.  
34. Выберите "Да" в поле "Пропустить проверку действия с записью".
    * Выберите "Да", чтобы подавить ошибки проверки, связанные с пустым полем "Код архива Интрастат". Это будет делаться после добавления записей на основании параметров порядкового номера, настроенных для этой таблицы в форме "Параметры внешней торговли".  
35. Нажмите кнопку "OК".
    * Привяжите элементы добавленного источника данных (отфильтрованной модели на основе выбранного корневого элемента) к элементам из добавленного места назначения.  
36. В дереве разверните "Архив".
37. В дереве разверните "Архив\<Связи".
38. В дереве разверните "Архив\<Связи\IntrastatArchiveDetail".
39. В дереве выберите "Архив\<Связи\IntrastatArchiveDetail\Сумма(AmountMST)".
40. В дереве разверните "модель\Заголовок архива\Перечисленные строки".
41. В дереве разверните "модель\Заголовок архива\Перечисленные строки\Значение".
42. В дереве выберите "модель\Заголовок архива\Перечисленные строки\Значение\Сумма".
43. Щелкните "Связать".
44. В дереве выберите "Архив\<Связи\IntrastatArchiveDetail\Товар(IntrastatCommodity)".
45. В дереве выберите "модель\Заголовок архива\Перечисленные строки\Значение\Код записи товара".
46. Щелкните "Связать".
47. В дереве выберите "Архив\<Связи\IntrastatArchiveDetail\Код номенклатуры(ItemId)".
48. В дереве выберите "модель\Заголовок архива\Перечисленные строки\Значение\Код номенклатуры".
49. Щелкните "Связать".
50. В дереве выберите "Архив\<Связи\IntrastatArchiveDetail\Номер строки(LineNumber)".
51. В дереве выберите "модель\Заголовок архива\Перечисленные строки\Номер".
52. Щелкните "Связать".
53. В дереве выберите "Архив\<Связи\IntrastatArchiveDetail".
54. В дереве выберите "модель\Заголовок архива\Перечисленные строки".
55. Щелкните "Связать".
56. В дереве выберите "Архив\Имя файла(FileName)".
57. В дереве выберите "модель\Заголовок архива\Имя файла".
58. Щелкните "Связать".
59. В дереве выберите "Архив\Число строк(NumberOfLines)".
60. В дереве выберите "модель\Заголовок архива\Число строк".
61. Щелкните "Связать".
62. В дереве выберите "Архив".
63. В дереве выберите "модель\Заголовок архива".
64. Щелкните "Связать".
65. Нажмите кнопку "Сохранить".
66. Закройте страницу.
67. Закройте страницу.

