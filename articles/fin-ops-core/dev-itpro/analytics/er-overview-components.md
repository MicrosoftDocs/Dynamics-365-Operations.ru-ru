---
title: Компоненты электронной отчетности
description: В этой статье описываются компоненты электронной отчетности (ER).
author: kfend
ms.date: 09/28/2021
ms.topic: overview
ms.prod: ''
ms.technology: ''
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.region: global
ms.author: filatovm
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.custom: 58941
ms.assetid: 5d51b6a6-ad12-4af9-a66d-a1eb820ae57f
ms.search.form: ERWorkspace
ms.openlocfilehash: 4851374ca4943a84d35f063e0ee65b537ec3b6cd
ms.sourcegitcommit: 87e727005399c82cbb6509f5ce9fb33d18928d30
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/12/2022
ms.locfileid: "9285042"
---
# <a name="electronic-reporting-components"></a>Компоненты электронной отчетности

[!include [banner](../includes/banner.md)]

Электронная отчетность (ER) поддерживает следующие типы компонентов:

- Модель данных
- Подбор модели
- Форматировать
- Метаданные

## <a name="data-model-component"></a>Компонент "модель данных"

Компонент модели данных является абстрактным представлением структуры данных. Он описывает конкретную область бизнеса-домена с достаточно подробными сведениями для удовлетворения требованиям отчетности для этого домена. Компонент модели данных состоит из следующих частей:

- **Модель данных** — это набор характерных для домена бизнес-объектов и иерархически структурированного определения отношений между ними.
- **Сопоставления модели** — связывает выбранные источники данных приложения с отдельными элементами модели данных, которая указывает во время выполнения поток данных и правила для заполнения бизнес-данными в компоненте модели данных.

Бизнес-объект модели данных представлен как контейнер или запись. Свойства бизнес-объекта представлены как элементы данных или поля. Каждый элемент данных имеет уникальное имя, метку, описание и значение. Значение каждого элемента данных можно разработать таким образом, чтобы оно распознавалось как строка, целое число, вещественное значение, дата, перечисление или логическое значение. Кроме того, элемент данных может быть другой записью или списком записей.

Один компонент модели данных может содержать несколько иерархий объектов, связанных с бизнес-доменом. Он также может содержать сопоставления модели, которые поддерживают поток данных, связанных с отчетом, во время выполнения. Иерархии будут дифференцироваться по одной записи, выбранной в качестве корня сопоставления модели. Например, модель данных области домена платежей может поддерживать следующие сопоставления:


- Компания \> Поставщик \> Проводки по оплате домена расчетов с поставщиками
- Клиент \> Компания \> Проводки по оплате домена расчетов с клиентами

Бизнес-объекты, например, "Компания" и "Проводки по оплате", разрабатываются только один раз. При необходимости в других сопоставлениях их можно использовать повторно.

## <a name="model-mapping-component"></a>Компонент сопоставления моделей

Сопоставления модели связывает источники данных приложения с отдельными элементами модели данных, которая указывает во время выполнения поток данных и правила для заполнения бизнес-данными в компоненте модели данных.

Сопоставление модели, которое поддерживает исходящие электронные документы имеет следующие возможности:

- Оно может использовать различные типы данных как источники данных для модели данных. Эти типы данных включают таблицы, объекты данных, методы и перечисления.
- Оно поддерживает параметры пользовательского ввода, которые можно определить как источники данных для модели данных, когда какие-либо данные должны быть указаны во время выполнения.
- Он поддерживает преобразование данных в необходимые группы. Можно также фильтровать и суммировать данные и добавлять логически вычисляемые поля, которые разработаны посредством формул, похожих на формулы Microsoft Excel. Дополнительные сведения см. в разделе [Конструктор формул в электронной отчетности (ER)](general-electronic-reporting-formula-designer.md).

Сопоставление модели, которое поддерживает входящие электронные документы имеет следующие возможности:

- Он может использовать различные обновляемые элементы данных в качестве целевых. Эти элементы данных включают таблицы, объекты данных и представления. Данные могут обновляться входящими данными из электронных документов. Можно использовать несколько целевых объектов в сопоставлении одной модели.
- Оно поддерживает параметры пользовательского ввода, которые можно определить как источники данных для модели данных, когда какие-либо данные должны быть указаны во время выполнения.

Компонент модели данных разработан для каждого бизнес-домена, используемого в качестве единого источника данных для отчетности. Унифицированный источник данных изолирует отчетность от физической реализации источников данных. Этот компонент представляет бизнес-концепции для доменов и функциональные возможности в форме, которая повышает эффективность первоначальной разработки и дополнительной поддержки формата отчетности.

## <a name="format-component"></a>Компонент формата

### <a name="format-components-for-outgoing-electronic-documents"></a>Компоненты формата для исходящих электронных документов

Компонент формата — это схема выходных данных отчетности, которые создаются во время выполнения. Схема состоит из следующих элементов:

- Формат, который определяет структуру и содержимое исходящего электронного документа, формируемого во время выполнения.
- Источники данных в виде набора параметров пользовательского ввода и характерной для конкретного домена модели данных, которая использует выбранное сопоставление модели.
- Сопоставление формата в виде набора привязок источников данных формата к отдельным элементам формата, задающим во время выполнения поток данных и правила формирования выходных данных формата.
- Проверка формата в виде набора настраиваемых правил, управляющих формированием отчетов во время выполнения в зависимости от контекста выполнения. Например, может быть правило, останавливающее создание выходных платежей поставщикам и выдающее исключение, если определенные атрибуты выбранного поставщика отсутствуют, например номер банковского счета.

Компонент формата поддерживает следующие функции:

- Создание выходных отчетных данных в виде отдельных файлов в разных форматах, таких как текст, XML, документ Microsoft Word или таблица
- Создание нескольких файлов отдельно и инкапсуляция их в ZIP-файлы

Компонент формата предоставляет возможность прилагать определенные файлы, которые могут использоваться в выходных данных отчетности:

- Книги Excel, содержащие лист, который можно использовать в качестве шаблона для выходных данных в формате листа OPENXML.
- Файлы Word, содержащие документ, который можно использовать в качестве шаблона для выходных данных в формате документа Microsoft Word.
- Другие файлы, которые могут включаться в выходные данные формата в качестве предопределенных файлов

На следующем рисунке показаны потоки данных для этих форматов.

[![Поток данных для компонентов исходящего формата](./media/ER-overview-02.png)](./media/ER-overview-02.png)

Для запуска одной конфигурации формата ER и создания исходящего электронного документа необходимо определить сопоставление конфигурации формата.

#### <a name="format-components-for-incoming-electronic-documents"></a>Компоненты формата для входящих электронных документов
Компонент формата — это схема водящего документа, который импортируется во время выполнения. Схема состоит из следующих элементов:

- Формат, который определяет структуру и содержимое входящего электронного документа, содержащего данные, импортируемые во время выполнения. Компонент формата используется для анализа входящего документа в различных форматах, таких как текст и XML.
- Сопоставление формата, связывающее отдельные элементы формата с элементами модели данных конкретного домена. Во время выполнения элементы в модели данных задают поток данных и правила для импорта данных из входящего документа и затем сохраняют данные в модели данных.
- Проверка формата в виде набора настраиваемых правил, управляющих импортом данных во время выполнения в зависимости от контекста выполнения. Например, может быть правило, останавливающее импорт данных по банковской выписке с платежами поставщиков и выдающее исключение, если определенные атрибуты выбранного поставщика отсутствуют, например код поставщика.

На следующем рисунке показаны потоки данных для этих форматов.

[![Поток данных для компонентов входящего формата](./media/ER-overview-03.png)](./media/ER-overview-03.png)

Чтобы запустить одну конфигурацию формата ER для импорта данных из входящего электронного документа, необходимо определить сопоставление конфигурации формата и точку интеграции сопоставления модели. Можно использовать то же сопоставление модели и назначения вместе с различными форматами для другого типа входящих документов.


## <a name="component-versioning"></a>Управление версиями компонентов

Для компонентов электронной отчетности поддерживается управление версиями. Для управления изменениями в компонентах электронной отчетности предусмотрен следующий workflow-процесс:

1. Версия, которая была создана первоначально, помечается как версия **Черновик**. Эту версию можно изменять, и она доступна для выполнения тестов.
2. Версию **Черновик** можно преобразовать в версию **Завершено**. Эту версию можно использовать в локальных процессах отчетности.
3. Версию **Завершено** можно преобразовать в версию **Используется совместно**. Эта версия публикуется в Microsoft Dynamics Lifecycle Services (LCS) и может использоваться в процессах глобальной отчетности.
4. Версию **Используется совместно** можно преобразовать в версию **Поддержка прекращена**. Эту версию можно удалить.

Версии со статусом **Завершено** или **Используется совместно** доступны для других вариантов обмена данными. В компоненте, который имеет эти статусы, можно выполнять следующие действия с ними:

- Компонент может быть сериализован в формате XML и экспортирован как файл в формате XML.
- Компонент может быть повторно сериализован из XML-файла и импортирован в приложение как новая версия компонента электронной отчетности.

Дополнительные сведения см. в разделах [Импорт новой конфигурации модели данных](er-quick-start1-new-solution.md#ImportDataModel) и [Экспорт завершенной версии производного формата](er-calculated-field-type.md#export-completed-version-of-a-derived-format).

### <a name="draft-versions-at-runtime"></a>Черновые версии в среде выполнения

В личных пользовательских параметрах структуры ER можно включить параметр, позволяющий указать, следует ли использовать черновую версию конфигурации ER в среде выполнения. Сведения о том, как сделать доступной функцию **Выполнение черновика** для конфигураций ER, см. в разделе [Пометка пользовательского формата как готового к запуску](er-quick-start2-customize-report.md#MarkFormatRunnable).

> [!NOTE]
> Пользовательские параметры ER относятся к конкретной компании и конкретному пользователю.

### <a name="draft-format-versions-at-runtime"></a>Черновые версии формата в среде выполнения

По умолчанию при выполнении решения ER черновые версии его компонентов формата игнорируются. Вместо этого используется только соответствующая версия, имеющая статус, отличный от **Черновик**. Иногда может возникнуть необходимость принудительно использовать черновую версию конфигурации формата ER в среде выполнения. Например, после внесения необходимых изменений в черновую версию можно использовать эту черную версию для выполнения тестового запуска. Таким образом можно отследить правильность внесенных изменений. Чтобы начать использовать черновую версию формата, необходимо [установить](er-quick-start2-customize-report.md#MarkFormatRunnable) для параметра **Запустить черновик** в соответствующей конфигурации ER значение **Да**.

### <a name="draft-model-mapping-versions-at-runtime"></a>Черновые версии сопоставления моделей в среде выполнения

По умолчанию при выполнении решения ER всегда задействуются черновые версии его компонентов сопоставления моделей. Иногда может потребоваться, чтобы в ER игнорировалась черновая версия конфигурации сопоставления моделей ER в среде выполнения. В **версии 10.0.29 и более поздних** можно включить функцию **Всегда учитывать параметр "Запустить черновик" для сопоставлений модели ER**, позволяющую контролировать, какая версия сопоставления моделей используется в среде выполнения. Когда эта функция включена, поведение будет следующим:

- Если для параметра **Запустить черновик** для конфигурации сопоставления модели выбрано значение **Нет**, в среде выполнения используется максимальная нечерновая версия этой конфигурации. Если конфигурация недоступна в текущем экземпляре Finance, создается исключение.
- Если для параметра **Запустить черновик** для конфигурации сопоставления модели выбрано значение **Да**, в среде выполнения используется черновая версия этой конфигурации.

## <a name="component-date-effectivity"></a>Дата начала действия компонента

Версии компонента формата ER имеют дату вступления в силу. Для компонента формата ER можно задать параметр "действует с", указав дату, с которой компонент вступает в силу для процессов отчетности. Для определения того, является ли компонент действительным для выполнения, используется дата сеанса приложения. Если на определенную дату действительно несколько версий, для процессов отчетности используется последняя версия.

## <a name="component-access"></a>Доступ к компонентам

Доступ к компонентам формата и сопоставления модели ER в среде выполнения зависит от выбранного кода страны или региона в формате международной организации по стандартизации (ISO). Если этот параметр не задан для выбранной версии конфигурации формата или сопоставления модели, доступ к компоненту формата или сопоставления модели можно получить из любой компании в среде выполнения. Когда этот параметр содержит коды стран/регионов по ISO, компонент формата или сопоставления модели доступен только из тех компаний, у которых основной адрес находится в стране или регионе, заданных одним из кодов стран/регионов по ISO компонента формата.

У разных версий компонента формата или сопоставления модели могут быть разные коды стран/регионов по ISO.

Дополнительные сведения см. в разделе [Настройка сопоставлений моделей электронной отчетности с учетом контекста страны](er-country-dependent-model-mapping.md).

[!INCLUDE[footer-include](../../../includes/footer-banner.md)]

