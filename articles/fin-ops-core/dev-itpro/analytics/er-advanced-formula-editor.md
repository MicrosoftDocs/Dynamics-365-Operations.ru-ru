---
title: Расширенный редактор формул электронной отчетности
description: В этой статье описывается, как можно использовать расширенный редактор формул для настройки выражений в сопоставлении моделей электронной отчетности и в компонентах формата.
author: kfend
ms.date: 06/17/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: kfend
ms.search.region: Global
ms.author: filatovm
ms.search.validFrom: 2020-04-01
ms.dyn365.ops.version: AX 10.0.9
ms.custom: 97423
ms.assetid: ''
ms.search.form: ERSolutionTable, ERExpressionDesignerFormula
ms.openlocfilehash: 269102028962cf1ebae599b9885f97871785a551
ms.sourcegitcommit: 87e727005399c82cbb6509f5ce9fb33d18928d30
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/12/2022
ms.locfileid: "9286228"
---
# <a name="electronic-reporting-advanced-formula-editor"></a>Расширенный редактор формул электронной отчетности

[!include [banner](../includes/banner.md)]

Кроме [редактора формул](general-electronic-reporting.md) [электронной отчетности](general-electronic-reporting-formula-designer.md) можно использовать расширенный редактор формул электронной отчетности для улучшения процесса настройки выражений электронной отчетности. Расширенный редактор базируется на веб-браузерах и работает с помощью [редактора Monaco](https://microsoft.github.io/monaco-editor). В этой статье описываются наиболее часто используемые возможности расширенного редактора:

- [Автоформатирование кода](#Autoformatting)
- [IntelliSense](#IntelliSense)
- [Завершение кода](#CodeCompletion)
- [Навигация по коду](#CodeNavigation)
- [Структурирование кода](#CodeStructuring)
- [Найти и заменить](#FindAndReplace)
- [Вставка данных](#DataPasting)
- [Цветовое выделение синтаксиса](#SyntaxColorization)

## <a name=""></a><a name="ActivateAdvEditor">Активация расширенного редактора формул</a>

Выполните следующие шаги, чтобы начать работу с расширенным редактором формул в своем экземпляре Microsoft Dynamics 365 Finance.

1.  Перейдите в раздел **Администрирование организации** \> **Электронная отчетность** \> **Конфигурации**.
2.  На странице **Конфигурации** в области действий на вкладке **Конфигурации** в группе **Дополнительные параметры** выберите **Параметры пользователя**.
3.  В диалоговом окне **Параметры пользователя** в разделе **Трассировка выполнения** установите для параметра **Включить расширенный редактор формул** значение **Да**.

[![Диалоговое окно параметров пользователя, выделено включение параметра расширенного редактора формул.](./media/ER-AdvEditor-Activate.png)](./media/ER-AdvEditor-Activate.png)

> [!NOTE]
> Имейте в виду, что этот параметр используется отдельно для пользователя и для компании.

Начиная с Microsoft Dynamics 365 Finance версии 10.0.19, можно управлять тем, какой редактор формул электронной отчетности предлагается умолчанию. Чтобы включить расширенный редактор формул для всех пользователей и компаний текущего экземпляра Finance, выполните следующие действия.

1.  Откройте рабочую область **Управление функциями**.
2.  Найдите и выберите компонент **Задать расширенный редактор формул ER в качестве значения по умолчанию для всех пользователей** в списке, а затем выберите **Включить**.
3.  Перейдите в раздел **Администрирование организации** > **Электронная отчетность** > **Конфигурации**.
4.  На странице **Конфигурации** в области действий на вкладке **Конфигурации** в группе **Дополнительные параметры** выберите **Параметры пользователя**.
5.  В диалоговом окне **Параметры пользователя** найдите параметр **Отключить расширенный редактор формул** и убедитесь, что в поле выбрано значение **Нет**.

[![Диалоговое окно параметров пользователя, выделено отключение параметра расширенного редактора формул.](./media/ER-AdvEditor-Activate2.png)](./media/ER-AdvEditor-Activate2.png)

> [!NOTE]
> Значения параметров **Включить расширенный редактор формул** и **Отключить расширенный редактор формул** хранятся отдельно для каждого пользователя и предлагаются в диалоговом окне **Параметры пользователя** в зависимости от статуса функции **Задать расширенный редактор формул ER в качестве значения по умолчанию для всех пользователей**.

## <a name=""></a><a name="Autoformatting">Автоформатирование кода</a>

При написании сложного выражения, которое состоит из нескольких строк кода, отступ новой введенной строки будет автоматически изменяться на основе отступов предыдущей строки. Можно выбрать строки и изменить их отступы, нажав **Tab** или **Shift+Tab**.

[![GIF редактора формул ER с выделением строк и изменением отступа.](./media/ER-AdvEditor-Indentation.gif)](./media/ER-AdvEditor-Indentation.gif)

Автоформатирование позволяет полностью отформатировать выражение, чтобы облегчить дальнейшее обслуживание и упростить понимание настроенной логики.

## <a name=""></a><a name="IntelliSense">IntelliSense</a>

Редактор предоставляет завершение слов, помогающее ускорить написание выражений и избежать опечаток. При добавлении нового текста редактор автоматически предлагает список функций, поддерживаемых функциями электронной отчетности, которые содержат введенные символы. Можно также активировать IntelliSense в любом месте настроенного выражения, нажав **Ctrl+Space**.

[![GIF редактора формул ER, демонстрирующий запуск IntelliSense.](./media/ER-AdvEditor-Intelisense.gif)](./media/ER-AdvEditor-Intelisense.gif)

## <a name=""></a><a name="CodeCompletion">Завершение кода</a>

Редактор автоматически обеспечивает завершение кода следующим образом:

- Вставка закрывающей скобки при вводе открывающей скобки, сохраняя курсор внутри квадратных скобок.
- Вставка второго символа кавычки при вводе первого, сохраняя курсор внутри кавычек.
- Вставка второго символа двойной кавычки при вводе первого, сохраняя курсор внутри кавычек.

[![GIF редактора формул ER, демонстрирующий автоматическое завершение кода в редакторе формул.](./media/ER-AdvEditor-CodeCompletion.gif)](./media/ER-AdvEditor-CodeCompletion.gif)

При наведении указателя на введенную скобку автоматически выделяется вторая скобка этой пары скобок для отображения поддерживаемой конструкции.

## <a name=""></a><a name="CodeNavigation">Навигация по коду</a>

Чтобы найти необходимые символы или строки выражения, введите команду **Перейти** с помощью палитры команд или контекстного меню.

Например, чтобы перейти к строке **8**, выполните следующие действия:

- Нажмите сочетание клавиш **CTRL+G**, введите значение **8**, а затем нажмите клавишу **ВВОД**.

  –или–

- Нажмите клавишу **F1**,введите **G**, выберите **Перейти к строке**, введите значение **8**, а затем нажмите клавишу **ВВОД**.

[![GIF редактора формул ER, демонстрирующий, как искать части выражения с помощью палитры команд.](./media/ER-AdvEditor-Goto.gif)](./media/ER-AdvEditor-Goto.gif)

## <a name=""></a><a name="CodeStructuring">Структурирование кода</a>

Код для некоторых функций, таких как [IF](er-functions-logical-if.md) или [CASE](er-functions-logical-case.md), автоматически структурирован. Можно развернуть или свернуть все области свертывания этого кода, чтобы уменьшить редактируемую часть выражения, чтобы сосредоточиться только на части кода, требующей вашего внимания. Для этого можно использовать команды "свернуть" и "развернуть".

Например, чтобы свернуть все регионы, выполните следующие действия:

- Нажмите сочетание клавиш **CTRL+K**

  –или–

- Нажмите клавишу **F1**, нажмите **FO**, выберите команду **Свернуть все**, а затем нажмите клавишу **ВВОД**

Чтобы развернуть все регионы, выполните следующие действия:

- Нажмите сочетание клавиш **CTRL+J**

  –или–
  
- Нажмите клавишу **F1**, введите **UN**, выберите команду **Развернуть все**, а затем нажмите клавишу **ВВОД**

[![GIF редактора формул ER, демонстрирующий разворачиваемый код.](./media/ER-AdvEditor-ToggleFold.gif)](./media/ER-AdvEditor-ToggleFold.gif)

## <a name=""></a><a name="FindAndReplace">Найти и заменить</a>

Чтобы найти вхождения определенного текста, выберите текст в выражении и выполните следующие действия:

- Нажмите сочетание клавиш **CTRL+F**, а затем нажмите клавишу **F3**, чтобы найти следующее вхождение выбранного текста, или нажмите сочетание клавиш **SHIFT+F3**, чтобы найти предыдущее вхождение.

  –или–
  
- Нажмите клавишу **F1**, введите **F**, а затем выберите нужный вариант, чтобы найти выбранный текст.

Чтобы заменить вхождения определенного текста, выберите текст в выражении и выполните следующие действия:

- Нажмите сочетание клавиш **CTRL+H**. Введите замещающий текст и выберите параметр замены для замены выбранного текста или всех вхождений данного текста в текущем выражении.

  –или–
  
- Нажмите клавишу **F1**, введите **R**, а затем выберите нужный вариант, чтобы заменить выбранный текст. Введите замещающий текст и выберите параметр замены для замены выбранного текста или всех вхождений данного текста в текущем выражении.

Чтобы изменить все вхождения определенного текста, выберите текст в выражении и выполните следующие действия:

- Нажмите сочетание клавиш **CTRL+F2**, а затем введите замещающий текст.

  –или–
  
- Нажмите клавишу **F1**, введите **C**, а затем выберите нужный вариант, чтобы изменить выбранный текст. Введите замещающий текст.

[![GIF редактора формул ER, демонстрирующий поиск и замену.](./media/ER-AdvEditor-Find.gif)](./media/ER-AdvEditor-Find.gif)

## <a name=""></a><a name="DataPasting">Вставка источников данных и функций</a>

Можно выбрать **Добавить источник данных**, который вставит в текущее выражение источник данных, выбранный в левой панели **Источник данных**. Аналогичным образом можно выбрать **Добавить функцию**, который вставит в текущее выражение функцию, выбранную в правой панели **Функции**. При использовании редактора формул электронной отчетности выбранная функция или выбранный источник данных всегда будет вставлен в конец настроенного выражения. При использовании расширенного редактора формул электронной отчетности выбранная функция или выбранный источник данных могут быть вставлен в любую часть настроенного выражения. Необходимо использовать курсор, чтобы указать, куда необходимо вставить данные.

[![GIF редактора формул ER показывает добавление источника данных и вставку функции.](./media/ER-AdvEditor-PasteValue.gif)](./media/ER-AdvEditor-PasteValue.gif)

## <a name=""></a><a name="SyntaxColorization">Цветовое выделение синтаксиса</a>

В настоящее время для выделения следующих частей выражений используются разные цвета:

- Текст в двойных скобках, который может представлять код метки текстовой константы.

[![Редактор формул электронной отчетности.](./media/ER-AdvEditor-SyntaxColorization.png)](./media/ER-AdvEditor-SyntaxColorization.png)

## <a name="limitations"></a>Ограничения

В настоящее время редактор поддерживается в следующих веб-браузерах:

- Chrome
- Microsoft Edge
- Firefox
- Opera
- Safari

## <a name="additional-resources"></a>Дополнительные ресурсы

- [Обзор электронной отчетности (ER)](general-electronic-reporting.md)
- [Конструктор формул в электронной отчетности](general-electronic-reporting-formula-designer.md)
- [Редактор Monaco](https://microsoft.github.io/monaco-editor)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
