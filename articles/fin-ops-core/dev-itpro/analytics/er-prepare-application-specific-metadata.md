---
title: Подготовка метаданных для конкретного приложения для RCS и ER
description: В этом разделе описана процедура подготовки метаданных конкретного приложения для службы Regulatory Configuration Service (RCS) и электронной отчетности (ER).
author: NickSelin
manager: AnnBe
ms.date: 04/04/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERWorkspace
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.region: global
ms.author: nselin
ms.search.validFrom: ''
ms.dyn365.ops.version: ''
ms.openlocfilehash: 37da06f4ba86594c6368dcd1049456c58bf87e3a
ms.sourcegitcommit: 6cb174d1ec8b55946dca4db03d6a3c3f4c6fa2df
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/09/2021
ms.locfileid: "5565473"
---
# <a name="prepare-application-specific-metadata-for-rcs-and-er"></a>Подготовка метаданных для конкретного приложения для RCS и ER

[!include[banner](../includes/banner.md)]

В этом разделе рассматриваются примеры пошагового выполнения следующих задач:

- [Подготовка метаданных приложения, которые могут использоваться в RCS](#prepare-application-metadata-that-can-be-used-in-rcs)
- [Доступ к метаданным приложения с помощью конфигурации электронной отчетности](#access-application-metadata-by-using-an-er-configuration)
- [Доступ к метаданным приложения с помощью подключенных приложений](#access-application-metadata-by-using-connected-applications)

## <a name="prepare-application-metadata-that-can-be-used-in-rcs"></a>Подготовка метаданных приложения, которые могут использоваться в RCS

Следующая процедура показывает, как пользователь, имеющий роль **Системный администратор** или **Разработчик электронной отчетности**, может создать конфигурацию электронной отчетности (ER), которая содержит метаданные для приложения и которая используется для разработки конфигураций сопоставления модели ER в службе Regulatory Configuration Service (RCS). Образец конфигурации сопоставления модели ER, созданный в этом примере, будет использоваться для доступа к проводкам внешней торговли.

В этом примере необходимо использовать RCS для создания решения ER для приложения, которое будет использоваться для создания электронных документов, содержащих информацию из бизнес-домена зарубежной торговли. Чтобы указать сопоставление модели данных ER с источниками необходимых данных, необходимо иметь доступ к метаданным приложения в RCS. Таким образом, в ходе процесса разработки решения ER необходимо настроить новую конфигурацию метаданных ER, которая содержит все текущие необходимые метаданные для создания отчетов ER для выбранного бизнес-домена.

> [!NOTE]
> В этом примере вам предстоит создать поставщика конфигурации для примера компании Litware, Inc. Эти шаги можно выполнить в любой компании.

1. Перейдите в раздел **Управление организацией \> Рабочие области \> Электронная отчетность**.
2. Убедитесь, что поставщик конфигурации для демонстрационной компании Litware, Inc. доступен и помечен как **Активный**. Если вы не видите этого поставщика конфигурации, необходимо сначала выполнить шаги в процедуре [Создание поставщиков конфигураций и пометка их как активных](tasks/er-configuration-provider-mark-it-active-2016-11.md). 
3. Выберите **Конфигурации метаданных**.
4. Выберите **Создать конфигурацию**.
5. В диалоговом окне в раскрывающемся списке в поле **Имя** введите имя. В данном примере введите **Метаданные внешней торговли**.
6. Выберите **Создать конфигурацию**.
7. Выберите **Конструктор**.
8. Выберите **Добавить**.

    > [!NOTE]
    > Можно выбрать все метаданные либо для всего приложения, либо для выбранных моделей или модулей. В обоих случаях следует иметь в виду, что следующие метаданные будут автоматически добавлены: таблицы записей, перечисления и расширенные типы данных (EDT). Когда требуются дополнительные типы метаданных, они должны быть добавлены вручную.

    Необходимо добавить некоторые метаданные, которые относятся к проводкам внешней торговли, и вручную выбрать элементы метаданных.

9. Выберите **Добавить источник данных \> Записи таблицы**.
10. Выполните фильтрацию по значению **Интрастат** в поле **Имя**.
11. Выберите запись таблицы **Интрастат**.
12. Нажмите **ОК**.

    Необходимо добавить сведения метаданных о записях таблицы Интрастат

13. В дереве выберите **Таблицы записей Интрастат \> \>Отношения \> IntrastatCommodity (записи таблицы EcoResCategory)**.
14. Выберите **Добавить метаданные**.

    > [!NOTE]
    > Метаданные о необходимых отношениях для выбранной таблицы записей необходимо добавить вручную.

15. Выберите **Добавить источник данных**.
16. Выберите **Перечисление**.
17. Выполните фильтрацию по значению **IntrastatDirection** в поле **Имя**.
18. Выберите запись перечисления **IntrastatDirection**.
19. Нажмите **ОК**.
20. Нажмите **Сохранить**.
21. Закройте страницу.
22. Завершите черновую версию конфигурации метаданных:

    1. Выберите **Изменить статус \> Завершено**.
    2. Нажмите **ОК**.
    3. Выберите завершенную версию 1.

23. Экспортируйте завершенную версию конфигурации метаданных из приложения в виде файла XML:

    1. Выберите **Обменять \> Экспорт в виде XML-файла**.
    2. Нажмите **ОК**.

Созданная конфигурация метаданных ER будет сохранена в виде файла **Метаданные внешней торговли.xml**. Теперь можно импортировать его в RCS, чтобы его можно было использовать в качестве источника метаданных для бизнес-домена внешней торговли. На основе этих сведений можно указать сопоставление между метаданными приложения и моделью данных ER.

## <a name="access-application-metadata-by-using-an-er-configuration"></a>Доступ к метаданным приложения с помощью конфигурации электронной отчетности

Следующая процедура показывает, как пользователь RCS, имеющий роль **Системный администратор** или **Разработчик электронной отчетности**, может разработать новое сопоставление модели ER с помощью метаданных из приложения. Доступ к метаданным приложения будет осуществляться с помощью конфигурации метаданных ER, которая содержит образец набора метаданных для доступа к проводкам внешней торговли.

Перед окончанием выполнения этой процедуры необходимо сначала выполнить следующие процедуры:

- [Создание поставщиков конфигураций и пометка их как активных](tasks/er-configuration-provider-mark-it-active-2016-11.md)
- [Подготовка метаданных приложения, которые могут использоваться в RCS](#prepare-application-metadata-that-can-be-used-in-rcs)

1. Перейдите в раздел **Все рабочие области \> Электронная отчетность**.
2. Убедитесь, что поставщик конфигурации для демонстрационной компании Litware, Inc. доступен и помечен как **Активный**. Если вы не видите этого поставщика конфигурации, необходимо сначала выполнить шаги в процедуре [Создание поставщиков конфигураций и пометка их как активных](tasks/er-configuration-provider-mark-it-active-2016-11.md). 
3. Импортируйте конфигурацию метаданных ER, которая содержит метаданные для приложения и настроена для создания электронных документов для бизнес-домена внешней торговли. Вы создали конфигурацию метаданных ER и экспортировали ее как XML-файл в процедуре [Подготовка метаданных приложения, которые могут использоваться в RCS](#prepare-application-metadata-that-can-be-used-in-rcs) ранее в этом разделе.

    1. Выберите **Конфигурации метаданных**.
    2. Выберите **Обменять**.
    3. Выберите **Загрузить из XML-файла**.
    4. Найдите и выберите файл **Метаданные внешней торговли.xml**.
    5. Нажмите **ОК**.
    6. Закройте страницу.

4. Создание конфигурации модели данных:

    1. Выберите **Конфигурации отчетности**.
    2. Выберите **Создать конфигурацию**.
    3. В диалоговом окне в раскрывающемся списке в поле **Имя** введите **Модель внешней торговли**.
    4. Выберите **Создать конфигурацию**.
    5. Выберите **Конструктор**.
    6. Выберите **Создать**, чтобы открыть раскрывающееся диалоговое окно.

        1. В поле **Имя** введите **Корень**.
        2. Выберите **Добавить**.
    
    7. Выберите **Создать**, чтобы открыть раскрывающееся диалоговое окно.

        1. В поле **Имя** введите **Проводка**.
        2. В поле **Тип элемента** выберите **Список записей**.
        3. Выберите **Добавить**.
 
    8. Выберите **Создать**, чтобы открыть раскрывающееся диалоговое окно.

        1. В поле **Имя** введите **Код товара**.
        2. В поле **Тип элемента** выберите **Строка**.
        3. Выберите **Добавить**.

    9. Выберите **Создать**, чтобы открыть раскрывающееся диалоговое окно.

        1. В поле "Имя" введите **Сумма, выставленная по накладным**.
        2. В поле **Тип элемента** выберите **Вещественный**.
        3. Выберите **Добавить**.

    10. Выберите **Создать**, чтобы открыть раскрывающееся диалоговое окно.

        1. В поле **Имя** введите **Дата**.
        2. В поле **Тип элемента** выберите **Дата**.
        3. Выберите **Добавить**.
 
    11. Выберите **Добавить \> Корневая ссылка**.
    12. Нажмите **ОК**.
    13. Нажмите **Сохранить**.
    14. Закройте страницу.
    15. Выберите **Изменить статус \> Завершено**.
    16. Нажмите **ОК**.

5. Создайте конфигурацию сопоставления модели:

    1. Выберите **Создать конфигурацию**.
    2. В раскрывающемся диалоговом окне в полей **Создать** введите **Сопоставление модели на основе модели данных внешней торговли**.
    3. В поле **Имя** введите **Сопоставление внешней торговли**.
    4. Выберите **Создать конфигурацию**.
    5. На экспресс-вкладке **Необходимые условия** выберите **Правка**.
    6. Выберите **Создать**.
    7. В поле **Тип необходимого компонента** выберите **Конфигурация**.
    8. Выберите конфигурацию **Метаданные внешней торговли**.
    9. Нажмите **Сохранить**. Обратите внимание, что ссылка добавляется к версии 1 конфигурации **Метаданные внешней торговли**. Метаданные приложения из этой конфигурации будут предлагаться при разработке сопоставления моделей.
    10. Закройте страницу.
    11. Выберите **Конструктор**.
    12. Выберите **Конструктор**.
    13. В дереве выберите узел **Dynamics 365 for Operations \> Записи таблиц**.
    14. Выберите **Добавить корень**.
    15. В поле **Имя** введите **Интрастат**.
    16. Выберите записи таблицы **Интрастат**.
    17. Нажмите **ОК**.

        > [!NOTE]
        > Предлагаются только две таблицы, поскольку только две таблицы были добавлены в набор метаданных, которые в настоящее время используются.

    18. Выберите **Связать**.
    19. В дереве выберите **Интрастат \> AmountMST**.
    20. В дереве выберите **Проводка = Интрастат \> Сумма, выставленная по накладным**.
    21. Выберите **Связать**.
    22. В дереве выберите **Интрастат \> TransDate**.
    23. В дереве выберите **Проводка = Интрастат \> Дата**.
    24. Выберите **Связать**.
    25. В дереве выберите **Интрастат \> \>Отношения \> IntrastatCommodity \> Код**.
    26. В дереве выберите **Проводка = Интрастат \> Товарный код**.
    27. Выберите **Связать**.
    28. Выберите **Проверить**.

        > [!NOTE]
        > После завершения проверки вы успешно привязываете элементы модели данных к элементам источников данных, которые описаны с помощью подробных сведений метаданных приложения из указанной конфигурации метаданных ER.

    29. Нажмите **Сохранить**.

При необходимости можно расширить существующий набор метаданных в приложении. Затем можно экспортировать новую завершенную версию конфигурации метаданных ER, импортировать их в RCS и обновить необходимые условия настроенной конфигурации сопоставления модели, чтобы они ссылались на новую версию импортированной конфигурации метаданных.

> [!NOTE]
> Этот метод получения сведений о метаданных приложения является единственным доступным методом для локально развернутых приложений (то есть, когда для приложения используются локальные бизнес-данные \[LBD\] или локальная модель развертывания).

## <a name="access-application-metadata-by-using-connected-applications"></a>Доступ к метаданным приложения с помощью подключенных приложений

Следующая процедура показывает, как пользователь RCS, имеющий роль **Системный администратор** или **Разработчик электронной отчетности**, может разработать новое сопоставление модели ER с помощью метаданных приложения. Доступ к метаданным приложения производится в сети с помощью подключенного приложения RCS. Образец сопоставления модели ER будет настроен для доступа к проводкам внешней торговли.

Для выполнения этой процедуры необходимо сначала выполнить процедуру [Создание поставщиков конфигураций и пометка их как активных](tasks/er-configuration-provider-mark-it-active-2016-11.md) в RCS. Если вы еще не выполнили процедуру [Доступ к метаданным приложения с помощью конфигурации электронной отчетности](#access-application-metadata-by-using-an-er-configuration), приведенную выше в этом разделе, перейдите на страницу [Руководства по задачам электронной отчетности для Dynamics 365 for Finance and Operations 8.1](https://go.microsoft.com/fwlink/?linkid=2082739), чтобы загрузить следующие файлы электронной отчетности заранее и сохранить их локально : **Метаданные внешней торговли.xml**, **Модель внешней торговли.xml** и **Сопоставление внешней торговли.xml**.


### <a name="get-required-er-configurations"></a>Получение необходимых конфигураций электронной отчетности

Если вы уже выполнили процедуру [Доступ к метаданным приложения с помощью конфигурации электронной отчетности](#access-application-metadata-by-using-an-er-configuration) ранее в этом разделе, у вас уже имеются все необходимые конфигурации ER (конфигурации метаданных, моделей и сопоставлений внешней торговли) в текущем экземпляре RCS. В этом случае эту процедуру можно пропустить.

1. Перейдите в раздел **Все рабочие области \> Электронная отчетность**.
2. Выберите **Конфигурации отчетности**.
3. Загрузите файлы конфигурации **Метаданные внешней торговли.xml**, **Модель внешней торговли.xml** и **Сопоставление внешней торговли.xml**, повторив следующую последовательность шагов для каждого из них:

    1. Выберите **Обменять**.
    2. Выберите **Загрузить из XML-файла**.
    3. Выберите **Обзор** и выберите файл.
    4. Нажмите **ОК**.

### <a name="register-the-connection-with-the-application"></a>Регистрация подключения к приложению

1. Перейдите в раздел **Все рабочие области \> Электронная отчетность**.
2. Выберите **Подключенные приложения**.
3. Убедитесь, что настроенное приложение основано на Microsoft Azure, и что оно доступно в общем доступе пользователям RCS. Текущий пользователь RCS должен иметь доступ к настроенному приложению, будучи зарегистрированным в качестве пользователя данного приложения в роли, которая дает ему право доступа к метаданным приложения.
4. Выберите **Создать**.
5. В поле **Имя** введите **MyConnectedApp** в качестве имени подключенного приложения.
6. В поле **Приложение** укажите URL-адрес приложения.
7. В поле **Клиент** укажите поставщика приложения.
8. Нажмите **Сохранить**. 
9. При проверке подключения к настроенному приложению на странице **Подключение к удаленному приложению** выберите ссылку **Выберите здесь, чтобы подключиться к выбранному удаленному приложению**. 
10. Выберите **Проверить подключение** для проверки доступа к настроенному приложению.
11. Выберите **Закрыть**.

После выполнения этой процедуры и успешной проверки подключения сведения о версии и клиенте для настроенного приложения будут обновлены в текущей сетке.

### <a name="review-the-existing-model-mapping-configuration"></a>Проверка существующей конфигурации сопоставлений модели

1. Перейдите в раздел **Все рабочие области \> Электронная отчетность**.
2. Выберите **Конфигурации отчетности**.
3. В дереве выберите **Модель внешней торговли \> Сопоставление внешней торговли**.
4. Выберите экспресс-вкладку **Необходимые условия**.

    > [!NOTE]
    > В настоящее время это сопоставление ссылается на конфигурацию метаданных. Метаданные приложения из этой конфигурации будут предлагаться при разработке этого сопоставления моделей.

4. Выберите **Конструктор**.
5. Выберите **Конструктор**.
6. В дереве выберите узел **Dynamics 365 for Operations \> Записи таблиц**.
7. Выберите **Добавить корень**.
8. В поле **Таблица** введите или выберите значение.

    > [!NOTE]
    > В настоящее время это сопоставление ссылается на конфигурацию метаданных. Метаданные приложения из этой конфигурации будут предлагаться при разработке этого сопоставления моделей.

9. Выберите **Отмена**.

### <a name="assign-the-connected-application-to-a-model-mapping"></a>Назначение подключенного приложения сопоставлению модели

1. Выберите **Правка**.
2. В поле **Подключенное приложение** выберите приложение **MyConnectedApp**.

    > [!NOTE]
    > Это сопоставление ссылается на метаданные выбранного подключенного приложения. Если сопоставление ссылается одновременно на конфигурацию метаданных и подключенное приложение, будут использоваться метаданные подключенного приложения.

3. Выберите **Конструктор**.
4. Выберите **Конструктор**.
5. В дереве выберите узел **Dynamics 365 for Operations \> Записи таблиц**.
6. Выберите **Добавить корень**.
7. В поле **Таблица** введите или выберите значение.

    > [!NOTE]
    > В этот момент предлагается более двух таблиц приложений, поскольку в этом сопоставлении используются все метаданные подключенного приложения, которое было назначено для него.

8. Выберите **Отмена**.
9. Выберите **Проверить**.

Теперь вы привязали элементы модели данных к элементам источников данных, которые описаны с помощью подробных сведений метаданных подключенного приложения, которое было назначено этому сопоставлению.

Когда необходимо оценить сопоставление модели с помощью метаданных другой версии приложения, зарегистрируйте другое подключенное приложение, назначьте его этому сопоставлению модели и проверьте его по новым метаданным.

## <a name="additional-resources"></a>Дополнительные ресурсы

Кроме того, можно воспроизвести руководство по задаче **Подготовка метаданных приложения, которые могут использоваться в RCS** в приложении, а также руководства по задачам **Доступ к метаданным приложения с помощью конфигурации электронной отчетности** и **Доступ к метаданным приложения с помощью подключенных приложений** в RCS Эти руководства по задачам можно загрузить со страницы [Руководства по задачам электронной отчетности для Dynamics 365 for Finance and Operations 8.1](https://go.microsoft.com/fwlink/?linkid=2082739).


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]