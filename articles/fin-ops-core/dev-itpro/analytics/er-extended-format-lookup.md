---
title: Расширенный поиск формата электронной отчетности (ER)
description: В этом разделе описывается, как можно настроить ссылку на формат ER при поиске в формате ER, если требуемый формат хранится в глобальном репозитории.
author: NickSelin
manager: AnnBe
ms.date: 03/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERSolutionTable, ERWorkspace
audience: Application User
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 97423
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2020-04-01
ms.dyn365.ops.version: AX 10.0.9
ms.openlocfilehash: 28bdd02c25db27536a489f9e8ab2a91a5ca0f09c
ms.sourcegitcommit: b92c3e1b3403d0455fc4e0bf9132d6bc0d7aba5e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/18/2020
ms.locfileid: "3138868"
---
# <a name="allow-users-to-set-up-an-er-format-reference-inquiring-a-format-from-the-global-repository"></a><span data-ttu-id="6065b-103">Разрешите пользователям настраивать ссылку формата ER, которая запрашивает формат из глобального репозитория</span><span class="sxs-lookup"><span data-stu-id="6065b-103">Allow users to set up an ER format reference inquiring a format from the Global repository</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="6065b-104">Можно использовать платформу [Электронная отчетность](general-electronic-reporting.md) (ER) для настройки [форматов](general-electronic-reporting.md#FormatComponentOutbound) исходящих документов в соответствии с требованиями законодательства различных стран/регионов.</span><span class="sxs-lookup"><span data-stu-id="6065b-104">You can use the [Electronic reporting](general-electronic-reporting.md) (ER) framework to configure [formats](general-electronic-reporting.md#FormatComponentOutbound) for outbound documents in accordance to the legal requirements of various countries/regions.</span></span> <span data-ttu-id="6065b-105">Можно также использовать среду ER для настройки [форматов](general-electronic-reporting.md#FormatComponentInbound) для анализа входящих документов и использования информации из этих документов для добавления или обновления данных приложения.</span><span class="sxs-lookup"><span data-stu-id="6065b-105">You can also use the ER framework to configure [formats](general-electronic-reporting.md#FormatComponentInbound) for parsing inbound documents and use the information from those documents to append or update application data.</span></span> <span data-ttu-id="6065b-106">Каждый из этих форматов может использоваться в данном экземпляре Dynamics 365 Finance для обработки входящих и исходящих бизнес-документов как части определенного бизнес-процесса.</span><span class="sxs-lookup"><span data-stu-id="6065b-106">Each of these formats can used in your Dynamics 365 Finance instance for handling inbound or outbound business documents as part of a certain business process.</span></span> 

<span data-ttu-id="6065b-107">Обычно необходимо указать, какой формат ER должен использоваться в определенном бизнес-процессе.</span><span class="sxs-lookup"><span data-stu-id="6065b-107">Usually, you must specify what ER format must be used in a certain business process.</span></span> <span data-ttu-id="6065b-108">Для этого выберите один формат ER в поле поиска, которое настроено как часть параметров, связанных с бизнес-процессами.</span><span class="sxs-lookup"><span data-stu-id="6065b-108">To do that, select a single ER format in a lookup field that is configured as part of business process-specific parameters.</span></span> <span data-ttu-id="6065b-109">Эти поля поиска обычно реализуются с помощью соответствующего API среды ER.</span><span class="sxs-lookup"><span data-stu-id="6065b-109">These lookup fields are usually implemented by using the appropriate API of the ER framework.</span></span> <span data-ttu-id="6065b-110">Дополнительные сведения см. в разделе [API платформы электронной отчетности — код для отображения поиска сопоставления формата](er-apis-app73.md#code-to-display-a-format-mapping-lookup).</span><span class="sxs-lookup"><span data-stu-id="6065b-110">For more information, see [ER framework API - code to display a format mapping lookup](er-apis-app73.md#code-to-display-a-format-mapping-lookup).</span></span>

<span data-ttu-id="6065b-111">Например, при настройке [параметров внешней торговли](https://docs.microsoft.com/dynamics365/finance/localizations/emea-intrastat#set-up-foreign-trade-parameters) необходимо настроить ссылки на отдельные форматы ER, которые будут использоваться для создания деклараций Интрастат и отчета об управлении декларацией Интрастат.</span><span class="sxs-lookup"><span data-stu-id="6065b-111">For example, when you configure [foreign trade parameters](https://docs.microsoft.com/dynamics365/finance/localizations/emea-intrastat#set-up-foreign-trade-parameters), you need to set up the references to individual ER formats that will be used to generate the Intrastat declaration and the Intrastat declaration control report.</span></span> <span data-ttu-id="6065b-112">Следующие снимки экрана показывают, как выглядит поле поиска формата ER на странице **Параметры внешней торговли**.</span><span class="sxs-lookup"><span data-stu-id="6065b-112">The screenshots below show how the ER formats lookup field looks like in the **Foreign trade parameters** page.</span></span>

<span data-ttu-id="6065b-113">Если текущий экземпляр Finance не содержит форматы ER, связанные с бизнес-процессом Интрастат, поле поиска будет пустым.</span><span class="sxs-lookup"><span data-stu-id="6065b-113">If the current Finance instance contains no Intrastat business process related ER formats, this lookup field will be empty.</span></span>

<span data-ttu-id="6065b-114">[![Страница параметров внешней торговли](./media/ER-ExtLookup-Lookup1.gif)](./media/ER-ExtLookup-Lookup1.gif)</span><span class="sxs-lookup"><span data-stu-id="6065b-114">[![Foreign trade parameters page](./media/ER-ExtLookup-Lookup1.gif)](./media/ER-ExtLookup-Lookup1.gif)</span></span>

<span data-ttu-id="6065b-115">Если текущий экземпляр Finance содержит форматы ER, связанные с бизнес-процессом Интрастат, поле поиска будет содержать форматы ER.</span><span class="sxs-lookup"><span data-stu-id="6065b-115">If the current Finance instance contains Intrastat business process related ER formats, this lookup field offers the ER formats.</span></span>

<span data-ttu-id="6065b-116">[![Страница параметров внешней торговли](./media/ER-ExtLookup-Lookup2.png)](./media/ER-ExtLookup-Lookup2.png)</span><span class="sxs-lookup"><span data-stu-id="6065b-116">[![Foreign trade parameters page](./media/ER-ExtLookup-Lookup2.png)](./media/ER-ExtLookup-Lookup2.png)</span></span>

<span data-ttu-id="6065b-117">В этом поиске предлагаются только форматы ER, которые уже были импортированы в текущий экземпляр Finance.</span><span class="sxs-lookup"><span data-stu-id="6065b-117">This lookup offers only the ER formats that have already been imported to the current Finance instance.</span></span> <span data-ttu-id="6065b-118">Чтобы [импортировать](./tasks/er-import-configuration-lifecycle-services.md) решения ER в текущий экземпляр Finance, вам необходимо иметь разрешения для выполнения соответствующей функции среды ER, которая поддерживает [жизненный цикл](general-electronic-reporting-manage-configuration-lifecycle.md) решений ER, содержащих форматы ER.</span><span class="sxs-lookup"><span data-stu-id="6065b-118">To [import](./tasks/er-import-configuration-lifecycle-services.md) ER solutions to the current Finance instance, you need to have permissions to run the appropriate function of the ER framework that supports the [lifecycle](general-electronic-reporting-manage-configuration-lifecycle.md) of ER solutions that contain ER formats.</span></span>

<span data-ttu-id="6065b-119">Начиная с версии Finance 10.0.9 (апрель, 2020) пользовательский интерфейс поиска формата ER, реализованный с использованием API среды ER, был расширен.</span><span class="sxs-lookup"><span data-stu-id="6065b-119">Starting in the Finance version 10.0.9 (April 2020 release), the user interface of the ER format lookup that is implemented by using the ER framework API, has been extended.</span></span> <span data-ttu-id="6065b-120">Можно выбрать существующие форматы ER, которые на экспресс-вкладке **Выбор конфигурации формата**.</span><span class="sxs-lookup"><span data-stu-id="6065b-120">You can still select the existing ER formats, which on the **Select format configuration** FastTab.</span></span> <span data-ttu-id="6065b-121">В дополнение к этому расширенный поиск предлагает новый вариант поиска в глобальном репозитории (GR), чтобы найти нужные форматы ER.</span><span class="sxs-lookup"><span data-stu-id="6065b-121">In addition to that, the extended lookup offers the new option to search the Global repository (GR) to locate specific ER formats.</span></span> <span data-ttu-id="6065b-122">Все форматы ER для GR предлагаются на экспресс-вкладке **Импорт из глобального репозитория**.</span><span class="sxs-lookup"><span data-stu-id="6065b-122">All ER formats of the GR are offered on the **Import from Global repository** FastTab.</span></span>

<span data-ttu-id="6065b-123">[![Страница параметров внешней торговли](./media/ER-ExtLookup-Lookup3.png)](./media/ER-ExtLookup-Lookup3.png)</span><span class="sxs-lookup"><span data-stu-id="6065b-123">[![Foreign trade parameters page](./media/ER-ExtLookup-Lookup3.png)](./media/ER-ExtLookup-Lookup3.png)</span></span>

<span data-ttu-id="6065b-124">Аналогично экспресс-вкладке **Выбор конфигурации формата** на экспресс-вкладке **Импорт из глобального репозитория** отображаются только форматы ER, применимые к бизнес-процессу, для которого в поле поиска выбран формат ER.</span><span class="sxs-lookup"><span data-stu-id="6065b-124">Similar to the **Select format configuration** FastTab, the **Import from Global repository** FastTab shows only the ER formats that are applicable to the business process for which an ER format is selected in this lookup field.</span></span> <span data-ttu-id="6065b-125">В этом примере формирование декларации Интрастат.</span><span class="sxs-lookup"><span data-stu-id="6065b-125">In this example, the generation of Intrastat declaration.</span></span> <span data-ttu-id="6065b-126">Формат ER применяется для компании, в которой в данный момент зарегистрирован пользователь, в зависимости от контекста страны компании.</span><span class="sxs-lookup"><span data-stu-id="6065b-126">The ER format is applicable for the company to which the user is currently signed in, depending on the company country context.</span></span>

<span data-ttu-id="6065b-127">При выборе формата ER на экспресс-вкладке **Импорт из глобального репозитория** выбранная [конфигурация](general-electronic-reporting.md#Configuration) формата ER импортируется из GR в текущий экземпляр Finance.</span><span class="sxs-lookup"><span data-stu-id="6065b-127">When you select an ER format on the **Import from Global repository** FastTab, the selected ER format [configuration](general-electronic-reporting.md#Configuration) is imported from the GR to the current Finance instance.</span></span>

<span data-ttu-id="6065b-128">[![Страница параметров внешней торговли](./media/ER-ExtLookup-FormatImport.png)](./media/ER-ExtLookup-FormatImport.png)</span><span class="sxs-lookup"><span data-stu-id="6065b-128">[![Foreign trade parameters page](./media/ER-ExtLookup-FormatImport.png)](./media/ER-ExtLookup-FormatImport.png)</span></span>

<span data-ttu-id="6065b-129">Затем, если импорт выполнен успешно, ссылка на импортированный формат ER сохраняется в этом поле поиска.</span><span class="sxs-lookup"><span data-stu-id="6065b-129">Then, if the import completes successfully, the reference to the imported ER format is stored in this lookup field.</span></span> <span data-ttu-id="6065b-130">Обратите внимание, что при первом обращении к GR необходимо перейти по ссылке, указанную для регистрации в [Regulatory Configuration Service](https://aka.ms/rcs) (RCS), которая используется для управления доступом к хранилищу GR.</span><span class="sxs-lookup"><span data-stu-id="6065b-130">Note that when you access the GR for the first time, you need to follow the link provided to sign up for the [Regulatory Configuration Service](https://aka.ms/rcs) (RCS) that is used to manage access to the GR storage.</span></span>

<span data-ttu-id="6065b-131">[![Страница параметров внешней торговли](./media/ER-ExtLookup-RepoSignUp.png)](./media/ER-ExtLookup-RepoSignUp.png)</span><span class="sxs-lookup"><span data-stu-id="6065b-131">[![Foreign trade parameters page](./media/ER-ExtLookup-RepoSignUp.png)](./media/ER-ExtLookup-RepoSignUp.png)</span></span>

<span data-ttu-id="6065b-132">По умолчанию на экспресс-вкладке **Импорт из глобального репозитория** представлен список форматов ER из временного хранилища, которое автоматически создается на основе содержания GR, чтобы повысить производительность системы.</span><span class="sxs-lookup"><span data-stu-id="6065b-132">By default, the **Import from Global repository** FastTab presents the list of ER formats from the temporary storage that is automatically created based on the GR content for performance improvements.</span></span> <span data-ttu-id="6065b-133">Это происходит, когда экспресс-вкладка **Импорт из глобального репозитория** открывается в первый раз, что займет несколько секунд.</span><span class="sxs-lookup"><span data-stu-id="6065b-133">This happens when the **Import from Global repository** FastTab is opened the first time, which may take several seconds.</span></span>

<span data-ttu-id="6065b-134">Если нужный формат ER не отображается на экспресс-вкладке **Импорт из глобального репозитория**, но вы уверены, что этот формат ER хранится в GR, выберите параметр **Синхронизировать**.</span><span class="sxs-lookup"><span data-stu-id="6065b-134">If you do not see the required ER format in the **Import from Global repository** FastTab, but you are sure that this ER format is stored in the GR, select the **Synchronize** option.</span></span> <span data-ttu-id="6065b-135">Это приведет к обновлению временного хранилища и синхронизирует его с текущим содержимым GR.</span><span class="sxs-lookup"><span data-stu-id="6065b-135">This will update the temporary storage and synchronize it with the current content of the GR.</span></span>

## <a name="feature-activation"></a><span data-ttu-id="6065b-136">Активация функций</span><span class="sxs-lookup"><span data-stu-id="6065b-136">Feature activation</span></span>

<span data-ttu-id="6065b-137">Доступность этих функций управляется функцией **Расширенный поиск конфигураций формата ER, позволяющий запросить глобальный репозиторий** в **управлении функциями**.</span><span class="sxs-lookup"><span data-stu-id="6065b-137">The availability of this functionality is controlled by the feature **Extended lookup of ER format configurations allowing to inquire the Global repository** in the **Feature management**.</span></span> <span data-ttu-id="6065b-138">По умолчанию эта функция включена.</span><span class="sxs-lookup"><span data-stu-id="6065b-138">This feature is enabled by default.</span></span>

<span data-ttu-id="6065b-139">[![Страница управления функциями](./media/ER-ExtLookup-FeatureMngt.png)](./media/ER-ExtLookup-FeatureMngt.png)</span><span class="sxs-lookup"><span data-stu-id="6065b-139">[![Feature management page](./media/ER-ExtLookup-FeatureMngt.png)](./media/ER-ExtLookup-FeatureMngt.png)</span></span>

## <a name="security-considerations"></a><span data-ttu-id="6065b-140">Вопросы безопасности</span><span class="sxs-lookup"><span data-stu-id="6065b-140">Security considerations</span></span>

<span data-ttu-id="6065b-141">Привилегия **Ведение конфигурационных репозиториев** (**ERMaintainSolutionRepositories**) управляет доступом к GR для пользователя, открывающего поиск формата ER, используя включенную экспресс-вкладку **Импорт из глобального репозитория**.</span><span class="sxs-lookup"><span data-stu-id="6065b-141">The **Maintain configuration repositories** (**ERMaintainSolutionRepositories**) privilege controls access to the GR for a user opening the ER format lookup with the enabled **Import from Global repository** FastTab.</span></span> <span data-ttu-id="6065b-142">Чтобы разрешить пользователям доступ к содержимому GR из поиска формата ER, необходимо изменить настройки безопасности, предоставив привилегию **ERMaintainSolutionRepositories** пользователям либо непосредственно, либо используя уже назначенные роли и обязанности.</span><span class="sxs-lookup"><span data-stu-id="6065b-142">To allow users to access the GR content from the ER format lookups, you need to change the security settings by granting the **ERMaintainSolutionRepositories** privilege to users either directly or by using already assigned roles and duties.</span></span>

<span data-ttu-id="6065b-143">Следующий снимок экрана показывает, как эта привилегия может быть предоставлена пользователям, которым назначена роль **Бухгалтер**.</span><span class="sxs-lookup"><span data-stu-id="6065b-143">The following screenshot shows how this privilege can be granted to users who are assigned to the **Accountant** role.</span></span> <span data-ttu-id="6065b-144">Эта роль позволяет пользователям настраивать параметры внешней торговли и настраивать ссылки на форматы ER в полях **Сопоставление форматов файлов** и **Сопоставление форматов отчета** на странице **Параметры внешней торговли**.</span><span class="sxs-lookup"><span data-stu-id="6065b-144">This role makes allows users to configure foreign trade parameters and set up references to the ER formats in the **File format mapping** and **Report format mapping** fields on the **Foreign trade parameters** page.</span></span>

<span data-ttu-id="6065b-145">[![Страница конфигурации безопасности](./media/ER-ExtLookup-SecuritySetting.png)](./media/ER-ExtLookup-SecuritySetting.png)</span><span class="sxs-lookup"><span data-stu-id="6065b-145">[![Security configuration page](./media/ER-ExtLookup-SecuritySetting.png)](./media/ER-ExtLookup-SecuritySetting.png)</span></span>

## <a name="limitations"></a><span data-ttu-id="6065b-146">Ограничения</span><span class="sxs-lookup"><span data-stu-id="6065b-146">Limitations</span></span>

<span data-ttu-id="6065b-147">Доступ к GR в формате ER сейчас поддерживается только в том случае, если выбраны форматы ER, используемые для создания исходящих документов.</span><span class="sxs-lookup"><span data-stu-id="6065b-147">Access to the GR in the ER format lookup is currently only supported for the selection of ER formats that are used to generate outbound documents.</span></span>

## <a name="frequently-asked-questions"></a><span data-ttu-id="6065b-148">Вопросы и ответы</span><span class="sxs-lookup"><span data-stu-id="6065b-148">Frequently asked questions</span></span>

### <a name="why-cant-i-access-the-global-repository-from-the-er-format-lookup"></a><span data-ttu-id="6065b-149">Почему не удается получить доступ к глобальному репозиторию из поиска формата ER?</span><span class="sxs-lookup"><span data-stu-id="6065b-149">Why can't I access the Global repository from the ER format lookup?</span></span>

<span data-ttu-id="6065b-150">Если включен **Расширенный поиск конфигураций формата ER, позволяющий запросить глобальный репозиторий** на странице **Управление функциями**, но при этом пользователи не смогут просматривать форматы ER на экспресс-вкладке **Импорт из глобального репозитория** и параметр **Синхронизация** является видимым, но выключенным, убедитесь, что привилегия **Ведение конфигурационных репозиториев** (**ERMaintainSolutionRepositories**) предоставлена пользователю.</span><span class="sxs-lookup"><span data-stu-id="6065b-150">If you have enabled the **Extended lookup of ER format configurations allowing to inquire the Global repository** feature on the **Feature management** page, but users can't see ER formats on the **Import from Global repository** FastTab and the **Synchronize** option is visible but disabled, make sure that the **Maintain configuration repositories** (**ERMaintainSolutionRepositories**) privilege has been granted to the user.</span></span> <span data-ttu-id="6065b-151">Для получения этой привилегии обратитесь к системному администратору.</span><span class="sxs-lookup"><span data-stu-id="6065b-151">Contact your system administrator to receive this privilege.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="6065b-152">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="6065b-152">Additional resources</span></span>

- [<span data-ttu-id="6065b-153">Обзор электронной отчетности (ER)</span><span class="sxs-lookup"><span data-stu-id="6065b-153">Electronic reporting (ER) overview</span></span>](general-electronic-reporting.md)
- [<span data-ttu-id="6065b-154">API платформы электронной отчетности (ER)</span><span class="sxs-lookup"><span data-stu-id="6065b-154">Electronic reporting (ER) framework API</span></span>](er-apis-app73.md)
- [<span data-ttu-id="6065b-155">Управление жизненным циклом конфигураций электронной отчетности (ER)</span><span class="sxs-lookup"><span data-stu-id="6065b-155">Manage Electronic reporting (ER) configurations lifecycle</span></span>](general-electronic-reporting-manage-configuration-lifecycle.md)
