---
title: Использование источников данных USER INPUT PARAMETER для указания параметров отчета
description: В этом разделе описывается, как использовать источники данных USER INPUT PARAMETER для указания параметров отчетов, которые требуется создать.
author: NickSelin
ms.date: 04/20/2022
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERModelMappingDesigner, EROperationDesigner
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: 220314
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2020-05-01
ms.dyn365.ops.version: Version 10.0.27
ms.openlocfilehash: 4e431c9dd59080af17fa073547073037ba233288
ms.sourcegitcommit: 6c1bf233748c4bc70fc5a1a9711758cdfd9e07dc
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/19/2022
ms.locfileid: "8782321"
---
# <a name="use-user-input-parameter-data-sources-to-specify-parameters-for-a-report"></a>Использование источников данных USER INPUT PARAMETER для указания параметров отчета

[!include[banner](../includes/banner.md)]

При создании [сопоставления модели](er-overview-components.md#model-mapping-component) [электронного отчета](general-electronic-reporting.md) (ER) и компонентов [формата](er-overview-components.md#format-component) электронной отчетности можно использовать источники данных типа *USER INPUT PARAMETER* для получения необходимых значений, которые могут быть указаны в полях ввода данных в диалоговом окне во время выполнения, до начала выполнения формата электронной отчетности. В этом разделе описаны поддерживаемые в настоящее время источники данных *USER INPUT PARAMETER*.

## <a name="mandatory-properties"></a><a name="mandatory-properties"></a>Обязательные свойства

Необходимо указать следующие свойства для источников данных каждого типа *USER INPUT PARAMETER*.

- В поле **Имя** введите внутреннее имя источника данных. Это имя можно использовать в других [выражениях](er-formula-language.md) и привязках настроенного сопоставления модели или компонента формата.

## <a name="optional-properties"></a><a name="optional-properties"></a>Необязательные свойства

Можно дополнительно указать следующие свойства для источников данных типа *USER INPUT PARAMETER*.

- В поле **Метка** укажите метку, используемую для соответствующего поля ввода данных в диалоговом окне во время выполнения. Можно добавить разный текст метки для других кодов языков, нажав поле **Метка** и выбрав **Перевести**.
- В поле **Справка** укажите текст справки, отображаемый в режиме разработки в нижней части страницы **Конструктор формата** или страницы **Конструктор сопоставления модели**, когда выбран редактируемый источник данных типа *USER INPUT PARAMETER*. Этот текст может предоставлять дополнительные сведения об источнике данных, чтобы помочь пользователям в настройке редактируемого формата или компонента сопоставления модели. Можно добавить отдельный текст справки для других кодов языков, выбрав **Перевод**.

    > [!NOTE]
    > Кнопка **Перевести**, которую можно использовать для добавления [меток и текста на конкретных языках](er-design-multilingual-reports.md#format-component) становится доступна только после добавления источника данных, сохранения изменений и повторного открытия источника данных для редактирования.

- В поле **Только для чтения** настройте выражение, которое возвращает *[логическое](er-formula-supported-data-types-primitive.md#boolean)* значение.

    - Если настроенное выражение возвращает значение **Истина** во время выполнения, соответствующее поле ввода данных в диалоговом окне будет отображаться серым цветом, и изменить его значение будет невозможно.
    - Если настроенное выражение возвращает значение **Ложь** во время выполнения или если ни одно выражение не настроено, соответствующее поле ввода данных в диалоговом окне становится доступным, и можно изменить его значение.

- В поле **Значение по умолчанию** настройте выражение, которое возвращает значение типа параметра, на который дана ссылка. Это значение можно использовать для заполнения значения по умолчанию в соответствующем поле ввода данных в диалоговом окне во время выполнения.

    При запуске формата электронной отчетности значение, введенное в связанном поле ввода данных в диалоговом окне во время выполнения, сохраняется в памяти как ранее использованное значение. Ранее использованные значения сохраняются отдельно для каждого поля, запущенного формата ER, текущего пользователя и текущей организации (компании).

    - Установите для параметра **Всегда сбрасывать до значения по умолчанию** значение **Да**, если значение, возвращаемое выражением **Значение по умолчанию**, должно всегда использоваться как значение по умолчанию, независимо от ранее используемого значения.
    - Установите для параметра **Всегда сбрасывать до значения по умолчанию** значение **Нет**, если значение, возвращаемое значением выражения **Значение по умолчанию**, должно использоваться как значение по умолчанию, только если ранее используемое значение отсутствует.

    > [!NOTE]
    > Если для параметра **Всегда сбрасывать до значения по умолчанию** установлено значение **Да**, то выражение должно быть настроено в поле **Значение по умолчанию**.

- Если для параметра **Разрешить выбор нескольких элементов** установить **Да**, то можно выбрать несколько значений для настроенного параметра во время выполнения. Если для этого параметра установить значение **Нет**, то можно выбрать только одно значение.

    > [!NOTE]
    > Этот параметр неприменим для всех типов *SER INPUT PARAMETER*. Во время разработки создается исключение, сообщающее пользователю, что настроенный входной параметр пользователя не поддерживает выбор нескольких элементов и что можно выбрать или ввести только одно значение.
    >
    > Если для параметра **Разрешить выбор нескольких элементов** установлено значение **Да**, а в поле **Значение по умолчанию** указано выражение, это выражение можно использовать для установки только одного значения по умолчанию.

- Выберите параметр **Изменить видимость**, чтобы указать, следует ли отображать настроенный параметр в диалоговом окне во время выполнения.

    > [!NOTE]
    > Видимость по умолчанию источников данных типа *USER INPUT PARAMETER* зависит от компонента ER, в котором они хранятся.
    >
    > - Если источник данных настроен в компоненте формата, он является видимым по умолчанию.
    > - Если источник данных настроен в компоненте сопоставления модели, он видим только в том случае, если значение источника данных влияет на результат при выполнении компонента ER. Например, был добавлен источник данных, но он не использовался в выражениях и привязках к текущему компоненту сопоставления модели. В этом случае по умолчанию соответствующее поле ввода данных не будет отображаться в диалоговом окне во время выполнения. 

    На странице **Конструктор формул** в поле **Формула** выполните настройку выражения, возвращающего *логическое* значение.

    - Если настроенное выражение возвращает значение **Истина** во время выполнения или если ни одно выражение не настроено, соответствующее поле ввода данных в диалоговом окне становится видимым во время выполнения.
    - Если настроенное выражение возвращает значение **Ложь**, соответствующее поле ввода данных в диалоговом окне становится скрытым во время выполнения. При вызове другими выражениями во время выполнения оно возвращает значение по умолчанию, ранее использованное значение или значение по умолчанию для текущего типа данных, в зависимости от других настроек.

## <a name="type-specific-properties"></a>Свойства, зависящие от типа

### <a name="application-dependent-user-input-parameter"></a>Входной параметр пользователя, зависящий от приложения

Используйте источник данных типа **Общие** \> **Входной параметр пользователя** для получения необходимого значения или значений типа данных, указанного для текущего экземпляра приложения Microsoft Dynamics 365 Finance. При добавлении источника данных этого типа в компонент электронной отчетности укажите следующие свойства:

- В поле **Имя типа данных Operations (EDT, enum)** выберите [расширенный тип данных (EDT)](../extensibility/extensible-edts.md) приложения или перечисление приложения.

> [!NOTE]
> Рекомендуется проанализировать выражения, которые настроены в полях **Только для чтения** и **Значение по умолчанию** при изменении ссылки на **Имя типа данных Operations (EDT, enum)** в изменяемом источнике данных для этого типа *USER INPUT PARAMETER*.

На следующем рисунке показаны свойства источника данных `$TaxRegNum`, которые были настроены в конфигурации формата электронной отчетности **Instat XML (DE)**. Этот источник данных настроен на использование EDT *Описание* для предложения поля ввода данных **Налоговый регистрационный номер** в диалоговом окне во время выполнения.

![Свойства источника данных типа USER INPUT PARAMETER в диалоговом окне страницы конструктора формата.](./media/er-user-input-parameter-data-sources-01.png)

На следующем рисунке показано диалоговое окно, отображаемое во время выполнения, когда конфигурация формата электронной отчетности **Instat XML (DE)** выполняется для [создания](../../../finance/localizations/tasks/eur-00002-eu-intrastat-declaration.md) декларации Интрастат. Обратите внимание, что настроенное поле **Налоговый регистрационный номер** доступно для ввода данных.

![Диалоговое окно "Отчет Интрастат" выполняемого формата электронной отчетности на странице "Интрастат".](./media/er-user-input-parameter-data-sources-02.png)

### <a name="data-model-enumeration-user-input-parameter"></a>Входной пользовательский параметр  перечисления модели данных

Используйте источник данных типа **Модель данных** \> **Входной параметр пользователя перечисления**, чтобы получить требуемое значение или значения для одного [перечисления модели данных](er-formula-supported-data-types-primitive.md#enumeration). При добавлении источника данных этого типа в компонент электронной отчетности укажите следующие свойства:

- В поле **Модель** укажите ссылку на базовую модель данных.
- В поле **Перечисление модели** укажите ссылку на перечисление модели данных.
- В поле **Версия** выберите номер редакции компонента модели данных электронной отчетности, содержащий перечисление модели, на которое указывает ссылка.

    > [!TIP]
    > Во время разработки можно оставить поле **Версия** пустым, чтобы получить доступ к списку перечислений для компонента модели данных, на который указывает ссылка и который находится в черновой версии соответствующей конфигурации модели данных электронной отчетности. Таким образом можно одновременно редактировать черновую версию сопоставления модели или компонента формата и черновую версию компонента базовой модели данных.
    >
    > Однако, обратите внимание, что поле **Версия** может оставаться пустым только в черновой версии сопоставления модели или компонента формата. При изменении статуса сопоставления модели электронной отчетности или конфигурации формата из статуса **Черновик** в статус **Завершено** это поле автоматически заполняется самым высоким номером версии модели, который доступен в текущем экземпляре Finance. Если введено новое перечисление или новое значение перечисления в черновой версии базовой модели данных и на нее дана ссылка в редактируемом сопоставлении модели или компоненте формата, необходимо завершить эту черновую версию конфигурации базовой модели данных до завершения черновой версии сопоставления модели электронной отчетности или конфигурации формата. В противном случае исключение "Путь не найден" будет создано при изменении статуса сопоставления модели или конфигурации формата со статуса **Черновик** на статус **Завершено**. Появится сообщение о том, что в базовой модели данных отсутствуют перечисление или значение перечисления, на которые указывает ссылка.

На следующем рисунке показаны свойства источника данных `$ReportDirection`, которые были настроены в конфигурации формата электронной отчетности **Instat XML (DE) Contoso**. Конфигурация **Instat XML (DE) Contoso** [получена](general-electronic-reporting.md#Configuration) из конфигурации **Instat XML (DE)**. Этот источник данных настроен на использование перечисления *ReportDirection* для предложения соответствующего поля подстановки в диалоговом окне во время выполнения.

![Свойства источника данных типа USER INPUT PARAMETER в диалоговом окне страницы конструктора формата.](./media/er-user-input-parameter-data-sources-03.png)

### <a name="format-enumeration-user-input-parameter"></a>Входной параметр пользователя перечисления форматов

Используйте источник данных типа **Перечисление форматов** \> **Входной параметр пользователя перечисления**, чтобы получить требуемое значение или значения для одного перечисления форматов. При добавлении источника данных этого типа в компонент электронной отчетности укажите следующие свойства:

- В поле **Перечисление форматов** укажите перечисление редактируемого формата.

> [!NOTE]
> Источники данных этого типа могут быть настроены только в области редактируемого компонента формата.

## <a name="additional-resources"></a>Дополнительные ресурсы

[Конструктор формул в электронной отчетности](general-electronic-reporting-formula-designer.md)

[Инициирование значений источника данных типа USER INPUT PARAMETER из исходного кода](er-initiate-uip-data-source-value-from-source-code.md)
