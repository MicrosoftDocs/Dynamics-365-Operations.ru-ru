---
title: "Обзор обновления книги амортизации"
description: "В предыдущих выпусках имеются две концепции переоценки для основных средств — модели стоимости и журналы амортизации. В Microsoft Dynamics 365 for Operations версии 1611 функция модели стоимости и функция журнала амортизации были объединены в одно понятие книги. В этом разделе приводятся некоторые сведения, которые следует учитывать для обновления."
author: twheeloc
manager: AnnBe
ms.date: 04/04/2017
ms.topic: article
ms.prod: 
ms.service: Dynamics365Operations
ms.technology: 
audience: Application User, Developer
ms.search.scope: Operations, Core
ms.custom: 221624
ms.assetid: cf434099-36f9-4b0f-a7c8-bed091e34f39
ms.search.region: global
ms.author: saraschi
ms.search.validFrom: 2016-11-30
ms.dyn365.ops.version: Version 1611
translationtype: Human Translation
ms.sourcegitcommit: bec019d218d80ba059d5a1c232072f46b1ae3ee2
ms.openlocfilehash: d29cb7bc5acc29be93332b4211adebc4486a7a25
ms.lasthandoff: 03/31/2017


---

# <a name="depreciation-book-upgrade-overview"></a>Обзор обновления книги амортизации

В предыдущих выпусках имеются две концепции переоценки для основных средств — модели стоимости и журналы амортизации. В Microsoft Dynamics 365 for Operations версии 1611 функция модели стоимости и функция журнала амортизации были объединены в одно понятие книги. В этом разделе приводятся некоторые сведения, которые следует учитывать для обновления. 

В процессе обновления ваша существующая настройка и все существующие проводки будут перемещены в структуру новой книги. Модели стоимости будут оставаться как есть на данный момент в качестве книги, которая выполняет разноску в главную книгу. Журналы амортизации будет перемещены в книгу, в которой для параметра **Разноска в главную книгу** задано значение **Нет**. Имена книг журналов амортизации перемещается к наименованию журнала главной книги с использованием слоя разноски, равным **нет**. Проводки журнала амортизации будут перемещены проводок с основными средствами. 

Перед выполнением обновления данных следует понимать два доступных варианта обновления строк книг журналов амортизации в ваучерах проводок и номерной серии, которая будет использоваться для серии ваучеров. 

Вариант 1. **Номерная серия определяется системой** — это вариант по умолчанию для оптимизации производительности обновления. Обновление не будет использовать инфраструктуру номерных серий, а будет распределять ваучеры с подходом, основанным на наборах. После обновления, будет создана новую номерную серию с **следующий набор номеров** соответствующим образом на основе обновленных проводок. По умолчанию будут последовательность номеров, используемая в FADBUpgr\#\#\#\#\#\#\#\#\# формат. Существует несколько параметров, можно настроить формат, при использовании этого подхода:

-   **Код номерной серии** — код для идентификации номерной серии. Этот код номерной серии не может существовать, поскольку он будет создан, то после обновления.
    -   Постоянное имя: **NumberSequenceDefaultCode**
    -   Значение по умолчанию: "FADBUpgr"
-   **Префикс** — постоянное строковое значение, которое будет использоваться как префикс для кодов ваучеров.
    -   Постоянное имя: **NumberSequenceDefaultParameterPrefix**
    -   Значение по умолчанию: "FADBUpgr"
-   **Буквенно-цифровая длина** — длина буквенно-цифрового сегмента номерной серии.
    -   Имя константы: ** NumberSequenceDefaultParameterAlpanumericLength **
    -   Значение по умолчанию: 9
-   **Начальный номер** — первый номер, используемый в номерной серии.
    -   Имя константы: ** NumberSequenceDefaultParameterStartNumber **
    -   Значение по умолчанию: 1

Вариант 2: **существующие пользовательские номерной серии** — этот параметр позволяет определить номерную серию, которая будет использоваться для обновления. Рекомендуется использовать этот параметр, если требуется дополнительная настройка номерной серии. Чтобы использовать номерную серию, следует изменить класс обновления ReleaseUpdateDB70\_FixedAssetJournalDepBookRemovalDepBookJournalTrans со следующей информацией:

-   **Код номерной серии** — код номерной серии.
    -   Имя константы: ** NumberSequenceExistingCode **
    -   Значение по умолчанию: отсутствует, это необходимо обновить с кодом номерной серии.
-   **Общая номерная серия** — логическое значение, чтобы определить область действия номерной серии. Используйте значение «true» для общих номерных серий во всех компаниях и «false» для области действия в пределах конкретной компании. При использовании «false», в каждой компании, содержащей операции журнала амортизации должен существовать номерной серии с указанным именем. В каждый раздел, содержащий проводки журнала амортизации существуют общих номерных серий.
    -   Имя константы: ** NumberSequenceExistingIsShared **
    -   Значение по умолчанию: true

Параметры находятся в начале ReleaseUpdateDB70\_FixedAssetJournalDepBookRemovalDepBookJournalTrans класса. 

*Укажите предпочтительнее подход на основе распределения операции*<ph id="t1">
</ph>*/ / значение true, если необходимо использовать существующий код номерной серии*<ph id="t2">
</ph>*/ / ЛОЖЬ, если планируется использовать системные номерной серии (по умолчанию)* const логическое NumberSequenceUseExistingCode = ЛОЖЬ;  

*При использовании подхода системные номерной серии, задайте параметры для номерной серии. *<ph id="t3">
</ph>*/ / Новую номерную серию, которые будут создаваться на основе этих параметров.* Строка const NumberSequenceDefaultCode = «FADBUpgr»; Строка const NumberSequenceDefaultParameterPrefix = «FADBUpgr»; const int NumberSequenceDefaultParameterAlpanumericLength = 9; const int NumberSequenceDefaultParameterStartNumber = 1;   

*При использовании существующего метод номера последовательности, задайте существующего кода номерной серии. *<ph id="t4">
</ph>*/ / Операции распределения будут переходить по строкам для существующих номерных серий.* Строка const NumberSequenceExistingCode = ''; */ / Указания области существующего кода номерной серии*<ph id="t1">
</ph>*/ / значение true, если указанной номерной серии используется совместно*<ph id="t2">
</ph>*/ / ЛОЖЬ, если указанной номерной серии относится к компании*<ph id="t3">
</ph>*/ / системные номерной серии по умолчанию будет использоваться, если не найден с заданной областью кода номерной серии.* const boolean NumberSequenceExistingIsShared = true; 

Перестройте проект, содержащий этот класс, после изменения констант. 

При использовании созданное системой номерной серии подхода (параметр 1) обновления использует обработки на основе наборов для распределения кодов операций, как указано в параметрах сценария обновления. Он также создаст новую номерную серию с указанными параметрами после распределения. 

При использовании подхода с определяемой пользователем существующей номерной серией (вариант 2) обновление данных проверяет, существует ли номерная серия с указанной областью действия в базе данных для каждого раздела и компании с проводками журнала амортизации. Если он существует, процесс обновления будет использовать обработку по строкам для распределения кодов операций в соответствии с номерной серии, с помощью структуры номерной серии. Если с заданной областью номерная серия не существует, процесс обновления будет использовать подход системные номерной серии по умолчанию для распределения кодов операций и создать новую номерную серию с параметрами, установленный по умолчанию после распределения.

В любом из подходов сценарий обновления данных также будет использовать номерную серию для поля **Серии ваучеров** для новых имен журналов ГК, созданных для старых имен книг журналов амортизации.


