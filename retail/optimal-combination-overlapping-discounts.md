---
title: "Определения оптимального сочетания Перекрытие скидок"
description: "Перекрытие скидок, необходимо определить, сочетание Перекрытие скидок, создающими низкий общей суммы проводки или самый высокий общей скидки. Когда сумму скидки варьируется в зависимости от цены продуктов, приобретенных, как обычное «купить 1, избегайте 1% X» скидка розничной торговли (BOGO), этот процесс становится проблемой комбинаторные задачи оптимизации."
author: kfend
manager: AnnBe
ms.date: 04/04/2017
ms.topic: article
ms.prod: 
ms.service: Dynamics365Operations
ms.technology: 
audience: Application User, IT Pro
ms.reviewer: kfend
ms.search.scope: AX 7.0.0, Operations, Core
ms.custom: 89643
ms.assetid: 09843c9a-3e19-4e4a-a8ce-80650f2095f9
ms.search.region: global
ms.search.industry: Retail
ms.author: kfend
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1
translationtype: Human Translation
ms.sourcegitcommit: 0c6a7bdc4ba82dd57ab3e395e6dfb0ae4de31fc4
ms.openlocfilehash: 31e5104045ed5b8fbfa3677a7f5702d551de4231
ms.lasthandoff: 03/31/2017


---

# <a name="determine-the-optimal-combination-of-overlapping-discounts"></a>Определения оптимального сочетания Перекрытие скидок

Перекрытие скидок, необходимо определить, сочетание Перекрытие скидок, создающими низкий общей суммы проводки или самый высокий общей скидки. Когда сумму скидки варьируется в зависимости от цены продуктов, приобретенных, как обычное «купить 1, избегайте 1% X» скидка розничной торговли (BOGO), этот процесс становится проблемой комбинаторные задачи оптимизации.

В этой статье применяется к Microsoft Dynamics AX 2012 R3 КБ 3105973 (выпущено 2 ноября 2015 г.) или более поздней версии, а также для февраля 2016 выпуска Microsoft Dynamics AX. Чтобы определить комбинации Перекрытие скидок для применения своевременно и вновь форматируемых распродаж возможностей, доступных в Microsoft Dynamics AX for Retail, был представлен метод применения Перекрытие скидок. Мы называем этот новый метод **маржинальной прибыли значение ранжирования**. Минимальное значение ранжирования используется в том случае, если время, необходимое для оценки возможных комбинаций Перекрытие скидок превышает пороговое значение, можно настроить на **параметры Retail** страницы в Dynamics AX. В значении маржинальной прибыли ранжирование метода значение рассчитывается для каждой Перекрытие скидок с помощью значение скидки на общих продуктов. Минимальное значение, относительного из самое высокое значение относительного затем применяются с перекрытием скидки. Дополнительные сведения о методе нового см. в разделе «Маржинальной прибыли значение» далее в этой статье. Минимальное значение ранжирования не используется, когда суммы скидок для продукта не влияет на другой продукт в проводку. Например этот метод не используется для двух простых скидок или для простого скидку и скидку один продукт количество.

## <a name="discount-examples"></a>Примеры скидки
Можно создать неограниченное число розничных скидок по поводу общего набора продуктов в Dynamics AX. Тем не менее поскольку нет ограничения, могут возникать проблемы с производительностью, при попытке расчета скидок, которые должны использоваться в различных продуктах. Следующие примеры иллюстрируют этой проблемы с большей степенью детализации. В примере 1 запустите с помощью двух продуктов и двух Перекрытие скидок. Затем в примере 2, Показать развитием расхода по мере добавления дополнительных продуктов.

### <a name="example-1-two-products-and-two-discounts"></a>Пример 1: Два продукта и двух скидок

В этом примере два продукта необходимы для определяемая для скидки при каждом и скидках не может использоваться вместе. Скидки в данном примере **наилучшей цены** скидок. Оба продукта соответствуют условиям обеих скидок. Здесь приведены две скидки. [![Пересечения скидки в поле со списком 01](./media/overlapping-discount-combo-01.jpg)](./media/overlapping-discount-combo-01.jpg) для любого два продукта лучше этих двух скидок зависит от цены двух продуктов. Когда цены оба продукта равна или почти равно, лучше скидки 1. Когда цены одного продукта существенно меньше, чем цену продукта, лучше скидка 2. Вот математические правило для оценки этих двух скидок друг с другом: [![Overlapping поле скидку со списком 02](./media/overlapping-discount-combo-02.jpg)](./media/overlapping-discount-combo-02.jpg) Обратите внимание, что когда-нибудь цены продукта 2 равна цену продукта 1, двух скидок равны. В этом примере процент скидки для вступления в силу для скидки 1 различной из нескольких процентов (когда цены на два продукта являются далеко друг от друга) для более 25 процентов (когда эти продукты имеют ту же цену). Процент скидки для вступления в силу для скидки 2 является фиксированной. Это всегда 20 процентов. Поскольку процент скидки для вступления в силу для скидки 1 имеет диапазон, для которого может быть несколько больше или меньше, чем скидка 2, лучший скидка зависит от цены на два товара, следует вычесть. В этом примере расчет выполняется быстро, поскольку только двух скидок на продукты только два. Существует только два возможных комбинаций: одно приложение приложения скидки 1 или один скидки 2. Существует не комбинаций для расчета. Значение скидки при каждом вычисляется с помощью оба продукта и используется наиболее скидка.

### <a name="example-2-four-products-and-two-discounts"></a>Пример 2: Четыре продуктов и двух скидок

После этого используется четыре продуктов и один из двух скидок. Все четыре продукты для обеих скидок. Существует 12 возможных комбинаций. В итоге двух скидок применяется к операции в одну из трех комбинаций: два приложения скидки 1, два варианта использования поля Скидка 2 или один применения скидки 1 и одно приложение скидки 2. Чтобы проиллюстрировать возможных комбинаций, рассмотрим два разных набора четырех продуктов, имеющие разные цены:

-   Все четыре товара имеют ту же цену $15.00. В этом случае наилучшего сочетания скидки — два приложения скидки 1. Два продукта будет полной цены, а две будет меньше 50 процентов. Итоговая цена со скидкой для проводки отключено undiscounted общее количество $60 $45 (15 + 15 + 7,50 + 7,50), которая является $15 (25%). Скидка 2 — только $12 (20 процентов).
-   Два продукта каждого $20, один продукт является $15, а один продукт $5. В этом случае наилучшего сочетания скидки — один применение скидка 2 и одно приложение скидки 1. Следующие таблицы показана скидки.

Чтение таблиц, можно используйте один продукт из строки и одного продукта из столбца. Например в таблице для скидки 1, при объединении двух продуктов $20, вы получаете $10 из системы. В таблице 2 скидки при объединении $15 продукт и продукт $5, вы получаете $4 из системы. [![Пересечения скидки в поле со списком 03](./media/overlapping-discount-combo-03.jpg)](./media/overlapping-discount-combo-03.jpg) во-первых, нам найти наибольшее скидки, которая доступна в любой из двух продуктов с помощью ни скидки. Эти две таблицы отображает сумму скидки для всех комбинаций двух продуктов. Затененной части таблицы представляют либо случаев, где продукт сопоставлена сами, что мы не можем сделать или обратного связывания двух продуктов, которые создаются в той же сумма скидки и может быть пропущено. Просмотрев таблицы, можно посмотреть, скидка 1 для двух элементов $20 наибольшим скидки, которая доступна для ни скидки на всех четырех продуктов. (Эту скидку, выделяется зеленым в первой таблице.) Остаются еще только $15 продукт и продукт $5. Просмотрев эти две таблицы еще раз, можно увидеть, что для этих двух продуктов 1 $2.50 скидка предлагается, в то время как скидка $4 предлагается 2. Таким образом выбран параметр скидки 2. Общая скидка будет $14. Для упрощения данного обсуждения для визуализации, Вот два дополнительных таблиц, Показать процент скидки для вступления в силу для всех возможных комбинаций двух продуктов для обоих скидки 1 и 2 скидки. Только половина списка комбинаций включена, поскольку для этих двух скидок не имеет значения, порядок, в котором два продукта помещаются в скидку. Самый высокий действия скидки (25 процентов), выделяется зеленым цветом, а низкий действия скидки (10 процентов), выделяется красным цветом. [![Пересечения скидки в поле со списком 04](./media/overlapping-discount-combo-04.jpg)](./media/overlapping-discount-combo-04.jpg)**Примечание:** является когда отличаться от цены и конкурировать на два или более скидок, единственным способом обеспечения лучшего сочетания скидок для оценки обеих скидок и сравнить их.

## <a name="total-possible-combinations"></a>Всего возможных комбинаций
В этом разделе примере по-прежнему в предыдущем разделе. Мы добавлять дополнительные продукты и другой скидки и увидеть сколько комбинаций должны рассчитываться и по сравнению. Следующая таблица показывает номер о возможных комбинациях скидок при увеличении количества продукта. В таблице показано, что происходит при наличии двух Перекрытие скидок из предыдущего примера и когда имеются три перекрывающихся скидки. Количество возможных комбинациях скидок, необходимо оценить скоро превышает быстром компьютере вычисления и сравнения достаточно быстро приемлемым для проводок по розничной торговле. [![Пересечения скидки в поле со списком 05](./media/overlapping-discount-combo-05.jpg)](./media/overlapping-discount-combo-05.jpg) большого количества копий, даже когда или применения дополнительные Перекрытие скидок, общее число возможных комбинациях скидок быстро поступает миллионов и становится заметное время, необходимое для оценки и быстро выбрать лучший возможных комбинаций. Некоторые оптимизации были выполнены в ядро розничной цены сократить общее количество комбинаций, которые необходимо оценить. Тем не менее поскольку номера Перекрытие скидок и количеств в транзакции не только, большое количество сочетаний всегда должны будут вычисляться всякий раз, когда имеется Перекрытие скидок. Эта проблема проблема предназначено значение маржинальной прибыли ранжирование метод.

## <a name="marginal-value-method"></a>Метод стоимости маржинальной прибыли
Для решения все экспоненциально большее число комбинаций, которые необходимо оценить оптимизация существует, вычисляет значение каждого общего продукта каждого скидки на набор продуктов, которые могут быть применены два или несколько скидок для. Мы ссылаются на это значение как **маржинальной прибыли значение** скидки для общих продуктов. Минимальное значение при среднее значение за надбавки продукта в общую сумму скидки общие продукты включены в каждой скидки. Минимальное значение вычисляется добавлением Общая сумма скидки (DTotal), вычитания суммы скидки без общих продуктов (DMinus\\ Shared) и деления ее на количество общих продуктов (ProductsShared). [![Пересечения скидки в поле со списком 06](./media/overlapping-discount-combo-06.jpg)](./media/overlapping-discount-combo-06.jpg) после расчета маржинальной прибыли значение каждого скидки на продукты с общим набором скидок для общих продуктов в заказе, тщательное, от самого верхнего маржинальной прибыли к меньшему маржинальной прибыли. Для этого метода все остальные возможные скидки не сравниваются каждый раз после применения скидки один экземпляр. Вместо этого Перекрытие скидок по сравнению один раз и затем применяются в порядке. Дополнительные сравнение не выполняются. Можно настроить пороговое значение для включения метода маржинальной прибыли значение **скидки** вкладке **параметры Retail** страницы. Допустимое время для расчета общей скидки, зависит от отраслей розничной торговли. Тем не менее это время обычно оказывается в диапазоне от десятки одну секунду в миллисекундах.


